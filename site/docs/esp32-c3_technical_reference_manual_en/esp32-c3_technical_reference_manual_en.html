<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
 </head>
 <body>
  <h1>
   ESP32-C3
  </h1>
  <p block-type="Text">
   Technical Reference Manual Version 1.3
  </p>
  <p>
   <img src="_page_0_Picture_2.jpeg"/>
  </p>
  <p block-type="Text">
   www.espressif.com
  </p>
  <h1>
   About This Document
  </h1>
  <p block-type="Text">
   The ESP32-C3 Technical Reference Manual is targeted at developers working on low level software projects that use the ESP32-C3 SoC. It describes the hardware modules listed below for the ESP32-C3 SoC and other products in ESP32-C3 series. The modules detailed in this document provide an overview, list of features, hardware architecture details, any necessary programming procedures, as well as register descriptions.
  </p>
  <h1>
   Navigation in This Document
  </h1>
  <p block-type="Text">
   Here are some tips on navigation through this extensive document:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Release Status at a Glance on the very next page is a minimal list of all chapters from where you can directly jump to a specific chapter.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Use the Bookmarks on the side bar to jump to any specific chapters or sections from anywhere in the
     <a href="#page-2-0">
      document. Note this PDF d
     </a>
     ocument is configured to automatically display Bookmarks when open, which is necessary for an extensive document like this one. However, some PDF viewers or browsers ignore this setting, so if you don't see the Bookmarks by default, try one or more of the following methods:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Install a PDF Reader Extension for your browser;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Download this document, and view it with your local PDF viewer;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Set your PDF viewer to always automatically display the Bookmarks on the left side bar when open.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Use the native Navigation function of your PDF viewer to navigate through the documents. Most PDF viewers support to go Up, Down, Previous, Next, Back, Forward and Page with buttons, menu, or hot keys.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     You can also use the built-in GoBack button on the upper right corner on each and every page to go back to the previous place before you click a link within the document. Note this feature may only work with some Acrobat-specific PDF viewers (for example, Acrobat Reader and Adobe DC) and browsers with built-in Acrobat-specific PDF viewers or extensions (for example, Firefox).
    </li>
   </ul>
  </p>
  <h1>
   Release Status at a Glance
  </h1>
  <span id="page-2-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="4">
      Release Status at a Glance
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      No.
     </td>
     <td>
      Chapter
     </td>
     <td>
      Progress
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Part I. Microprocessor and Master
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      ESP-RISC-V CPU
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      GDMA Controller (GDMA)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      Part II. Memory Organization
      <br/>
      System and Memory
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
      eFuse Controller (EFUSE)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Part III. System Component
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      IO MUX and GPIO Matrix (GPIO, IO MUX)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      Reset and Clock
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      7
     </td>
     <td>
      Chip Boot Control
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
      Interrupt Matrix (INTERRUPT)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
      Low-power Management
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      10
     </td>
     <td>
      System Timer (SYSTIMER)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      11
     </td>
     <td>
      Timer Group (TIMG)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      12
     </td>
     <td>
      Watchdog Timers (WDT)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      13
     </td>
     <td>
      XTAL32K Watchdog Timers (XTWDT)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      14
     </td>
     <td>
      Permission Control (PMS)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      15
     </td>
     <td>
      World Controller (WCL)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td colspan="4">
      16
      <br/>
      System Registers (SYSREG)
      <br/>
      Published
      <br/>
      Published
     </td>
    </tr>
    <tr>
     <td>
      17
     </td>
     <td>
      Debug Assistant (ASSIST_DEBUG)
      <br/>
      Part V. Cryptography/Security Component
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      18
     </td>
     <td>
      SHA Accelerator (SHA)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      19
     </td>
     <td>
      AES Accelerator (AES)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      20
     </td>
     <td>
      RSA Accelerator (RSA)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      21
     </td>
     <td>
      HMAC Accelerator (HMAC)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      22
     </td>
     <td>
      Digital Signature (DS)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      23
     </td>
     <td>
      External Memory Encryption and Decryption (XTS_AES)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      24
     </td>
     <td>
      Clock Glitch Detection
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td colspan="4">
      25
      <br/>
      Random Number Generator (RNG)
      <br/>
      Published
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Part VII. Connectivity Interface
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      26
     </td>
     <td>
      UART Controller (UART)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      27
     </td>
     <td>
      SPI Controller (SPI)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      28
     </td>
     <td>
      I2C Controller (I2C)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      29
     </td>
     <td>
      I2S Controller (I2S)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      30
     </td>
     <td>
      USB Serial/JTAG Controller (USB_SERIAL_JTAG)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td>
      31
      <br/>
      32
     </td>
     <td>
      Two-wire Automotive Interface (TWAI)
      <br/>
      LED PWM Controller (LEDC)
     </td>
     <td>
      Published
      <br/>
      Published
     </td>
    </tr>
    <tr>
     <td>
      33
     </td>
     <td>
      Remote Control Peripheral (RMT)
     </td>
     <td>
      Published
     </td>
    </tr>
    <tr>
     <td colspan="4">
      Part VIII. Analog Signal Processing
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   Check the link or the QR code to make sure that you use the latest version of this document: https://www.espressif.com/sites/default/files/documentation/esp32-c3_technical_reference_ manual_en.pdf
  </p>
  <p>
   <img src="_page_3_Picture_2.jpeg"/>
  </p>
  <h1>
   Contents
  </h1>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Contents
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      I
     </th>
     <th>
     </th>
     <th>
      Microprocessor and Master
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
     </td>
     <td>
      ESP-RISC-V CPU
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1.1
     </td>
     <td>
     </td>
     <td colspan="3">
      Overview
     </td>
    </tr>
    <tr>
     <td>
      1.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1.3
      <br/>
      1.4
     </td>
     <td>
     </td>
     <td>
      Address Map
      <br/>
      Configuration and Status Registers (CSRs)
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      1.4.1
      <br/>
      Register Summary
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.4.2
     </td>
     <td>
      Register Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1.5
     </td>
     <td>
     </td>
     <td>
      Interrupt Controller
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.5.1
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.5.2
     </td>
     <td>
      Functional Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.5.3
     </td>
     <td>
      Suggested Operation
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      1.5.3.1
      <br/>
      Latency Aspects
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      1.5.3.2
      <br/>
      Configuration Procedure
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.5.4
     </td>
     <td>
      Register Summary
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.5.5
     </td>
     <td>
      Register Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1.6
     </td>
     <td>
      Debug
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.6.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.6.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.6.3
     </td>
     <td>
      Functional Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.6.4
      <br/>
      1.6.5
     </td>
     <td>
      Register Summary
      <br/>
      Register Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1.7
     </td>
     <td>
     </td>
     <td>
      Hardware Trigger
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.7.1
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.7.2
     </td>
     <td>
      Functional Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.7.3
     </td>
     <td>
      Trigger Execution Flow
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.7.4
     </td>
     <td>
      Register Summary
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.7.5
     </td>
     <td>
      Register Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1.8
     </td>
     <td>
     </td>
     <td>
      Memory Protection
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.8.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.8.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.8.3
     </td>
     <td>
      Functional Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      1.8.4
      <br/>
      1.8.5
     </td>
     <td>
      Register Summary
      <br/>
      Register Description
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
     </td>
     <td>
      GDMA Controller (GDMA)
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2.3
      <br/>
      2.4
     </td>
     <td colspan="3">
      Architecture
      <br/>
      Functional Description
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      2.4.2
     </th>
     <th>
      Peripheral-to-Memory and Memory-to-Peripheral Data Transfer
     </th>
     <th>
      63
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      2.4.3
     </td>
     <td>
      Memory-to-Memory Data Transfer
     </td>
     <td>
      63
     </td>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      2.4.4
     </th>
     <th>
      <b>
       Enabling GDMA
      </b>
     </th>
     <th>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      2.4.5
     </th>
     <th>
      <b>
       Linked List Reading Process
      </b>
     </th>
     <th>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      2.4.6
     </th>
     <th>
      <b>
       EOF
      </b>
     </th>
     <th>
      65
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      2.4.7
     </th>
     <th>
      <b>
       Accessing Internal RAM
      </b>
     </th>
     <th>
      65
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      2.4.8
     </th>
     <th>
      Arbitration
     </th>
     <th>
      66
     </th>
    </tr>
    <tr>
     <th>
      2.5
     </th>
     <th>
     </th>
     <th>
      <b>
       GDMA
      </b>
      Interrupts
     </th>
     <th>
      66
     </th>
    </tr>
    <tr>
     <td>
      2.6
     </td>
     <td>
     </td>
     <td>
      <b>
       Programming Procedures
      </b>
     </td>
     <td>
      67
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      2.6.1
     </td>
     <td>
      Programming Procedure for GDMA Clock and Reset
     </td>
     <td>
      67
     </td>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      2.6.2
     </th>
     <th>
      Programming Procedures for GDMA's Transmit Channel
     </th>
     <th>
      67
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      2.6.3
     </th>
     <th>
      Programming Procedures for GDMA's Receive Channel
     </th>
     <th>
      67
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      2.6.4
     </td>
     <td>
      Programming Procedures for Memory-to-Memory Transfer
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
      2.7
     </td>
     <td>
     </td>
     <td>
      <b>
       Register Summary
      </b>
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
      2.8
     </td>
     <td>
      <b>
       Registers
      </b>
     </td>
     <td>
     </td>
     <td>
      73
     </td>
    </tr>
    <tr>
     <td>
      Ш
     </td>
     <td>
     </td>
     <td>
      <b>
       Memory Organization
      </b>
     </td>
     <td>
      90
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
     </td>
     <td>
      <b>
       System and Memory
      </b>
     </td>
     <td>
      91
     </td>
    </tr>
    <tr>
     <td>
      3.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
     <td>
      91
     </td>
    </tr>
    <tr>
     <td>
      3.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
     <td>
      91
     </td>
    </tr>
    <tr>
     <td>
      3.3
     </td>
     <td>
     </td>
     <td>
      <b>
       Functional Description
      </b>
     </td>
     <td>
      92
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      3.3.1
     </td>
     <td>
      <b>
       Address Mapping
      </b>
     </td>
     <td>
      92
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      3.3.2
     </td>
     <td>
      <b>
       Internal Memory
      </b>
     </td>
     <td>
      93
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      3.3.3
     </td>
     <td>
      <b>
       External Memory
      </b>
     </td>
     <td>
      94
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      3.3.3.1
      <br/>
      <b>
       External Memory Address Mapping
      </b>
     </td>
     <td>
      95
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      3.3.3.2
      <br/>
      Cache
     </td>
     <td>
      95
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      3.3.3.3
      <br/>
      <b>
       Cache Operations
      </b>
     </td>
     <td>
      96
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      3.3.4
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
     <td>
      96
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      3.3.5
     </td>
     <td>
      Modules/Peripherals
     </td>
     <td>
      97
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      3.3.5.1
      <br/>
      Module/Peripheral Address Mapping
     </td>
     <td>
      98
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
     </td>
     <td>
      eFuse Controller (EFUSE)
     </td>
     <td>
      100
     </td>
    </tr>
    <tr>
     <td>
      4.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
     <td>
      100
     </td>
    </tr>
    <tr>
     <td>
      4.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
     <td>
      100
     </td>
    </tr>
    <tr>
     <td>
      4.3
     </td>
     <td>
     </td>
     <td>
      <b>
       Functional Description
      </b>
     </td>
     <td>
      100
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      4.3.1
     </td>
     <td>
      <b>
       Structure
      </b>
     </td>
     <td>
      100
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      4.3.1.1
      <br/>
      EFUSE_WR_DIS
     </td>
     <td>
      106
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      4.3.1.2
      <br/>
      EFUSE_RD_DIS
     </td>
     <td>
      106
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      4.3.1.3
      <br/>
      Data Storage
     </td>
     <td>
      106
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      4.3.2
     </td>
     <td>
      Programming of Parameters
     </td>
     <td>
      107
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      4.3.3
      <br/>
      <b>
       User Read of Parameters
      </b>
     </td>
     <td>
      109
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      4.3.4
     </td>
     <td>
      eFuse VDDQ Timing
     </td>
     <td>
      111
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      4.3.5
      <br/>
      The Use of Parameters by Hardware Modules
     </td>
     <td>
      111
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      4.3.6
     </td>
     <td>
      111
     </td>
    </tr>
    <tr>
     <td>
      4.4
     </td>
     <td>
     </td>
     <td colspan="3">
      <b>
       Register Summary
      </b>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      4.5
     </th>
     <th>
      <b>
       Registers
      </b>
     </th>
     <th>
      116
     </th>
    </tr>
    <tr>
     <th>
      Ш
     </th>
     <th>
      <b>
       System Component
      </b>
     </th>
     <th>
      158
     </th>
    </tr>
    <tr>
     <th>
      5
     </th>
     <th>
      IO MUX and GPIO Matrix (GPIO, IO MUX)
     </th>
     <th>
      159
     </th>
    </tr>
    <tr>
     <th>
      5.1
     </th>
     <th>
      Overview
     </th>
     <th>
      159
     </th>
    </tr>
    <tr>
     <td>
      5.2
     </td>
     <td>
      Features
     </td>
     <td>
      159
     </td>
    </tr>
    <tr>
     <td>
      5.3
     </td>
     <td>
      <b>
       Architectural Overview
      </b>
     </td>
     <td>
      159
     </td>
    </tr>
    <tr>
     <td>
      5.4
     </td>
     <td>
      Peripheral Input via GPIO Matrix
     </td>
     <td>
      161
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Overview
      <br/>
      5.4.1
     </td>
     <td>
      161
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Signal Synchronization
      <br/>
      5.4.2
     </td>
     <td>
      162
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       Functional Description
      </b>
      <br/>
      5.4.3
     </td>
     <td>
      162
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Simple GPIO Input
      <br/>
      5.4.4
     </td>
     <td>
      163
     </td>
    </tr>
    <tr>
     <td>
      5.5
     </td>
     <td>
      Peripheral Output via GPIO Matrix
     </td>
     <td>
      163
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      5.5.1
      <br/>
      Overview
     </td>
     <td>
      163
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      5.5.2
      <br/>
      <b>
       Functional Description
      </b>
     </td>
     <td>
      164
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      5.5.3
      <br/>
      Simple GPIO Output
     </td>
     <td>
      165
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Sigma Delta Modulated Output (SDM)
      <br/>
      5.5.4
     </td>
     <td>
      165
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      5.5.4.1
      <br/>
      <b>
       Functional Description
      </b>
     </td>
     <td>
      165
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       SDM Configuration
      </b>
      <br/>
      5.5.4.2
     </td>
     <td>
      166
     </td>
    </tr>
    <tr>
     <td>
      5.6
     </td>
     <td>
      Direct Input and Output via IO MUX
     </td>
     <td>
      166
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      5.6.1
      <br/>
      Overview
     </td>
     <td>
      166
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       Functional Description
      </b>
      <br/>
      5.6.2
     </td>
     <td>
      166
     </td>
    </tr>
    <tr>
     <td>
      5.7
     </td>
     <td>
      Analog Functions of GPIO Pins
     </td>
     <td>
      166
     </td>
    </tr>
    <tr>
     <td>
      5.8
     </td>
     <td>
      Pin Functions in Light-sleep
     </td>
     <td>
      167
     </td>
    </tr>
    <tr>
     <td>
      5.9
     </td>
     <td>
      <b>
       Pin Hold Feature
      </b>
     </td>
     <td>
      167
     </td>
    </tr>
    <tr>
     <td>
      5.10
     </td>
     <td>
      Power Supplies and Management of GPIO Pins
     </td>
     <td>
      167
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Power Supplies of GPIO Pins
      <br/>
      5.10.1
     </td>
     <td>
      167
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       Power Supply Management
      </b>
      <br/>
      5.10.2
     </td>
     <td>
      168
     </td>
    </tr>
    <tr>
     <td>
      5.11
     </td>
     <td>
      Peripheral Signal List
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
      5.12
     </td>
     <td>
      <b>
       IO MUX Functions List
      </b>
     </td>
     <td>
      174
     </td>
    </tr>
    <tr>
     <td>
      5.13
     </td>
     <td>
      <b>
       Analog Functions List
      </b>
     </td>
     <td>
      175
     </td>
    </tr>
    <tr>
     <td>
      5.14
     </td>
     <td>
      <b>
       Register Summary
      </b>
     </td>
     <td>
      176
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       GPIO Matrix Register Summary
      </b>
      <br/>
      5.14.1
     </td>
     <td>
      176
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       IO MUX Register Summary
      </b>
      <br/>
      5.14.2
     </td>
     <td>
      178
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       SDM Register Summary
      </b>
      <br/>
      5.14.3
     </td>
     <td>
      178
     </td>
    </tr>
    <tr>
     <td>
      5.15
     </td>
     <td>
      <b>
       Registers
      </b>
     </td>
     <td>
      179
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      5.15.1
      <br/>
      <b>
       GPIO Matrix Registers
      </b>
     </td>
     <td>
      179
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       IO MUX Registers
      </b>
      <br/>
      5.15.2
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      5.15.3 SDM Output Registers
     </td>
     <td>
      188
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      <b>
       Reset and Clock
      </b>
     </td>
     <td>
      191
     </td>
    </tr>
    <tr>
     <td>
      6.1
     </td>
     <td>
      Reset
     </td>
     <td>
      191
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      6.1.1
      <br/>
      Overview
     </td>
     <td>
      191
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      6.1.2
      <br/>
      <b>
       Architectural Overview
      </b>
     </td>
     <td>
      191
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      6.1.3
      <br/>
      Features
     </td>
     <td>
      191
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      6.1.4
     </th>
     <th>
     </th>
     <th>
      <b>
       Functional Description
      </b>
     </th>
     <th>
      192
     </th>
    </tr>
    <tr>
     <td>
      6.2
     </td>
     <td>
      <b>
       Clock
      </b>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      193
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      6.2.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
     <td>
      193
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      6.2.2
     </td>
     <td>
     </td>
     <td>
      <b>
       Architectural Overview
      </b>
     </td>
     <td>
      194
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      6.2.3
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
     <td>
      194
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      6.2.4
     </td>
     <td>
     </td>
     <td>
      <b>
       Functional Description
      </b>
     </td>
     <td>
      194
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      6.2.4.1
     </td>
     <td>
      <b>
       CPU Clock
      </b>
     </td>
     <td>
      195
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      6.2.4.2
     </td>
     <td>
      <b>
       Peripheral Clock
      </b>
     </td>
     <td>
      195
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      6.2.4.3
     </td>
     <td>
      Wi-Fi and Bluetooth LE Clock
     </td>
     <td>
      197
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      6.2.4.4
     </td>
     <td>
      <b>
       RTC Clock
      </b>
     </td>
     <td>
      197
     </td>
    </tr>
    <tr>
     <td>
      7
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      <b>
       Chip Boot Control
      </b>
     </td>
     <td>
      198
     </td>
    </tr>
    <tr>
     <td>
      7.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      198
     </td>
    </tr>
    <tr>
     <td>
      7.2
     </td>
     <td>
     </td>
     <td>
      <b>
       Boot Mode Control
      </b>
     </td>
     <td>
     </td>
     <td>
      199
     </td>
    </tr>
    <tr>
     <td>
      7.3
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      <b>
       ROM Messages Printing Control
      </b>
     </td>
     <td>
      200
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      <b>
       Interrupt Matrix (INTERRUPT)
      </b>
     </td>
     <td>
      202
     </td>
    </tr>
    <tr>
     <td>
      8.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      202
     </td>
    </tr>
    <tr>
     <td>
      8.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      202
      <br/>
      203
     </td>
    </tr>
    <tr>
     <td>
      8.3
     </td>
     <td colspan="4">
      <b>
       Functional Description
      </b>
     </td>
    </tr>
    <tr>
     <td rowspan="5">
     </td>
     <td>
     </td>
     <td colspan="4">
      8.3.1
      <br/>
      <b>
       Peripheral Interrupt Sources
      </b>
     </td>
    </tr>
    <tr>
     <td>
      8.3.2
     </td>
     <td>
      <b>
       CPU
      </b>
      Interrupts
     </td>
     <td>
     </td>
     <td>
      207
     </td>
    </tr>
    <tr>
     <td>
      8.3.3
     </td>
     <td>
     </td>
     <td>
      Allocate Peripheral Interrupt Source to CPU Interrupt
     </td>
     <td>
      207
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      8.3.3.1
     </td>
     <td>
      Allocate one peripheral interrupt source (Source_X) to CPU
     </td>
     <td>
      207
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      8.3.3.2
      <br/>
      8.3.3.3
     </td>
     <td>
      Allocate multiple peripheral interrupt sources (Source_Xn) to CPU
      <br/>
      Disable CPU peripheral interrupt source (Source_X)
     </td>
     <td>
      207
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      8.3.4
     </td>
     <td>
     </td>
     <td>
      Query Current Interrupt Status of Peripheral Interrupt Source
     </td>
     <td>
      207
      <br/>
      207
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      209
     </td>
    </tr>
    <tr>
     <td>
      8.4
      <br/>
      8.5
     </td>
     <td>
      <b>
       Registers
      </b>
     </td>
     <td>
      <b>
       Register Summary
      </b>
     </td>
     <td>
     </td>
     <td>
      213
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      <b>
       Low-power Management
      </b>
     </td>
     <td>
      219
     </td>
    </tr>
    <tr>
     <td>
      9.1
     </td>
     <td>
      Introduction
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      219
     </td>
    </tr>
    <tr>
     <td>
      9.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      219
     </td>
    </tr>
    <tr>
     <td>
      9.3
     </td>
     <td>
     </td>
     <td>
      <b>
       Functional Description
      </b>
     </td>
     <td>
     </td>
     <td>
      219
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      9.3.1
     </td>
     <td>
     </td>
     <td>
      Power Management Unit (PMU)
     </td>
     <td>
      221
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      9.3.2
     </td>
     <td colspan="4">
      <b>
       Low-Power Clocks
      </b>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      9.3.3
     </td>
     <td>
      <b>
       Timers
      </b>
     </td>
     <td>
     </td>
     <td>
      223
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      9.3.4
     </td>
     <td>
     </td>
     <td>
      <b>
       Voltage Regulators
      </b>
     </td>
     <td>
      224
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      9.3.4.1
     </td>
     <td>
      Digital System Voltage Regulator
     </td>
     <td>
      224
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      9.3.4.2
     </td>
     <td>
      Low-power Voltage Regulator
     </td>
     <td>
      225
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      9.3.4.3
     </td>
     <td>
      <b>
       Brownout Detector
      </b>
     </td>
     <td>
      225
     </td>
    </tr>
    <tr>
     <td>
      9.4
     </td>
     <td colspan="4">
      Power Modes Management
     </td>
    </tr>
    <tr>
     <td rowspan="4">
     </td>
     <td>
      9.4.1
     </td>
     <td colspan="5">
      <b>
       Power Domain
      </b>
     </td>
    </tr>
    <tr>
     <td>
      9.4.2
     </td>
     <td colspan="2">
      <b>
       Pre-defined Power Modes
      </b>
     </td>
     <td>
      227
     </td>
    </tr>
    <tr>
     <td>
      9.4.3
     </td>
     <td colspan="2">
      <b>
       Wakeup Source
      </b>
     </td>
     <td>
      227
     </td>
    </tr>
    <tr>
     <td colspan="5">
      9.4.4
      <br/>
      <b>
       Reject Sleep
      </b>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      9.5
     </th>
     <th>
      <b>
       Retention DMA
      </b>
     </th>
     <th>
      228
     </th>
    </tr>
    <tr>
     <td>
      9.6
     </td>
     <td>
      <b>
       RTC Boot
      </b>
     </td>
     <td>
      229
     </td>
    </tr>
    <tr>
     <td>
      9.7
     </td>
     <td>
      <b>
       Register Summary
      </b>
     </td>
     <td>
      231
     </td>
    </tr>
    <tr>
     <td>
      9.8
     </td>
     <td>
      <b>
       Registers
      </b>
     </td>
     <td>
      233
     </td>
    </tr>
    <tr>
     <td>
      10
     </td>
     <td>
      <b>
       System Timer (SYSTIMER)
      </b>
     </td>
     <td>
      270
     </td>
    </tr>
    <tr>
     <td>
      10.1
     </td>
     <td>
      Overview
     </td>
     <td>
      270
     </td>
    </tr>
    <tr>
     <td>
      10.2
     </td>
     <td>
      Features
     </td>
     <td>
      270
     </td>
    </tr>
    <tr>
     <td>
      10.3
     </td>
     <td>
      <b>
       Clock Source Selection
      </b>
     </td>
     <td>
      271
     </td>
    </tr>
    <tr>
     <td>
      10.4
     </td>
     <td>
      <b>
       Functional Description
      </b>
     </td>
     <td>
      271
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Counter
      <br/>
      10.4.1
     </td>
     <td>
      271
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      10.4.2 Comparator and Alarm
     </td>
     <td>
      272
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      10.4.3 Synchronization Operation
     </td>
     <td>
      273
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      10.4.4
      <br/>
      Interrupt
     </td>
     <td>
      274
     </td>
    </tr>
    <tr>
     <td>
      10.5
     </td>
     <td>
      <b>
       Programming Procedure
      </b>
     </td>
     <td>
      274
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      10.5.1
      <br/>
      <b>
       Read Current Count Value
      </b>
     </td>
     <td>
      274
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      10.5.2 Configure One-Time Alarm in Target Mode
     </td>
     <td>
      274
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      <b>
       Configure Periodic Alarms in Period Mode
      </b>
      <br/>
      10.5.3
     </td>
     <td>
      274
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      10.5.4 Update After Light-sleep
     </td>
     <td>
      275
     </td>
    </tr>
    <tr>
     <td>
      10.6
     </td>
     <td>
      <b>
       Register Summary
      </b>
     </td>
     <td>
      275
     </td>
    </tr>
    <tr>
     <td>
      10.7
     </td>
     <td>
      <b>
       Registers
      </b>
     </td>
     <td>
      277
     </td>
    </tr>
    <tr>
     <td>
      11
     </td>
     <td>
      <b>
       Timer Group (TIMG)
      </b>
     </td>
     <td>
      288
     </td>
    </tr>
    <tr>
     <td>
      11.1
     </td>
     <td>
      Overview
     </td>
     <td>
      288
     </td>
    </tr>
    <tr>
     <td>
      11.2
     </td>
     <td>
      <b>
       Functional Description
      </b>
     </td>
     <td>
      289
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      11.2.1
      <br/>
      16-bit Prescaler and Clock Selection
     </td>
     <td>
      289
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      54-bit Time-base Counter
      <br/>
      11.2.2
     </td>
     <td>
      289
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      11.2.3
      <br/>
      <b>
       Alarm Generation
      </b>
     </td>
     <td>
      290
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      11.2.4
      <br/>
      <b>
       Timer Reload
      </b>
     </td>
     <td>
      291
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
      <br/>
      11.2.5
     </td>
     <td>
      291
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      11.2.6
      <br/>
      Interrupts
     </td>
     <td>
      291
     </td>
    </tr>
    <tr>
     <td>
      11.3
     </td>
     <td>
      <b>
       Configuration and Usage
      </b>
     </td>
     <td>
      292
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      11.3.1
      <br/>
      Timer as a Simple Clock
     </td>
     <td>
      292
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      11.3.2
      <br/>
      Timer as One-shot Alarm
     </td>
     <td>
      292
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Timer as Periodic Alarm
      <br/>
      11.3.3
     </td>
     <td>
      293
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      11.3.4
      <br/>
      RTC_SLOW_CLK Frequency Calculation
     </td>
     <td>
      293
     </td>
    </tr>
    <tr>
     <td>
      11.4
     </td>
     <td>
      <b>
       Register Summary
      </b>
     </td>
     <td>
      294
     </td>
    </tr>
    <tr>
     <td>
      11.5
     </td>
     <td>
      <b>
       Registers
      </b>
     </td>
     <td>
      295
     </td>
    </tr>
    <tr>
     <td>
      12
     </td>
     <td>
      <b>
       Watchdog Timers (WDT)
      </b>
     </td>
     <td>
      305
     </td>
    </tr>
    <tr>
     <td>
      12.1
     </td>
     <td>
      Overview
     </td>
     <td>
      305
     </td>
    </tr>
    <tr>
     <td>
      12.2
     </td>
     <td>
      <b>
       Digital Watchdog Timers
      </b>
     </td>
     <td>
      306
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      12.2.1
      <br/>
      Features
     </td>
     <td>
      306
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      12.2.2 Functional Description
     </td>
     <td>
      307
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Clock Source and 32-Bit Counter
      <br/>
      12.2.2.1
     </td>
     <td>
      307
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      12.2.2.2 Stages and Timeout Actions
     </td>
     <td>
      308
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Contents
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      12.2.2.3
      <br/>
      Write Protection
     </td>
     <td>
      308
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      12.2.2.4
      <br/>
      Flash Boot Protection
     </td>
     <td>
      309
     </td>
    </tr>
    <tr>
     <td>
      12.3
     </td>
     <td>
      Super Watchdog
     </td>
     <td>
      309
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      12.3.1
      <br/>
      Features
     </td>
     <td>
      309
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      12.3.2
      <br/>
      Super Watchdog Controller
     </td>
     <td>
      309
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      12.3.2.1
      <br/>
      Structure
      <br/>
      12.3.2.2
      <br/>
      Workflow
     </td>
     <td>
      310
      <br/>
      310
     </td>
    </tr>
    <tr>
     <td>
      12.4
     </td>
     <td>
      Interrupts
     </td>
     <td>
      310
     </td>
    </tr>
    <tr>
     <td>
      12.5
     </td>
     <td>
      Registers
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      13
     </td>
     <td>
      XTAL32K Watchdog Timers (XTWDT)
     </td>
     <td>
      312
     </td>
    </tr>
    <tr>
     <td>
      13.1
     </td>
     <td>
      Overview
     </td>
     <td>
      312
     </td>
    </tr>
    <tr>
     <td>
      13.2
     </td>
     <td>
      Features
     </td>
     <td>
      312
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      13.2.1
      <br/>
      Interrupt and Wake-Up
     </td>
     <td>
      312
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      13.2.2
      <br/>
      BACKUP32K_CLK
     </td>
     <td>
      313
     </td>
    </tr>
    <tr>
     <td>
      13.3
     </td>
     <td>
      Functional Description
     </td>
     <td>
      313
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      13.3.1
      <br/>
      Workflow
      <br/>
      13.3.2
      <br/>
      BACKUP32K_CLK Working Principle
     </td>
     <td>
      313
      <br/>
      313
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      13.3.3
      <br/>
      Configuring the Divisor Component of BACKUP32K_CLK
     </td>
     <td>
      313
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      14
     </td>
     <td>
      Permission Control (PMS)
     </td>
     <td>
      315
     </td>
    </tr>
    <tr>
     <td>
      14.1
     </td>
     <td>
      Overview
     </td>
     <td>
      315
     </td>
    </tr>
    <tr>
     <td>
      14.2
     </td>
     <td>
      Features
     </td>
     <td>
      316
     </td>
    </tr>
    <tr>
     <td>
      14.3
     </td>
     <td>
      Privileged Environment and Unprivileged Environment
     </td>
     <td>
      316
     </td>
    </tr>
    <tr>
     <td>
      14.4
     </td>
     <td>
      Internal Memory
      <br/>
      14.4.1
      <br/>
      ROM
     </td>
     <td>
      317
      <br/>
      317
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.4.2
      <br/>
      SRAM
     </td>
     <td>
      318
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.4.2.1
      <br/>
      Internal SRAM0 Access Configuration
     </td>
     <td>
      318
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.4.2.2
      <br/>
      Internal SRAM1 Access Configuration
     </td>
     <td>
      319
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.4.3
      <br/>
      RTC FAST Memory
     </td>
     <td>
      322
     </td>
    </tr>
    <tr>
     <td>
      14.5
     </td>
     <td>
      Peripherals
     </td>
     <td>
      323
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.5.1
      <br/>
      Access Configuration
     </td>
     <td>
      323
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.5.2
      <br/>
      Split Peripheral Regions into Split Regions
     </td>
     <td>
      324
     </td>
    </tr>
    <tr>
     <td>
      14.6
     </td>
     <td>
      External Memory
     </td>
     <td>
      325
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.6.1
      <br/>
      SPI and Cache's Access to External Flash
     </td>
     <td>
      325
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.6.1.1
      <br/>
      Address
     </td>
     <td>
      326
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.6.1.2
      <br/>
      Access Configuration
     </td>
     <td>
      326
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.6.2
      <br/>
      CPU's Access to Cache
     </td>
     <td>
      327
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.6.2.1
      <br/>
      Split Regions
     </td>
     <td>
      327
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.6.3
      <br/>
      Access Configuration
     </td>
     <td>
      327
     </td>
    </tr>
    <tr>
     <td>
      14.7
     </td>
     <td>
      Unauthorized Access and Interrupts
      <br/>
      14.7.1
      <br/>
      Interrupt upon Unauthorized IBUS Access
     </td>
     <td>
      328
      <br/>
      329
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.7.2
      <br/>
      Interrupt upon Unauthorized DBUS Access
     </td>
     <td>
      329
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.7.3
      <br/>
      Interrupt upon Unauthorized Access to External Memory
     </td>
     <td>
      330
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.7.4
      <br/>
      Interrupt upon Unauthorized Access to Internal Memory via GDMA
     </td>
     <td>
      330
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Contents
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      14.7.6
      <br/>
      Interrupt upon Unauthorized PIF Access Alignment
     </td>
     <td>
      331
     </td>
    </tr>
    <tr>
     <td>
      14.8
     </td>
     <td>
      Register Locks
     </td>
     <td>
      332
     </td>
    </tr>
    <tr>
     <td>
      14.9
     </td>
     <td>
      Register Summary
     </td>
     <td>
      335
     </td>
    </tr>
    <tr>
     <td>
      14.10
     </td>
     <td>
      Registers
     </td>
     <td>
      338
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      15
     </td>
     <td>
      World Controller (WCL)
     </td>
     <td>
      413
     </td>
    </tr>
    <tr>
     <td>
      15.1
     </td>
     <td>
      Introduction
     </td>
     <td>
      413
     </td>
    </tr>
    <tr>
     <td>
      15.2
     </td>
     <td>
      Features
     </td>
     <td>
      413
     </td>
    </tr>
    <tr>
     <td>
      15.3
     </td>
     <td>
      Functional Description
     </td>
     <td>
      413
     </td>
    </tr>
    <tr>
     <td>
      15.4
     </td>
     <td>
      CPU's World Switch
     </td>
     <td>
      415
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      15.4.1
      <br/>
      From Secure World to Non-secure World
      <br/>
      15.4.2
      <br/>
      From Non-secure World to Secure World
     </td>
     <td>
      415
      <br/>
      416
     </td>
    </tr>
    <tr>
     <td>
      15.5
     </td>
     <td>
      World Switch Log
     </td>
     <td>
      417
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      15.5.1
      <br/>
      Structure of World Switch Log Register
     </td>
     <td>
      417
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      15.5.2
      <br/>
      How World Switch Log Registers are Updated
     </td>
     <td>
      418
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      15.5.3
      <br/>
      How to Read World Switch Log Registers
     </td>
     <td>
      420
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      15.5.4
      <br/>
      Nested Interrupts
     </td>
     <td>
      420
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      15.5.4.1
      <br/>
      Programming Procedure
     </td>
     <td>
      420
     </td>
    </tr>
    <tr>
     <td>
      15.6
     </td>
     <td>
      Register Summary
     </td>
     <td>
      422
     </td>
    </tr>
    <tr>
     <td>
      15.7
     </td>
     <td>
      Registers
     </td>
     <td>
      423
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      16
     </td>
     <td>
      System Registers (SYSREG)
     </td>
     <td>
      427
     </td>
    </tr>
    <tr>
     <td>
      16.1
     </td>
     <td>
      Overview
     </td>
     <td>
      427
     </td>
    </tr>
    <tr>
     <td>
      16.2
     </td>
     <td>
      Features
     </td>
     <td>
      427
     </td>
    </tr>
    <tr>
     <td>
      16.3
     </td>
     <td>
      Function Description
     </td>
     <td>
      427
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      16.3.1
      <br/>
      System and Memory Registers
      <br/>
      16.3.1.1
      <br/>
      Internal Memory
     </td>
     <td>
      427
      <br/>
      427
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      16.3.1.2
      <br/>
      External Memory
     </td>
     <td>
      428
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      16.3.1.3
      <br/>
      RSA Memory
     </td>
     <td>
      428
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      16.3.2
      <br/>
      Clock Registers
     </td>
     <td>
      429
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      16.3.3
      <br/>
      Interrupt Signal Registers
     </td>
     <td>
      429
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      16.3.4
      <br/>
      Low-power Management Registers
     </td>
     <td>
      429
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      16.3.5
      <br/>
      Peripheral Clock Gating and Reset Registers
     </td>
     <td>
      429
     </td>
    </tr>
    <tr>
     <td>
      16.4
     </td>
     <td>
      Register Summary
     </td>
     <td>
      432
     </td>
    </tr>
    <tr>
     <td>
      16.5
     </td>
     <td>
      Registers
     </td>
     <td>
      434
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      17
     </td>
     <td>
      Debug Assistant (ASSIST_DEBUG)
     </td>
     <td>
      446
     </td>
    </tr>
    <tr>
     <td>
      17.1
     </td>
     <td>
      Overview
     </td>
     <td>
      446
     </td>
    </tr>
    <tr>
     <td>
      17.2
     </td>
     <td>
      Features
     </td>
     <td>
      446
     </td>
    </tr>
    <tr>
     <td>
      17.3
     </td>
     <td>
      Functional Description
     </td>
     <td>
      446
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      17.3.1
      <br/>
      Region Read/Write Monitoring
     </td>
     <td>
      446
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      17.3.2
      <br/>
      SP Monitoring
      <br/>
      17.3.3
      <br/>
      PC Logging
     </td>
     <td>
      446
      <br/>
      447
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      17.3.4
      <br/>
      CPU/DMA Bus Access Logging
     </td>
     <td>
      447
     </td>
    </tr>
    <tr>
     <td>
      17.4
     </td>
     <td>
      Recommended Operation
     </td>
     <td>
      447
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      17.4.1
      <br/>
      Region Monitoring and SP Monitoring Configuration Process
     </td>
     <td>
      447
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Contents
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      17.4.2
      <br/>
      PC Logging Configuration Process
      <br/>
      17.4.3
      <br/>
      CPU/DMA Bus Access Logging Configuration Process
     </th>
     <th>
      448
      <br/>
      449
     </th>
    </tr>
    <tr>
     <td>
      17.5
      <br/>
      17.6
     </td>
     <td>
      Register Summary
      <br/>
      Registers
     </td>
     <td>
      453
      <br/>
      455
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      IV
     </td>
     <td>
      Cryptography/Security Component
     </td>
     <td>
      472
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      18
     </td>
     <td>
      AES Accelerator (AES)
     </td>
     <td>
      473
     </td>
    </tr>
    <tr>
     <td>
      18.1
      <br/>
      18.2
     </td>
     <td>
      Introduction
      <br/>
      Features
     </td>
     <td>
      473
      <br/>
      473
     </td>
    </tr>
    <tr>
     <td>
      18.3
     </td>
     <td>
      AES Working Modes
     </td>
     <td>
      473
     </td>
    </tr>
    <tr>
     <td>
      18.4
     </td>
     <td>
      Typical AES Working Mode
     </td>
     <td>
      475
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      18.4.1
      <br/>
      Key, Plaintext, and Ciphertext
     </td>
     <td>
      475
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      18.4.2
      <br/>
      Endianness
     </td>
     <td>
      475
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      18.4.3
      <br/>
      Operation Process
     </td>
     <td>
      477
     </td>
    </tr>
    <tr>
     <td>
      18.5
     </td>
     <td>
      DMA-AES Working Mode
     </td>
     <td>
      477
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      18.5.1
      <br/>
      Key, Plaintext, and Ciphertext
     </td>
     <td>
      478
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      18.5.2
      <br/>
      Endianness
     </td>
     <td>
      479
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      18.5.3
      <br/>
      Standard Incrementing Function
     </td>
     <td>
      479
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      18.5.4
      <br/>
      Block Number
     </td>
     <td>
      479
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      18.5.5
      <br/>
      Initialization Vector
      <br/>
      18.5.6
      <br/>
      Block Operation Process
     </td>
     <td>
      479
      <br/>
      480
     </td>
    </tr>
    <tr>
     <td>
      18.6
     </td>
     <td>
      Memory Summary
     </td>
     <td>
      480
     </td>
    </tr>
    <tr>
     <td>
      18.7
     </td>
     <td>
      Register Summary
     </td>
     <td>
      481
     </td>
    </tr>
    <tr>
     <td>
      18.8
     </td>
     <td>
      Registers
     </td>
     <td>
      482
     </td>
    </tr>
    <tr>
     <td>
      19
     </td>
     <td>
      HMAC Accelerator (HMAC)
     </td>
     <td>
      486
     </td>
    </tr>
    <tr>
     <td>
      19.1
     </td>
     <td>
      Main Features
     </td>
     <td>
      486
     </td>
    </tr>
    <tr>
     <td>
      19.2
     </td>
     <td>
      Functional Description
     </td>
     <td>
      486
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      19.2.1
      <br/>
      Upstream Mode
     </td>
     <td>
      486
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      19.2.2
      <br/>
      Downstream JTAG Enable Mode
     </td>
     <td>
      487
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      19.2.3
      <br/>
      Downstream Digital Signature Mode
     </td>
     <td>
      487
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      19.2.4
      <br/>
      HMAC eFuse Configuration
     </td>
     <td>
      488
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      19.2.5
      <br/>
      HMAC Process (Detailed)
     </td>
     <td>
      489
     </td>
    </tr>
    <tr>
     <td>
      19.3
     </td>
     <td>
      HMAC Algorithm Details
     </td>
     <td>
      490
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      19.3.1
      <br/>
      Padding Bits
     </td>
     <td>
      491
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      19.3.2
      <br/>
      HMAC Algorithm Structure
     </td>
     <td>
      491
     </td>
    </tr>
    <tr>
     <td>
      19.4
      <br/>
      19.5
     </td>
     <td>
      Register Summary
      <br/>
      Registers
     </td>
     <td>
      494
      <br/>
      496
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      20
     </td>
     <td>
      RSA Accelerator (RSA)
     </td>
     <td>
      502
     </td>
    </tr>
    <tr>
     <td>
      20.1
      <br/>
      20.2
     </td>
     <td>
      Introduction
      <br/>
      Features
     </td>
     <td>
      502
      <br/>
      502
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      20.3
     </td>
     <td>
      Functional Description
      <br/>
      20.3.1
      <br/>
      Large Number Modular Exponentiation
     </td>
     <td>
      502
      <br/>
      503
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      20.4
      <br/>
      20.5
      <br/>
      20.6
     </th>
     <th>
      20.3.3 Large Number Multiplication
      <br/>
      20.3.4 Options for Acceleration
      <br/>
      <b>
       Memory Summary
      </b>
      <br/>
      <b>
       Register Summary
      </b>
      <br/>
      <b>
       Registers
      </b>
     </th>
     <th>
      505
      <br/>
      505
      <br/>
      507
      <br/>
      508
      <br/>
      509
     </th>
    </tr>
    <tr>
     <td>
      21
      <br/>
      21.1
      <br/>
      21.2
      <br/>
      21.3
      <br/>
      21.4
     </td>
     <td>
      <b>
       SHA Accelerator (SHA)
      </b>
      <br/>
      Introduction
      <br/>
      Features
      <br/>
      <b>
       Working Modes
      </b>
      <br/>
      <b>
       Function Description
      </b>
      <br/>
      21.4.1
      <br/>
      Preprocessing
      <br/>
      21.4.1.1
      <br/>
      Padding the Message
      <br/>
      21.4.1.2 Parsing the Message
      <br/>
      Setting the Initial Hash Value
      <br/>
      21.4.1.3
     </td>
     <td>
      513
      <br/>
      513
      <br/>
      513
      <br/>
      513
      <br/>
      514
      <br/>
      514
      <br/>
      514
      <br/>
      514
      <br/>
      515
     </td>
    </tr>
    <tr>
     <td>
      21.5
      <br/>
      21.6
     </td>
     <td>
      21.4.2 Hash Operation
      <br/>
      <b>
       Typical SHA Mode Process
      </b>
      <br/>
      21.4.2.1
      <br/>
      <b>
       DMA-SHA Mode Process
      </b>
      <br/>
      21.4.2.2
      <br/>
      Message Digest
      <br/>
      21.4.3
      <br/>
      Interrupt
      <br/>
      21.4.4
      <br/>
      <b>
       Register Summary
      </b>
      <br/>
      <b>
       Registers
      </b>
     </td>
     <td>
      515
      <br/>
      515
      <br/>
      517
      <br/>
      517
      <br/>
      518
      <br/>
      518
      <br/>
      519
     </td>
    </tr>
    <tr>
     <td>
      22
      <br/>
      22.1
      <br/>
      22.2
      <br/>
      22.3
      <br/>
      22.4
      <br/>
      22.5
      <br/>
      22.6
     </td>
     <td>
      Digital Signature (DS)
      <br/>
      Overview
      <br/>
      Features
      <br/>
      <b>
       Functional Description
      </b>
      <br/>
      22.3.1 Overview
      <br/>
      22.3.2 Private Key Operands
      <br/>
      22.3.3 Software Prerequisites
      <br/>
      22.3.4 DS Operation at the Hardware Level
      <br/>
      22.3.5 DS Operation at the Software Level
      <br/>
      <b>
       Memory Summary
      </b>
      <br/>
      <b>
       Register Summary
      </b>
      <br/>
      <b>
       Registers
      </b>
     </td>
     <td>
      523
      <br/>
      523
      <br/>
      523
      <br/>
      523
      <br/>
      523
      <br/>
      524
      <br/>
      524
      <br/>
      526
      <br/>
      526
      <br/>
      529
      <br/>
      530
      <br/>
      531
     </td>
    </tr>
    <tr>
     <td>
      23
      <br/>
      23.1
      <br/>
      23.2
      <br/>
      23.3
      <br/>
      23.4
     </td>
     <td>
      <b>
       External Memory Encryption and Decryption (XTS_AES)
      </b>
      <br/>
      Overview
      <br/>
      Features
      <br/>
      <b>
       Module Structure
      </b>
      <br/>
      <b>
       Functional Description
      </b>
      <br/>
      23.4.1 XTS Algorithm
      <br/>
      23.4.2 Key
      <br/>
      23.4.3 Target Memory Space
      <br/>
      23.4.4 Data Writing
      <br/>
      23.4.5 Manual Encryption Block
     </td>
     <td>
      534
      <br/>
      534
      <br/>
      534
      <br/>
      534
      <br/>
      535
      <br/>
      535
      <br/>
      536
      <br/>
      536
      <br/>
      537
      <br/>
      537
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Contents
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <th>
      23.5
     </th>
     <th>
      23.4.6
      <br/>
      Auto Decryption Block
      <br/>
      Software Process
     </th>
     <th>
      538
      <br/>
      538
     </th>
    </tr>
    <tr>
     <td>
      23.6
     </td>
     <td>
      Register Summary
     </td>
     <td>
      540
     </td>
    </tr>
    <tr>
     <td>
      23.7
     </td>
     <td>
      Registers
     </td>
     <td>
      541
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      24
     </td>
     <td>
      Random Number Generator (RNG)
     </td>
     <td>
      544
     </td>
    </tr>
    <tr>
     <td>
      24.1
      <br/>
      24.2
     </td>
     <td>
      Introduction
      <br/>
      Features
     </td>
     <td>
      544
      <br/>
      544
     </td>
    </tr>
    <tr>
     <td>
      24.3
     </td>
     <td>
      Functional Description
     </td>
     <td>
      544
     </td>
    </tr>
    <tr>
     <td>
      24.4
     </td>
     <td>
      Programming Procedure
     </td>
     <td>
      545
     </td>
    </tr>
    <tr>
     <td>
      24.5
      <br/>
      24.6
     </td>
     <td>
      Register Summary
      <br/>
      Register
     </td>
     <td>
      545
      <br/>
      546
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      25
     </td>
     <td>
      Clock Glitch Detection
     </td>
     <td>
      547
     </td>
    </tr>
    <tr>
     <td>
      25.1
     </td>
     <td>
      Overview
     </td>
     <td>
      547
     </td>
    </tr>
    <tr>
     <td>
      25.2
     </td>
     <td>
      Functional Description
     </td>
     <td>
      547
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      25.2.1
      <br/>
      Clock Glitch Detection
      <br/>
      25.2.2
      <br/>
      Reset
     </td>
     <td>
      547
      <br/>
      547
     </td>
    </tr>
    <tr>
     <td>
      V
     </td>
     <td>
      Connectivity Interface
     </td>
     <td>
      548
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      26
     </td>
     <td>
      UART Controller (UART)
     </td>
     <td>
      549
     </td>
    </tr>
    <tr>
     <td>
      26.1
     </td>
     <td>
      Overview
     </td>
     <td>
      549
     </td>
    </tr>
    <tr>
     <td>
      26.2
     </td>
     <td>
      Features
     </td>
     <td>
      549
     </td>
    </tr>
    <tr>
     <td>
      26.3
     </td>
     <td>
      UART Structure
     </td>
     <td>
      550
     </td>
    </tr>
    <tr>
     <td>
      26.4
     </td>
     <td>
      Functional Description
     </td>
     <td>
      551
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.1
      <br/>
      Clock and Reset
     </td>
     <td>
      551
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.2
      <br/>
      UART RAM
      <br/>
      26.4.3
      <br/>
      Baud Rate Generation and Detection
     </td>
     <td>
      552
      <br/>
      553
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.3.1
      <br/>
      Baud Rate Generation
     </td>
     <td>
      553
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.3.2
      <br/>
      Baud Rate Detection
     </td>
     <td>
      554
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.4
      <br/>
      UART Data Frame
     </td>
     <td>
      555
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.5
      <br/>
      AT_CMD Character Structure
     </td>
     <td>
      556
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.6
      <br/>
      RS485
     </td>
     <td>
      556
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.6.1
      <br/>
      Driver Control
     </td>
     <td>
      556
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.6.2
      <br/>
      Turnaround Delay
     </td>
     <td>
      557
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.6.3
      <br/>
      Bus Snooping
     </td>
     <td>
      557
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.7
      <br/>
      IrDA
     </td>
     <td>
      557
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.8
      <br/>
      Wake-up
      <br/>
      26.4.9
      <br/>
      Flow Control
     </td>
     <td>
      558
      <br/>
      559
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.9.1
      <br/>
      Hardware Flow Control
     </td>
     <td>
      559
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.9.2
      <br/>
      Software Flow Control
     </td>
     <td>
      560
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.10 GDMA Mode
     </td>
     <td>
      561
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.11
      <br/>
      UART Interrupts
     </td>
     <td>
      561
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      26.4.12 UHCI Interrupts
     </td>
     <td>
      562
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      26.5.1
     </th>
     <th>
      <b>
       Register Type
      </b>
     </th>
     <th>
     </th>
     <th>
      563
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      26.5.11
     </td>
     <td>
      <b>
       Synchronous Registers
      </b>
     </td>
     <td>
      563
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      26.5.1.2
     </td>
     <td>
      <b>
       Static Registers
      </b>
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      26.5.1.3
     </td>
     <td>
      Immediate Registers
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      26.5.2 Detailed Steps
     </th>
     <th>
     </th>
     <th>
      565
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      26.5.2.1
     </td>
     <td>
      Initializing UARTn
     </td>
     <td>
      566
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      26.5.2.2 Configuring UARTn Communication
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      26.5.2.3 Enabling UARTn
     </td>
     <td>
      566
     </td>
    </tr>
    <tr>
     <td>
      26.6
     </td>
     <td colspan="2">
      <b>
       Register Summary
      </b>
     </td>
     <td>
      568
     </td>
    </tr>
    <tr>
     <td>
      26.7
     </td>
     <td>
      Registers
     </td>
     <td colspan="3">
      571
     </td>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
      27 SPI Controller (SPI)
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      27.1
     </th>
     <th colspan="3">
      Overview
     </th>
     <th>
      608
     </th>
    </tr>
    <tr>
     <td>
      27.2
     </td>
     <td colspan="3">
      Glossary
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
      27.3
     </td>
     <td colspan="3">
      Features
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
      27.4
     </td>
     <td>
     </td>
     <td>
      <b>
       Architectural Overview
      </b>
     </td>
     <td>
      610
     </td>
    </tr>
    <tr>
     <td>
      27.5
     </td>
     <td colspan="3">
      <b>
       Functional Description
      </b>
     </td>
     <td>
      610
     </td>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
      27.5.1
     </td>
     <td colspan="2">
      Data Modes
     </td>
     <td>
      611
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      27.5.2 FSPI Bus Signal Mapping
     </td>
     <td>
      611
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      27.5.3
     </td>
     <td colspan="2">
      <b>
       Bit Read/Write Order Control
      </b>
     </td>
     <td>
      614
     </td>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
      27.5.4
     </td>
     <td colspan="2">
      <b>
       Transfer Modes
      </b>
     </td>
     <td>
      614
     </td>
    </tr>
    <tr>
     <td colspan="2">
      <b>
       CPU-Controlled Data Transfer
      </b>
      <br/>
      27.5.5
     </td>
     <td>
      614
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.5.1
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
     <td>
      615
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.5.2
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
     <td>
      616
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      27.5.6
     </td>
     <td>
     </td>
     <td>
      <b>
       DMA-Controlled Data Transfer
      </b>
     </td>
     <td>
      616
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.6.1
     </td>
     <td>
      <b>
       GDMA Configuration
      </b>
     </td>
     <td>
      617
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.6.2
     </td>
     <td>
      <b>
       GDMA TX/RX Buffer Length Control
      </b>
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      27.5.7
     </td>
     <td>
     </td>
     <td>
      Data Flow Control in GP-SPI2 Master and Slave Modes
     </td>
     <td>
      618
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.7.1
     </td>
     <td>
      <b>
       GP-SPI2 Functional Blocks
      </b>
     </td>
     <td>
      618
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.7.2
     </td>
     <td>
      Data Flow Control in Master Mode
     </td>
     <td>
      619
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.7.3
     </td>
     <td>
      Data Flow Control in Slave Mode
     </td>
     <td>
      620
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      GP-SPI2 Works as a Master
      <br/>
      27.5.8
     </td>
     <td>
      621
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.8.1
     </td>
     <td>
      <b>
       State Machine
      </b>
     </td>
     <td>
      621
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.8.2
     </td>
     <td>
      Register Configuration for State and Bit Mode Control
     </td>
     <td>
      623
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.8.3
     </td>
     <td>
      Full-Duplex Communication (1-bit Mode Only)
     </td>
     <td>
      626
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.8.4
     </td>
     <td>
      Half-Duplex Communication (1/2/4-bit Mode)
     </td>
     <td>
      627
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.8.5
     </td>
     <td>
      DMA-Controlled Configurable Segmented Transfer
     </td>
     <td>
      629
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      27.5.9
     </td>
     <td>
     </td>
     <td>
      GP-SPI2 Works as a Slave
     </td>
     <td>
      633
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.9.1
     </td>
     <td>
      <b>
       Communication Formats
      </b>
     </td>
     <td>
      633
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.9.2
     </td>
     <td>
      Supported CMD Values in Half-Duplex Communication
     </td>
     <td>
      634
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.9.3
     </td>
     <td>
      Slave Single Transfer and Slave Segmented Transfer
     </td>
     <td>
      637
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.9.4
     </td>
     <td>
      <b>
       Configuration of Slave Single Transfer
      </b>
     </td>
     <td>
      637
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.9.5
     </td>
     <td>
      Configuration of Slave Segmented Transfer in Half-Duplex
     </td>
     <td>
      638
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      27.5.9.6
     </td>
     <td>
      Configuration of Slave Segmented Transfer in Full-Duplex
     </td>
     <td>
      638
     </td>
    </tr>
    <tr>
     <td>
      27.6
     </td>
     <td colspan="3">
      CS Setup Time and Hold Time Control
     </td>
     <td>
      639
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   27.7 GP-SPI
   <a href="#page-637-0">
    2 Clock Control
   </a>
   640
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      27.7.1
     </th>
     <th>
      <b>
       Clock Phase and Polarity
      </b>
     </th>
     <th>
      640
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      27.7.2
     </td>
     <td>
      <b>
       Clock Control in Master Mode
      </b>
     </td>
     <td>
      642
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      27.7.3
     </td>
     <td>
      <b>
       Clock Control in Slave Mode
      </b>
     </td>
     <td>
      642
     </td>
    </tr>
    <tr>
     <td>
      27.8
     </td>
     <td>
     </td>
     <td>
      <b>
       GP-SPI2 Timing Compensation
      </b>
     </td>
     <td>
      642
     </td>
    </tr>
    <tr>
     <td>
      27.9
     </td>
     <td colspan="3">
      <b>
       Interrupts
      </b>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
      27.10 Register Summary
     </td>
    </tr>
    <tr>
     <td>
      27.11
     </td>
     <td colspan="3">
      Registers
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   <a href="#page-646-0">
    28 I2C Contro
   </a>
   ller (I2C)
   <sup>
    676
   </sup>
  </h1>
  <table>
   <tbody>
    <tr>
     <th>
      28.1
     </th>
     <th colspan="3">
      Overview
     </th>
    </tr>
    <tr>
     <td>
      28.2
     </td>
     <td colspan="3">
      Features
     </td>
    </tr>
    <tr>
     <td>
      28.3
     </td>
     <td colspan="3">
      <b>
       I2C Architecture
      </b>
     </td>
    </tr>
    <tr>
     <td>
      28.4
     </td>
     <td colspan="3">
      <b>
       Functional Description
      </b>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.4.1 Clock Configuration
     </td>
     <td>
      679
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.4.2 SCL and SDA Noise Filtering
     </td>
     <td>
      679
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      28.4.3 SCL Clock Stretching
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.4.4 Generating SCL Pulses in Idle State
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      28.4.5 Synchronization
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      28.4.6 Open-Drain Output
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      28.4.7 Timing Parameter Configuration
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      28.4.8 Timeout Control
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.4.9 Command Configuration
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.4.10 TX/RX RAM Data Storage
     </td>
     <td>
      685
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.4.11 Data Conversion
     </td>
     <td>
      686
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      28.4.12 Addressing Mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      28.4.13
      <math>
       R/\overline{W}
      </math>
      Bit Check in 10-bit Addressing Mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.4.14 To Start the I2C Controller
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
      28.5
     </td>
     <td>
      <b>
       Programming Example
      </b>
     </td>
     <td>
      687
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.1 I2C
      <sub>
       master
      </sub>
      Writes to I2C
      <sub>
       slave
      </sub>
      with a 7-bit Address in One Command Sequence
     </td>
     <td>
      687
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Introduction
      <br/>
      28.5.1.1
     </td>
     <td>
      688
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.1.2 Configuration Example
     </td>
     <td>
      688
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.2 I2C
      <sub>
       master
      </sub>
      Writes to I2C
      <sub>
       slave
      </sub>
      with a 10-bit Address in One Command Sequence
     </td>
     <td>
      689
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Introduction
      <br/>
      28.5.2.1
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.2.2 Configuration Example
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.3 I2C
      <sub>
       master
      </sub>
      Writes to I2C
      <sub>
       slave
      </sub>
      with Two 7-bit Addresses in One Command Sequence
     </td>
     <td>
      692
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Introduction
      <br/>
      28.5.3.1
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.3.2 Configuration Example
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.4 I2C
      <sub>
       master
      </sub>
      Writes to I2C
      <sub>
       slave
      </sub>
      with a 7-bit Address in Multiple Command Sequences
     </td>
     <td>
      694
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Introduction
      <br/>
      28.5.4.1
     </td>
     <td>
      694
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.4.2 Configuration Example
     </td>
     <td>
      695
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.5
      <math>
       12Cmaster
      </math>
      Reads
      <math>
       12Cslave
      </math>
      with a 7-bit Address in One Command Sequence
     </td>
     <td>
      696
     </td>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
      Introduction
      <br/>
      28.5.5.1
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
      28.5.5.2 Configuration Example
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.6 I2C
      <sub>
       master
      </sub>
      Reads I2C
      <sub>
       slave
      </sub>
      with a 10-bit Address in One Command Sequence
     </td>
     <td>
      698
     </td>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
      28.5.6.1
      <br/>
      Introduction
     </td>
     <td>
      698
     </td>
    </tr>
    <tr>
     <td>
      28.5.6.2 Configuration Example
     </td>
     <td>
      699
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Contents
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.7
      <br/>
      I2Cmaster
      <br/>
      Reads I2Cslave
      <br/>
      with Two 7-bit Addresses in One Command Sequence
     </td>
     <td>
      700
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.7.1
      <br/>
      Introduction
     </td>
     <td>
      701
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.7.2
      <br/>
      Configuration Example
     </td>
     <td>
      701
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.8
      <br/>
      I2Cmaster
      <br/>
      Reads I2Cslave
      <br/>
      with a 7-bit Address in Multiple Command Sequences
     </td>
     <td>
      704
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      28.5.8.1
      <br/>
      Introduction
     </td>
     <td>
      704
     </td>
    </tr>
    <tr>
     <td>
      28.6
     </td>
     <td>
      28.5.8.2
      <br/>
      Configuration Example
      <br/>
      Interrupts
     </td>
     <td>
      705
      <br/>
      707
     </td>
    </tr>
    <tr>
     <td>
      28.7
     </td>
     <td>
      Register Summary
     </td>
     <td>
      708
     </td>
    </tr>
    <tr>
     <td>
      28.8
     </td>
     <td>
      Registers
     </td>
     <td>
      710
     </td>
    </tr>
    <tr>
     <td>
      29
     </td>
     <td>
      I2S Controller (I2S)
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      730
     </td>
    </tr>
    <tr>
     <td>
      29.1
      <br/>
      29.2
     </td>
     <td>
      Overview
      <br/>
      Terminology
     </td>
     <td>
      730
      <br/>
      730
     </td>
    </tr>
    <tr>
     <td>
      29.3
     </td>
     <td>
      Features
     </td>
     <td>
      731
     </td>
    </tr>
    <tr>
     <td>
      29.4
     </td>
     <td>
      System Architecture
     </td>
     <td>
      732
     </td>
    </tr>
    <tr>
     <td>
      29.5
     </td>
     <td>
      Supported Audio Standards
     </td>
     <td>
      733
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.5.1
      <br/>
      TDM Philips Standard
     </td>
     <td>
      734
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.5.2
      <br/>
      TDM MSB Alignment Standard
     </td>
     <td>
      734
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.5.3
      <br/>
      TDM PCM Standard
     </td>
     <td>
      735
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.5.4
      <br/>
      PDM Standard
     </td>
     <td>
      735
     </td>
    </tr>
    <tr>
     <td>
      29.6
     </td>
     <td>
      I2S TX/RX Clock
     </td>
     <td>
      736
     </td>
    </tr>
    <tr>
     <td>
      29.7
     </td>
     <td>
      I2S Reset
     </td>
     <td>
      738
     </td>
    </tr>
    <tr>
     <td>
      29.8
     </td>
     <td>
      I2S Master/Slave Mode
     </td>
     <td>
      738
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.8.1
      <br/>
      Master/Slave TX Mode
     </td>
     <td>
      738
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.8.2
      <br/>
      Master/Slave RX Mode
     </td>
     <td>
      739
     </td>
    </tr>
    <tr>
     <td>
      29.9
     </td>
     <td>
      Transmitting Data
      <br/>
      29.9.1
      <br/>
      Data Format Control
     </td>
     <td>
      739
      <br/>
      739
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.9.1.1
      <br/>
      Bit Width Control of Channel Valid Data
     </td>
     <td>
      739
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.9.1.2
      <br/>
      Endian Control of Channel Valid Data
     </td>
     <td>
      740
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.9.1.3
      <br/>
      A-law/µ-law Compression and Decompression
     </td>
     <td>
      740
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.9.1.4
      <br/>
      Bit Width Control of Channel TX Data
     </td>
     <td>
      741
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.9.1.5
      <br/>
      Bit Order Control of Channel Data
     </td>
     <td>
      741
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.9.2
      <br/>
      Channel Mode Control
     </td>
     <td>
      742
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.9.2.1
      <br/>
      I2S Channel Control in TDM TX Mode
     </td>
     <td>
      742
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.9.2.2
      <br/>
      I2S Channel Control in PDM TX Mode
     </td>
     <td>
      743
     </td>
    </tr>
    <tr>
     <td>
      29.10
     </td>
     <td>
      Receiving Data
     </td>
     <td>
      745
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.10.1
      <br/>
      Channel Mode Control
     </td>
     <td>
      745
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.10.1.1
      <br/>
      I2S Channel Control in TDM RX Mode
     </td>
     <td>
      746
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.10.1.2
      <br/>
      I2S Channel Control in PDM RX Mode
     </td>
     <td>
      746
     </td>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
      29.10.2 Data Format Control
     </td>
     <td>
      746
     </td>
    </tr>
    <tr>
     <td>
      29.10.2.1
      <br/>
      Bit Order Control of Channel Data
      <br/>
      29.10.2.2 Bit Width Control of Channel Storage (Valid) Data
     </td>
     <td>
      746
      <br/>
      747
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.10.2.3 Bit Width Control of Channel RX Data
     </td>
     <td>
      747
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.10.2.4 Endian Control of Channel Storage Data
     </td>
     <td>
      747
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      29.10.2.5 A-law/µ-law Compression and Decompression
     </td>
     <td>
      748
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Contents
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
      29.11.1
      <br/>
      Configure I2S as TX Mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
      29.11.2
      <br/>
      Configure I2S as RX Mode
     </td>
    </tr>
    <tr>
     <td>
      29.12
      <br/>
      29.13
     </td>
     <td>
      I2S Interrupts
      <br/>
      Register Summary
     </td>
     <td>
      749
      <br/>
      749
     </td>
    </tr>
    <tr>
     <td>
      29.14
     </td>
     <td>
      Registers
     </td>
     <td>
      751
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      30
     </td>
     <td>
      USB Serial/JTAG Controller (USB_SERIAL_JTAG)
     </td>
     <td>
      764
     </td>
    </tr>
    <tr>
     <td>
      30.1
     </td>
     <td>
      Overview
     </td>
     <td>
      764
     </td>
    </tr>
    <tr>
     <td>
      30.2
     </td>
     <td>
      Features
     </td>
     <td>
      764
     </td>
    </tr>
    <tr>
     <td>
      30.3
     </td>
     <td>
      Functional Description
     </td>
     <td>
      765
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      30.3.1
      <br/>
      CDC-ACM USB Interface Functional Description
      <br/>
      30.3.2
      <br/>
      CDC-ACM Firmware Interface Functional Description
     </td>
     <td>
      765
      <br/>
      767
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      30.3.3
      <br/>
      USB-to-JTAG Interface
     </td>
     <td>
      767
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      30.3.4
      <br/>
      JTAG Command Processor
     </td>
     <td>
      767
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      30.3.5
      <br/>
      USB-to-JTAG Interface: CMD_REP usage example
     </td>
     <td>
      768
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      30.3.6
      <br/>
      USB-to-JTAG Interface: Response Capture Unit
     </td>
     <td>
      769
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      30.3.7
      <br/>
      USB-to-JTAG Interface: Control Transfer Requests
     </td>
     <td>
      770
     </td>
    </tr>
    <tr>
     <td>
      30.4
     </td>
     <td>
      Recommended Operation
     </td>
     <td>
      770
     </td>
    </tr>
    <tr>
     <td>
      30.5
      <br/>
      30.6
     </td>
     <td>
      Register Summary
      <br/>
      Registers
     </td>
     <td>
      773
      <br/>
      774
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      31
     </td>
     <td>
      Two-wire Automotive Interface (TWAI)
     </td>
     <td>
      788
     </td>
    </tr>
    <tr>
     <td>
      31.1
     </td>
     <td>
      Features
     </td>
     <td>
      788
     </td>
    </tr>
    <tr>
     <td>
      31.2
     </td>
     <td>
      Functional Protocol
     </td>
     <td>
      789
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.1
      <br/>
      TWAI Properties
     </td>
     <td>
      789
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.2
      <br/>
      TWAI Messages
     </td>
     <td>
      790
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.2.1
      <br/>
      Data Frames and Remote Frames
     </td>
     <td>
      790
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.2.2
      <br/>
      Error and Overload Frames
     </td>
     <td>
      792
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.2.3
      <br/>
      Interframe Space
      <br/>
      31.2.3
      <br/>
      TWAI Errors
     </td>
     <td>
      794
      <br/>
      794
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.3.1
      <br/>
      Error Types
     </td>
     <td>
      794
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.3.2
      <br/>
      Error States
     </td>
     <td>
      795
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.3.3
      <br/>
      Error Counters
     </td>
     <td>
      795
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.4
      <br/>
      TWAI Bit Timing
     </td>
     <td>
      796
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.4.1
      <br/>
      Nominal Bit
     </td>
     <td>
      796
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.2.4.2
      <br/>
      Hard Synchronization and Resynchronization
     </td>
     <td>
      797
     </td>
    </tr>
    <tr>
     <td>
      31.3
     </td>
     <td>
      Architectural Overview
     </td>
     <td>
      798
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.3.1
      <br/>
      Registers Block
     </td>
     <td>
      798
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.3.2
      <br/>
      Bit Stream Processor
     </td>
     <td>
      799
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.3.3
      <br/>
      Error Management Logic
     </td>
     <td>
      799
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.3.4
      <br/>
      Bit Timing Logic
     </td>
     <td>
      800
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.3.5
      <br/>
      Acceptance Filter
      <br/>
      31.3.6
      <br/>
      Receive FIFO
     </td>
     <td>
      800
      <br/>
      800
     </td>
    </tr>
    <tr>
     <td>
      31.4
     </td>
     <td>
      Functional Description
     </td>
     <td>
      800
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.1
      <br/>
      Modes
     </td>
     <td>
      800
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.1.1
      <br/>
      Reset Mode
     </td>
     <td>
      800
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Contents
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.1.2
     </td>
     <td>
      Operation Mode
     </td>
     <td>
      800
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.2
     </td>
     <td>
      Bit Timing
     </td>
     <td>
     </td>
     <td>
      801
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.3
     </td>
     <td>
     </td>
     <td>
      Interrupt Management
     </td>
     <td>
      802
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.3.1
     </td>
     <td>
      Receive Interrupt (RXI)
     </td>
     <td>
      802
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.3.2
     </td>
     <td>
      Transmit Interrupt (TXI)
     </td>
     <td>
      802
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.3.3
     </td>
     <td>
      Error Warning Interrupt (EWI)
     </td>
     <td>
      802
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.3.4
     </td>
     <td>
      Data Overrun Interrupt (DOI)
     </td>
     <td>
      803
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.3.5
     </td>
     <td>
      Error Passive Interrupt (TXI)
     </td>
     <td>
      803
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.3.6
     </td>
     <td>
      Arbitration Lost Interrupt (ALI)
     </td>
     <td>
      803
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.3.7
      <br/>
      31.4.3.8
     </td>
     <td>
      Bus Error Interrupt (BEI)
      <br/>
      Bus Status Interrupt (BSI)
     </td>
     <td>
      803
      <br/>
      804
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.4
     </td>
     <td>
     </td>
     <td>
      Transmit and Receive Buffers
     </td>
     <td>
      804
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.4.1
     </td>
     <td>
      Overview of Buffers
     </td>
     <td>
      804
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.4.2
     </td>
     <td>
      Frame Information
     </td>
     <td>
      805
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.4.3
     </td>
     <td>
      Frame Identifier
     </td>
     <td>
      805
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.4.4
     </td>
     <td>
      Frame Data
     </td>
     <td>
      806
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.5
     </td>
     <td>
     </td>
     <td>
      Receive FIFO and Data Overruns
     </td>
     <td>
      806
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.6
     </td>
     <td>
     </td>
     <td>
      Acceptance Filter
     </td>
     <td>
      807
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.6.1
     </td>
     <td>
      Single Filter Mode
     </td>
     <td>
      808
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.6.2
     </td>
     <td>
      Dual Filter Mode
     </td>
     <td>
      808
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.7
     </td>
     <td>
     </td>
     <td>
      Error Management
     </td>
     <td>
      809
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.7.1
     </td>
     <td>
      Error Warning Limit
     </td>
     <td>
      810
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.7.2
     </td>
     <td>
      Error Passive
     </td>
     <td>
      810
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      31.4.7.3
     </td>
     <td>
      Bus-Off and Bus-Off Recovery
     </td>
     <td>
      810
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      31.4.8
     </td>
     <td>
     </td>
     <td>
      Error Code Capture
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      31.5
     </td>
     <td>
      31.4.9
     </td>
     <td>
      Register Summary
     </td>
     <td>
      Arbitration Lost Capture
     </td>
     <td>
      812
      <br/>
      813
     </td>
    </tr>
    <tr>
     <td>
      31.6
     </td>
     <td>
      Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      814
     </td>
    </tr>
    <tr>
     <td>
      32
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      LED PWM Controller (LEDC)
     </td>
     <td>
      827
     </td>
    </tr>
    <tr>
     <td>
      32.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      827
     </td>
    </tr>
    <tr>
     <td>
      32.2
     </td>
     <td>
      Features
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      827
     </td>
    </tr>
    <tr>
     <td>
      32.3
     </td>
     <td>
     </td>
     <td>
      Functional Description
     </td>
     <td>
     </td>
     <td>
      828
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      32.3.1
     </td>
     <td>
      Architecture
     </td>
     <td>
     </td>
     <td>
      828
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      32.3.2
     </td>
     <td>
      Timers
     </td>
     <td>
     </td>
     <td>
      828
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      32.3.2.1
     </td>
     <td>
      Clock Source
     </td>
     <td>
      828
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      32.3.2.2
     </td>
     <td>
      Clock Divider Configuration
     </td>
     <td>
      829
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      32.3.2.3
     </td>
     <td>
      14-bit Counter
     </td>
     <td>
      830
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      32.3.3
     </td>
     <td>
     </td>
     <td>
      PWM Generators
     </td>
     <td>
      831
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      32.3.4
     </td>
     <td>
     </td>
     <td>
      Duty Cycle Fading
     </td>
     <td>
      832
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      32.3.5
     </td>
     <td>
      Interrupts
     </td>
     <td>
     </td>
     <td>
      833
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <a href="#page-833-0">
    33 Remote Co
   </a>
   ntrol Peripheral (RMT)
   <sup>
    843
   </sup>
  </p>
  <p block-type="Text">
   <a href="#page-835-0">
    33.1 Overview
   </a>
   843
  </p>
  <p block-type="TextInlineMath">
  </p>
  <p block-type="Text">
   32.5
   <a href="#page-831-0">
    Registers
   </a>
   836
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      33.2
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Features
     </td>
     <td>
      843
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      33.3
     </td>
     <td>
      <b>
       Functional Description
      </b>
     </td>
     <td>
      843
     </td>
    </tr>
    <tr>
     <td>
      <b>
       RMT Architecture
      </b>
      <br/>
      33.3.1
     </td>
     <td>
      844
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.2 RMT RAM
     </td>
     <td>
      844
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.3 Clock
     </td>
     <td>
      845
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.4 Transmitter
     </td>
     <td>
      846
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Normal TX Mode
      <br/>
      33.3.4.1
     </td>
     <td>
      846
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.4.2 Wrap TX Mode
     </td>
     <td>
      846
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.4.3 TX Modulation
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.4.4 Continuous TX Mode
     </td>
     <td>
      847
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.4.5 Simultaneous TX Mode
     </td>
     <td>
      847
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.5 Receiver
     </td>
     <td>
      847
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.5.1 Normal RX Mode
     </td>
     <td>
      848
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.5.2 Wrap RX Mode
     </td>
     <td>
      848
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.5.3 RX Filtering
     </td>
     <td>
      848
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.5.4 RX Demodulation
     </td>
     <td>
      849
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.6 Configuration Update
     </td>
     <td>
      849
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      33.3.7 Interrupts
     </td>
     <td>
      850
     </td>
    </tr>
    <tr>
     <td>
      33.4
     </td>
     <td>
      <b>
       Register Summary
      </b>
     </td>
     <td>
      851
     </td>
    </tr>
    <tr>
     <td>
      33.5
     </td>
     <td>
      <b>
       Registers
      </b>
     </td>
     <td>
      852
     </td>
    </tr>
    <tr>
     <td>
      VI
     </td>
     <td>
      <b>
       Analog Signal Processing
      </b>
     </td>
     <td>
      867
     </td>
    </tr>
    <tr>
     <td>
      34
     </td>
     <td>
      <b>
       On-Chip Sensor and Analog Signal Processing
      </b>
     </td>
     <td>
      868
     </td>
    </tr>
    <tr>
     <td>
      34.1
     </td>
     <td>
      Overview
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      868
     </td>
    </tr>
    <tr>
     <td>
      34.2
     </td>
     <td>
      <b>
       SAR ADCs
      </b>
     </td>
     <td>
      868
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.1 Overview
     </td>
     <td>
      868
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.2 Features
     </td>
     <td>
      868
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3 Functional Description
     </td>
     <td>
      869
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.1
      <br/>
      <b>
       Input Signals
      </b>
     </td>
     <td>
      870
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.2 ADC Conversion and Attenuation
     </td>
     <td>
      870
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.3 DIG ADC Controller
     </td>
     <td>
      870
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.4 DIG ADC Clock
     </td>
     <td>
      871
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.5 DMA Support
     </td>
     <td>
      872
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.6 DIG ADC FSM
     </td>
     <td>
      872
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.7 ADC Filters
     </td>
     <td>
      875
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.8 Threshold Monitoring
     </td>
     <td>
      875
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.2.3.9 SAR ADC2 Arbiter
     </td>
     <td>
      875
     </td>
    </tr>
    <tr>
     <td>
      34.3
     </td>
     <td>
      <b>
       Temperature Sensor
      </b>
     </td>
     <td>
      876
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.3.1 Overview
     </td>
     <td>
      876
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.3.2 Features
     </td>
     <td>
      876
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      34.3.3 Functional Description
     </td>
     <td>
      876
     </td>
    </tr>
    <tr>
     <td>
      34.4
     </td>
     <td>
      Interrupts
     </td>
     <td>
      877
     </td>
    </tr>
    <tr>
     <td>
      34.5
      <br/>
      34.6
     </td>
     <td>
      <b>
       Register Summary
      </b>
      <br/>
      Register
     </td>
     <td>
      877
      <br/>
      878
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <th colspan="2">
      Contents
     </th>
    </tr>
    <tr>
     <th>
      VII
      <br/>
      Appendix
      <br/>
      Related Documentation and Resources
      <br/>
      Glossary
     </th>
     <td>
      890
      <br/>
      891
      <br/>
      892
     </td>
    </tr>
    <tr>
     <th>
      Abbreviations for Peripherals
      <br/>
      Abbreviations Related to Registers
      <br/>
      Access Types for Registers
      <br/>
      Programming Reserved Register Field
     </th>
     <td>
      892
      <br/>
      892
      <br/>
      892
      <br/>
      895
     </td>
    </tr>
    <tr>
     <th>
      Introduction
      <br/>
      Programming Reserved Register Field
     </th>
     <td>
      895
      <br/>
      895
     </td>
    </tr>
    <tr>
     <th>
      Interrupt Configuration Registers
     </th>
     <td>
      896
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   List of Tables
  </h1>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      List of Tables
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1.3-1
      <br/>
      1.5-1
     </td>
     <td>
      CPU Address Map
      <br/>
      ID wise map of Interrupt Trap-Vector Addresses
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1.7-1
     </td>
     <td>
      NAPOT encoding for maddress
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2.4-1
     </td>
     <td>
      Selecting Peripherals via Register Configuration
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2.4-2
     </td>
     <td>
      Descriptor Field Alignment Requirements
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      3.3-1
     </td>
     <td>
      Internal Memory Address Mapping
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      3.3-2
     </td>
     <td>
      External Memory Address Mapping
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      3.3-3
     </td>
     <td>
      Module/Peripheral Address Mapping
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      4.3-1
     </td>
     <td>
      Parameters in eFuse BLOCK0
     </td>
     <td>
      101
     </td>
    </tr>
    <tr>
     <td>
      4.3-2
     </td>
     <td>
      Secure Key Purpose Values
     </td>
     <td>
      104
     </td>
    </tr>
    <tr>
     <td>
      4.3-3
     </td>
     <td>
      Parameters in BLOCK1 to BLOCK10
     </td>
     <td>
      105
     </td>
    </tr>
    <tr>
     <td>
      4.3-4
      <br/>
      4.3-5
     </td>
     <td>
      Registers Information
      <br/>
      Configuration of Default VDDQ Timing Parameters
     </td>
     <td>
      109
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      5.8-1
     </td>
     <td>
      Bits Used to Control IO MUX Functions in Light-sleep Mode
     </td>
     <td>
      167
     </td>
    </tr>
    <tr>
     <td>
      5.11-1
     </td>
     <td>
      Peripheral Signals via GPIO Matrix
     </td>
     <td>
      169
     </td>
    </tr>
    <tr>
     <td>
      5.12-1
      <br/>
      5.12-2
     </td>
     <td>
      IO MUX Pin Functions
      <br/>
      Power-Up Glitches on Pins
     </td>
     <td>
      174
      <br/>
      175
     </td>
    </tr>
    <tr>
     <td>
      5.13-1
     </td>
     <td>
      Analog Functions of IO MUX Pins
     </td>
     <td>
      175
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      6.1-1
     </td>
     <td>
      Reset Sources
     </td>
     <td>
      193
     </td>
    </tr>
    <tr>
     <td>
      6.2-1
     </td>
     <td>
      CPU Clock Source
     </td>
     <td>
      195
     </td>
    </tr>
    <tr>
     <td>
      6.2-2
     </td>
     <td>
      CPU Clock Frequency
     </td>
     <td>
      195
     </td>
    </tr>
    <tr>
     <td>
      6.2-3
      <br/>
      6.2-4
     </td>
     <td>
      Peripheral Clocks
      <br/>
      APB_CLK Clock Frequency
     </td>
     <td>
      196
      <br/>
      197
     </td>
    </tr>
    <tr>
     <td>
      6.2-5
     </td>
     <td>
      CRYPTO_CLK Frequency
     </td>
     <td>
      197
     </td>
    </tr>
    <tr>
     <td>
      7.1-1
     </td>
     <td>
      Default Configuration of Strapping Pins
     </td>
     <td>
      198
     </td>
    </tr>
    <tr>
     <td>
      7.2-1
     </td>
     <td>
      Boot Mode Control
     </td>
     <td>
      199
     </td>
    </tr>
    <tr>
     <td>
      7.3-1
     </td>
     <td>
      ROM Message Printing Control
     </td>
     <td>
      200
     </td>
    </tr>
    <tr>
     <td>
      8.3-1
     </td>
     <td>
      CPU Peripheral Interrupt Configuration/Status Registers and Peripheral Interrupt Sources
     </td>
     <td>
      204
     </td>
    </tr>
    <tr>
     <td>
      9.3-1
     </td>
     <td>
      Low-power Clocks
     </td>
     <td>
      223
     </td>
    </tr>
    <tr>
     <td>
      9.3-2
     </td>
     <td>
      The Triggering Conditions for the RTC Timer
     </td>
     <td>
      223
     </td>
    </tr>
    <tr>
     <td>
      9.4-1
      <br/>
      9.4-2
     </td>
     <td>
      Predefined Power Modes
      <br/>
      Wakeup Source
     </td>
     <td>
      227
      <br/>
      228
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      10.4-1
     </td>
     <td>
      UNITn Configuration Bits
     </td>
     <td>
      272
     </td>
    </tr>
    <tr>
     <td>
      10.4-2
      <br/>
      10.4-3
     </td>
     <td>
      Trigger Point
      <br/>
      Synchronization Operation
     </td>
     <td>
      273
      <br/>
      273
     </td>
    </tr>
    <tr>
     <td>
      11.2-1
     </td>
     <td>
      Alarm Generation When Up-Down Counter Increments
     </td>
     <td>
      290
     </td>
    </tr>
    <tr>
     <td>
      11.2-2
     </td>
     <td>
      Alarm Generation When Up-Down Counter Decrements
     </td>
     <td>
      290
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      List of Tables
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      14.4-1
     </td>
     <td>
      ROM Address
     </td>
     <td>
      317
     </td>
    </tr>
    <tr>
     <td>
      14.4-2
     </td>
     <td>
      Access Configuration to ROM (ROM0 and ROM1)
     </td>
     <td>
      318
     </td>
    </tr>
    <tr>
     <td>
      14.4-3
     </td>
     <td>
      SRAM Address
     </td>
     <td>
      318
     </td>
    </tr>
    <tr>
     <td>
      14.4-4
     </td>
     <td>
      Access Configuration to Internal SRAM0
     </td>
     <td>
      319
     </td>
    </tr>
    <tr>
     <td>
      14.4-5
     </td>
     <td>
      Internal SRAM1 Split Regions
     </td>
     <td>
      320
     </td>
    </tr>
    <tr>
     <td>
      14.4-6
     </td>
     <td>
      Access Configuration to the Instruction Region of Internal SRAM1
     </td>
     <td>
      322
     </td>
    </tr>
    <tr>
     <td>
      14.4-7
     </td>
     <td>
      Access Configuration to the Data Region of Internal SRAM1
     </td>
     <td>
      322
     </td>
    </tr>
    <tr>
     <td>
      14.4-8
     </td>
     <td>
      RTC FAST Memory Address
     </td>
     <td>
      322
     </td>
    </tr>
    <tr>
     <td>
      14.4-9
     </td>
     <td>
      Split RTC FAST Memory into the Higher Region and the Lower Region
     </td>
     <td>
      323
     </td>
    </tr>
    <tr>
     <td>
      14.4-10
      <br/>
      14.5-1
     </td>
     <td>
      Access Configuration to the RTC FAST Memory
      <br/>
      Access Configuration of the Peripherals
     </td>
     <td>
      323
      <br/>
      324
     </td>
    </tr>
    <tr>
     <td>
      14.5-2
     </td>
     <td>
      Access Configuration of Peri Regions
     </td>
     <td>
      325
     </td>
    </tr>
    <tr>
     <td>
      14.6-1
     </td>
     <td>
      Split the External Memory into Split Regions
     </td>
     <td>
      326
     </td>
    </tr>
    <tr>
     <td>
      14.6-2
     </td>
     <td>
      Access Configuration of Flash Regions
     </td>
     <td>
      326
     </td>
    </tr>
    <tr>
     <td>
      14.6-3
     </td>
     <td>
      Cache Virtual Address Region
     </td>
     <td>
      327
     </td>
    </tr>
    <tr>
     <td>
      14.6-4
     </td>
     <td>
      Split IBUS Cache Virtual Address into 4 Regions
     </td>
     <td>
      327
     </td>
    </tr>
    <tr>
     <td>
      14.6-5
     </td>
     <td>
      Split DBUS Cache Virtual Address into 4 Regions
     </td>
     <td>
      327
     </td>
    </tr>
    <tr>
     <td>
      14.6-6
     </td>
     <td>
      Access Configuration of IBUS to Split Regions
     </td>
     <td>
      328
     </td>
    </tr>
    <tr>
     <td>
      14.6-7
     </td>
     <td>
      Access Configuration of DBUS to Split Regions
     </td>
     <td>
      328
     </td>
    </tr>
    <tr>
     <td>
      14.7-1
     </td>
     <td>
      Interrupt Registers for Unauthorized IBUS Access
     </td>
     <td>
      329
     </td>
    </tr>
    <tr>
     <td>
      14.7-2
     </td>
     <td>
      Interrupt Registers for Unauthorized DBUS Access
     </td>
     <td>
      329
     </td>
    </tr>
    <tr>
     <td>
      14.7-3
     </td>
     <td>
      Interrupt Registers for Unauthorized Access to External Memory
     </td>
     <td>
      330
     </td>
    </tr>
    <tr>
     <td>
      14.7-4
     </td>
     <td>
      Interrupt Registers for Unauthorized Access to Internal Memory via GDMA
     </td>
     <td>
      330
     </td>
    </tr>
    <tr>
     <td>
      14.7-5
     </td>
     <td>
      Interrupt Registers for Unauthorized PIF Access
     </td>
     <td>
      331
     </td>
    </tr>
    <tr>
     <td>
      14.7-6
      <br/>
      14.7-7
     </td>
     <td>
      All Possible Access Alignment and their Results
      <br/>
      Interrupt Registers for Unauthorized Access Alignment
     </td>
     <td>
      331
      <br/>
      332
     </td>
    </tr>
    <tr>
     <td>
      14.8-1
     </td>
     <td>
      Lock Registers and Related Permission Control Registers
     </td>
     <td>
      332
     </td>
    </tr>
    <tr>
     <td>
      16.3-1
     </td>
     <td>
      Memory Controlling Bit
     </td>
     <td>
      428
     </td>
    </tr>
    <tr>
     <td>
      16.3-2
     </td>
     <td>
      Clock Gating and Reset Bits
     </td>
     <td>
      430
     </td>
    </tr>
    <tr>
     <td>
      17.4-1
     </td>
     <td>
      CPU Packet Format
     </td>
     <td>
      450
     </td>
    </tr>
    <tr>
     <td>
      17.4-2
     </td>
     <td>
      DMA Packet Format
     </td>
     <td>
      450
     </td>
    </tr>
    <tr>
     <td>
      17.4-3
     </td>
     <td>
      DMA Source
     </td>
     <td>
      450
     </td>
    </tr>
    <tr>
     <td>
      17.4-4
     </td>
     <td>
      Written Data Format
     </td>
     <td>
      451
     </td>
    </tr>
    <tr>
     <td>
      18.3-1
     </td>
     <td>
      AES Accelerator Working Mode
     </td>
     <td>
      474
     </td>
    </tr>
    <tr>
     <td>
      18.3-2
     </td>
     <td>
      Key Length and Encryption/Decryption
     </td>
     <td>
      474
     </td>
    </tr>
    <tr>
     <td>
      18.4-1
     </td>
     <td>
      Working Status under Typical AES Working Mode
     </td>
     <td>
      475
     </td>
    </tr>
    <tr>
     <td>
      18.4-2
     </td>
     <td>
      Text Endianness Type for Typical AES
     </td>
     <td>
      475
     </td>
    </tr>
    <tr>
     <td>
      18.4-3
     </td>
     <td>
      Key Endianness Type for AES-128 Encryption and Decryption
     </td>
     <td>
      476
     </td>
    </tr>
    <tr>
     <td>
      18.4-4
     </td>
     <td>
      Key Endianness Type for AES-256 Encryption and Decryption
     </td>
     <td>
      476
     </td>
    </tr>
    <tr>
     <td>
      18.5-1
     </td>
     <td>
      Block Cipher Mode
     </td>
     <td>
      477
     </td>
    </tr>
    <tr>
     <td>
      18.5-2
      <br/>
      18.5-3
     </td>
     <td>
      Working Status under DMA-AES Working mode
      <br/>
      TEXT-PADDING
     </td>
     <td>
      478
      <br/>
      478
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      List of Tables
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
      19.2-1
     </td>
     <td>
      HMAC Purposes and Configuration Value
     </td>
     <td>
      488
     </td>
    </tr>
    <tr>
     <td>
      20.3-1
     </td>
     <td>
      Acceleration Performance
     </td>
     <td>
      506
     </td>
    </tr>
    <tr>
     <td>
      20.4-1
     </td>
     <td>
      RSA Accelerator Memory Blocks
     </td>
     <td>
      507
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      21.3-1
      <br/>
      21.3-2
     </td>
     <td>
      SHA Accelerator Working Mode
      <br/>
      SHA Hash Algorithm Selection
     </td>
     <td>
      513
      <br/>
      514
     </td>
    </tr>
    <tr>
     <td>
      21.4-1
     </td>
     <td>
      The Storage and Length of Message Digest from Different Algorithms
     </td>
     <td>
      518
     </td>
    </tr>
    <tr>
     <td>
      23.4-1
     </td>
     <td>
      Key generated based on KeyA
     </td>
     <td>
      536
     </td>
    </tr>
    <tr>
     <td>
      23.4-2
     </td>
     <td>
      Mapping Between Offsets and Registers
     </td>
     <td>
      537
     </td>
    </tr>
    <tr>
     <td>
      26.5-1
     </td>
     <td>
      UARTn Synchronous Registers
     </td>
     <td>
      563
     </td>
    </tr>
    <tr>
     <td>
      26.5-2
     </td>
     <td>
      UARTn Static Registers
     </td>
     <td>
      564
     </td>
    </tr>
    <tr>
     <td>
      27.5-1
     </td>
     <td>
      Data Modes Supported by GP-SPI2
     </td>
     <td>
      611
     </td>
    </tr>
    <tr>
     <td>
      27.5-2
     </td>
     <td>
      Mapping of FSPI Bus Signals
     </td>
     <td>
      611
     </td>
    </tr>
    <tr>
     <td>
      27.5-3
     </td>
     <td>
      Functional Description of FSPI Bus Signals
     </td>
     <td>
      611
     </td>
    </tr>
    <tr>
     <td>
      27.5-4
     </td>
     <td>
      Signals Used in Various SPI Modes
     </td>
     <td>
      613
     </td>
    </tr>
    <tr>
     <td>
      27.5-5
     </td>
     <td>
      Bit Order Control in GP-SPI2 Master and Slave Modes
     </td>
     <td>
      614
     </td>
    </tr>
    <tr>
     <td>
      27.5-6
     </td>
     <td>
      Supported Transfers in Master and Slave Modes
     </td>
     <td>
      614
     </td>
    </tr>
    <tr>
     <td>
      27.5-7
     </td>
     <td>
      Registers Used for State Control in 1/2/4-bit Modes
     </td>
     <td>
      623
     </td>
    </tr>
    <tr>
     <td>
      27.5-7
     </td>
     <td>
      Registers Used for State Control in 1/2/4-bit Modes
     </td>
     <td>
      624
     </td>
    </tr>
    <tr>
     <td>
      27.5-8
     </td>
     <td>
      GP-SPI2 Master BM Table for CONF State
     </td>
     <td>
      631
     </td>
    </tr>
    <tr>
     <td>
      27.5-9
     </td>
     <td>
      An Example of CONF bufferi in Segmenti
     </td>
     <td>
      632
     </td>
    </tr>
    <tr>
     <td>
      27.5-10
     </td>
     <td>
      BM Bit Value v.s. Register to Be Updated in This Example
     </td>
     <td>
      632
     </td>
    </tr>
    <tr>
     <td>
      27.5-11
     </td>
     <td>
      Supported CMD Values in SPI Mode
     </td>
     <td>
      635
     </td>
    </tr>
    <tr>
     <td>
      27.5-11
     </td>
     <td>
      Supported CMD Values in SPI Mode
     </td>
     <td>
      636
     </td>
    </tr>
    <tr>
     <td>
      27.5-12
     </td>
     <td>
      Supported CMD Values in QPI Mode
     </td>
     <td>
      636
     </td>
    </tr>
    <tr>
     <td>
      27.7-1
     </td>
     <td>
      Clock Phase and Polarity Configuration in Master Mode
     </td>
     <td>
      642
     </td>
    </tr>
    <tr>
     <td>
      27.7-2
     </td>
     <td>
      Clock Phase and Polarity Configuration in Slave Mode
     </td>
     <td>
      642
     </td>
    </tr>
    <tr>
     <td>
      27.9-1
      <br/>
      27.9-1
     </td>
     <td>
      GP-SPI2 Master Mode Interrupts
      <br/>
      GP-SPI2 Master Mode Interrupts
     </td>
     <td>
      645
      <br/>
      646
     </td>
    </tr>
    <tr>
     <td>
      27.9-2
     </td>
     <td>
      GP-SPI2 Slave Mode Interrupts
     </td>
     <td>
      646
     </td>
    </tr>
    <tr>
     <td>
      28.4-1
     </td>
     <td>
      I2C Synchronous Registers
     </td>
     <td>
      681
     </td>
    </tr>
    <tr>
     <td>
      29.4-1
     </td>
     <td>
      I2S Signal Description
     </td>
     <td>
      733
     </td>
    </tr>
    <tr>
     <td>
      29.9-1
     </td>
     <td>
      Bit Width of Channel Valid Data
     </td>
     <td>
      740
     </td>
    </tr>
    <tr>
     <td>
      29.9-2
     </td>
     <td>
      Endian of Channel Valid Data
     </td>
     <td>
      740
     </td>
    </tr>
    <tr>
     <td>
      29.9-3
     </td>
     <td>
      Data-Fetching Control in PDM TX Mode
     </td>
     <td>
      743
     </td>
    </tr>
    <tr>
     <td>
      29.9-4
     </td>
     <td>
      I2S Channel Control in Normal PDM TX Mode
     </td>
     <td>
      744
     </td>
    </tr>
    <tr>
     <td>
      29.9-5
     </td>
     <td>
      PCM-to-PDM TX Mode
     </td>
     <td>
      744
     </td>
    </tr>
    <tr>
     <td>
      29.10-1
      <br/>
      29.10-2
     </td>
     <td>
      Channel Storage Data Width
      <br/>
      Channel Storage Data Endian
     </td>
     <td>
      747
      <br/>
      747
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      30.3-1
     </td>
     <td>
      Standard CDC-ACM Control Requests
     </td>
     <td>
      766
     </td>
    </tr>
    <tr>
     <td>
      30.3-2
     </td>
     <td>
      CDC-ACM Settings with RTS and DTR
     </td>
     <td>
      766
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      List of Tables
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      30.3-4
     </td>
     <td>
      USB-to-JTAG Control Requests
     </td>
     <td>
      770
     </td>
    </tr>
    <tr>
     <td>
      30.3-5
      <br/>
      30.4-1
     </td>
     <td>
      JTAG Capabilities Descriptor
      <br/>
      Reset SoC into Download Mode
     </td>
     <td>
      770
      <br/>
      771
     </td>
    </tr>
    <tr>
     <td>
      30.4-2
     </td>
     <td>
      Reset SoC into Booting
     </td>
     <td>
      772
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      31.2-1
     </td>
     <td>
      Data Frames and Remote Frames in SFF and EFF
     </td>
     <td>
      791
     </td>
    </tr>
    <tr>
     <td>
      31.2-2
     </td>
     <td>
      Error Frame
     </td>
     <td>
      793
     </td>
    </tr>
    <tr>
     <td>
      31.2-3
     </td>
     <td>
      Overload Frame
     </td>
     <td>
      793
     </td>
    </tr>
    <tr>
     <td>
      31.2-4
     </td>
     <td>
      Interframe Space
     </td>
     <td>
      794
     </td>
    </tr>
    <tr>
     <td>
      31.2-5
      <br/>
      31.4-1
     </td>
     <td>
      Segments of a Nominal Bit Time
      <br/>
      Bit Information of TWAI_BUS_TIMING_0_REG (0x18)
     </td>
     <td>
      797
      <br/>
      801
     </td>
    </tr>
    <tr>
     <td>
      31.4-2
     </td>
     <td>
      Bit Information of TWAI_BUS_TIMING_1_REG (0x1c)
     </td>
     <td>
      801
     </td>
    </tr>
    <tr>
     <td>
      31.4-3
     </td>
     <td>
      Buffer Layout for Standard Frame Format and Extended Frame Format
     </td>
     <td>
      804
     </td>
    </tr>
    <tr>
     <td>
      31.4-4
     </td>
     <td>
      TX/RX Frame Information (SFF/EFF); TWAI Address 0x40
     </td>
     <td>
      805
     </td>
    </tr>
    <tr>
     <td>
      31.4-5
     </td>
     <td>
      TX/RX Identifier 1 (SFF); TWAI Address 0x44
     </td>
     <td>
      805
     </td>
    </tr>
    <tr>
     <td>
      31.4-6
     </td>
     <td>
      TX/RX Identifier 2 (SFF); TWAI Address 0x48
     </td>
     <td>
      805
     </td>
    </tr>
    <tr>
     <td>
      31.4-7
     </td>
     <td>
      TX/RX Identifier 1 (EFF); TWAI Address 0x44
     </td>
     <td>
      806
     </td>
    </tr>
    <tr>
     <td>
      31.4-8
     </td>
     <td>
      TX/RX Identifier 2 (EFF); TWAI Address 0x48
     </td>
     <td>
      806
     </td>
    </tr>
    <tr>
     <td>
      31.4-9
     </td>
     <td>
      TX/RX Identifier 3 (EFF); TWAI Address 0x4c
     </td>
     <td>
      806
     </td>
    </tr>
    <tr>
     <td>
      31.4-10
     </td>
     <td>
      TX/RX Identifier 4 (EFF); TWAI Address 0x50
     </td>
     <td>
      806
     </td>
    </tr>
    <tr>
     <td>
      31.4-11
     </td>
     <td>
      Bit Information of TWAI_ERR_CODE_CAP_REG (0x30)
     </td>
     <td>
      811
     </td>
    </tr>
    <tr>
     <td>
      31.4-12
      <br/>
      31.4-13
     </td>
     <td>
      Bit Information of Bits SEG.4 - SEG.0
      <br/>
      Bit Information of TWAI_ARB LOST CAP_REG (0x2c)
     </td>
     <td>
      811
      <br/>
      812
     </td>
    </tr>
    <tr>
     <td>
      32.3-1
     </td>
     <td>
      Commonly-used Frequencies and Resolutions
     </td>
     <td>
      830
     </td>
    </tr>
    <tr>
     <td>
      32.3-1
     </td>
     <td>
      Commonly-used Frequencies and Resolutions
     </td>
     <td>
      831
     </td>
    </tr>
    <tr>
     <td>
      33.3-1
     </td>
     <td>
      Configuration Update
     </td>
     <td>
      849
     </td>
    </tr>
    <tr>
     <td>
      34.2-1
     </td>
     <td>
      SAR ADC Input Signals
     </td>
     <td>
      870
     </td>
    </tr>
    <tr>
     <td>
      34.3-1
     </td>
     <td>
      Temperature Offset
     </td>
     <td>
      877
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   List of Figures
  </h1>
  <table>
   <tbody>
    <tr>
     <th>
      <math>
       1.1 - 1
      </math>
     </th>
     <th>
      CPU Block Diagram
     </th>
     <th>
      31
     </th>
    </tr>
    <tr>
     <td>
      <math>
       1.6 - 1
      </math>
     </td>
     <td>
      Debug System Overview
     </td>
     <td>
      47
     </td>
    </tr>
    <tr>
     <td>
      <math>
       2.1 - 1
      </math>
     </td>
     <td>
      Modules with GDMA Feature and GDMA Channels
     </td>
     <td>
      60
     </td>
    </tr>
    <tr>
     <td>
      <math>
       2.3 - 1
      </math>
     </td>
     <td>
      <b>
       GDMA Engine Architecture
      </b>
     </td>
     <td>
      61
     </td>
    </tr>
    <tr>
     <td>
      <math>
       2.4 - 1
      </math>
     </td>
     <td>
      Structure of a Linked List
     </td>
     <td>
      62
     </td>
    </tr>
    <tr>
     <td>
      <math>
       2.4 - 2
      </math>
     </td>
     <td>
      Relationship among Linked Lists
     </td>
     <td>
      64
     </td>
    </tr>
    <tr>
     <td>
      <math>
       3.2 - 1
      </math>
      <br/>
      <math>
       3.3 - 1
      </math>
      <br/>
      <math>
       3.3 - 2
      </math>
      <br/>
      <math>
       4.3 - 1
      </math>
     </td>
     <td>
      System Structure and Address Mapping
      <br/>
      <b>
       Cache Structure
      </b>
      <br/>
      Peripherals/modules that can work with GDMA
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
      <br/>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
      <br/>
      97
      <br/>
      107
     </td>
    </tr>
    <tr>
     <td>
      <math>
       4.3 - 2
      </math>
     </td>
     <td>
      Shift Register Circuit (first 32 output)
      <br/>
      Shift Register Circuit (last 12 output)
     </td>
     <td>
      107
     </td>
    </tr>
    <tr>
     <td>
      <math>
       5.3 - 1
      </math>
     </td>
     <td>
      Diagram of IO MUX and GPIO Matrix
     </td>
     <td>
      160
     </td>
    </tr>
    <tr>
     <td>
      <math>
       5.3 - 2
      </math>
     </td>
     <td>
      Architecture of IO MUX and GPIO Matrix
     </td>
     <td>
      160
     </td>
    </tr>
    <tr>
     <td>
      <math>
       5.3 - 3
      </math>
     </td>
     <td>
      Internal Structure of a Pad
     </td>
     <td>
      161
     </td>
    </tr>
    <tr>
     <td>
      <math>
       5.4 - 1
      </math>
     </td>
     <td>
      GPIO Input Synchronized on APB Clock Rising Edge or on Falling Edge
     </td>
     <td>
      162
     </td>
    </tr>
    <tr>
     <td>
      <math>
       5.4 - 2
      </math>
     </td>
     <td>
      Filter Timing of GPIO Input Signals
     </td>
     <td>
      162
     </td>
    </tr>
    <tr>
     <td>
      <math>
       6.1 - 1
      </math>
     </td>
     <td>
      <b>
       Reset Types
      </b>
     </td>
     <td>
      191
     </td>
    </tr>
    <tr>
     <td>
      <math>
       6.2 - 1
      </math>
     </td>
     <td>
      <b>
       System Clock
      </b>
     </td>
     <td>
      194
     </td>
    </tr>
    <tr>
     <td>
      <math>
       8.2 - 1
      </math>
     </td>
     <td>
      <b>
       Interrupt Matrix Structure
      </b>
     </td>
     <td>
      202
     </td>
    </tr>
    <tr>
     <td>
      <math>
       9.3 - 1
      </math>
     </td>
     <td>
      Low-power Management Schematics
     </td>
     <td>
      220
     </td>
    </tr>
    <tr>
     <td>
      <math>
       9.3 - 2
      </math>
     </td>
     <td>
      Power Management Unit Workflow
     </td>
     <td>
      221
     </td>
    </tr>
    <tr>
     <td>
      <math>
       9.3 - 3
      </math>
     </td>
     <td>
      <b>
       RTC Clocks
      </b>
     </td>
     <td>
      222
     </td>
    </tr>
    <tr>
     <td>
      <math>
       9.3 - 4
      </math>
     </td>
     <td>
      <b>
       Wireless Clock
      </b>
     </td>
     <td>
      223
     </td>
    </tr>
    <tr>
     <td>
      <math>
       9.3 - 5
      </math>
     </td>
     <td>
      <b>
       Digital System Regulator
      </b>
     </td>
     <td>
      225
     </td>
    </tr>
    <tr>
     <td>
      <math>
       9.3 - 6
      </math>
     </td>
     <td>
      Low-power voltage regulator
     </td>
     <td>
      225
     </td>
    </tr>
    <tr>
     <td>
      <math>
       9.3 - 7
      </math>
     </td>
     <td>
      Brown-out detector
     </td>
     <td>
      226
     </td>
    </tr>
    <tr>
     <td>
      <math>
       9.6 - 1
      </math>
     </td>
     <td>
      ESP32-C3 Boot Flow
     </td>
     <td>
      230
     </td>
    </tr>
    <tr>
     <td>
      <math>
       10.1 - 1
      </math>
     </td>
     <td>
      <b>
       System Timer Structure
      </b>
     </td>
     <td>
      270
     </td>
    </tr>
    <tr>
     <td>
      <math>
       10.4 - 1
      </math>
     </td>
     <td>
      <b>
       System Timer Alarm Generation
      </b>
     </td>
     <td>
      271
     </td>
    </tr>
    <tr>
     <td>
      <math>
       11.1 - 1
      </math>
     </td>
     <td>
      <b>
       Timer Units within Groups
      </b>
     </td>
     <td>
      288
     </td>
    </tr>
    <tr>
     <td>
      <math>
       11.2 - 1
      </math>
     </td>
     <td>
      <b>
       Timer Group Architecture
      </b>
     </td>
     <td>
      289
     </td>
    </tr>
    <tr>
     <td>
      <math>
       12.1 - 1
      </math>
     </td>
     <td>
      <b>
       Watchdog Timers Overview
      </b>
     </td>
     <td>
      305
     </td>
    </tr>
    <tr>
     <td>
      <math>
       12.2 - 1
      </math>
     </td>
     <td>
      Watchdog Timers in ESP32-C3
     </td>
     <td>
      307
     </td>
    </tr>
    <tr>
     <td>
      <math>
       12.3 - 1
      </math>
     </td>
     <td>
      Super Watchdog Controller Structure
     </td>
     <td>
      310
     </td>
    </tr>
    <tr>
     <td>
      <math>
       13.1 - 1
      </math>
     </td>
     <td>
      XTAL32K Watchdog Timer
     </td>
     <td>
      312
     </td>
    </tr>
    <tr>
     <td>
      <math>
       14.1 - 1
      </math>
     </td>
     <td>
      <b>
       Permission Control Overview
      </b>
     </td>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      List of Figures
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      14.4-1
      <br/>
      14.4-2
     </td>
     <td>
      Split Lines for Internal SRAM1
      <br/>
      An illustration of Configuring the Category fields
     </td>
     <td>
      319
      <br/>
      321
     </td>
    </tr>
    <tr>
     <td>
      14.6-1
     </td>
     <td>
      Two Ways to Access External Memory
     </td>
     <td>
      326
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      15.4-1
     </td>
     <td>
      Switching From Secure World to Non-secure World
     </td>
     <td>
      415
     </td>
    </tr>
    <tr>
     <td>
      15.4-2
      <br/>
      15.5-1
     </td>
     <td>
      Switching From Non-secure World to Secure World
      <br/>
      World Switch Log Register
     </td>
     <td>
      416
      <br/>
      417
     </td>
    </tr>
    <tr>
     <td>
      15.5-2
     </td>
     <td>
      Nested Interrupts Handling - Entry 9
     </td>
     <td>
      418
     </td>
    </tr>
    <tr>
     <td>
      15.5-3
     </td>
     <td>
      Nested Interrupts Handling - Entry 1
     </td>
     <td>
      419
     </td>
    </tr>
    <tr>
     <td>
      15.5-4
     </td>
     <td>
      Nested Interrupts Handling - Entry 4
     </td>
     <td>
      419
     </td>
    </tr>
    <tr>
     <td>
      19.3-1
      <br/>
      19.3-2
     </td>
     <td>
      HMAC SHA-256 Padding Diagram
      <br/>
      HMAC Structure Schematic Diagram
     </td>
     <td>
      491
      <br/>
      492
     </td>
    </tr>
    <tr>
     <td>
      22.3-1
     </td>
     <td>
      Software Preparations and Hardware Working Process
     </td>
     <td>
      525
     </td>
    </tr>
    <tr>
     <td>
      23.3-1
     </td>
     <td>
      Architecture of the External Memory Encryption and Decryption
     </td>
     <td>
      535
     </td>
    </tr>
    <tr>
     <td>
      24.3-1
     </td>
     <td>
      Noise Source
     </td>
     <td>
      544
     </td>
    </tr>
    <tr>
     <td>
      25.2-1
     </td>
     <td>
      XTAL_CLK Pulse Width
     </td>
     <td>
      547
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      26.3-1
     </td>
     <td>
      UART Architecture Overview
     </td>
     <td>
      550
     </td>
    </tr>
    <tr>
     <td>
      26.3-2
     </td>
     <td>
      UART Structure
     </td>
     <td>
      550
     </td>
    </tr>
    <tr>
     <td>
      26.4-1
      <br/>
      26.4-2
     </td>
     <td>
      UART Controllers Sharing RAM
      <br/>
      UART Controllers Division
     </td>
     <td>
      552
      <br/>
      554
     </td>
    </tr>
    <tr>
     <td>
      26.4-3
     </td>
     <td>
      The Timing Diagram of Weak UART Signals Along Falling Edges
     </td>
     <td>
      554
     </td>
    </tr>
    <tr>
     <td>
      26.4-4
     </td>
     <td>
      Structure of UART Data Frame
     </td>
     <td>
      555
     </td>
    </tr>
    <tr>
     <td>
      26.4-5
     </td>
     <td>
      AT_CMD Character Structure
     </td>
     <td>
      556
     </td>
    </tr>
    <tr>
     <td>
      26.4-6
     </td>
     <td>
      Driver Control Diagram in RS485 Mode
     </td>
     <td>
      557
     </td>
    </tr>
    <tr>
     <td>
      26.4-7
     </td>
     <td>
      The Timing Diagram of Encoding and Decoding in SIR mode
     </td>
     <td>
      558
     </td>
    </tr>
    <tr>
     <td>
      26.4-8
     </td>
     <td>
      IrDA Encoding and Decoding Diagram
     </td>
     <td>
      558
     </td>
    </tr>
    <tr>
     <td>
      26.4-9
     </td>
     <td>
      Hardware Flow Control Diagram
     </td>
     <td>
      559
     </td>
    </tr>
    <tr>
     <td>
      26.4-10
     </td>
     <td>
      Connection between Hardware Flow Control Signals
     </td>
     <td>
      560
     </td>
    </tr>
    <tr>
     <td>
      26.4-11
      <br/>
      26.5-1
     </td>
     <td>
      Data Transfer in GDMA Mode
      <br/>
      UART Programming Procedures
     </td>
     <td>
      561
      <br/>
      565
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      27.4-1
     </td>
     <td>
      SPI Module Overview
     </td>
     <td>
      610
     </td>
    </tr>
    <tr>
     <td>
      27.5-1
     </td>
     <td>
      Data Buffer Used in CPU-Controlled Transfer
     </td>
     <td>
      615
     </td>
    </tr>
    <tr>
     <td>
      27.5-2
      <br/>
      27.5-3
     </td>
     <td>
      GP-SPI2 Block Diagram
      <br/>
      Data Flow Control in GP-SPI2 Master Mode
     </td>
     <td>
      618
      <br/>
      619
     </td>
    </tr>
    <tr>
     <td>
      27.5-4
     </td>
     <td>
      Data Flow Control in GP-SPI2 Slave Mode
     </td>
     <td>
      620
     </td>
    </tr>
    <tr>
     <td>
      27.5-5
     </td>
     <td>
      GP-SPI2 State Machine in Master Mode
     </td>
     <td>
      622
     </td>
    </tr>
    <tr>
     <td>
      27.5-6
     </td>
     <td>
      Full-Duplex Communication Between GP-SPI2 Master and a Slave
     </td>
     <td>
      626
     </td>
    </tr>
    <tr>
     <td>
      27.5-7
     </td>
     <td>
      Connection of GP-SPI2 to Flash and External RAM in 4-bit Mode
     </td>
     <td>
      629
     </td>
    </tr>
    <tr>
     <td>
      27.5-8
     </td>
     <td>
      SPI Quad I/O Read Command Sequence Sent by GP-SPI2 to Flash
     </td>
     <td>
      629
     </td>
    </tr>
    <tr>
     <td>
      27.5-9
     </td>
     <td>
      Configurable Segmented Transfer in DMA-Controlled Master Mode
     </td>
     <td>
      630
     </td>
    </tr>
    <tr>
     <td>
      27.6-1
     </td>
     <td>
      Recommended CS Timing and Settings When Accessing External RAM
     </td>
     <td>
      639
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      List of Figures
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      27.7-1
     </td>
     <td>
      SPI Clock Mode 0 or 2
     </td>
     <td>
      641
     </td>
    </tr>
    <tr>
     <td>
      27.7-2
      <br/>
      27.8-1
     </td>
     <td>
      SPI Clock Mode 1 or 3
      <br/>
      Timing Compensation Control Diagram in GP-SPI2 Master Mode
     </td>
     <td>
      641
      <br/>
      643
     </td>
    </tr>
    <tr>
     <td>
      27.8-2
     </td>
     <td>
      Timing Compensation Example in GP-SPI2 Master Mode
     </td>
     <td>
      644
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      28.3-1
      <br/>
      28.3-2
     </td>
     <td>
      I2C Master Architecture
      <br/>
      I2C Slave Architecture
     </td>
     <td>
      677
      <br/>
      677
     </td>
    </tr>
    <tr>
     <td>
      28.3-3
     </td>
     <td>
      I2C Protocol Timing (Cited from Fig.31 in The I2C-bus specification Version 2.1)
     </td>
     <td>
      678
     </td>
    </tr>
    <tr>
     <td>
      28.3-4
     </td>
     <td>
      I2C Timing Parameters (Cited from Table 5 in The I2C-bus specification Version 2.1)
     </td>
     <td>
      679
     </td>
    </tr>
    <tr>
     <td>
      28.4-1
     </td>
     <td>
      I2C Timing Diagram
     </td>
     <td>
      682
     </td>
    </tr>
    <tr>
     <td>
      28.4-2
     </td>
     <td>
      Structure of I2C Command Registers
     </td>
     <td>
      684
     </td>
    </tr>
    <tr>
     <td>
      28.5-1
     </td>
     <td>
      I2Cmaster
      <br/>
      Writing to I2Cslave
      <br/>
      with a 7-bit Address
     </td>
     <td>
      688
     </td>
    </tr>
    <tr>
     <td>
      28.5-2
     </td>
     <td>
      I2Cmaster
      <br/>
      Writing to a Slave with a 10-bit Address
     </td>
     <td>
      690
     </td>
    </tr>
    <tr>
     <td>
      28.5-3
     </td>
     <td>
      I2Cmaster
      <br/>
      Writing to I2Cslave
      <br/>
      with Two 7-bit Addresses
     </td>
     <td>
      692
     </td>
    </tr>
    <tr>
     <td>
      28.5-4
     </td>
     <td>
      I2Cmaster
      <br/>
      Writing to I2Cslave
      <br/>
      with a 7-bit Address in Multiple Sequences
     </td>
     <td>
      694
     </td>
    </tr>
    <tr>
     <td>
      28.5-5
     </td>
     <td>
      I2Cmaster
      <br/>
      Reading I2Cslave
      <br/>
      with a 7-bit Address
     </td>
     <td>
      696
     </td>
    </tr>
    <tr>
     <td>
      28.5-6
      <br/>
      28.5-7
     </td>
     <td>
      I2Cmaster
      <br/>
      Reading I2Cslave
      <br/>
      with a 10-bit Address
      <br/>
      I2Cmaster
      <br/>
      Reading N Bytes of Data from addrM of I2Cslave
      <br/>
      with a 7-bit Address
     </td>
     <td>
      698
      <br/>
      701
     </td>
    </tr>
    <tr>
     <td>
      28.5-8
     </td>
     <td>
      I2Cmaster
      <br/>
      Reading I2Cslave
      <br/>
      with a 7-bit Address in Segments
     </td>
     <td>
      704
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      29.4-1
     </td>
     <td>
      ESP32-C3 I2S System Diagram
     </td>
     <td>
      732
     </td>
    </tr>
    <tr>
     <td>
      29.5-1
     </td>
     <td>
      TDM Philips Standard Timing Diagram
     </td>
     <td>
      734
     </td>
    </tr>
    <tr>
     <td>
      29.5-2
     </td>
     <td>
      TDM MSB Alignment Standard Timing Diagram
     </td>
     <td>
      735
     </td>
    </tr>
    <tr>
     <td>
      29.5-3
      <br/>
      29.5-4
     </td>
     <td>
      TDM PCM Standard Timing Diagram
      <br/>
      PDM Standard Timing Diagram
     </td>
     <td>
      735
      <br/>
      736
     </td>
    </tr>
    <tr>
     <td>
      29.6-1
     </td>
     <td>
      I2S Clock
     </td>
     <td>
      736
     </td>
    </tr>
    <tr>
     <td>
      29.9-1
     </td>
     <td>
      TX Data Format Control
     </td>
     <td>
      741
     </td>
    </tr>
    <tr>
     <td>
      29.9-2
     </td>
     <td>
      TDM Channel Control
     </td>
     <td>
      743
     </td>
    </tr>
    <tr>
     <td>
      29.9-3
     </td>
     <td>
      PDM Channel Control Example
     </td>
     <td>
      745
     </td>
    </tr>
    <tr>
     <td>
      30.2-1
     </td>
     <td>
      USB Serial/JTAG High Level Diagram
     </td>
     <td>
      765
     </td>
    </tr>
    <tr>
     <td>
      30.2-2
     </td>
     <td>
      USB Serial/JTAG Block Diagram
     </td>
     <td>
      766
     </td>
    </tr>
    <tr>
     <td>
      31.2-1
     </td>
     <td>
      Bit Fields in Data Frames and Remote Frames
     </td>
     <td>
      791
     </td>
    </tr>
    <tr>
     <td>
      31.2-2
     </td>
     <td>
      Fields of an Error Frame
     </td>
     <td>
      793
     </td>
    </tr>
    <tr>
     <td>
      31.2-3
     </td>
     <td>
      Fields of an Overload Frame
     </td>
     <td>
      793
     </td>
    </tr>
    <tr>
     <td>
      31.2-4
     </td>
     <td>
      The Fields within an Interframe Space
     </td>
     <td>
      794
     </td>
    </tr>
    <tr>
     <td>
      31.2-5
     </td>
     <td>
      Layout of a Bit
     </td>
     <td>
      797
     </td>
    </tr>
    <tr>
     <td>
      31.3-1
     </td>
     <td>
      TWAI Overview Diagram
     </td>
     <td>
      798
     </td>
    </tr>
    <tr>
     <td>
      31.4-1
      <br/>
      31.4-2
     </td>
     <td>
      Acceptance Filter
      <br/>
      Single Filter Mode
     </td>
     <td>
      807
      <br/>
      808
     </td>
    </tr>
    <tr>
     <td>
      31.4-3
     </td>
     <td>
      Dual Filter Mode
     </td>
     <td>
      809
     </td>
    </tr>
    <tr>
     <td>
      31.4-4
     </td>
     <td>
      Error State Transition
     </td>
     <td>
      810
     </td>
    </tr>
    <tr>
     <td>
      31.4-5
     </td>
     <td>
      Positions of Arbitration Lost Bits
     </td>
     <td>
      812
     </td>
    </tr>
    <tr>
     <td>
      32.2-1
     </td>
     <td>
      LED PWM Architecture
     </td>
     <td>
      827
     </td>
    </tr>
    <tr>
     <td>
      32.3-1
     </td>
     <td>
      LED PWM Generator Diagram
     </td>
     <td>
      828
     </td>
    </tr>
    <tr>
     <td>
      32.3-2
     </td>
     <td>
      Frequency Division When LEDC_CLK_DIV is a Non-Integer Value
     </td>
     <td>
      829
     </td>
    </tr>
   </tbody>
  </table>
  <span id="page-28-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      List of Figures
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      32.3-3
     </td>
     <td>
      LED_PWM Output Signal Diagram
     </td>
     <td>
      832
     </td>
    </tr>
    <tr>
     <td>
      32.3-4
     </td>
     <td>
      Output Signal Diagram of Fading Duty Cycle
     </td>
     <td>
      832
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      33.3-1
     </td>
     <td>
      RMT Architecture
     </td>
     <td>
      844
     </td>
    </tr>
    <tr>
     <td>
      33.3-2
     </td>
     <td>
      Format of Pulse Code in RAM
     </td>
     <td>
      844
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      34.2-1
     </td>
     <td>
      SAR ADCs Function Overview
     </td>
     <td>
      869
     </td>
    </tr>
    <tr>
     <td>
      34.2-2
     </td>
     <td>
      Diagram of DIG ADC FSM
     </td>
     <td>
      872
     </td>
    </tr>
    <tr>
     <td>
      34.2-3
     </td>
     <td>
      APB_SARADC_SAR_PATT_TAB1_REG and Pattern Table Entry 0 - Entry 3
     </td>
     <td>
      873
     </td>
    </tr>
    <tr>
     <td>
      34.2-4
     </td>
     <td>
      APB_SARADC_SAR_PATT_TAB2_REG and Pattern Table Entry 4 - Entry 7
     </td>
     <td>
      873
     </td>
    </tr>
    <tr>
     <td>
      34.2-5
     </td>
     <td>
      Pattern Table Entry
     </td>
     <td>
      873
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   Part I
  </h1>
  <h1>
   Microprocessor and Master
  </h1>
  <p block-type="Text">
   This part covers the essential processing elements of the system. Details include controllers for Direct Memory Access (DMA) and RISC-V CPU.
  </p>
  <h1>
   <span id="page-30-0">
   </span>
   Chapter 1
  </h1>
  <h1>
   ESP-RISC-V CPU
  </h1>
  <h1>
   1.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-30-1">
   </span>
   ESP-RISC-V CPU is a 32-bit core based upon RISC-V ISA comprising base integer (I), multiplication/division (M) and compressed (C) standard extensions. The core has 4-stage, in-order, scalar pipeline optimized for area, power and performance. CPU core complex has an interrupt-controller (INTC), debug module (DM) and system bus (SYS BUS) interfaces for memory and peripheral access.
  </p>
  <p>
   <span id="page-30-3">
   </span>
   <img src="_page_30_Figure_4.jpeg"/>
  </p>
  <p>
   <img src="_page_30_Figure_5.jpeg"/>
  </p>
  <h1>
   1.2 Features
  </h1>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <span id="page-30-2">
     </span>
     <i>
      •
     </i>
     Operating clock frequency up to 160 MHz
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Zero wait cycle access to on-chip SRAM and Cache for program and data access over IRAM/DRAM interface
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Interrupt controller (INTC) with up to 31 vectored interrupts with programmable priority and threshold levels
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Debug module (DM) compliant with RISC-V debug specification v0.13 with external debugger support over an industry-standard JTAG/USB port
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Debugger direct system bus access (SBA) to memory and peripherals
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Hardware trigger compliant to RISC-V debug specification v0.13 with up to 8 breakpoints/watchpoints
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Physical memory protection (PMP) for up to 16 configurable regions
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     32-bit AHB system bus for peripheral access
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable events for core performance metrics
    </li>
   </ul>
  </p>
  <h1>
   1.3 Address Map
  </h1>
  <p block-type="Text">
   <span id="page-31-0">
   </span>
   Below table shows address map of various regions accessible by CPU for instruction, data, system bus peripheral and debug.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Table 1.3-1. CPU Address Map
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <span id="page-31-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 1.3-1. CPU Address Map
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      IRAM
     </td>
     <td>
      Instruction Address Map
     </td>
     <td>
      0x4000_0000
     </td>
     <td>
      0x47FF_FFFF
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      DRAM
     </td>
     <td>
      Data Address Map
     </td>
     <td>
      0x3800_0000
     </td>
     <td>
      0x3FFF_FFFF
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   *default : Address not matching any of the specified ranges (IRAM, DRAM, DM) are accessed using AHB bus.
  </p>
  <h1>
   1.4 Configuration and Status Registers (CSRs)
  </h1>
  <h1>
   <span id="page-31-1">
   </span>
   1.4.1 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-31-2">
   </span>
   Below is a list of CSRs available to the CPU. Except for the custom performance counter CSRs and the tcontrol register (which complies with the RISC-V External Debug Support Version 0.13.2), all the implemented CSRs follow the standard mapping of bit fields as described in the RISC-V Instruction Set Manual, Volume II: Privileged Architecture, Version 1.10. It must be noted that even among the standard CSRs, not all bit fi
   <a href="#page-53-0">
    elds
   </a>
   have been implemented, limited by the subset of features implemented in the CPU. Refer to the next section for detailed description of the subset of fields implemented under each of these CSRs.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="11">
      Name
      <br/>
      Description
      <br/>
      Address
      <br/>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Machine Information CSRs
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      mvendorid
     </td>
     <td>
      Machine Vendor ID
     </td>
     <td>
      0xF11
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      marchid
      <br/>
      mimpid
     </td>
     <td>
      Machine Architecture ID
      <br/>
      Machine Implementation ID
     </td>
     <td>
      0xF12
      <br/>
      0xF13
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      mhartid
     </td>
     <td>
      Machine Hart ID
     </td>
     <td>
      0xF14
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="8">
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 1 ESP-RISC-V CPU
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      mstatus
     </td>
     <td>
      Machine Mode Status
     </td>
     <td>
      0x300
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      misa ¹
     </td>
     <td>
      Machine ISA
     </td>
     <td>
      0x301
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      mtvec ²
     </td>
     <td>
      Machine Trap Vector
     </td>
     <td>
      0x305
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Machine Trap Handling CSRs
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      mscratch
     </td>
     <td>
      Machine Scratch
     </td>
     <td>
      0x340
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      mepc
     </td>
     <td>
      Machine Trap Program Counter
     </td>
     <td>
      0x341
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      mcause ³
      <br/>
      mtval
     </td>
     <td>
      Machine Trap Cause
      <br/>
      Machine Trap Value
     </td>
     <td>
      0x342
      <br/>
      0x343
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Physical Memory Protection (PMP) CSRs
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      pmpcfg0
     </td>
     <td>
      Physical memory protection configuration
     </td>
     <td>
      0x3A0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpcfg1
     </td>
     <td>
      Physical memory protection configuration
     </td>
     <td>
      0x3A1
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpcfg2
     </td>
     <td>
      Physical memory protection configuration
     </td>
     <td>
      0x3A2
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpcfg3
     </td>
     <td>
      Physical memory protection configuration
     </td>
     <td>
      0x3A3
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr0
     </td>
     <td>
      Physical memory protection address register
     </td>
     <td>
      0x3B0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr1
     </td>
     <td>
      Physical memory protection address register
     </td>
     <td>
      0x3B1
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr15
     </td>
     <td>
      Physical memory protection address register
     </td>
     <td>
      0x3BF
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Trigger Module CSRs (shared with Debug Mode)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      tselect
     </td>
     <td>
      Trigger Select Register
     </td>
     <td>
      0x7A0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      tdata1
     </td>
     <td>
      Trigger Abstract Data 1
     </td>
     <td>
      0x7A1
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      tdata2
     </td>
     <td>
      Trigger Abstract Data 2
     </td>
     <td>
      0x7A2
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      tcontrol
     </td>
     <td>
      Global Trigger Control
     </td>
     <td>
      0x7A5
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Debug Mode CSRs
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      dcsr
      <br/>
      dpc
     </td>
     <td>
      Debug Control and Status
      <br/>
      Debug PC
     </td>
     <td>
      0x7B0
      <br/>
      0x7B1
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      dscratch0
     </td>
     <td>
      Debug Scratch Register 0
     </td>
     <td>
      0x7B2
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      dscratch1
     </td>
     <td>
      Debug Scratch Register 1
     </td>
     <td>
      0x7B3
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Performance Counter CSRs (Custom) ⁴
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      mpcer
     </td>
     <td>
      Machine Performance Counter Event
     </td>
     <td>
      0x7E0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      mpcmr
     </td>
     <td>
      Machine Performance Counter Mode
     </td>
     <td>
      0x7E1
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      mpccr
     </td>
     <td>
      Machine Performance Counter Count
     </td>
     <td>
      0x7E2
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO Access CSRs (Custom)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      cpu_gpio_oen
     </td>
     <td>
      GPIO Output Enable
     </td>
     <td>
      0x803
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      cpu_gpio_in
     </td>
     <td>
      GPIO Input Value
     </td>
     <td>
      0x804
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   No
   <a href="#page-39-1">
    te that if write
   </a>
   /set/clear operation is attempted on any of the CSRs which are read-only (RO), as indicated in th
   <a href="#page-40-0">
    e above table, t
   </a>
   he CPU will generate illegal instruction exception.
  </p>
  <p>
   ¹Although misa is specified as having both read and write access (R/W), its fields are hardwired and thus write has no effect. This is what would be termed WARL (Write Any Read Legal) in RISC-V terminology
  </p>
  <p>
   ²mtvec only provides configuration for trap handling in vectored mode with the base address aligned to 256 bytes
  </p>
  <p>
   <span id="page-32-3">
   </span>
   <span id="page-32-2">
   </span>
   <span id="page-32-1">
   </span>
   <span id="page-32-0">
   </span>
   ³External interrupt IDs reflected in mcause include even those IDs which have been reserved by RISC-V standard for core internal sources. ⁴These cu
   <a href="#page-35-0">
    stom
   </a>
   CSRs have been implemented in the address space reserved by RISC-V standard for custom use
  </p>
  <h1>
   1.4.2 Register Description
  </h1>
  <p>
   <span id="page-33-2">
   </span>
   <span id="page-33-1">
   </span>
   <span id="page-33-0">
   </span>
   <img src="_page_33_Figure_1.jpeg"/>
  </p>
  <h4>
   Register 1.5. mstatus (0x300)
  </h4>
  <p>
   <span id="page-34-0">
   </span>
   <img src="_page_34_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     MIE Global machine mode interrupt enable. (R/W)
    </li>
    <li block-type="ListItem">
     MPIE Machine previous interrupt enable (before trap). (R/W)
    </li>
    <li block-type="ListItem">
     MPP Machine previous privilege mode (before trap). (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Possible values:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x0: User mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x3: Machine mode
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    Note : Only lower bit is writable. Write to the higher bit is ignored as it is directly tied to the lower bit.
   </i>
  </p>
  <p block-type="Text">
   TW Timeout wait. (R/W)
  </p>
  <p block-type="Text">
   If this bit is set, executing WFI (Wait-for-Interrupt) instruction in User mode will cause illegal instruction exception.
  </p>
  <span id="page-35-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Register 1.6. misa (0x301)
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      (reserved)
     </th>
    </tr>
    <tr>
     <th>
      MXL
      <br/>
      31
      <br/>
      30
     </th>
     <th>
      W
      <br/>
      M
      <br/>
      Q
      <br/>
      O
      <br/>
      Z
      <br/>
      Y
      <br/>
      V
      <br/>
      U
      <br/>
      S
      <br/>
      R
      <br/>
      P
      <br/>
      N
      <br/>
      K
      <br/>
      H
      <br/>
      G
      <br/>
      D
      <br/>
      C
      <br/>
      B
      <br/>
      A
      <br/>
      X
      <br/>
      T
      <br/>
      L
      <br/>
      F
      <br/>
      E
      <br/>
      J
      <br/>
      I
      <br/>
      29
      <br/>
      26
      <br/>
      25
      <br/>
      24
      <br/>
      23
      <br/>
      22
      <br/>
      21
      <br/>
      20
      <br/>
      19
      <br/>
      18
      <br/>
      17
      <br/>
      16
      <br/>
      15
      <br/>
      14
      <br/>
      13
      <br/>
      12
      <br/>
      11
      <br/>
      10
      <br/>
      9
      <br/>
      8
      <br/>
      7
      <br/>
      6
      <br/>
      5
      <br/>
      4
      <br/>
      3
      <br/>
      2
      <br/>
      1
      <br/>
      0
     </th>
    </tr>
    <tr>
     <th>
      0x1
     </th>
     <th>
      0x0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      1
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      1
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      1
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      1
      <br/>
      0
      <br/>
      0
     </th>
    </tr>
    <tr>
     <th>
      MXL
     </th>
     <th>
      Machine XLEN = 1 (32-bit). (RO)
     </th>
    </tr>
    <tr>
     <th>
      Z
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      Y
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      X
     </th>
     <th>
      Non-standard extensions present = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      W
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      V
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      U
     </th>
     <th>
      User mode implemented = 1. (RO)
     </th>
    </tr>
    <tr>
     <th>
      T
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      S
     </th>
     <th>
      Supervisor mode implemented = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      R
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      Q
     </th>
     <th>
      Quad-precision floating-point extension = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      P
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      O
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      N
     </th>
     <th>
      User-level interrupts supported = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      M
     </th>
     <th>
      Integer Multiply/Divide extension = 1. (RO)
     </th>
    </tr>
    <tr>
     <th>
      L
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      K
     </th>
     <th colspan="6">
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      J
     </th>
     <th>
      Reserved = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      I
     </th>
     <th>
      RV32I base ISA = 1. (RO)
     </th>
    </tr>
    <tr>
     <th>
      H
     </th>
     <th>
      Hypervisor extension = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      G
     </th>
     <th colspan="6">
      Additional standard extensions present = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      F
      <br/>
      E
     </th>
     <th colspan="6">
      Single-precision floating-point extension = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      D
     </th>
     <th>
      RV32E base ISA = 0. (RO)
      <br/>
      Double-precision floating-point extension = 0. (RO)
     </th>
    </tr>
    <tr>
     <th>
      C
     </th>
     <th>
      Compressed Extension = 1. (RO)
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   A Atomic Extension = 0. (RO)
  </p>
  <p block-type="Text">
   Espressif Systems 36
  </p>
  <h4>
   Register 1.7. mtvec (0x305)
  </h4>
  <p>
   <span id="page-36-0">
   </span>
   <img src="_page_36_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   MODE Only vectored mode 0x1 is available. (RO)
  </p>
  <p block-type="Text">
   BASE Higher 24 bits of trap vector base address aligned to 256 bytes. (R/W)
  </p>
  <p>
   <img src="_page_36_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-36-1">
   </span>
   <img src="_page_36_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   MSCRATCH Machine scratch register for custom use. (R/W)
  </p>
  <p>
   <img src="_page_36_Figure_7.jpeg"/>
  </p>
  <p>
   <span id="page-36-2">
   </span>
   <img src="_page_36_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   MEPC Machine trap/exception program counter. (R/W)
  </p>
  <p block-type="Text">
   This is automatically updated with address of the instruction which was about to be executed while CPU encountered the most recent trap.
  </p>
  <h4>
   Register 1.10. mcause (0x342)
  </h4>
  <p>
   <span id="page-37-0">
   </span>
   <img src="_page_37_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   Exception Code This field is automatically updated with unique ID of the most recent exception or interrupt due to which CPU entered trap. (R/W)
  </p>
  <p block-type="Text">
   Possible exception IDs are:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x1: PMP Instruction access fault
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x2: Illegal Instruction
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x3: Hardware Breakpoint/Watchpoint or EBREAK
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x5: PMP Load access fault
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x7: PMP Store access fault
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x8: ECALL from U mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0xb: ECALL from M mode
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    Note : Exception ID 0x0 (instruction access misaligned) is not present because CPU always masks the lowest bit of the address during instruction fetch.
   </i>
  </p>
  <p block-type="Text">
   Interrupt Flag This flag is automatically updated when CPU enters trap. (R/W)
  </p>
  <p block-type="Text">
   If this is found to be set, indicates that the latest trap occurred due to interrupt. For exceptions it remains unset.
  </p>
  <p block-type="Text">
   <i>
    Note : The interrupt controller is using up IDs in range 1-31 for all external interrupt sources. This is different from the RISC-V standard which has reserved IDs in range 0-15 for core internal interrupt sources.
   </i>
  </p>
  <h4>
   Register 1.11. mtval (0x343)
  </h4>
  <p>
   <span id="page-37-1">
   </span>
   <img src="_page_37_Figure_16.jpeg"/>
  </p>
  <p block-type="Text">
   MTVAL Machine trap value. (R/W)
  </p>
  <p block-type="Text">
   This is automatically updated with an exception dependent data which may be useful for handling that exception.
  </p>
  <p block-type="Text">
   Data is to be interpreted depending upon exception IDs:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x1: Faulting virtual address of instruction
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x2: Faulting instruction opcode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x5: Faulting data address of load operation
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x7: Faulting data address of store operation
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    Note : The value of this register is not valid for other exception IDs and interrupts.
   </i>
  </p>
  <h4>
   Register 1.12. mpcer (0x7E0)
  </h4>
  <p>
   <span id="page-38-0">
   </span>
   <img src="_page_38_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   INST_COMP Count Compressed Instructions. (R/W)
  </p>
  <p block-type="Text">
   BRANCH_TAKEN Count Branches Taken. (R/W)
  </p>
  <p block-type="Text">
   BRANCH Count Branches. (R/W)
  </p>
  <p block-type="Text">
   JMP_UNCOND Count Unconditional Jumps. (R/W)
  </p>
  <p block-type="Text">
   STORE Count Stores. (R/W)
  </p>
  <p block-type="Text">
   LOAD Count Loads. (R/W)
  </p>
  <p block-type="Text">
   IDLE Count IDLE Cycles. (R/W)
  </p>
  <p block-type="Text">
   JMP_HAZARD Count Jump Hazards. (R/W)
  </p>
  <p block-type="Text">
   LD_HAZARD Count Load Hazards. (R/W)
  </p>
  <p block-type="Text">
   INST Count Instructions. (R/W)
  </p>
  <p block-type="Text">
   CYCLE Count Clock Cycles. Cycle count does not increment during WFI mode. (R/W)
  </p>
  <p block-type="Text">
   <i>
    Note: Each bit selects a specific event for counter to increment. If more than one event is selected and occurs simultaneously, then counter increments by one only.
   </i>
  </p>
  <h4>
   Register 1.13. mpcmr (0x7E1)
  </h4>
  <p>
   <span id="page-38-1">
   </span>
   <img src="_page_38_Figure_15.jpeg"/>
  </p>
  <p block-type="Text">
   COUNT_SAT Counter Saturation Control. (R/W) Possible values:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: Overflow on maximum value
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: Halt on maximum value
    </li>
   </ul>
  </p>
  <p block-type="TextInlineMath">
   COUNT_EN Counter Enable Control. (R/W)
  </p>
  <p block-type="Text">
   Possible values:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: Disabled
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: Enabled
    </li>
   </ul>
  </p>
  <h4>
   Register 1.14. mpccr (0x7E2)
  </h4>
  <p>
   <span id="page-39-0">
   </span>
   <img src="_page_39_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   MPCCR Machine Performance Counter Value. (R/W)
  </p>
  <p block-type="Text">
   Register 1.15. cpu_gpio_oen (0x803)
  </p>
  <p>
   <span id="page-39-2">
   </span>
   <img src="_page_39_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   CPU_GPIO_OEN GPIOn (n=0 ~ 21) Output Enable. CPU_GPIO_OEN[7:0] correspond to output enable signals cpu_gpio_out_oen[7:0] in Table 5.11-1
   <i>
    Peripheral Signals via GPIO Matrix
   </i>
   . CPU_GPIO_OEN value matches that of cpu_gpio_out_oen. CPU_GPIO_OEN is the enable signal of CPU_GPIO_OUT. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: GPIO output disable
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: GPIO output enable
    </li>
   </ul>
  </p>
  <h4>
   Register 1.16. cpu_gpio_in (0x804)
  </h4>
  <p>
   <span id="page-39-1">
   </span>
   <img src="_page_39_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   CPU_GPIO_IN GPIOn (n=0 ~ 21) Input Value. It is a CPU CSR to read input value (1=high, 0=low) from SoC GPIO pin.
  </p>
  <p block-type="Text">
   CPU_GPIO_IN[7:0] correspond to input signals cpu_gpio_in[7:0] in Table 5.11-1
   <i>
    Peripheral Signals via GPIO Matrix
   </i>
   .
  </p>
  <p block-type="Text">
   CPU_GPIO_IN[7:0] can only be mapped to GPIO pins through GPIO matrix. For details please refer to Section 5.4 in Chapter
   <i>
    IO MUX and GPIO Matrix (GPIO, IO MUX)
   </i>
   .
   <a href="#page-168-0">
    (RO)
   </a>
  </p>
  <h4>
   Register 1.17. cpu_gpio_out (0x805)
  </h4>
  <span id="page-40-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Register 1.17. cpu_gpio_out (0x805)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      CPU_GPIO_OUT[7]
     </th>
     <th>
      CPU_GPIO_OUT[6]
     </th>
     <th>
      CPU_GPIO_OUT[5]
      <br/>
      CPU_GPIO_OUT[4]
     </th>
     <th>
      CPU_GPIO_OUT[3]
     </th>
     <th>
      CPU_GPIO_OUT[2]
      <br/>
      CPU_GPIO_OUT[1]
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   CPU_GPIO_OUT GPIOn (n=0 ~ 21) Output Value. It is a CPU CSR to write value (1=high, 0=low) to SoC GPIO pin. The value takes effect only when CPU_GPIO_OEN is set.
  </p>
  <p block-type="Text">
   CPU_GPIO_OUT[7:0] correspond to output signals cpu_gpio_out[7:0] in Table 5.11-1
   <i>
    Peripheral Signals via GPIO Matrix
   </i>
   .
  </p>
  <p block-type="Text">
   CPU_GPIO_OUT[7:0] can only be mapped to GP
   <a href="#page-39-2">
    IO pins through G
   </a>
   PIO matrix. For details please refer to Section 5.5 in Chapter
   <i>
    IO MUX and GPIO Matrix (GPIO, IO MUX)
   </i>
   . (R/W)
  </p>
  <h1>
   1.5 Interrupt Controller
  </h1>
  <h1>
   <span id="page-41-0">
   </span>
   1.5.1 Features
  </h1>
  <p block-type="Text">
   <span id="page-41-1">
   </span>
   The interrupt controller allows capturing, masking and dynamic prioritization of interrupt sources routed from peripherals to the RISC-V CPU. It supports:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Up to 31 asynchronous interrupts with unique IDs (1-31)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable via read/write to memory mapped registers
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     15 levels of priority, programmable for each interrupt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support for both level and edge type interrupt sources
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Programmable global threshold for masking interrupts with lower priority
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Interrupts IDs mapped to trap-vector address offsets
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For the complete list of interrupt registers and detailed configuration information, please refer to Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   , section 8.4, register group "CPU Interrupt Registers".
  </p>
  <h1>
   1.5.2 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-41-2">
   </span>
   <a href="#page-201-0">
    Each interrupt ID has 5 prope
   </a>
   rties ass
   <a href="#page-208-0">
    ocia
   </a>
   ted with it:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. Enable State (0-1):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Determines if an interrupt is enabled to be captured and serviced by the CPU.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Programmed by writing the corresponding bit in INTERRUPT_CORE0_CPU_INT_ENABLE_REG.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Type (0-1):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Enables latching the state of an interrupt signal
       <a href="#page-215-0">
        on its rising edge.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Programmed by writing the corresponding bit in INTERRUPT_CORE0_CPU_INT_TYPE_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       An interrupt for which type is kept 0 is referred as a 'level' type interrupt.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       An interrupt for which type is set to 1 is referred
       <a href="#page-215-1">
        as an 'edge' type interrupt.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Priority (1-15):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Determines which interrupt, among multiple pending interrupts, the CPU will service first.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Programmed by writing to the INTERRUPT_CORE0_CPU_INT_PRI_
       <i>
        n
       </i>
       _REG for a particular interrupt ID
       <i>
        n
       </i>
       in range (1-31).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Enabled interrupts with priorities zero or less than the threshold value in INTERRUPT_CORE0_CPU_INT
       <a href="#page-216-0">
        _THRESH_REG
       </a>
       are masked.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Priority levels increase from 1 (lowest) to 15 (highest).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       <a href="#page-217-0">
        Interrupts with same priority are statically prio
       </a>
       ritized by their IDs, lowest ID having highest priority.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     4. Pending State (0-1):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Reflects the captured state of an enabled and unmasked interrupt signal.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For each interrupt ID, the corresponding bit in read-only INTERRUPT_CORE0_CPU_INT_EIP_STATUS_REG gives its pending state.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A pending interrupt will cause CPU to enter trap if no other pending interrupt has higher priority.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-216-1">
      A pending interrupt is said to be 'claimed' if it pre
     </a>
     empts the CPU and causes it to jump to the corresponding trap vector address.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     All pending interrupts which are yet to be serviced are termed as 'unclaimed'.
    </li>
    <li block-type="ListItem">
     5. Clear State (0-1):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Toggling this will clear the pending state of claimed edge-type interrupts only.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Toggled by first setting and then clearing the corresponding bit in INTERRUPT_CORE0_CPU_INT_CLEAR_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Pending state of a level type interrupt is unaffected by this and must be cleared from source.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       <a href="#page-215-2">
        Pending state of an unclaimed edge type in
       </a>
       terrupt can be flushed, if required, by first clearing the corresponding bit in INTERRUPT_CORE0_CPU_INT_ENABLE_REG and then toggling same bit in INTERRUPT_CORE0_CPU_INT_CLEAR_REG.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When CPU services a pending interrupt, it:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     save
     <a href="#page-215-2">
      s the address of the current un-executed in
     </a>
     <a href="#page-215-0">
      struction in
     </a>
     mepc for resuming execution later.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     updates the value of mcause with the ID of the interrupt being serviced.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     copies the state of MIE into MPIE, and subsequently clears
     <a href="#page-36-2">
      MIE, th
     </a>
     ereby disabling interrupts globally.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     enters trap by jumpin
     <a href="#page-37-0">
      g to a wo
     </a>
     rd-aligned offset of the address stored in mtvec.
    </li>
   </ul>
  </p>
  <p block-type="TextInlineMath">
   Table 1.5-1 shows the ma
   <a href="#page-34-0">
    ppin
   </a>
   g of
   <a href="#page-34-0">
    each
   </a>
   interrupt ID with the corre
   <a href="#page-34-0">
    spon
   </a>
   ding trap-vector address. In short, the word aligned trap address for an interrupt with a certain
   <i>
    ID
   </i>
   =
   <i>
    i
   </i>
   can be calculated as (
   <i>
    mtvec
   </i>
   + 4
   <i>
    i
   </i>
   ).
  </p>
  <p block-type="Text">
   <i>
    Note : ID
   </i>
   = 0
   <i>
    is unavailable and therefore cannot be used for capturing inter
    <a href="#page-36-0">
     rupts.
    </a>
    This is because the corre
    <a href="#page-42-0">
     spon
    </a>
    ding trap vector address (mtvec + 0x00) is reserved for exceptions.
   </i>
  </p>
  <span id="page-42-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <td>
      ID
     </td>
     <td>
      Address
     </td>
     <td>
      ID
     </td>
     <td>
      Address
     </td>
     <td>
      ID
     </td>
     <td>
      Address
     </td>
     <td>
     </td>
     <td>
      ID
      <br/>
      Address
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      NA
     </td>
     <td>
      8
     </td>
     <td>
      mtvec + 0x20
     </td>
     <td>
      16
     </td>
     <td>
      mtvec + 0x40
     </td>
     <td>
      24
     </td>
     <td>
      mtvec + 0x60
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      mtvec + 0x04
     </td>
     <td>
      9
     </td>
     <td>
      mtvec + 0x24
     </td>
     <td>
      17
     </td>
     <td>
      mtvec + 0x44
     </td>
     <td>
      25
     </td>
     <td>
      mtvec + 0x64
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      mtvec + 0x08
     </td>
     <td>
      10
     </td>
     <td>
      mtvec + 0x28
     </td>
     <td>
      18
     </td>
     <td>
      mtvec + 0x48
     </td>
     <td>
      26
     </td>
     <td>
      mtvec + 0x68
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      mtvec + 0x0c
     </td>
     <td>
      11
     </td>
     <td>
      mtvec + 0x2c
     </td>
     <td>
      19
     </td>
     <td>
      mtvec + 0x4c
     </td>
     <td>
      27
     </td>
     <td>
      mtvec + 0x6c
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
      mtvec + 0x10
     </td>
     <td>
      12
     </td>
     <td>
      mtvec + 0x30
     </td>
     <td>
      20
     </td>
     <td>
      mtvec + 0x50
     </td>
     <td>
      28
     </td>
     <td>
      mtvec + 0x70
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      mtvec + 0x14
     </td>
     <td>
      13
     </td>
     <td>
      mtvec + 0x34
     </td>
     <td>
      21
     </td>
     <td>
      mtvec + 0x54
     </td>
     <td>
      29
     </td>
     <td>
      mtvec + 0x74
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      mtvec + 0x18
     </td>
     <td>
      14
     </td>
     <td>
      mtvec + 0x38
     </td>
     <td>
      22
     </td>
     <td>
      mtvec + 0x58
     </td>
     <td>
      30
     </td>
     <td>
      mtvec + 0x78
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 1.5-1. ID wise map of Interrupt Trap-Vector Addresses
  </p>
  <p block-type="Text">
   After jumping to the trap-vector, the execution flow is dependent on software implementation, although it can be presumed that the interrupt will get handled (and cleared) in some interrupt service routine (ISR) and later the normal execution will resume once the CPU encounters MRET instruction.
  </p>
  <p block-type="Text">
   Upon execution of MRET instruction, the CPU:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     copies the state of MPIE back into MIE, and subsequently clears MPIE. This means that if previously MPIE was set, then, after MRET, MIE will be set, thereby enabling interrupts globally.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     jumps to the address stored in mepc and resumes execution.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   It is p
   <a href="#page-34-0">
    ossibl
   </a>
   e to perform
   <a href="#page-34-0">
    softwa
   </a>
   re assi
   <a href="#page-34-0">
    sted ne
   </a>
   sting of interrupts inside
   <a href="#page-34-0">
   </a>
   a
   <a href="#page-34-0">
    n ISR
   </a>
   as explained in 1.5.3.
  </p>
  <p block-type="Text">
   The below listed points outline the f
   <a href="#page-36-2">
    unction
   </a>
   al behavior of the controller:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Only if an interrupt has non-zero priority, higher or equal to the value in the threshold
     <a href="#page-43-0">
     </a>
     r
     <a href="#page-43-0">
      egiste
     </a>
     r, will it be reflected in INTERRUPT_CORE0_CPU_INT_EIP_STATUS_REG.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If an interrupt is visible in INTERRUPT_CORE0_CPU_INT_EIP_STATUS_REG and has yet to be serviced, then it's possible to mask it (and thereby prevent the CPU from servicing it) by either lowering the value of its priorit
     <a href="#page-216-1">
      y or increasing the global threshold.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If an interrupt, visible in I
     <a href="#page-216-1">
      NTERRUPT_CORE0_CPU_INT_EIP_STATUS_REG, is
     </a>
     to be flushed (and prevented from being serviced at all), then it must be disabled (and cleared if it is of edge type).
    </li>
   </ul>
  </p>
  <h1>
   1.5.3 Suggested O
   <a href="#page-216-1">
    peration
   </a>
  </h1>
  <h1>
   <span id="page-43-0">
   </span>
   1.5.3.1 Latency Aspects
  </h1>
  <p block-type="Text">
   There is latency involved while configuring the Interrupt Controller.
  </p>
  <p block-type="Text">
   <span id="page-43-1">
   </span>
   In steady state operation, the Interrupt Controller has a fixed latency of 4 cycles. Steady state means that no changes have been made to the Interrupt Controller registers recently. This implies that any interrupt that is asserted to the controller will take exactly 4 cycles before the CPU starts processing the interrupt. This further implies that CPU may execute up to 5 instructions before the preemption happens.
  </p>
  <p block-type="Text">
   Whenever any of its registers are modified, the Interrupt Controller enters into transient state, which may take up to 4 cycles for it to settle down into steady state again. During this transient state, the ordering of interrupts may not be predictable, and therefore, a few safety measures need to be taken in software to avoid any synchronization issues.
  </p>
  <p block-type="Text">
   Also, it must be noted that the Interrupt Controller configuration registers lie in the APB address range, hence any R/W access to these registers may take multiple cycles to complete.
  </p>
  <p block-type="Text">
   In consideration of above mentioned characteristics, users are advised to follow the sequence described below, whenever modifying any of the Interrupt Controller registers:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. save the state of MIE and clear MIE to 0
    </li>
    <li block-type="ListItem">
     2. read-modify-write one or more Interrupt Controller registers
    </li>
    <li block-type="ListItem">
     3. execute FENCE
     <a href="#page-34-0">
     </a>
     i
     <a href="#page-34-0">
      nstru
     </a>
     ction to
     <a href="#page-34-0">
      wait fo
     </a>
     r any pending write operations to complete
    </li>
    <li block-type="ListItem">
     4. finally, restore the state of MIE
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Due to its critical nature, it is recommended to disable interrupts globally (MIE=0) beforehand, whenever configuring interrupt controller registers, and then restore MIE right after, as shown in the sequence above.
  </p>
  <p block-type="Text">
   After execution of the sequence above, the Interrupt Controller will resum
   <a href="#page-34-0">
    e op
   </a>
   eration in steady state.
  </p>
  <h2>
   1.5.3.2 Configuration Procedure
  </h2>
  <p block-type="Text">
   By default, interrupts are disabled globally, since the reset value of MIE bit in mstatus is 0. Software must set MIE=1 after initialization of the interrupt stack (including setting mtvec to the interrupt vector address) is done.
  </p>
  <p block-type="Text">
   During normal execution, if an interrupt
   <i>
    n
   </i>
   is to be enabled, the bel
   <a href="#page-34-0">
    ow se
   </a>
   que
   <a href="#page-34-0">
    nce may
   </a>
   be followed:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <a href="#page-34-0">
      1
     </a>
     . save the state of MIE and clear MIE to 0
    </li>
    <li block-type="ListItem">
     2. depending upon the type of the interrupt (edge/level), set/unset the
     <i>
      n
     </i>
     th bit of INTERRUPT_CORE0_CPU_INT_TYPE_REG
    </li>
    <li block-type="ListItem">
     3. set the priority b
     <a href="#page-34-0">
      y writ
     </a>
     ing a valu
     <a href="#page-34-0">
      e to
     </a>
     INTERRUPT_CORE0_CPU_INT_PRI_
     <i>
      n
     </i>
     _REG in range 1(lowest) to 15 (highest)
    </li>
    <li block-type="ListItem">
     4. set the
     <i>
      n
     </i>
     th bit of
     <a href="#page-215-1">
      INTERRUPT_CORE0_CPU
     </a>
     _INT_ENABLE_REG
    </li>
    <li block-type="ListItem">
     5. execute FENCE instruction
    </li>
    <li block-type="ListItem">
     6. restore the state of
     <a href="#page-215-0">
      MIE
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When one or more interrupts become pending, the CPU acknowledges (claims) the interrupt with the highest priority and jumps to the trap vector address corresponding to the interrupt's ID. Software implementation may read mcause to infer the
   <a href="#page-34-0">
    type
   </a>
   of trap (mcause(31) is 1 for interrupts and 0 for exceptions) and then the ID of the interrupt (mcause(4-0) gives ID of interrupt or exception). This inference may not be necessary if each entry in the trap vector are jump instructions to different trap handlers. Ultimately, the trap handler(s) will redir
   <a href="#page-37-0">
    ect execu
   </a>
   tion to the appropriate
   <a href="#page-37-0">
   </a>
   I
   <a href="#page-37-0">
    SR for this in
   </a>
   terrupt.
  </p>
  <p block-type="Text">
   Upon enterin
   <a href="#page-37-0">
    g into an ISR, s
   </a>
   oftware must toggle the
   <i>
    n
   </i>
   th bit of INTERRUPT_CORE0_CPU_INT_CLEAR_REG if the interrupt is of edge type, or clear the source of the interrupt if it is of level type.
  </p>
  <p block-type="Text">
   Software may also update the value of INTERRUPT_CORE0_CPU_INT_THRESH_REG and program MIE=1 for allowing higher priority interrupts to preempt the current ISR (
   <a href="#page-215-2">
    nesting), however, before doing so, all the s
   </a>
   tate CSRs must be saved (mepc, mstatus, mcause, etc.) since they will get overwritten due to occurrence of such an interrupt. Later, when exiting the IS
   <a href="#page-217-0">
    R, the values of these CSRs must be restored
   </a>
   .
  </p>
  <p block-type="Text">
   Finally, after the execution returns from the ISR back to the trap handler, MRET instruction is used to resume normal execution.
  </p>
  <p block-type="Text">
   Later, if the
   <i>
    n
   </i>
   interrupt is no longer needed and needs to be disabled, the following sequence may be followed:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. save the state of MIE and clear MIE to 0
    </li>
    <li block-type="ListItem">
     2. check if the interrupt is pending in INTERRUPT_CORE0_CPU_INT_EIP_STATUS_REG
    </li>
    <li block-type="ListItem">
     3. set/unset the
     <i>
      n
     </i>
     t
     <a href="#page-34-0">
      h bit
     </a>
     of INTER
     <a href="#page-34-0">
      RUPT_
     </a>
     CORE0_CPU_INT_ENABLE_REG
    </li>
    <li block-type="ListItem">
     4. if the interrupt is of edge type and
     <a href="#page-216-1">
      was found to be pending in step 2 above,
     </a>
     <i>
      n
     </i>
     th bit of INTERRUPT_CORE0_CPU_INT_CLEAR_REG must be toggled, so that its pending status gets flushed
    </li>
    <li block-type="ListItem">
     5. execute FENCE instructi
     <a href="#page-215-0">
      on
     </a>
    </li>
    <li block-type="ListItem">
     6.
     <a href="#page-215-2">
      restore the state of
     </a>
     MIE
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-44-0">
   </span>
   Above is only a suggested scheme of operation. Actual software implementation may vary.
  </p>
  <h1>
   1.5.4 Register Summary
  </h1>
  <p block-type="Text">
   The addresses in this section are relative to Interrupt Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   For the complete list of interrupt registers and detailed configuration information, please refer to Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   , section 8.4, register group "CPU Interrupt Registers".
  </p>
  <h1>
   1.5.5 Register Description
  </h1>
  <p block-type="Text">
   <span id="page-45-0">
   </span>
   <a href="#page-201-0">
    The addresses in this section
   </a>
   are relat
   <a href="#page-208-0">
    ive
   </a>
   to Interrupt Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   For the complete list of interrupt registers and detailed configuration information, please refer to Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   , section 8.4, register group "CPU Interrupt Registers".
  </p>
  <h1>
   1.6 Debug
  </h1>
  <h1>
   <span id="page-46-0">
   </span>
   1.6.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-46-1">
   </span>
   This section describes how to debug and test software running on CPU core. Debug support is provided through standard JTAG pins and complies to RISC-V External Debug Support Specification version 0.13.
  </p>
  <p block-type="Text">
   <span id="page-46-3">
   </span>
   Figure 1.6-1 below shows the main components of External Debug Support.
  </p>
  <p>
   <img src="_page_46_Figure_4.jpeg"/>
  </p>
  <p>
   Figure 1.6-1. Debug System Overview
  </p>
  <p block-type="Text">
   The user interacts with the Debug Host (eg. laptop), which is running a debugger (eg. gdb). The debugger communicates with a Debug Translator (eg. OpenOCD, which may include a hardware driver) to communicate with Debug Transport Hardware (eg. Olimex USB-JTAG adapter). The Debug Transport Hardware connects the Debug Host to the ESP-RV Core's Debug Transport Module (DTM) through standard JTAG interface. The DTM provides access to the Debug Module (DM) using the Debug Module Interface (DMI).
  </p>
  <p block-type="Text">
   The DM allows the debugger to halt the core. Abstract commands provide access to its GPRs (general purpose registers). The Program Buffer allows the debugger to execute arbitrary code on the core, which allows access to additional CPU core state. Alternatively, additional abstract commands can provide access to additional CPU core state. ESP-RV core contains Trigger Module supporting 8 triggers. When trigger conditions are met, cores will halt spontaneously and inform the debug module that they have halted.
  </p>
  <p block-type="Text">
   System bus access block allows memory and peripheral register access without using RISC-V core.
  </p>
  <p block-type="Text">
   <span id="page-46-2">
   </span>
   Espressif Systems 47
  </p>
  <h1>
   1.6.2 Features
  </h1>
  <p block-type="Text">
   Basic debug functionality supports below features.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Provides necessary information about the implementation to the debugger.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Allows the CPU core to be halted and resumed.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU core registers (including CSR's) can be read/written by debugger.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU can be debugged from the first instruction executed after reset.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU core can be reset through debugger.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU can be halted on software breakpoint (planted breakpoint instruction).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Hardware single-stepping.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Execute arbitrary instructions in the halted CPU by means of the program buffer. 16-word program buffer is supported.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     System bus access is supported through word aligned address access.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports eight Hardware Triggers (can be used as breakpoints/watchpoints) as described in Section 1.7.
    </li>
   </ul>
  </p>
  <h1>
   1.6.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-47-0">
   </span>
   As mentioned earlier, Debug Scheme conforms to RISC-V External Debug Support Specification version 0.1
   <a href="#page-50-0">
    3.
   </a>
   Please refer the specs for functional operation details.
  </p>
  <h1>
   1.6.4 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-47-1">
   </span>
   Below is the list of Debug CSR's supported by ESP-RV core.
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      dcsr
     </td>
     <td>
      Debug Control and Status
     </td>
     <td>
      0x7B0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      dpc
     </td>
     <td>
      Debug PC
     </td>
     <td>
      0x7B1
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      dscratch0
     </td>
     <td>
      Debug Scratch Register 0
     </td>
     <td>
      0x7B2
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   All
   <a href="#page-49-0">
    the debug
   </a>
   module registers are implemented in conformance to RISC-V External Debug Support Sp
   <a href="#page-49-1">
    ecification
   </a>
   version 0.13. Please refer it for more details.
  </p>
  <h1>
   1.6.5 Register Description
  </h1>
  <p block-type="Text">
   <span id="page-47-2">
   </span>
   Below are the details of Debug CSR's supported by ESP-RV core
  </p>
  <h4>
   Register 1.18. dcsr (0x7B0)
  </h4>
  <p>
   <span id="page-48-0">
   </span>
   <img src="_page_48_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   xdebugver Debug version. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     4: External debug support exists
    </li>
    <li block-type="ListItem">
     ebreakm When 1, ebreak instructions in Machine Mode enter Debug Mode. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   ebreaku When 1, ebreak instructions in User/Application Mode enter Debug Mode. (R/W)
  </p>
  <p block-type="Text">
   stopcount This bit is not implemented. Debugger will always read this bit as 0. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     stoptime This feature is not implemented. Debugger will always read this bit as 0. (RO)
    </li>
    <li block-type="ListItem">
     cause Explains why Debug Mode was entered. When there are multiple reasons to enter Debug Mode in a single cycle, the cause with the highest priority number is the one written.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1. An ebreak instruction was executed. (priority 3)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2. The Trigger Module caused a halt. (priority 4)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       3. haltreq was set. (priority 2)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       4. The CPU core single stepped because step was set. (priority 1)
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Other values are reserved for future use. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     step When set and not in Debug Mode, the core will only execute a single instruction and then enter Debug Mode. Interrupts are enabled* when this bit is set. If the instruction does not complete due to an exception, the core will immediately enter Debug Mode before executing the trap handler, with appropriate exception registers set. (R/W)
    </li>
    <li block-type="ListItem">
     prv Contains the privilege level the core was operating in when Debug Mode was entered. A debugger can change this value to change the core's privilege level when exiting Debug Mode. Only 0x3 (machine mode) and 0x0(user mode) are supported.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   *Note: Different from RISC-V Debug specification 0.13
  </p>
  <h4>
   Register 1.19. dpc (0x7B1)
  </h4>
  <p>
   <span id="page-48-1">
   </span>
   <img src="_page_48_Figure_18.jpeg"/>
  </p>
  <p block-type="Text">
   dpc Upon entry to debug mode, dpc is written with the virtual address of the instruction that encountered the exception. When resuming, the CPU core's PC is updated to the virtual address stored in dpc. A debugger may write dpc to change where the CPU resumes. (R/W)
  </p>
  <h4>
   Register 1.20. dscratch0 (0x7B2)
  </h4>
  <p>
   <span id="page-49-0">
   </span>
   <img src="_page_49_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   dscratch0 Used by Debug Module internally. (R/W)
  </p>
  <p>
   <img src="_page_49_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-49-1">
   </span>
   <img src="_page_49_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   dscratch1 Used by Debug Module internally. (R/W)
  </p>
  <h1>
   1.7 Hardware Trigger
  </h1>
  <h1>
   <span id="page-50-0">
   </span>
   1.7.1 Features
  </h1>
  <p block-type="Text">
   <span id="page-50-1">
   </span>
   Hardware Trigger module provides breakpoint and watchpoint capability for debugging. It includes the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     8 independent trigger units
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     each unit can be configured for matching the address of program counter or load-store accesses
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     can preempt execution by causing breakpoint exception
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     can halt execution and transfer control to debugger
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     support NAPOT (naturally aligned power of two) address encoding
    </li>
   </ul>
  </p>
  <h1>
   1.7.2 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-50-2">
   </span>
   The Hardware Trigger module provides four CSRs, which are listed under register summary section. Among these, tdata1 and tdata2 are abstract CSRs, which means they are shadow registers for accessing internal registers for each of the eight trigger units, one at a time.
  </p>
  <p block-type="Text">
   To choose a particular trigger unit write the index (0-7) of that unit into tselect
   <a href="#page-51-1">
    CSR. When t
   </a>
   select is written with a
   <a href="#page-52-2">
    valid in
   </a>
   dex,
   <a href="#page-53-1">
    the ab
   </a>
   stract CSRs tdata1 and tdata2 are automatically mapped to reflect internal registers of that trigger unit. Each trigger unit has two internal registers, namely mcontrol and maddress, which are mapped to tdata1 and tdata2, respectively.
  </p>
  <p block-type="Text">
   Writing larger than allowed indexes to tselect will clip the written value to the largest valid index, which can be read back. This property may be used for enumerating the number
   <a href="#page-54-0">
    of availab
   </a>
   le tri
   <a href="#page-55-0">
    ggers durin
   </a>
   g initialization or when using a debugger.
  </p>
  <p block-type="Text">
   Since software or debugger may need to know the type of the selected trigger to correctly interpret tdata1 and tdata2, the 4 bits (31-28) of tdata1 encodes the type of the selected trigger. This type field is read-only and always provides a value of 0x2 for every trigger, which stands for match type trigger, hence, it is inferred that tdata1 and tdata2 are to be interpreted as mcontrol and maddress. The information regarding other possible values can be found in the RISC-V Debug Specification v0.13, but this trigger module only supports type 0x2.
  </p>
  <p block-type="Text">
   Once a trigger unit has been chosen by writing its index to tselect, it will become possible to configure it by setting the appropriate bits in mcontrol CSR (tdata1) and writing the target address to maddress CSR (tdata2).
  </p>
  <p block-type="Text">
   Each trigger unit can be configured to either cause breakpoint exception or enter debug mode, by writing to the action bit of mcontrol. This bit can only be written from debugger, thus by default a trigger, if enabled, will cause breakpoint exception.
  </p>
  <p block-type="Text">
   mcontrol for each trigger unit has a hit bit which may be read, after CPU halts or enters exception, to find out if this was the trigger unit that fired. This bit is set as soon as the corresponding trigger fires, but it has to be manually cleared before resuming operation. Although, failing to clear it doesn't affect normal execution in any way.
  </p>
  <p block-type="Text">
   Each trigger unit only supports match on address, although this address could either be that of a load/store access or the virtual address of an instruction. The address and size of a region are specified by writing to maddress (tdata2) CSR for the selected trigger unit. Larger than 1 byte region sizes are specified through NAPOT (naturally aligned power of two) encoding (see Table 1.7-1) and enabled by setting match bit in mcontrol. Note that for NAPOT encoded addresses, by definition, the start address is constrained to be aligned to (i.e. an integer multiple of) the region size.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 1.7-1. NAPOT encoding for maddress
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      maddress(31-0)
     </td>
     <td>
      Start Address
     </td>
     <td>
      Size (bytes)
     </td>
    </tr>
    <tr>
     <td>
      aaaaaaaaaaaa0
     </td>
     <td>
      aaaaaaaaaaaa0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      aaaaaaaaaaa01
     </td>
     <td>
      aaaaaaaaaaa00
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      aaaaaaaaaa011
     </td>
     <td>
      aaaaaaaaaa000
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      aaaaaaaaa0111
     </td>
     <td>
      aaaaaaaaa0000
     </td>
     <td>
      16
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 1.7-1. NAPOT encodin
   <a href="#page-51-2">
    g fo
   </a>
   r maddress
  </h4>
  <p block-type="Text">
   <span id="page-51-2">
   </span>
   tcontrol CSR is common to all trigger units. It is used for preventing triggers from causing repeated exceptions in machine-mode while execution is happening inside a trap handler. This also disables breakpoint exceptions inside ISRs by default, although, it is possible to manually enable this right before entering an ISR, for
   <a href="#page-53-0">
    debugg
   </a>
   ing purposes. This CSR is not relevant if a trigger is configured to enter debug mode.
  </p>
  <h1>
   1.7.3 Trigger Execution Flow
  </h1>
  <p block-type="Text">
   <span id="page-51-0">
   </span>
   When hart is halted and enters debug mode due to the firing of a trigger (action = 1):
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     dpc is set to current PC (in decode stage)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     cause field in dcsr is set to 2, which means halt due to trigger
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-48-1">
      hit
     </a>
     bit is set to 1, corresponding to the trigger(s) which fired
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When hart goes int
   <a href="#page-48-0">
    o trap
   </a>
   due to the firing of a trigger (action = 0) :
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-54-0">
      me
     </a>
     pc is set to current PC (in decode stage)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     mcause is set to 3, which means breakpoint exc
     <a href="#page-54-0">
      eption
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-36-2">
      mpte
     </a>
     is set to the value in mte right before trap
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-37-0">
      mte
     </a>
     is set to 0
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-53-0">
      hit
     </a>
     bit is set to 1, correspo
     <a href="#page-53-0">
      nding
     </a>
     to the trigger(s) which fired
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    Note
    <a href="#page-53-0">
     : If t
    </a>
    wo different triggers fire at the same time, one with action = 0 and another with action = 1, then hart is halted and enters debug mode.
   </i>
  </p>
  <h1>
   1.7.4 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-51-1">
   </span>
   Below is a list of Trigger Module CSRs supported by the CPU. These are only accessible from machine-mode.
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <p block-type="Text">
   Espressif Systems 52
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 1 ESP-RISC-V CPU
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      tselect
     </td>
     <td>
      Trigger Select Register
     </td>
     <td>
      0x7A0
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   1.
   <a href="#page-53-0">
    7.5
   </a>
   Register Description
  </h1>
  <h4>
   Register 1.22. tselect (0x7A0)
  </h4>
  <p>
   <span id="page-52-1">
   </span>
   <span id="page-52-0">
   </span>
   <img src="_page_52_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   tselect Index (0-7) of the selected trigger unit. (R/W)
  </p>
  <h4>
   Register 1.23. tdata1 (0x7A1)
  </h4>
  <p>
   <span id="page-52-2">
   </span>
   <img src="_page_52_Figure_6.jpeg"/>
  </p>
  <h4>
   type Type of trigger. (RO)
  </h4>
  <p block-type="Text">
   This field is reserved since only match type (0x2) triggers are supported.
  </p>
  <p block-type="Text">
   dmode This is set to 1 if a trigger is being used by the debugger. (R/W *)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: Both Debug and M-mode can write the tdata1 and tdata2 registers at the selected tselect.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: Only Debug Mode can write the tdata1 and tdata2 registers at the selected tselect. Writes from other modes are ignored.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    * Note : Only writable from debug mode.
   </i>
  </p>
  <h4>
   data Abstract tdata1 content. (R/W)
  </h4>
  <p block-type="Text">
   This will always be interpreted as fields of mcontrol since only match type (0x2) triggers are supported.
  </p>
  <h4>
   Register 1.24. tdata2 (0x7A2)
  </h4>
  <p>
   <span id="page-53-1">
   </span>
   <img src="_page_53_Figure_1.jpeg"/>
  </p>
  <h4>
   tdata2 Abstract tdata2 content. (R/W)
  </h4>
  <p block-type="Text">
   This will always be interpreted as maddress since only match type (0x2) triggers are supported.
  </p>
  <h4>
   Re
   <a href="#page-55-0">
    gister 1.25.
   </a>
   tcontrol (0x7A5)
  </h4>
  <p>
   <span id="page-53-0">
   </span>
   <img src="_page_53_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   mpte Machine mode previous trigger enable bit. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When CPU is taking a machine mode trap, the value of mte is automatically pushed into this.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When CPU is executing MRET, its value is popped back into mte, so this becomes 0.
    </li>
   </ul>
  </p>
  <h4>
   mte Machine mode trigger enable bit. (R/W)
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When CPU is taking a machine mode trap, its value is auto
     <a href="#page-53-0">
      matic
     </a>
     ally pushed into mpte, so this becomes 0 and triggers with action=0 are disabled globally.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When CPU is executing MRET, the value of mpte is automatically popped back into this.
    </li>
   </ul>
  </p>
  <h4>
   Register 1.26. mcontrol (0x7A1)
  </h4>
  <p>
   <span id="page-54-0">
   </span>
   <img src="_page_54_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   dmode Same as dmode in tdata1.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     hit This is found to be 1 if the selected trigger had fired previously. (R/W) This bit is to
     <a href="#page-52-2">
      be cleare
     </a>
     d
     <a href="#page-52-2">
      manua
     </a>
     lly.
    </li>
    <li block-type="ListItem">
     action Write this for configuring the selected trigger to perform one of the available actions when firing. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Valid options are:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x0: cause breakpoint exception.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x1: enter debug mode (only valid when dmode = 1)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    Note : Writing an invalid value will set this to the default value 0x0.
   </i>
  </p>
  <p block-type="Text">
   match Write this for configuring the selected trigger to perform one of the available matching operations on a data/instruction address. (R/W) Valid options are:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x0: exact byte match, i.e. address corresponding to one of the bytes in an access must match the value of maddress exactly.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x1: NAPOT match, i.e. at least one of the bytes of an access must lie in the NAPOT region specified in maddress.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    Note : Writing a larger v
    <a href="#page-55-0">
     alue will cli
    </a>
    p it to the largest possible value 0x1.
   </i>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     m Set this for enabl
     <a href="#page-55-0">
      ing selecte
     </a>
     d trigger to operate in machine mode. (R/W)
    </li>
    <li block-type="ListItem">
     u Set this for enabling selected trigger to operate in user mode. (R/W)
    </li>
    <li block-type="ListItem">
     execute Set this for configuring the selected trigger to fire right before an instruction with matching virtual address is executed by the CPU. (R/W)
    </li>
    <li block-type="ListItem">
     store Set this for configuring the selected trigger to fire right before a store operation with matching data address is executed by the CPU. (R/W)
    </li>
    <li block-type="ListItem">
     load Set this for configuring the selected trigger to fire right before a load operation with matching data address is executed by the CPU. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 1.27. maddress (0x7A2)
  </h4>
  <p>
   <span id="page-55-0">
   </span>
   <img src="_page_55_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   maddress Address used by the selected trigger when performing match operation. (R/W) This is decoded as NAPOT when match=1 in mcontrol.
  </p>
  <h1>
   1.8 Memory Protection
  </h1>
  <h1>
   <span id="page-56-0">
   </span>
   1.8.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-56-1">
   </span>
   The CPU core includes a physical memory protection unit, which can be used by software to set memory access privileges (read, write and execute permissions) for required memory regions. However it is not fully compliant to the Physical Memory Protection (PMP) description specified in RISC-V Instruction Set Manual, Volume II: Privileged Architecture, Version 1.10. Details of existing non-conformance are provided in next section.
  </p>
  <p block-type="Text">
   For detailed understanding of the RISC-V PMP concept, please refer to RISC-V Instruction Set Manual, Volume II: Privileged Architecture, Version 1.10.
  </p>
  <h1>
   1.8.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-56-2">
   </span>
   The PMP unit can be used to restrict access to physical memory. It supports 16 regions and a minimum granularity of 4 bytes. Below are the current non-conformance with PMP description from RISC-V Privilege specifications:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Static priority i.e. overlapping regions are not supported
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Maximum supported NAPOT range is 1 GB
    </li>
   </ul>
  </p>
  <p block-type="Text">
   As per RISC-V Privilege specifications, PMP entries should be statically prioritized and the lowest-numbered PMP entry that matches any address byte of an access will determine whether that access succeeds or fails. This means, when any address matches more than one PMP entry i.e. overlapping regions among different PMP entries, lowest number PMP entry will decide whether such address access will succeed or fail.
  </p>
  <p block-type="Text">
   However, RISC-V CPU PMP unit in ESP32-C3 does not implement static priority. So, software should make sure that all enabled PMP entries are programmed with unique regions i.e. without any region overlap among them. If software still tries to program multiple PMP entries with overlapping region having contradicting permissions, then access will succeed if it matches at least one of enabled PMP entries. An exception will be generated, if access matches none of the enabled PMP entries.
  </p>
  <h1>
   1.8.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-56-3">
   </span>
   Software can program the PMP unit's configuration and address registers in order to contain faults and support secure execution. PMP CSR's can only be programmed in machine-mode. Once enabled, write, read and execute permission checks are applied to all the accesses in user-mode as per programmed values of enabled 16 pmpcfgX and pmpaddrX registers (refer Register Summary).
  </p>
  <p block-type="Text">
   By default, PMP grants permission to all accesses in machine-mode and revokes permission of all access in user-mode. This implies that it is mandatory to program address range and valid permissions in pmpcfg and pmpaddr registers (refer Register Summary) for any
   <a href="#page-58-0">
    valid access to pa
   </a>
   ss through in user-mode. However, it is not required for machine-mode as PMP permits all accesses to go through by deafult. In cases where PMP checks are also required in machine-mode, software can set the lock bit of required PMP entry to enable permission checks on it.
   <a href="#page-58-0">
    Once lock bit is se
   </a>
   t, it can only be cleared through CPU reset.
  </p>
  <p block-type="Text" class="has-continuation">
   When any instruction is being fetched from memory region without execute permissions, exception is generated at processor level and exception cause is set as instruction access fault in mcause CSR. Similarly,
  </p>
  <p block-type="Text">
   any load/store access without valid read/write permissions, will result in exception generation with mcause updated as load access and store access fault respectively. In case of load/store access faults, violating address is captured in mtval CSR.
  </p>
  <h1>
   1.8.4 Register Summary
  </h1>
  <p block-type="Text">
   Below is a list of PMP CSRs supported by the CPU. These are only accessible from machine-mode.
  </p>
  <p block-type="Text">
   <span id="page-58-0">
   </span>
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Below is a list of PMP CSRs supported by the CPU. These are only accessible from machine-mode.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      pmpcfg0
     </td>
     <td>
      Physical memory protection configuration.
     </td>
     <td>
      0x3A0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpcfg1
      <br/>
      pmpcfg2
     </td>
     <td>
      Physical memory protection configuration.
      <br/>
      Physical memory protection configuration.
     </td>
     <td>
      0x3A1
      <br/>
      0x3A2
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpcfg3
     </td>
     <td>
      Physical memory protection configuration.
     </td>
     <td>
      0x3A3
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr0
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr1
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B1
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr2
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B2
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr3
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B3
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr4
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr5
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B5
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr6
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B6
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr7
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B7
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr8
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr9
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3B9
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr10
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3BA
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr11
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3BB
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr12
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3BC
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      pmpaddr13
     </td>
     <td>
      Physical memory protection address register.
     </td>
     <td>
      0x3BD
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   1.8.5
   <a href="#page-58-1">
    Reg
   </a>
   ister Description
  </h1>
  <p block-type="Text">
   <span id="page-58-1">
   </span>
   PMP unit implements all pmpcfg0-3 and pmpaddr0-15 CSRs as defined in RISC-V Instruction Set Manual Volume II: Privileged Architecture, Version 1.10.
  </p>
  <h1>
   <span id="page-59-0">
   </span>
   GDMA Controller (GDMA)
  </h1>
  <h1>
   2.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-59-1">
   </span>
   General Direct Memory Access (GDMA) is a feature that allows peripheral-to-memory, memory-to-peripheral, and memory-to-memory data transfer at a high speed. The CPU is not involved in the GDMA transfer, and therefore it becomes more efficient with less workload.
  </p>
  <p block-type="Text">
   The GDMA controller in ESP32-C3 has six independent channels, i.e. three transmit channels and three receive channels. These six channels are shared by peripherals with GDMA feature, namely SPI2, UHCI0 (UART0/UART1), I2S, AES, SHA, and ADC. Users can assign the six channels to any of these peripherals. UART0 and UART1 use UHCI0 together.
  </p>
  <p block-type="Text">
   <span id="page-59-3">
   </span>
   The GDMA controller uses fixed-priority and round-robin channel arbitration schemes to manage peripherals' needs for bandwidth.
  </p>
  <p>
   <span id="page-59-4">
   </span>
   <img src="_page_59_Figure_6.jpeg"/>
  </p>
  <p>
   <img src="_page_59_Figure_7.jpeg"/>
  </p>
  <h1>
   2.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-59-2">
   </span>
   The GDMA controller has the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     AHB bus architecture
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Programmable length of data to be transferred in bytes
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Linked list of descriptors
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     INCR burst transfer when accessing internal RAM
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Access to an address space of 384 KB at most in internal RAM
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 60
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Three transmit channels and three receive channels
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Software-configurable selection of peripheral requesting its service
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Fixed channel priority and round-robin channel arbitration
    </li>
   </ul>
  </p>
  <h1>
   2.3 Architecture
  </h1>
  <p block-type="Text">
   In ESP32-C3, all modules that need high-speed data transfer support GDMA. The GDMA controller and CPU data bus have access to the same address space in internal RAM. Figure 2.3-1 shows the basic architecture of the GDMA engine.
  </p>
  <p>
   <span id="page-60-1">
   </span>
   <img src="_page_60_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 2.3-1. GDMA Engine Architecture
  </p>
  <p block-type="Text">
   The GDMA controller has six independent channels, i.e. three transmit channels and three receive channels. Every channel can be connected to different peripherals. In other words, channels are general-purpose, shared by peripherals.
  </p>
  <p block-type="Text">
   The GDMA engine reads data from or writes data to internal RAM via the AHB_BUS. Before this, the GDMA controller uses fixed-priority arbitration scheme for channels requesting read or write access. For available address range of Internal RAM, please see Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   Software can use the GDMA engine through linked lists. These linked lists, stored in internal RAM, consist of outlink
   <i>
    n
   </i>
   and inlink
   <i>
    n
   </i>
   , where
   <i>
    n
   </i>
   indicates the channel number (ranging from 0 to 2). The GDMA controller reads an outlink
   <i>
    n
   </i>
   (i.e. a linked list of transmit descriptors)
   <a href="#page-90-0">
    from internal RAM and
   </a>
   transmits data in corresponding RAM according to the outlink
   <i>
    n
   </i>
   , or reads an inlink
   <i>
    n
   </i>
   (i.e. a linked list of receive descriptors) and stores received data into specific address space in RAM according to the inlink
   <i>
    n
   </i>
   .
  </p>
  <h1>
   <span id="page-60-0">
   </span>
   2.4 Functional Description
  </h1>
  <h1>
   2.4.1 Linked List
  </h1>
  <p>
   <span id="page-61-0">
   </span>
   <img src="_page_61_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 2.4-1. Structure of a Linked List
  </p>
  <p block-type="Text">
   Figure 2.4-1 shows the structure of a linked list. An outlink and an inlink have the same structure. A linked list is formed by one or more descriptors, and each descriptor consists of three words. Linked lists should be in internal RAM for the GDMA engine to be able to use them. The meaning of each field is as follows:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   <a href="#page-61-0">
    Owner
   </a>
   (DW0) [31]: Specifies who is allowed to access the buffer that this descriptor points to. 1'b0: CPU can access the buffer;
  </p>
  <p block-type="Text">
   1'b1: The GDMA controller can access the buffer.
  </p>
  <p block-type="Text">
   When the GDMA controller stops using the buffer, this bit in a receive descriptor is automatically cleared by hardware, and this bit in a transmit descriptor is automatically cleared by hardware only if GDMA_OUT_AUTO_WRBACK_CH
   <i>
    n
   </i>
   is set to 1. Software can disable automatic clearing by hardware by setting GDMA_OUT_LOOP_TEST_CH
   <i>
    n
   </i>
   or GDMA_IN_LOOP_TEST_CH
   <i>
    n
   </i>
   bit. When software loads a linked list, this bit should be set to 1.
  </p>
  <p block-type="Text">
   Note:
   <a href="#page-80-0">
    GDMA_OUT is the prefix of t
   </a>
   ransmit channel registers, and GDMA_IN is the prefix of receive chann
   <a href="#page-80-0">
    el registers.
   </a>
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   suc_eof (DW0) [30]: Specifies whether the GDMA_IN_SUC_EOF_CH
   <i>
    n
   </i>
   _INT or GDMA_OUT_EOF_CH
   <i>
    n
   </i>
   _INT interrupt will be triggered when the data corresponding to this descriptor has been received or transmitted.
  </p>
  <p block-type="Text">
   1'b0: No interrupt will be triggered after the current descriptor's successful transfer;
  </p>
  <p block-type="Text">
   1'b1: An interrupt will be triggered after the current descriptor's successful transfer.
  </p>
  <p block-type="Text">
   For receive descriptors, software needs to clear this bit to 0, and hardware will set it to 1 after receiving data containing the EOF flag.
  </p>
  <p block-type="Text">
   For transmit descriptors, software needs to set this bit to 1 as needed.
  </p>
  <p block-type="Text">
   If software configures this bit to 1 in a descriptor, the GDMA will include the EOF flag in the data sent to the corresponding peripheral, indicating to the peripheral that this data segment marks the end of one transfer phase.
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Reserved (DW0) [29]: Reserved. Value of this bit does not matter.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     err_eof (DW0) [28]: Specifies whether the received data has errors. This bit is used only when UHCI0 uses GDMA to receive data. When an error is detected in the received data segment corresponding to a descriptor, this bit in the receive descriptor is set to 1 by hardware.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Reserved (DW0) [27:24]: Reserved.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Length (DW0) [23:12]: Specifies the number of valid bytes in the buffer that this descriptor points to. This field in a transmit descriptor is written by software and indicates how many bytes can be read from the buffer; this field in a receive descriptor is written by hardware automatically and indicates how many valid bytes have been stored into the buffer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Size (DW0) [11:0]: Specifies the size of the buffer that this descriptor points to.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Buffer address pointer (DW1): Address of the buffer. This field can only point to internal RAM.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Next descriptor address (DW2): Address of the next descriptor. If the current descriptor is the last one, this value is 0. This field can only point to internal RAM.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If the length of data received is smaller than the size of the buffer, the GDMA controller will not use the available space of the buffer in the next transaction.
  </p>
  <h1>
   2.4.2 Peripheral-to-Memory and Memory-to-Peripheral Data Transfer
  </h1>
  <p block-type="Text">
   <span id="page-62-0">
   </span>
   The GDMA controller can transfer data from memory to peripheral (transmit) and from peripheral to memory (receive). A transmit channel transfers data in the specified memory location to a peripheral's transmitter via an outlink
   <i>
    n
   </i>
   , whereas a receive channel transfers data received by a peripheral to the specified memory location via an inlink
   <i>
    n
   </i>
   .
  </p>
  <p block-type="Text">
   <span id="page-62-3">
   </span>
   Every transmit and receive channel can be connected to any peripheral with GDMA feature. Table 2.4-1 illustrates how to select the peripheral to be connected via registers. When a channel is connected to a peripheral, the rest channels can not be connected to that peripheral.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Table 2.4-1. Selecting Peripherals via Register Configuration
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <td>
      GDMA_PERI_IN_SEL_CHn
      <br/>
      GDMA_PERI_OUT_SEL_CHn
     </td>
     <td>
      Peripheral
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      SPI2
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      Reserved
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      UHCI0
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      I2S
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
      Reserved
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      Reserved
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      AES
     </td>
    </tr>
    <tr>
     <td>
      7
     </td>
     <td>
      SHA
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
      ADC
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 2.4-1. Selecting Peripherals via Register Configuration
  </h4>
  <h1>
   2.4.3 Memory-to-Memory Data Transfer
  </h1>
  <p block-type="Text">
   <span id="page-62-2">
   </span>
   <span id="page-62-1">
   </span>
   The GDMA controller also allows memory-to-memory data transfer. Such data transfer can be enabled by setting GDMA_MEM_TRANS_EN_CH
   <i>
    n
   </i>
   , which connects the output of transmit channel
   <i>
    n
   </i>
   to the input of receive channel
   <i>
    n
   </i>
   . Note that a transmit channel is only connected to the receive channel with the same number (
   <i>
    n
   </i>
   ).
  </p>
  <h1>
   2.4.4 Enabling GDMA
  </h1>
  <p block-type="Text">
   Software uses the GDMA controller through linked lists. When the GDMA controller receives data, software loads an inlink, configures GDMA_INLINK_ADDR_CH
   <i>
    n
   </i>
   field with address of the first receive descriptor, and sets GDMA_INLINK_START_CH
   <i>
    n
   </i>
   bit to enable GDMA. When the GDMA controller transmits data, software loads an outlink, prepares data to be transmitted, configures GDMA_OUTLINK_ADDR_CH
   <i>
    n
   </i>
   field with address of the first transmit descriptor, and sets
   <a href="#page-79-0">
    GDMA_OUTLINK_START_
   </a>
   CH
   <i>
    n
   </i>
   bit to enable GDMA. GDMA_INLINK_START_CH
   <i>
    n
   </i>
   bit and
   <a href="#page-79-0">
    GDMA_OUTLINK_STAR
   </a>
   T_CH
   <i>
    n
   </i>
   bit are cleared automatically by hardware.
  </p>
  <p block-type="Text">
   In some cases, you may want to append more des
   <a href="#page-81-0">
    criptors to a DMA transfer that
   </a>
   is already started. Naively, it would seem to be possible
   <a href="#page-81-0">
   </a>
   t
   <a href="#page-81-0">
    o do this by clearing the EOF b
   </a>
   it of the final descri
   <a href="#page-79-0">
    ptor in the existing list and
   </a>
   setti
   <a href="#page-81-0">
    ng its next descriptor address
   </a>
   pointer field (DW2) to the first descriptor of the to-be-added list. However, this strategy fails if the existing DMA transfer is almost or entirely finished. Instead, the GDMA engine has specialized logic to make sure a DMA transfer can be continued or restarted: if it is still ongoing, it will make sure to take the appended descriptors into account; if the transfer has already finished, it will restart with the new descriptors. This is implemented in the Restart function.
  </p>
  <p block-type="Text">
   When using the Restart function, software needs to rewrite address of the first descriptor in the new list to DW2 of the last descriptor in the loaded list, and set GDMA_INLINK_RESTART_CH
   <i>
    n
   </i>
   bit or
  </p>
  <p block-type="Text">
   GDMA_OUTLINK_RESTART_CH
   <i>
    n
   </i>
   bit (these two bits are cleared automatically by hardware). As shown in Figure 2.4-2, by doing so hardware can obtain the address of the first descriptor in the new list when reading the last descriptor in the loaded list, and then read the new
   <a href="#page-79-0">
   </a>
   l
   <a href="#page-79-0">
    ist.
   </a>
  </p>
  <p>
   <span id="page-63-1">
   </span>
   <img src="_page_63_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 2.4-2. Relationship among Linked Lists
  </p>
  <h1>
   2.4.5 Linked List Reading Process
  </h1>
  <p block-type="Text">
   <span id="page-63-0">
   </span>
   Once configured and enabled by software, the GDMA controller starts to read the linked list from internal RAM. The GDMA performs checks on descriptors in the linked list. Only if descriptors pass the checks, will the corresponding GDMA channel transfer data. If the descriptors fail any of the checks, hardware will trigger descriptor error interrupt (either GDMA_IN_DSCR_ERR_CH
   <i>
    n
   </i>
   _INT or GDMA_OUT_DSCR_ERR_CH
   <i>
    n
   </i>
   _INT), and the channel will halt.
  </p>
  <p block-type="Text">
   The checks performed on descriptors are:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Owner bit check when GDMA_IN_CHECK_OWNER_CH
   <i>
    n
   </i>
   or GDMA_OUT_CHECK_OWNER_CH
   <i>
    n
   </i>
   is set to 1.
  </p>
  <p block-type="Text">
   Espressif Systems 64
  </p>
  <p block-type="Text">
   If the owner bit is 0, the buffer is accessed by the CPU. In this case, the owner bit fails the check. The owner bit will not be checked if GDMA_IN_CHECK_OWNER_CH
   <i>
    n
   </i>
   or GDMA_OUT_CHECK_OWNER_CH
   <i>
    n
   </i>
   is 0;
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Buffer address pointer (DW1) check. If the buffer address pointer points to 0x3FC80000 ~ 0x3FCDFFFF (please refer to Section 2.4.7),
   <a href="#page-78-0">
   </a>
   i
   <a href="#page-78-0">
    t passes the check.
   </a>
  </p>
  <p block-type="Text">
   After software detects a descriptor error interrupt, it must reset the corresponding channel, and enable GDMA by setting GDMA_OUTLINK_START_CH
   <i>
    n
   </i>
   or GDMA_INLINK_START_CH
   <i>
    n
   </i>
   bit.
  </p>
  <p block-type="Text">
   Note: The third word (DW2) i
   <a href="#page-64-1">
    n a de
   </a>
   scriptor can only point to a location in internal RAM, given that the third word points to the next descriptor to use and that all descriptors must be in internal memory.
  </p>
  <h1>
   2.4.6 EOF
  </h1>
  <p block-type="Text">
   <span id="page-64-0">
   </span>
   The GDMA controller uses EOF (end of frame) flags to indicate the end of data segment transfer corresponding to a specific descriptor.
  </p>
  <p block-type="Text">
   Before the GDMA controller transmits data, GDMA_OUT_TOTAL_EOF_CH
   <i>
    n
   </i>
   _INT_ENA bit should be set to enable GDMA_OUT_TOTAL_EOF_CH
   <i>
    n
   </i>
   _INT interrupt. If data in the buffer pointed by the last descriptor (with EOF) has been transmitted, a GDMA_OUT_TOTAL_EOF_CH
   <i>
    n
   </i>
   _INT interrupt is generated.
  </p>
  <p block-type="Text">
   Before the GDMA controller receives data,
   <a href="#page-75-0">
    GDMA_IN_SUC_EOF_CH
   </a>
   <i>
    n
   </i>
   _INT_ENA bit should be set to enable GDMA_IN_SUC_EOF_CH
   <i>
    n
   </i>
   _INT interrupt. If a data segment with an EOF flag has been received successfully, a GDMA_IN_SUC_EOF_CH
   <i>
    n
   </i>
   _INT interrupt is generated. In addition, when GDMA channel is connected to UHCI0, the GDMA controller also supports
   <a href="#page-75-0">
    GDMA_IN_ERR_CH
   </a>
   <i>
    n
   </i>
   _EOF_INT interrupt. This interrupt is enabled by setting GDMA_IN_ERR_EOF_CH
   <i>
    n
   </i>
   _INT_ENA bit, and it indicates that a data segment corresponding to a descriptor has been received with errors.
  </p>
  <p block-type="Text">
   When detecting a GDMA_OUT_TOTAL_EOF_CH
   <i>
    n
   </i>
   _INT or a GDMA_IN_SUC_EOF_CH
   <i>
    n
   </i>
   _INT interrupt, software can record the value of
   <a href="#page-75-0">
    GDMA_OUT_EOF_DES_
   </a>
   ADDR_CH
   <i>
    n
   </i>
   or GDMA_IN_SUC_EOF_DES_ADDR_CH
   <i>
    n
   </i>
   field, i.e. address of the last descriptor. Therefore, software can tell which descriptors have been used and reclaim them.
  </p>
  <p block-type="Text">
   Note: In this chapter, E
   <a href="#page-86-0">
    OF of transmit descriptors refers to s
   </a>
   uc
   <a href="#page-83-0">
    _eof, while EOF of receive descriptors r
   </a>
   efers to both suc_eof and err_eof.
  </p>
  <h1>
   2.4.7 Accessing Internal RAM
  </h1>
  <p block-type="Text">
   <span id="page-64-1">
   </span>
   Any transmit and receive channels of GDMA can access 0x3FC80000 ~ 0x3FCDFFFF in internal RAM. To improve data transfer efficiency, GDMA can send data in burst mode, which is disabled by default. This mode is enabled for receive channels by setting GDMA_IN_DATA_BURST_EN_CH
   <i>
    n
   </i>
   , and enabled for transmit channels by setting GDMA_OUT_DATA_BURST_EN_CH
   <i>
    n
   </i>
   .
  </p>
  <span id="page-64-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Inlink/Outlink
      <br/>
      Inlink
     </td>
     <td>
      Burst Mode
     </td>
     <td>
      Size
     </td>
     <td>
      Length
     </td>
     <td>
      Buffer Address Pointer
     </td>
    </tr>
    <tr>
     <td>
      0
      <br/>
      1
     </td>
     <td>
      —
      <br/>
      Word-aligned
     </td>
     <td>
      —
      <br/>
      —
     </td>
     <td>
      —
      <br/>
      Word-aligned
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Outlink
     </td>
     <td>
      0
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
   </tbody>
  </table>
  <p>
  </p>
  <p block-type="Text">
   Table 2.4-2 lists the requirements for descriptor field alignment when accessing internal RAM.
  </p>
  <p block-type="Text">
   When burst mode is disabled, size, length, and buffer address pointer in both transmit and receive descriptors do not need to be word-aligned. That is to say, GDMA can read data of specified length (1 ~ 4095 bytes) from any s
   <a href="#page-64-2">
    tart ad
   </a>
   dresses in the accessible address range, or write received data of the specified length (1 ~ 4095 bytes) to any contiguous addresses in the accessible address range.
  </p>
  <p block-type="Text">
   When burst mode is enabled, size, length, and buffer address pointer in transmit descriptors are also not necessarily word-aligned. However, size and buffer address pointer in receive descriptors except length should be word-aligned.
  </p>
  <h1>
   2.4.8 Arbitration
  </h1>
  <p block-type="Text">
   <span id="page-65-0">
   </span>
   To ensure timely response to peripherals running at a high speed with low latency (such as SPI), the GDMA controller implements a fixed-priority channel arbitration scheme. That is to say, each channel can be assigned a priority from 0 ~ 9. The larger the number, the higher the priority, and the more timely the response. When several channels are assigned the same priority, the GDMA controller adopts a round-robin arbitration scheme.
  </p>
  <p block-type="Text">
   Please note that the overall throughput of peripherals with GDMA feature cannot exceed the maximum bandwidth of the GDMA, so that requests from low-priority peripherals can be responded to.
  </p>
  <h1>
   2.5 GDMA Interrupts
  </h1>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <span id="page-65-1">
     </span>
     <i>
      •
     </i>
     DMA_INFIFO_OVF_CH
     <i>
      n
     </i>
     _INT: Triggered when the RX FIFO of GDMA overflows.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_INFIFO_UDF_CH
     <i>
      n
     </i>
     _INT: Triggered when the RX FIFO of GDMA underflows.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GMA_OUTFIFO_OVF_CH
     <i>
      n
     </i>
     _INT: Triggered when the TX FIFO of GDMA overflows.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_OUTFIFO_UDF_CH
     <i>
      n
     </i>
     _INT: Triggered when the TX FIFO of GDMA underflows.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_OUT_TOTAL_EOF_CH
     <i>
      n
     </i>
     _INT: Triggered when all data corresponding to a linked list (including multiple descriptors) has been sent via transmit channel
     <i>
      n
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_IN_DSCR_EMPTY_CH
     <i>
      n
     </i>
     _INT: Triggered when the size of the buffer pointed by receive descriptors is smaller than the length of data to be received via receive channel
     <i>
      n
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_OUT_DSCR_ERR_CH
     <i>
      n
     </i>
     _INT: Triggered when an error is detected in a transmit descriptor on transmit channel
     <i>
      n
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_IN_DSCR_ERR_CH
     <i>
      n
     </i>
     _INT: Triggered when an error is detected in a receive descriptor on receive channel
     <i>
      n
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_OUT_EOF_CH
     <i>
      n
     </i>
     _INT: Triggered when EOF in a transmit descriptor is 1 and data corresponding to this descriptor has been sent via transmit channel
     <i>
      n
     </i>
     . If GDMA_OUT_EOF_MODE_CH
     <i>
      n
     </i>
     is 0, this interrupt will be triggered when the last byte of data corresponding to this descriptor enters GDMA's transmit channel; if GDMA_OUT_EOF_MODE_CH
     <i>
      n
     </i>
     is 1, this interrupt is triggered when the last byte of data is taken from GDMA's transmit channel.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_OUT_DONE_CH
     <i>
      n
     </i>
     _INT: Triggered when all data corresponding to a transmit descriptor has been sent via transmit channel
     <i>
      n
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_IN_ERR_EOF_CH
     <i>
      n
     </i>
     _INT: Triggered when an error is detected in the data segment corresponding to a descriptor received via receive channel
     <i>
      n
     </i>
     . This interrupt is used only for UHCI0 peripheral (UART0 or UART1).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT: Triggered when the suc_eof bit in a receive descriptor is 1 and the data corresponding to this receive descriptor has been received via receive channel
     <i>
      n
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA_IN_DONE_CH
     <i>
      n
     </i>
     _INT: Triggered when all data corresponding to a receive descriptor has been received via receive channel
     <i>
      n
     </i>
     .
    </li>
   </ul>
  </p>
  <h1>
   2.6 Programming Procedures
  </h1>
  <h1>
   <span id="page-66-0">
   </span>
   2.6.1 Programming Procedure for GDMA Clock and Reset
  </h1>
  <p block-type="Text">
   <span id="page-66-1">
   </span>
   GDMA's clock and reset should be configured as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Set SYSTEM_DMA_CLK_EN to enable GDMA's clock;
    </li>
    <li block-type="ListItem">
     2. Clear SYSTEM_DMA_RST to reset GDMA.
    </li>
   </ul>
  </p>
  <h1>
   2.6.2
   <a href="#page-435-0">
    Programming Pr
   </a>
   ocedures for GDMA's Transmit Channel
  </h1>
  <p block-type="Text">
   <span id="page-66-2">
   </span>
   To transmit
   <a href="#page-437-0">
    data, GDMA's transm
   </a>
   it channel should be configured by software as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Set GDMA_OUT_RST_CH
     <i>
      n
     </i>
     first to 1 and then to 0, to reset the state machine of GDMA's transmit channel and FIFO pointer;
    </li>
    <li block-type="ListItem">
     2. Load an outlink, and configure GDMA_OUTLINK_ADDR_CH
     <i>
      n
     </i>
     with address of the first transmit descriptor;
    </li>
    <li block-type="ListItem">
     3. Configure
     <a href="#page-80-0">
      GDMA_PERI_OU
     </a>
     T_SEL_CH
     <i>
      n
     </i>
     with the value corresponding to the peripheral to be connected, as shown in Table 2.4-1;
    </li>
    <li block-type="ListItem">
     4. Set GDMA_OUTLINK_START_CH
     <i>
      n
     </i>
     <a href="#page-81-0">
      to enable GDMA's transmit
     </a>
     channel for data transfer;
    </li>
    <li block-type="ListItem">
     5. Configure
     <a href="#page-88-1">
      and ena
     </a>
     <a href="#page-62-3">
      ble t
     </a>
     <a href="#page-88-1">
      he correspondin
     </a>
     g peripheral (SPI2, UHCI0 (UART0 or UART1), I2S, AES, SHA, and ADC). See details in individual chapters of these peripherals;
    </li>
    <li block-type="ListItem">
     6. Wai
     <a href="#page-81-0">
      t for GDMA_OUT_TOTAL_EOF_
     </a>
     CH
     <i>
      n
     </i>
     _INT interrupt, which indicates the completion of data transfer.
    </li>
   </ul>
  </p>
  <h1>
   2.6.3 Programming Procedures for GDMA's Receive Channel
  </h1>
  <p block-type="Text">
   <span id="page-66-3">
   </span>
   To receive data, GDMA's receive channel should be configured by software as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Set GDMA_IN_RST_CH
     <i>
      n
     </i>
     first to 1 and then to 0, to reset the state machine of GDMA's receive channel and FIFO pointer;
    </li>
    <li block-type="ListItem">
     2. Load an inlink, and configure GDMA_INLINK_ADDR_CH
     <i>
      n
     </i>
     with address of the first receive descriptor;
    </li>
    <li block-type="ListItem">
     3. Configure
     <a href="#page-78-1">
      GDMA_PERI_I
     </a>
     N_SEL_CH
     <i>
      n
     </i>
     with the value corresponding to the peripheral to be connected, as shown in Table 2.4-1;
    </li>
    <li block-type="ListItem">
     4. Set GDMA_INLINK_START_CH
     <i>
      n
     </i>
     <a href="#page-79-0">
      to enable GDMA's receive
     </a>
     channel for data transfer;
    </li>
   </ul>
  </p>
  <p block-type="Text">
   5. Configure and enable the corresponding peripheral (SPI2, UHCI0 (UART0 or UART1), I2S, AES, SHA, and ADC). See details in individual chapters of these peripherals;
  </p>
  <h1>
   2.6.4 Programming Procedures for Memory-to-Memory Transfer
  </h1>
  <p block-type="Text">
   <span id="page-67-0">
   </span>
   To transfer data from one memory location to another, GDMA should be configured by software as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Set GDMA_OUT_RST_CH
     <i>
      n
     </i>
     first to 1 and then to 0, to reset the state machine of GDMA's transmit channel and FIFO pointer;
    </li>
    <li block-type="ListItem">
     2. Set GDMA_IN_RST_CH
     <i>
      n
     </i>
     first to 1 and then to 0, to reset the state machine of GDMA's receive channel and
     <a href="#page-80-0">
      FIFO pointer;
     </a>
    </li>
    <li block-type="ListItem">
     3. Load an outlink, and configure GDMA_OUTLINK_ADDR_CH
     <i>
      n
     </i>
     with address of the first transmit descriptor;
    </li>
    <li block-type="ListItem">
     4. Loa
     <a href="#page-78-1">
      d an inlink, and confi
     </a>
     gure GDMA_INLINK_ADDR_CH
     <i>
      n
     </i>
     with address of the first receive descriptor;
    </li>
    <li block-type="ListItem">
     5. Set GDMA_MEM_TRANS_EN_CH
     <i>
      n
     </i>
     <a href="#page-81-0">
      to enable memory-to-mem
     </a>
     ory transfer;
    </li>
    <li block-type="ListItem">
     6. Set GDMA_OUTLINK_START_CH
     <i>
      n
     </i>
     <a href="#page-79-0">
      to enable GDMA's trans
     </a>
     mit channel for data transfer;
    </li>
    <li block-type="ListItem">
     7. Set
     <a href="#page-78-1">
      GDMA_INLINK_START_CH
     </a>
     <i>
      n
     </i>
     to enable GDMA's receive channel for data transfer;
    </li>
    <li block-type="ListItem">
     8. If th
     <a href="#page-81-0">
      e suc_eof bit is set in a transm
     </a>
     it descriptor, a GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT interrupt will be triggered when the data segment corresponding to this descriptor has been transmitted.
    </li>
   </ul>
  </p>
  <h1>
   2.7 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-68-0">
   </span>
   The addresses in this section are relative to GDMA base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Registers
      <br/>
      GDMA_INT_RAW_CH0_REG
     </td>
     <td>
      Raw status interrupt of RX channel 0
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/WTC/SS
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_ST_CH0_REG
     </td>
     <td>
      Masked interrupt of RX channel 0
     </td>
     <td>
      0x0004
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_ENA_CH0_REG
     </td>
     <td>
      Interrupt enable bits of RX channel 0
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_CLR_CH0_REG
     </td>
     <td>
      Interrupt clear bits of RX channel 0
     </td>
     <td>
      0x000C
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_RAW_CH1_REG
     </td>
     <td>
      Raw status interrupt of RX channel 1
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/WTC/SS
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_ST_CH1_REG
     </td>
     <td>
      Masked interrupt of RX channel 1
     </td>
     <td>
      0x0014
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_ENA_CH1_REG
     </td>
     <td>
      Interrupt enable bits of RX channel 1
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_CLR_CH1_REG
     </td>
     <td>
      Interrupt clear bits of RX channel 1
     </td>
     <td>
      0x001C
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_RAW_CH2_REG
     </td>
     <td>
      Raw status interrupt of RX channel 2
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/WTC/SS
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_ST_CH2_REG
     </td>
     <td>
      Masked interrupt of RX channel 2
     </td>
     <td>
      0x0024
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_ENA_CH2_REG
     </td>
     <td>
      Interrupt enable bits of RX channel 2
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INT_CLR_CH2_REG
     </td>
     <td>
      Interrupt clear bits of RX channel 2
     </td>
     <td>
      0x002C
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      Configuration Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_MISC_CONF_REG
     </td>
     <td>
      Miscellaneous register
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Version Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_DATE_REG
     </td>
     <td>
      Version control register
     </td>
     <td>
      0x0048
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
      <br/>
      GDMA_IN_CONF0_CH0_REG
     </td>
     <td>
      Configuration register 0 of RX channel 0
     </td>
     <td>
      0x0070
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_CONF1_CH0_REG
     </td>
     <td>
      Configuration register 1 of RX channel 0
     </td>
     <td>
      0x0074
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_POP_CH0_REG
     </td>
     <td>
      Pop control register of RX channel 0
      <br/>
      Link descriptor configuration and
     </td>
     <td>
      0x007C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_LINK_CH0_REG
     </td>
     <td>
      control register of RX channel 0
     </td>
     <td>
      0x0080
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_CONF0_CH0_REG
     </td>
     <td>
      Configuration register 0 of TX channel 0
     </td>
     <td>
      0x00D0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_CONF1_CH0_REG
     </td>
     <td>
      Configuration register 1 of TX channel 0
     </td>
     <td>
      0x00D4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_PUSH_CH0_REG
     </td>
     <td>
      Push control register of TX channel 0
     </td>
     <td>
      0x00DC
     </td>
     <td rowspan="2">
      varies
      <br/>
      varies
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_LINK_CH0_REG
     </td>
     <td>
      Link descriptor configuration and
     </td>
     <td>
      0x00E0
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      control register of TX channel 0
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_CONF0_CH1_REG
     </td>
     <td>
      Configuration register 0 of RX channel 1
     </td>
     <td>
      0x0130
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_CONF1_CH1_REG
     </td>
     <td>
      Configuration register 1 of RX channel 1
     </td>
     <td>
      0x0134
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_POP_CH1_REG
      <br/>
      GDMA_IN_LINK_CH1_REG
     </td>
     <td>
      Pop control register of RX channel 1
      <br/>
      Link descriptor configuration and
     </td>
     <td>
      0x013C
      <br/>
      0x0140
     </td>
     <td>
      varies
      <br/>
      varies
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      control register of RX channel 1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_CONF0_CH1_REG
     </td>
     <td>
      Configuration register 0 of TX channel 1
     </td>
     <td>
      0x0190
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_CONF1_CH1_REG
     </td>
     <td>
      Configuration register 1 of TX channel 1
     </td>
     <td>
      0x0194
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 2
      <br/>
      GDMA Controller (GDMA)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td rowspan="2">
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_LINK_CH1_REG
     </td>
     <td>
      Link descriptor configuration and
     </td>
     <td>
      0x01A0
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      control register of TX channel 1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_CONF0_CH2_REG
     </td>
     <td>
      Configuration register 0 of RX channel 2
     </td>
     <td>
      0x01F0
     </td>
     <td rowspan="2">
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_CONF1_CH2_REG
     </td>
     <td>
      Configuration register 1 of RX channel 2
     </td>
     <td>
      0x01F4
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_POP_CH2_REG
     </td>
     <td>
      Pop control register of RX channel 2
     </td>
     <td>
      0x01FC
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_LINK_CH2_REG
     </td>
     <td>
      Link descriptor configuration and
     </td>
     <td>
      0x0200
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_CONF0_CH2_REG
     </td>
     <td>
      control register of RX channel 2
      <br/>
      Configuration register 0 of TX channel 2
     </td>
     <td>
      0x0250
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_CONF1_CH2_REG
     </td>
     <td>
      Configuration register 1 of TX channel 2
     </td>
     <td>
      0x0254
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_PUSH_CH2_REG
     </td>
     <td>
      Push control register of TX channel 2
     </td>
     <td>
      0x025C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Link descriptor configuration and
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_LINK_CH2_REG
     </td>
     <td>
      control register of TX channel 2
     </td>
     <td>
      0x0260
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      Status Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INFIFO_STATUS_CH0_REG
     </td>
     <td>
      RX FIFO status of RX channel 0
     </td>
     <td>
      0x0078
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_STATE_CH0_REG
     </td>
     <td>
      Receive status of RX channel 0
     </td>
     <td>
      0x0084
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_SUC_EOF_DES_ADDR_CH0
     </td>
     <td>
      Inlink descriptor address when EOF
     </td>
     <td>
      0x0088
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      _REG
     </td>
     <td>
      occurs of RX channel 0
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_ERR_EOF_DES_ADDR_CH0
     </td>
     <td>
      Inlink descriptor address when errors
     </td>
     <td rowspan="2">
      0x008C
     </td>
     <td rowspan="3">
      RO
     </td>
    </tr>
    <tr>
     <td>
      _REG
     </td>
     <td>
      occur of RX channel 0
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Address of the next receive descriptor
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_CH0_REG
     </td>
     <td>
      pointed by the current pre-read receive
     </td>
     <td>
      0x0090
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      descriptor on RX channel 0
      <br/>
      Address of the current pre-read receive
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_BF0_CH0_REG
     </td>
     <td>
      descriptor on RX channel 0
     </td>
     <td>
      0x0094
     </td>
     <td rowspan="2">
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Address of the previous pre-read
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_BF1_CH0_REG
     </td>
     <td>
      receive descriptor on RX channel 0
     </td>
     <td>
      0x0098
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUTFIFO_STATUS_CH0_REG
     </td>
     <td>
      TX FIFO status of TX channel 0
     </td>
     <td>
      0x00D8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_STATE_CH0_REG
     </td>
     <td>
      Transmit status of TX channel 0
     </td>
     <td>
      0x00E4
     </td>
     <td rowspan="2">
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_EOF_DES_ADDR_CH0_REG
     </td>
     <td>
      Outlink descriptor address when EOF
     </td>
     <td>
      0x00E8
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      occurs of TX channel 0
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_EOF_BFR_DES_ADDR_CH0
     </td>
     <td>
      The last outlink descriptor address
     </td>
     <td>
      0x00EC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      _REG
      <br/>
      GDMA_OUT_DSCR_CH0_REG
     </td>
     <td>
      when EOF occurs of TX channel 0
     </td>
     <td>
     </td>
     <td rowspan="3">
      RO
     </td>
    </tr>
    <tr>
     <td>
      Address of the next transmit descriptor
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      pointed by the current pre-read
     </td>
     <td>
      0x00F0
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      GDMA_OUT_DSCR_BF0_CH0_REG
     </td>
     <td>
      transmit descriptor on TX channel 0
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Address of the current pre-read
      <br/>
      transmit descriptor on TX channel 0
     </td>
     <td>
      0x00F4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Address of the previous pre-read
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_DSCR_BF1_CH0_REG
     </td>
     <td>
      transmit descriptor on TX channel 0
     </td>
     <td>
      0x00F8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INFIFO_STATUS_CH1_REG
     </td>
     <td>
      RX FIFO status of RX channel 1
     </td>
     <td>
      0x0138
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_STATE_CH1_REG
     </td>
     <td>
      Receive status of RX channel 1
     </td>
     <td>
      0x0144
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="2">
      GDMA_IN_SUC_EOF_DES_ADDR_CH1
      <br/>
      Inlink descriptor address when EOF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      0x0148
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 2
      <br/>
      GDMA Controller (GDMA)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_ERR_EOF_DES_ADDR_CH1
     </td>
     <td>
      Inlink descriptor address when errors
     </td>
     <td>
      0x014C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      _REG
     </td>
     <td>
      occur of RX channel 1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Address of the next receive descriptor
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_CH1_REG
     </td>
     <td>
      pointed by the current pre-read receive
     </td>
     <td>
      0x0150
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      descriptor on RX channel 1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_BF0_CH1_REG
     </td>
     <td>
      Address of the current pre-read receive
     </td>
     <td>
      0x0154
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      descriptor on RX channel 1
      <br/>
      Address of the previous pre-read
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_BF1_CH1_REG
     </td>
     <td>
      receive descriptor on RX channel 1
     </td>
     <td>
      0x0158
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUTFIFO_STATUS_CH1_REG
     </td>
     <td>
      TX FIFO status of TX channel 1
     </td>
     <td>
      0x0198
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_STATE_CH1_REG
     </td>
     <td>
      Transmit status of TX channel 1
     </td>
     <td>
      0x01A4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Outlink descriptor address when EOF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_EOF_DES_ADDR_CH1_REG
     </td>
     <td>
      occurs of TX channel 1
     </td>
     <td>
      0x01A8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_EOF_BFR_DES_ADDR_CH1
     </td>
     <td>
      The last outlink descriptor address
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      _REG
     </td>
     <td>
      when EOF occurs of TX channel 1
     </td>
     <td>
      0x01AC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Address of the next transmit descriptor
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_DSCR_CH1_REG
     </td>
     <td>
      pointed by the current pre-read
     </td>
     <td>
      0x01B0
     </td>
     <td rowspan="2">
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      transmit descriptor on TX channel 1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_DSCR_BF0_CH1_REG
     </td>
     <td>
      Address of the current pre-read
     </td>
     <td rowspan="2">
      0x01B4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      transmit descriptor on TX channel 1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_DSCR_BF1_CH1_REG
     </td>
     <td>
      Address of the previous pre-read
     </td>
     <td>
      0x01B8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      transmit descriptor on TX channel 1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INFIFO_STATUS_CH2_REG
     </td>
     <td>
      RX FIFO status of RX channel 2
     </td>
     <td>
      0x01F8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_STATE_CH2_REG
     </td>
     <td>
      Receive status of RX channel 2
     </td>
     <td>
      0x0204
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_SUC_EOF_DES_ADDR_CH2
      <br/>
      _REG
     </td>
     <td>
      Inlink descriptor address when EOF
      <br/>
      occurs of RX channel 2
     </td>
     <td>
      0x0208
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_ERR_EOF_DES_ADDR_CH2
     </td>
     <td>
      Inlink descriptor address when errors
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      _REG
     </td>
     <td>
      occur of RX channel 2
     </td>
     <td>
      0x020C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Address of the next receive descriptor
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_CH2_REG
     </td>
     <td>
      pointed by the current pre-read receive
     </td>
     <td>
      0x0210
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      descriptor on RX channel 2
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Address of the current pre-read receive
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_BF0_CH2_REG
     </td>
     <td>
      descriptor on RX channel 2
     </td>
     <td>
      0x0214
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_BF1_CH2_REG
     </td>
     <td>
      Address of the previous pre-read
     </td>
     <td>
      0x0218
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      receive descriptor on RX channel 2
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUTFIFO_STATUS_CH2_REG
     </td>
     <td>
      TX FIFO status of TX channel 2
     </td>
     <td>
      0x0258
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      GDMA_OUT_STATE_CH2_REG
      <br/>
      GDMA_OUT_EOF_DES_ADDR_CH2_REG
     </td>
     <td>
      Transmit status of TX channel 2
     </td>
     <td>
      0x0264
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Outlink descriptor address when EOF
     </td>
     <td>
      0x0268
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      occurs of TX channel 2
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_EOF_BFR_DES_ADDR_CH2
     </td>
     <td>
      The last outlink descriptor address
     </td>
     <td>
      0x026C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      _REG
     </td>
     <td>
      when EOF occurs of TX channel 2
      <br/>
      Address of the next transmit descriptor
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_DSCR_CH2_REG
     </td>
     <td>
      pointed by the current pre-read
     </td>
     <td>
      0x0270
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Chapter 2
      <br/>
      GDMA Controller (GDMA)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td rowspan="2">
      Access
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_DSCR_BF0_CH2_REG
     </td>
     <td>
      Address of the current pre-read
     </td>
     <td>
      0x0274
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      transmit descriptor on TX channel 2
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_DSCR_BF1_CH2_REG
     </td>
     <td>
      Address of the previous pre-read
     </td>
     <td>
      0x0278
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      transmit descriptor on TX channel 2
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Priority Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_PRI_CH0_REG
     </td>
     <td>
      Priority register of RX channel 0
     </td>
     <td>
      0x009C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_PRI_CH0_REG
      <br/>
      GDMA_IN_PRI_CH1_REG
     </td>
     <td>
      Priority register of TX channel 0
      <br/>
      Priority register of RX channel 1
     </td>
     <td>
      0x00FC
      <br/>
      0x015C
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_PRI_CH1_REG
     </td>
     <td>
      Priority register of TX channel 1
     </td>
     <td>
      0x01BC
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="4">
      GDMA_IN_PRI_CH2_REG
      <br/>
      Priority register of RX channel 2
      <br/>
      0x021C
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_PRI_CH2_REG
     </td>
     <td>
      Priority register of TX channel 2
     </td>
     <td>
      0x027C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Peripheral Select Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_PERI_SEL_CH0_REG
     </td>
     <td>
      Peripheral selection of RX channel 0
     </td>
     <td>
      0x00A0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_PERI_SEL_CH0_REG
     </td>
     <td>
      Peripheral selection of TX channel 0
     </td>
     <td>
      0x0100
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_PERI_SEL_CH1_REG
     </td>
     <td>
      Peripheral selection of RX channel 1
     </td>
     <td>
      0x0160
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_PERI_SEL_CH1_REG
     </td>
     <td>
      Peripheral selection of TX channel 1
     </td>
     <td>
      0x01C0
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   2.8 Registers
  </h1>
  <p block-type="Text">
   <span id="page-72-0">
   </span>
   The addresses in this section are relative to GDMA base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-72-1">
   </span>
   <img src="_page_72_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   Register 2.1. GDMA_INT_RAW_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x0000+
   <a href="#page-97-0">
    16*
   </a>
   <i>
    n
   </i>
   )
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_IN_DONE_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level when the last data pointed by one receive descriptor has been received for RX channel 0. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level for RX channel 0 when the last data pointed by one receive descriptor has been received and the suc_eof bit in this descriptor is 1. For UHCI0, the raw interrupt bit turns to high level when the last data pointed by one receive descriptor has been received and no data error is detected for RX channel 0. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_IN_ERR_EOF_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level when data error is detected only in the case that the peripheral is UHCI0 for RX channel 0. For other peripherals, this raw interrupt is reserved. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_DONE_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level when the last data pointed by one transmit descriptor has been transmitted to peripherals for TX channel 0. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_EOF_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level when the last data pointed by one transmit descriptor has been read from memory for TX channel 0. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_IN_DSCR_ERR_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level when detecting receive descriptor error, including owner error, the second and third word error of receive descriptor for RX channel 0. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_DSCR_ERR_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level when detecting transmit descriptor error, including owner error, the second and third word error of transmit descriptor for TX channel 0. (R/WTC/SS)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_IN_DSCR_EMPTY_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level when RX buffer pointed by inlink is full and receiving data is not completed, but there is no more inlink for RX channel 0. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_TOTAL_EOF_CH
     <i>
      n
     </i>
     _INT_RAW The raw interrupt bit turns to high level when data corresponding a outlink (includes one descriptor or few descriptors) is transmitted out for TX channel 0. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_INFIFO_OVF_CH
     <i>
      n
     </i>
     _INT_RAW This raw interrupt bit turns to high level when level 1 FIFO of RX channel 0 is overflow. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_INFIFO_UDF_CH
     <i>
      n
     </i>
     _INT_RAW This raw interrupt bit turns to high level when level 1 FIFO of RX channel 0 is underflow. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_OUTFIFO_OVF_CH
     <i>
      n
     </i>
     _INT_RAW This raw interrupt bit turns to high level when level 1 FIFO of TX channel 0 is overflow. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     GDMA_OUTFIFO_UDF_CH
     <i>
      n
     </i>
     _INT_RAW This raw interrupt bit turns to high level when level 1 FIFO of TX channel 0 is underflow. (R/WTC/SS)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-74-0">
   </span>
   <img src="_page_74_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_IN_DONE_CH
     <i>
      n
     </i>
     _INT_ST The raw interrupt status bit for the GDMA_IN_DONE_CH_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT_ST The raw interrupt status bit for the GDMA_IN_SUC_EOF_CH_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     GDMA_IN_ERR_EOF_CH
     <i>
      n
     </i>
     _INT_ST The raw interrupt status bit for the GDMA_IN_ERR_EOF_CH_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_DONE_CH
     <i>
      n
     </i>
     _INT_ST The raw interrupt status bit for the GDMA_OUT_DONE_CH_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_EOF_CH
     <i>
      n
     </i>
     _INT_ST The raw interrupt status bit for the GDMA_OUT_EOF_CH_INT interrupt. (RO)
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      rupt. (RO)
      <br/>
      GDMA_IN_DSCR_ERR_CHn_INT_ST
      <br/>
      The
      <br/>
      raw
     </th>
     <th>
      interrupt
     </th>
     <th>
      status
     </th>
     <th>
      bit
     </th>
     <th>
      for
     </th>
     <th>
      the
     </th>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_ERR_CH_INT interrupt. (RO)
      <br/>
      GDMA_OUT_DSCR_ERR_CHn_INT_ST
      <br/>
      The
     </td>
     <td>
      raw
      <br/>
      interrupt
     </td>
     <td>
      status
     </td>
     <td>
      bit
     </td>
     <td>
      for
     </td>
     <td>
      the
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_DSCR_ERR_CH_INT interrupt. (RO)
      <br/>
      GDMA_IN_DSCR_EMPTY_CHn_INT_ST
      <br/>
      The
     </td>
     <td>
      raw
      <br/>
      interrupt
     </td>
     <td>
      status
     </td>
     <td>
      bit
     </td>
     <td>
      for
     </td>
     <td>
      the
     </td>
    </tr>
    <tr>
     <td>
      GDMA_IN_DSCR_EMPTY_CH_INT interrupt. (RO)
      <br/>
      GDMA_OUT_TOTAL_EOF_CHn_INT_ST
      <br/>
      The
     </td>
     <td>
      raw
      <br/>
      interrupt
     </td>
     <td>
      status
     </td>
     <td>
      bit
     </td>
     <td>
      for
     </td>
     <td>
      the
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUT_TOTAL_EOF_CH_INT interrupt. (RO)
      <br/>
      GDMA_INFIFO_OVF_CHn_INT_ST
      <br/>
      The
      <br/>
      raw
     </td>
     <td>
      interrupt
     </td>
     <td>
      status
     </td>
     <td>
      bit
     </td>
     <td>
      for
     </td>
     <td>
      the
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INFIFO_OVF_L1_CH_INT interrupt. (RO)
      <br/>
      GDMA_INFIFO_UDF_CHn_INT_ST
      <br/>
      The
      <br/>
      raw
     </td>
     <td>
      interrupt
     </td>
     <td>
      status
     </td>
     <td>
      bit
     </td>
     <td>
      for
     </td>
     <td>
      the
     </td>
    </tr>
    <tr>
     <td>
      GDMA_INFIFO_UDF_L1_CH_INT interrupt. (RO)
      <br/>
      GDMA_OUTFIFO_OVF_CHn_INT_ST
      <br/>
      The
      <br/>
      raw
      <br/>
      GDMA_OUTFIFO_OVF_L1_CH_INT interrupt. (RO)
     </td>
     <td>
      interrupt
     </td>
     <td>
      status
     </td>
     <td>
      bit
     </td>
     <td>
      for
     </td>
     <td>
      the
     </td>
    </tr>
    <tr>
     <td>
      GDMA_OUTFIFO_UDF_CHn_INT_ST
      <br/>
      The
      <br/>
      raw
     </td>
     <td>
      interrupt
     </td>
     <td>
      status
     </td>
     <td>
      bit
     </td>
     <td>
      for
     </td>
     <td>
      the
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Register 2.3. GDMA_INT_ENA_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x0008+16*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-75-0">
   </span>
   <img src="_page_75_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_IN_DONE_CH
   <i>
    n
   </i>
   _INT_ENA The interrupt enable bit for the GDMA_IN_DONE_CH_INT interrupt. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_IN_SUC_EOF_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_IN_ERR_EOF_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_IN_ERR_EOF_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_DONE_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_OUT_DONE_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_EOF_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_OUT_EOF_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_IN_DSCR_ERR_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_IN_DSCR_ERR_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_DSCR_ERR_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_OUT_DSCR_ERR_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_IN_DSCR_EMPTY_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_IN_DSCR_EMPTY_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_TOTAL_EOF_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_OUT_TOTAL_EOF_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_INFIFO_OVF_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_INFIFO_OVF_L1_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_INFIFO_UDF_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_INFIFO_UDF_L1_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUTFIFO_OVF_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_OUTFIFO_OVF_L1_CH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUTFIFO_UDF_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the GDMA_OUTFIFO_UDF_L1_CH_INT interrupt. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 2.4. GDMA_INT_CLR_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x000C+16*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-76-0">
   </span>
   <img src="_page_76_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_IN_DONE_CH
   <i>
    n
   </i>
   _INT_CLR Set this bit to clear the GDMA_IN_DONE_CH_INT interrupt. (WT)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_IN_SUC_EOF_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_IN_ERR_EOF_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_IN_ERR_EOF_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_DONE_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_OUT_DONE_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_EOF_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_OUT_EOF_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_IN_DSCR_ERR_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_IN_DSCR_ERR_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_DSCR_ERR_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_OUT_DSCR_ERR_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_IN_DSCR_EMPTY_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_IN_DSCR_EMPTY_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_TOTAL_EOF_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_OUT_TOTAL_EOF_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_INFIFO_OVF_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_INFIFO_OVF_L1_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_INFIFO_UDF_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_INFIFO_UDF_L1_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_OUTFIFO_OVF_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_OUTFIFO_OVF_L1_CH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     GDMA_OUTFIFO_UDF_CH
     <i>
      n
     </i>
     _INT_CLR Set this bit to clear the GDMA_OUTFIFO_UDF_L1_CH_INT interrupt. (WT)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_77_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-77-0">
   </span>
   <img src="_page_77_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_AHBM_RST_INTER Set this bit, then clear this bit to reset the internal ahb FSM. (R/W)
  </p>
  <p block-type="Text">
   GDMA_ARB_PRI_DIS Set this bit to disable priority arbitration function. (R/W)
  </p>
  <p block-type="Text">
   GDMA_CLK_EN 0: Enable the clock only when application writes registers. 1: Force the clock on for registers. (R/W)
  </p>
  <p>
   <span id="page-77-1">
   </span>
   <img src="_page_77_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_DATE This is the version control register. (R/W)
  </p>
  <h4>
   Register 2.7. GDMA_IN_CONF0_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x0070+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-78-1">
   </span>
   <img src="_page_78_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_IN_RST_CH
     <i>
      n
     </i>
     This bit is used to reset GDMA channel 0 RX FSM and RX FIFO pointer. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_IN_LOOP_TEST_CH
     <i>
      n
     </i>
     This bit is used to fill the owner bit of receive descriptor by hardware of receive descriptor. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_INDSCR_BURST_EN_CH
     <i>
      n
     </i>
     Set this bit to 1 to enable INCR burst transfer for RX channel 0 reading descriptor when accessing internal RAM. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_IN_DATA_BURST_EN_CH
     <i>
      n
     </i>
     Set this bit to 1 to enable INCR burst transfer for RX channel 0 receiving data when accessing internal RAM. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_MEM_TRANS_EN_CH
     <i>
      n
     </i>
     Set this bit 1 to enable automatic transmitting data from memory to memory via GDMA. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-78-0">
   </span>
   <img src="_page_78_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_IN_CHECK_OWNER_CH
   <i>
    n
   </i>
   Set this bit to enable checking the owner attribute of the descriptor. (R/W)
  </p>
  <h4>
   Register 2.9. GDMA_IN_POP_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x007C+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-79-1">
   </span>
   <img src="_page_79_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_INFIFO_RDATA_CH
   <i>
    n
   </i>
   This register stores the data popping from GDMA FIFO (intended for debugging). (RO)
  </p>
  <p block-type="Text">
   GDMA_INFIFO_POP_CH
   <i>
    n
   </i>
   Set this bit to pop data from GDMA FIFO (intended for debugging). (R/W/SC)
  </p>
  <p>
   <span id="page-79-0">
   </span>
   <img src="_page_79_Figure_4.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_INLINK_ADDR_CH
     <i>
      n
     </i>
     This register stores the 20 least significant bits of the first receive descriptor's address. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_INLINK_AUTO_RET_CH
     <i>
      n
     </i>
     Set this bit to return to current receive descriptor's address, when there are some errors in current receiving data. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_INLINK_STOP_CH
     <i>
      n
     </i>
     Set this bit to stop GDMA's receive channel from receiving data. (R/W/SC)
    </li>
    <li block-type="ListItem">
     GDMA_INLINK_START_CH
     <i>
      n
     </i>
     Set this bit to enable GDMA's receive channel from receiving data. (R/W/SC)
    </li>
    <li block-type="ListItem">
     GDMA_INLINK_RESTART_CH
     <i>
      n
     </i>
     Set this bit to mount a new receive descriptor. (R/W/SC)
    </li>
    <li block-type="ListItem">
     GDMA_INLINK_PARK_CH
     <i>
      n
     </i>
     1: the receive descriptor's FSM is in idle state; 0: the receive descriptor's FSM is working. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 2.11. GDMA_OUT_CONF0_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x00D0+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-80-0">
   </span>
   <img src="_page_80_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUT_RST_CH
   <i>
    n
   </i>
   This bit is used to reset GDMA channel 0 TX FSM and TX FIFO pointer. (R/W)
  </p>
  <p block-type="Text">
   GDMA_OUT_LOOP_TEST_CH
   <i>
    n
   </i>
   Reserved. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_OUT_AUTO_WRBACK_CH
     <i>
      n
     </i>
     Set this bit to enable automatic outlink-writeback when all the data in TX buffer has been transmitted. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_EOF_MODE_CH
     <i>
      n
     </i>
     EOF flag generation mode when transmitting data. 1: EOF flag for TX channel 0 is generated when data need to transmit has been popped from FIFO in GDMA. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUTDSCR_BURST_EN_CH
     <i>
      n
     </i>
     Set this bit to 1 to enable INCR burst transfer for TX channel 0 reading descriptor when accessing internal RAM. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUT_DATA_BURST_EN_CH
     <i>
      n
     </i>
     Set this bit to 1 to enable INCR burst transfer for TX channel 0 transmitting data when accessing internal RAM. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-80-1">
   </span>
   <img src="_page_80_Figure_8.jpeg"/>
  </p>
  <h4>
   Register 2.12. GDMA_OUT_CONF1_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x00D4+192*
   <i>
    n
   </i>
   )
  </h4>
  <p block-type="Text">
   GDMA_OUT_CHECK_OWNER_CH
   <i>
    n
   </i>
   Set this bit to enable checking the owner attribute of the descriptor. (R/W)
  </p>
  <p>
   <span id="page-81-1">
   </span>
   <img src="_page_81_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUTFIFO_WDATA_CH
   <i>
    n
   </i>
   This register stores the data that need to be pushed into GDMA FIFO. (R/W)
  </p>
  <p block-type="Text">
   GDMA_OUTFIFO_PUSH_CH
   <i>
    n
   </i>
   Set this bit to push data into GDMA FIFO. (R/W/SC)
  </p>
  <h4>
   Register 2.14. GDMA_OUT_LINK_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x00E0+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-81-0">
   </span>
   <img src="_page_81_Figure_4.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GDMA_OUTLINK_ADDR_CH
     <i>
      n
     </i>
     This register stores the 20 least significant bits of the first transmit descriptor's address. (R/W)
    </li>
    <li block-type="ListItem">
     GDMA_OUTLINK_STOP_CH
     <i>
      n
     </i>
     Set this bit to stop GDMA's transmit channel from transferring data. (R/W/SC)
    </li>
    <li block-type="ListItem">
     GDMA_OUTLINK_START_CH
     <i>
      n
     </i>
     Set this bit to enable GDMA's transmit channel for data transfer. (R/W/SC)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   GDMA_OUTLINK_RESTART_CH
   <i>
    n
   </i>
   Set this bit to restart a new outlink from the last address. (R/W/SC)
  </p>
  <p block-type="Text">
   GDMA_OUTLINK_PARK_CH
   <i>
    n
   </i>
   1: the transmit descriptor's FSM is in idle state; 0: the transmit descriptor's FSM is working. (RO)
  </p>
  <h4>
   Register 2.15. GDMA_INFIFO_STATUS_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x0078+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-82-0">
   </span>
   <img src="_page_82_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_INFIFO_FULL_CH
   <i>
    n
   </i>
   L1 RX FIFO full signal for RX channel 0. (RO)
  </p>
  <p block-type="Text">
   GDMA_INFIFO_EMPTY_CH
   <i>
    n
   </i>
   L1 RX FIFO empty signal for RX channel 0. (RO)
  </p>
  <p block-type="Text">
   GDMA_INFIFO_CNT_CH
   <i>
    n
   </i>
   The register stores the byte number of the data in L1 RX FIFO for RX channel 0. (RO)
  </p>
  <p block-type="Text">
   GDMA_IN_REMAIN_UNDER_1B_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_IN_REMAIN_UNDER_2B_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_IN_REMAIN_UNDER_3B_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_IN_REMAIN_UNDER_4B_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_IN_BUF_HUNGRY_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p>
   <img src="_page_82_Figure_10.jpeg"/>
  </p>
  <p>
   <span id="page-82-1">
   </span>
   <img src="_page_82_Figure_11.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_INLINK_DSCR_ADDR_CH
   <i>
    n
   </i>
   This register stores the lower 18 bits of the next receive descriptor address that is pre-read (but not processed yet). If the current receive descriptor is the last descriptor, then this field represents the address of the current receive descriptor. (RO)
  </p>
  <p block-type="Text">
   GDMA_IN_DSCR_STATE_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_IN_STATE_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p>
   <span id="page-83-0">
   </span>
   <img src="_page_83_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_IN_SUC_EOF_DES_ADDR_CH
   <i>
    n
   </i>
   This register stores the address of the receive descriptor when the EOF bit in this descriptor is 1. (RO)
  </p>
  <p>
   <span id="page-83-1">
   </span>
   <img src="_page_83_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_IN_ERR_EOF_DES_ADDR_CH
   <i>
    n
   </i>
   This register stores the address of the receive descriptor when there are some errors in current receiving data. Only used when peripheral is UHCI0. (RO)
  </p>
  <p>
   <span id="page-83-2">
   </span>
   <img src="_page_83_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_INLINK_DSCR_CH
   <i>
    n
   </i>
   Represents the address of the next receive descriptor x+1 pointed by the current receive descriptor that is pre-read. (RO)
  </p>
  <p>
   <span id="page-84-0">
   </span>
   <img src="_page_84_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_INLINK_DSCR_BF0_CH
   <i>
    n
   </i>
   Represents the address of the current receive descriptor x that is pre-read. (RO)
  </p>
  <h4>
   Register 2.21. GDMA_IN_DSCR_BF1_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x0098+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-84-1">
   </span>
   <img src="_page_84_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_INLINK_DSCR_BF1_CH
   <i>
    n
   </i>
   Represents the address of the previous receive descriptor x-1 that is pre-read. (RO)
  </p>
  <h4>
   Register 2.22. GDMA_OUTFIFO_STATUS_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x00D8+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-85-0">
   </span>
   <img src="_page_85_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUTFIFO_FULL_CH
   <i>
    n
   </i>
   L1 TX FIFO full signal for TX channel 0. (RO)
  </p>
  <p block-type="Text">
   GDMA_OUTFIFO_EMPTY_CH
   <i>
    n
   </i>
   L1 TX FIFO empty signal for TX channel 0. (RO)
  </p>
  <p block-type="Text">
   GDMA_OUTFIFO_CNT_CH
   <i>
    n
   </i>
   The register stores the byte number of the data in L1 TX FIFO for TX channel 0. (RO)
  </p>
  <p block-type="Text">
   GDMA_OUT_REMAIN_UNDER_1B_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_OUT_REMAIN_UNDER_2B_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_OUT_REMAIN_UNDER_3B_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_OUT_REMAIN_UNDER_4B_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p>
   <img src="_page_85_Figure_9.jpeg"/>
  </p>
  <p>
   <span id="page-85-1">
   </span>
   <img src="_page_85_Figure_10.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUTLINK_DSCR_ADDR_CH
   <i>
    n
   </i>
   This register stores the lower 18 bits of the next receive descriptor address that is pre-read (but not processed yet). If the current receive descriptor is the last descriptor, then this field represents the address of the current receive descriptor. (RO)
  </p>
  <p block-type="Text">
   GDMA_OUT_DSCR_STATE_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p block-type="Text">
   GDMA_OUT_STATE_CH
   <i>
    n
   </i>
   Reserved. (RO)
  </p>
  <p>
   <span id="page-86-0">
   </span>
   <img src="_page_86_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUT_EOF_DES_ADDR_CH
   <i>
    n
   </i>
   This register stores the address of the transmit descriptor when the EOF bit in this descriptor is 1. (RO)
  </p>
  <p block-type="Text">
   Register 2.25. GDMA_OUT_EOF_BFR_DES_ADDR_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x00EC+192*
   <i>
    n
   </i>
   )
  </p>
  <p>
   <span id="page-86-1">
   </span>
   <img src="_page_86_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUT_EOF_BFR_DES_ADDR_CH
   <i>
    n
   </i>
   This register stores the address of the transmit descriptor before the last transmit descriptor. (RO)
  </p>
  <p>
   <span id="page-86-2">
   </span>
   <img src="_page_86_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUTLINK_DSCR_CH
   <i>
    n
   </i>
   Represents the address of the next transmit descriptor y+1 pointed by the current transmit descriptor that is pre-read. (RO)
  </p>
  <p>
   <span id="page-87-0">
   </span>
   <img src="_page_87_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUTLINK_DSCR_BF0_CH
   <i>
    n
   </i>
   Represents the address of the current transmit descriptor y that is pre-read. (RO)
  </p>
  <p>
   <span id="page-87-1">
   </span>
   <img src="_page_87_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_OUTLINK_DSCR_BF1_CH
   <i>
    n
   </i>
   Represents the address of the previous transmit descriptor y-1 that is pre-read. (RO)
  </p>
  <p block-type="Text">
   Register 2.29. GDMA_IN_PRI_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x009C+192*
   <i>
    n
   </i>
   )
  </p>
  <p>
   <span id="page-87-2">
   </span>
   <img src="_page_87_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_RX_PRI_CH
   <i>
    n
   </i>
   The priority of RX channel 0. The larger the value, the higher the priority. (R/W)
  </p>
  <h4>
   Register 2.30. GDMA_OUT_PRI_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x00FC+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-88-2">
   </span>
   <img src="_page_88_Figure_1.jpeg"/>
  </p>
  <p>
   GDMA_TX_PRI_CH
   <i>
    n
   </i>
   The priority of TX channel 0. The larger the value, the higher the priority. (R/W)
  </p>
  <h4>
   Register 2.31. GDMA_IN_PERI_SEL_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x00A0+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-88-0">
   </span>
   <img src="_page_88_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_PERI_IN_SEL_CH
   <i>
    n
   </i>
   This register is used to select peripheral for RX channel 0. 0: SPI2. 1: reserved. 2: UHCI0. 3: I2S. 4: reserved. 5: reserved. 6: AES. 7: SHA. 8: ADC; 9 ~ 63: Invalid. (R/W)
  </p>
  <h4>
   Register 2.32. GDMA_OUT_PERI_SEL_CH
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-2) (0x0100+192*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-88-1">
   </span>
   <img src="_page_88_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   GDMA_PERI_OUT_SEL_CH
   <i>
    n
   </i>
   This register is used to select peripheral for TX channel 0. 0: SPI2. 1: reserved. 2: UHCI0. 3: I2S. 4: reserved. 5: reserved. 6: AES. 7: SHA. 8: ADC; 9 ~ 63: Invalid. (R/W)
  </p>
  <h1>
   Part II
  </h1>
  <h1>
   Memory Organization
  </h1>
  <p block-type="Text">
   <span id="page-89-0">
   </span>
   This part provides insights into the system's memory structure, discussing the organization and mapping of RAM, ROM, eFuse, and external memories, offering a framework for understanding memory-related subsystems.
  </p>
  <h1>
   <span id="page-90-3">
   </span>
   <span id="page-90-0">
   </span>
   Chapter 3
  </h1>
  <h1>
   System and Memory
  </h1>
  <h1>
   3.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-90-1">
   </span>
   The ESP32-C3 is an ultra-low-power and highly-integrated system with a 32-bit RISC-V single-core processor with a four-stage pipeline that operates at up to 160 MHz. All internal memory, external memory, and peripherals are located on the CPU buses.
  </p>
  <h1>
   3.2 Features
  </h1>
  <h4>
   <span id="page-90-2">
   </span>
   <i>
    •
   </i>
   Address Space
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     792 KB of internal memory address space accessed from the instruction bus
    </li>
    <li block-type="ListItem">
     552 KB of internal memory address space accessed from the data bus
    </li>
    <li block-type="ListItem">
     836 KB of peripheral address space
    </li>
    <li block-type="ListItem">
     8 MB of external memory virtual address space accessed from the instruction bus
    </li>
    <li block-type="ListItem">
     8 MB of external memory virtual address space accessed from the data bus
    </li>
    <li block-type="ListItem">
     384 KB of internal DMA address space
    </li>
   </ul>
  </p>
  <h4>
   <i>
    •
   </i>
   Internal Memory
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     384 KB of Internal ROM
    </li>
    <li block-type="ListItem">
     400 KB of Internal SRAM
    </li>
    <li block-type="ListItem">
     8 KB of RTC Memory
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     External Memory
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Supports up to 16 MB external flash
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Peripheral Space
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       35 modules/peripherals in total
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       7 GDMA-supported modules/peripherals
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Figure 3.2-1 illustrates the system structure and address mapping.
  </p>
  <p>
   <span id="page-91-2">
   </span>
   <img src="_page_91_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 3.2-1. System Structure and Address Mapping
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The address space with gray background is not available to users.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The range of addresses available in the address space may be larger than the actual available memory of a particular type.
    </li>
   </ul>
  </p>
  <h1>
   3.3 Functional Description
  </h1>
  <h1>
   <span id="page-91-0">
   </span>
   3.3.1 Address Mapping
  </h1>
  <p block-type="Text">
   <span id="page-91-1">
   </span>
   Addresses below 0x4000_0000 are accessed using the data bus. Addresses in the range of 0x4000_0000 ~ 0x4FFF_FFFF are accessed using the instruction bus. Addresses over and including 0x5000_0000 are shared by the data bus and the instruction bus.
  </p>
  <p block-type="Text">
   Both data bus and instruction bus are little-endian. The CPU can access data via the data bus using single-byte, double-byte, 4-byte alignment. The CPU can also access data via the instruction bus, but only in 4-byte aligned manner.
  </p>
  <p block-type="Text">
   The CPU can:
  </p>
  <p block-type="Text">
   Espressif Systems 92
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     directly access the internal memory via both data bus and instruction bus;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     access the external memory which is mapped into the virtual address space via cache;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     directly access modules/peripherals via data bus.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Figure 3.2-1 lists the address ranges on the data bus and instruction bus and their corresponding target memory.
  </p>
  <p block-type="Text">
   Some internal and external memory can be accessed via both data bus and instruction bus. In such cases, the CP
   <a href="#page-91-2">
    U can
   </a>
   access the same memory using multiple addresses.
  </p>
  <h1>
   3.3.2 Internal Memory
  </h1>
  <p block-type="Text">
   <span id="page-92-0">
   </span>
   The ESP32-C3 consists of the following three types of internal memory:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Internal ROM (384 KB): The Internal ROM of the ESP32-C3 is a Mask ROM, meaning it is strictly read-only and cannot be reprogrammed. Internal ROM contains the ROM code (software instructions and some software read-only data) of some low level system software.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Internal SRAM (400 KB): The Internal Static RAM (SRAM) is a volatile memory that can be quickly accessed by the CPU (generally within a single CPU clock cycle).
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       A part of the SRAM can be configured to operate as a cache for external memory access.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Some parts of the SRAM can only be accessed via the CPU's instruction bus.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Some parts of the SRAM can be accessed via both the CPU's instruction bus and the CPU's data bus.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RTC Memory (8 KB): The RTC (Real Time Clock) memory implemented as Static RAM (SRAM) thus is volatile. However, RTC memory has the added feature of being persistent in deep sleep (i.e., the RTC memory retains its values throughout deep sleep).
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RTC FAST Memory (8 KB): RTC FAST memory can only be accessed by the CPU and can be generally used to store instructions and data that needs to persist across a deep sleep.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Based on the three different types of internal memory described above, the internal memory of the ESP32-C3 is split into three segments: Internal ROM (384 KB), Internal SRAM (400 KB), RTC FAST Memory (8 KB).
  </p>
  <p block-type="Text">
   However, within each segment, there may be different bus access restrictions (e.g., some parts of the segment may only be accessible by the CPU's Data bus). Therefore, each some segments are also further divided into parts. Table 3.3-1 describes each part of internal memory and their address ranges on the data bus and/or instruction bus.
  </p>
  <span id="page-92-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="2">
     </th>
     <th>
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <th>
      Bus Type
     </th>
     <th>
     </th>
     <th>
      Boundary Address
     </th>
     <th>
      Size (KB)
     </th>
     <th colspan="2">
      Target
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Low Address
     </td>
     <td>
      High Address
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Data bus
     </td>
     <td>
      0x3FF0_0000
     </td>
     <td>
      0x3FF1_FFFF
     </td>
     <td>
      128
     </td>
     <td>
      Internal ROM 1
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x3FC8_0000
     </td>
     <td>
      0x3FCD_FFFF
     </td>
     <td>
      384
     </td>
     <td>
      Internal SRAM 1
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Instruction bus
     </td>
     <td>
      0x4000_0000
      <br/>
      0x4004_0000
     </td>
     <td>
      0x4003_FFFF
      <br/>
      0x4005_FFFF
     </td>
     <td>
      256
      <br/>
      128
     </td>
     <td>
      Internal ROM 0
      <br/>
      Internal ROM 1
     </td>
    </tr>
    <tr>
     <td>
      0x4037_C000
     </td>
     <td>
      0x4037_FFFF
     </td>
     <td>
      16
     </td>
     <td>
      Internal SRAM 0
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 3.3-1. Internal Memory Address Mapping
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 3.3-1 - cont'd from previous page
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th rowspan="2">
      Chapter 3
      <br/>
      System and Memory
     </th>
     <th>
     </th>
     <th>
     </th>
     <th colspan="2" rowspan="2">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 3.3-1 – cont'd from previous page
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Bus Type
     </td>
     <td>
      Boundary Address
     </td>
     <td>
      Size (KB)
     </td>
     <td>
      Target
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="Text">
   All of the internal memories are managed by Permission Control module. An internal memory can only be accessed when it is allowed by Permission Control, then the internal memory can be available to the CPU. For more information about Permission Control, please refer to Chapter 14
   <i>
    Permission Control (PMS)
   </i>
   .
  </p>
  <h4>
   1. Internal ROM 0
  </h4>
  <p block-type="Text">
   Internal ROM 0 is a 256 KB, read-only memory space, addressed by the CPU only through the instruction bus via 0x4000_0000 ~ 0x4003_FFFF, as shown in Table 3.3-1.
  </p>
  <h4>
   2. Internal ROM 1
  </h4>
  <p block-type="Text">
   Internal ROM 1 is a 128 KB, read-only memory space,
   <a href="#page-92-1">
   </a>
   a
   <a href="#page-92-1">
    ddres
   </a>
   sed by the CPU through the instruction bus via 0x4004_0000 ~ 0x4005_FFFF or through the data bus via 0x3FF0_0000 ~ 0x3FF1_FFFF in the same order, as shown in Table 3.3-1.
  </p>
  <p block-type="Text">
   This means, for example, address 04004_0000 and 0x3FF0_0000 correspond to the same word, 0x4004_0004 and 0x3FF0_0004 correspond to the same word, 0x4004_0008 and 0x3FF0_0008 correspond to the
   <a href="#page-92-1">
    same
   </a>
   word, etc (the same ordering applies for Internal SRAM 1).
  </p>
  <h4>
   3. Internal SRAM 0
  </h4>
  <p block-type="Text">
   Internal SRAM 0 is a 16 KB, read-and-write memory space, addressed by the CPU through the instruction bus via the range described in Table 3.3-1.
  </p>
  <p block-type="Text">
   This memory managed by Permission Control, can be configured as instruction cache to store cache instructions or read-only data of the external memory. In this case, the memory cannot be accessed by the CPU. For more information abou
   <a href="#page-92-1">
    t Perm
   </a>
   ission Control, please refer to Chapter 14
   <i>
    Permission Control (PMS)
   </i>
   .
  </p>
  <h4>
   4. Internal SRAM 1
  </h4>
  <p block-type="Text">
   <a href="#page-314-0">
    Interna
   </a>
   l SRAM 1 is a 384 KB, read-and-write memory space, addressed by th
   <a href="#page-314-0">
    e CPU through the data
   </a>
   bus or instruction bus, in the same order, via the ranges described in Table 3.3-1.
  </p>
  <h4>
   5. RTC FAST Memory
  </h4>
  <p block-type="Text">
   RTC FAST Memory is a 8 KB, read-and-write SRAM, addressed by th
   <a href="#page-92-1">
    e CPU
   </a>
   through the data/instruction bus via the shared address 0x5000_0000 ~ 0x5000_1FFF, as described in Table 3.3-1.
  </p>
  <h1>
   3.3.3 External Memory
  </h1>
  <p block-type="Text">
   <span id="page-93-1">
   </span>
   <span id="page-93-0">
   </span>
   ESP32-C3 supports SPI, Dual SPI, Quad SPI, and QPI interfaces that allow
   <a href="#page-92-1">
    conn
   </a>
   ection to multiple external flash. It supports hardware manual encryption and automatic decryption based on XTS_AES to protect user programs and data in the external flash.
  </p>
  <h1>
   3.3.3.1 External Memory Address Mapping
  </h1>
  <p block-type="Text">
   The CPU accesses the external memory via the cache. According to the MMU (Memory Management Unit) settings, the cache maps the CPU's address to the external memory's physical address. Due to this address mapping, the ESP32-C3 can address up to 16 MB external flash.
  </p>
  <p block-type="Text">
   Using the cache, ESP32-C3 is able to support the following address space mappings. Note that the instruction bus address space (8MB) and the data bus address space (8 MB) is always shared.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Up to 8 MB instruction bus address space can be mapped into the external flash. The mapped address space is organized as individual 64-KB blocks.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Up to 8 MB data bus (read-only) address space can be mapped into the external flash. The mapped address space is organized as individual 64-KB blocks.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Table 3.3-2 lists the mapping between the cache and the corresponding address ranges on the data bus and instruction bus.
  </p>
  <span id="page-94-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="2">
      Table 3.3-2. External Memory Address Mapping
     </th>
     <th>
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Bus Type
     </td>
     <td>
     </td>
     <td>
      Boundary Address
     </td>
     <td>
      Size (MB)
     </td>
     <td>
      Target
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Low Address
     </td>
     <td>
      High Address
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Data
      <br/>
      bus
      <br/>
      (read
     </td>
     <td>
      0x3C00_0000
     </td>
     <td>
      0x3C7F_FFFF
     </td>
     <td>
     </td>
     <td>
      8
      <br/>
      Uniform Cache
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 3.3-2. External Memory Address Mapping
  </h4>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="Text">
   Only if the CPU obtains permission for accessing the external memory, can it be responded for memory access. For more detailed information about permission control, please refer to Chapter 14
   <i>
    Permission Control (PMS)
   </i>
   .
  </p>
  <h1>
   3.3.3.2 Cache
  </h1>
  <p block-type="Text">
   <span id="page-94-0">
   </span>
   As shown in Figure 3.3-1, ESP32-C3 has a read-only uniform cache which is eight-way set-associative, its size is 16 KB and its block size is 32 bytes. When cache is active, some internal memory space will be occupied by cache (see Internal SRAM 0 in Section 3.3.2).
  </p>
  <p block-type="Text">
   The uniform cache
   <a href="#page-95-2">
    is acc
   </a>
   essible by the instruction bus and the data bus at the same time, but can only respond to one of them at a time. When a cache miss occurs, the cache controller will initiate a request to the external memory.
  </p>
  <p>
   <span id="page-95-2">
   </span>
   <img src="_page_95_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 3.3-1. Cache Structure
  </p>
  <h1>
   3.3.3.3 Cache Operations
  </h1>
  <p block-type="Text">
   <span id="page-95-0">
   </span>
   ESP32-C3 cache support the following operations:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Invalidate: This operation is used to clear valid data in the cache. After this operation is completed, the data will only be stored in the external memory. The CPU needs to access the external memory in order to read this data. There are two types of invalidate-operation: automatic invalidation (Auto-Invalidate) and manual invalidation (Manual-Invalidate). Manual-Invalidate is performed only on data in the specified area in the cache, while Auto-Invalidate is performed on all data in the cache.
    </li>
    <li block-type="ListItem">
     2. Preload: This operation is used to load instructions and data into the cache in advance. The minimum unit of preload-operation is one block. There are two types of preload-operation: manual preload (Manual-Preload) and automatic preload (Auto-Preload). Manual-Preload means that the hardware prefetches a piece of continuous data according to the virtual address specified by the software. Auto-Preload means the hardware prefetches a piece of continuous data according to the current address where the cache hits or misses (depending on configuration).
    </li>
    <li block-type="ListItem">
     3. Lock/Unlock: The lock operation is used to prevent the data in the cache from being easily replaced. There are two types of lock: prelock and manual lock. When prelock is enabled, the cache locks the data in the specified area when filling the missing data to cache memory, while the data outside the specified area will not be locked. When manual lock is enabled, the cache checks the data that is already in the cache memory and only locks the data in the specified area, and leaves the data outside the specified area unlocked. When there are missing data, the cache will replace the data in the unlocked way first, so the data in the locked way is always stored in the cache and will not be replaced. But when all ways within the cache are locked, the cache will replace data, as if it was not locked. Unlocking is the reverse of locking, except that it only can be done manually.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Please note that the Manual-Invalidate operations will only work on the unlocked data. If you expect to perform such operation on the locked data, please unlock them first.
  </p>
  <h1>
   3.3.4 GDMA Address Space
  </h1>
  <p block-type="Text">
   <span id="page-95-1">
   </span>
   The GDMA (General Direct Memory Access) peripheral in ESP32-C3 can provide DMA (Direct Memory Access) services including:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data transfers between different locations of internal memory;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data transfers between modules/peripherals and internal memory.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   GDMA uses the same addresses as the data bus to read and write Internal SRAM 1. Specifically, GDMA uses address range 0x3FC8_0000 ~ 0x3FCD_FFFF to access Internal SRAM 1. Note that GDMA cannot access the internal memory occupied by the cache.
  </p>
  <p block-type="Text">
   There are 7 peripherals/modules that can work together with GDMA.
  </p>
  <p block-type="Text">
   As shown in Figure 3.3-2, these 7 vertical lines in turn correspond to these 7 peripherals/modules with GDMA function, the horizontal line represents a certain channel of GDMA (can be any channel), and the intersection of the vertical line and the horizontal line indicates that a peripheral/module has the ability to access the corresponding cha
   <a href="#page-96-2">
    nnel o
   </a>
   f GDMA. If there are multiple intersections on the same line, it means that these peripherals/modules cannot enable the GDMA function at the same time.
  </p>
  <p>
   <span id="page-96-2">
   </span>
   <img src="_page_96_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 3.3-2. Peripherals/modules that can work with GDMA
  </p>
  <p block-type="Text">
   These peripherals/modules can access any memory available to GDMA. For more information, please refer to Chapter 2
   <i>
    GDMA Controller (GDMA)
   </i>
   .
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   When accessing a memory via GDMA, a corresponding access permission is needed, otherwise this access
   <a href="#page-59-0">
    may fail. For more information a
   </a>
   bout permission control, please refer to Chapter 14
   <i>
    Permission Control (PMS)
   </i>
   .
  </p>
  <h1>
   3.3.5 Modules/Peripherals
  </h1>
  <p block-type="Text">
   <span id="page-96-1">
   </span>
   <span id="page-96-0">
   </span>
   The CPU can access modules/peripherals via 0x6000_0000 ~ 0x600D_0FFF shared by the data/instruction bus.
  </p>
  <h1>
   3.3.5.1 Module/Peripheral Address Mapping
  </h1>
  <p block-type="Text">
   Table 3.3-3 lists all the modules/peripherals and their respective address ranges. Note that the address space of specific modules/peripherals is defined by "Boundary Address" (including both Low Address and High Address).
  </p>
  <span id="page-97-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="2">
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Table 3.3-3. Module/Peripheral Address Mapping
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Target
     </td>
     <td>
      Low Address
     </td>
     <td>
      Boundary Address
      <br/>
      High Address
     </td>
     <td>
      Size (KB)
     </td>
     <td>
      Notes
     </td>
    </tr>
    <tr>
     <td>
      UART Controller 0
     </td>
     <td>
      0x6000_0000
     </td>
     <td>
      0x6000_0FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6000_1000
     </td>
     <td>
      0x6000_1FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SPI Controller 1
     </td>
     <td>
      0x6000_2000
     </td>
     <td>
      0x6000_2FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      SPI Controller 0
     </td>
     <td>
      0x6000_3000
     </td>
     <td>
      0x6000_3FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      GPIO
     </td>
     <td>
      0x6000_4000
     </td>
     <td>
      0x6000_4FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6000_5000
     </td>
     <td>
      0x6000_6FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6000_7000
     </td>
     <td>
      0x6000_7FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Low-Power Management
     </td>
     <td>
      0x6000_8000
     </td>
     <td>
      0x6000_8FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      IO MUX
     </td>
     <td>
      0x6000_9000
     </td>
     <td>
      0x6000_9FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6000_A000
     </td>
     <td>
      0x6000_FFFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      UART Controller 1
     </td>
     <td>
      0x6001_0000
     </td>
     <td>
      0x6001_0FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6001_1000
     </td>
     <td>
      0x6001_2FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C Controller
     </td>
     <td>
      0x6001_3000
     </td>
     <td>
      0x6001_3FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      UHCI0
     </td>
     <td>
      0x6001_4000
     </td>
     <td>
      0x6001_4FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6001_5000
     </td>
     <td>
      0x6001_5FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Remote Control Peripheral
     </td>
     <td>
      0x6001_6000
     </td>
     <td>
      0x6001_6FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
      <br/>
      LED PWM Controller
     </td>
     <td>
      0x6001_7000
      <br/>
      0x6001_9000
     </td>
     <td>
      0x6001_8FFF
      <br/>
      0x6001_9FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      eFuse Controller
     </td>
     <td>
      0x6001_A000
     </td>
     <td>
      0x6001_AFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6001_B000
     </td>
     <td>
      0x6001_EFFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Timer Group 0
     </td>
     <td>
      0x6001_F000
     </td>
     <td>
      0x6001_FFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Timer Group 1
     </td>
     <td>
      0x6002_0000
     </td>
     <td>
      0x6002_0FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6002_1000
     </td>
     <td>
      0x6002_2FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      System Timer
     </td>
     <td>
      0x6002_3000
     </td>
     <td>
      0x6002_3FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      SPI Controller 2
     </td>
     <td>
      0x6002_4000
     </td>
     <td>
      0x6002_4FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6002_5000
     </td>
     <td>
      0x6002_5FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSCON
     </td>
     <td>
      0x6002_6000
     </td>
     <td>
      0x6002_6FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6002_7000
     </td>
     <td>
      0x6002_AFFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Two-wire Automotive Interface
     </td>
     <td>
      0x6002_B000
     </td>
     <td>
      0x6002_BFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6002_C000
     </td>
     <td>
      0x6002_CFFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2S Controller
     </td>
     <td>
      0x6002_D000
     </td>
     <td>
      0x6002_DFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6002_E000
     </td>
     <td>
      0x6003_9FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES Accelerator
     </td>
     <td>
      0x6003_A000
     </td>
     <td>
      0x6003_AFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      SHA Accelerator
      <br/>
      RSA Accelerator
     </td>
     <td>
      0x6003_B000
      <br/>
      0x6003_C000
     </td>
     <td>
      0x6003_BFFF
      <br/>
      0x6003_CFFF
     </td>
     <td>
     </td>
     <td>
      4
      <br/>
      4
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <span id="page-97-1">
   </span>
   Table 3.3-3. Module/Peripheral Address Mapping
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3
      <br/>
      System and Memory
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 3.3-3 – cont'd from previous page
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Target
     </td>
     <td>
     </td>
     <td>
      Boundary Address
     </td>
     <td>
      Size (KB)
     </td>
     <td>
      Notes
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Low Address
     </td>
     <td>
      High Address
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Digital Signature
     </td>
     <td>
      0x6003_D000
     </td>
     <td>
      0x6003_DFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      HMAC Accelerator
     </td>
     <td>
      0x6003_E000
     </td>
     <td>
      0x6003_EFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      GDMA Controller
     </td>
     <td>
      0x6003_F000
     </td>
     <td>
      0x6003_FFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      ADC Controller
     </td>
     <td>
      0x6004_0000
     </td>
     <td>
      0x6004_0FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
      <br/>
      USB Serial/JTAG Controller
     </td>
     <td>
      0x6004_1000
      <br/>
      0x6004_3000
     </td>
     <td>
      0x6002_FFFF
      <br/>
      0x6004_3FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x6004_4000
     </td>
     <td>
      0x600B_FFFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      System Registers
     </td>
     <td>
      0x600C_0000
     </td>
     <td>
      0x600C_0FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      PMS Registers
     </td>
     <td>
      0x600C_1000
     </td>
     <td>
      0x600C_1FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Matrix
     </td>
     <td>
      0x600C_2000
     </td>
     <td>
      0x600C_2FFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x600C_3000
     </td>
     <td>
      0x600C_3FFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x600C_4000
     </td>
     <td>
      0x600C_BFFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      External Memory Encryption and
     </td>
     <td>
      0x600C_C000
     </td>
     <td>
      0x600C_CFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      Decryption
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      0x600C_D000
     </td>
     <td>
      0x600C_DFFF
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Assist Debug
     </td>
     <td>
      0x600C_E000
     </td>
     <td>
      0x600C_EFFF
     </td>
     <td>
     </td>
     <td>
      4
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 3.3-3 – cont'd from previous page
  </p>
  <h1>
   <span id="page-99-5">
   </span>
   <span id="page-99-0">
   </span>
   eFuse Controller (EFUSE)
  </h1>
  <h1>
   4.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-99-1">
   </span>
   ESP32-C3 contains a 4096-bit eFuse controller to store parameters. Once an eFuse bit is programmed to 1, it can never be reverted to 0. The eFuse controller programs individual bits of parameters in eFuse according to user configurations. From outside the chip, eFuse data can only be read via the eFuse Controller. If read-protection for some data is not enabled, that data is readable from outside the chip. If read-protection is enabled, that data can not be read from outside the chip. In all cases, however, some keys stored in eFuse can still be used internally by hardware cryptography modules such as Digital Signature, HMAC, etc., without exposing this data to the outside world.
  </p>
  <h1>
   4.2 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-99-2">
     </span>
     <i>
      •
     </i>
     4096-bit One-time programmable storage
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable write protection
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable read protection
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Various hardware encoding schemes against data corruption
    </li>
   </ul>
  </p>
  <h1>
   4.3 Functional Description
  </h1>
  <h1>
   <span id="page-99-3">
   </span>
   4.3.1 Structure
  </h1>
  <p block-type="Text">
   eFuse data is organized in 11 blocks (BLOCK0 ~ BLOCK10).
  </p>
  <p block-type="Text">
   <span id="page-99-4">
   </span>
   BLOCK0, which holds most parameters, has 9 bits that are readable but useless to users, and 60 further bits are reserved for future use.
  </p>
  <p block-type="Text">
   Table 4.3-1 lists all the parameters accessible (readable and usable) to users in BLOCK0 and their offsets, bit widths, as well as information on whether their configuration is directly accessible by hardware, and whether they are protected from programming.
  </p>
  <p block-type="Text">
   The E
   <a href="#page-100-0">
    FUSE
   </a>
   _WR_DIS parameter is used to disable the writing of other parameters, while EFUSE_RD_DIS is used to disable users from reading BLOCK4 ~ BLOCK10. For more information on these two parameters, please see Section 4.3.1.1 and Section 4.3.1.2.
  </p>
  <span id="page-100-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Pa
      <br/>
      te
      <br/>
      ram
      <br/>
      e
      <br/>
      rs
     </th>
     <th>
      Bit Wi
      <br/>
      Ac
      <br/>
      dt
      <br/>
      h
     </th>
     <th>
      Pro
      <br/>
      g
      <br/>
      le by
      <br/>
      ib
      <br/>
      ce
      <br/>
      ss
      <br/>
      by
      <br/>
      rdw
      <br/>
      Ha
      <br/>
      are
     </th>
     <th>
      min
      <br/>
      tio
      <br/>
      Pro
      <br/>
      tec
      <br/>
      ram
      <br/>
      g-
      <br/>
      n
      <br/>
      De
      <br/>
      DIS Bit
      <br/>
      US
      <br/>
      sc
      <br/>
      r
      <br/>
      EF
      <br/>
      E_
      <br/>
      WR
      <br/>
      _
     </th>
     <th>
      Chapter
      <br/>
      4
      <br/>
      ip
      <br/>
      ion
      <br/>
      t
     </th>
    </tr>
    <tr>
     <td>
      S
      <br/>
      S
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      W
      <br/>
      R_
      <br/>
      D
      <br/>
      I
     </td>
     <td>
      3
      <br/>
      2
     </td>
     <td>
      Y
     </td>
     <td>
      Nu
      <br/>
      mb
      <br/>
      er
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      /
      <br/>
      N
      <br/>
      A
      <br/>
      b
      <br/>
      le
      <br/>
      d.
     </td>
     <td>
      eFuse
      <br/>
      he
      <br/>
      he
      <br/>
      d
      <br/>
      du
      <br/>
      l
      <br/>
      d
      <br/>
      i
      <br/>
      ing
      <br/>
      f
      <br/>
      in
      <br/>
      iv
      <br/>
      i
      <br/>
      Fu
      <br/>
      is
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      wr
      <br/>
      o
      <br/>
      a
      <br/>
      e
      <br/>
      se
      <br/>
      s
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      S
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      R
      <br/>
      D_
      <br/>
      D
      <br/>
      I
     </td>
     <td>
      7
     </td>
     <td>
      Y
     </td>
     <td>
      a
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      0
      <br/>
      d
      <br/>
      b
      <br/>
      isa
     </td>
     <td>
      Controller
      <br/>
      he
      <br/>
      he
      <br/>
      d
      <br/>
      O
      <br/>
      C
      <br/>
      '
      <br/>
      ing
      <br/>
      fro
      <br/>
      B
      <br/>
      L
      <br/>
      K
      <br/>
      4
      <br/>
      1
      <br/>
      0
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      us
      <br/>
      ers
      <br/>
      rea
      <br/>
      m
      <br/>
      ~
      <br/>
      le
      <br/>
      d.
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      S_
      <br/>
      C
      <br/>
      C
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      D
      <br/>
      I
      <br/>
      I
      <br/>
      A
      <br/>
      H
      <br/>
      E
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      2
      <br/>
      Re
      <br/>
      res
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      Ca
      <br/>
      he
      <br/>
      d
      <br/>
      b
      <br/>
      le
      <br/>
      i
      <br/>
      isa
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      c
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      S
      <br/>
      G
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      D
      <br/>
      I
      <br/>
      U
      <br/>
      J
      <br/>
      T
      <br/>
      A
     </td>
     <td>
      1
     </td>
     <td>
      Y
     </td>
     <td>
      p
      <br/>
      2
      <br/>
      Re
     </td>
     <td>
      (EFUSE)
      <br/>
      d.
      <br/>
      is
      <br/>
      ts
      <br/>
      r
      <br/>
      he
      <br/>
      he
      <br/>
      he
      <br/>
      S
      <br/>
      d
      <br/>
      b
      <br/>
      le
      <br/>
      U
      <br/>
      B-
      <br/>
      -J
      <br/>
      T
      <br/>
      A
      <br/>
      fu
      <br/>
      ion
      <br/>
      isa
      <br/>
      t
      <br/>
      t
      <br/>
      to
      <br/>
      t
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      E_
      <br/>
      B_
      <br/>
      E
      <br/>
      F
      <br/>
      S
      <br/>
      D
      <br/>
      I
      <br/>
      D
      <br/>
      O
      <br/>
      W
      <br/>
      N
      <br/>
      L
      <br/>
      O
      <br/>
      A
      <br/>
      I
      <br/>
      C
      <br/>
      A
      <br/>
      C
      <br/>
      H
      <br/>
      E
     </td>
     <td>
      1
     </td>
     <td>
      Y
     </td>
     <td>
      p
      <br/>
      res
     </td>
     <td>
      G
      <br/>
      d.
      <br/>
      is
      <br/>
      ts
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      nc
      <br/>
      he
      <br/>
      he
      <br/>
      Ca
      <br/>
      he
      <br/>
      d
      <br/>
      b
      <br/>
      le
      <br/>
      loa
      <br/>
      de
      <br/>
      i
     </td>
    </tr>
    <tr>
     <td>
      U
      <br/>
      E_
      <br/>
      S_
      <br/>
      D_
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      D
      <br/>
      I
      <br/>
      S_
      <br/>
      U
      <br/>
      S
      <br/>
      B_
      <br/>
      S
      <br/>
      E
      <br/>
      R
      <br/>
      I
      <br/>
      A
      <br/>
      L_
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G
     </td>
     <td>
      1
      <br/>
      1
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
      Re
      <br/>
      2
      <br/>
      p
      <br/>
      res
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      2
     </td>
     <td>
      d
      <br/>
      Do
      <br/>
      d
      <br/>
      is
      <br/>
      isa
      <br/>
      in
      <br/>
      ts
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      c
      <br/>
      wn
      <br/>
      mo
      <br/>
      he
      <br/>
      he
      <br/>
      he
      <br/>
      b_
      <br/>
      ia
      <br/>
      l_
      <br/>
      j
      <br/>
      ip
      <br/>
      he
      <br/>
      l
      <br/>
      is
      <br/>
      d
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      tag
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      us
      <br/>
      se
      <br/>
      r
      <br/>
      p
      <br/>
      er
      <br/>
      ra
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      D
      <br/>
      I
      <br/>
      S_
      <br/>
      F
      <br/>
      O
      <br/>
      R
      <br/>
      C
      <br/>
      E_
      <br/>
      D
      <br/>
      O
      <br/>
      W
      <br/>
      N
      <br/>
      L
      <br/>
      O
      <br/>
      A
      <br/>
      D
     </td>
     <td>
      1
     </td>
     <td>
      Y
     </td>
     <td>
      b
      <br/>
      le
      <br/>
      d.
      <br/>
      a
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      2
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      he
      <br/>
      fu
      <br/>
      ion
      <br/>
      fo
      <br/>
      he
      <br/>
      h
      <br/>
      ip
      <br/>
      in
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      to
      <br/>
      t
      <br/>
      to
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      nc
      <br/>
      rce
      <br/>
      c
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Do
      <br/>
      wn
     </td>
     <td>
      loa
      <br/>
      d
      <br/>
      de
      <br/>
      is
      <br/>
      d
      <br/>
      isa
      <br/>
      b
      <br/>
      le
      <br/>
      d.
      <br/>
      mo
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      D
      <br/>
      I
      <br/>
      S_
      <br/>
      T
      <br/>
      W
      <br/>
      A
      <br/>
      I
     </td>
     <td>
      1
     </td>
     <td>
      Y
     </td>
     <td>
      Re
      <br/>
      2
      <br/>
      p
      <br/>
      res
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      he
      <br/>
      T
      <br/>
      W
      <br/>
      A
      <br/>
      I
      <br/>
      l
      <br/>
      ler
      <br/>
      is
      <br/>
      d
      <br/>
      isa
      <br/>
      b
      <br/>
      le
      <br/>
      d.
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      tro
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      co
      <br/>
      n
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G_
      <br/>
      S
      <br/>
      E
      <br/>
      L_
      <br/>
      E
      <br/>
      N
      <br/>
      A
      <br/>
      B
      <br/>
      L
      <br/>
      E
     </td>
     <td>
      1
     </td>
     <td>
      Y
     </td>
     <td>
      Re
      <br/>
      2
      <br/>
      p
      <br/>
      res
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G
      <br/>
      d
      <br/>
      ire
      <br/>
      ly.
      <br/>
      ts
      <br/>
      t
      <br/>
      to
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      us
      <br/>
      e
      <br/>
      c
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      O
      <br/>
      F
      <br/>
      T_
      <br/>
      D
      <br/>
      I
      <br/>
      S_
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      D
      <br/>
      I
      <br/>
      S_
      <br/>
      P
      <br/>
      A
      <br/>
      D_
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G
     </td>
     <td>
      3
      <br/>
      1
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
      3
      <br/>
      Re
      <br/>
      1
      <br/>
      p
      <br/>
      res
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      2
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      d
      <br/>
      b
      <br/>
      le
      <br/>
      d
      <br/>
      he
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G
      <br/>
      is
      <br/>
      isa
      <br/>
      in
      <br/>
      f
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      so
      <br/>
      wa
      <br/>
      y.
      <br/>
      (
      <br/>
      he
      <br/>
      he
      <br/>
      d
      <br/>
      b
      <br/>
      le
      <br/>
      d
      <br/>
      he
      <br/>
      ha
      <br/>
      d
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G
      <br/>
      is
      <br/>
      isa
      <br/>
      in
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      wa
      <br/>
      p
      <br/>
      er-
      <br/>
      w
      <br/>
      r
      <br/>
      r
      <br/>
      y
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      D
      <br/>
      I
      <br/>
      S_
      <br/>
      D
      <br/>
      O
      <br/>
      W
      <br/>
      N
      <br/>
      L
      <br/>
      O
      <br/>
      A
      <br/>
      D_
      <br/>
      M
      <br/>
      A
      <br/>
      N
      <br/>
      U
      <br/>
      A
      <br/>
      L_
      <br/>
      E
      <br/>
      N
      <br/>
      C
      <br/>
      R
      <br/>
      Y
      <br/>
      P
      <br/>
      T
     </td>
     <td>
      1
     </td>
     <td>
      Y
     </td>
     <td>
      ma
      <br/>
      ne
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      2
     </td>
     <td>
      ).
      <br/>
      ly
      <br/>
      t
      <br/>
      n
      <br/>
      he
      <br/>
      he
      <br/>
      f
      <br/>
      la
      <br/>
      h
      <br/>
      d
      <br/>
      b
      <br/>
      le
      <br/>
      d
      <br/>
      ion
      <br/>
      is
      <br/>
      isa
      <br/>
      in
      <br/>
      Do
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      s
      <br/>
      en
      <br/>
      cry
      <br/>
      p
      <br/>
      wn
      <br/>
      w
      <br/>
      r
      <br/>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      loa
      <br/>
      d
     </td>
     <td>
      bo
      <br/>
      de
      <br/>
      t
      <br/>
      o
      <br/>
      mo
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      U
      <br/>
      S
      <br/>
      B_
      <br/>
      E
      <br/>
      X
      <br/>
      C
      <br/>
      H
      <br/>
      G_
      <br/>
      P
      <br/>
      I
      <br/>
      N
      <br/>
      S
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      V
      <br/>
      D
      <br/>
      D_
      <br/>
      S
      <br/>
      P
      <br/>
      I_
      <br/>
      A
      <br/>
      S_
      <br/>
      G
      <br/>
      P
      <br/>
      I
      <br/>
      O
     </td>
     <td>
      1
      <br/>
      1
     </td>
     <td>
      Y
      <br/>
      N
     </td>
     <td>
      3
      <br/>
      0
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      3
      <br/>
      0
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      he
      <br/>
      d
      <br/>
      ha
      <br/>
      d.
      <br/>
      D
      <br/>
      D-
      <br/>
      ins
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      +
      <br/>
      en
      <br/>
      an
      <br/>
      p
      <br/>
      are
      <br/>
      ex
      <br/>
      c
      <br/>
      ng
      <br/>
      e
      <br/>
      w
      <br/>
      r
      <br/>
      he
      <br/>
      he
      <br/>
      he
      <br/>
      d
      <br/>
      lar
      <br/>
      V
      <br/>
      D
      <br/>
      D_
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      in
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      r
      <br/>
      p
      <br/>
      us
      <br/>
      e
      <br/>
      as
      <br/>
      a
      <br/>
      reg
      <br/>
      w
      <br/>
      u
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      W
      <br/>
      D
      <br/>
      T_
      <br/>
      D
      <br/>
      E
      <br/>
      L
      <br/>
      A
      <br/>
      Y_
      <br/>
      S
      <br/>
      E
      <br/>
      L
     </td>
     <td>
      2
     </td>
     <td>
      Y
     </td>
     <td>
      G
      <br/>
      P
      <br/>
      I
      <br/>
      O.
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      3
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      h
      <br/>
      do
      <br/>
      hre
      <br/>
      ho
      <br/>
      l
      <br/>
      d
      <br/>
      R
      <br/>
      T
      <br/>
      C
      <br/>
      im
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      tc
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      r
      <br/>
      wa
      <br/>
      g
      <br/>
      eo
      <br/>
      s
      <br/>
      w
      <br/>
      u
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      P
      <br/>
      I_
      <br/>
      B
      <br/>
      O
      <br/>
      O
      <br/>
      T_
      <br/>
      C
      <br/>
      R
      <br/>
      Y
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      N
      <br/>
      T
     </td>
     <td>
      3
     </td>
     <td>
      Y
     </td>
     <td>
      lec
      <br/>
      se
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      4
     </td>
     <td>
      d.
      <br/>
      te
      <br/>
      he
      <br/>
      he
      <br/>
      S
      <br/>
      bo
      <br/>
      /
      <br/>
      de
      <br/>
      P
      <br/>
      I
      <br/>
      ion
      <br/>
      ion
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      r
      <br/>
      o
      <br/>
      en
      <br/>
      cry
      <br/>
      p
      <br/>
      cry
      <br/>
      p
      <br/>
      en
      <br/>
      w
      <br/>
      <br/>
      GoBack
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Espressif Systems
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Bit Wi
      <br/>
      Pa
      <br/>
      te
      <br/>
      ram
      <br/>
      e
      <br/>
      rs
      <br/>
      dt
     </th>
     <th>
      le
      <br/>
      Ac
      <br/>
      h
      <br/>
      Ha
     </th>
     <th>
      'd
      <br/>
      1
      <br/>
      –
      <br/>
      Pro
      <br/>
      g
      <br/>
      le by
      <br/>
      ib
      <br/>
      ce
      <br/>
      ss
      <br/>
      by
      <br/>
      rdw
      <br/>
      are
     </th>
     <th>
      m
      <br/>
      s
      <br/>
      e
      <br/>
      min
      <br/>
      tio
      <br/>
      Pro
      <br/>
      tec
      <br/>
      ram
      <br/>
      g-
      <br/>
      n
      <br/>
      De
      <br/>
      DIS Bit
      <br/>
      US
      <br/>
      sc
      <br/>
      r
      <br/>
      EF
      <br/>
      E_
      <br/>
      WR
      <br/>
      _
      <br/>
      mb
      <br/>
      Nu
      <br/>
      er
     </th>
     <th>
      Chapter
      <br/>
      ip
      <br/>
      ion
      <br/>
      t
      <br/>
      4
     </th>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      C
      <br/>
      U
      <br/>
      R
      <br/>
      E_
      <br/>
      B
      <br/>
      O
      <br/>
      O
      <br/>
      T_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      R
      <br/>
      E
      <br/>
      V
      <br/>
      O
      <br/>
      K
      <br/>
      E
      <br/>
      0
     </td>
     <td>
      1
     </td>
     <td>
      N
     </td>
     <td>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      5
      <br/>
      b
      <br/>
      en
      <br/>
      a
     </td>
     <td>
      eFuse
      <br/>
      he
      <br/>
      he
      <br/>
      k
      <br/>
      he
      <br/>
      ke
      <br/>
      ing
      <br/>
      f
      <br/>
      irs
      <br/>
      Se
      <br/>
      Bo
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      rev
      <br/>
      o
      <br/>
      cu
      <br/>
      re
      <br/>
      o
      <br/>
      w
      <br/>
      r
      <br/>
      y
      <br/>
      le
      <br/>
      d.
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      C
      <br/>
      U
      <br/>
      R
      <br/>
      E_
      <br/>
      B
      <br/>
      O
      <br/>
      O
      <br/>
      T_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      R
      <br/>
      E
      <br/>
      V
      <br/>
      O
      <br/>
      K
      <br/>
      E
      <br/>
      1
     </td>
     <td>
      1
     </td>
     <td>
      N
     </td>
     <td>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      6
      <br/>
      en
      <br/>
      a
     </td>
     <td>
      Controller
      <br/>
      he
      <br/>
      he
      <br/>
      k
      <br/>
      he
      <br/>
      d
      <br/>
      ke
      <br/>
      ing
      <br/>
      Se
      <br/>
      Bo
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      rev
      <br/>
      o
      <br/>
      se
      <br/>
      co
      <br/>
      n
      <br/>
      cu
      <br/>
      re
      <br/>
      o
      <br/>
      w
      <br/>
      r
      <br/>
      y
      <br/>
      b
      <br/>
      le
      <br/>
      d.
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      C
      <br/>
      U
      <br/>
      R
      <br/>
      E_
      <br/>
      B
      <br/>
      O
      <br/>
      O
      <br/>
      T_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      R
      <br/>
      E
      <br/>
      V
      <br/>
      O
      <br/>
      K
      <br/>
      E
      <br/>
      2
     </td>
     <td>
      1
     </td>
     <td>
      N
     </td>
     <td>
      is
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      7
      <br/>
      b
      <br/>
      en
      <br/>
      a
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      k
      <br/>
      he
      <br/>
      h
      <br/>
      d
      <br/>
      ke
      <br/>
      ing
      <br/>
      ir
      <br/>
      Se
      <br/>
      Bo
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      r
      <br/>
      rev
      <br/>
      o
      <br/>
      cu
      <br/>
      re
      <br/>
      o
      <br/>
      w
      <br/>
      y
      <br/>
      (EFUSE)
      <br/>
      le
      <br/>
      d.
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      P
      <br/>
      U
      <br/>
      R
      <br/>
      P
      <br/>
      O
      <br/>
      S
      <br/>
      E_
      <br/>
      0
     </td>
     <td>
      4
     </td>
     <td>
      Y
     </td>
     <td>
      8
      <br/>
      Re
      <br/>
      res
     </td>
     <td>
      b
      <br/>
      Ke
      <br/>
      Ta
      <br/>
      4.
      <br/>
      3-
      <br/>
      en
      <br/>
      ur
      <br/>
      os
      <br/>
      se
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      O
      <br/>
      S
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      P
      <br/>
      U
      <br/>
      R
      <br/>
      P
      <br/>
      E_
      <br/>
      1
     </td>
     <td>
      4
     </td>
     <td>
      Y
     </td>
     <td>
      p
      <br/>
      9
      <br/>
      Re
      <br/>
      res
     </td>
     <td>
      le
      <br/>
      0
      <br/>
      2.
      <br/>
      ts
      <br/>
      p
      <br/>
      p
      <br/>
      e,
      <br/>
      e
      <br/>
      y
      <br/>
      b
      <br/>
      Ke
      <br/>
      Ta
      <br/>
      4.
      <br/>
      3-
      <br/>
      en
      <br/>
      ur
      <br/>
      os
      <br/>
      se
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      O
      <br/>
      S
      <br/>
      2
      <br/>
      F
      <br/>
      U
      <br/>
      K
      <br/>
      E
      <br/>
      P
      <br/>
      U
      <br/>
      R
      <br/>
      P
     </td>
     <td>
      4
     </td>
     <td>
      Y
     </td>
     <td>
      p
      <br/>
      1
      <br/>
      0
      <br/>
      Re
     </td>
     <td>
      le
      <br/>
      1
      <br/>
      2.
      <br/>
      ts
      <br/>
      p
      <br/>
      p
      <br/>
      e,
      <br/>
      e
      <br/>
      y
      <br/>
      b
      <br/>
      Ke
      <br/>
      Ta
      <br/>
      4.
      <br/>
      3-
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      E_
      <br/>
      Y_
      <br/>
      E_
      <br/>
      S
      <br/>
      O
      <br/>
      S
      <br/>
      3
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      K
      <br/>
      E
      <br/>
      P
      <br/>
      U
      <br/>
      R
      <br/>
      P
     </td>
     <td>
      4
     </td>
     <td>
      Y
     </td>
     <td>
      p
      <br/>
      res
      <br/>
      1
      <br/>
      Re
     </td>
     <td>
      le
      <br/>
      2
      <br/>
      2.
      <br/>
      ts
      <br/>
      en
      <br/>
      y
      <br/>
      p
      <br/>
      ur
      <br/>
      p
      <br/>
      os
      <br/>
      e,
      <br/>
      se
      <br/>
      e
      <br/>
      b
      <br/>
      Ke
      <br/>
      Ta
      <br/>
      4.
      <br/>
      3-
     </td>
    </tr>
    <tr>
     <td>
      E_
      <br/>
      Y_
      <br/>
      E_
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      1
      <br/>
      p
      <br/>
      res
     </td>
     <td>
      le
      <br/>
      3
      <br/>
      2.
      <br/>
      ts
      <br/>
      en
      <br/>
      y
      <br/>
      p
      <br/>
      ur
      <br/>
      p
      <br/>
      os
      <br/>
      e,
      <br/>
      se
      <br/>
      e
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      O
      <br/>
      S
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      P
      <br/>
      U
      <br/>
      R
      <br/>
      P
      <br/>
      E_
      <br/>
      4
      <br/>
      E
     </td>
     <td>
      4
     </td>
     <td>
      Y
     </td>
     <td>
      1
      <br/>
      2
      <br/>
      Re
      <br/>
      p
      <br/>
      res
     </td>
     <td>
      b
      <br/>
      le
      <br/>
      Ke
      <br/>
      4
      <br/>
      Ta
      <br/>
      4.
      <br/>
      3-
      <br/>
      2.
      <br/>
      ts
      <br/>
      en
      <br/>
      y
      <br/>
      p
      <br/>
      ur
      <br/>
      p
      <br/>
      os
      <br/>
      e,
      <br/>
      se
      <br/>
      e
     </td>
    </tr>
    <tr>
     <td>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      P
      <br/>
      U
      <br/>
      R
      <br/>
      P
      <br/>
      O
      <br/>
      S
      <br/>
      E_
      <br/>
      5
     </td>
     <td>
      4
     </td>
     <td>
      Y
     </td>
     <td>
      Re
      <br/>
      1
      <br/>
      3
      <br/>
      p
      <br/>
      res
     </td>
     <td>
      Ke
      <br/>
      Ta
      <br/>
      b
      <br/>
      le
      <br/>
      5
      <br/>
      4.
      <br/>
      3-
      <br/>
      2.
      <br/>
      ts
      <br/>
      en
      <br/>
      y
      <br/>
      p
      <br/>
      ur
      <br/>
      p
      <br/>
      os
      <br/>
      e,
      <br/>
      se
      <br/>
      e
     </td>
    </tr>
    <tr>
     <td>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      C
      <br/>
      U
      <br/>
      R
      <br/>
      E_
      <br/>
      B
      <br/>
      O
      <br/>
      O
      <br/>
      T_
      <br/>
      E
      <br/>
      N
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      C
      <br/>
      U
      <br/>
      R
      <br/>
      E_
      <br/>
      B
      <br/>
      O
      <br/>
      O
      <br/>
      T_
      <br/>
      A
      <br/>
      G
      <br/>
      G
      <br/>
      R
      <br/>
      E
      <br/>
      S
      <br/>
      S
      <br/>
      I
      <br/>
      V
      <br/>
      E_
      <br/>
      R
      <br/>
      E
      <br/>
      V
      <br/>
      O
      <br/>
      K
      <br/>
      E
     </td>
     <td>
      1
      <br/>
      1
     </td>
     <td>
      N
      <br/>
      N
     </td>
     <td>
      Re
      <br/>
      1
      <br/>
      5
      <br/>
      p
      <br/>
      res
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      1
      <br/>
      6
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      Se
      <br/>
      Bo
      <br/>
      is
      <br/>
      b
      <br/>
      le
      <br/>
      d.
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      cu
      <br/>
      re
      <br/>
      o
      <br/>
      en
      <br/>
      a
      <br/>
      he
      <br/>
      he
      <br/>
      ive
      <br/>
      ion
      <br/>
      f
      <br/>
      Se
      <br/>
      Bo
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      ag
      <br/>
      g
      <br/>
      res
      <br/>
      s
      <br/>
      rev
      <br/>
      oc
      <br/>
      a
      <br/>
      o
      <br/>
      cu
      <br/>
      re
      <br/>
      o
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      is
      <br/>
      en
      <br/>
      a
     </td>
     <td>
      b
      <br/>
      le
      <br/>
      d.
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      F
      <br/>
      L
      <br/>
      A
      <br/>
      S
      <br/>
      H_
      <br/>
      T
      <br/>
      P
      <br/>
      U
      <br/>
      W
     </td>
     <td>
      4
     </td>
     <td>
      N
     </td>
     <td>
      Re
      <br/>
      1
      <br/>
      8
      <br/>
      p
     </td>
     <td colspan="2">
      he
      <br/>
      f
      <br/>
      la
      <br/>
      h
      <br/>
      i
      <br/>
      ing
      <br/>
      im
      <br/>
      f
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      t
      <br/>
      te
      <br/>
      res
      <br/>
      en
      <br/>
      s
      <br/>
      wa
      <br/>
      e
      <br/>
      a
      <br/>
      r
      <br/>
      p
      <br/>
      ow
      <br/>
      er-
      <br/>
      up
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      D
      <br/>
      I
      <br/>
      S_
      <br/>
      D
      <br/>
      O
      <br/>
      W
      <br/>
      N
      <br/>
      L
      <br/>
      O
      <br/>
      A
      <br/>
      D_
      <br/>
      M
      <br/>
      O
      <br/>
      D
      <br/>
      E
     </td>
     <td>
      1
     </td>
     <td>
      N
     </td>
     <td>
      8
      <br/>
      Re
      <br/>
      1
      <br/>
      p
      <br/>
      res
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      l
      <br/>
      l
      <br/>
      do
      <br/>
      loa
      <br/>
      d
      <br/>
      de
      <br/>
      d
      <br/>
      isa
      <br/>
      b
      <br/>
      le
      <br/>
      d.
      <br/>
      ts
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      a
      <br/>
      wn
      <br/>
      mo
      <br/>
      s
      <br/>
      are
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      U
      <br/>
      S
      <br/>
      B_
      <br/>
      P
      <br/>
      R
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      C
      <br/>
      H
      <br/>
      A
      <br/>
      N
      <br/>
      N
      <br/>
      E
      <br/>
      L
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      D
      <br/>
      I
      <br/>
      S_
      <br/>
      U
      <br/>
      S
      <br/>
      B_
      <br/>
      S
      <br/>
      E
      <br/>
      R
      <br/>
      I
      <br/>
      A
      <br/>
      L_
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G_
      <br/>
      D
      <br/>
      O
      <br/>
      W
      <br/>
      N
      <br/>
      L
      <br/>
      O
      <br/>
      A
      <br/>
      D_
      <br/>
      M
      <br/>
      O
      <br/>
      D
      <br/>
      E
     </td>
     <td>
      1
      <br/>
      1
     </td>
     <td>
      N
      <br/>
      N
     </td>
     <td>
      8
      <br/>
      Re
      <br/>
      1
      <br/>
      p
      <br/>
      res
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      8
      <br/>
      1
     </td>
     <td>
      he
      <br/>
      he
      <br/>
      d
      <br/>
      b
      <br/>
      le
      <br/>
      d.
      <br/>
      U
      <br/>
      S
      <br/>
      B
      <br/>
      in
      <br/>
      ing
      <br/>
      is
      <br/>
      isa
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      p
      <br/>
      r
      <br/>
      he
      <br/>
      he
      <br/>
      he
      <br/>
      l-
      <br/>
      do
      <br/>
      loa
      <br/>
      d
      <br/>
      U
      <br/>
      S
      <br/>
      B-
      <br/>
      Se
      <br/>
      ia
      <br/>
      J
      <br/>
      T
      <br/>
      A
      <br/>
      G
      <br/>
      fu
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      wn
      <br/>
      nc
      <br/>
      w
      <br/>
      r
      <br/>
      r
      <br/>
      -
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      E
      <br/>
      N
      <br/>
      A
      <br/>
      B
      <br/>
      L
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      C
      <br/>
      U
      <br/>
      R
      <br/>
      I
      <br/>
      T
      <br/>
      Y_
      <br/>
      D
      <br/>
      O
      <br/>
      W
      <br/>
      N
      <br/>
      L
      <br/>
      O
      <br/>
      A
      <br/>
      D
     </td>
     <td>
      1
     </td>
     <td>
      N
     </td>
     <td>
      ion
      <br/>
      t
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      8
      <br/>
      1
     </td>
     <td>
      d
      <br/>
      b
      <br/>
      le
      <br/>
      d.
      <br/>
      is
      <br/>
      isa
      <br/>
      he
      <br/>
      he
      <br/>
      do
      <br/>
      loa
      <br/>
      d
      <br/>
      de
      <br/>
      U
      <br/>
      A
      <br/>
      R
      <br/>
      T
      <br/>
      is
      <br/>
      ts
      <br/>
      t
      <br/>
      en
      <br/>
      se
      <br/>
      cu
      <br/>
      re
      <br/>
      wn
      <br/>
      mo
      <br/>
      en
      <br/>
      w
      <br/>
      r
      <br/>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      b
      <br/>
      le
      <br/>
      d.
      <br/>
      a
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      U
      <br/>
      A
      <br/>
      R
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      O
      <br/>
      L
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      F
      <br/>
      O
      <br/>
      R
      <br/>
      C
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      N
      <br/>
      D_
      <br/>
      R
      <br/>
      E
      <br/>
      S
      <br/>
      U
      <br/>
      M
      <br/>
      E
     </td>
     <td>
      2
      <br/>
      1
     </td>
     <td>
      N
      <br/>
      N
     </td>
     <td>
      8
      <br/>
      Re
      <br/>
      1
      <br/>
      p
      <br/>
      res
      <br/>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      8
      <br/>
      1
     </td>
     <td>
      he
      <br/>
      bo
      <br/>
      de
      <br/>
      U
      <br/>
      A
      <br/>
      R
      <br/>
      T
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      tp
      <br/>
      t
      <br/>
      en
      <br/>
      o
      <br/>
      me
      <br/>
      ss
      <br/>
      ag
      <br/>
      e
      <br/>
      ou
      <br/>
      mo
      <br/>
      u
      <br/>
      he
      <br/>
      he
      <br/>
      de
      <br/>
      d
      <br/>
      d
      <br/>
      R
      <br/>
      O
      <br/>
      M
      <br/>
      is
      <br/>
      fo
      <br/>
      ts
      <br/>
      t
      <br/>
      to
      <br/>
      en
      <br/>
      r
      <br/>
      co
      <br/>
      rce
      <br/>
      se
      <br/>
      n
      <br/>
      a
      <br/>
      res
      <br/>
      um
      <br/>
      e
      <br/>
      w
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Espressif Systems
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Espressif
     </td>
    </tr>
    <tr>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Systems
     </td>
    </tr>
    <tr>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Bit Wi
      <br/>
      Pa
      <br/>
      te
      <br/>
      ram
      <br/>
      e
      <br/>
      rs
      <br/>
      dt
     </th>
     <th>
      le
      <br/>
      Ac
      <br/>
      h
     </th>
     <th>
      'd
      <br/>
      1
      <br/>
      –
      <br/>
      Pro
      <br/>
      g
      <br/>
      le by
      <br/>
      ib
      <br/>
      ce
      <br/>
      ss
      <br/>
      by
      <br/>
      Ha
      <br/>
      rdw
      <br/>
      are
     </th>
     <th>
      m
      <br/>
      s
      <br/>
      e
      <br/>
      min
      <br/>
      tio
      <br/>
      Pro
      <br/>
      tec
      <br/>
      ram
      <br/>
      g-
      <br/>
      n
      <br/>
      De
      <br/>
      DIS Bit
      <br/>
      US
      <br/>
      sc
      <br/>
      r
      <br/>
      EF
      <br/>
      E_
      <br/>
      WR
      <br/>
      _
      <br/>
      mb
      <br/>
      Nu
      <br/>
      er
     </th>
     <th>
      Chapter
      <br/>
      ip
      <br/>
      ion
      <br/>
      t
      <br/>
      4
     </th>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      C
      <br/>
      U
      <br/>
      R
      <br/>
      E_
      <br/>
      V
      <br/>
      E
      <br/>
      R
      <br/>
      S
      <br/>
      I
      <br/>
      O
      <br/>
      N
      <br/>
      1
     </td>
     <td>
      6
     </td>
     <td>
      N
     </td>
     <td>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      8
      <br/>
      1
      <br/>
      tu
      <br/>
      re
     </td>
     <td>
      eFuse
      <br/>
      he
      <br/>
      d
      <br/>
      by
      <br/>
      l
      <br/>
      l
      <br/>
      ba
      <br/>
      k
      <br/>
      ion
      <br/>
      E
      <br/>
      S
      <br/>
      P-
      <br/>
      I
      <br/>
      D
      <br/>
      F
      <br/>
      i-ro
      <br/>
      fe
      <br/>
      ts
      <br/>
      t
      <br/>
      t
      <br/>
      en
      <br/>
      ve
      <br/>
      rs
      <br/>
      us
      <br/>
      e
      <br/>
      an
      <br/>
      c
      <br/>
      a
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      E
      <br/>
      R
      <br/>
      R_
      <br/>
      R
      <br/>
      S
      <br/>
      T_
      <br/>
      E
      <br/>
      N
      <br/>
      A
      <br/>
      B
      <br/>
      L
      <br/>
      E
     </td>
     <td>
      1
     </td>
     <td>
      N
     </td>
     <td>
      Re
      <br/>
      p
      <br/>
      res
      <br/>
      9
      <br/>
      1
      <br/>
      is
      <br/>
      te
      <br/>
      reg
     </td>
     <td>
      Controller
      <br/>
      he
      <br/>
      he
      <br/>
      he
      <br/>
      k
      <br/>
      d
      <br/>
      B
      <br/>
      L
      <br/>
      O
      <br/>
      C
      <br/>
      K
      <br/>
      0
      <br/>
      ts
      <br/>
      t
      <br/>
      to
      <br/>
      to
      <br/>
      en
      <br/>
      us
      <br/>
      e
      <br/>
      c
      <br/>
      c
      <br/>
      er
      <br/>
      ro
      <br/>
      rec
      <br/>
      or
      <br/>
      w
      <br/>
      r
      <br/>
      r
      <br/>
      rs.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      (EFUSE)
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Table 4.3-2 lists all key purpose and their values. Setting the eFuse parameter EFUSE_KEY_PURPOSE_
   <i>
    n
   </i>
   declares the purpose of KEY
   <i>
    n
   </i>
   (
   <i>
    n
   </i>
   : 0 ~ 5).
  </p>
  <span id="page-103-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Table 4.3-2. Secure Key Purpose Values
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Key
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Purpose
     </td>
     <td>
      Purposes
     </td>
    </tr>
    <tr>
     <td>
      Values
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      0
      <br/>
      1
     </td>
     <td>
      User purposes
      <br/>
      Reserved
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      Reserved
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      Reserved
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
      XTS_AES_128_KEY (flash/SRAM encryption and decryption)
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      HMAC Downstream mode (both JTAG and DS)
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      JTAG in HMAC Downstream mode
     </td>
    </tr>
    <tr>
     <td>
      7
     </td>
     <td>
      Digital Signature peripheral in HMAC Downstream mode
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
      HMAC Upstream mode
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
      SECURE_BOOT_DIGEST0 (secure boot key digest)
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   <span id="page-103-1">
   </span>
   Table 4.3-2. Secure Key Purpose Values
  </p>
  <p block-type="Text">
   Table 4.3-3 provides the details of parameters in BLOCK1 ~ BLOCK10.
  </p>
  <span id="page-104-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Espressif
      <br/>
      Systems
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      O
      <br/>
      C
      <br/>
      K
     </th>
     <th>
      Pa
      <br/>
      B
      <br/>
      i
      <br/>
      te
      <br/>
      ram
      <br/>
      e
      <br/>
      rs
     </th>
     <th>
      Ac
      <br/>
      ce
      <br/>
      W
      <br/>
      i
      <br/>
      d
      <br/>
      h
      <br/>
      t
      <br/>
      t
      <br/>
      Ha
     </th>
     <th>
      ite
      <br/>
      Wr
      <br/>
      le by
      <br/>
      ib
      <br/>
      ss
      <br/>
      US
      <br/>
      EF
      <br/>
      rdw
      <br/>
      are
     </th>
     <th>
      tio
      <br/>
      by
      <br/>
      d
      <br/>
      Pro
      <br/>
      tec
      <br/>
      Re
      <br/>
      n
      <br/>
      a
      <br/>
      DIS Bit
      <br/>
      by
      <br/>
      US
      <br/>
      E_
      <br/>
      WR
      <br/>
      EF
      <br/>
      _
      <br/>
      Nu
      <br/>
      mb
      <br/>
      er
     </th>
     <th>
      tio
      <br/>
      Pro
      <br/>
      tec
      <br/>
      n
      <br/>
      De
      <br/>
      ip
      <br/>
      DIS Bit
      <br/>
      sc
      <br/>
      r
      <br/>
      E_
      <br/>
      RD
      <br/>
      _
      <br/>
      Nu
      <br/>
      mb
      <br/>
      er
     </th>
     <th>
      ion
      <br/>
      t
     </th>
    </tr>
    <tr>
     <td>
      O
      <br/>
      C
      <br/>
      K
      <br/>
      1
     </td>
     <td>
      S
      <br/>
      C
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      M
      <br/>
      A
     </td>
     <td>
      4
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      /
      <br/>
      d
      <br/>
      N
      <br/>
      M
      <br/>
      A
      <br/>
      a
     </td>
     <td>
      dr
      <br/>
      es
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      S
      <br/>
      S
      <br/>
      [
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      P
      <br/>
      I_
      <br/>
      P
      <br/>
      A
      <br/>
      D_
     </td>
     <td>
      8
      <br/>
      ]
      <br/>
      0:
      <br/>
      5
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      C
      <br/>
      A
      <br/>
      /
      <br/>
      C
      <br/>
      N
      <br/>
      L
     </td>
     <td>
      s
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      C
      <br/>
      O
      <br/>
      G
      <br/>
      [
      <br/>
      N
      <br/>
      F
      <br/>
      I
      <br/>
      U
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      ]
      <br/>
      6:
      <br/>
      1
      <br/>
      1
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      K
      <br/>
      (
      <br/>
      )
      <br/>
      /
      <br/>
      N
      <br/>
      D
      <br/>
      1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [
      <br/>
      1
     </td>
     <td>
      ]
      <br/>
      2:
      <br/>
      1
      <br/>
      7
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      Q
      <br/>
      A
      <br/>
      (
      <br/>
      )
      <br/>
      /
      <br/>
      0
      <br/>
      N
      <br/>
      D
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [
      <br/>
      1
     </td>
     <td>
      ]
      <br/>
      8:
      <br/>
      2
      <br/>
      3
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      D
      <br/>
      /
      <br/>
      N
      <br/>
      C
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [
      <br/>
      2
     </td>
     <td>
      ]
      <br/>
      2
      <br/>
      9
      <br/>
      4:
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      S
      <br/>
      (
      <br/>
      /
      <br/>
      N
      <br/>
      H
      <br/>
      D
      <br/>
      3
     </td>
     <td>
      )
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [
      <br/>
      3
     </td>
     <td>
      ]
      <br/>
      0:
      <br/>
      3
      <br/>
      5
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      D
      <br/>
      (
      <br/>
      /
      <br/>
      N
      <br/>
      W
      <br/>
      D
      <br/>
      2
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [
      <br/>
      3
     </td>
     <td>
      ]
      <br/>
      6:
      <br/>
      4
      <br/>
      1
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      P
      <br/>
      /
      <br/>
      N
      <br/>
      D
      <br/>
      Q
     </td>
     <td>
      )
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [
      <br/>
      4
     </td>
     <td>
      ]
      <br/>
      2:
      <br/>
      4
      <br/>
      7
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      S
      <br/>
      /
      <br/>
      N
      <br/>
      D
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [
      <br/>
      4
     </td>
     <td>
      ]
      <br/>
      8:
      <br/>
      3
      <br/>
      5
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      4
      <br/>
      /
      <br/>
      N
      <br/>
      D
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      5
     </td>
     <td>
      9
      <br/>
      4:
      <br/>
      5
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      5
      <br/>
      /
      <br/>
      N
      <br/>
      D
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [
      <br/>
      6
     </td>
     <td>
      ]
      <br/>
      6
      <br/>
      0:
      <br/>
      5
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      6
      <br/>
      /
      <br/>
      N
      <br/>
      D
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      E
     </td>
     <td>
      [
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      S
      <br/>
      Y
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      P
      <br/>
      A
      <br/>
      R
      <br/>
      T
      <br/>
      0
     </td>
     <td>
      ]
      <br/>
      7
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      A
      <br/>
      7
      <br/>
      /
      <br/>
      N
      <br/>
      te
     </td>
     <td>
      da
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      E_
      <br/>
      S_
      <br/>
      A_
     </td>
     <td>
      8
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      A
      <br/>
      Sy
      <br/>
      s
     </td>
     <td>
      ta
      <br/>
      m
     </td>
    </tr>
    <tr>
     <td>
      K
      <br/>
      2
      <br/>
      E
     </td>
     <td>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      S
      <br/>
      Y
      <br/>
      S_
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      A_
      <br/>
      P
      <br/>
      A
      <br/>
      R
      <br/>
      T
      <br/>
      1
      <br/>
      2
     </td>
     <td>
      6
      <br/>
      5
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      1
     </td>
     <td>
      /
      <br/>
      N
      <br/>
      A
      <br/>
      Sy
      <br/>
      te
      <br/>
      s
     </td>
     <td>
      da
      <br/>
      ta
      <br/>
      m
     </td>
    </tr>
    <tr>
     <td>
      K
      <br/>
      3
     </td>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      U
      <br/>
      S
      <br/>
      R_
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      A
      <br/>
      2
     </td>
     <td>
      6
      <br/>
      5
     </td>
     <td>
      N
     </td>
     <td>
      2
      <br/>
      2
     </td>
     <td>
      /
      <br/>
      da
      <br/>
      N
      <br/>
      A
      <br/>
      Us
      <br/>
      er
     </td>
     <td>
      ta
     </td>
    </tr>
    <tr>
     <td>
      K
      <br/>
      4
     </td>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      0_
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      A
      <br/>
      2
     </td>
     <td>
      6
      <br/>
      5
     </td>
     <td>
      Y
     </td>
     <td>
      2
      <br/>
      3
     </td>
     <td>
      0
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      0
      <br/>
      or
     </td>
     <td>
      da
      <br/>
      ta
      <br/>
      us
      <br/>
      er
     </td>
    </tr>
    <tr>
     <td>
      K
      <br/>
      5
     </td>
     <td>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      1_
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      A
      <br/>
      2
     </td>
     <td>
      6
      <br/>
      5
     </td>
     <td>
      Y
     </td>
     <td>
      2
      <br/>
      4
     </td>
     <td>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      1
      <br/>
      1
      <br/>
      or
     </td>
     <td>
      da
      <br/>
      ta
      <br/>
      us
      <br/>
      er
     </td>
    </tr>
    <tr>
     <td>
      6
      <br/>
      K
     </td>
     <td>
      S
      <br/>
      2_
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      A
      <br/>
      2
     </td>
     <td>
      5
      <br/>
      6
     </td>
     <td>
      Y
     </td>
     <td>
      2
      <br/>
      5
     </td>
     <td>
      2
      <br/>
      2
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      or
     </td>
     <td>
      da
      <br/>
      ta
      <br/>
      us
      <br/>
      er
     </td>
    </tr>
    <tr>
     <td>
      K
      <br/>
      7
     </td>
     <td>
      S
      <br/>
      3_
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      A
      <br/>
      2
     </td>
     <td>
      5
      <br/>
      6
     </td>
     <td>
      Y
     </td>
     <td>
      2
      <br/>
      6
     </td>
     <td>
      3
      <br/>
      3
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      or
     </td>
     <td>
      da
      <br/>
      ta
      <br/>
      us
      <br/>
      er
     </td>
    </tr>
    <tr>
     <td>
      8
      <br/>
      K
     </td>
     <td>
      S
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      4_
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      A
      <br/>
      2
     </td>
     <td>
      5
      <br/>
      6
     </td>
     <td>
      Y
     </td>
     <td>
      2
      <br/>
      7
     </td>
     <td>
      4
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      4
      <br/>
      or
     </td>
     <td>
      da
      <br/>
      ta
      <br/>
      us
      <br/>
      er
     </td>
    </tr>
    <tr>
     <td>
      9
      <br/>
      K
     </td>
     <td>
      S
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      E_
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      5_
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      A
      <br/>
      2
     </td>
     <td>
      5
      <br/>
      6
     </td>
     <td>
      Y
     </td>
     <td>
      2
      <br/>
      8
     </td>
     <td>
      5
      <br/>
      K
      <br/>
      E
      <br/>
      Y
      <br/>
      5
      <br/>
      or
     </td>
     <td>
      da
      <br/>
      ta
      <br/>
      us
      <br/>
      er
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Among these blocks, BLOCK4 ~ 9 stores KEY0 ~ 5, respectively. Up to six 256-bit keys can be written into eFuse. Whenever a key is written, its purpose value should also be written (see table 4.3-2). For example, when a key for the JTAG function in HMAC Downstream mode is written to KEY3 (i.e., BLOCK7), its key purpose value 6 should also be written to EFUSE_KEY_PURPOSE_3.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   Do not program the XTS-AES key into the KEY5 block, i.e., BLOCK9. Otherwise, the key may be unreadable. Instead, program it into the preceding blocks, i.e., BLOCK4 ~ BLOCK8. The last block, BLOCK9, is used to program other keys.
  </p>
  <p block-type="Text">
   BLOCK1 ~ BLOCK10 use the RS coding scheme, so there are some restrictions on writing to these parameters. For more detailed information, please refer to Section 4.3.1.3 and Section 4.3.2.
  </p>
  <h4>
   4.3.1.1 EFUSE_WR_DIS
  </h4>
  <p block-type="Text">
   <span id="page-105-0">
   </span>
   Parameter EFUSE_WR_DIS determines whether indivi
   <a href="#page-105-2">
    dual eF
   </a>
   use paramet
   <a href="#page-106-0">
    ers are
   </a>
   write-protected. After EFUSE_WR_DIS
   <a href="#page-118-1">
    has been pro
   </a>
   grammed, execute an eFuse read operation so the new values would take effect.
  </p>
  <p block-type="Text">
   Column "
   <a href="#page-118-1">
    Write Protection b
   </a>
   y EFUSE_WR_DIS Bit Number" in Table 4.3-1 and Table 4.3-3 list the specific bits in
   <a href="#page-118-1">
    EFUSE_WR_DIS
   </a>
   that disable writing.
  </p>
  <p block-type="Text">
   When the write protection bit of a parameter is set to 0, it means that this parameter is not write-protected and can be programmed, unless
   <a href="#page-118-1">
    it has been prog
   </a>
   rammed before.
  </p>
  <p block-type="Text">
   <a href="#page-118-1">
    When the write p
   </a>
   rotection bit of a parameter is set to 1, it means that this parameter is write-protected and none of its bits can be modified, with non-programmed bits always remaining 0 while programmed bits always remain 1.
  </p>
  <h1>
   4.3.1.2 EFUSE_RD_DIS
  </h1>
  <p block-type="Text">
   <span id="page-105-1">
   </span>
   Only the eFuse blocks in BLOCK4 ~ BLOCK10 can be individually read protected to prevent any access from outside the chip, as shown in column "Read Protection by EFUSE_RD_DIS Bit Number" of Table 4.3-3. After EFUSE_RD_DIS
   <a href="#page-119-1">
    has been pro
   </a>
   grammed, execute an eFuse read operation so the new values would take effect.
  </p>
  <p block-type="Text">
   If the corresponding EFUSE_RD_DIS bit is 0, then the eFu
   <a href="#page-119-1">
    se block can be
   </a>
   read by users; if the
   <a href="#page-104-0">
    corres
   </a>
   ponding
   <a href="#page-119-1">
    EFUSE_RD_DIS
   </a>
   bit is 1, then the parameter controlled by this bit is user protected.
  </p>
  <p block-type="Text">
   Other parameters that are not in BLOCK4 ~ BLOCK10 can always be read by users.
  </p>
  <p block-type="Text">
   <a href="#page-119-1">
    When BLOCK4
   </a>
   ~ BL
   <a href="#page-119-1">
    OCK10 are set to
   </a>
   be read-protected, the data in these blocks are not readable by users, but they can still be read by hardware cryptography modules, if the EFUSE_KEY_PURPOSE_
   <i>
    n
   </i>
   bit is set accordingly.
  </p>
  <h4>
   4.3.1.3 Data Storage
  </h4>
  <p block-type="Text">
   <span id="page-105-2">
   </span>
   Internally, eFuses use hardware encoding schemes to protect data from corruption, which are invisible for users.
  </p>
  <p block-type="Text">
   All BLOCK0 parameters except for EFUSE_WR_DIS are stored with four backups, meaning each bit is stored four times. This backup scheme is not visible to users.
  </p>
  <p block-type="Text">
   Espressif Systems 106
  </p>
  <p>
   BLOCK1 ~ BLOCK10 use RS (44, 32) coding scheme that supports up to 6 bytes of automatic error correction. The primitive polynomial of RS (44, 32) is
   <i>
    p
   </i>
   (
   <i>
    x
   </i>
   ) =
   <i>
    x
   </i>
   <sup>
    8
   </sup>
   +
   <i>
    x
   </i>
   <sup>
    4
   </sup>
   +
   <i>
    x
   </i>
   <sup>
    3
   </sup>
   +
   <i>
    x
   </i>
   <sup>
    2
   </sup>
   + 1.
  </p>
  <p>
   <span id="page-106-1">
   </span>
   <img src="_page_106_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 4.3-1. Shift Register Circuit (first 32 output)
  </p>
  <p>
   <span id="page-106-2">
   </span>
   <img src="_page_106_Figure_3.jpeg"/>
  </p>
  <p>
   Figure 4.3-2. Shift Register Circuit (last 12 output)
  </p>
  <p block-type="Text">
   The shift register circuit shown in Figure 4.3-1 and 4.3-2 processes 32 data bytes using RS (44, 32). This coding scheme encodes 32 bytes of data into 44 bytes:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bytes [0:31] are the data bytes itself
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bytes [32:43] are the encoded par
     <a href="#page-106-1">
      ity by
     </a>
     tes
     <a href="#page-106-2">
      stored
     </a>
     in 8-bit flip-flops DFF1, DFF2, ..., DFF12 (gf_mul_n, where n is an integer, is the result of multiplying a byte of data ...)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   After that, the hardware burns into eFuse the 44-byte codeword consisting of the data bytes followed by the parity bytes.
  </p>
  <p block-type="Text">
   When the eFuse block is read back, the eFuse controller automatically decodes the codeword and applies error correction if needed.
  </p>
  <p block-type="Text">
   Because the RS check codes are generated on the entire 256-bit eFuse block, each block can only be written once.
  </p>
  <h1>
   4.3.2 Programming of Parameters
  </h1>
  <p block-type="Text">
   <span id="page-106-0">
   </span>
   The eFuse controller can only program eFuse parameters in one block at a time. BLOCK0 ~ BLOCK10 share the same address range to store the parameters to be programmed. Configure parameter EFUSE_BLK_NUM
  </p>
  <p block-type="Text">
   Espressif Systems 107
  </p>
  <p block-type="Text">
   ESP32-C3 TRM (Version 1.3)
  </p>
  <p block-type="Text">
   to indicate which block should be programmed.
  </p>
  <h4>
   Programming BLOCK0
  </h4>
  <p block-type="Text">
   When EFUSE_BLK_NUM is set to 0, BLOCK0 will be programmed. Register EFUSE_PGM_DATA0_REG stores EFUSE_WR_DIS. Registers EFUSE_PGM_DATA1_REG ~ EFUSE_PGM_DATA5_REG store the information of parameters to be programmed. Note that 9 BLOCK0 bits are readable but useless to users and must always be set to
   <a href="#page-153-0">
    0 in the programmi
   </a>
   ng registers. The specific bits are:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-118-1">
      EFUSE_PG
     </a>
     M_DATA1
     <a href="#page-115-1">
      _REG[24:21]
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     EFUSE_PGM_DATA1_REG[31:27]
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Data in registers
   <a href="#page-115-1">
    EFUSE_PGM_D
   </a>
   ATA6_REG ~ EFUSE_PGM_DATA7_REG and EFUSE_PGM_CHECK_VALUE0_REG ~ EFUSE_PGM_CHECK_VALUE2_REG are ignored when programming BLOC
   <a href="#page-115-1">
    K0.
   </a>
  </p>
  <h4>
   Programming B
   <a href="#page-116-0">
    LOCK1
   </a>
  </h4>
  <p block-type="Text">
   When
   <a href="#page-117-0">
    EFUSE_BLK_NUM
   </a>
   is set to 1, registers
   <a href="#page-118-2">
    EFUSE_PGM_DATA0_REG
   </a>
   ~ EFUSE_PGM_DATA5_REG store the BLOCK1 parameters to be programmed. Registers EFUSE_PGM_CHECK_VALUE0_REG ~ EFUSE_PGM_DATA2_REG store the corresponding RS check codes. Data in registers EFUS
   <a href="#page-153-0">
    E_PGM_DATA6_REG
   </a>
   ~ EFUSE_PGM_DATA7_REG
   <a href="#page-115-2">
    are ignored whe
   </a>
   n
   <a href="#page-116-1">
    programming BLOCK1, and
   </a>
   the RS check codes will be calculated with these bits all
   <a href="#page-117-0">
    treated as 0.
   </a>
  </p>
  <h4>
   <a href="#page-115-3">
    Programming BLOCK2
   </a>
   ~ 10
  </h4>
  <p block-type="Text">
   When
   <a href="#page-116-0">
    EFUSE_BLK_NUM
   </a>
   is set to 2 ~
   <a href="#page-117-1">
    10, registers
   </a>
  </p>
  <p block-type="Text">
   EFUSE_PGM_DATA0_REG ~ EFUSE_PGM_DATA7_REG store the parameters to be programmed to this block. Registers EFUSE_PGM_CHECK_VALUE0_REG ~ EFUSE_PGM_CHECK_VALUE2_REG store the corresponding RS ch
   <a href="#page-153-0">
    eck codes.
   </a>
  </p>
  <h4>
   <a href="#page-115-2">
    Programming process
   </a>
  </h4>
  <p block-type="Text">
   The proc
   <a href="#page-117-0">
    ess of programming parameters is as
   </a>
   f
   <a href="#page-118-2">
    ollows:
   </a>
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. Configure the value of parameter EFUSE_BLK_NUM to determine the block to be programmed.
    </li>
    <li block-type="ListItem">
     2. Write parameters to be programmed to registers EFUSE_PGM_DATA0_REG ~ EFUSE_PGM_DATA7_REG and EFUSE_PGM_CHECK_VALUE0_REG ~ EFUSE_PGM_CHECK_VALUE2_REG.
    </li>
    <li block-type="ListItem">
     3. Make sure the eFuse programmi
     <a href="#page-153-0">
      ng voltage VDDQ is
     </a>
     configured correctly as described in Section 4.3.4.
    </li>
    <li block-type="ListItem">
     4. Configure the field
     <a href="#page-117-0">
      EFUSE_OP_CODE
     </a>
     of register
     <a href="#page-118-2">
      EFUSE_CONF_REG
     </a>
     to 0x5A5
     <a href="#page-117-1">
      A.
     </a>
    </li>
    <li block-type="ListItem">
     5. Configure the field EFUSE_PGM_CMD of register EFUSE_CMD_REG to 1.
    </li>
    <li block-type="ListItem">
     6. Poll register EFUSE
     <a href="#page-153-1">
      _CMD_REG
     </a>
     until it is 0x0, or
     <a href="#page-153-1">
      wait for a PGM_DON
     </a>
     E interrupt. For more information on how to identify a PGM/READ_DONE interrupt, please see the end of Section 4.3.3.
    </li>
    <li block-type="ListItem">
     7. Clear the parameters in
     <a href="#page-153-0">
      EFUSE_PGM_D
     </a>
     ATA0_REG ~
     <a href="#page-153-0">
      EFUSE_PGM_D
     </a>
     ATA7_REG and EFUSE_PG
     <a href="#page-153-0">
      M_CHECK_VALUE0_
     </a>
     REG ~ EFUSE_PGM_CHECK_VALUE2_REG.
    </li>
    <li block-type="ListItem">
     8. Trigger an eFuse read operation (see Section 4.3.3) to update eFuse registe
     <a href="#page-108-0">
      rs with
     </a>
     the new values.
    </li>
    <li block-type="ListItem">
     9.
     <a href="#page-117-0">
      Check error record registers. If the
     </a>
     <a href="#page-115-2">
      val
     </a>
     <a href="#page-118-2">
      ues read in error record registers are
     </a>
     <a href="#page-117-1">
      not
     </a>
     0, the programming process should be performed again following above steps 1 ~ 7. Please check the following error record registers for different eFuse blocks:
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK0: EFUSE_RD_REPEAT_ERR0_REG ~ EFUSE_RD_REPEAT_ERR4_REG
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK1: EFUSE_RD_RS_ERR0_REG[2:0], EFUSE_RD_RS_ERR0_REG[7]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK2:
     <a href="#page-146-0">
      EFUSE_RD_RS_ERR0_REG[6:4],
     </a>
     E
     <a href="#page-150-0">
      FUSE_RD_RS_ERR0_REG[11]
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK3:
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG
     </a>
     [10:8],
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG
     </a>
     [15]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK4:
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG[
     </a>
     14:12],
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_RE
     </a>
     G[19]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK5:
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG[
     </a>
     18:16],
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG
     </a>
     [23]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK6:
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG[
     </a>
     22:20],
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG
     </a>
     [27]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK7:
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG[
     </a>
     26:24],
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG
     </a>
     [31]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK8:
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR0_REG[
     </a>
     30:28],
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR1_REG[3
     </a>
     ]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK9:
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR1_REG[
     </a>
     2:0], EF
     <a href="#page-151-0">
      USE_RD_RS_ERR1_REG[2:0
     </a>
     ][7]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     BLOCK10:
     <a href="#page-151-0">
      EFUSE_RD_RS_ERR1_REG
     </a>
     [2:0][6:
     <a href="#page-152-0">
      4]
     </a>
    </li>
   </ul>
  </p>
  <h4>
   Limitations
  </h4>
  <p block-type="Text">
   In BLOCK0, each bit
   <a href="#page-152-0">
    can be programmed separa
   </a>
   tely. However, we recommend to minimize programming cycles and program all the bits of a parameter in one programming action. In addition, after all parameters controlled by a certain bit of EFUSE_WR_DIS are programmed, that bit should be immediately programmed. The programming of parameters controlled by a certain bit of EFUSE_WR_DIS, and the programming of the bit itself can even be completed at the same time. Repeated programming of already programmed bits is strictly forbidden, otherwise, progra
   <a href="#page-118-1">
    mming errors wil
   </a>
   l occur.
  </p>
  <p block-type="Text">
   BLOCK1 cannot be programmed by users as it has been prog
   <a href="#page-118-1">
    rammed at manu
   </a>
   facturing.
  </p>
  <p block-type="Text">
   BLOCK2 ~ 10 can only be programmed once. Repeated programming is not allowed.
  </p>
  <h1>
   4.3.3 User Read of Parameters
  </h1>
  <p block-type="Text">
   <span id="page-108-0">
   </span>
   Users cannot read eFuse bits directly. The eFuse Controller hardware reads all eFuse bits and stores the results to their corresponding registers in its memory space. Then, users can read eFuse bits by reading the registers that start with EFUSE_RD_. Details are provided in Table 4.3-4.
  </p>
  <span id="page-108-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      BLOCK
     </td>
     <td>
      Read Registers
     </td>
     <td>
      Registers When Programming This Block
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      EFUSE_RD_WR_DIS_REG
     </td>
     <td>
      EFUSE_PGM_DATA0_REG
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      EFUSE_RD_REPEAT_DATA0 ~ 4_REG
     </td>
     <td>
      EFUSE_PGM_DATA1 ~ 5_REG
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      EFUSE_RD_MAC_SPI_SYS_0 ~ 5_REG
     </td>
     <td>
      EFUSE_PGM_DATA0 ~ 5_REG
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      EFUSE_RD_SYS_DATA_PART1_0 ~ 7_REG
     </td>
     <td>
      EFUSE_PGM_DATA0 ~ 7_REG
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      EFUSE_RD_USR_DATA0 ~ 7_REG
     </td>
     <td>
      EFUSE_PGM_DATA0 ~ 7_REG
     </td>
    </tr>
    <tr>
     <td>
      4-9
     </td>
     <td>
      EFUSE_RD_KEYn_DATA0 ~ 7_REG (n: 0 ~ 5)
     </td>
     <td>
      EFUSE_PGM_DATA0 ~ 7_REG
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 4.3-4. Registers Information
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <h4>
   Updating eFuse read registers
  </h4>
  <p block-type="Text">
   The eFuse Controller reads internal eFuses to update corresponding registers. This read operation happens on system reset and can also be triggered manually by users as needed (e.g., if new eFuse values have been programmed). The process of triggering a read operation by users is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure the field EFUSE_OP_CODE in register EFUSE_CONF_REG to 0x5AA5.
    </li>
    <li block-type="ListItem">
     2. Configure the field EFUSE_READ_CMD in register EFUSE_CMD_REG to 1.
    </li>
    <li block-type="ListItem">
     3. Poll register EFUSE
     <a href="#page-153-1">
      _CMD_REG
     </a>
     until it is 0x0, or
     <a href="#page-153-1">
      wait for a READ_DO
     </a>
     NE interrupt. Information on how to identify a PGM/READ_DONE interrupt is provided below in this section.
    </li>
    <li block-type="ListItem">
     4. Read the values of
     <a href="#page-153-0">
      each parameter from
     </a>
     memory.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The eFuse read r
   <a href="#page-153-0">
    egisters will hold all
   </a>
   values until the next read operation.
  </p>
  <h4>
   Error detection
  </h4>
  <p block-type="Text">
   Error record registers allow users to detect if there are any inconsistencies in the stored backup eFuse parameters.
  </p>
  <p block-type="Text">
   Registers EFUSE_RD_REPEAT_ERR0 ~ 3_REG indicate if there are any errors of programmed parameters (except for EFUSE_WR_DIS) in BLOCK0 (value 1 indicates an error is detected, and the bit becomes invalid; value 0 indicates no error).
  </p>
  <p block-type="Text">
   Registers EFUSE_RD_RS_ERR0 ~ 1_REG store the number of corrected bytes as well as the result of RS decoding
   <a href="#page-118-1">
    during eFuse read
   </a>
   ing BLOCK1 ~ BLOCK10.
  </p>
  <p block-type="Text">
   The values of above registers will be updated every time after the eFuse read registers have been updated.
  </p>
  <h4>
   Identifying program/read operation
  </h4>
  <p block-type="Text">
   The methods to identify the completion of a program/read operation are described below. Please note that bit 1 corresponds to a program operation, and bit 0 corresponds to a read operation.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Method one:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1. Poll bit 1/0 in register EFUSE_INT_RAW_REG until it becomes 1, which represents the completion of a program/read operation.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Method two:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1. Set bit 1/0 in register
       <a href="#page-155-0">
        EFUSE_INT_ENA_REG
       </a>
       to 1 to enable the eFuse Controller to post a PGM/READ_DONE interrupt.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2. Configure the Interrupt Matrix to enable the CPU to respond to eFuse interrupt signals, see Chapter 8
       <i>
        Interrupt Matrix (IN
        <a href="#page-156-0">
         TERRUPT)
        </a>
       </i>
       .
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       3. Wait for the PGM/READ_DONE interrupt.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       4.
       <a href="#page-201-0">
        Set bit 1/0 in register
       </a>
       EFUSE_INT_CLR_REG to 1 to clear the PGM/READ_DONE interrupt.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Note
  </h4>
  <p block-type="Text">
   When eFuse controller updating
   <a href="#page-156-1">
    its registers, it will use
   </a>
   EFUSE_PGM_DATA
   <i>
    n
   </i>
   _REG (n=0, 1, .., 7) again to store data. So please do not write important data into these registers before this updating process initiated. During the chip boot process, eFuse controller will update eFuse data into registers which can be accessed by users automatically. Users can get programmed eFu
   <a href="#page-115-2">
    se data by reading corresp
   </a>
   onding registers. Thus, it is no need to update eFuse read registers in such case.
  </p>
  <p block-type="Text">
   <span id="page-109-0">
   </span>
   Espressif Systems 110
  </p>
  <h1>
   4.3.4 eFuse VDDQ Timing
  </h1>
  <p block-type="Text">
   The eFuse Controller operates with 20 MHz of clock frequency, and its programming voltage VDDQ should be configured as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     EFUSE_DAC_NUM (the rising period of VDDQ): The default value of VDDQ is 2.5 V and the voltage increases by 0.01 V in each clock cycle. Thus, the default value of this parameter is 255;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     EFUSE_DAC_CLK_DIV (the clock divisor of VDDQ): The clock period to program VDDQ should be larger
     <a href="#page-153-2">
      than 1
     </a>
     <i>
      µ
     </i>
     s;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     EFUSE_PWR_ON_NUM (the power-up time for VDDQ): The programming voltage should be stabilized
     <a href="#page-153-2">
      after this time, which m
     </a>
     eans the value of this parameter should be configured to exceed the result of EFUSE_DAC_CLK_DIV times EFUSE_DAC_NUM;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-154-0">
      EFUSE_PWR_OFF_NUM
     </a>
     (the power-out time for VDDQ): The value of this parameter should be larger than 10
     <i>
      µ
     </i>
     s.
    </li>
   </ul>
  </p>
  <p>
   <a href="#page-154-1">
    Table 4
   </a>
   .3-5. Configuration of Default VDDQ Timing Parameters
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 4.3-5. Configuration of Default VDDQ Timing Parameters
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   <span id="page-110-2">
   </span>
   4.3.5 Th
   <a href="#page-153-2">
    e Use of Pa
   </a>
   r
   <a href="#page-153-2">
    ameters by H
   </a>
   a
   <a href="#page-154-0">
    rdware Modu
   </a>
   le
   <a href="#page-154-1">
    s
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-110-0">
   </span>
   Some hardware modules are directly connected to the eFuse peripheral in order to use the parameters listed in Table 4.3-1 and Table 4.3-3, specifically those marked with "Y" in columns "Accessible by Hardware". Users cannot intervene in this process.
  </p>
  <h1>
   4.3.6
   <a href="#page-100-0">
    In
   </a>
   terrupt
   <a href="#page-104-0">
    s
   </a>
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-110-1">
     </span>
     <i>
      •
     </i>
     PGM_DONE interrupt: Triggered when eFuse programming has finished. To enable this interrupt, set the EFUSE_PGM_DONE_INT_ENA field of register EFUSE_INT_ENA_REG to 1;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     READ_DONE interrupt: Triggered when eFuse reading has finished. To enable this interrupt, set the EFUSE_READ_DONE_INT_ENA field of register EFUSE_INT_ENA_REG to 1.
    </li>
   </ul>
  </p>
  <h1>
   4.4 Register Summary
  </h1>
  <p block-type="Text">
   The addresses in this section are relative to eFuse Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      PGM Data Register
      <br/>
      EFUSE_PGM_DATA0_REG
     </td>
     <td>
      Register 0 that stores data to be programmed
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_DATA1_REG
     </td>
     <td>
      Register 1 that stores data to be programmed
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_DATA2_REG
     </td>
     <td>
      Register 2 that stores data to be programmed
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_DATA3_REG
     </td>
     <td>
      Register 3 that stores data to be programmed
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_DATA4_REG
     </td>
     <td>
      Register 4 that stores data to be programmed
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_DATA5_REG
     </td>
     <td>
      Register 5 that stores data to be programmed
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_DATA6_REG
     </td>
     <td>
      Register 6 that stores data to be programmed
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_DATA7_REG
     </td>
     <td>
      Register 7 that stores data to be programmed
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_CHECK_VALUE0_REG
     </td>
     <td>
      Register 0 that stores the RS code to be pro
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      grammed
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_CHECK_VALUE1_REG
     </td>
     <td>
      Register 1 that stores the RS code to be pro
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      grammed
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_PGM_CHECK_VALUE2_REG
     </td>
     <td>
      Register 2 that stores the RS code to be pro
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      grammed
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Read Data Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_WR_DIS_REG
      <br/>
      EFUSE_RD_REPEAT_DATA0_REG
     </td>
     <td>
      BLOCK0 data register 0
      <br/>
      BLOCK0 data register 1
     </td>
     <td>
      0x002C
      <br/>
      0x0030
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_REPEAT_DATA1_REG
     </td>
     <td>
      BLOCK0 data register 2
     </td>
     <td>
      0x0034
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_REPEAT_DATA2_REG
     </td>
     <td>
      BLOCK0 data register 3
     </td>
     <td>
      0x0038
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_REPEAT_DATA3_REG
     </td>
     <td>
      BLOCK0 data register 4
     </td>
     <td>
      0x003C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_REPEAT_DATA4_REG
     </td>
     <td>
      BLOCK0 data register 5
     </td>
     <td>
      0x0040
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_MAC_SPI_SYS_0_REG
     </td>
     <td>
      BLOCK1 data register 0
     </td>
     <td>
      0x0044
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_MAC_SPI_SYS_1_REG
     </td>
     <td>
      BLOCK1 data register 1
     </td>
     <td>
      0x0048
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_MAC_SPI_SYS_2_REG
     </td>
     <td>
      BLOCK1 data register 2
     </td>
     <td>
      0x004C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_MAC_SPI_SYS_3_REG
     </td>
     <td>
      BLOCK1 data register 3
     </td>
     <td>
      0x0050
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_MAC_SPI_SYS_4_REG
     </td>
     <td>
      BLOCK1 data register 4
     </td>
     <td>
      0x0054
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_MAC_SPI_SYS_5_REG
     </td>
     <td>
      BLOCK1 data register 5
     </td>
     <td>
      0x0058
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART1_DATA0_REG
     </td>
     <td>
      Register 0 of BLOCK2 (system)
     </td>
     <td>
      0x005C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART1_DATA1_REG
     </td>
     <td>
      Register 1 of BLOCK2 (system)
     </td>
     <td>
      0x0060
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART1_DATA2_REG
     </td>
     <td>
      Register 2 of BLOCK2 (system)
     </td>
     <td>
      0x0064
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART1_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK2 (system)
     </td>
     <td>
      0x0068
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART1_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK2 (system)
     </td>
     <td>
      0x006C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART1_DATA5_REG
      <br/>
      EFUSE_RD_SYS_PART1_DATA6_REG
     </td>
     <td>
      Register 5 of BLOCK2 (system)
      <br/>
      Register 6 of BLOCK2 (system)
     </td>
     <td>
      0x0070
      <br/>
      0x0074
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART1_DATA7_REG
     </td>
     <td>
      Register 7 of BLOCK2 (system)
     </td>
     <td>
      0x0078
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_USR_DATA0_REG
     </td>
     <td>
      Register 0 of BLOCK3 (user)
     </td>
     <td>
      0x007C
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 4
      <br/>
      eFuse Controller (EFUSE)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_USR_DATA1_REG
     </td>
     <td>
      Register 1 of BLOCK3 (user)
     </td>
     <td>
      0x0080
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_USR_DATA2_REG
     </td>
     <td>
      Register 2 of BLOCK3 (user)
     </td>
     <td>
      0x0084
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_USR_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK3 (user)
     </td>
     <td>
      0x0088
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_USR_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK3 (user)
     </td>
     <td>
      0x008C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_USR_DATA5_REG
     </td>
     <td>
      Register 5 of BLOCK3 (user)
     </td>
     <td>
      0x0090
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_USR_DATA6_REG
     </td>
     <td>
      Register 6 of BLOCK3 (user)
     </td>
     <td>
      0x0094
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_USR_DATA7_REG
      <br/>
      EFUSE_RD_KEY0_DATA0_REG
     </td>
     <td>
      Register 7 of BLOCK3 (user)
      <br/>
      Register 0 of BLOCK4 (KEY0)
     </td>
     <td>
      0x0098
      <br/>
      0x009C
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY0_DATA1_REG
     </td>
     <td>
      Register 1 of BLOCK4 (KEY0)
     </td>
     <td>
      0x00A0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY0_DATA2_REG
     </td>
     <td>
      Register 2 of BLOCK4 (KEY0)
     </td>
     <td>
      0x00A4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY0_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK4 (KEY0)
     </td>
     <td>
      0x00A8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY0_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK4 (KEY0)
     </td>
     <td>
      0x00AC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY0_DATA5_REG
     </td>
     <td>
      Register 5 of BLOCK4 (KEY0)
     </td>
     <td>
      0x00B0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY0_DATA6_REG
     </td>
     <td>
      Register 6 of BLOCK4 (KEY0)
     </td>
     <td>
      0x00B4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY0_DATA7_REG
     </td>
     <td>
      Register 7 of BLOCK4 (KEY0)
     </td>
     <td>
      0x00B8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY1_DATA0_REG
     </td>
     <td>
      Register 0 of BLOCK5 (KEY1)
     </td>
     <td>
      0x00BC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY1_DATA1_REG
     </td>
     <td>
      Register 1 of BLOCK5 (KEY1)
     </td>
     <td>
      0x00C0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY1_DATA2_REG
     </td>
     <td>
      Register 2 of BLOCK5 (KEY1)
     </td>
     <td>
      0x00C4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY1_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK5 (KEY1)
     </td>
     <td>
      0x00C8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY1_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK5 (KEY1)
     </td>
     <td>
      0x00CC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY1_DATA5_REG
     </td>
     <td>
      Register 5 of BLOCK5 (KEY1)
     </td>
     <td>
      0x00D0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY1_DATA6_REG
     </td>
     <td>
      Register 6 of BLOCK5 (KEY1)
     </td>
     <td>
      0x00D4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY1_DATA7_REG
     </td>
     <td>
      Register 7 of BLOCK5 (KEY1)
     </td>
     <td>
      0x00D8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY2_DATA0_REG
      <br/>
      EFUSE_RD_KEY2_DATA1_REG
     </td>
     <td>
      Register 0 of BLOCK6 (KEY2)
      <br/>
      Register 1 of BLOCK6 (KEY2)
     </td>
     <td>
      0x00DC
      <br/>
      0x00E0
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY2_DATA2_REG
     </td>
     <td>
      Register 2 of BLOCK6 (KEY2)
     </td>
     <td>
      0x00E4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY2_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK6 (KEY2)
     </td>
     <td>
      0x00E8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY2_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK6 (KEY2)
     </td>
     <td>
      0x00EC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY2_DATA5_REG
     </td>
     <td>
      Register 5 of BLOCK6 (KEY2)
     </td>
     <td>
      0x00F0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY2_DATA6_REG
     </td>
     <td>
      Register 6 of BLOCK6 (KEY2)
     </td>
     <td>
      0x00F4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY2_DATA7_REG
     </td>
     <td>
      Register 7 of BLOCK6 (KEY2)
     </td>
     <td>
      0x00F8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY3_DATA0_REG
     </td>
     <td>
      Register 0 of BLOCK7 (KEY3)
     </td>
     <td>
      0x00FC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY3_DATA1_REG
     </td>
     <td>
      Register 1 of BLOCK7 (KEY3)
     </td>
     <td>
      0x0100
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY3_DATA2_REG
     </td>
     <td>
      Register 2 of BLOCK7 (KEY3)
     </td>
     <td>
      0x0104
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY3_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK7 (KEY3)
     </td>
     <td>
      0x0108
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY3_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK7 (KEY3)
     </td>
     <td>
      0x010C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY3_DATA5_REG
     </td>
     <td>
      Register 5 of BLOCK7 (KEY3)
     </td>
     <td>
      0x0110
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY3_DATA6_REG
     </td>
     <td>
      Register 6 of BLOCK7 (KEY3)
     </td>
     <td>
      0x0114
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY3_DATA7_REG
     </td>
     <td>
      Register 7 of BLOCK7 (KEY3)
     </td>
     <td>
      0x0118
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY4_DATA0_REG
     </td>
     <td>
      Register 0 of BLOCK8 (KEY4)
     </td>
     <td>
      0x011C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY4_DATA1_REG
      <br/>
      EFUSE_RD_KEY4_DATA2_REG
     </td>
     <td>
      Register 1 of BLOCK8 (KEY4)
      <br/>
      Register 2 of BLOCK8 (KEY4)
     </td>
     <td>
      0x0120
      <br/>
      0x0124
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY4_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK8 (KEY4)
     </td>
     <td>
      0x0128
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 4
      <br/>
      eFuse Controller (EFUSE)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY4_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK8 (KEY4)
     </td>
     <td>
      0x012C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY4_DATA5_REG
     </td>
     <td>
      Register 5 of BLOCK8 (KEY4)
     </td>
     <td>
      0x0130
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY4_DATA6_REG
     </td>
     <td>
      Register 6 of BLOCK8 (KEY4)
     </td>
     <td>
      0x0134
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY4_DATA7_REG
     </td>
     <td>
      Register 7 of BLOCK8 (KEY4)
     </td>
     <td>
      0x0138
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY5_DATA0_REG
     </td>
     <td>
      Register 0 of BLOCK9 (KEY5)
     </td>
     <td>
      0x013C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY5_DATA1_REG
      <br/>
      EFUSE_RD_KEY5_DATA2_REG
     </td>
     <td>
      Register 1 of BLOCK9 (KEY5)
      <br/>
      Register 2 of BLOCK9 (KEY5)
     </td>
     <td>
      0x0140
      <br/>
      0x0144
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY5_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK9 (KEY5)
     </td>
     <td>
      0x0148
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY5_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK9 (KEY5)
     </td>
     <td>
      0x014C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY5_DATA5_REG
     </td>
     <td>
      Register 5 of BLOCK9 (KEY5)
     </td>
     <td>
      0x0150
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY5_DATA6_REG
     </td>
     <td>
      Register 6 of BLOCK9 (KEY5)
     </td>
     <td>
      0x0154
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_KEY5_DATA7_REG
     </td>
     <td>
      Register 7 of BLOCK9 (KEY5)
     </td>
     <td>
      0x0158
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART2_DATA0_REG
     </td>
     <td>
      Register 0 of BLOCK10 (system)
     </td>
     <td>
      0x015C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART2_DATA1_REG
     </td>
     <td>
      Register 1 of BLOCK10 (system)
     </td>
     <td>
      0x0160
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART2_DATA2_REG
     </td>
     <td>
      Register 2 of BLOCK10 (system)
     </td>
     <td>
      0x0164
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART2_DATA3_REG
     </td>
     <td>
      Register 3 of BLOCK10 (system)
     </td>
     <td>
      0x0168
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART2_DATA4_REG
     </td>
     <td>
      Register 4 of BLOCK10 (system)
     </td>
     <td>
      0x016C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART2_DATA5_REG
     </td>
     <td>
      Register 5 of BLOCK10 (system)
     </td>
     <td>
      0x0170
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART2_DATA6_REG
     </td>
     <td>
      Register 6 of BLOCK10 (system)
     </td>
     <td>
      0x0174
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_SYS_PART2_DATA7_REG
     </td>
     <td>
      Register 7 of BLOCK10 (system)
     </td>
     <td>
      0x0178
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Report Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_REPEAT_ERR0_REG
     </td>
     <td>
      Programming error record register 0 of BLOCK0
     </td>
     <td>
      0x017C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_REPEAT_ERR1_REG
     </td>
     <td>
      Programming error record register 1 of BLOCK0
     </td>
     <td>
      0x0180
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_REPEAT_ERR2_REG
      <br/>
      EFUSE_RD_REPEAT_ERR3_REG
     </td>
     <td>
      Programming error record register 2 of BLOCK0
      <br/>
      Programming error record register 3 of BLOCK0
     </td>
     <td>
      0x0184
      <br/>
      0x0188
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_REPEAT_ERR4_REG
     </td>
     <td>
      Programming error record register 4 of BLOCK0
     </td>
     <td>
      0x0190
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_RS_ERR0_REG
     </td>
     <td>
      Programming error record register 0 of BLOCK1-
     </td>
     <td>
      0x01C0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      10
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_RS_ERR1_REG
     </td>
     <td>
      Programming error record register 1 of BLOCK1-
     </td>
     <td>
      0x01C4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="9">
      10
     </td>
    </tr>
    <tr>
     <td>
      Configuration Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_CLK_REG
     </td>
     <td>
      eFuse clock configuration register
     </td>
     <td>
      0x01C8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_CONF_REG
     </td>
     <td>
      eFuse operation mode configuration register
     </td>
     <td>
      0x01CC
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_CMD_REG
     </td>
     <td>
      eFuse command register
     </td>
     <td>
      0x01D4
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_DAC_CONF_REG
     </td>
     <td>
      Controls the eFuse programming voltage
     </td>
     <td>
      0x01E8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_RD_TIM_CONF_REG
     </td>
     <td>
      Configures read timing parameters
     </td>
     <td>
      0x01EC
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_WR_TIM_CONF1_REG
     </td>
     <td>
      Configuration register 1 of eFuse programming
     </td>
     <td>
      0x01F0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      timing parameters
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_WR_TIM_CONF2_REG
     </td>
     <td>
      Configuration register 2 of eFuse programming
     </td>
     <td>
      0x01F4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Status Register
     </td>
     <td>
      timing parameters
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_STATUS_REG
     </td>
     <td>
      eFuse status register
     </td>
     <td>
      0x01D0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 4
      <br/>
      eFuse Controller (EFUSE)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_INT_RAW_REG
     </td>
     <td>
      eFuse raw interrupt register
     </td>
     <td>
      0x01D8
     </td>
     <td>
      R/WC/SS
     </td>
    </tr>
    <tr>
     <td colspan="8">
      EFUSE_INT_ST_REG
      <br/>
      eFuse interrupt status register
      <br/>
      0x01DC
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      EFUSE_INT_ENA_REG
     </td>
     <td>
      eFuse interrupt enable register
     </td>
     <td>
      0x01E0
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   4.5 Registers
  </h1>
  <p block-type="Text">
   <span id="page-115-0">
   </span>
   The addresses in this section are relative to eFuse Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-115-2">
   </span>
   <span id="page-115-1">
   </span>
   <img src="_page_115_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-115-3">
   </span>
   EFUSE_PGM_DATA_2 The content of the 2nd 32-bit data to be programmed. (R/W)
  </p>
  <p>
   <span id="page-116-2">
   </span>
   <img src="_page_116_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-116-3">
   </span>
   EFUSE_PGM_DATA_4 The content of the 4th 32-bit data to be programmed. (R/W)
  </p>
  <p>
   <span id="page-116-1">
   </span>
   <img src="_page_116_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_116_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-116-0">
   </span>
   <img src="_page_116_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_PGM_DATA_6 The content of the 6th 32-bit data to be programmed. (R/W)
  </p>
  <p>
   <span id="page-117-1">
   </span>
   <img src="_page_117_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_117_Figure_1.jpeg"/>
  </p>
  <h4>
   Register 4.9. EFUSE_PGM_CHECK_VALUE0_REG (0x0020)
  </h4>
  <p>
   <span id="page-117-0">
   </span>
   <img src="_page_117_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_PGM_RS_DATA_0 The content of the 0th 32-bit RS code to be programmed. (R/W)
  </p>
  <p>
   <img src="_page_117_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_PGM_RS_DATA_1 The content of the 1st 32-bit RS code to be programmed. (R/W)
  </p>
  <p>
   <span id="page-118-2">
   </span>
   <img src="_page_118_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_PGM_RS_DATA_2 The content of the 2nd 32-bit RS code to be programmed. (R/W)
  </p>
  <p>
   <span id="page-118-0">
   </span>
   <img src="_page_118_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-118-1">
   </span>
   <img src="_page_118_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_WR_DIS Represents whether programming of corresponding eFuse part is disabled or enabled. 1: Disabled. 0: Enabled. (RO)
  </p>
  <h4>
   <span id="page-119-1">
   </span>
   Register 4.13. EFUSE_RD_REPEAT_DATA0_REG (0x0030) (reserved) 0 0 0 0 0 31 27 EFUSE_VDD_SPI_AS_GPIO 0 26 EFUSE_USB_EXCHG_PINS 0 25 (reserved) 0 0 0 0 24 21 EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT 0 20 EFUSE_DIS_PAD_JTAG 0 19 EFUSE_SOFT_DIS_JTAG 0x0 18 16 EFUSE_JTAG_SEL_ENABLE 0 15 EFUSE_DIS_TWAI 0 14 EFUSE_RPT4_RESERVED6 0 13 EFUSE_DIS_FORCE_DOWNLOAD 0 12 EFUSE_DIS_USB_SERIAL_JTAG 0 11 EFUSE_DIS_DOWNLOAD_ICACHE 0 10 EFUSE_DIS_USB_JTAG 0 9 EFUSE_DIS_ICACHE 0 8 EFUSE_DIS_RTC_RAM_BOOT 0 7 EFUSE_RD_DIS 0x0 6 0 Reset
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-119-0">
     </span>
     EFUSE_RD_DIS Represents whether users' reading from BLOCK4 ~ 10 is disabled or enabled. 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_RTC_RAM_BOOT Reserved (used for four backups method). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_ICACHE Represents whether iCache is disabled or enabled. 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_USB_JTAG Represents whether the USB-to-JTAG function is disabled. 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_DOWNLOAD_ICACHE Represents whether iCache is disabled in download mode (boot_mode[3:0] is 0, 1, 2, 3, 6, 7). 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_USB_SERIAL_JTAG Represents whether USB-Serial-JTAG is disabled. 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_FORCE_DOWNLOAD Represents whether the function that forces chip into download mode is disabled. 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED6 Reserved (used for four backups method). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_TWAI Represents whether TWAI function is disabled. 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_JTAG_SEL_ENABLE Represents whether to use JTAG directly. 1: Use directly. 0: Not use directly. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SOFT_DIS_JTAG Represents whether JTAG is disabled in the soft way. Odd count of bits with a value of 1: Disabled. It can still be restarted via HMAC. Even count of bits with a value of 1: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_PAD_JTAG Represents whether JTAG is disabled in the hard way (permanently). 1: Disabled. 0: Enabled. (RO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT Represents whether flash encryption is disabled (except in SPI boot mode). 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_USB_EXCHG_PINS Represents whether or not USB D+ and D- pins are swapped. 1: Swapped. 0: Not swapped. (RO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note: The eFuse has a design flaw and does not move the pullup (needed to detect USB speed), resulting in the PC thinking the chip is a low-speed device, which stops communication. For detailed information, please refer to Chapter 30
   <i>
    USB Serial/JTAG Controller (USB_SERIAL_JTAG)
   </i>
   .
  </p>
  <p block-type="Text">
   EFUSE_VDD_SPI_AS_GPIO Represents whether t
   <a href="#page-763-0">
    he VDD_SPI pin is used as a regular GPIO. 1: Used
   </a>
   as a regular GPIO. 0: Not used as a regular
   <a href="#page-763-0">
    GPI
   </a>
   O. (RO)
  </p>
  <p>
   <span id="page-121-1">
   </span>
   <img src="_page_121_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-121-0">
   </span>
   EFUSE_RPT4_RESERVED2 Reserved (used for four backups method). (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     EFUSE_WDT_DELAY_SEL Represents RTC watchdog timeout threshold. Measurement unit: slow clock cycle. 00: 40000, 01: 80000, 10: 160000, 11:320000. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SPI_BOOT_CRYPT_CNT Represents whether SPI boot encrypt/decrypt is disabled or enabled. Odd count of bits with a value of 1: Enabled. Even count of bits with a value of 1: Disabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_KEY_REVOKE0 Represents whether or not the first secure boot key is revoked. 1: Revoked. 0: Not revoked. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_KEY_REVOKE1 Represents whether or not the second secure boot key is revoked. 1: Revoked. 0: Not revoked. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_KEY_REVOKE2 Represents whether or not the third secure boot key is revoked. 1: Revoked. 0: Not revoked. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_0 Represents purpose of Key0. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_1 Represents purpose of Key1. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-122-1">
   </span>
   <img src="_page_122_Figure_0.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-122-0">
     </span>
     EFUSE_KEY_PURPOSE_2 Represents purpose of Key2. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_3 Represents purpose of Key3. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_4 Represents purpose of Key4. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_5 Represents purpose of Key5. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED3 Reserved (used for four backups method). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_EN Represents whether secure boot is enabled or disabled. 1: Enabled. 0: Disabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_AGGRESSIVE_REVOKE Represents whether aggressive revoke of secure boot keys is enabled or disabled. 1: Enabled. 0: Disabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED0 Reserved (used for four backups method). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_FLASH_TPUW Represents flash waiting time after power-up. Measurement unit: ms. If the value is less than 15, the waiting time is the configurable value. Otherwise, the waiting time is always 30 ms. (RO)
    </li>
   </ul>
  </p>
  <h4>
   <span id="page-123-0">
   </span>
   Register 4.16. EFUSE_RD_REPEAT_DATA3_REG (0x003C)
  </h4>
  <p>
   <span id="page-123-1">
   </span>
   <img src="_page_123_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_DIS_DOWNLOAD_MODE Represents whether download mode (boot_mode[3:0] = 0, 1, 2, 3, 6, 7) is disabled or enabled. 1: Disabled. 0: Enabled. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED8 Reserved (used for four backups method). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_USB_PRINT_CHANNEL Represents whether USB printing is disabled or enabled. 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED7 Reserved (used for four backups method). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_USB_SERIAL_JTAG_DOWNLOAD_MODE Represents whether download through USB-Serial-JTAG is disabled or enabled. 1: Disabled. 0: Enabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_ENABLE_SECURITY_DOWNLOAD Represents whether secure UART download mode is enabled or disabled (read/write flash only). 1: Enabled. 0: Disabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_UART_PRINT_CONTROL Represents the UART boot message output mode. 00: Enabled. 01: Enabled when GPIO8 is low at reset. 10: Enabled when GPIO8 is high at reset. 11: Disabled. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED5 Reserved (used for four backups method). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_FORCE_SEND_RESUME Represents whether or not to force ROM code to send a resume command during SPI boot. 1: Send. 0: Not send. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_VERSION Represents the values of version control register (used by ESP-IDF antirollback feature). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED1 Reserved (used for four backups method). (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_ERR_RST_ENABLE Represents whether to enable the check for error registers of block0. 1: Enabled. 0: Disabled. (RO)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_124_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-124-0">
   </span>
   <img src="_page_124_Figure_1.jpeg"/>
  </p>
  <p>
   <img src="_page_124_Figure_2.jpeg"/>
  </p>
  <h4>
   Register 4.18. EFUSE_RD_MAC_SPI_SYS_0_REG (0x0044)
  </h4>
  <p>
   <span id="page-124-1">
   </span>
   <img src="_page_124_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_MAC_0 Stores the low 32 bits of MAC address. (RO)
  </p>
  <p block-type="Text">
   Register 4.19. EFUSE_RD_MAC_SPI_SYS_1_REG (0x0048)
  </p>
  <p>
   <span id="page-124-2">
   </span>
   <img src="_page_124_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_MAC_1 Stores the high 16 bits of MAC address. (RO)
  </p>
  <p block-type="Text">
   EFUSE_SPI_PAD_CONF_0 Stores the zeroth part of SPI_PAD_CONF. (RO)
  </p>
  <p>
   <span id="page-125-1">
   </span>
   <span id="page-125-0">
   </span>
   <img src="_page_125_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-125-2">
   </span>
   EFUSE_SYS_DATA_PART0_1 Stores the fist 32 bits of the zeroth part of system data. (RO)
  </p>
  <p>
   <span id="page-126-0">
   </span>
   <img src="_page_126_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART0_2 Stores the second 32 bits of the zeroth part of system data. (RO)
  </p>
  <h4>
   Register 4.24. EFUSE_RD_SYS_PART1_DATA0_REG (0x005C)
  </h4>
  <p>
   <span id="page-126-1">
   </span>
   <img src="_page_126_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART1_0 Stores the zeroth 32 bits of the first part of system data. (RO)
  </p>
  <p>
   <span id="page-126-2">
   </span>
   <img src="_page_126_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART1_1 Stores the first 32 bits of the first part of system data. (RO)
  </p>
  <p>
   <span id="page-127-0">
   </span>
   <img src="_page_127_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_127_Figure_1.jpeg"/>
  </p>
  <h4>
   Register 4.27. EFUSE_RD_SYS_PART1_DATA3_REG (0x0068)
  </h4>
  <p>
   <span id="page-127-1">
   </span>
   <img src="_page_127_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART1_3 Stores the third 32 bits of the first part of system data. (RO)
  </p>
  <p>
   <span id="page-127-2">
   </span>
   <img src="_page_127_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART1_4 Stores the fourth 32 bits of the first part of system data. (RO)
  </p>
  <p>
   <span id="page-128-0">
   </span>
   <img src="_page_128_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART1_5 Stores the fifth 32 bits of the first part of system data. (RO)
  </p>
  <h4>
   Register 4.30. EFUSE_RD_SYS_PART1_DATA6_REG (0x0074)
  </h4>
  <p>
   <img src="_page_128_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART1_6 Stores the sixth 32 bits of the first part of system data. (RO)
  </p>
  <p>
   <span id="page-128-1">
   </span>
   <img src="_page_128_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART1_7 Stores the seventh 32 bits of the first part of system data. (RO)
  </p>
  <p>
   <span id="page-129-3">
   </span>
   <span id="page-129-2">
   </span>
   <span id="page-129-1">
   </span>
   <span id="page-129-0">
   </span>
   <img src="_page_129_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-130-3">
   </span>
   <span id="page-130-2">
   </span>
   <span id="page-130-1">
   </span>
   <span id="page-130-0">
   </span>
   <img src="_page_130_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-131-1">
   </span>
   <span id="page-131-0">
   </span>
   <img src="_page_131_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-131-3">
   </span>
   <span id="page-131-2">
   </span>
   EFUSE_KEY0_DATA3 Stores the third 32 bits of KEY0. (RO)
  </p>
  <p>
   <span id="page-132-3">
   </span>
   <span id="page-132-2">
   </span>
   <span id="page-132-1">
   </span>
   <span id="page-132-0">
   </span>
   <img src="_page_132_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-133-3">
   </span>
   <span id="page-133-2">
   </span>
   <span id="page-133-1">
   </span>
   <span id="page-133-0">
   </span>
   <img src="_page_133_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-134-3">
   </span>
   <span id="page-134-2">
   </span>
   <span id="page-134-1">
   </span>
   <span id="page-134-0">
   </span>
   <img src="_page_134_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-135-1">
   </span>
   <span id="page-135-0">
   </span>
   <img src="_page_135_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-135-3">
   </span>
   <span id="page-135-2">
   </span>
   EFUSE_KEY2_DATA3 Stores the third 32 bits of KEY2. (RO)
  </p>
  <p>
   <span id="page-136-1">
   </span>
   <span id="page-136-0">
   </span>
   <img src="_page_136_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-136-3">
   </span>
   <span id="page-136-2">
   </span>
   EFUSE_KEY2_DATA7 Stores the seventh 32 bits of KEY2. (RO)
  </p>
  <p>
   <span id="page-137-3">
   </span>
   <span id="page-137-2">
   </span>
   <span id="page-137-1">
   </span>
   <span id="page-137-0">
   </span>
   <img src="_page_137_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-138-3">
   </span>
   <span id="page-138-2">
   </span>
   <span id="page-138-1">
   </span>
   <span id="page-138-0">
   </span>
   <img src="_page_138_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-139-2">
   </span>
   <span id="page-139-1">
   </span>
   <span id="page-139-0">
   </span>
   <img src="_page_139_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-140-3">
   </span>
   <span id="page-140-2">
   </span>
   <span id="page-140-1">
   </span>
   <span id="page-140-0">
   </span>
   <img src="_page_140_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-141-3">
   </span>
   <span id="page-141-2">
   </span>
   <span id="page-141-1">
   </span>
   <span id="page-141-0">
   </span>
   <img src="_page_141_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-142-1">
   </span>
   <span id="page-142-0">
   </span>
   <img src="_page_142_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-142-3">
   </span>
   <span id="page-142-2">
   </span>
   EFUSE_KEY5_DATA7 Stores the seventh 32 bits of KEY5. (RO)
  </p>
  <p>
   <span id="page-143-0">
   </span>
   <img src="_page_143_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART2_0 Stores the 0th 32 bits of the 2nd part of system data. (RO)
  </p>
  <h1>
   <span id="page-143-1">
   </span>
   Register 4.89. EFUSE_RD_SYS_PART2_DATA1_REG (0x0160) EFUSE_SYS_DATA_PART2_1 0x000000 31 0 Reset
  </h1>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART2_1 Stores the 1st 32 bits of the 2nd part of system data. (RO)
  </p>
  <p>
   <span id="page-143-2">
   </span>
   <img src="_page_143_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART2_2 Stores the 2nd 32 bits of the 2nd part of system data. (RO)
  </p>
  <p>
   <span id="page-144-0">
   </span>
   <img src="_page_144_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART2_3 Stores the 3rd 32 bits of the 2nd part of system data. (RO)
  </p>
  <h4>
   Register 4.92. EFUSE_RD_SYS_PART2_DATA4_REG (0x016C)
  </h4>
  <p>
   <span id="page-144-1">
   </span>
   <img src="_page_144_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART2_4 Stores the 4th 32 bits of the 2nd part of system data. (RO)
  </p>
  <p>
   <span id="page-144-2">
   </span>
   <img src="_page_144_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART2_5 Stores the 5th 32 bits of the 2nd part of system data. (RO)
  </p>
  <p>
   <span id="page-145-0">
   </span>
   <img src="_page_145_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART2_6 Stores the 6th 32 bits of the 2nd part of system data. (RO)
  </p>
  <h4>
   Register 4.95. EFUSE_RD_SYS_PART2_DATA7_REG (0x0178)
  </h4>
  <p>
   <span id="page-145-1">
   </span>
   <img src="_page_145_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_SYS_DATA_PART2_7 Stores the 7th 32 bits of the 2nd part of system data. (RO)
  </p>
  <p>
   <span id="page-146-0">
   </span>
   <img src="_page_146_Figure_0.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     EFUSE_RD_DIS_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_RD_DIS. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_RTC_RAM_BOOT_ERR Reserved. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_ICACHE_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_ICACHE. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_USB_JTAG_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_USB_JTAG. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_DOWNLOAD_ICACHE_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_DOWNLOAD_ICACHE. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_USB_SERIAL_JTAG_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_USB_SERIAL_JTAG. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_FORCE_DOWNLOAD_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_FORCE_DOWNLOAD. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED6_ERR Reserved. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_TWAI_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_TWAI. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_JTAG_SEL_ENABLE_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_JTAG_SEL_ENABLE. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SOFT_DIS_JTAG_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_SOFT_DIS_JTAG. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_PAD_JTAG_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_PAD_JTAG. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_USB_EXCHG_PINS_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_USB_EXCHG_PINS. (RO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   EFUSE_VDD_SPI_AS_GPIO_ERR Any bit in this filed set to 1 indicates that an error occurs in pro-Espressif Systems gramming EFUSE_VDD_SPI_AS_GPIO. (RO) 147 Submit Documentation Feedback ESP32-C3 TRM (Version 1.3)
  </p>
  <p>
   <span id="page-147-0">
   </span>
   <img src="_page_147_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_RPT4_RESERVED2_ERR Reserved. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     EFUSE_WDT_DELAY_SEL_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_WDT_DELAY_SEL. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SPI_BOOT_CRYPT_CNT_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_SPI_BOOT_CRYPT_CNT. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_KEY_REVOKE0_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_SECURE_BOOT_KEY_REVOKE0. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_KEY_REVOKE1_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_SECURE_BOOT_KEY_REVOKE1. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_KEY_REVOKE2_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_SECURE_BOOT_KEY_REVOKE2. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_0_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_KEY_PURPOSE_0. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_1_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_KEY_PURPOSE_1. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 4.98. EFUSE_RD_REPEAT_ERR2_REG (0x0184)
  </h4>
  <p>
   <span id="page-148-0">
   </span>
   <img src="_page_148_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_KEY_PURPOSE_2_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_KEY_PURPOSE_2. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_3_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_KEY_PURPOSE_3. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_4_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_KEY_PURPOSE_4. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY_PURPOSE_5_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_KEY_PURPOSE_5. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED3_ERR Reserved. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_EN_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_SECURE_BOOT_EN. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_BOOT_AGGRESSIVE_REVOKE_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_SECURE_BOOT_AGGRESSIVE_REVOKE. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED0_ERR Reserved. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_FLASH_TPUW_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_FLASH_TPUW. (RO)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_149_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     EFUSE_DIS_DOWNLOAD_MODE_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_DOWNLOAD_MODE. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED8_ERR Reserved. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_USB_PRINT_CHANNEL_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_DOWNLOAD_MODE. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED7_ERR Reserved. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_DIS_USB_SERIAL_JTAG_DOWNLOAD_MODE_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_DIS_USB_SERIAL_JTAG_DOWNLOAD_MODE. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_ENABLE_SECURITY_DOWNLOAD_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_ENABLE_SECURITY_DOWNLOAD. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_UART_PRINT_CONTROL_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_UART_PRINT_CONTROL. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED5_ERR Reserved. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_FORCE_SEND_RESUME_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_FORCE_SEND_RESUME (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SECURE_VERSION_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_SECURE_VERSION. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_RPT4_RESERVED1_ERR Reserved. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_ERR_RST_ENABLE_ERR Any bit in this filed set to 1 indicates that an error occurs in programming EFUSE_ERR_RST_ENABLE. (RO)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_150_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-150-0">
   </span>
   <img src="_page_150_Figure_1.jpeg"/>
  </p>
  <p>
   EFUSE_RPT4_RESERVED4_ERR Reserved. (RO)
  </p>
  <h4>
   Register 4.101. EFUSE_RD_RS_ERR0_REG (0x01C0)
  </h4>
  <p>
   <span id="page-151-0">
   </span>
   <img src="_page_151_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_MAC_SPI_8M_ERR_NUM The value of this signal means the number of error bytes. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     EFUSE_SYS_PART1_NUM The value of this signal means the number of error bytes. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_MAC_SPI_8M_FAIL 0: Means no failure and that the data of MAC_SPI_8M is reliable 1: Means that programming data of MAC_SPI_8M failed and the number of error bytes is over 6. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_USR_DATA_ERR_NUM The value of this signal means the number of error bytes. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_SYS_PART1_FAIL 0: Means no failure and that the data of system part1 is reliable 1: Means that programming data of system part1 failed and the number of error bytes is over 6. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY0_ERR_NUM The value of this signal means the number of error bytes. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_USR_DATA_FAIL 0: Means no failure and that the user data is reliable 1: Means that programming user data failed and the number of error bytes is over 6. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY1_ERR_NUM The value of this signal means the number of error bytes. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY0_FAIL 0: Means no failure and that the data of key0 is reliable 1: Means that programming key0 failed and the number of error bytes is over 6. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY2_ERR_NUM The value of this signal means the number of error bytes. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY1_FAIL 0: Means no failure and that the data of key1 is reliable 1: Means that programming key1 failed and the number of error bytes is over 6. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY3_ERR_NUM The value of this signal means the number of error bytes. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY2_FAIL 0: Means no failure and that the data of key2 is reliable 1: Means that programming key2 failed and the number of error bytes is over 6. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY4_ERR_NUM The value of this signal means the number of error bytes. (RO)
    </li>
    <li block-type="ListItem">
     EFUSE_KEY3_FAIL 0: Means no failure and that the data of key3 is reliable 1: Means that programming key3 failed and the number of error bytes is over 6. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-152-0">
   </span>
   <img src="_page_152_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_KEY5_ERR_NUM The value of this signal means the number of error bytes. (RO)
  </p>
  <p block-type="Text">
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  </p>
  <p block-type="Text">
   EFUSE_KEY4_FAIL 0: Means no failure and that the data of KEY4 is reliable 1: Means that programming KEY4 data failed and the number of error bytes is over 6. (RO)
  </p>
  <p block-type="Text">
   0
  </p>
  <p block-type="Text">
   0x0
  </p>
  <p block-type="Text">
   0
  </p>
  <p block-type="Text">
   0x0
  </p>
  <p block-type="Text">
   Reset
  </p>
  <p block-type="Text">
   EFUSE_SYS_PART2_ERR_NUM The value of this signal means the number of error bytes. (RO)
  </p>
  <p block-type="Text">
   EFUSE_KEY5_FAIL 0: Means no failure and that the data of KEY5 is reliable 1: Means that programming KEY5 data failed and the number of error bytes is over 6. (RO)
  </p>
  <p>
   <img src="_page_152_Figure_5.jpeg"/>
  </p>
  <p>
   <span id="page-152-1">
   </span>
   <img src="_page_152_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_EFUSE_MEM_FORCE_PD Set this bit to force eFuse SRAM into power-saving mode. (R/W)
  </p>
  <p block-type="Text">
   EFUSE_MEM_CLK_FORCE_ON Set this bit and force to activate clock signal of eFuse SRAM. (R/W)
  </p>
  <p block-type="Text">
   EFUSE_EFUSE_MEM_FORCE_PU Set this bit to force eFuse SRAM into working mode. (R/W)
  </p>
  <p block-type="Text">
   EFUSE_CLK_EN Set this bit and force to enable clock signal of eFuse memory. (R/W)
  </p>
  <p>
   <span id="page-153-1">
   </span>
   <img src="_page_153_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_OP_CODE 0x5A5A: Operate programming command 0x5AA5: Operate read command. (R/W)
  </p>
  <h4>
   Register 4.105. EFUSE_CMD_REG (0x01D4)
  </h4>
  <p>
   <span id="page-153-0">
   </span>
   <img src="_page_153_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_READ_CMD Set this bit to send read command. (R/WS/SC)
  </p>
  <p block-type="Text">
   EFUSE_PGM_CMD Set this bit to send programming command. (R/WS/SC)
  </p>
  <p block-type="Text">
   EFUSE_BLK_NUM The serial number of the block to be programmed. Value 0-10 corresponds to block number 0-10, respectively. (R/W)
  </p>
  <p>
   <span id="page-153-2">
   </span>
   <img src="_page_153_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_DAC_CLK_DIV Controls the division factor of the rising clock of the programming voltage. (R/W)
  </p>
  <p block-type="Text">
   EFUSE_DAC_CLK_PAD_SEL Don't care. (R/W)
  </p>
  <p block-type="Text">
   EFUSE_DAC_NUM Controls the rising period of the programming voltage. (R/W)
  </p>
  <p block-type="Text">
   EFUSE_OE_CLR Reduces the power supply of the programming voltage. (R/W)
  </p>
  <p>
   <span id="page-154-2">
   </span>
   <img src="_page_154_Figure_0.jpeg"/>
  </p>
  <p>
   EFUSE_READ_INIT_NUM Configures the initial read time of eFuse. (R/W)
  </p>
  <p>
   <span id="page-154-0">
   </span>
   <img src="_page_154_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_PWR_ON_NUM Configures the power up time for VDDQ. (R/W)
  </p>
  <p>
   <span id="page-154-1">
   </span>
   <img src="_page_154_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_PWR_OFF_NUM Configures the power outage time for VDDQ. (R/W)
  </p>
  <h4>
   Register 4.110. EFUSE_STATUS_REG (0x01D0)
  </h4>
  <p>
   <span id="page-155-1">
   </span>
   <img src="_page_155_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_STATE Indicates the state of the eFuse state machine. (RO)
  </p>
  <p block-type="Text">
   EFUSE_REPEAT_ERR_CNT Indicates the number of error bits during programming BLOCK0. (RO)
  </p>
  <p block-type="Text">
   Register 4.111. EFUSE_INT_RAW_REG (0x01D8)
  </p>
  <p>
   <span id="page-155-0">
   </span>
   <img src="_page_155_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_READ_DONE_INT_RAW The raw bit signal for read_done interrupt. (R/WC/SS) EFUSE_PGM_DONE_INT_RAW The raw bit signal for pgm_done interrupt. (R/WC/SS)
  </p>
  <p block-type="Text">
   Register 4.112. EFUSE_INT_ST_REG (0x01DC)
  </p>
  <p>
   <span id="page-155-2">
   </span>
   <img src="_page_155_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_READ_DONE_INT_ST The status signal for read_done interrupt. (RO) EFUSE_PGM_DONE_INT_ST The status signal for pgm_done interrupt. (RO)
  </p>
  <p>
   <span id="page-156-0">
   </span>
   <img src="_page_156_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   Register 4.113. EFUSE_INT_ENA_REG (0x01E0)
  </p>
  <p>
   <span id="page-156-1">
   </span>
   <img src="_page_156_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   EFUSE_DATE Stores eFuse version. (R/W)
  </p>
  <h1>
   Part III
  </h1>
  <h1>
   System Component
  </h1>
  <p block-type="Text">
   <span id="page-157-0">
   </span>
   Encompassing a range of system-level functionalities, this part describes components related to system boot, clocks, GPIO, timers, watchdogs, debug assistance, low-power management, and various system registers.
  </p>
  <h1>
   <span id="page-158-4">
   </span>
   <span id="page-158-0">
   </span>
   Chapter 5
  </h1>
  <h1>
   IO MUX and GPIO Matrix (GPIO, IO MUX)
  </h1>
  <h1>
   5.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-158-1">
   </span>
   The ESP32-C3 chip features 22 physical GPIO pins. Each pin can be used as a general-purpose I/O, or be connected to an internal peripheral signal. Through GPIO matrix and IO MUX, peripheral input signals can be from any IO pins, and peripheral output signals can be routed to any IO pins. Together these modules provide highly configurable I/O.
  </p>
  <p block-type="Text">
   Note that the GPIO pins are numbered from 0 ~ 21.
  </p>
  <h1>
   5.2 Features
  </h1>
  <h4>
   <span id="page-158-2">
   </span>
   GPIO Matrix Features
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A full-switching matrix between the peripheral input/output signals and the pins.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     42 peripheral input signals can be sourced from the input of any GPIO pins.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The output of any GPIO pins can be from any of the 78 peripheral output signals.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports signal synchronization for peripheral inputs based on APB clock bus.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Provides input signal filter.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports sigma delta modulated output.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports GPIO simple input and output.
    </li>
   </ul>
  </p>
  <h4>
   IO MUX Features
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Provides one configuration register IO_MUX_GPIO
     <i>
      n
     </i>
     _REG for each GPIO pin. The pin can be configured to
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       perform GPIO function routed by GPIO matrix;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       or perform direct connection
       <a href="#page-186-0">
        bypassing GPIO matrix
       </a>
       .
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports some high-speed digital signals (SPI, JTAG, UART) bypassing GPIO matrix for better high-frequency digital performance. In this case, IO MUX is used to connect these pins directly to peripherals.
    </li>
   </ul>
  </p>
  <h1>
   5.3 Architectural Overview
  </h1>
  <p block-type="Text">
   <span id="page-158-3">
   </span>
   This section provides an overview to the architecture of IO MUX and GPIO matrix with the following figures:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Figure 5.3-1 shows the general work flow of IO MUX and GPIO matrix.
  </p>
  <p block-type="Text">
   Espressif Systems 159
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Figure 5.3-2 shows in details how IO MUX and GPIO matrix route signals from pins to peripherals, and from peripherals to pins.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Figure 5.3-3 shows the interface logic for a GPIO pin.
    </li>
   </ul>
  </p>
  <p>
   <span id="page-159-0">
   </span>
   <img src="_page_159_Figure_2.jpeg"/>
  </p>
  <p>
  </p>
  <p>
   <img src="_page_159_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-159-1">
   </span>
   <img src="_page_159_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 5.3-2. Architecture of IO MUX and GPIO Matrix
  </p>
  <p block-type="Text">
   <i>
    ⃝
   </i>
   1 Only part of peripheral input signals (marked "yes" in column "Direct input through IO MUX" in Table 5.11-1) can bypass GPIO matrix. The other input signals can only be routed to peripherals via GPIO matrix.
  </p>
  <p block-type="Text">
   <i>
    ⃝
   </i>
   2 There are only 22 inputs from GPIO SYNC to GPIO matrix, since ESP32-C3 provides 22 GPIO pins in
  </p>
  <p block-type="Text">
   total.
  </p>
  <p block-type="Text">
   <i>
    ⃝
   </i>
   3 The pins supplied by VDD3P3_CPU or by VDD3P3_RTC are controlled by the signals: IE, OE, WPU, and WPD.
  </p>
  <p block-type="Text">
   <i>
    ⃝
   </i>
   4 Only part of peripheral outputs (marked "yes" in column "Direct output through IO MUX" in Table 5.11-1) can be routed to pins bypassing GPIO matrix. See Table 5.11-1.
  </p>
  <p block-type="TextInlineMath">
   <i>
    ⃝
   </i>
   5 There are only 22 outputs (GPIO pin X: 0 ~ 21) from GPIO matrix to IO MUX.
  </p>
  <p block-type="Text">
   <span id="page-160-3">
   </span>
   Figure 5.3-3 shows the internal structure of a pad, which is an electrical interface between the chip logi
   <a href="#page-168-0">
    c and
   </a>
   the GPIO pin. The structure is applicable to all 22 GPIO
   <a href="#page-168-0">
    pins a
   </a>
   nd can be controlled using IE, OE, WPU, and WPD signals.
  </p>
  <p>
   <img src="_page_160_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 5.3-3. Internal Structure of a Pad
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     IE: input enable
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     OE: output enable
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WPU: internal weak pull-up
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WPD: internal weak pull-down
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bonding pad: a terminal point of the chip logic used to make a physical connection from the chip die to GPIO pin in the chip package.
    </li>
   </ul>
  </p>
  <h1>
   5.4 Peripheral Input via GPIO Matrix
  </h1>
  <h1>
   <span id="page-160-0">
   </span>
   5.4.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-160-1">
   </span>
   To receive a peripheral input signal via GPIO matrix, the matrix is configured to source the peripheral input signal from one of the 22 GPIOs (0 ~ 21), see Table 5.11-1. Meanwhile, register corresponding to the peripheral signal should be set to receive input signal via GPIO matrix.
  </p>
  <p block-type="Text">
   <span id="page-160-2">
   </span>
   Espressif Systems 161
  </p>
  <h1>
   5.4.2 Signal Synchronization
  </h1>
  <p block-type="Text">
   When signals are directed from pins using GPIO matrix, the signals will be synchronized to the APB bus clock by GPIO SYNC hardware, then go to GPIO matrix. This synchronization applies to all GPIO matrix signals but does not apply when using the IO MUX, see Figure 5.3-2.
  </p>
  <p>
   <span id="page-161-1">
   </span>
   <img src="_page_161_Figure_2.jpeg"/>
  </p>
  <p>
   Figure 5.4-1. GPIO Input Synchronized on APB Clock Rising Edge or on Falling Edge
  </p>
  <p block-type="Text">
   Figure 5.4-1 shows the functionality of GPIO SYNC. In the figure, negative sync and positive sync mean GPIO input is synchronized on APB clock falling edge and on APB clock rising edge, respectively.
  </p>
  <h1>
   5.4.3
   <a href="#page-161-1">
    F
   </a>
   unctional Description
  </h1>
  <p block-type="Text">
   <span id="page-161-0">
   </span>
   To read GPIO pin
   <i>
    X
   </i>
   1 into peripheral signal
   <i>
    Y
   </i>
   , follow the steps below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure register GPIO_FUNC
     <i>
      y
     </i>
     _IN_SEL_CFG_REG corresponding to peripheral signal
     <i>
      Y
     </i>
     in GPIO matrix:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set GPI
       <a href="#page-162-3">
        O
       </a>
       _SIG
       <i>
        y
       </i>
       _IN_SEL to enable peripheral signal input via GPIO matrix.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set GPIO_FUNC
       <i>
        y
       </i>
       _IN_SEL
       <a href="#page-184-0">
        to the desired GPIO
       </a>
       pin, i.e.
       <i>
        X
       </i>
       here.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that
   <a href="#page-184-0">
    some peripheral si
   </a>
   gnals have no valid GPIO_SIG
   <i>
    y
   </i>
   _IN_SEL bit, namely, these peripherals can only receive input signals via GPIO matrix.
  </p>
  <p block-type="Text">
   2. Optionall
   <a href="#page-184-0">
    y enable the filter for p
   </a>
   in input signals by setting the register IO_MUX_GPIO
   <i>
    n
   </i>
   _FILTER_EN. Only the signals with a valid width of more than two c
   <a href="#page-184-0">
    lock cycles can be
   </a>
   sampled, see Figure 5.4-2.
  </p>
  <p>
   <span id="page-161-2">
   </span>
   <img src="_page_161_Figure_12.jpeg"/>
  </p>
  <p>
   Figure 5.4-2. Filter Timing of GPIO Input Signals
  </p>
  <p block-type="Text">
   3. Synchronize GPIO input. To do so, please set GPIO_PIN
   <i>
    x
   </i>
   _REG corresponding to GPIO pin
   <i>
    X
   </i>
   as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set GPIO_PIN
     <i>
      x
     </i>
     _SYNC1_BYPASS to enable input signal synchronized on rising edge or on falling edge in the first clock, see Figure 5.4-1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set GPIO_PIN
     <i>
      x
     </i>
     _SYNC2_BYPASS to enable input signal synchronized on rising edge or on falling edg
     <a href="#page-183-0">
      e in the second clock, see F
     </a>
     igure 5.4-1.
    </li>
    <li block-type="ListItem">
     4. Configure IO MUX register to enable pi
     <a href="#page-161-1">
      n inpu
     </a>
     t. For this end, please set IO_MUX_GPIO
     <i>
      x
     </i>
     _REG correspo
     <a href="#page-183-0">
      nding to GPIO pin
     </a>
     <i>
      X
     </i>
     as follows:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set IO_MUX_GPIO
       <i>
        x
       </i>
       _FUN_IE to enabl
       <a href="#page-161-1">
        e inpu
       </a>
       t
       <sup>
        2
       </sup>
       .
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set or clear IO_MUX_GPIO
       <i>
        x
       </i>
       _FUN_WPU and IO_MUX_GPIO
       <i>
        x
       </i>
       _FUN
       <a href="#page-186-0">
        _WPD, as desired, to e
       </a>
       nable or disable pull-up and pull-down resistors.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For example,
   <a href="#page-186-0">
   </a>
   t
   <a href="#page-186-0">
    o connect I2S MCLK inpu
   </a>
   t signal
   <sup>
    3
   </sup>
   (I2S_MCLK_in, signal index 12) to GPIO7, please follow the steps below. Note that
   <a href="#page-186-0">
    GPIO7 is also named as MT
   </a>
   DO
   <a href="#page-186-0">
    pin.
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Set GPIO_SIG12_IN_SEL in register GPIO_FUNC12_IN_SEL_CFG_REG to enable peripheral signal input via GPIO matrix.
    </li>
    <li block-type="ListItem">
     2. Set GPIO_FUNC12_IN_SEL in register GPIO_FUNC12_IN_SEL_CFG_REG to 7.
    </li>
    <li block-type="ListItem">
     3. Set
     <a href="#page-184-0">
      IO_MUX_GPIO7_FUN
     </a>
     _IE in register
     <a href="#page-184-0">
      IO_MUX_GPIO7_REG
     </a>
     to enable pin input.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. O
     <a href="#page-186-0">
      ne input pin can be connec
     </a>
     ted to mult
     <a href="#page-186-0">
      iple peripheral input sig
     </a>
     nals.
    </li>
    <li block-type="ListItem">
     2. The input signal can be inverted by configuring GPIO_FUNC
     <i>
      y
     </i>
     _IN_INV_SEL.
    </li>
    <li block-type="ListItem">
     <span id="page-162-3">
     </span>
     3. It is possible to have a peripheral read a constantly low or constantly high input value without connecting this input to a pin. This can be done by selecting a special GPIO_FUNC
     <i>
      y
     </i>
     _IN_SEL input, instead of a GPIO number:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       When GPIO_FUNC
       <i>
        y
       </i>
       _IN_SEL is set to 0x1F
       <a href="#page-184-0">
        , input signal is always 0.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       When GPIO_FUNC
       <i>
        y
       </i>
       _IN_SEL is set to 0x1E, input signal is always 1.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   5.4.4 Simp
   <a href="#page-184-0">
    le GPIO Input
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-162-0">
   </span>
   GPIO_IN_REG holds the input values of each GPIO pin. The input value of any GPIO pin can be read at any time without configuring GPIO matrix for a particular peripheral signal. However, it is necessary to enable the input via IO MUX by setting IO_MUX_GPIO
   <i>
    x
   </i>
   _FUN_IE bit in register IO_MUX_GPIO
   <i>
    x
   </i>
   _REG corresponding to pin
   <i>
    X
   </i>
   <a href="#page-181-0">
    , as mentione
   </a>
   d in Section 5.4.2.
  </p>
  <h1>
   5.5 Peripheral
   <a href="#page-160-2">
    O
   </a>
   <a href="#page-186-0">
    utput via GP
   </a>
   IO Matr
   <a href="#page-186-0">
    ix
   </a>
  </h1>
  <h1>
   <span id="page-162-1">
   </span>
   5.5.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-162-2">
   </span>
   To output a signal from a peripheral via GPIO matrix, the matrix is configured to route peripheral output signals (only signals with a name assigned in the column "Output signal" in Table 5.11-1) to one of the 22 GPIOs (0 ~ 21). See Table 5.11-1.
  </p>
  <p block-type="Text" class="has-continuation">
   The output signal is routed from the peripheral into GPIO matrix and then into IO MUX. IO MUX must be configured to set the chosen pin to GPIO function. This enables the outp
   <a href="#page-168-0">
    ut GP
   </a>
   IO signal to be connected to
  </p>
  <p block-type="Text">
   the pin.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   There is a range of peripheral output signals (97 ~ 100) which are not connected to any peripheral, but to the input signals (97 ~ 100 in Table 5.11-1) directly. These can be used to input a signal from one GPIO pin and output directly to another GPIO pin.
  </p>
  <h1>
   5.5.2 Functiona
   <a href="#page-168-0">
    l De
   </a>
   scription
  </h1>
  <p block-type="Text">
   <span id="page-163-0">
   </span>
   Some of the 78 output signals (signals with a name assigned in the column "Output signal" in Table 5.11-1) can be set to go through GPIO matrix into IO MUX and then to a pin. Figure 5.3-2 illustrates the configuration.
  </p>
  <p block-type="Text">
   To output peripheral signal
   <i>
    Y
   </i>
   to a particular GPIO pin
   <i>
    X
   </i>
   1 , follow these steps:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure register GPIO_FUNC
     <i>
      x
     </i>
     _OUT_SEL_CFG_REG and GPIO_
     <a href="#page-159-1">
      ENAB
     </a>
     LE_REG[
     <i>
      x
     </i>
     ] correspondin
     <a href="#page-168-0">
      g to G
     </a>
     PIO pin
     <i>
      X
     </i>
     in GPIO matrix. Recommended operation: use corresponding W1TS (write 1 to set) and W1TC (write 1 to clear) registers to set or clear GPIO_ENABL
     <a href="#page-163-2">
      E_
     </a>
     REG.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set the GPIO_FUNC
       <i>
        x
       </i>
       _OUT_SEL
       <a href="#page-184-1">
        field in register
       </a>
       GPIO_FUNC
       <i>
        x
       </i>
       <a href="#page-179-0">
        _OUT_SEL_C
       </a>
       FG_REG to the index of the desired peripheral output signal
       <i>
        Y
       </i>
       .
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the signal should always b
       <a href="#page-179-0">
        e enabled as an outp
       </a>
       ut, set the GPIO_FUNC
       <i>
        x
       </i>
       _OEN_SEL bit in register GPIO_FUNC
       <i>
        x
       </i>
       <a href="#page-184-1">
        _OUT_SEL_CFG_R
       </a>
       EG and the bit in register
       <a href="#page-184-1">
        GPIO_ENABLE_W1TS_REG
       </a>
       , corresponding to GPIO pin
       <i>
        X
       </i>
       . To have the output enable signal decided by internal logic (for example, the SPIQ_oe in column "Output enable signal when GPIO_FUNC
       <i>
        n
       </i>
       _OEN_SEL
       <a href="#page-184-1">
        = 0" in Table
       </a>
       5.11-1), clear
       <a href="#page-184-1">
        GPIO_FUNC
       </a>
       <i>
        x
       </i>
       _OEN_SEL bit instead.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set the corresponding bit in register G
       <a href="#page-184-1">
        PIO_ENABLE_W1TC_REG
       </a>
       to disable th
       <a href="#page-168-0">
        e outp
       </a>
       ut from the GPIO
       <a href="#page-184-1">
        pin.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. For
     <a href="#page-184-1">
     </a>
     a
     <a href="#page-184-1">
      n open drai
     </a>
     n output, set the GPIO_PIN
     <i>
      x
     </i>
     _PAD_DRIVER bit in register GPIO_PIN
     <i>
      x
     </i>
     _REG corresponding to GPIO pin
     <i>
      X
     </i>
     .
    </li>
    <li block-type="ListItem">
     3. Configure IO MUX register to enable output via GPIO matrix. Set the IO_MUX_GPIO
     <i>
      x
     </i>
     _REG corresponding to GPIO pin
     <i>
      X
     </i>
     as follows:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set the field IO_MUX_GPIO
       <i>
        x
       </i>
       _MCU_SEL to desired IO MUX function corresponding to GPIO pin
       <i>
        X
       </i>
       . This is Function 1 (GPIO function), numeric value 1, for all pins.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set the IO_MUX_GPIO
       <i>
        x
       </i>
       _FUN_DRV field to the desired value for output strength (0 ~ 3).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If using ope
       <a href="#page-186-0">
        n drain mode, set/clear the
       </a>
       IO_MUX_GPIO
       <i>
        x
       </i>
       _FUN_WPU and IO_MUX_GPIO
       <i>
        x
       </i>
       _FUN_WPD bits to enable/disable the internal pull-up/pull-down resistors.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. The output signal from a single peripheral can be sent to multiple pins simultaneously.
    </li>
    <li block-type="ListItem">
     <span id="page-163-2">
     </span>
     <span id="page-163-1">
     </span>
     2. The output signal can be inverted by setting GPIO_FUNC
     <i>
      x
     </i>
     _OUT_INV_SEL bit.
    </li>
   </ul>
  </p>
  <h1>
   5.5.3 Simple GPIO Output
  </h1>
  <p block-type="Text">
   GPIO matrix can also be used for simple GPIO output. This can be done as below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set GPIO matrix GPIO_FUNC
     <i>
      n
     </i>
     _OUT_SEL with a special peripheral index 128 (0x80);
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set the corresponding bit in GPIO_OUT_REG register to the desired GPIO output value.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GPIO_OUT_REG[0] ~ GPIO_O
     <a href="#page-178-2">
      UT_REG[21] corres
     </a>
     pond to GPIO0 ~ GPIO21, and GPIO_OUT_REG[25:22] are invalid.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Recommended operation: use corresponding W1TS and W1TC registers, such as GPIO_OUT_W1TS/GPIO_OUT _W1TC to set or clear the registers GPIO_OUT_REG.
    </li>
   </ul>
  </p>
  <h1>
   5.5.4
   <a href="#page-179-1">
    Sig
   </a>
   ma Delta Modul
   <a href="#page-178-2">
    ated Outpu
   </a>
   t (SDM)
  </h1>
  <h4>
   <span id="page-164-0">
   </span>
   5.5.4.1 Functional Description
  </h4>
  <p block-type="Text">
   <span id="page-164-1">
   </span>
   Four out of the 125 peripheral outputs (output index: 55 ~ 58 in Table 5.11-1) support 1-bit second-order sigma delta modulation. By default output is enabled for these four channels. This modulator can also output PDM (pulse density modulation) signal with configurable duty cycle. The transfer function of this second-order SDM modulator is:
  </p>
  <p block-type="Equation">
   <math display="block">
    H(z) = X(z)z^{-1} + E(z)(1-z^{-1})^2
   </math>
  </p>
  <p block-type="Text">
   E(z) is quantization error and X(z) is the input.
  </p>
  <p block-type="Text">
   Sigma Delta modulator supports scaling down of APB_CLK by divider 1 ~ 256:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set GPIOSD_FUNCTION_CLK_EN to enable the modulator clock.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure register GPIOSD_SD
     <i>
      n
     </i>
     _PRESCALE (
     <i>
      n
     </i>
     is 0 ~ 3 for four channels).
    </li>
   </ul>
  </p>
  <p block-type="Text">
   After scali
   <a href="#page-188-0">
    ng, the clock cycle is equal to
   </a>
   one pulse output cycle from the modulator.
  </p>
  <p block-type="Text">
   GPIOSD_SD
   <i>
    n
   </i>
   _IN is a si
   <a href="#page-188-1">
    gned number with a range
   </a>
   of [-128, 127] and is used to control the duty cycle
   <sup>
    1
   </sup>
   of PDM output signal.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GPIOSD_SD
     <i>
      n
     </i>
     _IN = -128, the duty cycle of the output signal is 0%.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-188-1">
      GPIOSD_SD
     </a>
     <i>
      n
     </i>
     _IN = 0, the duty cycle of the output signal is near 50%.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-188-1">
      GPIOSD_SD
     </a>
     <i>
      n
     </i>
     _IN = 127, the duty cycle of the output signal is close to 100%.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The
   <a href="#page-188-1">
   </a>
   f
   <a href="#page-188-1">
    ormula for calcula
   </a>
   ting PDM signal duty cycle is shown as below:
  </p>
  <p block-type="Equation">
   <math display="block">
    Duty\_Cycle = \frac{GPIOSD\_SDn\_IN + 128}{256}
   </math>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   <span id="page-164-2">
   </span>
   For PDM signals, duty cycle refers to the percentage of high level cycles to the whole statistical period (several pulse cycles, for example 256 pulse cycles).
  </p>
  <h4>
   5.5.4.2 SDM Configuration
  </h4>
  <p block-type="Text">
   The configuration of SDM is shown below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Route one of SDM outputs to a pin via GPIO matrix, see Section 5.5.2.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Enable the modulator clock by setting the register GPIOSD_FUNCTION_CLK_EN.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure the divider value by setting the register GPIOSD_SD
     <i>
      n
     </i>
     <a href="#page-163-0">
      _PRES
     </a>
     CALE.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure the duty cycle of SDM output signal by
     <a href="#page-188-0">
      setting the register
     </a>
     GPIOSD_SD
     <i>
      n
     </i>
     _IN.
    </li>
   </ul>
  </p>
  <h1>
   5.6 Direct Input and Output vi
   <a href="#page-188-1">
    a IO MUX
   </a>
  </h1>
  <h1>
   <span id="page-165-0">
   </span>
   5.6.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-165-1">
   </span>
   Some high-speed signals (SPI and JTAG) can bypass GPIO matrix for better high-frequency digital performance. In this case, IO MUX is used to connect these pins directly to peripherals.
  </p>
  <p block-type="Text">
   This option is less flexible than routing signals via GPIO matrix, as the IO MUX register for each GPIO pin can only select from a limited number of functions, but high-frequency digital performance can be improved.
  </p>
  <h1>
   5.6.2 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-165-2">
   </span>
   Two registers must be configured in order to bypass GPIO matrix for peripheral input signals:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. IO_MUX_GPIO
     <i>
      n
     </i>
     _MCU_SEL for the GPIO pin must be set to the required pin function. For the list of pin functions, please refer to Section 5.12.
    </li>
    <li block-type="ListItem">
     2. Clear GPIO_SIG
     <i>
      n
     </i>
     _IN_SEL to route the input directly to the peripheral.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   To by
   <a href="#page-186-0">
    pass GPIO matrix for periphe
   </a>
   ral out
   <a href="#page-173-0">
    put
   </a>
   signals, IO_MUX_GPIO
   <i>
    n
   </i>
   _MCU_SEL for the GPIO pin must be set to the required pin function. For the list of pin functions, please refer to Section 5.12.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   Not all signals can be directly connected to peripheral
   <a href="#page-186-0">
    via IO MUX. Some input/outp
   </a>
   <a href="#page-173-0">
    ut sig
   </a>
   nals can only be connected to peripheral via GPIO matrix.
  </p>
  <h1>
   5.7 Analog Functions of GPIO Pins
  </h1>
  <p block-type="Text">
   <span id="page-165-3">
   </span>
   Some GPIO pins in ESP32-C3 provide analog functions. When the pin is used for analog purpose, make sure that pull-up and pull-down resistors are disabled by following configuration:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set IO_MUX_GPIO
     <i>
      n
     </i>
     _MCU_SEL to 1, and clear IO_MUX_GPIO
     <i>
      n
     </i>
     _FUN_IE, IO_MUX_GPIO
     <i>
      n
     </i>
     _FUN_WPU, IO_ MUX_GPIO
     <i>
      n
     </i>
     _FUN_WPD.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Write 1 to GPIO_ENABLE_W1TC
     <i>
      [n]
     </i>
     , to clear output enable.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-165-4">
   </span>
   See Table 5.13-1
   <a href="#page-186-0">
    for analog functions
   </a>
   of ESP32-C3
   <a href="#page-186-0">
    pins.
   </a>
  </p>
  <h1>
   5.8 Pin Functions in Light-sleep
  </h1>
  <p block-type="Text">
   Pins may provide different functions when ESP32-C3 is in Light-sleep mode. If IO_MUX_SLP_SEL in register IO_MUX_
   <i>
    n
   </i>
   _REG for a GPIO pin is set to 1, a different set of bits will be used to control the pin when the chip is in Light-sleep mode.
  </p>
  <span id="page-166-4">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Table 5.8-1. Bits Used to Control IO MUX Functions in Light-sleep Mode
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      IO MUX Functions
     </td>
     <td>
      Normal Execution
      <br/>
      OR IO_MUX_SLP_SEL = 0
     </td>
     <td>
      Light-sleep Mode
      <br/>
      AND IO_MUX_SLP_SEL = 1
     </td>
    </tr>
    <tr>
     <td>
      Output Drive Strength
     </td>
     <td>
      IO_MUX_FUN_DRV
     </td>
     <td>
      IO_MUX_MCU_DRV
     </td>
    </tr>
    <tr>
     <td>
      Pull-up Resistor
     </td>
     <td>
      IO_MUX_FUN_WPU
     </td>
     <td>
      IO_MUX_MCU_WPU
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 5.8-1. Bits Used to Control IO MUX Functions in Light-
   <a href="#page-186-0">
    sleep Mode
   </a>
  </h4>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="Text">
   If IO_MUX_SLP_SEL is set to 0, pin fun
   <a href="#page-184-1">
    ctions rema
   </a>
   in the same in both nor
   <a href="#page-186-0">
    mal execution and Ligh
   </a>
   t-sleep mode. Please refer to Section 5.5.2 for how to enable output in normal execution.
  </p>
  <h1>
   5.9 Pin
   <a href="#page-163-0">
    Hol
   </a>
   d Feature
  </h1>
  <p block-type="Text">
   <span id="page-166-0">
   </span>
   Each GPIO pin (including the RTC pins: GPIO0 ~ GPIO5) has an individual hold function controlled by a RTC register. When the pin is set to hold, the state is latched at that moment and will not change no matter how the internal signals change or how the IO MUX/GPIO configuration is modified. Users can use the hold function for the pins to retain the pin state through a core reset triggered by watchdog time-out or Deep-sleep events.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For digital pins (GPIO6 ~21), to maintain pin input/output status in Deep-sleep mode, users can set RTC_CNTL_DIG _PAD_HOLD
     <i>
      n
     </i>
     in register RTC_CNTL_DIG_PAD_HOLD_REG to 1 before powering down. To disable the hold function after the chip is woken up, users can set RTC_CNTL_DIG_PAD_HOLD
     <i>
      n
     </i>
     to 0.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For RTC pins (GPIO0 ~5), the input and output values are controlled by the corresponding
     <a href="#page-258-0">
      bits of register
     </a>
     <a href="#page-258-0">
      RTC_CNTL
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   _PAD_HOLD_REG, and users can set it to 1 to
   <a href="#page-258-0">
    hold the value or set it to 0 to
   </a>
   unhold the value.
  </p>
  <h1>
   5.10
   <a href="#page-257-0">
    Power S
   </a>
   upplies and Management of GPIO Pins
  </h1>
  <h1>
   <span id="page-166-1">
   </span>
   5.10.1 Power Supplies of GPIO Pins
  </h1>
  <p block-type="Text">
   <span id="page-166-3">
   </span>
   <span id="page-166-2">
   </span>
   For more information on the power supply for GPIO pins, please refer to Pin Definition in
   <i>
    ESP32-C3 Datasheet
   </i>
   . All the pins can be used to wake up the chip from Light-sleep mode, but only the pins (GPIO0 ~ GPIO5) in VDD3P3_RTC domain can be used to wake up the chip from Deep-sleep mode.
  </p>
  <h1>
   5.10.2 Power Supply Management
  </h1>
  <p block-type="Text">
   Each ESP32-C3 pin is connected to one of the two different power domains.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     VDD3P3_RTC: the input power supply for both RTC and CPU
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     VDD3P3_CPU: the input power supply for CPU
    </li>
   </ul>
  </p>
  <h1>
   5.11 Peripheral Signal List
  </h1>
  <p block-type="Text">
   <span id="page-167-0">
   </span>
   Table 5.11-1 shows the peripheral input/output signals via GPIO matrix.
  </p>
  <p block-type="Text">
   Please pay attention to the configuration of the bit GPIO_FUNC
   <i>
    n
   </i>
   _OEN_SEL:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-168-0">
      GPIO_
     </a>
     FUNC
     <i>
      n
     </i>
     _OEN_SEL = 1: the output enable is controlled by the corresponding bit
     <i>
      n
     </i>
     of GPIO_ENABLE_REG:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       GPIO_ENABLE_REG = 0: output is disab
       <a href="#page-184-1">
        led;
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-179-0">
        GPIO_ENABLE
       </a>
       <a href="#page-184-1">
        _REG
       </a>
       = 1: output is enabled;
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GPIO_FUNC
     <i>
      n
     </i>
     <a href="#page-179-0">
      _OEN_SEL
     </a>
     = 0: use the output enable signal from peripheral, for example SPIQ_oe in the column "Output enable signal when GPIO_FUNC
     <i>
      n
     </i>
     _OEN_SEL = 0" of Table 5.11-1. Note that the signals such
     <a href="#page-179-0">
      as SPIQ_oe can be
     </a>
     1 (1'd1) or 0 (1'd0), depending on the configuration of corresponding
     <a href="#page-184-1">
      peripherals. If it's 1'd1 in t
     </a>
     he "Output enable signal when GPIO_FUNC
     <i>
      n
     </i>
     _OEN_SEL = 0", it indicates that once the register GPIO_FUNC
     <i>
      n
     </i>
     _OEN_SEL
     <a href="#page-184-1">
      is cleared, the out
     </a>
     put signal is
     <a href="#page-168-0">
     </a>
     a
     <a href="#page-168-0">
      lways
     </a>
     enabled by default.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   Signals are numbered
   <a href="#page-184-1">
    consecutively, but not all sig
   </a>
   nals are valid.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Only the signals with a name assigned in the column "Input signal" in Table 5.11-1 are valid input signals.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Only the signals with a name assigned in the column "Output signal" in Table 5.11-1 are valid output signals.
    </li>
   </ul>
  </p>
  <span id="page-168-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Signal
      <br/>
      No.
     </th>
     <th>
      Input Signal
     </th>
     <th>
      <b>
       Default
      </b>
      <br/>
      value
     </th>
     <th>
      <b>
       Direct
      </b>
      <br/>
      Input via IO
      <br/>
      <b>
       MUX
      </b>
     </th>
     <th>
      <b>
       Output Signal
      </b>
     </th>
     <th>
      Output enable signal when
      <br/>
      GPIO_FUNCn_OEN_SEL = 0
     </th>
     <th>
      <b>
       Direct
      </b>
      <br/>
      Output via
      <br/>
      <b>
       IO MUX
      </b>
     </th>
    </tr>
    <tr>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      SPIQ_in
     </td>
     <td>
      <math display="inline">
       \circ
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      SPIQ_out
     </td>
     <td>
      SPIQ_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      SPID_in
     </td>
     <td>
      <math display="inline">
       \circ
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      SPID_out
     </td>
     <td>
      SPID_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      <math>
       \mathbf{c}
      </math>
     </td>
     <td>
      SPIHD_in
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      SPIHD_out
     </td>
     <td>
      SPIHD_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      SPIWP_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      SPIWP_out
     </td>
     <td>
      SPIWP_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      <math>
       \overline{4}
      </math>
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      SPICLK_out_mux
     </td>
     <td>
      SPICLK_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \bar{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      SPICSO_out
     </td>
     <td>
      SPICSO_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      UORXD_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      UOTXD_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      <math>
       \overline{7}
      </math>
     </td>
     <td>
      UOCTS_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      UORTS_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
      UODSR_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      UODTR_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
      U1RXD_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      U1TXD_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      10
     </td>
     <td>
      U1CTS_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      U1RTS_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      11
     </td>
     <td>
      U1DSR_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      U1DTR_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      12
     </td>
     <td>
      I2S_MCLK_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      I2S_MCLK_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      13
     </td>
     <td>
      I2SO_BCK_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      I2SO_BCK_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      14
     </td>
     <td>
      I2SO_WS_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      I2SO_WS_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      15
     </td>
     <td>
      I2SI_SD_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      I2SO_SD_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      16
     </td>
     <td>
      I2SI_BCK_in
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      I2SI_BCK_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no.
     </td>
    </tr>
    <tr>
     <td>
      17
     </td>
     <td>
      I2SI_WS_in
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      I2SI_WS_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      18
     </td>
     <td>
      gpio_bt_priority
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      gpio_wlan_prio
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      19
     </td>
     <td>
      gpio_bt_active
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      gpio_wlan_active
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      20
     </td>
     <td>
      <math display="inline">
       \mathcal{L}_{\mathcal{A}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \mathcal{L}_{\mathcal{A}}
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      21
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      22
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      23
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      24
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Signal
      <br/>
      No.
     </th>
     <th>
      Input Signal
     </th>
     <th>
      <b>
       Default
      </b>
      <br/>
      value
     </th>
     <th>
      <b>
       Direct
      </b>
      <br/>
      Input via IO
      <br/>
      <b>
       MUX
      </b>
     </th>
     <th>
      <b>
       Output Signal
      </b>
     </th>
     <th>
      Output enable signal when
      <br/>
      GPIO_FUNCn_OEN_SEL = 0
     </th>
     <th>
      <b>
       Direct
      </b>
      <br/>
      Output via
      <br/>
      <b>
       IO MUX
      </b>
     </th>
    </tr>
    <tr>
     <td>
      25
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      26
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="block">
       \overline{\phantom{m}}
      </math>
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      1'd1
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      27
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      28
     </td>
     <td>
      cpu_gpio_in0
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      cpu_gpio_out0
     </td>
     <td>
      cpu_gpio_out_oen0
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      29
     </td>
     <td>
      cpu_gpio_in1
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      cpu_gpio_out1
     </td>
     <td>
      cpu_gpio_out_oen1
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      30
     </td>
     <td>
      cpu_gpio_in2
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      cpu_gpio_out2
     </td>
     <td>
      cpu_gpio_out_oen2
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      31
     </td>
     <td>
      cpu_gpio_in3
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      cpu_gpio_out3
     </td>
     <td>
      cpu_gpio_out_oen3
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      32
     </td>
     <td>
      cpu_gpio_in4
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      cpu_gpio_out4
     </td>
     <td>
      cpu_gpio_out_oen4
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      33
     </td>
     <td>
      cpu_gpio_in5
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      cpu_gpio_out5
     </td>
     <td>
      cpu_gpio_out_oen5
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      34
     </td>
     <td>
      cpu_gpio_in6
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      cpu_gpio_out6
     </td>
     <td>
      cpu_gpio_out_oen6
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      35
     </td>
     <td>
      cpu_gpio_in7
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      cpu_gpio_out7
     </td>
     <td>
      cpu_gpio_out_oen7
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      36
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
     </td>
     <td>
      usb_jtag_tck
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      37
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      usb_jtag_tms
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      38
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      usb_jtag_tdi
     </td>
     <td>
      1'd1
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      39
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      usb_jtag_tdo
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      40
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      1'd1
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      41
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      42
     </td>
     <td>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      1'd1
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      43
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      44
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      45
     </td>
     <td>
      ext_adc_start
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      ledc_ls_sig_out0
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      46
     </td>
     <td>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \mathbf{r}
      </math>
     </td>
     <td>
      ledc_ls_sig_out1
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      47
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ledc_ls_sig_out2
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      48
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      ledc_ls_sig_out3
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      49
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ledc_ls_sig_out4
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      50
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      ledc_ls_sig_out5
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      51
     </td>
     <td>
      rmt_sig_in0
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      rmt_sig_out0
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Signal
      <br/>
      No.
     </th>
     <th>
      Input Signal
     </th>
     <th>
      <b>
       Default
      </b>
      <br/>
      value
     </th>
     <th>
      <b>
       Direct
      </b>
      <br/>
      Input via IO
      <br/>
      <b>
       MUX
      </b>
     </th>
     <th>
      <b>
       Output Signal
      </b>
     </th>
     <th>
      Output enable signal when
      <br/>
      GPIO_FUNCn_OEN_SEL = 0
     </th>
     <th>
      <b>
       Direct
      </b>
      <br/>
      Output via
      <br/>
      <b>
       IO MUX
      </b>
     </th>
    </tr>
    <tr>
     <td>
      52
     </td>
     <td>
      <math>
       rmt
      </math>
      _sig_in1
     </td>
     <td>
      <math>
       \circ
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      rmt_sig_out1
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      53
     </td>
     <td>
      I2CEXTO_SCL_in
     </td>
     <td>
      <math>
       \mathbf{1}
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      I2CEXTO_SCL_out
     </td>
     <td>
      I2CEXTO_SCL_oe
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      54
     </td>
     <td>
      I2CEXTO_SDA_in
     </td>
     <td>
      <math>
       \mathbf{1}
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      I2CEXTO_SDA_out
     </td>
     <td>
      I2CEXTO_SDA_oe
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      55
     </td>
     <td>
      <math display="inline">
       \mathbf{r}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      gpio_sd0_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      56
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      gpio_sd1_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      57
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="block">
       \overline{\phantom{m}}
      </math>
     </td>
     <td>
      gpio_sd2_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      58
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      gpio_sd3_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      59
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      I2SO_SD1_out
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      60
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      61
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      62
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      63
     </td>
     <td>
      FSPICLK_in
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      FSPICLK_out_mux
     </td>
     <td>
      FSPICLK_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      64
     </td>
     <td>
      FSPIQ_in
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      FSPIQ_out
     </td>
     <td>
      FSPIQ_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      65
     </td>
     <td>
      FSPID_in
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      FSPID_out
     </td>
     <td>
      FSPID_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      66
     </td>
     <td>
      FSPIHD_in
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      FSPIHD_out
     </td>
     <td>
      FSPIHD_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      67
     </td>
     <td>
      FSPIWP_in
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      FSPIWP_out
     </td>
     <td>
      FSPIWP_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      68
     </td>
     <td>
      FSPICSO_in
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      yes
     </td>
     <td>
      FSPICSO_out
     </td>
     <td>
      FSPICSO_oe
     </td>
     <td>
      yes
     </td>
    </tr>
    <tr>
     <td>
      69
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      FSPICS1_out
     </td>
     <td>
      FSPICS1_oe
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      70
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      FSPICS2_out
     </td>
     <td>
      FSPICS2_oe
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      71
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      FSPICS3_out
     </td>
     <td>
      FSPICS3_oe
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      72
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      FSPICS4_out
     </td>
     <td>
      FSPICS4_oe
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      73
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      <math display="inline">
       \mathbf{r}
      </math>
     </td>
     <td>
      FSPICS5_out
     </td>
     <td>
      FSPICS5_oe
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      74
     </td>
     <td>
      twai_rx
     </td>
     <td>
      <math>
       \mathbf{1}
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      twai_tx
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      75
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      twai_bus_off_on
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      76
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      twai_clkout
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      77
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      78
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Espressif Systems
  </p>
  <p block-type="Text">
   171
   <a href="https://www.espressif.com/en/company/documents/documentation_feedback?docId=5086§ions=&amp;version=1.3">
    Submit Documentation Feedback
   </a>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Signal
      <br/>
      No.
     </th>
     <th>
      <b>
       Input Signal
      </b>
     </th>
     <th>
      Default
      <br/>
      value
     </th>
     <th>
      <b>
       Direct
      </b>
      <br/>
      Input via IO
      <br/>
      <b>
       MUX
      </b>
     </th>
     <th>
      <b>
       Output Signal
      </b>
     </th>
     <th>
      Output enable signal when
      <br/>
      GPIO_FUNCn_OEN_SEL = 0
     </th>
     <th>
      <b>
       Direct
      </b>
      <br/>
      Output via
      <br/>
      <b>
       IO MUX
      </b>
     </th>
    </tr>
    <tr>
     <td>
      79
     </td>
     <td>
      <math display="inline">
       \mathbb{Z}^2
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      80
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      81
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \mathbf{r}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      82
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      83
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="block">
       \frac{1}{2}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      84
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      85
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      86
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      87
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      88
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      89
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ant_sel0
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ant_sel1
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      91
     </td>
     <td>
      <math display="inline">
       \mathcal{L}
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ant_sel2
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      92
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ant_sel3
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      93
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ant_sel4
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      94
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ant_sel5
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      95
     </td>
     <td>
      <math display="inline">
       \mathcal{L}
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      ant_sel6
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      ant_sel7
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      97
     </td>
     <td>
      sig_in_func_97
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      sig_in_func97
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      98
     </td>
     <td>
      sig_in_func_98
     </td>
     <td>
      <math display="inline">
       \circlearrowright
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      sig_in_func98
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      99
     </td>
     <td>
      sig_in_func_99
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      sig_in_func99
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      100
     </td>
     <td>
      sig_in_func_100
     </td>
     <td>
      <math display="inline">
       \bigcirc
      </math>
     </td>
     <td>
      no
     </td>
     <td>
      sig_in_func100
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      101
     </td>
     <td>
      <math display="inline">
       \omega
      </math>
     </td>
     <td>
      <math>
       \overline{a}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      102
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="block">
       \frac{1}{2}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      103
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \blacksquare
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      104
     </td>
     <td>
      <math display="inline">
       \mathcal{L}
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \equiv
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
      105
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math display="inline">
       \overline{\phantom{a}}
      </math>
     </td>
     <td>
      <math display="inline">
       \sim
      </math>
     </td>
     <td>
      <math>
       1'
      </math>
      d
      <math>
       1
      </math>
     </td>
     <td>
      no
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      S
      <br/>
      ig
      <br/>
      l
      <br/>
      na
      <br/>
      No
     </th>
     <th>
      Inp
      <br/>
      S
      <br/>
      ig
      <br/>
      l
      <br/>
      t
      <br/>
      u
      <br/>
      na
     </th>
     <th>
      De
      <br/>
      fa
      <br/>
      l
      <br/>
      t
      <br/>
      u
      <br/>
      lue
      <br/>
      va
     </th>
     <th>
      D
      <br/>
      ire
      <br/>
      t Inp
      <br/>
      c
      <br/>
      ia
      <br/>
      I
      <br/>
      O
      <br/>
      Ou
      <br/>
      t
      <br/>
      u
      <br/>
      v
      <br/>
      M
      <br/>
      U
      <br/>
      X
     </th>
     <th>
      S
      <br/>
      ig
      <br/>
      l
      <br/>
      tp
      <br/>
      t
      <br/>
      u
      <br/>
      na
     </th>
     <th>
      D
      <br/>
      ire
      <br/>
      Ou
      <br/>
      b
      <br/>
      le
      <br/>
      ig
      <br/>
      l
      <br/>
      he
      <br/>
      tp
      <br/>
      t
      <br/>
      u
      <br/>
      en
      <br/>
      a
      <br/>
      s
      <br/>
      na
      <br/>
      w
      <br/>
      n
      <br/>
      Ou
      <br/>
      tp
      <br/>
      G
      <br/>
      P
      <br/>
      I
      <br/>
      O_
      <br/>
      F
      <br/>
      U
      <br/>
      N
      <br/>
      C
      <br/>
      O
      <br/>
      E
      <br/>
      N_
      <br/>
      S
      <br/>
      E
      <br/>
      L
      <br/>
      0
      <br/>
      n
      <br/>
      =
      <br/>
      I
      <br/>
      O
      <br/>
      M
      <br/>
      _
     </th>
     <th>
      t
      <br/>
      c
      <br/>
      ia
      <br/>
      t
      <br/>
      u
      <br/>
      v
      <br/>
      U
      <br/>
      X
     </th>
    </tr>
    <tr>
     <td>
      0
      <br/>
      6
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      0
      <br/>
      7
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      0
      <br/>
      8
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      0
      <br/>
      9
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      no
      <br/>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      1
      <br/>
      'd
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      1
      <br/>
      'd
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      1
      <br/>
      'd
      <br/>
      1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      1
      <br/>
      no
      <br/>
      'd
      <br/>
      1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      1
      <br/>
      no
      <br/>
      'd
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      7
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      0
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      1
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      2
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      3
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      C
      <br/>
      L
      <br/>
      -
     </td>
     <td>
      K_
      <br/>
      O
      <br/>
      U
      <br/>
      T_
      <br/>
      t
      <br/>
      1
      <br/>
      ou
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      4
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      C
      <br/>
      L
      <br/>
      -
     </td>
     <td>
      K_
      <br/>
      O
      <br/>
      U
      <br/>
      T_
      <br/>
      2
      <br/>
      t
      <br/>
      ou
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      5
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      C
      <br/>
      L
      <br/>
      -
     </td>
     <td>
      O
      <br/>
      K_
      <br/>
      U
      <br/>
      T_
      <br/>
      3
      <br/>
      t
      <br/>
      ou
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      6
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      -
     </td>
     <td>
      C
      <br/>
      S
      <br/>
      1_
      <br/>
      t
      <br/>
      ou
     </td>
     <td>
      'd
      <br/>
      1
      <br/>
      1
      <br/>
      no
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   5.12 IO MUX Functions List
  </h1>
  <p block-type="Text">
   <span id="page-173-0">
   </span>
   Table 5.12-1 shows the IO MUX functions of each pin.
  </p>
  <span id="page-173-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 5.12-1 shows the IO MUX functions of each pin.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 5.12-1. IO MUX Pin Functions
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Pin
     </td>
     <td>
      Pin Name
     </td>
     <td>
      Function 0
     </td>
     <td>
      Function 1
     </td>
     <td>
      Function 2
     </td>
     <td>
      Function 3
     </td>
     <td>
      DRV
     </td>
     <td>
      Reset
     </td>
     <td>
      Notes
     </td>
    </tr>
    <tr>
     <td>
      No.
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      4
      <br/>
      5
     </td>
     <td>
      XTAL_32K_P
      <br/>
      XTAL_32K_N
     </td>
     <td>
      GPIO0
      <br/>
      GPIO1
     </td>
     <td>
      GPIO0
      <br/>
      GPIO1
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
      2
      <br/>
      2
     </td>
     <td>
      0
      <br/>
      0
     </td>
     <td>
      R
      <br/>
      R
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      GPIO2
     </td>
     <td>
      GPIO2
     </td>
     <td>
      GPIO2
     </td>
     <td>
      FSPIQ
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      R
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
      GPIO3
     </td>
     <td>
      GPIO3
     </td>
     <td>
      GPIO3
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      R
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
      MTMS
     </td>
     <td>
      MTMS
     </td>
     <td>
      GPIO4
     </td>
     <td>
      FSPIHD
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      R
     </td>
    </tr>
    <tr>
     <td>
      10
     </td>
     <td>
      MTDI
     </td>
     <td>
      MTDI
     </td>
     <td>
      GPIO5
     </td>
     <td>
      FSPIWP
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      R
     </td>
    </tr>
    <tr>
     <td>
      12
     </td>
     <td>
      MTCK
     </td>
     <td>
      MTCK
     </td>
     <td>
      GPIO6
     </td>
     <td>
      FSPICLK
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      1*
     </td>
     <td>
      G
     </td>
    </tr>
    <tr>
     <td>
      13
     </td>
     <td>
      MTDO
     </td>
     <td>
      MTDO
     </td>
     <td>
      GPIO7
     </td>
     <td>
      FSPID
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      G
     </td>
    </tr>
    <tr>
     <td>
      14
     </td>
     <td>
      GPIO8
     </td>
     <td>
      GPIO8
     </td>
     <td>
      GPIO8
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      15
     </td>
     <td>
      GPIO9
     </td>
     <td>
      GPIO9
     </td>
     <td>
      GPIO9
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      3
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      16
     </td>
     <td>
      GPIO10
     </td>
     <td>
      GPIO10
     </td>
     <td>
      GPIO10
     </td>
     <td>
      FSPICS0
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      G
     </td>
    </tr>
    <tr>
     <td>
      18
     </td>
     <td>
      VDD_SPI
     </td>
     <td>
      GPIO11
     </td>
     <td>
      GPIO11
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      0
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      19
     </td>
     <td>
      SPIHD
     </td>
     <td>
      SPIHD
     </td>
     <td>
      GPIO12
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      3
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      20
     </td>
     <td>
      SPIWP
     </td>
     <td>
      SPIWP
     </td>
     <td>
      GPIO13
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      3
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      21
     </td>
     <td>
      SPICS0
     </td>
     <td>
      SPICS0
     </td>
     <td>
      GPIO14
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      3
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      22
     </td>
     <td>
      SPICLK
     </td>
     <td>
      SPICLK
     </td>
     <td>
      GPIO15
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      3
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      23
     </td>
     <td>
      SPID
     </td>
     <td>
      SPID
     </td>
     <td>
      GPIO16
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      3
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      24
      <br/>
      25
     </td>
     <td>
      SPIQ
      <br/>
      GPIO18
     </td>
     <td>
      SPIQ
      <br/>
      GPIO18
     </td>
     <td>
      GPIO17
      <br/>
      GPIO18
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
      -
      <br/>
      -
     </td>
     <td>
      2
      <br/>
      3
     </td>
     <td>
      3
      <br/>
      0
     </td>
     <td>
      -
      <br/>
      USB,
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      G
     </td>
    </tr>
    <tr>
     <td>
      26
     </td>
     <td>
      GPIO19
     </td>
     <td>
      GPIO19
     </td>
     <td>
      GPIO19
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      3
     </td>
     <td>
      0*
     </td>
     <td>
      USB
     </td>
    </tr>
    <tr>
     <td>
      27
     </td>
     <td>
      U0RXD
     </td>
     <td>
      U0RXD
     </td>
     <td>
      GPIO20
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      2
     </td>
     <td>
      3
     </td>
     <td>
      G
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 5.12-1. IO MUX Pin Functions
  </h4>
  <h4>
   Drive Strength
  </h4>
  <p block-type="Text">
   "DRV" column shows the drive strength of each pin after reset:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GPIO2, GPIO3, GPIO4, GPIO5, GPIO18, GPIO19
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0  Drive current = ~5 mA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1  Drive current = ~20 mA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2  Drive current = ~10 mA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       3  Drive current = ~40 mA
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Other GPIOs
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0  Drive current = ~5 mA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1  Drive current = ~10 mA
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 174
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     2  Drive current = ~20 mA
    </li>
    <li block-type="ListItem">
     3  Drive current = ~40 mA
    </li>
   </ul>
  </p>
  <h4>
   Reset Configurations
  </h4>
  <p block-type="Text">
   "Reset" column shows the default configuration of each pin after reset:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0  IE = 0 (input disabled)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1  IE = 1 (input enabled)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2  IE = 1, WPD = 1 (input enabled, pull-down resistor enabled)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3  IE = 1, WPU = 1 (input enabled, pull-up resistor enabled)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     4  OE = 1, WPU = 1 (output enabled, pull-up resistor enabled)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0*  IE = 0, WPU = 0. The USB pull-up value of GPIO19 is 1 by default, therefore, the pin's pull-up resistor is enabled. For more information, see the note below.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1*  If eFuse bit EFUSE_DIS_PAD_JTAG = 1, the pin MTCK is left floating after reset, i.e. IE = 1. If eFuse bit EFUSE_DIS_PAD_JTAG = 0, the pin MTCK is connected to internal pull-up resistor, i.e. IE = 1, WPU = 1.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R  Pins in VDD3P3_RTC domain, and part of them have analog functions, see Table 5.13-1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     USB  GPIO18 and GPIO19 are USB pins. The pull-up value of the two pins are controlled by the pins' pull-up value together with USB pull-up value. If any one of the pull-up value is 1, the pin's pull-up resistor will be enabled. The pull-up resistors of USB pins are controlled by USB_SERIAL_JT
     <a href="#page-174-2">
      AG_DP
     </a>
     _PULLUP.
    </li>
    <li block-type="ListItem">
     <span id="page-174-1">
     </span>
     <i>
      •
     </i>
     G - These pins have glitches during power-up. See details in Table 5.12-2.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 5.12-2. Power-Up Glitches on Pins
     </th>
     <th colspan="3">
      Typical Time Period
     </th>
    </tr>
    <tr>
     <td>
      Pin
     </td>
     <td>
      Glitch
     </td>
     <td>
      (ns)
     </td>
    </tr>
    <tr>
     <td>
      MTCK
     </td>
     <td>
      Low-level glitch
     </td>
     <td>
      5
     </td>
    </tr>
    <tr>
     <td>
      MTDO
     </td>
     <td>
      Low-level glitch
     </td>
     <td>
      5
     </td>
    </tr>
    <tr>
     <td>
      GPIO10
     </td>
     <td>
      Low-level glitch
     </td>
     <td>
      5
     </td>
    </tr>
    <tr>
     <td>
      U0RXD
     </td>
     <td>
      Low-level glitch
     </td>
     <td>
      5
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 5.12-2. Power-Up Glitches on Pins
  </p>
  <h1>
   5.13 Analog Functions List
  </h1>
  <p block-type="Text">
   <span id="page-174-0">
   </span>
   Table 5.13-1 shows the IO MUX pins with analog functions.
  </p>
  <span id="page-174-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      GPIO Num
     </td>
     <td>
      Pin Name
     </td>
     <td>
      Analog Function 0
     </td>
     <td>
      Analog Function 1
     </td>
    </tr>
    <tr>
     <td>
      0
      <br/>
      1
     </td>
     <td>
      XTAL_32K_P
      <br/>
      XTAL_32K_N
     </td>
     <td>
      XTAL_32K_P
      <br/>
      XTAL_32K_N
     </td>
     <td>
      ADC1_CH0
      <br/>
      ADC1_CH1
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 5.13-1. Analog Functions of IO MUX Pins
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      <b>
       GPIO Num
      </b>
     </th>
     <th>
      Pin Name
     </th>
     <th>
      Analog Function 0
     </th>
     <th>
      <b>
       Analog Function 1
      </b>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      GPIO3
     </td>
     <td>
      -
     </td>
     <td>
      ADC1 CH3
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      MTMS
     </td>
     <td>
      -
     </td>
     <td>
      ADC1 CH4
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   5.14 Register Summary
  </h1>
  <h1>
   <span id="page-175-0">
   </span>
   5.14.1 GPIO Matrix Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-175-1">
   </span>
   The addresses in this section are relative to the GPIO base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GPIO_BT_SELECT_REG
     </td>
     <td>
      GPIO bit select register
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_OUT_REG
     </td>
     <td>
      GPIO output register
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      GPIO_OUT_W1TS_REG
     </td>
     <td>
      GPIO output set register
     </td>
     <td>
      0x0008
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      GPIO_OUT_W1TC_REG
     </td>
     <td>
      GPIO output clear register
     </td>
     <td>
      0x000C
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      GPIO_ENABLE_REG
     </td>
     <td>
      GPIO output enable register
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      GPIO_ENABLE_W1TS_REG
     </td>
     <td>
      GPIO output enable set register
     </td>
     <td>
      0x0024
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      GPIO_ENABLE_W1TC_REG
     </td>
     <td>
      GPIO output enable clear register
     </td>
     <td>
      0x0028
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      GPIO_STRAP_REG
     </td>
     <td>
      pin strapping register
     </td>
     <td>
      0x0038
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GPIO_IN_REG
     </td>
     <td>
      GPIO input register
     </td>
     <td>
      0x003C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      GPIO_STATUS_REG
      <br/>
      GPIO_STATUS_W1TS_REG
     </td>
     <td>
      GPIO interrupt status register
      <br/>
      GPIO interrupt status set register
     </td>
     <td>
      0x0044
      <br/>
      0x0048
     </td>
     <td>
      R/W/SS
      <br/>
      WT
     </td>
    </tr>
    <tr>
     <td>
      GPIO_STATUS_W1TC_REG
     </td>
     <td>
      GPIO interrupt status clear register
     </td>
     <td>
      0x004C
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PCPU_INT_REG
     </td>
     <td>
      GPIO PRO_CPU interrupt status register
     </td>
     <td>
      0x005C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <th>
      GPIO_STATUS_NEXT_REG
     </th>
     <th>
      GPIO interrupt source register
     </th>
     <th>
      0x014C
     </th>
     <th>
      RO
     </th>
    </tr>
    <tr>
     <td>
      Pin Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN0_REG
     </td>
     <td>
      GPIO pin0 configuration register
     </td>
     <td>
      0x0074
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN1_REG
     </td>
     <td>
      GPIO pin1 configuration register
     </td>
     <td>
      0x0078
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN2_REG
     </td>
     <td>
      GPIO pin2 configuration register
     </td>
     <td>
      0x007C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN3_REG
     </td>
     <td>
      GPIO pin3 configuration register
     </td>
     <td>
      0x0080
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN4_REG
     </td>
     <td>
      GPIO pin4 configuration register
     </td>
     <td>
      0x0084
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN5_REG
     </td>
     <td>
      GPIO pin5 configuration register
     </td>
     <td>
      0x0088
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN6_REG
     </td>
     <td>
      GPIO pin6 configuration register
     </td>
     <td>
      0x008C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN7_REG
     </td>
     <td>
      GPIO pin7 configuration register
     </td>
     <td>
      0x0090
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN8_REG
     </td>
     <td>
      GPIO pin8 configuration register
     </td>
     <td>
      0x0094
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN9_REG
     </td>
     <td>
      GPIO pin9 configuration register
     </td>
     <td>
      0x0098
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN10_REG
      <br/>
      GPIO_PIN11_REG
     </td>
     <td>
      GPIO pin10 configuration register
      <br/>
      GPIO pin11 configuration register
     </td>
     <td>
      0x009C
      <br/>
      0x00A0
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN12_REG
     </td>
     <td>
      GPIO pin12 configuration register
     </td>
     <td>
      0x00A4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN13_REG
     </td>
     <td>
      GPIO pin13 configuration register
     </td>
     <td>
      0x00A8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN14_REG
     </td>
     <td>
      GPIO pin14 configuration register
     </td>
     <td>
      0x00AC
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <span id="page-176-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 5
      <br/>
      IO MUX and GPIO Matrix (GPIO, IO MUX)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN15_REG
     </td>
     <td>
      GPIO pin15 configuration register
     </td>
     <td>
      0x00B0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN16_REG
     </td>
     <td>
      GPIO pin16 configuration register
     </td>
     <td>
      0x00B4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN17_REG
     </td>
     <td>
      GPIO pin17 configuration register
     </td>
     <td>
      0x00B8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN18_REG
     </td>
     <td>
      GPIO pin18 configuration register
     </td>
     <td>
      0x00BC
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="4">
      GPIO_PIN19_REG
      <br/>
      GPIO pin19 configuration register
      <br/>
      0x00C0
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_PIN20_REG
      <br/>
      GPIO_PIN21_REG
     </td>
     <td>
      GPIO pin20 configuration register
      <br/>
      GPIO pin21 configuration register
     </td>
     <td>
      0x00C4
      <br/>
      0x00C8
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Input Function Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC0_IN_SEL_CFG_REG
     </td>
     <td>
      Configuration register for input signal 0
     </td>
     <td>
      0x0154
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC1_IN_SEL_CFG_REG
     </td>
     <td>
      Configuration register for input signal 1
     </td>
     <td>
      0x0158
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC126_IN_SEL_CFG_REG
     </td>
     <td>
      Configuration register for input signal 126
     </td>
     <td>
      0x034C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC127_IN_SEL_CFG_REG
     </td>
     <td>
      Configuration register for input signal 127
     </td>
     <td>
      0x0350
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Output Function Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC0_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO0 output
     </td>
     <td>
      0x0554
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC1_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO1 output
     </td>
     <td>
      0x0558
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC2_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO2 output
     </td>
     <td>
      0x055C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC3_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO3 output
     </td>
     <td>
      0x0560
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC4_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO4 output
     </td>
     <td>
      0x0564
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC5_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO5 output
     </td>
     <td>
      0x0568
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC6_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO6 output
     </td>
     <td>
      0x056C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC7_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO7 output
     </td>
     <td>
      0x0570
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC8_OUT_SEL_CFG_REG
      <br/>
      GPIO_FUNC9_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO8 output
      <br/>
      Configuration register for GPIO9 output
     </td>
     <td>
      0x0574
      <br/>
      0x0578
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC10_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO10 output
     </td>
     <td>
      0x057C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC11_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO11 output
     </td>
     <td>
      0x0580
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC12_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO12 output
     </td>
     <td>
      0x0584
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC13_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO13 output
     </td>
     <td>
      0x0588
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC14_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO14 output
     </td>
     <td>
      0x058C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC15_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO15 output
     </td>
     <td>
      0x0590
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC16_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO16 output
     </td>
     <td>
      0x0594
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC17_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO17 output
     </td>
     <td>
      0x0598
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC18_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO18 output
     </td>
     <td>
      0x059C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC19_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO19 output
     </td>
     <td>
      0x05A0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIO_FUNC20_OUT_SEL_CFG_REG
     </td>
     <td>
      Configuration register for GPIO20 output
     </td>
     <td>
      0x05A4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="4">
      GPIO_FUNC21_OUT_SEL_CFG_REG
      <br/>
      Configuration register for GPIO21 output
      <br/>
      0x05A8
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Version Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="4">
      GPIO_DATE_REG
      <br/>
      GPIO version register
      <br/>
      0x06FC
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Clock Gate Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   5.14.2 IO MUX Register Summary
  </h1>
  <p block-type="Text">
   The addresses in this section are relative to the IO MUX base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="4">
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
      <br/>
      IO_MUX_PIN_CTRL_REG
     </td>
     <td>
      Clock output configuration Register
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO0_REG
     </td>
     <td>
      IO
      <br/>
      MUX
      <br/>
      configuration
      <br/>
      register
      <br/>
      for
      <br/>
      pin
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      XTAL_32K_P
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO1_REG
     </td>
     <td>
      IO
      <br/>
      MUX
      <br/>
      configuration
      <br/>
      register
      <br/>
      for
      <br/>
      pin
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      XTAL_32K_N
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO2_REG
     </td>
     <td>
      IO MUX configuration register for pin GPIO2
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO3_REG
     </td>
     <td>
      IO MUX configuration register for pin GPIO3
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO4_REG
     </td>
     <td>
      IO MUX configuration register for pin MTMS
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO5_REG
     </td>
     <td>
      IO MUX configuration register for pin MTDI
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO6_REG
     </td>
     <td>
      IO MUX configuration register for pin MTCK
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO7_REG
     </td>
     <td>
      IO MUX configuration register for pin MTDO
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO8_REG
     </td>
     <td>
      IO MUX configuration register for pin GPIO8
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO9_REG
     </td>
     <td>
      IO MUX configuration register for pin GPIO9
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO10_REG
     </td>
     <td>
      IO MUX configuration register for pin GPIO10
     </td>
     <td>
      0x002C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO11_REG
     </td>
     <td>
      IO MUX configuration register for pin VDD_SPI
     </td>
     <td>
      0x0030
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO12_REG
     </td>
     <td>
      IO MUX configuration register for pin SPIHD
     </td>
     <td>
      0x0034
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO13_REG
      <br/>
      IO_MUX_GPIO14_REG
     </td>
     <td>
      IO MUX configuration register for pin SPIWP
      <br/>
      IO MUX configuration register for pin SPICS0
     </td>
     <td>
      0x0038
      <br/>
      0x003C
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO15_REG
     </td>
     <td>
      IO MUX configuration register for pin SPICLK
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO16_REG
     </td>
     <td>
      IO MUX configuration register for pin SPID
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO17_REG
     </td>
     <td>
      IO MUX configuration register for pin SPIQ
     </td>
     <td>
      0x0048
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO18_REG
     </td>
     <td>
      IO MUX configuration register for pin GPIO18
     </td>
     <td>
      0x004C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO19_REG
     </td>
     <td>
      IO MUX configuration register for pin GPIO19
     </td>
     <td>
      0x0050
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO20_REG
     </td>
     <td>
      IO MUX configuration register for pin U0RXD
     </td>
     <td>
      0x0054
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX_GPIO21_REG
     </td>
     <td>
      IO MUX configuration register for pin U0TXD
     </td>
     <td>
      0x0058
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Version Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   5.14.3
   <a href="#page-187-1">
    SDM Re
   </a>
   gister Summary
  </h1>
  <p block-type="Text">
   <span id="page-177-0">
   </span>
   The addresses in this section are relative to (GPIO base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   + 0x0F00).
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Name
     </th>
     <th>
      Description
     </th>
     <th>
      Address
     </th>
     <th>
      Access
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 5
      <br/>
      IO MUX and GPIO Matrix (GPIO, IO MUX)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      GPIOSD_SIGMADELTA0_REG
     </td>
     <td>
      Duty Cycle Configuration Register of SDM0
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIOSD_SIGMADELTA1_REG
     </td>
     <td>
      Duty Cycle Configuration Register of SDM1
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIOSD_SIGMADELTA2_REG
     </td>
     <td>
      Duty Cycle Configuration Register of SDM2
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="4">
      GPIOSD_SIGMADELTA3_REG
      <br/>
      Duty Cycle Configuration Register of SDM3
      <br/>
      0x000C
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      GPIOSD_SIGMADELTA_CG_REG
     </td>
     <td>
      Clock Gating Configuration Register
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   5.15
   <a href="#page-189-0">
    Registers
   </a>
  </h1>
  <h1>
   <span id="page-178-0">
   </span>
   5.15.1 GPIO Matrix Registers
  </h1>
  <p block-type="Text">
   <span id="page-178-1">
   </span>
   The addresses in this section are relative to the GPIO base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-178-3">
   </span>
   <img src="_page_178_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-178-2">
   </span>
   <img src="_page_178_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_OUT_DATA_ORIG GPIO0 ~ 21 output value in simple GPIO output mode. The values of bit0 ~ bit21 correspond to the output value of GPIO0 ~ GPIO21 respectively, and bit22 ~ bit25 are invalid. (R/W/SS)
  </p>
  <h4>
   Register 5.3. GPIO_OUT_W1TS_REG (0x0008)
  </h4>
  <p>
   <span id="page-179-2">
   </span>
   <img src="_page_179_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_OUT_W1TS GPIO0 ~ 21 output set register. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. If the value 1 is written to a bit here, the corresponding bit in GPIO_OUT_REG will be set to 1. Recommended operation: use this register to set GPIO_OUT_REG. (WT)
  </p>
  <h4>
   Register 5.4. GPIO_OUT_W1TC_REG (0x000C)
  </h4>
  <p>
   <span id="page-179-1">
   </span>
   <img src="_page_179_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_OUT_W1TC GPIO0 ~ 21 output clear register. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. If the value 1 is written to a bit here, the corresponding bit in GPIO_OUT_REG will be cleared. Recommended operation: use this register to clear GPIO_OUT_REG. (WT)
  </p>
  <p>
   <img src="_page_179_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-179-0">
   </span>
   <img src="_page_179_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_ENABLE_DATA GPIO output enable register for GPIO0 ~ 21. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. (R/W/SS)
  </p>
  <h4>
   Register 5.6. GPIO_ENABLE_W1TS_REG (0x0024)
  </h4>
  <p>
   <span id="page-180-0">
   </span>
   <img src="_page_180_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_ENABLE_W1TS GPIO0 ~ 21 output enable set register. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. If the value 1 is written to a bit here, the corresponding bit in GPIO_ENABLE_REG will be set to 1. Recommended operation: use this register to set GPIO_ENABLE_REG. (WT)
  </p>
  <h4>
   Register 5.7. GPIO_ENABLE_W1TC_REG (0x0028)
  </h4>
  <p>
   <span id="page-180-1">
   </span>
   <img src="_page_180_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_ENABLE_W1TC GPIO0 ~ 21 output enable clear register. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. If the value 1 is written to a bit here, the corresponding bit in GPIO_ENABLE_REG will be cleared. Recommended operation: use this register to clear GPIO_ENABLE_REG. (WT)
  </p>
  <h4>
   Register 5.8. GPIO_STRAP_REG (0x0038)
  </h4>
  <p>
   <span id="page-180-2">
   </span>
   <img src="_page_180_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_STRAPPING GPIO strapping values. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     bit 0: GPIO2
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     bit 2: GPIO8
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     bit 3: GPIO9
    </li>
   </ul>
  </p>
  <h4>
   Register 5.9. GPIO_IN_REG (0x003C)
  </h4>
  <p>
   <span id="page-181-0">
   </span>
   <img src="_page_181_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_IN_DATA_NEXT GPIO0 ~ 21 input value. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. Each bit represents a pin input value, 1 for high level and 0 for low level. (RO)
  </p>
  <h4>
   Register 5.10. GPIO_STATUS_REG (0x0044)
  </h4>
  <p>
   <span id="page-181-1">
   </span>
   <img src="_page_181_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_STATUS_INTERRUPT GPIO0 ~ 21 interrupt status register. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. (R/W/SS)
  </p>
  <p>
   <img src="_page_181_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-181-2">
   </span>
   <img src="_page_181_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_STATUS_W1TS GPIO0 ~ 21 interrupt status set register. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. If the value 1 is written to a bit here, the corresponding bit in GPIO_STATUS_INTERRUPT will be set to 1. Recommended operation: use this register to set GPIO_STATUS_INTERRUPT. (WT)
  </p>
  <h4>
   Register 5.12. GPIO_STATUS_W1TC_REG (0x004C)
  </h4>
  <p>
   <span id="page-182-0">
   </span>
   <img src="_page_182_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_STATUS_W1TC GPIO0 ~ 21 interrupt status clear register. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. If the value 1 is written to a bit here, the corresponding bit in GPIO_STATUS_INTERRUPT will be cleared. Recommended operation: use this register to clear GPIO_STATUS_INTERRUPT. (WT)
  </p>
  <p>
   <span id="page-182-1">
   </span>
   <img src="_page_182_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_PROCPU_INT GPIO0 ~ 21 PRO_CPU interrupt status. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. This interrupt status is corresponding to the bit in GPIO_STATUS_REG when assert (high) enable signal (bit13 of GPIO_PIN
   <i>
    n
   </i>
   _REG). (RO)
  </p>
  <p>
   <span id="page-183-0">
   </span>
   <img src="_page_183_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GPIO_PIN
     <i>
      n
     </i>
     _SYNC2_BYPASS For the second stage synchronization, GPIO input data can be synchronized on either edge of the APB clock. 0: no synchronization; 1: synchronized on falling edge; 2 and 3: synchronized on rising edge. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_PIN
     <i>
      n
     </i>
     _PAD_DRIVER pin drive selection. 0: normal output; 1: open drain output. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_PIN
     <i>
      n
     </i>
     _SYNC1_BYPASS For the first stage synchronization, GPIO input data can be synchronized on either edge of the APB clock. 0: no synchronization; 1: synchronized on falling edge; 2 and 3: synchronized on rising edge. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_PIN
     <i>
      n
     </i>
     _INT_TYPE Interrupt type selection. 0: GPIO interrupt disabled; 1: rising edge trigger; 2: falling edge trigger; 3: any edge trigger; 4: low level trigger; 5: high level trigger. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_PIN
     <i>
      n
     </i>
     _WAKEUP_ENABLE GPIO wake-up enable bit, only wakes up the CPU from Light-sleep. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_PIN
     <i>
      n
     </i>
     _CONFIG reserved (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_PIN
     <i>
      n
     </i>
     _INT_ENA Interrupt enable bits. bit13: CPU interrupt enabled; bit14: CPU non-maskable interrupt enabled. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-183-1">
   </span>
   <img src="_page_183_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   GPIO_STATUS_INTERRUPT_NEXT Interrupt source signal of GPIO0 ~ 21, could be rising edge interrupt, falling edge interrupt, level sensitive interrupt and any edge interrupt. Bit0 ~ bit21 are corresponding to GPIO0 ~ 21, and bit22 ~ bit25 are invalid. (RO)
  </p>
  <h4>
   <span id="page-184-2">
   </span>
   Register 5.16. GPIO_FUNC
   <i>
    n
   </i>
   _IN_SEL_CFG_REG (
   <i>
    n
   </i>
   : 0-127) (0x0154+4*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-184-0">
   </span>
   <img src="_page_184_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GPIO_FUNC
     <i>
      n
     </i>
     _IN_SEL Selection control for peripheral input signal
     <i>
      n
     </i>
     , selects a pin from the 22 GPIO matrix pins to connect this input signal. Or selects 0x1e for a constantly high input or 0x1f for a constantly low input. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_FUNC
     <i>
      n
     </i>
     _IN_INV_SEL Invert the input value. 1: invert enabled; 0: invert disabled. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_SIG
     <i>
      n
     </i>
     _IN_SEL Bypass GPIO matrix. 1: route signals via GPIO matrix, 0: connect signals directly to peripheral configured in IO MUX. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-184-1">
   </span>
   <img src="_page_184_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   Register 5.17. GPIO_FUNC
   <i>
    n
   </i>
   _OUT_SEL_CFG_REG (
   <i>
    n
   </i>
   : 0-21) (0x0554+4*
   <i>
    n
   </i>
   )
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     GPIO_FUNC
     <i>
      n
     </i>
     _OUT_SEL Selection control for GPIO output
     <i>
      n
     </i>
     . If a value
     <i>
      Y
     </i>
     (0&lt;=Y&lt;128) is written to this field, the peripheral output signal
     <i>
      Y
     </i>
     will be connected to GPIO output
     <i>
      n
     </i>
     . If a value 128 is written to this field, bit
     <i>
      n
     </i>
     of GPIO_OUT_REG and GPIO_ENABLE_REG will be selected as the output value and output enable. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_FUNC
     <i>
      n
     </i>
     _OUT_INV_SEL
     <a href="#page-178-2">
      0: Do no
     </a>
     t inv
     <a href="#page-179-0">
      ert the output value;
     </a>
     1: Invert the output value. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_FUNC
     <i>
      n
     </i>
     _OEN_SEL 0: Use output enable signal from peripheral; 1: Force the output enable signal to be sourced from bit
     <i>
      n
     </i>
     of GPIO_ENABLE_REG. (R/W)
    </li>
    <li block-type="ListItem">
     GPIO_FUNC
     <i>
      n
     </i>
     _OEN_INV_SEL 0: Do not invert the output enable signal; 1: Invert the output enable signal. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 5.18. GPIO_CLOCK_GATE_REG (0x062C)
  </h4>
  <p>
   <img src="_page_185_Figure_1.jpeg"/>
  </p>
  <p>
   GPIO_CLK_EN Clock gating enable bit. If set to 1, the clock is free running. (R/W)
  </p>
  <h4>
   Register 5.19. GPIO_DATE_REG (0x06FC)
  </h4>
  <p>
   <img src="_page_185_Figure_4.jpeg"/>
  </p>
  <p>
   GPIO_DATE_REG Version control register (R/W)
  </p>
  <h1>
   5.15.2 IO MUX Registers
  </h1>
  <p block-type="Text">
   <span id="page-185-0">
   </span>
   The addresses in this section are relative to the IO MUX base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <img src="_page_185_Figure_8.jpeg"/>
  </p>
  <p>
   <span id="page-185-1">
   </span>
   <img src="_page_185_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   IO_MUX_CLK_OUT
   <i>
    x
   </i>
   If you want to output clock for I2S to CLK_OUT_out
   <i>
    x
   </i>
   , set IO_MUX_CLK_OUT
   <i>
    x
   </i>
   to 0x0. CLK_OUT_out
   <i>
    x
   </i>
   can be found in Table 5.11-1. (R/W)
  </p>
  <span id="page-186-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Register 5.21. IO_MUX_GPIOn_REG (n: 0-21) (0x0004+4*n)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      IO_MUX_GPIOn_FILTER_EN
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      MCU_SEL
     </th>
     <th>
      IO_MUX_GPIOn_FUN_WPU
      <br/>
      IO_MUX_GPIOn_FUN_DRV
      <br/>
      IO_MUX_GPIOn_FUN_IE
     </th>
     <th>
     </th>
     <th>
      IO_MUX_GPIOn_FUN_WPD
     </th>
     <th>
      MCU_DRV
     </th>
     <th>
      MCU_WPD
      <br/>
      MCU_WPU
      <br/>
      IO_MUX_GPIOn_SLP_SEL
      <br/>
      MCU_IE
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      IO_MUX_GPIOn_
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      IO_MUX_GPIOn_
     </td>
     <td>
      IO_MUX_GPIOn_
      <br/>
      IO_MUX_GPIOn_
     </td>
     <td>
      IO_MUX_GPIOn_
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _MCU_OE Output enable of the pin in sleep mode. 1: output enabled; 0: output disabled. (R/W)
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _SLP_SEL Sleep mode selection of this pin. Set to 1 to put the pin in sleep mode. (R/W)
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _MCU_WPD Pull-down enable of the pin in sleep mode. 1: internal pull-down enabled; 0: internal pull-down disabled. (R/W)
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _MCU_WPU Pull-up enable of the pin during sleep mode. 1: internal pull-up enabled; 0: internal pull-up disabled. (R/W)
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _MCU_IE Input enable of the pin during sleep mode. 1: input enabled; 0: input disabled. (R/W)
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _MCU_DRV Configures the drive strength of GPIO
     <i>
      n
     </i>
     during sleep mode.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       GPIO2, GPIO3, GPIO5, GPIO18, GPIO18, GPIO19 0: ~5 mA 1: ~20 mA 2: ~10 mA 3: ~40 mA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Other GPIOs
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         0: ~5 mA
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         1: ~10 mA
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         2: ~20 mA
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         3: ~40 mA
        </li>
       </ul>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (R/W)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _FUN_WPD Pull-down enable of the pin. 1: internal pull-down enabled; 0: internal pull-down disabled. (R/W)
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _FUN_WPU Pull-up enable of the pin. 1: internal pull-up enabled; 0: internal pull-up disabled. (R/W)
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _FUN_IE Input enable of the pin. 1: input enabled; 0: input disabled. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Register 5.21. IO_MUX_GPIO
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-21) (0x0004+4*
   <i>
    n
   </i>
   )
  </h4>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="Text">
   IO_MUX_GPIO
   <i>
    n
   </i>
   _FUN_DRV Select the drive strength of the pin.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   GPIO2, GPIO3, GPIO5, GPIO18, GPIO18, GPIO19
  </p>
  <p block-type="TextInlineMath">
   0: ~5 mA 1: ~20 mA 2: ~10 mA
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     3: ~40 mA
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Other GPIOs
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: ~5 mA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1: ~10 mA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2: ~20 mA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       3: ~40 mA
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="TextInlineMath">
   (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _MCU_SEL Select IO MUX function for this signal. 0: Select Function 0; 1: Select Function 1; etc. (R/W)
    </li>
    <li block-type="ListItem">
     IO_MUX_GPIO
     <i>
      n
     </i>
     _FILTER_EN Enable filter for pin input signals. 1: Filter enabled; 0: Filter disabled. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-187-1">
   </span>
   <img src="_page_187_Figure_14.jpeg"/>
  </p>
  <h1>
   Register 5.22. IO_MUX_DATE_REG (0x00FC)
  </h1>
  <p block-type="Text">
   IO_MUX_DATE_REG Version control register (R/W)
  </p>
  <h1>
   5.15.3 SDM Output Registers
  </h1>
  <p block-type="Text">
   <span id="page-187-0">
   </span>
   The addresses in this section are relative to (GPIO base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   + 0x0F00).
  </p>
  <p>
   <span id="page-188-1">
   </span>
   <img src="_page_188_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   GPIOSD_SD
   <i>
    n
   </i>
   _IN This field is used to configure the duty cycle of sigma delta modulation output. (R/W)
  </p>
  <p block-type="Text">
   GPIOSD_SD
   <i>
    n
   </i>
   _PRESCALE This field is used to set a divider value to divide APB clock. (R/W)
  </p>
  <p>
   <span id="page-188-2">
   </span>
   <img src="_page_188_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   GPIOSD_CLK_EN Clock enable bit of configuration registers for sigma delta modulation. (R/W)
  </p>
  <p>
   <span id="page-188-0">
   </span>
   <img src="_page_188_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   GPIOSD_FUNCTION_CLK_EN Clock enable bit of sigma delta modulation. (R/W)
  </p>
  <p block-type="Text">
   GPIOSD_SPI_SWAP Reserved. (R/W)
  </p>
  <h4>
   Register 5.26. GPIOSD_SIGMADELTA_VERSION_REG (0x0028)
  </h4>
  <p>
   <span id="page-189-0">
   </span>
   <img src="_page_189_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   GPIOSD_DATE Version Control Register. (R/W)
  </p>
  <h1>
   <span id="page-190-0">
   </span>
   Chapter 6
  </h1>
  <h1>
   Reset and Clock
  </h1>
  <h1>
   6.1 Reset
  </h1>
  <h1>
   <span id="page-190-1">
   </span>
   6.1.1 Overview
  </h1>
  <p block-type="Text">
   ESP32-C3 provides four types of reset that occur at different levels, namely CPU Reset, Core Reset, System Reset, and Chip Reset. All reset types mentioned above (except Chip Reset) maintain the data stored in internal memory. Figure 6.1-1 shows the scope of affected subsystems by each type of reset.
  </p>
  <h1>
   <span id="page-190-2">
   </span>
   6.1.2 Architect
   <a href="#page-190-3">
    ural
   </a>
   Overview
  </h1>
  <p>
   <span id="page-190-3">
   </span>
   <img src="_page_190_Figure_6.jpeg"/>
  </p>
  <p>
   Figure 6.1-1. Reset Types
  </p>
  <h1>
   6.1.3 Features
  </h1>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support four reset levels:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       CPU Reset: Only resets CPU core. Once such reset is released, the instructions from the CPU reset vector will be executed.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     Core Reset: Resets the whole digital system except RTC, including CPU, peripherals, Wi-Fi, Bluetooth® LE, and digital GPIOs.
    </li>
    <li block-type="ListItem">
     System Reset: Resets the whole digital system, including RTC.
    </li>
    <li block-type="ListItem">
     Chip Reset: Resets the whole chip.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support software reset and hardware reset:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Software Reset: the CPU can trigger a software reset by configuring the corresponding registers, see Chapter 9
       <i>
        Low-power Management
       </i>
       .
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Hardware Reset: Hardware reset is directly triggered by the circuit.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   If CPU is reset, PMS registers will be reset, too.
  </p>
  <h1>
   6.1.4 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-191-0">
   </span>
   CPU will be rese
   <a href="#page-314-0">
    t immediately
   </a>
   when any of the reset above occurs. Users can get reset source codes by reading register RTC_CNTL_RESET_CAUSE_PROCPU after the reset is released.
  </p>
  <p block-type="Text">
   Table 6.1-1 lists possible reset sources and the types of reset they trigger.
  </p>
  <p>
  </p>
  <span id="page-192-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 6
     </th>
     <th>
      Reset and Clock
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Table 6.1-1. Reset Sources
     </td>
    </tr>
    <tr>
     <td>
      Code
     </td>
     <td>
      Source
     </td>
     <td>
      Reset Type
     </td>
     <td colspan="5">
      Comments
     </td>
    </tr>
    <tr>
     <td>
      0x01
     </td>
     <td>
      Chip reset1
     </td>
     <td>
      Chip Reset
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      0x0F
     </td>
     <td>
      Brown-out system reset
     </td>
     <td>
      Chip Reset or
     </td>
     <td>
      Triggered by brown-out detector2
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      System Reset
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      0x10
     </td>
     <td>
      RWDT system reset
     </td>
     <td>
      System Reset
     </td>
     <td>
      See Chapter 12 Watchdog Timers (WDT)
     </td>
    </tr>
    <tr>
     <td>
      0x12
      <br/>
      0x13
     </td>
     <td>
      Super Watchdog reset
      <br/>
      CLK GLITCH reset
     </td>
     <td>
      System Reset
      <br/>
      System Reset
     </td>
     <td>
      See Chapter 12 Watchdog Timers (WDT)
      <br/>
      See Chapter 25 Clock Glitch Detection
     </td>
    </tr>
    <tr>
     <td>
      0x03
     </td>
     <td>
      Software system reset
     </td>
     <td>
      Core Reset
     </td>
     <td>
      Triggered by configuring RTC_CNTL_SW_SYS_RST
     </td>
    </tr>
    <tr>
     <td>
      0x05
     </td>
     <td>
      Deep-sleep reset
     </td>
     <td>
      Core Reset
     </td>
     <td>
      See Chapter 9 Low-power Management
     </td>
    </tr>
    <tr>
     <td>
      0x07
     </td>
     <td>
      MWDT0 core reset
     </td>
     <td>
      Core Reset
     </td>
     <td>
      See Chapter 12 Watchdog Timers (WDT)
     </td>
    </tr>
    <tr>
     <td>
      0x08
     </td>
     <td>
      MWDT1 core reset
     </td>
     <td>
      Core Reset
     </td>
     <td>
      See Chapter 12 Watchdog Timers (WDT)
     </td>
    </tr>
    <tr>
     <td>
      0x09
      <br/>
      0x14
     </td>
     <td>
      RWDT core reset
      <br/>
      eFuse reset
     </td>
     <td>
      Core Reset
      <br/>
      Core Reset
     </td>
     <td>
      See Chapter 12 Watchdog Timers (WDT)
      <br/>
      Triggered by eFuse CRC error
      <br/>
      Triggered when external USB host sends a specific com
     </td>
    </tr>
    <tr>
     <td>
      0x15
     </td>
     <td>
      USB (UART) reset
     </td>
     <td>
      Core Reset
     </td>
     <td>
      mand to the Serial interface of USB-Serial-JTAG. See 30
      <br/>
      USB Serial/JTAG Controller (USB_SERIAL_JTAG)
      <br/>
      Triggered when external USB host sends a specific com
     </td>
    </tr>
    <tr>
     <td>
      0x16
     </td>
     <td>
      USB (JTAG) reset
     </td>
     <td>
      Core Reset
     </td>
     <td>
      mand to the JTAG interface of USB-Serial-JTAG. See 30
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      USB Serial/JTAG Controller (USB_SERIAL_JTAG)
     </td>
    </tr>
    <tr>
     <td>
      0x17
     </td>
     <td>
      Power glitch reset
     </td>
     <td>
      Core Reset
     </td>
     <td>
      Triggered by power glitch
     </td>
    </tr>
    <tr>
     <td>
      0x0B
     </td>
     <td>
      MWDT0 CPU reset
     </td>
     <td>
      CPU Reset
     </td>
     <td>
      See Chapter 12 Watchdog Timers (WDT)
     </td>
    </tr>
    <tr>
     <td>
      0x0C
     </td>
     <td>
      Software CPU reset
     </td>
     <td>
      CPU Reset
     </td>
     <td>
      Triggered by configuring RTC_CNTL_SW_PROCPU_RST
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 Chip Reset can be triggered by the following two sources:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Triggered by chip power-on.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Triggered by brown-out detector.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   2 Once brown-out status is detected, the detector will trigger System Reset or Chip Reset, depending on register configuration. See Chapter 9
   <i>
    Low-power Management
   </i>
   .
  </p>
  <h1>
   6.2 Clock
  </h1>
  <h1>
   <span id="page-192-0">
   </span>
   6.2.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-192-2">
   </span>
   <span id="page-192-1">
   </span>
   ESP32-C3 clocks are mainly sourced from oscillator (OSC), RC, and PLL circuit, and then processed by the dividers or selectors, which allows most functional modules to select their working clock according to their power consumption and performance requirements. Figure 6.2-1 shows the system clock structure.
  </p>
  <h1>
   6.2.2 Architectural Overview
  </h1>
  <p>
   <span id="page-193-3">
   </span>
   <img src="_page_193_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 6.2-1. System Clock
  </p>
  <h1>
   6.2.3 Features
  </h1>
  <p block-type="Text">
   <span id="page-193-0">
   </span>
   ESP32-C3 clocks can be classified in two types depending on their frequencies:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     High speed clocks for devices working at a higher frequency, such as CPU and digital peripherals
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       PLL_CLK (320 MHz or 480 MHz): internal PLL clock
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       XTAL_CLK (40 MHz): external crystal clock
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Slow speed clocks for low-power devices, such as RTC module and low-power peripherals
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       XTAL32K_CLK (32 kHz): external crystal clock
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RC_FAST_CLK (17.5 MHz by default): internal fast RC oscillator with adjustable frequency
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RC_FAST_DIV_CLK: internal fast RC oscillator derived from RC_FAST_CLK divided by 256
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RC_SLOW_CLK (136 kHz by default): internal low RC oscillator with adjustable frequency
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   6.2.4 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-193-2">
   </span>
   <span id="page-193-1">
   </span>
   Espressif Systems 194
  </p>
  <h1>
   6.2.4.1 CPU Clock
  </h1>
  <p block-type="Text">
   As Figure 6.2-1 shows, CPU_CLK is the master clock for CPU and it can be as high as 160 MHz when CPU works in high performance mode. Alternatively, CPU can run at lower frequencies, such as at 2 MHz, to lower power consumption. Users can set PLL_CLK, RC_FAST_CLK or XTAL_CLK as CPU_CLK clock source by configuri
   <a href="#page-193-3">
    ng reg
   </a>
   ister SYSTEM_SOC_CLK_SEL, see Table 6.2-1 and Table 6.2-2. By default, the CPU clock is sourced from XTAL_CLK with a divider of 2, i.e. the CPU clock is 20 MHz.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Table 6.2-1. CPU Clock Source
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_SOC_CLK_SEL Value
     </td>
     <td>
      CPU Clock Source
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 6.2-1. CP
   <a href="#page-194-1">
    U Cloc
   </a>
   k Source
  </h4>
  <h4>
   Table 6.2-2. CPU Clock Frequency
  </h4>
  <span id="page-194-2">
  </span>
  <span id="page-194-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 6.2-2. CPU Clock Frequency
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      CPU Clock Source
     </td>
     <td>
      SEL_0*
     </td>
     <td>
      SEL_1*
     </td>
     <td>
      SEL_2*
     </td>
     <td>
      CPU Clock Frequency
     </td>
    </tr>
    <tr>
     <td>
      XTAL_CLK
     </td>
     <td>
      0
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      CPU_CLK = XTAL_CLK/(SYSTEM_PRE_DIV_CNT + 1)
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      SYSTEM_PRE_DIV_CNT ranges from 0 ~ 1023. Default is 1
     </td>
    </tr>
    <tr>
     <td>
      PLL_CLK (480 MHz)
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      CPU_CLK = PLL_CLK/6
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      CPU_CLK frequency is 80 MHz
     </td>
    </tr>
    <tr>
     <td>
      PLL_CLK (480 MHz)
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      CPU_CLK = PLL_CLK/3
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      CPU_CLK frequency is 160 MHz
     </td>
    </tr>
    <tr>
     <td>
      PLL_CLK (320 MHz)
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      CPU_CLK = PLL_CLK/4
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      CPU_CLK frequency is 80 MHz
     </td>
    </tr>
    <tr>
     <td>
      PLL_CLK (320 MHz)
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      CPU_CLK = PLL_CLK/2
      <br/>
      CPU_CLK frequency is 160 MHz
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      CPU_CLK = RC_FAST_CLK/(SYSTEM_PRE_DIV_CNT + 1)
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   * The value of SYSTEM_SOC_CLK_SEL.
  </p>
  <p block-type="Text">
   * The value of SYSTEM_PLL_FREQ_SEL.
  </p>
  <p block-type="Text">
   * The value of SYSTEM_CPUPERIOD_SEL.
  </p>
  <h1>
   6.2.4.2 Peripheral Clock
  </h1>
  <p block-type="Text">
   <span id="page-194-0">
   </span>
   Peripheral clocks include APB_CLK, CRYPTO_CLK, PLL_F160M_CLK, LEDC_SCLK, XTAL_CLK, and RC_FAST_CLK. Table 6.2-3 shows which clock can be used by each peripheral.
  </p>
  <span id="page-195-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      ip
      <br/>
      l
      <br/>
      G
      <br/>
      T
      <br/>
      I
      <br/>
      M
     </th>
     <th>
      T
      <br/>
      A
      <br/>
      L_
      <br/>
      C
      <br/>
      L
      <br/>
      K
      <br/>
      A
     </th>
     <th>
      P
      <br/>
      B_
      <br/>
      C
      <br/>
      L
      <br/>
      K
      <br/>
      P
      <br/>
      L
     </th>
     <th>
      L_
      <br/>
      F
      <br/>
      1
      <br/>
      6
      <br/>
      0
      <br/>
      M_
      <br/>
      C
      <br/>
      L
      <br/>
      K
      <br/>
      R
      <br/>
      T
     </th>
     <th>
      C_
      <br/>
      F
      <br/>
      A
      <br/>
      S
      <br/>
      T_
      <br/>
      C
      <br/>
      L
      <br/>
      K
      <br/>
      R
      <br/>
      C_
     </th>
     <th>
      F
      <br/>
      A
      <br/>
      S
      <br/>
      T_
      <br/>
      C
      <br/>
      L
      <br/>
      K
      <br/>
      C
      <br/>
      R
      <br/>
      Y
     </th>
     <th>
      P
      <br/>
      T
      <br/>
      O_
      <br/>
      C
      <br/>
      L
      <br/>
      K
      <br/>
      L
      <br/>
      E
      <br/>
      D
      <br/>
      C_
     </th>
     <th>
      C
      <br/>
      L
      <br/>
      K
      <br/>
      P
      <br/>
      L
      <br/>
      L_
      <br/>
      D
     </th>
     <th>
      Chapter
      <br/>
      2_
      <br/>
      C
      <br/>
      L
      <br/>
      K
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      6
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      S
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
      Reset
     </td>
    </tr>
    <tr>
     <td>
      U
      <br/>
      H
      <br/>
      C
      <br/>
      I
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      U
      <br/>
      A
      <br/>
      R
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      and
     </td>
    </tr>
    <tr>
     <td>
      T
      <br/>
      R
      <br/>
      M
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Clock
     </td>
    </tr>
    <tr>
     <td>
      T
      <br/>
      2
      <br/>
      C
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      P
      <br/>
      I
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Fu
      <br/>
      Co
      <br/>
      e
      <br/>
      se
      <br/>
      n-
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      l
      <br/>
      ler
      <br/>
      tro
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      A
      <br/>
      R
      <br/>
      A
      <br/>
      D
      <br/>
      C
      <br/>
      Te
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      tu
      <br/>
      mp
      <br/>
      era
      <br/>
      re
      <br/>
      Se
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ns
      <br/>
      or
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      U
      <br/>
      S
      <br/>
      B
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      R
      <br/>
      Y
      <br/>
      P
      <br/>
      T
      <br/>
      O
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Co
      <br/>
      l
      <br/>
      ler
      <br/>
      T
      <br/>
      W
      <br/>
      A
      <br/>
      I
      <br/>
      tro
      <br/>
      n
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      L
      <br/>
      E
      <br/>
      D
      <br/>
      S
      <br/>
      S_
      <br/>
      Y
      <br/>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   The frequency of APB_CLK is determined by the clock source of CPU_CLK as shown in Table 6.2-4.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 6.2-4. APB_CLK Clock Frequency
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      CPU_CLK Source
     </td>
     <td>
      APB_CLK Frequency
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 6.2-4. APB_CLK Clock Frequency
  </h4>
  <h4>
   <span id="page-196-2">
   </span>
   CRYPTO_CLK
  </h4>
  <p block-type="Text">
   The frequency of CRYPTO_CLK is determined by the CPU_CLK source, as shown in Table 6.2-5.
  </p>
  <p>
   Table 6.2-5. CRYPTO_CLK Frequency
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 6.2-5. CRYPTO_CLK Frequency
     </td>
    </tr>
    <tr>
     <td>
      CPU_CLK Source
     </td>
     <td>
      CRYPTO_CLK Frequency
     </td>
    </tr>
    <tr>
     <td>
      PLL_CLK
     </td>
     <td>
      160 MHz
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <span id="page-196-3">
   </span>
   PLL_F160M_CLK
  </h4>
  <p block-type="Text">
   PLL_F160M_CLK is divided from PLL_CLK according to current PLL frequency.
  </p>
  <h4>
   LEDC_SCLK
  </h4>
  <p block-type="Text">
   LEDC module uses RC_FAST_CLK as clock source when APB_CLK is disabled. In other words, when the system is in low-power mode, most peripherals will be halted (as APB_CLK is turned off), but LEDC can still work normally via RC_FAST_CLK.
  </p>
  <h1>
   6.2.4.3 Wi-Fi and Bluetooth LE Clock
  </h1>
  <p block-type="Text">
   <span id="page-196-0">
   </span>
   Wi-Fi and Bluetooth LE can only work when CPU_CLK uses PLL_CLK as its clock source. Suspending PLL_CLK requires that Wi-Fi and Bluetooth LE have entered low-power mode first.
  </p>
  <p block-type="Text">
   LOW_POWER_CLK uses XTAL32K_CLK, XTAL_CLK, RC_FAST_CLK or RTC_SLOW_CLK (the low clock selected by RTC) as its clock source for Wi-Fi and Bluetooth LE in low-power mode.
  </p>
  <h2>
   6.2.4.4 RTC Clock
  </h2>
  <p block-type="Text">
   <span id="page-196-1">
   </span>
   The clock sources for RTC_SLOW_CLK and RTC_FAST_CLK are low-frequency clocks. RTC module can operate when most other clocks are stopped. RTC_SLOW_CLK derived from RC_SLOW_CLK, XTAL32K_CLK or RC_FAST_DIV_CLK is used to clock Power Management module. RTC_FAST_CLK is used to clock On-chip Sensor module. It can be sourced from a divided XTAL_CLK or from a divided RC_FAST_CLK.
  </p>
  <h1>
   <span id="page-197-0">
   </span>
   Chapter 7
  </h1>
  <h1>
   Chip Boot Control
  </h1>
  <h1>
   7.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-197-1">
   </span>
   ESP32-C3 has three strapping pins:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GPIO2
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GPIO8
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GPIO9
    </li>
   </ul>
  </p>
  <p block-type="Text">
   These strapping pins are used to control the following functions during chip power-on or hardware reset:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     control chip boot mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ROM code printing
    </li>
   </ul>
  </p>
  <p block-type="Text">
   During power-on reset, RTC watchdog reset, brownout reset, analog super watchdog reset, and crystal clock glitch detection reset (see Chapter 6
   <i>
    Reset and Clock
   </i>
   ), hardware captures samples and stores the voltage level of strapping pins as strapping bit of "0" or "1" in latches, and holds these bits until the chip is powered down or shut down. Software can read the latch status (strapping value) from GPIO_STRAPPING.
  </p>
  <p block-type="Text">
   By default, GPIO9 is connected to
   <a href="#page-190-0">
   </a>
   t
   <a href="#page-190-0">
    he chip's internal p
   </a>
   ull-up resistor. If GPIO9 is not connected or connected to an external high-impedance circuit, the internal weak pull-up determines the default input level of this strapping pin (see Table 7.1-1).
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <td>
      Strapping Pin
     </td>
     <td>
      Defualt Configuration
     </td>
    </tr>
    <tr>
     <td>
      GPIO2
     </td>
     <td>
      N/A
     </td>
    </tr>
    <tr>
     <td>
      GPIO8
     </td>
     <td>
      N/A
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 7.1-1. Default Configuration of Strapping Pins
  </h4>
  <p block-type="Text">
   <span id="page-197-3">
   </span>
   To change the strapping bit values, users can apply external pull-down/pull-up resistors, or use host MCU GPIOs to control the voltage level of these pins when powering on ESP32-C3. After the reset is released, the strapping pins work as normal-function pins.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   <span id="page-197-2">
   </span>
   The following section provides description of the chip functions and the pattern of the strapping pins values to invoke each function. Only documented patterns should be used. If some pattern is not documented, it may trigger unexpected behavior.
  </p>
  <h1>
   7.2 Boot Mode Control
  </h1>
  <p block-type="Text">
   The values of GPIO2, GPIO3, GPIO8, and GPIO9 at reset determine the boot mode after the reset is released. Table 7.2-1 shows the strapping pin values of GPIO9, GPIO8, GPIO3, and GPIO2, and the associated boot modes.
  </p>
  <h4>
   Table 7.2-1. Boot Mode Control
  </h4>
  <span id="page-198-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Table 7.2-1. Boot Mode Control
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Boot Mode
      <br/>
      SPI Boot mode
     </td>
     <td>
      GPIO9
      <br/>
      1
     </td>
     <td>
      GPIO8
      <br/>
      1
      <br/>
      x
     </td>
     <td>
      GPIO3
      <br/>
      x
     </td>
     <td>
      GPIO2
      <br/>
      x
     </td>
    </tr>
    <tr>
     <td>
      Joint Download Boot mode2
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      x
     </td>
     <td>
      x
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 x: values that have no effect on the result and can therefore be ignored.
  </p>
  <p block-type="Text">
   2 Joint Download Boot mode: Joint Download Boot mode supports the following download methods:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     USB-Serial-JTAG Download Boot
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART Download Boot
    </li>
    <li block-type="ListItem">
     3 SPI Download Boot mode: GPIO3 and GPIO2 need to be reserved only when using SPI Download Boot mode. GPIO3 and GPIO2 are floating by default and are in a high-impedance state at reset.
    </li>
    <li block-type="ListItem">
     4 Invalid Combination: This combination can trigger unexpected behavior and should be avoided.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In SPI Boot mode, the ROM bootloader loads and executes the program from SPI flash to boot the system. SPI Boot mode can be further classified as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Normal Flash Boot: supports Security Boot. The ROM bootloader loads the program from flash into SRAM and executes it. In most practical scenarios, this program is the 2nd stage bootloader, which later boots the target application.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Direct Boot: does not support Security Boot and programs run directly from flash. To enable this mode, make sure that the first two words of the bin file downloaded to flash (address: 0x42000000) are 0xaedb041d.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In Joint Download Boot mode, users can download binary files into flash using UART0 or USB interface. It is also possible to download binary files into SRAM and execute it in this mode.
  </p>
  <p block-type="Text">
   In SPI Download Boot mode, users can download binary files into flash using SPI interface. It is also possible to download binary files into SRAM and execute it from SRAM.
  </p>
  <p block-type="Text">
   The following eFuses control boot mode behaviors:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     EFUSE_DIS_FORCE_DOWNLOAD
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If this eFuse is 0 (default), software can force switch the chip from SPI Boot mode to Joint Download Boot mode by setting RTC_CNTL_FORCE_DOWNLOAD_BOOT and triggering a CPU
       <a href="#page-119-1">
        reset. In this case, hardware
       </a>
       overwrites GPIO_STRAPPING[3:2] from "1x" to "01".
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     If this eFuse is 1, RTC_CNTL_FORCE_DOWNLOAD_BOOT is disabled. GPIO_STRAPPING can not be overwritten.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     EFUSE_DIS_DOWNLOAD_MODE
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If this eFuse is 1, Joint
   <a href="#page-262-0">
    Download Boot mode is disabled.
   </a>
   GPIO_STRAPPING
   <a href="#page-180-2">
    will not be overw
   </a>
   ritten by RTC_CNTL_FORCE_DOWNLOAD_BOOT.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   <a href="#page-123-1">
    EFUSE_ENABLE_SECURITY_DOW
   </a>
   NLOAD
  </p>
  <p block-type="Text">
   <a href="#page-262-0">
    If this eFuse is 1, Joint Download Boot m
   </a>
   ode only allows
   <a href="#page-180-2">
    reading, writing, an
   </a>
   d erasing plaintext flash and does not support any SRAM or register operations. Ignore this eFuse if Joint Download Boot mode is
   <a href="#page-123-1">
    disabled.
   </a>
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   EFUSE_DIS_DIRECT_BOOT
  </p>
  <p block-type="Text">
   If this eFuse is 1, Direct Boot mode is disabled.
  </p>
  <p block-type="Text">
   USB Serial/JTAG Controller can also force the chip into Joint Download Boot mode from SPI Boot mode, as well as force the chip into SPI Boot mode from Joint Download Boot mode. For detailed information, please refer to Chapter 30
   <i>
    USB Serial/JTAG Controller (USB_SERIAL_JTAG)
   </i>
   .
  </p>
  <h1>
   7.3 RO
   <a href="#page-763-0">
    M Messages Printing Control
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-199-0">
   </span>
   During early SPI Boot process, the messages by the ROM code can be printed to:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     (Default) UART0 and USB Serial/JTAG controller
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART0
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     USB Serial/JTAG controller
    </li>
   </ul>
  </p>
  <p block-type="Text">
   EFUSE_UART_PRINT_CONTROL and GPIO8 control ROM messages printing to UART0 as shown in Table 7.3-1.
  </p>
  <span id="page-199-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      eFuse1
     </td>
     <td rowspan="2">
      GPIO8
     </td>
     <td>
      ROM Code Printing
     </td>
    </tr>
    <tr>
     <td>
      ROM code is always printed to UART0 during boot.
      <br/>
      The
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      x
     </td>
     <td>
      value of GPIO8 is ignored.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0
     </td>
     <td>
      Print is enabled during boot.
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      Print is disabled during boot.
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      0
     </td>
     <td>
      Print is disabled during boot.
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      3
     </td>
     <td rowspan="2">
      1
      <br/>
      x
     </td>
     <td>
      Print is enabled during boot.
     </td>
    </tr>
    <tr>
     <td>
      Print is always disabled during boot. The value of GPIO8 is
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 7.3-1. ROM Message Printing Control
  </h4>
  <p block-type="Text">
   1 eFuse: EFUSE_UART_PRINT_CONTROL
  </p>
  <p block-type="Text">
   EFUSE_USB_PRINT_CHANNEL controls the printing to USB Serial/JTAG controller. When this bit is 1, printing to USB Serial/JTAG controll
   <a href="#page-123-1">
    er is disabled. When this bit is 0
   </a>
   and the USB Serial/JTAG controller is enabled via EFUSE_DIS_USB_SERIAL_JTAG, ROM messages can be printed to USB Serial/JTAG controller.
  </p>
  <p block-type="Text">
   Note that if EFUSE_USB_PRINT_CHANNEL is set to 0 to print ROM messages to USB, but USB Serial/JTAG controller has been disabled, then ROM messages will not be printed to USB Serial/JTAG controller.
  </p>
  <p block-type="Text">
   Please note that ROM message printing to UART0 and to the USB Serial/JTAG Controller is controlled independe
   <a href="#page-123-1">
    ntly.
   </a>
  </p>
  <h1>
   <span id="page-201-0">
   </span>
   Interrupt Matrix (INTERRUPT)
  </h1>
  <h1>
   8.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-201-1">
   </span>
   The interrupt matrix embedded in ESP32-C3 independently routes peripheral interrupt sources to the ESP-RISC-V CPU's peripheral interrupts, to timely inform CPU to process the coming interrupts.
  </p>
  <p block-type="Text">
   The ESP32-C3 has 62 peripheral interrupt sources. To map them to 31 CPU interrupts, this interrupt matrix is needed.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   This chapter focuses on how to map peripheral interrupt sources to CPU interrupts. For more details about interrupt configuration, vector, and ISA suggested operations, please refer to Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   .
  </p>
  <h1>
   8.2 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-201-2">
     </span>
     <i>
      •
     </i>
     Accept 62 peripheral interrupt sources as input
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Generate 31 CPU peripheral interrupts to CPU as output
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Query current interrupt status of peripheral interrupt sources
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure priority, type, threshold, and enable signal of CPU interrupts
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-201-4">
   </span>
   Figure 8.2-1 shows the structure of the interrupt matrix.
  </p>
  <p>
   <img src="_page_201_Figure_13.jpeg"/>
  </p>
  <p>
   <span id="page-201-3">
   </span>
   Figure 8.2-1. Interrupt Matrix Structure
  </p>
  <h1>
   8.3 Functional Description
  </h1>
  <h1>
   8.3.1 Peripheral Interrupt Sources
  </h1>
  <p block-type="Text">
   <span id="page-202-0">
   </span>
   The ESP32-C3 has 62 peripheral interrupt sources in total. Table 8.3-1 lists all these sources and their configuration/status registers.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Column "No.": Peripheral interrupt source number, can be 0 ~ 61.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Column "Chapter": in which chapter the interrupt source is
     <a href="#page-203-0">
      desc
     </a>
     ribed in detailed.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Column "Source": Name of the peripheral interrupt source.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Column "Configuration Register": Registers used for routing the peripheral interrupt sources to CPU peripheral interrupts
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Column "Status Register": Registers used for indicating the interrupt status of peripheral interrupt sources.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Column "Status Register  Bit": Bit position in status register, indicating the interrupt status.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Column "Status Register  Name": Name of status registers.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <span id="page-203-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th colspan="2">
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Sta
      <br/>
      Re
      <br/>
      iste
      <br/>
      tus
      <br/>
      g
      <br/>
      r
     </th>
    </tr>
    <tr>
     <th>
      No
     </th>
     <th>
      C
      <br/>
      ha
      <br/>
      ter
      <br/>
      p
     </th>
     <th>
      So
      <br/>
      urc
      <br/>
      e
     </th>
     <th>
      Co
      <br/>
      nfi
      <br/>
      tio
      <br/>
      iste
      <br/>
      Re
      <br/>
      g
      <br/>
      ura
      <br/>
      n
      <br/>
      g
      <br/>
      r
      <br/>
      Bit
     </th>
     <th>
     </th>
     <th>
      Chapter
      <br/>
      Na
      <br/>
      me
      <br/>
      8
     </th>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      0
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      1
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      2
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      3
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
      Interrupt
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
      Matrix
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      4
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      5
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      7
     </td>
     <td>
      d
      <br/>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      6
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
      (INTERRUPT)
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      7
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
      d
     </td>
     <td>
      d
     </td>
     <td>
      d
      <br/>
      8
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      9
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      10
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      10
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      11
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      11
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      12
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      12
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      13
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      13
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      14
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      14
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      15
      <br/>
      16
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      UA
      <br/>
      RT
      <br/>
      Co
      <br/>
      ller
      <br/>
      UA
      <br/>
      RT
      <br/>
      ntr
      <br/>
      o
      <br/>
      (
      <br/>
      IO
      <br/>
      MU
      <br/>
      X
      <br/>
      d
      <br/>
      GP
      <br/>
      IO
      <br/>
      Ma
      <br/>
      trix
      <br/>
      GP
      <br/>
      IO,
      <br/>
      an
     </td>
     <td>
      UH
      <br/>
      CI0
      <br/>
      INT
      <br/>
      R
      <br/>
      _
      <br/>
      GP
      <br/>
      IO_
      <br/>
      OC
      <br/>
      PR
      <br/>
      PU
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      UH
      <br/>
      CI0
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      15
      <br/>
      _
      <br/>
      CO
      <br/>
      0_
      <br/>
      GP
      <br/>
      IO_
      <br/>
      O_
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      RE
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      PR
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      16
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
     </td>
     <td>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      INT
      <br/>
      R_
      <br/>
      STA
      <br/>
      TU
      <br/>
      S_
      <br/>
      0_
      <br/>
      RE
      <br/>
      G
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      )
      <br/>
      IO
      <br/>
      MU
      <br/>
      X
     </td>
     <td>
      _
     </td>
     <td>
      G
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      17
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      17
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      18
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      18
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      19
     </td>
     <td>
      (
      <br/>
      ller
      <br/>
      )
      <br/>
      SP
      <br/>
      I
      <br/>
      Co
      <br/>
      SP
      <br/>
      I
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      GP
      <br/>
      SP
      <br/>
      I2_
      <br/>
      INT
      <br/>
      R_
      <br/>
      2
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      SP
      <br/>
      I_
      <br/>
      INT
      <br/>
      R_
      <br/>
      2_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      19
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      20
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      ller
      <br/>
      I2S
      <br/>
      Co
      <br/>
      I2S
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      I2S
      <br/>
      INT
      <br/>
      R
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      I2S
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      20
      <br/>
      _
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      21
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      ller
      <br/>
      UA
      <br/>
      RT
      <br/>
      Co
      <br/>
      UA
      <br/>
      RT
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      UA
      <br/>
      RT_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      UA
      <br/>
      RT_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      21
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      22
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      ller
      <br/>
      UA
      <br/>
      RT
      <br/>
      Co
      <br/>
      UA
      <br/>
      RT
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      UA
      <br/>
      RT
      <br/>
      1_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      UA
      <br/>
      RT
      <br/>
      1_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      22
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      23
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      ller
      <br/>
      LE
      <br/>
      D
      <br/>
      PW
      <br/>
      M
      <br/>
      Co
      <br/>
      LE
      <br/>
      DC
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      LE
      <br/>
      DC
      <br/>
      INT
      <br/>
      R
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      LE
      <br/>
      DC
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      23
      <br/>
      _
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      24
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      ller
      <br/>
      eF
      <br/>
      Co
      <br/>
      EF
      <br/>
      US
      <br/>
      E
      <br/>
      ntr
      <br/>
      use
      <br/>
      o
      <br/>
      Tw
      <br/>
      ire
      <br/>
      Au
      <br/>
      oti
      <br/>
      Int
      <br/>
      erf
      <br/>
      tom
      <br/>
      o-w
      <br/>
      ve
      <br/>
      ac
      <br/>
      e
     </td>
     <td>
      EF
      <br/>
      US
      <br/>
      E_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      EF
      <br/>
      US
      <br/>
      E_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      24
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      25
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      TW
      <br/>
      AI
      <br/>
      US
      <br/>
      Se
      <br/>
      l/JT
      <br/>
      AG
      <br/>
      Co
      <br/>
      ller
      <br/>
      B
      <br/>
      ria
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      TW
      <br/>
      AI_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      TW
      <br/>
      AI_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      25
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      26
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      US
      <br/>
      SE
      <br/>
      G
      <br/>
      B_
      <br/>
      RIA
      <br/>
      L_
      <br/>
      JTA
     </td>
     <td>
      US
      <br/>
      B_
      <br/>
      SE
      <br/>
      RIA
      <br/>
      L_
      <br/>
      JTA
      <br/>
      G_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      US
      <br/>
      B_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      26
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      27
     </td>
     <td>
      Lo
      <br/>
      Ma
      <br/>
      t
      <br/>
      w-p
      <br/>
      ow
      <br/>
      er
      <br/>
      na
      <br/>
      g
      <br/>
      em
      <br/>
      en
      <br/>
      Co
      <br/>
      l
      <br/>
      he
      <br/>
      l
      <br/>
      Re
      <br/>
      te
      <br/>
      ntr
      <br/>
      Pe
      <br/>
      rip
      <br/>
      mo
      <br/>
      o
      <br/>
      ra
     </td>
     <td>
      C_
      <br/>
      CN
      <br/>
      RT
      <br/>
      TL
      <br/>
      INT
      <br/>
      R
      <br/>
      _
     </td>
     <td>
      CO
      <br/>
      0_
      <br/>
      C_
      <br/>
      CO
      <br/>
      G
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      RE
      <br/>
      RT
      <br/>
      RE
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      27
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      28
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      RM
      <br/>
      T
     </td>
     <td>
      RM
      <br/>
      T_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      RM
      <br/>
      T_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      28
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
      29
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      I2C
      <br/>
      Co
      <br/>
      ller
      <br/>
      I2C
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      I2C
      <br/>
      EXT
      <br/>
      0_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      I2C
      <br/>
      EXT
      <br/>
      0_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      29
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th colspan="2">
      Sta
      <br/>
      Re
      <br/>
      iste
      <br/>
      tus
      <br/>
      g
      <br/>
      r
     </th>
    </tr>
    <tr>
     <th>
      No
     </th>
     <th>
      C
      <br/>
      ha
      <br/>
      ter
      <br/>
      p
     </th>
     <th>
      So
      <br/>
      urc
      <br/>
      e
     </th>
     <th>
      Co
      <br/>
      nfi
      <br/>
      tio
      <br/>
      iste
      <br/>
      Re
      <br/>
      g
      <br/>
      ura
      <br/>
      n
      <br/>
      g
      <br/>
      r
      <br/>
      Bit
     </th>
     <th>
     </th>
     <th>
      Chapter
      <br/>
      Na
      <br/>
      me
     </th>
    </tr>
    <tr>
     <td>
      31
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      31
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      32
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Tim
      <br/>
      Gro
      <br/>
      TIM
      <br/>
      G
      <br/>
      er
      <br/>
      up
     </td>
     <td>
      TG
      <br/>
      T0
      <br/>
      INT
      <br/>
      R
      <br/>
      _
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      TG
      <br/>
      T0
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      0
      <br/>
      _
      <br/>
      _
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
      8
     </td>
    </tr>
    <tr>
     <td>
      33
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Tim
      <br/>
      Gro
      <br/>
      TIM
      <br/>
      G
      <br/>
      up
     </td>
     <td>
      TG
      <br/>
      WD
      <br/>
      T_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      TG
      <br/>
      WD
      <br/>
      T_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      34
     </td>
     <td>
      er
      <br/>
      (
      <br/>
      )
      <br/>
      Tim
      <br/>
      Gro
      <br/>
      TIM
      <br/>
      G
      <br/>
      up
     </td>
     <td>
      _
      <br/>
      TG
      <br/>
      1_
      <br/>
      T0
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      _
      <br/>
      _
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      TG
      <br/>
      1_
      <br/>
      T0
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      2
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      35
     </td>
     <td>
      er
      <br/>
      (
      <br/>
      )
      <br/>
      Tim
      <br/>
      Gro
      <br/>
      TIM
      <br/>
      G
      <br/>
      up
     </td>
     <td>
      _
      <br/>
      TG
      <br/>
      1_
      <br/>
      WD
      <br/>
      T_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      _
      <br/>
      _
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      TG
      <br/>
      1_
      <br/>
      WD
      <br/>
      T_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      3
     </td>
     <td>
     </td>
     <td>
      Interrupt
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      er
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      G
      <br/>
      _
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      36
     </td>
     <td>
      d
      <br/>
      (
      <br/>
      )
      <br/>
      Sy
      <br/>
      SY
      <br/>
      ST
      <br/>
      Tim
      <br/>
      IM
      <br/>
      ER
      <br/>
      ste
     </td>
     <td>
      d
      <br/>
      SY
      <br/>
      ST
      <br/>
      RG
      <br/>
      0_
      <br/>
      IM
      <br/>
      ER
      <br/>
      TA
      <br/>
      ET
      <br/>
      INT
     </td>
     <td>
      d
      <br/>
      36
      <br/>
      CO
      <br/>
      0_
      <br/>
      SY
      <br/>
      ST
      <br/>
      RG
      <br/>
      0_
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      RE
      <br/>
      IM
      <br/>
      ER
      <br/>
      TA
      <br/>
      ET
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
     </td>
     <td>
     </td>
     <td>
      Matrix
     </td>
    </tr>
    <tr>
     <td>
      37
     </td>
     <td>
      m
      <br/>
      er
      <br/>
      (
      <br/>
      )
      <br/>
      Sy
      <br/>
      SY
      <br/>
      ST
      <br/>
      Tim
      <br/>
      IM
      <br/>
      ER
      <br/>
      ste
     </td>
     <td>
      R
      <br/>
      _
      <br/>
      SY
      <br/>
      ST
      <br/>
      RG
      <br/>
      IM
      <br/>
      ER
      <br/>
      TA
      <br/>
      ET
      <br/>
      1_
      <br/>
      INT
     </td>
     <td>
      G
      <br/>
      5
      <br/>
      _
      <br/>
      _
      <br/>
      CO
      <br/>
      0_
      <br/>
      SY
      <br/>
      ST
      <br/>
      RG
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      RE
      <br/>
      IM
      <br/>
      ER
      <br/>
      TA
      <br/>
      ET
      <br/>
      1_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      38
     </td>
     <td>
      m
      <br/>
      er
      <br/>
      (
      <br/>
      SY
      <br/>
      ST
      <br/>
      Tim
      <br/>
      IM
      <br/>
      ER
      <br/>
      ste
     </td>
     <td>
      R
      <br/>
      _
      <br/>
      SY
      <br/>
      ST
      <br/>
      RG
      <br/>
      2_
      <br/>
      IM
      <br/>
      ER
      <br/>
      TA
      <br/>
      ET
      <br/>
      INT
     </td>
     <td>
      G
      <br/>
      6
      <br/>
      _
      <br/>
      _
      <br/>
      CO
      <br/>
      0_
      <br/>
      SY
      <br/>
      ST
      <br/>
      RG
      <br/>
      2_
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      RE
      <br/>
      IM
      <br/>
      ER
      <br/>
      TA
      <br/>
      ET
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      39
     </td>
     <td>
      )
      <br/>
      Sy
      <br/>
      m
      <br/>
      er
     </td>
     <td>
      R
      <br/>
      _
     </td>
     <td>
      G
      <br/>
      7
      <br/>
      _
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      40
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      8
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      41
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      9
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      42
      <br/>
      43
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
      <br/>
      On
      <br/>
      -C
      <br/>
      hip
      <br/>
      Se
      <br/>
      d
      <br/>
      An
      <br/>
      log
      <br/>
      ns
      <br/>
      or
      <br/>
      an
      <br/>
      a
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
      <br/>
      vD
      <br/>
      IGT
      <br/>
      AL
      <br/>
      AD
      <br/>
      C_
      <br/>
      INT
      <br/>
      R
      <br/>
      _
     </td>
     <td>
      d
      <br/>
      10
      <br/>
      res
      <br/>
      erv
      <br/>
      e
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      AP
      <br/>
      B_
      <br/>
      AD
      <br/>
      C_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      11
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
      (INTERRUPT)
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Sig
      <br/>
      l
      <br/>
      Pro
      <br/>
      ssi
      <br/>
      na
      <br/>
      ce
      <br/>
      ng
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      44
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      GD
      <br/>
      MA
      <br/>
      Co
      <br/>
      ller
      <br/>
      GD
      <br/>
      MA
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      GD
      <br/>
      MA
      <br/>
      CH
      <br/>
      0_
      <br/>
      INT
      <br/>
      R
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      DM
      <br/>
      A_
      <br/>
      CH
      <br/>
      0_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      12
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      45
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      GD
      <br/>
      MA
      <br/>
      Co
      <br/>
      ller
      <br/>
      GD
      <br/>
      MA
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      GD
      <br/>
      MA
      <br/>
      CH
      <br/>
      1_
      <br/>
      INT
      <br/>
      R
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      DM
      <br/>
      A_
      <br/>
      CH
      <br/>
      1_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      13
      <br/>
      _
      <br/>
      INT
     </td>
     <td>
      ER
      <br/>
      RU
     </td>
     <td>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      INT
      <br/>
      R_
      <br/>
      STA
      <br/>
      TU
      <br/>
      S_
      <br/>
      1_
      <br/>
      RE
      <br/>
      G
     </td>
    </tr>
    <tr>
     <td>
      46
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      GD
      <br/>
      MA
      <br/>
      Co
      <br/>
      ller
      <br/>
      GD
      <br/>
      MA
      <br/>
      ntr
      <br/>
      o
     </td>
     <td>
      GD
      <br/>
      MA
      <br/>
      CH
      <br/>
      2_
      <br/>
      INT
      <br/>
      R
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      DM
      <br/>
      A_
      <br/>
      CH
      <br/>
      2_
      <br/>
      INT
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      14
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      47
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      RS
      <br/>
      A
      <br/>
      Ac
      <br/>
      ler
      <br/>
      RS
      <br/>
      A
      <br/>
      ato
      <br/>
      ce
      <br/>
      r
     </td>
     <td>
      RS
      <br/>
      A_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      RS
      <br/>
      A_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      15
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      48
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      AE
      <br/>
      S
      <br/>
      Ac
      <br/>
      ler
      <br/>
      AE
      <br/>
      S
      <br/>
      ato
      <br/>
      ce
      <br/>
      r
     </td>
     <td>
      AE
      <br/>
      S_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      AE
      <br/>
      S_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      16
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      49
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      SH
      <br/>
      A
      <br/>
      Ac
      <br/>
      ler
      <br/>
      SH
      <br/>
      A
      <br/>
      ato
      <br/>
      ce
      <br/>
      r
     </td>
     <td>
      SH
      <br/>
      A_
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      SH
      <br/>
      A_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      17
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      50
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Sy
      <br/>
      Re
      <br/>
      iste
      <br/>
      SY
      <br/>
      SR
      <br/>
      EG
      <br/>
      ste
      <br/>
      m
      <br/>
      g
      <br/>
      rs
     </td>
     <td>
      SW
      <br/>
      INT
      <br/>
      R_
      <br/>
      0
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      CP
      <br/>
      U_
      <br/>
      INT
      <br/>
      R_
      <br/>
      FR
      <br/>
      OM
      <br/>
      CP
      <br/>
      U_
      <br/>
      0_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      18
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      51
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Sy
      <br/>
      Re
      <br/>
      iste
      <br/>
      SY
      <br/>
      SR
      <br/>
      EG
      <br/>
      ste
      <br/>
      m
      <br/>
      g
      <br/>
      rs
     </td>
     <td>
      SW
      <br/>
      INT
      <br/>
      R_
      <br/>
      1
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      CP
      <br/>
      U_
      <br/>
      INT
      <br/>
      R_
      <br/>
      FR
      <br/>
      OM
      <br/>
      CP
      <br/>
      U_
      <br/>
      1_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      19
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      52
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Sy
      <br/>
      Re
      <br/>
      iste
      <br/>
      SY
      <br/>
      SR
      <br/>
      EG
      <br/>
      ste
      <br/>
      m
      <br/>
      g
      <br/>
      rs
     </td>
     <td>
      SW
      <br/>
      INT
      <br/>
      R_
      <br/>
      2
      <br/>
      _
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      CP
      <br/>
      U_
      <br/>
      INT
      <br/>
      R_
      <br/>
      FR
      <br/>
      OM
      <br/>
      CP
      <br/>
      U_
      <br/>
      2_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      20
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      53
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Sy
      <br/>
      Re
      <br/>
      iste
      <br/>
      SY
      <br/>
      SR
      <br/>
      EG
      <br/>
      ste
      <br/>
      m
      <br/>
      g
      <br/>
      rs
      <br/>
      bu
      <br/>
      De
      <br/>
      As
      <br/>
      sis
      <br/>
      tan
      <br/>
      t
      <br/>
      g
     </td>
     <td>
      SW
      <br/>
      INT
      <br/>
      R_
      <br/>
      3
      <br/>
      _
      <br/>
      AS
      <br/>
      SIS
      <br/>
      T_
      <br/>
      DE
      <br/>
      BU
      <br/>
      G_
      <br/>
      INT
     </td>
     <td>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      CP
      <br/>
      U_
      <br/>
      INT
      <br/>
      R_
      <br/>
      FR
      <br/>
      OM
      <br/>
      CP
      <br/>
      U_
      <br/>
      3_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      21
      <br/>
      _
      <br/>
      INT
      <br/>
      ER
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      AS
      <br/>
      SIS
      <br/>
      T_
      <br/>
      DE
      <br/>
      BU
      <br/>
      G_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      54
      <br/>
      55
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      AS
      <br/>
      SIS
      <br/>
      T_
      <br/>
      DE
      <br/>
      BU
      <br/>
      G
      <br/>
      (
      <br/>
      )
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      PM
      <br/>
      S
      <br/>
      ntr
      <br/>
      rm
      <br/>
      o
     </td>
     <td>
      R
      <br/>
      PM
      <br/>
      S_
      <br/>
      DM
      <br/>
      A_
      <br/>
      VIO
      <br/>
      INT
      <br/>
      R
     </td>
     <td>
      G
      <br/>
      22
      <br/>
      INT
      <br/>
      ER
      <br/>
      -
      <br/>
      23
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      l
      <br/>
      (
      <br/>
      )
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      PM
      <br/>
      S
      <br/>
      ntr
      <br/>
      rm
      <br/>
      o
     </td>
     <td>
      _
      <br/>
      RU
      <br/>
      PM
      <br/>
      S_
      <br/>
      IBU
      <br/>
      S_
      <br/>
      VIO
      <br/>
      INT
     </td>
     <td>
      CO
      <br/>
      0_
      <br/>
      S_
      <br/>
      MO
      <br/>
      OR
      <br/>
      VIO
      <br/>
      G
      <br/>
      PT_
      <br/>
      RE
      <br/>
      DM
      <br/>
      A_
      <br/>
      AP
      <br/>
      BP
      <br/>
      ER
      <br/>
      I_
      <br/>
      PM
      <br/>
      NIT
      <br/>
      LAT
      <br/>
      E_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      _
      <br/>
      INT
      <br/>
      ER
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      56
     </td>
     <td>
      l
      <br/>
      (
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      PM
      <br/>
      S
      <br/>
      ntr
      <br/>
      rm
      <br/>
      o
     </td>
     <td>
      R
      <br/>
      _
      <br/>
      RU
      <br/>
      PM
      <br/>
      S_
      <br/>
      DB
      <br/>
      US
      <br/>
      VIO
      <br/>
      INT
     </td>
     <td>
      24
      <br/>
      CO
      <br/>
      0_
      <br/>
      CO
      <br/>
      0_
      <br/>
      M0
      <br/>
      S_
      <br/>
      MO
      <br/>
      OR
      <br/>
      VIO
      <br/>
      G
      <br/>
      PT_
      <br/>
      RE
      <br/>
      RE
      <br/>
      IRA
      <br/>
      PM
      <br/>
      NIT
      <br/>
      LAT
      <br/>
      E_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      _
      <br/>
      _
      <br/>
      _
      <br/>
      INT
      <br/>
      ER
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      57
     </td>
     <td>
      l
      <br/>
      )
      <br/>
      (
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      PM
      <br/>
      S
      <br/>
      ntr
      <br/>
      rm
     </td>
     <td>
      R
      <br/>
      _
      <br/>
      _
      <br/>
      RU
      <br/>
      PM
      <br/>
      S_
      <br/>
      PE
      <br/>
      RI_
      <br/>
      VIO
      <br/>
      INT
     </td>
     <td>
      25
      <br/>
      CO
      <br/>
      0_
      <br/>
      CO
      <br/>
      0_
      <br/>
      0_
      <br/>
      S_
      <br/>
      MO
      <br/>
      OR
      <br/>
      VIO
      <br/>
      G
      <br/>
      PT_
      <br/>
      RE
      <br/>
      RE
      <br/>
      DR
      <br/>
      AM
      <br/>
      PM
      <br/>
      NIT
      <br/>
      LAT
      <br/>
      E_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      _
      <br/>
      _
      <br/>
      INT
      <br/>
      ER
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      58
     </td>
     <td>
      )
      <br/>
      l
      <br/>
      o
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      PM
      <br/>
      S
     </td>
     <td>
      R
      <br/>
      _
      <br/>
      PM
      <br/>
      PE
      <br/>
      VIO
      <br/>
      SIZ
      <br/>
      INT
     </td>
     <td>
      26
      <br/>
      RU
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      PIF
      <br/>
      PM
      <br/>
      S_
      <br/>
      MO
      <br/>
      NIT
      <br/>
      OR
      <br/>
      VIO
      <br/>
      LAT
      <br/>
      E_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      _
      <br/>
      _
      <br/>
      _
      <br/>
      INT
      <br/>
      ER
      <br/>
      -
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
      59
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      l
      <br/>
      ntr
      <br/>
      rm
      <br/>
      o
     </td>
     <td>
      S_
      <br/>
      RI_
      <br/>
      E_
      <br/>
      R
      <br/>
      RU
      <br/>
      _
     </td>
     <td>
      27
      <br/>
      PT_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      CO
      <br/>
      RE
      <br/>
      0_
      <br/>
      PIF
      <br/>
      PM
      <br/>
      S_
      <br/>
      MO
      <br/>
      NIT
      <br/>
      OR
      <br/>
      VIO
      <br/>
      LAT
      <br/>
      E_
      <br/>
      SIZ
      <br/>
      E_
      <br/>
      INT
      <br/>
      R_
      <br/>
      MA
      <br/>
      P_
      <br/>
      RE
      <br/>
      G
      <br/>
      _
      <br/>
      _
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Espressif Systems
  </p>
  <p block-type="Text">
   205
   <a href="https://www.espressif.com/en/company/documents/documentation_feedback?docId=5086§ions=&amp;version=1.3">
    Submit Documentation Feedback
   </a>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Sta
      <br/>
      Re
      <br/>
      iste
      <br/>
      tus
      <br/>
      g
      <br/>
      r
     </th>
    </tr>
    <tr>
     <th>
      No
     </th>
     <th>
      C
      <br/>
      ha
      <br/>
      ter
      <br/>
      p
     </th>
     <th>
      So
      <br/>
      urc
      <br/>
      e
     </th>
     <th>
      Co
      <br/>
      nfi
      <br/>
      tio
      <br/>
      iste
      <br/>
      Re
      <br/>
      g
      <br/>
      ura
      <br/>
      n
      <br/>
      g
      <br/>
      r
      <br/>
      Bit
     </th>
     <th>
      Chapter
      <br/>
      Na
      <br/>
      me
     </th>
    </tr>
    <tr>
     <td>
      61
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
      d
      <br/>
      29
      <br/>
      res
      <br/>
      erv
      <br/>
      e
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      8
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Interrupt
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Matrix
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      (INTERRUPT)
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Espressif Systems
  </p>
  <h1>
   8.3.2 CPU Interrupts
  </h1>
  <p block-type="Text">
   <span id="page-206-0">
   </span>
   The ESP32-C3 implements its interrupt mechanism using an interrupt controller instead of RISC-V Privileged ISA specification. The ESP-RISC-V CPU has 31 interrupts, numbered from 1 ~ 31. Each CPU interrupt has the following properties.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Priority levels from 1 (lowest) to 15 (highest).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable as level-triggered or edge-triggered.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Lower-priority interrupts mask-able by setting interrupt threshold.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   For detailed information about how to configure CPU interrupts, see Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   .
  </p>
  <h1>
   8.3.3 Allocate Peripheral Interrupt Source to C
   <a href="#page-30-0">
    PU Interrupt
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-206-1">
   </span>
   In this section, the following terms are used to describe the operation of the interrupt matrix.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Source_
     <i>
      X
     </i>
     : stands for a peripheral interrupt source, wherein
     <i>
      X
     </i>
     means the number of this interrupt source in Table 8.3-1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     INTERRUPT_CORE0_SOURCE_
     <i>
      X
     </i>
     _MAP_REG: stands for a configuration register for the peripheral interrupt source (Source_
     <i>
      X
     </i>
     ).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Num_P:
     <a href="#page-203-0">
      the i
     </a>
     ndex of CPU interrupts, can be 1 ~ 31.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-213-17">
      Interrupt_P: stands for the CPU interrupt nu
     </a>
     mbered as Num_P.
    </li>
   </ul>
  </p>
  <h1>
   8.3.3.1 Allocate one peripheral interrupt source (Source_
   <i>
    X
   </i>
   ) to CPU
  </h1>
  <p block-type="Text">
   <span id="page-206-2">
   </span>
   Setting the corresponding configuration register INTERRUPT_CORE0_SOURCE_
   <i>
    X
   </i>
   _MAP_REG of Source_
   <i>
    X
   </i>
   to Num_P allocates this interrupt source to Interrupt_P.
  </p>
  <h1>
   8.3.3.2 Allocate multiple peripheral int
   <a href="#page-213-17">
    errupt sources (Source_X
   </a>
   <i>
    n
   </i>
   ) to CPU
  </h1>
  <p block-type="Text">
   <span id="page-206-3">
   </span>
   Setting the corresponding configuration register INTERRUPT_CORE0_SOURCE_X
   <i>
    n
   </i>
   _MAP_REG of each interrupt source to the same Num_P allocates multiple sources to the same Interrupt_P. Any of these sources can trigger CPU Interrupt_P. When an interrupt signal is generated, CPU should check the interrupt status registers to figure out which peripheral generated the inte
   <a href="#page-213-17">
    rrupt. For more information, see Chapter
   </a>
   1
   <i>
    ESP-RISC-V CPU
   </i>
   .
  </p>
  <h2>
   8.3.3.3 Disable CPU peripheral interrupt source (Source_
   <i>
    X
   </i>
   )
  </h2>
  <p block-type="Text">
   <span id="page-206-4">
   </span>
   <a href="#page-30-0">
    Clear
   </a>
   ing the configuration register INTERRUPT_CORE0_SOURCE_
   <i>
    X
   </i>
   _MAP_REG disables the corresponding interrupt source.
  </p>
  <h1>
   8.3.4 Query Current I
   <a href="#page-213-17">
    nterrupt Status of Peripheral In
   </a>
   terrupt Source
  </h1>
  <p block-type="Text">
   <span id="page-206-5">
   </span>
   Users can query current interrupt status of a peripheral interrupt source by reading the bit value in INTERRUPT_CORE0
  </p>
  <p block-type="Text">
   _INTR_STATUS_
   <i>
    n
   </i>
   _REG (read only). For the mapping between INTERRUPT_CORE0_INTR_STATUS_
   <i>
    n
   </i>
   _REG and peripheral interrupt sources, please refer to Table 8.3-1.
  </p>
  <span id="page-208-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      So
      <br/>
      ing
      <br/>
      is
      <br/>
      In
      <br/>
      Ma
      <br/>
      Re
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rru
      <br/>
      p
      <br/>
      ur
      <br/>
      ce
      <br/>
      p
      <br/>
      p
      <br/>
      g
      <br/>
      rs
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      G
      <br/>
      /
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      W
      <br/>
      R_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      W
      <br/>
      R_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      I
      <br/>
      2
      <br/>
      C_
      <br/>
      M
      <br/>
      S
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      I
      <br/>
      2
      <br/>
      C_
      <br/>
      M
      <br/>
      S
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      2
      <br/>
      C
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      0x
      <br/>
      0
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      L
      <br/>
      C
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      L
      <br/>
      C
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      3
      <br/>
      0
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      L
      <br/>
      C
      <br/>
      1_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      L
      <br/>
      C
      <br/>
      1_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      3
      <br/>
      4
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      A
      <br/>
      P
      <br/>
      B_
      <br/>
      C
      <br/>
      T
      <br/>
      R
      <br/>
      L_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      A
      <br/>
      P
      <br/>
      B_
      <br/>
      C
      <br/>
      T
      <br/>
      R
      <br/>
      L_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      3
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      U
      <br/>
      H
      <br/>
      C
      <br/>
      I
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      U
      <br/>
      H
      <br/>
      C
      <br/>
      I
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      3
      <br/>
      C
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      G
      <br/>
      P
      <br/>
      I
      <br/>
      O_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      O_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      G
      <br/>
      P
      <br/>
      I
      <br/>
      O_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      O
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      4
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      P
      <br/>
      I_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      1_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      P
      <br/>
      I_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      1
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      4
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      P
      <br/>
      I_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      2_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      P
      <br/>
      I_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      2
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      4
      <br/>
      C
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      2
      <br/>
      S_
      <br/>
      G
      <br/>
      2
      <br/>
      S_
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      I
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      I
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      5
      <br/>
      0
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      G
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      U
      <br/>
      A
      <br/>
      R
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      U
      <br/>
      A
      <br/>
      R
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      5
      <br/>
      4
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      G
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      U
      <br/>
      A
      <br/>
      R
      <br/>
      T
      <br/>
      1_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      U
      <br/>
      A
      <br/>
      R
      <br/>
      T
      <br/>
      1_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      5
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C_
      <br/>
      G
      <br/>
      C_
      <br/>
      0
      <br/>
      C
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      L
      <br/>
      E
      <br/>
      D
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      L
      <br/>
      E
      <br/>
      D
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      5
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      E
      <br/>
      F
      <br/>
      U
      <br/>
      S
      <br/>
      E_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      6
      <br/>
      0
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      T
      <br/>
      W
      <br/>
      A
      <br/>
      I_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      T
      <br/>
      W
      <br/>
      A
      <br/>
      I_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      6
      <br/>
      4
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      U
      <br/>
      S
      <br/>
      B_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      U
      <br/>
      S
      <br/>
      B_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      te
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      6
      <br/>
      8
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      R
      <br/>
      T
      <br/>
      C_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      R
      <br/>
      T
      <br/>
      C_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      6
      <br/>
      C
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      0x
      <br/>
      0
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      R
      <br/>
      M
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      R
      <br/>
      M
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      7
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      I
      <br/>
      2
      <br/>
      C_
      <br/>
      E
      <br/>
      X
      <br/>
      T
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      I
      <br/>
      2
      <br/>
      C_
      <br/>
      E
      <br/>
      X
      <br/>
      T
      <br/>
      0
      <br/>
      in
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      R
      <br/>
      W
      <br/>
      tr
      <br/>
      te
      <br/>
      7
      <br/>
      4
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      1_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      1
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      7
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      2_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      2
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      7
      <br/>
      C
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      G_
      <br/>
      0_
      <br/>
      G
      <br/>
      G_
      <br/>
      0_
      <br/>
      /
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      T
      <br/>
      T
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      T
      <br/>
      T
      <br/>
      I
      <br/>
      N
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      0
      <br/>
      R
      <br/>
      W
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </th>
     <th>
      Na
      <br/>
      me
     </th>
     <th>
      De
      <br/>
      ip
      <br/>
      t
      <br/>
      sc
      <br/>
      r
     </th>
     <th>
      d
      <br/>
      dr
      <br/>
      A
      <br/>
      Ac
      <br/>
      es
      <br/>
      ce
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      ion
     </td>
     <td>
      s
      <br/>
      ss
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      N
     </td>
     <td>
      T
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Na
      <br/>
      De
      <br/>
      me
     </th>
     <th>
      d
      <br/>
      dr
      <br/>
      ip
      <br/>
      ion
      <br/>
      A
      <br/>
      t
      <br/>
      sc
      <br/>
      r
      <br/>
      es
      <br/>
      s
     </th>
     <th>
      Ac
      <br/>
      ce
      <br/>
      ss
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      T
      <br/>
      G
      <br/>
      1_
      <br/>
      T
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      T
      <br/>
      G
      <br/>
      1_
     </td>
     <td>
      T
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      8
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      T
      <br/>
      G
      <br/>
      1_
      <br/>
      W
      <br/>
      D
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      T
      <br/>
      G
      <br/>
      1_
     </td>
     <td>
      W
      <br/>
      D
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      8
      <br/>
      C
      <br/>
      0x
      <br/>
      0
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
      Chapter
      <br/>
      8
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      A
      <br/>
      C
      <br/>
      H
      <br/>
      E_
      <br/>
      I
      <br/>
      A_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      C
      <br/>
      A
      <br/>
      C
     </td>
     <td>
      H
      <br/>
      E_
      <br/>
      I
      <br/>
      A_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      te
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      9
      <br/>
      0
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      Y
      <br/>
      S
      <br/>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      T
      <br/>
      A
      <br/>
      R
      <br/>
      G
      <br/>
      E
      <br/>
      T
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      Y
      <br/>
      S
     </td>
     <td>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      T
      <br/>
      A
      <br/>
      R
      <br/>
      G
      <br/>
      E
      <br/>
      T
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      9
      <br/>
      te
      <br/>
      4
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      Y
      <br/>
      S
      <br/>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      T
      <br/>
      A
      <br/>
      R
      <br/>
      G
      <br/>
      E
      <br/>
      T
      <br/>
      1_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      Y
      <br/>
      S
     </td>
     <td>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      T
      <br/>
      A
      <br/>
      R
      <br/>
      G
      <br/>
      E
      <br/>
      T
      <br/>
      1_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      9
      <br/>
      8
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
      Interrupt
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      Y
      <br/>
      S
      <br/>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      T
      <br/>
      A
      <br/>
      R
      <br/>
      G
      <br/>
      E
      <br/>
      T
      <br/>
      2_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      Y
      <br/>
      S
     </td>
     <td>
      T
      <br/>
      I
      <br/>
      M
      <br/>
      E
      <br/>
      R_
      <br/>
      T
      <br/>
      A
      <br/>
      R
      <br/>
      G
      <br/>
      E
      <br/>
      T
      <br/>
      2_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      9
      <br/>
      C
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      P
      <br/>
      I_
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      R
      <br/>
      E
      <br/>
      J
      <br/>
      E
      <br/>
      C
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      P
      <br/>
      I_
     </td>
     <td>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      R
      <br/>
      E
      <br/>
      J
      <br/>
      E
      <br/>
      C
      <br/>
      T_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      A
      <br/>
      0
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
      Matrix
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      I
      <br/>
      C
      <br/>
      A
      <br/>
      C
      <br/>
      H
      <br/>
      E_
      <br/>
      P
      <br/>
      R
      <br/>
      E
      <br/>
      L
      <br/>
      O
      <br/>
      A
      <br/>
      D_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      I
      <br/>
      C
      <br/>
      A
     </td>
     <td>
      R
      <br/>
      C
      <br/>
      H
      <br/>
      E_
      <br/>
      P
      <br/>
      R
      <br/>
      E
      <br/>
      L
      <br/>
      O
      <br/>
      A
      <br/>
      D_
      <br/>
      I
      <br/>
      N
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      A
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      C
      <br/>
      S
      <br/>
      C_
      <br/>
      G
      <br/>
      C
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      I
      <br/>
      A
      <br/>
      H
      <br/>
      E_
      <br/>
      Y
      <br/>
      N
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      I
      <br/>
      A
     </td>
     <td>
      T
      <br/>
      4
      <br/>
      C
      <br/>
      S
      <br/>
      C_
      <br/>
      0
      <br/>
      0
      <br/>
      H
      <br/>
      E_
      <br/>
      Y
      <br/>
      N
      <br/>
      I
      <br/>
      N
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      A
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C_
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      A
      <br/>
      P
      <br/>
      B_
      <br/>
      A
      <br/>
      D
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      A
      <br/>
      P
     </td>
     <td>
      8
      <br/>
      T
      <br/>
      r
      <br/>
      C_
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      B_
      <br/>
      A
      <br/>
      D
      <br/>
      I
      <br/>
      N
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      A
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
      (INTERRUPT)
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      0_
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      H
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      D
      <br/>
      M
     </td>
     <td>
      T
      <br/>
      reg
      <br/>
      r
      <br/>
      C
      <br/>
      0_
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      A_
      <br/>
      H
      <br/>
      I
      <br/>
      N
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      B
      <br/>
      te
      <br/>
      ma
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      H
      <br/>
      1_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      D
      <br/>
      M
     </td>
     <td>
      T
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      C
      <br/>
      0
      <br/>
      0
      <br/>
      A_
      <br/>
      H
      <br/>
      1_
      <br/>
      I
      <br/>
      N
      <br/>
      is
      <br/>
      0x
      <br/>
      B
      <br/>
      te
      <br/>
      ma
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      D
      <br/>
      M
      <br/>
      C
      <br/>
      H
      <br/>
      I
      <br/>
      N
      <br/>
      M
      <br/>
      A
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      D
      <br/>
      M
     </td>
     <td>
      T
      <br/>
      ing
      <br/>
      4
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      C
      <br/>
      H
      <br/>
      I
      <br/>
      N
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      B
      <br/>
      0x
      <br/>
      te
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      T_
      <br/>
      0_
      <br/>
      A_
      <br/>
      2_
      <br/>
      T_
      <br/>
      P_
      <br/>
      N
     </td>
     <td>
      A_
      <br/>
      2_
      <br/>
      T
      <br/>
      ing
      <br/>
      8
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      R
      <br/>
      S
      <br/>
      A_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      R
      <br/>
      S
     </td>
     <td>
      A_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      B
      <br/>
      C
      <br/>
      0x
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      A
      <br/>
      E
     </td>
     <td>
      S_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      0
      <br/>
      te
      <br/>
      0x
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      S
      <br/>
      H
      <br/>
      A_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      H
     </td>
     <td>
      A_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      4
      <br/>
      te
      <br/>
      0x
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      F
      <br/>
      R
      <br/>
      O
      <br/>
      M_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      0_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      C
      <br/>
      P
     </td>
     <td>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      F
      <br/>
      R
      <br/>
      O
      <br/>
      M_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      0
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      8
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      F
      <br/>
      R
      <br/>
      O
      <br/>
      M_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      1_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      C
      <br/>
      P
     </td>
     <td>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      F
      <br/>
      R
      <br/>
      O
      <br/>
      M_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      1
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      C
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      F
      <br/>
      R
      <br/>
      O
      <br/>
      M_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      2_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      C
      <br/>
      P
     </td>
     <td>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      F
      <br/>
      R
      <br/>
      O
      <br/>
      M_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      2
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      D
      <br/>
      0
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      F
      <br/>
      R
      <br/>
      O
      <br/>
      M_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      3_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      C
      <br/>
      P
     </td>
     <td>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      F
      <br/>
      R
      <br/>
      O
      <br/>
      M_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      3
      <br/>
      in
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      D
      <br/>
      4
      <br/>
      tr
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      S
      <br/>
      S
      <br/>
      S
      <br/>
      G_
      <br/>
      G
      <br/>
      S
      <br/>
      S
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      A
      <br/>
      I
      <br/>
      T_
      <br/>
      D
      <br/>
      E
      <br/>
      B
      <br/>
      U
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      A
     </td>
     <td>
      S
      <br/>
      G_
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      I
      <br/>
      T_
      <br/>
      D
      <br/>
      E
      <br/>
      B
      <br/>
      U
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      D
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E_
      <br/>
      D
      <br/>
      M
     </td>
     <td>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      D
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      0_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      R
      <br/>
      E_
      <br/>
      I
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E
      <br/>
      I
      <br/>
      R
      <br/>
      A
     </td>
     <td>
      0_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      M
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      E
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      G
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      _
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      0_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      R
      <br/>
      E_
      <br/>
      D
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      D
      <br/>
      R
      <br/>
      A
     </td>
     <td>
      0_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      0
      <br/>
      0
      <br/>
      M
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      E
      <br/>
      4
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      G
      <br/>
      E_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      R
      <br/>
      E_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
     </td>
     <td>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E
      <br/>
      ing
      <br/>
      is
      <br/>
      0x
      <br/>
      E
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Na
      <br/>
      De
      <br/>
      me
     </th>
     <th>
      A
      <br/>
      d
      <br/>
      dr
      <br/>
      ip
      <br/>
      ion
      <br/>
      t
      <br/>
      sc
      <br/>
      r
     </th>
     <th>
      Ac
      <br/>
      es
      <br/>
      s
      <br/>
      ce
      <br/>
      ss
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      O
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E_
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      I
      <br/>
      S
      <br/>
      I
      <br/>
      Z
      <br/>
      E_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      V
      <br/>
      I
      <br/>
      O
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E_
      <br/>
      S
      <br/>
      I
      <br/>
      Z
      <br/>
      E
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      0x
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      E
      <br/>
      C
      <br/>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      B
      <br/>
      A
      <br/>
      C
      <br/>
      K
      <br/>
      U
      <br/>
      P_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      V
      <br/>
      I
      <br/>
      O
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      B
      <br/>
      A
     </td>
     <td>
      C
      <br/>
      K
      <br/>
      U
      <br/>
      P_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      V
      <br/>
      I
      <br/>
      O
      <br/>
      L
      <br/>
      A
      <br/>
      T
      <br/>
      E
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      0x
      <br/>
      te
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      F
      <br/>
      0
      <br/>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      A
      <br/>
      C
      <br/>
      H
      <br/>
      E_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      A
      <br/>
      C
      <br/>
      S_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      M
      <br/>
      A
      <br/>
      P_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      C
      <br/>
      A
     </td>
     <td>
      C
      <br/>
      H
      <br/>
      E_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      A
      <br/>
      C
      <br/>
      S
      <br/>
      ing
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      te
      <br/>
      0x
      <br/>
      ma
      <br/>
      p
      <br/>
      p
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      F
      <br/>
      4
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      In
      <br/>
      So
      <br/>
      S
      <br/>
      Re
      <br/>
      is
      <br/>
      te
      <br/>
      t
      <br/>
      ta
      <br/>
      tu
      <br/>
      te
      <br/>
      rru
      <br/>
      p
      <br/>
      ur
      <br/>
      ce
      <br/>
      s
      <br/>
      g
      <br/>
      rs
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      S
      <br/>
      T
      <br/>
      A
      <br/>
      T
      <br/>
      U
      <br/>
      S_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      ta
     </td>
     <td>
      is
      <br/>
      fo
      <br/>
      in
      <br/>
      0
      <br/>
      3
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      tu
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      1
      <br/>
      reg
      <br/>
      rru
      <br/>
      p
      <br/>
      so
      <br/>
      urc
      <br/>
      es
      <br/>
      ~
     </td>
     <td>
      F
      <br/>
      8
      <br/>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      R_
      <br/>
      S
      <br/>
      T
      <br/>
      A
      <br/>
      T
      <br/>
      U
      <br/>
      S_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      ta
     </td>
     <td>
      s
      <br/>
      r
      <br/>
      r
      <br/>
      is
      <br/>
      fo
      <br/>
      in
      <br/>
      3
      <br/>
      2
      <br/>
      6
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      tu
      <br/>
      te
      <br/>
      te
      <br/>
      1
      <br/>
      reg
      <br/>
      p
      <br/>
      so
      <br/>
      urc
      <br/>
      es
      <br/>
      rru
      <br/>
      ~
     </td>
     <td>
      F
      <br/>
      C
      <br/>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      loc
      <br/>
      is
      <br/>
      C
      <br/>
      Re
      <br/>
      te
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      t
      <br/>
      s
      <br/>
      r
      <br/>
      r
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      k
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      L
      <br/>
      O
      <br/>
      C
      <br/>
      K_
      <br/>
      G
      <br/>
      A
      <br/>
      T
      <br/>
      E_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      C
     </td>
     <td>
      loc
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      te
     </td>
     <td>
      /
      <br/>
      0
      <br/>
      0
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      is
      <br/>
      P
      <br/>
      In
      <br/>
      Re
      <br/>
      te
      <br/>
      te
      <br/>
      rru
     </td>
     <td>
      k
      <br/>
      reg
      <br/>
      r
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      U
      <br/>
      t
      <br/>
      p
      <br/>
      g
      <br/>
      rs
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      E
      <br/>
      N
      <br/>
      A
      <br/>
      B
      <br/>
      L
      <br/>
      E_
      <br/>
      R
      <br/>
      E
      <br/>
      En
     </td>
     <td>
      b
      <br/>
      C
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      in
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      te
      <br/>
      te
      <br/>
      a
      <br/>
      rru
     </td>
     <td>
      /
      <br/>
      0
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      T
      <br/>
      Y
      <br/>
      P
      <br/>
      E_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      le
      <br/>
      U
      <br/>
      ts
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      p
      <br/>
      C
      <br/>
      f
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      in
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      rru
     </td>
     <td>
      4
      <br/>
      /
      <br/>
      0
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Ty
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      C
      <br/>
      G
      <br/>
      C
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      L
      <br/>
      E
      <br/>
      A
      <br/>
      R_
      <br/>
      R
      <br/>
      E
      <br/>
      P
     </td>
     <td>
      ig
      <br/>
      U
      <br/>
      ts
      <br/>
      p
      <br/>
      e
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      p
      <br/>
      lea
      <br/>
      in
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      te
      <br/>
      te
     </td>
     <td>
      8
      <br/>
      0
      <br/>
      C
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      C
      <br/>
      P
      <br/>
      I
      <br/>
      N
      <br/>
      E
      <br/>
      I
      <br/>
      S
      <br/>
      T
      <br/>
      A
      <br/>
      T
      <br/>
      U
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pe
     </td>
     <td>
      U
      <br/>
      t
      <br/>
      rru
      <br/>
      p
      <br/>
      c
      <br/>
      r
      <br/>
      reg
      <br/>
      r
      <br/>
      d
      <br/>
      is
      <br/>
      C
      <br/>
      P
      <br/>
      in
      <br/>
      fo
      <br/>
      0x
      <br/>
      0
      <br/>
      1
     </td>
     <td>
      R
      <br/>
      O
      <br/>
      1
      <br/>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      T_
      <br/>
      0_
      <br/>
      U_
      <br/>
      T_
      <br/>
      P_
      <br/>
      S_
      <br/>
      N
     </td>
     <td>
      ing
      <br/>
      U
      <br/>
      ta
      <br/>
      tu
      <br/>
      te
      <br/>
      te
      <br/>
      ts
      <br/>
      n
      <br/>
      s
      <br/>
      s
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      1
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      1
      <br/>
      8
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      1
      <br/>
      C
      <br/>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      3
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      2
      <br/>
      R
      <br/>
      W
      <br/>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      4_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      0x
      <br/>
      0
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      4
      <br/>
      1
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      2
      <br/>
      R
      <br/>
      W
      <br/>
      4
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      5_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      0x
      <br/>
      0
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      5
      <br/>
      1
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      p
      <br/>
      r
      <br/>
      r
      <br/>
      rru
     </td>
     <td>
      /
      <br/>
      2
      <br/>
      8
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      6_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      6
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      p
      <br/>
      r
      <br/>
      r
      <br/>
      rru
     </td>
     <td>
      /
      <br/>
      2
      <br/>
      C
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      7_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      7
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      3
      <br/>
      0
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      8_
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      R
      <br/>
      E
      <br/>
      Pr
     </td>
     <td>
      C
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      8
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      3
      <br/>
      4
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      9_
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      R
      <br/>
      E
      <br/>
      Pr
     </td>
     <td>
      C
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      9
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      3
      <br/>
      8
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      0_
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      R
      <br/>
      E
      <br/>
      Pr
     </td>
     <td>
      C
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      1
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      3
      <br/>
      C
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      Pr
     </td>
     <td>
      C
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      1
      <br/>
      1
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      4
      <br/>
      0
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      in
      <br/>
      1
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      4
      <br/>
      4
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      1
      <br/>
      3
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      4
      <br/>
      8
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      4_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      Pr
     </td>
     <td>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      1
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      1
      <br/>
      4
      <br/>
      0x
      <br/>
      0
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      4
      <br/>
      C
      <br/>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Espressif Systems
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Na
     </th>
     <th>
      De
      <br/>
      ip
      <br/>
      ion
      <br/>
      A
      <br/>
      d
      <br/>
      dr
      <br/>
      t
      <br/>
      sc
      <br/>
      r
     </th>
     <th>
      Ac
      <br/>
      es
      <br/>
      s
      <br/>
      ce
      <br/>
      ss
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      me
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      6_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      1
      <br/>
      6
      <br/>
      0x
      <br/>
      0
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      1
      <br/>
      5
      <br/>
      4
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      7_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      1
      <br/>
      7
      <br/>
      0x
      <br/>
      0
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      1
      <br/>
      5
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      8_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      8
      <br/>
      0x
      <br/>
      0
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      1
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      1
      <br/>
      5
      <br/>
      C
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      1
      <br/>
      9_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      9
      <br/>
      0x
      <br/>
      0
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      1
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      p
      <br/>
      rru
     </td>
     <td>
      /
      <br/>
      6
      <br/>
      0
      <br/>
      R
      <br/>
      W
      <br/>
      1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      2
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      r
      <br/>
      r
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      2
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      p
      <br/>
      rru
     </td>
     <td>
      /
      <br/>
      6
      <br/>
      R
      <br/>
      W
      <br/>
      1
      <br/>
      4
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      2
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      ty
      <br/>
      t
      <br/>
      r
      <br/>
      r
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      in
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      1
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      6
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      2
      <br/>
      2_
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      U
      <br/>
      ty
      <br/>
      t
      <br/>
      r
      <br/>
      r
      <br/>
      C
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      in
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      6
      <br/>
      C
      <br/>
      /
      <br/>
      1
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      2
      <br/>
      3_
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      U
      <br/>
      2
      <br/>
      ty
      <br/>
      t
      <br/>
      r
      <br/>
      r
      <br/>
      C
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      in
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      1
      <br/>
      7
      <br/>
      0
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      2
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      4_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      U
      <br/>
      3
      <br/>
      ty
      <br/>
      t
      <br/>
      r
      <br/>
      r
      <br/>
      C
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      in
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      rru
     </td>
     <td>
      /
      <br/>
      1
      <br/>
      7
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      C
      <br/>
      2
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      5_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      U
      <br/>
      4
      <br/>
      ty
      <br/>
      t
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      p
      <br/>
      C
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      P
      <br/>
      in
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      rru
     </td>
     <td>
      4
      <br/>
      /
      <br/>
      1
      <br/>
      7
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      2
      <br/>
      6_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      U
      <br/>
      5
      <br/>
      ty
      <br/>
      t
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      p
      <br/>
      Pr
      <br/>
      C
      <br/>
      P
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      in
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      rru
     </td>
     <td>
      8
      <br/>
      1
      <br/>
      7
      <br/>
      C
      <br/>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      2
      <br/>
      7_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      U
      <br/>
      ig
      <br/>
      6
      <br/>
      ty
      <br/>
      t
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      p
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      in
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      1
      <br/>
      8
      <br/>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      C
      <br/>
      P
      <br/>
      I
      <br/>
      N
      <br/>
      P
      <br/>
      R
      <br/>
      2
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      ig
      <br/>
      U
      <br/>
      7
      <br/>
      ty
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      in
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      2
      <br/>
      0x
      <br/>
      0
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      1
      <br/>
      8
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      T_
      <br/>
      0_
      <br/>
      U_
      <br/>
      T_
      <br/>
      I_
      <br/>
      8_
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      C
      <br/>
      P
      <br/>
      I
      <br/>
      N
      <br/>
      P
      <br/>
      R
      <br/>
      2
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      ig
      <br/>
      U
      <br/>
      ty
      <br/>
      t
      <br/>
      8
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
      <br/>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      in
      <br/>
      2
     </td>
     <td>
      4
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      T_
      <br/>
      0_
      <br/>
      U_
      <br/>
      T_
      <br/>
      I_
      <br/>
      9_
     </td>
     <td>
      ig
      <br/>
      U
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      9
      <br/>
      0x
      <br/>
      0
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      1
      <br/>
      8
      <br/>
      8
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      3
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      3
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      1
      <br/>
      8
      <br/>
      C
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      P
      <br/>
      R
      <br/>
      I_
      <br/>
      3
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      Pr
      <br/>
      ior
      <br/>
      i
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      3
      <br/>
      0x
      <br/>
      0
      <br/>
      ty
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      t
      <br/>
      1
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      r
      <br/>
      rru
      <br/>
      p
     </td>
     <td>
      /
      <br/>
      9
      <br/>
      0
      <br/>
      R
      <br/>
      W
      <br/>
      1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E
      <br/>
      0_
      <br/>
      C
      <br/>
      P
      <br/>
      U_
      <br/>
      I
      <br/>
      N
      <br/>
      T_
      <br/>
      T
      <br/>
      H
      <br/>
      R
      <br/>
      E
      <br/>
      S
      <br/>
      H_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      hre
      <br/>
      ho
      <br/>
      l
      <br/>
      d
      <br/>
      T
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      fo
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      in
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      ts
      <br/>
      s
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      p
      <br/>
      r
      <br/>
      r
      <br/>
      rru
     </td>
     <td>
      /
      <br/>
      9
      <br/>
      R
      <br/>
      W
      <br/>
      1
      <br/>
      4
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ion
      <br/>
      is
      <br/>
      Ve
      <br/>
      Re
      <br/>
      te
      <br/>
      rs
      <br/>
      g
      <br/>
      r
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      G
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      R
      <br/>
      E
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      R
      <br/>
      U
      <br/>
      P
      <br/>
      T_
      <br/>
      D
      <br/>
      A
      <br/>
      T
      <br/>
      E_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   8.5 Registers
  </h1>
  <p block-type="Text">
   <span id="page-212-31">
   </span>
   <span id="page-212-0">
   </span>
   The addresses in this section are relative to the interrupt matrix base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <blockquote>
   <p block-type="Text">
    <span id="page-212-30">
    </span>
    <span id="page-212-29">
    </span>
    <span id="page-212-28">
    </span>
    <span id="page-212-27">
    </span>
    <span id="page-212-26">
    </span>
    <span id="page-212-25">
    </span>
    <span id="page-212-24">
    </span>
    <span id="page-212-23">
    </span>
    <span id="page-212-22">
    </span>
    <span id="page-212-21">
    </span>
    <span id="page-212-20">
    </span>
    <span id="page-212-19">
    </span>
    <span id="page-212-18">
    </span>
    <span id="page-212-17">
    </span>
    <span id="page-212-16">
    </span>
    <span id="page-212-15">
    </span>
    <span id="page-212-14">
    </span>
    <span id="page-212-13">
    </span>
    <span id="page-212-12">
    </span>
    <span id="page-212-11">
    </span>
    <span id="page-212-10">
    </span>
    <span id="page-212-9">
    </span>
    <span id="page-212-8">
    </span>
    <span id="page-212-7">
    </span>
    <span id="page-212-6">
    </span>
    <span id="page-212-5">
    </span>
    <span id="page-212-4">
    </span>
    <span id="page-212-3">
    </span>
    <span id="page-212-2">
    </span>
    <span id="page-212-1">
    </span>
    Register 8.1. INTERRUPT_CORE0_
    <i>
     PWR_INTR_MAP
    </i>
    _REG (0x0008)
    <a href="#page-90-0">
     Register 8.2
    </a>
    . INTERRUPT_CORE0_
    <i>
     I2C_MST_INT_MAP
    </i>
    _REG (0x002C) Register 8.3. INTERRUPT_CORE0_
    <i>
     SLC0_INTR_MAP
    </i>
    _REG (0x0030) Register 8.4. INTERRUPT_CORE0_
    <i>
     SLC1_INTR_MAP
    </i>
    _REG (0x0034) Register 8.5. INTERRUPT_CORE0_
    <i>
     SYSCON_INTR_MAP
    </i>
    _REG (0x0038) Register 8.6. INTERRUPT_CORE0_
    <i>
     UHCI0_INTR_MAP
    </i>
    _REG (0x003C)
   </p>
  </blockquote>
  <p block-type="Text">
   Register 8.7. INTERRUPT_CORE0_
   <i>
    GPIO_INTERRUPT_PRO_MAP
   </i>
   _REG (0x0040) Register 8.8. INTERRUPT_CORE0_
   <i>
    SPI_INTR_1_MAP
   </i>
   _REG (0x0048) Register 8.9. INTERRUPT_CORE0_
   <i>
    SPI_INTR_2_MAP
   </i>
   _REG (0x004C) Register 8.10. INTERRUPT_CORE0_
   <i>
    I2S_INT_MAP
   </i>
   _REG (0x0050) Register 8.11. INTERRUPT_CORE0_
   <i>
    UART_INTR_MAP
   </i>
   _REG (0x0054) Register 8.12. INTERRUPT_CORE0_
   <i>
    UART1_INTR_MAP
   </i>
   _REG (0x0058) Register 8.13. INTERRUPT_CORE0_
   <i>
    LEDC_INT_MAP
   </i>
   _REG (0x005C) Register 8.14. INTERRUPT_CORE0_
   <i>
    EFUSE_INT_MAP
   </i>
   _REG (0x0060) Register 8.15. INTERRUPT_CORE0_
   <i>
    TWAI_INT_MAP
   </i>
   _REG (0x0064) Register 8.16. INTERRUPT_CORE0_
   <i>
    USB_INTR_MAP
   </i>
   _REG (0x0068)
  </p>
  <p block-type="Text">
   Register 8.17. INTERRUPT_CORE0_
   <i>
    RTC_CORE_INTR_MAP
   </i>
   _REG (0x006C) Register 8.18. INTERRUPT_CORE0_
   <i>
    RMT_INTR_MAP
   </i>
   _REG (0x0070)
  </p>
  <p block-type="Text">
   Register 8.19. INTERRUPT_CORE0_
   <i>
    I2C_EXT0_INTR_MAP
   </i>
   _REG (0x0074) Register 8.20. INTERRUPT_CORE0_
   <i>
    TIMER_INT1_MAP
   </i>
   _REG (0x0078) Register 8.21. INTERRUPT_CORE0_
   <i>
    TIMER_INT2_MAP
   </i>
   _REG (0x007C) Register 8.22. INTERRUPT_CORE0_
   <i>
    TG_T0_INT_MAP
   </i>
   _REG (0x0080) Register 8.23. INTERRUPT_CORE0_
   <i>
    TG_WDT_INT_MAP
   </i>
   _REG (0x0084) Register 8.24. INTERRUPT_CORE0_
   <i>
    TG1_T0_INT_MAP
   </i>
   _REG (0x0088) Register 8.25. INTERRUPT_CORE0_
   <i>
    TG1_WDT_INT_MAP
   </i>
   _REG (0x008C)
  </p>
  <p block-type="Text">
   Register 8.26. INTERRUPT_CORE0_
   <i>
    CACHE_IA_INT_MAP
   </i>
   _REG (0x0090)
  </p>
  <p block-type="Text">
   Register 8.27. INTERRUPT_CORE0_
   <i>
    SYSTIMER_TARGET0_INT_MAP
   </i>
   _REG (0x0094) Register 8.28. INTERRUPT_CORE0_
   <i>
    SYSTIMER_TARGET1_INT_MAP
   </i>
   _REG (0x0098) Register 8.29. INTERRUPT_CORE0_
   <i>
    SYSTIMER_TARGET2_INT_MAP
   </i>
   _REG (0x009C) Register 8.30. INTERRUPT_CORE0_
   <i>
    SPI_MEM_REJECT_INTR_MAP
   </i>
   _REG (0x00A0) Register 8.31. INTERRUPT_CORE0_
   <i>
    ICACHE_PRELOAD_INT_MAP
   </i>
   _REG (0x00A4)
  </p>
  <p block-type="Text">
   <span id="page-213-20">
   </span>
   <span id="page-213-19">
   </span>
   <span id="page-213-18">
   </span>
   <span id="page-213-16">
   </span>
   <span id="page-213-15">
   </span>
   <span id="page-213-14">
   </span>
   <span id="page-213-13">
   </span>
   <span id="page-213-12">
   </span>
   <span id="page-213-11">
   </span>
   <span id="page-213-10">
   </span>
   <span id="page-213-9">
   </span>
   <span id="page-213-8">
   </span>
   <span id="page-213-7">
   </span>
   <span id="page-213-6">
   </span>
   <span id="page-213-5">
   </span>
   <span id="page-213-4">
   </span>
   <span id="page-213-3">
   </span>
   <span id="page-213-2">
   </span>
   <span id="page-213-1">
   </span>
   <span id="page-213-0">
   </span>
   Register 8.32. INTERRUPT_CORE0_
   <i>
    ICACHE_SYNC_INT_MAP
   </i>
   _REG (0x00A8) Register 8.33. INTERRUPT_CORE0_
   <i>
    APB_ADC_INT_MAP
   </i>
   _REG (0x00AC) Register 8.34. INTERRUPT_CORE0_
   <i>
    DMA_CH0_INT_MAP
   </i>
   _REG (0x00B0) Register 8.35. INTERRUPT_CORE0_
   <i>
    DMA_CH1_INT_MAP
   </i>
   _REG (0x00B4) Register 8.36. INTERRUPT_CORE0_
   <i>
    DMA_CH2_INT_MAP
   </i>
   _REG (0x00B8) Register 8.37. INTERRUPT_CORE0_
   <i>
    RSA_INT_MAP
   </i>
   _REG (0x00BC) Register 8.38. INTERRUPT_CORE0_
   <i>
    AES_INT_MAP
   </i>
   _REG (0x00C0) Register 8.39. INTERRUPT_CORE0_
   <i>
    SHA_INT_MAP
   </i>
   _REG (0x00C4) Register 8.40. INTERRUPT_CORE0_
   <i>
    CPU_INTR_FROM_CPU_0_MAP
   </i>
   _REG (0x00C8) Register 8.41. INTERRUPT_CORE0_
   <i>
    CPU_INTR_FROM_CPU_1_MAP
   </i>
   _REG (0x00CC)
  </p>
  <p block-type="Text">
   Register 8.42. INTERRUPT_CORE0_
   <i>
    CPU_INTR_FROM_CPU_2_MAP
   </i>
   _REG (0x00D0) Register 8.43. INTERRUPT_CORE0_
   <i>
    CPU_INTR_FROM_CPU_3_MAP
   </i>
   _REG (0x00D4)
  </p>
  <p block-type="Text">
   Register 8.44. INTERRUPT_CORE0_
   <i>
    ASSIST_DEBUG_INTR_MAP
   </i>
   _REG (0x00D8)
  </p>
  <p block-type="Text">
   Register 8.45. INTERRUPT_CORE0_
   <i>
    DMA_APBPERI_PMS_MONITOR_VIOLATE_INTR_MAP
   </i>
   _REG (0x00DC)
  </p>
  <p block-type="Text">
   Register 8.46. INTERRUPT_CORE0_
   <i>
    CORE_0_IRAM0_PMS_MONITOR_VIOLATE_INTR_MAP
   </i>
   _REG (0x00E0)
  </p>
  <p block-type="Text">
   Register 8.47. INTERRUPT_CORE0_
   <i>
    CORE_0_DRAM0_PMS_MONITOR_VIOLATE_INTR_MAP
   </i>
   _REG (0x00E4) Register 8.48. INTERRUPT_CORE0_
   <i>
    CORE_0_PIF_PMS_MONITOR_VIOLATE_INTR_MAP
   </i>
   _REG (0x00E8)
  </p>
  <p block-type="Text">
   Register 8.49. INTERRUPT_CORE0_
   <i>
    CORE_0_PIF_PMS_MONITOR_VIOLATE_SIZE_INTR_MAP
   </i>
   _REG (0x00EC)
  </p>
  <p block-type="Text">
   Register 8.50. INTERRUPT_CORE0_
   <i>
    BACKUP_PMS_VIOLATE_INTR_MAP
   </i>
   _REG (0x00F0)
  </p>
  <p block-type="Text">
   Register 8.51. INTERRUPT_CORE0_
   <i>
    CACHE_CORE0_ACS_INT_MAP
   </i>
   _REG (0x00F4)
  </p>
  <p>
   <span id="page-213-17">
   </span>
   <img src="_page_213_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_SOURCE_
   <i>
    X
   </i>
   _MAP Map the interrupt source (SOURCE_
   <i>
    X
   </i>
   ) into one CPU interrupt. For the information of SOURCE_
   <i>
    X
   </i>
   , see Table 8.3-1. (R/W)
  </p>
  <p>
   <img src="_page_214_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_INTR_STATUS_0 This register stores the status of the first 32 interrupt sources:
  </p>
  <p block-type="Text">
   <span id="page-214-2">
   </span>
   <span id="page-214-1">
   </span>
   <span id="page-214-0">
   </span>
   0 ~ 31. If the bit is 1 here, it means the corresponding source triggered an interrupt. (RO)
  </p>
  <p>
   <img src="_page_214_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_INTR_STATUS_1 This register stores the status of the first 32 interrupt sources: 32 ~ 61. If the bit is 1 here, it means the corresponding source triggered an interrupt. (RO)
  </p>
  <h1>
   Register 8.54. INTERRUPT_CORE0_CLOCK_GATE_REG (0x0100)
  </h1>
  <p>
   <img src="_page_214_Figure_6.jpeg"/>
  </p>
  <p>
   <img src="_page_214_Figure_7.jpeg"/>
  </p>
  <p>
   <span id="page-215-5">
   </span>
   <span id="page-215-4">
   </span>
   <span id="page-215-3">
   </span>
   <img src="_page_215_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-215-0">
   </span>
   <img src="_page_215_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_CPU_INT_ENABLE Writing 1 to the bit here enables its corresponding CPU interrupt. For more information about how to use this register, see Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   . (R/W)
  </p>
  <p>
   <span id="page-215-1">
   </span>
   <img src="_page_215_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_CPU_INT_TYPE Configure CPU interrupt type. 0: level-triggered; 1: edgetriggered. For more information about how to use this register, see Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   . (R/W)
  </p>
  <p>
   <span id="page-215-2">
   </span>
   <img src="_page_215_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_CPU_INT_CLEAR Writing 1 to the bit here clears its corresponding CPU interrupt. For more information about how to use this register, see Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   . (R/W)
  </p>
  <p>
   <span id="page-216-1">
   </span>
   <img src="_page_216_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-216-3">
   </span>
   <span id="page-216-2">
   </span>
   INTERRUPT_CORE0_CPU_INT_EIP_STATUS Store the pending status of CPU interrupts. For more information about how to use this register, see Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   . (RO)
  </p>
  <p>
   <span id="page-216-0">
   </span>
   <img src="_page_216_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_CPU_PRI_
   <i>
    n
   </i>
   _MAP Set the priority for CPU interrupt
   <i>
    n
   </i>
   . The priority here can be 1 (lowest) ~ 15 (highest). For more information about how to use this register, see Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   . (R/W)
  </p>
  <p>
   <span id="page-217-0">
   </span>
   <img src="_page_217_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_CPU_INT_THRESH Set threshold for interrupt assertion to CPU. Only when the interrupt priority is equal to or higher than this threshold, CPU will respond to this interrupt. For more information about how to use this register, see Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   . (R/W)
  </p>
  <h4>
   <span id="page-217-2">
   </span>
   <span id="page-217-1">
   </span>
   Register 8.61. INTERRUPT_CORE0_INTERRUPT_D
   <a href="#page-30-0">
    ATE_REG (0x07FC)
   </a>
  </h4>
  <p>
   <img src="_page_217_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   INTERRUPT_CORE0_INTERRUPT_DATE Version control register. (R/W)
  </p>
  <h1>
   <span id="page-218-0">
   </span>
   Chapter 9
  </h1>
  <h1>
   <span id="page-218-4">
   </span>
   Low-power Management
  </h1>
  <h1>
   9.1 Introduction
  </h1>
  <p block-type="Text">
   <span id="page-218-1">
   </span>
   ESP32-C3 has an advanced Power Management Unit (PMU), which can flexibly power up different power domains of the chip, to achieve the best balance among chip performance, power consumption, and wakeup latency. To simplify power management for typical scenarios, ESP32-C3 has predefined four power modes, which are preset configurations that power up different combinations of power domains. On top of that, the chip also allows the users to independently power up any particular power domain to meet more complex requirements.
  </p>
  <h1>
   9.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-218-2">
   </span>
   ESP32-C3's low-power management supports the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Four predefined power modes to simplify power management for typical scenarios
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Up to 8 KB of retention memory
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     8 x 32-bit retention registers
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RTC Boot supported for reduced wakeup latency
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In this chapter, we first introduce the working process of ESP32-C3's low-power management, then introduce the predefined power modes of the chip, and at last, introduce the RTC boot of the chip.
  </p>
  <h1>
   9.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-218-3">
   </span>
   ESP32-C3's low-power management involves the following components:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Power management unit: controls the power supply to Analog, RTC and Digital power domains.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Power isolation unit: isolates different power domains, so any powered down power domain does not affect the powered up ones.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Low-power clocks: provide clocks to power domains working in low-power modes.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RTC timer: logs the status of the RTC main state machine in dedicated registers.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     8 x 32-bit "always-on" retention registers: These registers are always powered up and are not affected by any low-power modes, thus can be used for storing data that cannot be lost.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     6 x "always-on" pins: These pins are always powered up and are not affected by any low-power modes, which makes them suitable for working as wakeup sources when the chip is working in the low-power
    </li>
   </ul>
  </p>
  <p block-type="Text">
   modes (for details, please refer to Section 9.4.3), or can be used as regular GPIOs (for details, please refer to Chapter 5
   <i>
    IO MUX and GPIO Matrix (GPIO, IO MUX)
   </i>
   ).
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RTC fast memory: 8 KB SRAM that works under CPU clock (CPU_CLK), which can be used as extended memory.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Voltage regulato
     <a href="#page-158-0">
      rs: regulate the power supply to different p
     </a>
     ower domains.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The schematic diagram of ESP32-C3's low-power management is shown in Figure 9.3-1.
  </p>
  <p>
   <span id="page-219-0">
   </span>
   <img src="_page_219_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   Red lines represent power distribution
  </p>
  <p>
   Figure 9.3-1. Low-power Management Schematics
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For more information about different power domains, please check Section 9.4.1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Switches in the above diagram can be controlled by Register RTC_CNTL_DIG_PWC_REG.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Signals in the above diagram are described below:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       xpd_rtc_reg:
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * When RTC_CNTL_REGULATOR_FORCE_PU is set
         <a href="#page-249-0">
         </a>
         t
         <a href="#page-249-0">
          o 1, low power voltage regul
         </a>
         ator is always-on;
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * Otherwise, the low power voltage regulator is off when chip enters Light-sleep and Deep-sleep modes. In this case, the RTC domain is powered by an ultra low-power internal power source.
        </li>
       </ul>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       xpd_dig_r
       <a href="#page-248-0">
        eg:
       </a>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * When RTC_CNTL_DG_WRAP_PD_EN is enabled, the digital system voltage regulator is off when the chip enters Light-sleep and Deep-sleep modes;
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * Otherwise, the digital system voltage regulator is always-on.
        </li>
       </ul>
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     xpd_ex_crystal:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       * When RTC_CNTL_XTL_FORCE_PU is set to 1, the external main crystal clock is always-on;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       * Otherwise, the external main crystal clock is off when chip enters Light-sleep and Deep-sleep modes.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     xpd_rc_oscilator:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       * when
       <a href="#page-232-1">
        RTC_CNTL_FOSC_FORCE_PU
       </a>
       is set to 1, the fast RC oscillator is always-on;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       * Otherwise, the fast RC oscillator is off when chip enters Light-sleep and Deep-sleep modes.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   9.3.1 Power Management Unit (PMU)
  </h1>
  <p block-type="Text">
   <span id="page-220-0">
   </span>
   ESP32-C3's power management unit controls the power supply to different power domains. The main components of the power management unit include:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RTC main state machine: generates power gating, clock gating, and reset signals.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Power controllers: power up and power down different power domains, according to the power gating signals from the main state machine.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Sleep / wakeup controllers: send sleep or wakeup requests to the RTC main state machine.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Clock controller: selects and powers up/down clock sources.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Protection Timer: controls the transition interval between main state machine states.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In ESP32-C3's power management unit, the sleep / wakeup controllers send sleep or wakeup requests to the RTC main state machine, which then generates power gating, clock gating, and reset signals. Then, the power controller and clock controller power up and power down different power domains and clock sources, according to the signals generated by the RTC main state machine, so that the chip enters or exits the low-power modes. The main workflow is shown in Figure 9.3-2.
  </p>
  <p>
   <span id="page-220-1">
   </span>
   <img src="_page_220_Figure_14.jpeg"/>
  </p>
  <p>
   <img src="_page_220_Figure_15.jpeg"/>
  </p>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Each power domain has its own power controller. For a complete list of all the available power controllers controlling different power domains, please refer to Section 9.4.1.
    </li>
    <li block-type="ListItem">
     2. For a complete list of all the available wakeup sources, please refer to Table 9.4-2.
    </li>
   </ul>
  </p>
  <h1>
   9.3.2 Low-Power Clocks
  </h1>
  <p block-type="Text">
   <span id="page-221-0">
   </span>
   In general, ESP32-C3 powers down its external main crystal oscillator XTAL_CLK and PLL to reduce power consumption when working in low-power modes. During this time, the chip's low-power clocks remain on to provide clocks to low power domains, such as the power management unit.
  </p>
  <p>
   <span id="page-221-1">
   </span>
   <img src="_page_221_Figure_5.jpeg"/>
  </p>
  <p>
   <img src="_page_221_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-222-3">
   </span>
   <img src="_page_222_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 9.3-4. Wireless Clock
  </p>
  <p>
  </p>
  <span id="page-222-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 9.3-1. Low-power Clocks
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td colspan="3" rowspan="3">
      Power Domain
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Clock Type
     </td>
     <td>
      Clock Source
     </td>
     <td>
      Selection Signal
     </td>
    </tr>
    <tr>
     <td>
      RC_FAST_CLK divided by n
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      RTC Fast Clock
     </td>
     <td>
      (Default)
     </td>
     <td>
      RTC_CNTL_FAST_CLK_RTC_SEL
     </td>
     <td colspan="2">
      RTC Registers
     </td>
    </tr>
    <tr>
     <td>
      XTAL_DIV_CLK
     </td>
     <td>
     </td>
     <td colspan="3" rowspan="2">
      Power Management System
     </td>
    </tr>
    <tr>
     <td>
      XTAL32K_CLK
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="4">
      RTC Slow Clock
      <br/>
      Wireless Clock
     </td>
     <td>
      RC_FAST_DIV_CLK
      <br/>
      RC_SLOW_CLK (default)
     </td>
     <td>
      RTC_CNTL_ANA_CLK_RTC_SEL
     </td>
     <td>
      (except RTC registers)
     </td>
    </tr>
    <tr>
     <td>
      XTAL32K_CLK
     </td>
     <td>
      SYSTEM_LPCLK_SEL_XTAL32K
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RC_FAST_CLK divided by n
     </td>
     <td>
      SYSTEM_LPCLK_SEL_20M
     </td>
     <td>
      Wireless modules (Wi-Fi/BT) in the
     </td>
    </tr>
    <tr>
     <td>
      RTC_SLOW_CLK
     </td>
     <td>
      SYSTEM_LPCLK_RTC_SLOW
     </td>
     <td>
      digital system domain working in
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   When working under low-power modes, ESP32-C
   <a href="#page-438-0">
    3's XTAL_CLK and PLL are us
   </a>
   ually powered down to reduce power consumption. However, the low-power clo
   <a href="#page-438-0">
    ck remains on so the chip c
   </a>
   an operate properly under low-power modes. For more detailed description about clocks, please refer to 6
   <i>
    Reset and Clock
   </i>
   .
  </p>
  <h1>
   9.3.3 Timers
  </h1>
  <p block-type="Text">
   <span id="page-222-0">
   </span>
   ESP32-C3's low-power management uses RTC timer. The readable 48-bit RTC
   <a href="#page-190-0">
    timer is a real-time
   </a>
   counter (using RTC slow clock) that can be configured to log the time when one of the following events happens. For details, see Table 9.3-2.
  </p>
  <p>
   Table 9.3-2. The Triggering Conditions for the RTC Timer
  </p>
  <span id="page-222-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Enabling Options
     </th>
     <th>
      Descriptions
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 9
      <br/>
      Low-power Management
     </th>
     <th colspan="3">
      GoBack
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIMER_XTL_OFF
     </td>
     <td>
      1. RTC main state machine powers down; 2. 40 MHz crystal
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
      powers up.
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIMER_SYS_STALL
     </td>
     <td colspan="3">
      CPU enters or exits the stall state.
      <br/>
      This is to ensure the
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
      SYS_TIMER is continuous in time.
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   The R
   <a href="#page-233-0">
    TC timer updates two group
   </a>
   s of registers upon
   <a href="#page-233-0">
   </a>
   a
   <a href="#page-233-0">
    ny new trigger. The first gro
   </a>
   up logs the time of the current trigger, and the other logs the previous trigger. Detailed information about these two register groups is shown below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Register group 0: logs the status of RTC timer at the current trigger.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RTC_CNTL_TIME_HIGH0_REG
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RTC_CNTL_TIME_LOW0_REG
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Regi
     <a href="#page-234-0">
      ster group 1: logs the status of
     </a>
     RTC timer at the previous trigger.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-234-1">
        RTC_CNTL_TIME_HIGH1_REG
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RTC_CNTL_TIME_LOW1_REG
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   On a new
   <a href="#page-260-0">
   </a>
   t
   <a href="#page-260-0">
    rigger, information on previou
   </a>
   s trigger is moved from register group 0 to register group 1 (and the original trigger logged in register group 1 is overwritten), and this new trigger is logged in register group 0. Therefore,
   <a href="#page-259-0">
    only the last two triggers can
   </a>
   be logged at any time.
  </p>
  <p block-type="Text">
   It should be noted that any reset / sleep other than power-up reset will not stop or reset the RTC timer.
  </p>
  <p block-type="Text">
   Also, the RTC timer can be used as a wakeup source. For details, see Section 9.4.3.
  </p>
  <h1>
   9.3.4 Voltage Regulators
  </h1>
  <p block-type="Text">
   <span id="page-223-0">
   </span>
   ESP32-C3 has two regulators to maintain a constant power supply voltage to
   <a href="#page-226-0">
    differe
   </a>
   nt power domains:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Digital system voltage regulator for digital power domains;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Low-power voltage regulator for RTC power domains;
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   For more detailed description about power domains, please refer to Section 9.4.1.
  </p>
  <h2>
   9.3.4.1 Digital System Voltage Regulator
  </h2>
  <p block-type="Text">
   <span id="page-223-1">
   </span>
   ESP32-C3's built-in digital system voltage regulator converts the external power supply (typically 3.3 V) to 1.1 V for digital power domains. This regulator is controlled by the xpd_dig_reg signal. For details, see description in 9.3-1. For the architecture of the ESP32-C3 digital system voltage regulator, see Figure 9.3-5.
  </p>
  <p>
   <span id="page-224-2">
   </span>
   <img src="_page_224_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 9.3-5. Digital System Regulator
  </p>
  <h4>
   9.3.4.2 Low-power Voltage Regulator
  </h4>
  <p block-type="Text">
   <span id="page-224-0">
   </span>
   ESP32-C3's built-in low-power voltage regulator converts the external power supply (typically 3.3 V) to 1.1 V for RTC power domains. Note when the pin CHIP_PU is at a high level, the low-power voltage regulator cannot be turned off. Otherwise, the low power voltage regulator is off when chip enters Light-sleep and Deep-sleep modes. In this case, the RTC domain is powered by an ultra low-power internal power source.
  </p>
  <p block-type="Text">
   <span id="page-224-3">
   </span>
   For the architecture of the ESP32-C3 low-power voltage regulator, see Figure 9.3-6.
  </p>
  <p>
   <img src="_page_224_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 9.3-6. Low-power voltage regulator
  </p>
  <h4>
   9.3.4.3 Brownout Detector
  </h4>
  <p block-type="Text">
   <span id="page-224-1">
   </span>
   The brownout detector checks the voltage of pins VDD3P3_RTC, VDD3P3_CPU, VDDA1, and VDDA2. If the voltage of these pins drops below the predefined threshold (2.7 V by default), the detector would trigger a signal to shut down some power-consuming blocks (such as LNA, PA, etc.) to allow extra time for the digital system to save and transfer important data.
  </p>
  <p block-type="Text">
   RTC_CNTL_BROWN_OUT_DET indicates the output level of brown-out detector. This register is low level by
  </p>
  <p block-type="Text">
   Espressif Systems 225
  </p>
  <p block-type="Text">
   ESP32-C3 TRM (Version 1.3)
  </p>
  <p block-type="Text">
   default, and outputs high level when the voltage of the detected pin drops below the predefined threshold.
  </p>
  <p block-type="Text">
   RTC_CNTL_BROWN_OUT_RST_SEL configures the reset type. For more information regarding chip reset and system reset, please refer to 6
   <i>
    Reset and Clock
   </i>
   .
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: resets the chip
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-259-1">
      1: resets the system
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-225-2">
   </span>
   The brownout detector has ultra-low power consumption and remains enabled whenever the chip is powered up. For the architecture of the ESP32-C3 brownout detector, see Figure 9.3-7.
  </p>
  <p>
   <img src="_page_225_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 9.3-7. Brown-out detector
  </p>
  <h1>
   9.4 Power Modes Management
  </h1>
  <h1>
   <span id="page-225-0">
   </span>
   9.4.1 Power Domain
  </h1>
  <p block-type="Text">
   <span id="page-225-1">
   </span>
   ESP32-C3 has 9 power domains in three power domain categories:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RTC
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Power management unit (PMU), including RTC timer, fast memory, Always-on registers
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Digital
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       PD peripherals, including SPI2, GDMA, SHA, RSA, AES, HMAC, DS, Secure Boot
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Digital system
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Wireless digital circuits
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       CPU
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Analog
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RC_FAST_CLK
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       XTAL_CLK
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       PLL
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RF circuits
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   9.4.2 Pre-defined Power Modes
  </h1>
  <p block-type="Text">
   As mentioned earlier, ESP32-C3 has four power modes, which are predefined configurations that power up different combinations of power domains. For details, please refer to Table 9.4-1.
  </p>
  <span id="page-226-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="5">
     </th>
    </tr>
    <tr>
     <th rowspan="2">
     </th>
     <th rowspan="2">
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 9.4-1. Predefined Power Modes
     </th>
     <th rowspan="2">
     </th>
     <th>
     </th>
     <th>
     </th>
     <th rowspan="2">
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Power Domain
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Power Mode
     </td>
     <td>
      PMU
     </td>
     <td>
      PD
      <br/>
      Peripherals
     </td>
     <td>
      Digital
      <br/>
      System
     </td>
     <td>
      Wireless
      <br/>
      Digital Circuits
     </td>
     <td>
      CPU
     </td>
     <td>
      FOSC_
      <br/>
      CLK
     </td>
     <td>
      XTAL_
      <br/>
      CLK
     </td>
     <td>
      PLL
     </td>
     <td>
      RF
      <br/>
      Circuits
     </td>
    </tr>
    <tr>
     <td>
      Active
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
    </tr>
    <tr>
     <td>
      Modem-sleep
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON*
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      ON
     </td>
     <td>
      OFF
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 9.4-1. Predefined Power Modes
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   * Configurable
  </p>
  <p block-type="Text">
   By default, ESP32-C3 first enters the Modem-sleep mode after a system reset and can be configured to Active mode when transmitting or receiving packets. After the CPU stalls for a while, the chip can enter different low-power modes (including Modem-sleep, Light-sleep, and Deep-sleep) to save power. From Active to Deep-sleep, the number of available functionalities
   <sup>
    1
   </sup>
   and power consumption
   <sup>
    2
   </sup>
   decreases and wakeup latency increases. Also, the supported wakeup sources for different power modes are different
   <sup>
    3
   </sup>
   . Users can choose a power mode based on their requirements of functionality, power consumption, wakeup latency, and available wakeup sources.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. For details, please refer to Table 9.4-1.
    </li>
    <li block-type="ListItem">
     2. For details on power consumption, please refer to the Current Consumption Characteristics in
     <i>
      ESP32-C3 Datasheet
     </i>
     .
    </li>
    <li block-type="ListItem">
     3. For details on the supported wakeup sources, please refer to Section 9.4.3.
    </li>
   </ul>
  </p>
  <h1>
   9.4.3 Wakeup Source
  </h1>
  <p block-type="Text">
   <span id="page-226-0">
   </span>
   The ESP32-C3 supports various wakeup sources, which could wake up the CPU in different sleep modes. The wakeup source is determined by RTC_CNTL_WAKEUP_ENA as shown in Table 9.4-2.
  </p>
  <span id="page-227-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 9.4-2. Wakeup Source
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      WAKEUP_ENA
     </td>
     <td>
      Wakeup Source5
     </td>
     <td>
      Light-sleep
     </td>
     <td>
      Deep-sleep
     </td>
    </tr>
    <tr>
     <td>
      0x4
     </td>
     <td>
      GPIO1
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
    </tr>
    <tr>
     <td>
      0x8
     </td>
     <td>
      RTC Timer
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
    </tr>
    <tr>
     <td>
      0x20
     </td>
     <td>
      Wi-Fi2
     </td>
     <td>
      Y
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      0x40
     </td>
     <td>
      UART03
     </td>
     <td>
      Y
     </td>
     <td>
      -
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 9.4-2. Wakeup Source
  </h4>
  <p block-type="Text">
   1 In Deep-sleep mode, only the RTC GPIOs (not regular GPIOs) can work as a wakeup source.
  </p>
  <p block-type="Text">
   2 To wake up the chip with a Wi-Fi source, the chip switches between the Active, Modem-sleep, and Light-sleep modes. The CPU and RF modules are woken up at predetermined intervals to keep Wi-Fi connections active.
  </p>
  <p block-type="Text">
   3 A wakeup is triggered when the number of RX pulses received exceeds the setting in the threshold register UART_SLEEP_CONF_REG. For details, please refer to Chapter 26
   <i>
    UART Controller (UART)
   </i>
   .
  </p>
  <p block-type="Text">
   4 When the 32 kHz crystal is working as RTC slow clock, a wakeup
   <a href="#page-581-0">
    is triggered upon any dete
   </a>
   ction of any crystal stop by the 32 kHz
   <a href="#page-548-0">
    watchdog timer.
   </a>
  </p>
  <p block-type="Text">
   5 All wakeup sources can also be configured as the causes to reject sleep, except UART.
  </p>
  <h1>
   9.4.4 Reject Sleep
  </h1>
  <p block-type="Text">
   ESP32-C3 implements a hardware mechanism that equips the chip with the ability to reject to sleep, which prevents the chip from going to sleep unexpectedly when some peripherals are still working but not detected by the CPU, thus guaranteeing the proper functioning of the peripherals.
  </p>
  <p block-type="Text">
   All the wakeup sources specified in Table 9.4-2 (except UART) can also be configured as the causes to reject sleep.
  </p>
  <p block-type="Text">
   Users can configure the reject to sleep option via the following registers.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure the RTC_CNTL_SLEEP_R
     <a href="#page-227-1">
      EJECT
     </a>
     _ENA field to enable or disable the option to reject to sleep:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Set RTC_CNTL_LIGHT_SLP_REJECT_EN to enable reject-to-light-sleep.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Set RTC
       <a href="#page-245-0">
        _CNTL_DEEP_SLP_REJECT_EN
       </a>
       to enable reject-to-deep-sleep.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Read RT
     <a href="#page-245-0">
      C_CNTL_SLP_REJECT_CAUSE_REG
     </a>
     to check the reason for rejecting to sleep.
    </li>
   </ul>
  </p>
  <h1>
   9.5
   <a href="#page-262-1">
    Retention DMA
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-227-0">
   </span>
   ESP32-C3 can power off the CPU in Light_sleep mode to further reduce the power consumption. To facilitate the CPU to wake up from light_sleep and resume execution from the previous breakpoint, ESP32-C3
  </p>
  <p block-type="Text">
   Espressif Systems 228
  </p>
  <p block-type="Text">
   introduced a retention module.
  </p>
  <p block-type="Text">
   ESP32-C3's retention module stores CPU information to the Internal SRAM Block9 to Block12 before CPU enters into sleep, and restore such information from Internal SRAM to CPU after CPU wakes up from sleep, thus enabling the CPU to resume execution from the previous breakpoint.
  </p>
  <p block-type="Text">
   ESP32-C3's Retention DMA:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Retention DMA operates 128-bit wide data, and only supports address alignment of four words.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Retention DMA's link list is specifically designed that it can be used to execute both write and read transactions. The configuration of Retention DMA is similar to that of GDMA:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1. First allocate enough memory in SRAM before CPU enters sleep to store 432 words*: CPU registers (428 words) and configuration information (4 words).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2. Then configure the link list according to the memory allocated in the first step. See details in Chapter 2
       <i>
        GDMA Controller (GDMA)
       </i>
       .
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   * Note that
   <a href="#page-59-0">
    if the memory allocated is sma
   </a>
   ller than 432 words, then chip can only enter the Light_sleep mode and cannot further power down CPU.
  </p>
  <p block-type="Text">
   After configuration, users can enable the Retention function by configuring the RTC_CNTL_RETENTION_EN field in Register RTC_CNTL_RETENTION_CTRL_REG to:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Use Retention DMA to store CPU information before the chip enters sleep
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Restore in
     <a href="#page-265-0">
      formation from Retention DMA to CP
     </a>
     U after CPU wakes up.
    </li>
   </ul>
  </p>
  <h1>
   9.6 RTC Boot
  </h1>
  <p block-type="Text">
   <span id="page-228-0">
   </span>
   The wakeup time from Deep-sleep is much longer, compared to the Light-sleep and Modem-sleep, because the ROMs and RAMs are both powered down in this case, and the CPU needs more time for SPI booting. However, it's worth noting that the RTC fast memory remains powered up in the Deep-sleep mode. Therefore, users can store code (so called "deep sleep wake stub" of up to 8 KB) in the RTC fast memory to avoid the above-mentioned SPI booting, thus speeding up the wakeup process. To use this function, see steps described below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Set RTC_CNTL_STAT_VECTOR_SEL_PROCPU to 1.
    </li>
    <li block-type="ListItem">
     2. Calculate CRC for the RTC fast memory, and save the result in RTC_CNTL_STORE7_REG[31:0].
    </li>
    <li block-type="ListItem">
     3. Set
     <a href="#page-238-0">
      RTC_CNTL_STORE6_REG[31:0]
     </a>
     to the entry address of RTC fast memory.
    </li>
    <li block-type="ListItem">
     4. Send the chip into sleep.
    </li>
    <li block-type="ListItem">
     5. SPI
     <a href="#page-256-0">
      boot and some of the initializati
     </a>
     on starts after the CPU is powered up. After that, calculate the CRC for the RTC fast memory again. If the result matches with register RTC_CNTL_STORE7_REG[31:0], the CPU jumps to the entry address.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-229-0">
   </span>
   The boot flow after ESP32-C3 wakeup is shown in Figure 9.6-1.
  </p>
  <p>
   <img src="_page_229_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 9.6-1. ESP32-C3 Boot Flow
  </p>
  <h1>
   9.7 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-230-0">
   </span>
   The addresses in this section are relative to low-power management base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_OPTIONS0_REG
     </td>
     <td>
      Sets the power options of crystal and PLL
      <br/>
      clocks, and initiates reset by software
     </td>
     <td>
      0x0000
     </td>
     <td>
      Varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SLP_TIMER0_REG
     </td>
     <td>
      RTC timer threshold register 0
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SLP_TIMER1_REG
     </td>
     <td>
      RTC timer threshold register 1
     </td>
     <td>
      0x0008
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIME_UPDATE_REG
     </td>
     <td>
      RTC timer update control register
     </td>
     <td>
      0x000C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIME_LOW0_REG
     </td>
     <td>
      Stores the lower 32 bits of RTC timer 0
     </td>
     <td>
      0x0010
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIME_HIGH0_REG
     </td>
     <td>
      Stores the higher 16 bits of RTC timer 0
     </td>
     <td>
      0x0014
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STATE0_REG
     </td>
     <td>
      Configures the sleep / reject / wakeup state
     </td>
     <td>
      0x0018
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIMER1_REG
     </td>
     <td>
      Configures CPU stall options
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIMER2_REG
     </td>
     <td>
      Configures RTC slow clock and touch con
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      troller
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIMER5_REG
     </td>
     <td>
      Configures the minimal sleep cycles
     </td>
     <td>
      0x002C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_ANA_CONF_REG
     </td>
     <td>
      Configures the power options for I2C and
     </td>
     <td>
      0x0034
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PLLA
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_RESET_STATE_REG
     </td>
     <td>
      Indicates the CPU reset source
     </td>
     <td>
      0x0038
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_WAKEUP_STATE_REG
     </td>
     <td>
      Wakeup bitmap enabling registerfi
     </td>
     <td>
      0x003C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_INT_ENA_RTC_REG
     </td>
     <td>
      RTC interrupt enabling register
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_INT_RAW_RTC_REG
      <br/>
      RTC_CNTL_INT_ST_RTC_REG
     </td>
     <td>
      RTC interrupt raw register
      <br/>
      RTC interrupt state register
     </td>
     <td>
      0x0044
      <br/>
      0x0048
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_INT_CLR_RTC_REG
     </td>
     <td>
      RTC interrupt clear register
     </td>
     <td>
      0x004C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STORE0_REG
     </td>
     <td>
      Reservation register 0
     </td>
     <td>
      0x0050
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STORE1_REG
     </td>
     <td>
      Reservation register 1
     </td>
     <td>
      0x0054
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STORE2_REG
     </td>
     <td>
      Reservation register 2
     </td>
     <td>
      0x0058
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STORE3_REG
     </td>
     <td>
      Reservation register 3
     </td>
     <td>
      0x005C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_EXT_XTL_CONF_REG
     </td>
     <td>
      32 kHz crystal oscillator configuration register
     </td>
     <td>
      0x0060
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_EXT_WAKEUP_CONF_REG
     </td>
     <td>
      GPIO wakeup configuration register
     </td>
     <td>
      0x0064
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SLP_REJECT_CONF_REG
     </td>
     <td>
      Configures sleep / reject options
     </td>
     <td>
      0x0068
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_CLK_CONF_REG
     </td>
     <td>
      RTC timer configuration register
     </td>
     <td>
      0x0070
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SLOW_CLK_CONF_REG
     </td>
     <td>
      RTC slow clock configuration register
     </td>
     <td>
      0x0074
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_REG
     </td>
     <td>
      RTC configuration register
     </td>
     <td>
      0x0080
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_PWC_REG
     </td>
     <td>
      RTC power configuration register
     </td>
     <td>
      0x0084
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_DIG_PWC_REG
     </td>
     <td>
      Digital system power configuration register
     </td>
     <td>
      0x0088
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_DIG_ISO_REG
     </td>
     <td>
      Digital system isolation configuration register
     </td>
     <td>
      0x008C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_WDTCONFIG0_REG
     </td>
     <td>
      RTC watchdog configuration register
     </td>
     <td>
      0x0090
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_WDTCONFIG1_REG
     </td>
     <td>
      Configures the hold time of RTC watchdog at
     </td>
     <td>
      0x0094
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 9
      <br/>
      Low-power Management
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
      Name
      <br/>
      RTC_CNTL_WDTCONFIG2_REG
     </td>
     <td>
      Description
      <br/>
      Configures the hold time of RTC watchdog at
     </td>
     <td>
      Address
      <br/>
      0x0098
     </td>
     <td>
      Access
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_WDTCONFIG3_REG
     </td>
     <td>
      level 2
      <br/>
      Configures the hold time of RTC watchdog at
     </td>
     <td>
      0x009C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      level 3
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_WDTCONFIG4_REG
      <br/>
      RTC_CNTL_WDTFEED_REG
     </td>
     <td>
      Configures the hold time of RTC watchdog at
      <br/>
      level 4
      <br/>
      RTC watchdog SW feed configuration register
     </td>
     <td>
      0x00A0
      <br/>
      0x00A4
     </td>
     <td>
      R/W
      <br/>
      WO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_WDTWPROTECT_REG
     </td>
     <td>
      RTC watchdog write protection configuration
     </td>
     <td>
      0x00A8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SWD_CONF_REG
     </td>
     <td>
      register
      <br/>
      Super watchdog configuration register
     </td>
     <td>
      0x00AC
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SWD_WPROTECT_REG
     </td>
     <td>
      Super watchdog write protection configura
     </td>
     <td>
      0x00B0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tion register
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SW_CPU_STALL_REG
     </td>
     <td>
      CPU stall configuration register
     </td>
     <td>
      0x00B4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STORE4_REG
     </td>
     <td>
      Reservation register 4
     </td>
     <td>
      0x00B8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STORE5_REG
     </td>
     <td>
      Reservation register 5
     </td>
     <td>
      0x00BC
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STORE6_REG
     </td>
     <td>
      Reservation register 6
     </td>
     <td>
      0x00C0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_STORE7_REG
     </td>
     <td>
      Reservation register 7
     </td>
     <td>
      0x00C4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_LOW_POWER_ST_REG
     </td>
     <td>
      RTC main state machine state register
     </td>
     <td>
      0x00C8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_PAD_HOLD_REG
     </td>
     <td>
      Configures the hold options for RTC GPIOs
     </td>
     <td>
      0x00D0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_DIG_PAD_HOLD_REG
     </td>
     <td>
      Configures the hold options for digital GPIOs
     </td>
     <td>
      0x00D4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_BROWN_OUT_REG
     </td>
     <td>
      Brownout configuration register
     </td>
     <td>
      0x00D8
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_TIME_LOW1_REG
      <br/>
      RTC_CNTL_TIME_HIGH1_REG
     </td>
     <td>
      Stores the lower 32 bits of RTC timer 1
      <br/>
      Stores the higher 16 bits of RTC timer 1
     </td>
     <td>
      0x00DC
      <br/>
      0x00E0
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_XTAL32K_CLK_FACTOR_REG
     </td>
     <td>
      Configures the divider for the backup clock of
      <br/>
      32 kHz crystal oscillator
     </td>
     <td>
      0x00E4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_XTAL32K_CONF_REG
     </td>
     <td>
      32 kHz crystal oscillator configuration register
     </td>
     <td>
      0x00E8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_USB_CONF_REG
     </td>
     <td>
      IO_MUX configuration register
     </td>
     <td>
      0x00EC
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SLP_REJECT_CAUSE_REG
     </td>
     <td>
      Stores the reject-to-sleep cause
     </td>
     <td>
      0x00F0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_OPTION1_REG
     </td>
     <td>
      RTC option register
     </td>
     <td>
      0x00F4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_SLP_WAKEUP_CAUSE_REG
     </td>
     <td>
      Stores the sleep-to-wakeup cause
     </td>
     <td>
      0x00F8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_INT_ENA_RTC_W1TS_REG
     </td>
     <td>
      RTC RTC interrupt enabling register (W1TS)
     </td>
     <td>
      0x0100
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_INT_ENA_RTC_W1TC_REG
     </td>
     <td>
      RTC RTC interrupt clear register (W1TC)
     </td>
     <td>
      0x0104
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_RETENTION_CTRL_REG
     </td>
     <td>
      Retention configuration register
     </td>
     <td>
      0x0108
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC_CNTL_GPIO_WAKEUP_REG
     </td>
     <td>
      GPIO wakeup configuration register
     </td>
     <td>
      0x0110
     </td>
     <td>
      varies
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   9.8 Registers
  </h1>
  <p block-type="Text">
   <span id="page-232-0">
   </span>
   The addresses in this section are relative to low-power management base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-232-1">
   </span>
   <img src="_page_232_Figure_2.jpeg"/>
  </p>
  <h4>
   Register 9.1. RTC_CNTL_OPTIONS0_REG (0x0000)
  </h4>
  <p block-type="Text">
   RTC_CNTL_SW_STALL_PROCPU_C0 When RTC_CNTL_SW_STALL_PROCPU_C1 is configured to 0x21, setting this bit to 0x2 stalls the CPU by SW. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_SW_PROCPU_RST Set this bit t
     <a href="#page-255-0">
      o reset the CPU by SW. (WO)
     </a>
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BB_I2C_FORCE_PD Set this bit to FPD BB_I2C. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BB_I2C_FORCE_PU Set this bit to FPU BB_I2C. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_I2C_FORCE_PD Set this bit to FPD BB_PLL_I2C. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_I2C_FORCE_PU Set this bit to FPU BB_PLL_I2C. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_FORCE_PD Set this bit to FPD BB_PLL. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_FORCE_PU Set this bit to FPU BB_PLL. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTL_FORCE_PD Set this bit to FPD the crystal oscillator. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTL_FORCE_PU Set this bit to FPU the crystal oscillator. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_WRAP_FORCE_RST Set this bit to force reset the digital system in deep-sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_WRAP_FORCE_NORST Set this bit to disable force reset to digital system in deepsleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SW_SYS_RST Set this bit to reset the system via SW. (WO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-233-1">
   </span>
   <img src="_page_233_Figure_0.jpeg"/>
  </p>
  <p>
   RTC_CNTL_SLP_VAL_LO Sets the lower 32 bits of the trigger threshold for the RTC timer. (R/W)
  </p>
  <p>
   <span id="page-233-2">
   </span>
   <img src="_page_233_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   Register 9.3. RTC_CNTL_SLP_TIMER1_REG (0x0008)
  </p>
  <p block-type="Text">
   RTC_CNTL_SLP_VAL_HI Sets the higher 16 bits of the trigger threshold for the RTC timer. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_MAIN_TIMER_ALARM_EN Sets this bit to enable the timer alarm. (WO)
  </p>
  <p>
   <span id="page-233-0">
   </span>
   <img src="_page_233_Figure_6.jpeg"/>
  </p>
  <p>
   <img src="_page_233_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 26 0
  </p>
  <p block-type="Text">
   RTC_CNTL_TIMER_SYS_STALL Selects the triggering condition for the RTC timer. (R/W) RTC_CNTL_TIMER_XTL_OFF Selects the triggering condition for the RTC timer. (R/W) RTC_CNTL_TIMER_SYS_RST Selects the triggering condition for the RTC timer. (R/W) RTC_CNTL_TIME_UPDATE Selects the triggering condition for the RTC timer. (WO)
  </p>
  <p block-type="Text">
   0 31
  </p>
  <p block-type="Text">
   0 30
  </p>
  <p block-type="Text" class="has-continuation">
   0 29
  </p>
  <p block-type="Text" class="has-continuation">
   0 28
  </p>
  <p block-type="Text">
   0 27
  </p>
  <p block-type="Text">
   Reset
  </p>
  <p>
   <span id="page-234-1">
   </span>
   <img src="_page_234_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_TIMER_VALUE0_LOW Stores the lower 32 bits of RTC timer 0. (RO)
  </p>
  <p>
   <img src="_page_234_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-234-0">
   </span>
   <img src="_page_234_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_TIMER_VALUE0_HIGH Stores the higher 16 bits of RTC timer 0. (RO)
  </p>
  <h4>
   Register 9.7. RTC_CNTL_STATE0_REG (0x0018)
  </h4>
  <p>
   <img src="_page_235_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SW_CPU_INT Sends a SW RTC interrupt to CPU. (WO) RTC_CNTL_SLP_REJECT_CAUSE_CLR Clears the RTC reject-to-sleep cause. (WO)
  </p>
  <p block-type="Text">
   RTC_CNTL_APB2RTC_BRIDGE_SEL 1: APB to RTC using bridge (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_SLP_WAKEUP Sleep wakeup bit. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_SLP_REJECT Sleep reject bit. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_SLEEP_EN Sends the chip to sleep. (R/W)
  </p>
  <p>
   <img src="_page_235_Figure_7.jpeg"/>
  </p>
  <p>
   <span id="page-235-0">
   </span>
   <img src="_page_235_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_CPU_STALL_EN Enables the CPU stalling. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_CPU_STALL_WAIT Sets the CPU stall waiting cycles (using the RTC fast clock). (R/W) RTC_CNTL_FOSC_WAIT Sets the FOSC clock waiting cycles (using the RTC slow clock). (R/W) RTC_CNTL_XTL_BUF_WAIT Sets the XTAL waiting cycles (using the RTC slow clock). (R/W) RTC_CNTL_PLL_BUF_WAIT Sets the PLL waiting cycles (using the RTC slow clock). (R/W)
  </p>
  <p>
   <span id="page-236-0">
   </span>
   <img src="_page_236_Figure_0.jpeg"/>
  </p>
  <p>
   RTC_CNTL_MIN_TIME_FOSC_OFF Sets the minimal cycles for FOSC clock (using the RTC slow clock) when powered down. (R/W)
  </p>
  <p>
   <span id="page-236-1">
   </span>
   <img src="_page_236_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_MIN_SLP_VAL Sets the minimal sleep cycles (using the RTC slow clock). (R/W)
  </p>
  <p>
   <span id="page-237-0">
   </span>
   <img src="_page_237_Picture_0.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_RESET_POR_FORCE_PD Set this bit to force not bypass I2C power-on reset. (R/W) RTC_CNTL_RESET_POR_FORCE_PU Set this bit to force bypass I2C power-on reset. (R/W) RTC_CNTL_GLITCH_RST_EN Set this bit to enable reset when the system detects a glitch. (R/W) RTC_CNTL_SAR_I2C_PU Set this bit to FPU the SAR_I2C. (R/W) RTC_CNTL_TXRF_I2C_PU Set this bit to PU TXRF_I2C. (R/W) RTC_CNTL_RFRX_PBUS_PU Set this bit to PU RFRX_PBUS. (R/W) RTC_CNTL_CKGEN_I2C_PU Set this bit to PU CKGEN_I2C. (R/W) RTC_CNTL_PLL_I2C_PU Set this bit to PU PLL I2C. (R/W)
  </p>
  <h4>
   <span id="page-238-0">
   </span>
   Register 9.12. RTC_CNTL_RESET_STATE_REG (0x0038) (reserved) 0 0 0 0 0 0 31 26 RTC_CNTL_DRESET_MASK_PROCPU 0 25 (reserved) 0 24 (reserved) 0 23 RTC_CNTL_JTAG_RESET_FLAG_CLR_PROCPU 0 22 (reserved) 0 21 RTC_CNTL_JTAG_RESET_FLAG_PROCPU 0 20 RTC_CNTL_OCD_HALT_ON_RESET_PROCPU 0 19 (reserved) 0 18 (reserved) 0 17 RTC_CNTL_ALL_RESET_FLAG_CLR_PROCPU 0 16 (reserved) 0 15 RTC_CNTL_ALL_RESET_FLAG_PROCPU 0 14 RTC_CNTL_STAT_VECTOR_SEL_PROCPU 1 13 (reserved) 1 12 (reserved) 0 11 6 RTC_CNTL_RESET_CAUSE_PROCPU 0 5 0 Reset
  </h4>
  <p block-type="Text">
   RTC_CNTL_RESET_CAUSE_PROCPU Stores the CPU reset cause. (RO)
  </p>
  <p block-type="Text">
   RTC_CNTL_STAT_VECTOR_SEL_PROCPU Selects the CPU static vector. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_ALL_RESET_FLAG_PROCPU Indicates the CPU reset flag. (RO)
  </p>
  <p block-type="Text">
   RTC_CNTL_ALL_RESET_FLAG_CLR_PROCPU Clears the CPU reset flag. (WO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_OCD_HALT_ON_RESET_PROCPU Set this bit to send CPU into halt state upon CPU reset. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_JTAG_RESET_FLAG_PROCPU Indicates the JTAG reset flag. (RO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RTC_CNTL_JTAG_RESET_FLAG_CLR_PROCPU Sets the JTAG reset flag. (WO)
  </p>
  <p block-type="Text">
   RTC_CNTL_DRESET_MASK_PROCPU Set this bit to bybass D-reset. (R/W)
  </p>
  <p>
   <span id="page-238-1">
   </span>
   <img src="_page_238_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_WAKEUP_ENA Selects the wakeup source. For details, please refer to Table 9.4-2. (R/W)
  </p>
  <h4>
   Register 9.14. RTC_CNTL_INT_ENA_RTC_REG (0x0040)
  </h4>
  <p>
   <span id="page-239-0">
   </span>
   <img src="_page_239_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SLP_WAKEUP_INT_ENA Enables interrupts when chip wakes up from sleep. (R/W) RTC_CNTL_SLP_REJECT_INT_ENA Enables interrupts when chip rejects to go to sleep. (R/W) RTC_CNTL_WDT_INT_ENA Enables the RTC watchdog interrupt. (R/W) RTC_CNTL_BROWN_OUT_INT_ENA Enables the brown-out interrupt. (R/W) RTC_CNTL_MAIN_TIMER_INT_ENA Enables the RTC timer interrupt. (R/W) RTC_CNTL_SWD_INT_ENA Enables the super watchdog interrupt. (R/W) RTC_CNTL_XTAL32K_DEAD_INT_ENA Enables interrupts when the XTAL32K is dead. (R/W) RTC_CNTL_GLITCH_DET_INT_ENA Enables interrupts when a glitch is detected. (R/W) RTC_CNTL_BBPLL_CAL_INT_ENA Enables interrupts upon the ending of a bb_pll call. (R/W)
  </p>
  <h4>
   Register 9.15. RTC_CNTL_INT_RAW_RTC_REG (0x0044)
  </h4>
  <p>
   <span id="page-240-0">
   </span>
   <img src="_page_240_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_SLP_WAKEUP_INT_RAW Stores the raw interrupt triggered when the chip wakes up from sleep. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SLP_REJECT_INT_RAW Stores the raw interrupt triggered when the chip rejects to go to sleep. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_INT_RAW Stores the raw watchdog interrupt. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_INT_RAW Stores the raw brownout interrupt. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_MAIN_TIMER_INT_RAW Stores the raw RTC main timer interrupt. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SWD_INT_RAW Stores the raw super watchdog interrupt. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_DEAD_INT_RAW Stores the raw interrupt triggered when the XTAL32K is dead. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_GLITCH_DET_INT_RAW Stores the raw interrupt triggered when a glitch is detected. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_CAL_INT_RAW Stores the raw interrupt upon the ending of a bb_pll call. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 9.16. RTC_CNTL_INT_ST_RTC_REG (0x0048)
  </h4>
  <p>
   <span id="page-241-0">
   </span>
   <img src="_page_241_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_SLP_WAKEUP_INT_ST Stores the status of the interrupt triggered when the chip wakes up from sleep. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SLP_REJECT_INT_ST Stores the status of the interrupt triggered when the chip rejects to go to sleep. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_INT_ST Stores the status of the RTC watchdog interrupt. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_INT_ST Stores the status of the brownout interrupt. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_MAIN_TIMER_INT_ST Stores the status of the RTC main timer interrupt. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SWD_INT_ST Stores the status of the super watchdog interrupt. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_DEAD_INT_ST Stores the status of the interrupt triggered when the XTAL32K is dead. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_GLITCH_DET_INT_ST Stores the status of the interrupt triggered when a glitch is detected. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_CAL_INT_ST Stores the status of the interrupt triggered upon the ending of a bbpll call. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 9.17. RTC_CNTL_INT_CLR_RTC_REG (0x004C)
  </h4>
  <p>
   <span id="page-242-0">
   </span>
   <img src="_page_242_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_SLP_WAKEUP_INT_CLR Clears the interrupt triggered when the chip wakes up from sleep. (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SLP_REJECT_INT_CLR Clears the interrupt triggered when the chip rejects to go to sleep. (WO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RTC_CNTL_WDT_INT_CLR Clears the RTC watchdog interrupt. (WO)
  </p>
  <p block-type="Text">
   RTC_CNTL_BROWN_OUT_INT_CLR Clears the brownout interrupt. (WO)
  </p>
  <p block-type="Text">
   RTC_CNTL_MAIN_TIMER_INT_CLR Clears the RTC main timer interrupt. (WO)
  </p>
  <p block-type="Text">
   RTC_CNTL_SWD_INT_CLR Clears the super watchdog interrupt. (WO)
  </p>
  <p block-type="Text">
   RTC_CNTL_XTAL32K_DEAD_INT_CLR Clears the RTC watchdog interrupt. (WO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_GLITCH_DET_INT_CLR Clears the interrupt triggered when a glitch is detected. (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_CAL_INT_CLR Clears the interrupt triggered upon the ending of a bbpll call. (WO)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_242_Figure_11.jpeg"/>
  </p>
  <p>
   <span id="page-242-1">
   </span>
   <img src="_page_242_Figure_12.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SCRATCH0 Reservation register 0. (R/W)
  </p>
  <p>
   <span id="page-243-0">
   </span>
   <img src="_page_243_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-243-2">
   </span>
   <span id="page-243-1">
   </span>
   <img src="_page_243_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SCRATCH3 Reservation register 3. (R/W)
  </p>
  <h4>
   Register 9.22. RTC_CNTL_EXT_XTL_CONF_REG (0x0060)
  </h4>
  <p>
   <span id="page-244-0">
   </span>
   <img src="_page_244_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_XTAL32K_WDT_EN Set this bit to enable the XTAL32K watchdog. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_XTAL32K_WDT_CLK_FO Set this bit to FPU the XTAL32K watchdog clock. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_XTAL32K_WDT_RESET Set this bit to reset the XTAL32K watchdog by SW. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_XTAL32K_EXT_CLK_FO Set this bit to FPU the external clock of XTAL32K. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_AUTO_BACKUP Set this bit to switch to the backup clock when the XTAL32K is dead. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_AUTO_RESTART Set this bit to restart the XTAL32K automatically when the XTAL32K is dead. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_AUTO_RETURN Set this bit to switch back to XTAL32K when the XTAL32K is restarted. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_XPD_FORCE Set this bit to allow the software to FPD the XTAL32K; Reset this bit to allow the FSM to FPD the XTAL32K. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_ENCKINIT_XTAL_32K Set this bit to apply an internal clock to help the XTAL32K to start. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DBUF_XTAL_32K 0: single-end buffer 1: differential buffer. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DGM_XTAL_32K Configures the xtal_32k gm control. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DRES_XTAL_32K Configures DRES_XTAL_32K. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XPD_XTAL_32K Configures XPD_XTAL_32K. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DAC_XTAL_32K Configures DAC_XTAL_32K. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_STATE Indicates the 32 kHz watchdog timer state. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_GPIO_SEL Set this bit to select the XTAL32K. Clear this bit to select external XTAL32K. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-245-1">
   </span>
   <img src="_page_245_Figure_0.jpeg"/>
  </p>
  <p>
   RTC_CNTL_GPIO_WAKEUP_FILTER Set this bit to enable the GPIO wakeup event filter. (R/W)
  </p>
  <p>
   <span id="page-245-0">
   </span>
   <img src="_page_245_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SLEEP_REJECT_ENA Set this bit to enable reject-to-sleep. (R/W) RTC_CNTL_LIGHT_SLP_REJECT_EN Set this bit to enable reject-to-light-sleep. (R/W) RTC_CNTL_DEEP_SLP_REJECT_EN Set this bit to enable reject-to-deep-sleep. (R/W)
  </p>
  <h4>
   Register 9.25. RTC_CNTL_CLK_CONF_REG (0x0070)
  </h4>
  <p>
   <span id="page-246-0">
   </span>
   <img src="_page_246_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_EFUSE_CLK_FORCE_GATING Set this bit to FPU the eFuse clock gating. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_EFUSE_CLK_FORCE_NOGATING Set this bit to FPD the eFuse clock gating. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_FOSC_DIV_SEL_VLD Synchronizes reg_fosc_div_sel. Note that you have to invalidate the bus before modifying the frequency divider, then validate the new divider clock. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_FOSC_DIV Set the FOSC_D256_OUT divider. 00: divided by 128, 01: divided by 256, 10: divided by 512, 11: divided by 1024. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_ENB_FOSC Set this bit to disable FOSC and FOSC_D256_OUT. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_ENB_FOSC_DIV Selects the FOSC_D256_OUT. 1: FOSC, 0: FOSC divided by 256. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DIG_XTAL32K_EN Set this bit to enable CK_XTAL_32K clock for the digital system. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DIG_FOSC_D256_EN Set this bit to enable FOSC_D256_OUT clock for the digital system. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DIG_FOSC_EN Set this bit to enable FOSC for the digital system. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_FOSC_DIV_SEL Stores the FOSC divider, which is reg_FOSC_div_sel + 1. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL_FORCE_NOGATING Set this bit to force no gating to crystal during sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_FOSC_FORCE_NOGATING Set this bit to disable force gating to crystal during sleep. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <p block-type="Text">
   Continued from the previous page...
  </p>
  <p block-type="Text">
   RTC_CNTL_FOSC_DFREQ Configures the FOSC frequency. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_FOSC_FORCE_PD Set this bit to FPD FOSC. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_FOSC_FORCE_PU Set this bit to FPU FOSC. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_XTAL_GLOBAL_FORCE_GATING Set this bit to force enable XTAL clock gating. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL_GLOBAL_FORCE_NOGATING Set this bit to force bypass the XTAL clock gating. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_FAST_CLK_RTC_SEL Selects the RTC fast clock. 0: XTAL_DIV_CLK, 1: RC_FAST_CLK div n. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_ANA_CLK_RTC_SEL Selects the RTC slow clock. 0: RC_SLOW_CLK, 1: XTAL32K_CLK, 2: RC_FAST_DIV_CLK. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-247-0">
   </span>
   <img src="_page_247_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_ANA_CLK_DIV_VLD Synchronizes the reg_fosc_div_sel. Note that you have to invalidate the bus before modifying the frequency divider, and then validate the new divider clock. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_ANA_CLK_DIV Configures the divider for the RTC clock. (R/W)4
  </p>
  <h4>
   Register 9.27. RTC_CNTL_REG (0x0080)
  </h4>
  <p>
   <span id="page-248-0">
   </span>
   <img src="_page_248_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_DIG_REG_CAL_EN Set this bit to enable digital regulator calibration by software. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_SCK_DCAP Configures the RC_SLOW_CLK frequency. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_REGULATOR_FORCE_PD Set this bit to FPD the low-power voltage regulator, which means decreasing its voltage to 0.8 V or lower. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_REGULATOR_FORCE_PU Set this bit to FPU the low-power voltage regulator, which means increasing its voltage to higher than 0.8 V. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-248-1">
   </span>
   <img src="_page_248_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_PAD_FORCE_HOLD Set this bit to force RTC pad into hold state. (R/W)
  </p>
  <p>
   <span id="page-249-0">
   </span>
   <img src="_page_249_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_VDD_SPI_PWR_DRV Configures the vdd_spi's drive intensity. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_VDD_SPI_PWR_FORCE Set this bit to allow software to configure vdd_spi's drive intensity. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_LSLP_MEM_FORCE_PD Set this bit to force the memories in the digital system not to enter retention mode in sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_LSLP_MEM_FORCE_PU Set this bit to force the memories in the digital system into retention mode in sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_PERI_FORCE_PD Set this bit to FPD the digital peripherals. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_PERI_FORCE_PU Set this bit to FPU the digital peripherals. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_FASTMEM_FORCE_LPD Set this bit to force the fast memory not to enter retention mode in sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_FASTMEM_FORCE_LPU Set this bit to force the fast memory into retention mode in sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WIFI_FORCE_PD Set this bit to FPD wireless. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WIFI_FORCE_PU Set this bit to FPU wireless. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_WRAP_FORCE_PD Set this bit to FPD the digital system. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_WRAP_FORCE_PU Set this bit to FPU the digital system. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_CPU_TOP_FORCE_PD Set this bit to FPD the CPU. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_CPU_TOP_FORCE_PU Set this bit to FPU the CPU. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_PERI_PD_EN Set this bit to enable FPD digital peripherals in sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_CPU_TOP_PD_EN Set this bit to enable FPD CPU in sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WIFI_PD_EN Set this bit to enable FPD wireless in sleep. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_WRAP_PD_EN Set this bit to enable FPD digital system in sleep. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 9.30. RTC_CNTL_DIG_ISO_REG (0x008C)
  </h4>
  <p>
   <img src="_page_250_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_DG_PAD_AUTOHOLD Indicates the auto-hold status of the digital GPIOs. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_CLR_DG_PAD_AUTOHOLD Set this bit to clear the auto-hold enabler for the digital GPIOs. (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_PAD_AUTOHOLD_EN Set this bit to allow the digital GPIOs to enter the auto-hold status. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_PAD_FORCE_NOISO Set this bit to disable the force isolation of the digital GPIOs. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RTC_CNTL_DG_PAD_FORCE_ISO Set this bit to force isolation of the digital GPIOs. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_DG_PAD_FORCE_UNHOLD Set this bit the force unhold the digital GPIOs. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_DG_PAD_FORCE_HOLD Set this bit the force hold the digital GPIOs. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_DG_PERI_FORCE_ISO Set this bit to force isolation of the digital peripherals. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_DG_PERI_FORCE_NOISO Set this bit to disable the force isolation of the digital peripherals. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_CPU_TOP_FORCE_ISO Set this bit to force hold the CPU. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_CPU_TOP_FORCE_NOISO Set this bit to force unhold the CPU. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_WIFI_FORCE_ISO Set this bit to force isolation of the wireless circuits. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_WIFI_FORCE_NOISO Set this bit to disable the force isolation of the wireless circuits. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_WRAP_FORCE_ISO Set this bit to force isolation of the digital system. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_DG_WRAP_FORCE_NOISO Set this bit to disable the force isolation of the digital system. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 9.31. RTC_CNTL_WDTCONFIG0_REG (0x0090)
  </h4>
  <p>
   <span id="page-251-0">
   </span>
   <img src="_page_251_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_WDT_PAUSE_IN_SLP Set this bit to pause the watchdog in sleep. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_WDT_PROCPU_RESET_EN enable WDT reset CPU (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_WDT_FLASHBOOT_MOD_EN Set this bit to enable watchdog when the chip boots from flash. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_SYS_RESET_LENGTH Sets the length of the system reset counter. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RTC_CNTL_WDT_CPU_RESET_LENGTH Sets the length of the CPU reset counter. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_WDT_STG3 1: enable at the interrupt stage, 2: enable at the CPU stage, 3: enable at the system stage, 4: enable at the system and RTC stage. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_STG2 1: enable at the interrupt stage, 2: enable at the CPU stage, 3: enable at the system stage, 4: enable at the system and RTC stage. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_STG1 1: enable at the interrupt stage, 2: enable at the CPU stage, 3: enable at the system stage, 4: enable at the system and RTC stage. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_STG0 1: enable at the interrupt stage, 2: enable at the CPU stage, 3: enable at the system stage, 4: enable at the system and RTC stage. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_EN Set this bit to enable the RTC watchdog. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-251-1">
   </span>
   <img src="_page_251_Figure_12.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_WDT_STG0_HOLD Configures the hold time of RTC watchdog at level 1. (R/W)
  </p>
  <p>
   <img src="_page_252_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_WDT_STG1_HOLD Configures the hold time of RTC watchdog at level 2. (R/W)
  </p>
  <h4>
   Register 9.34. RTC_CNTL_WDTCONFIG3_REG (0x009C)
  </h4>
  <p>
   <img src="_page_252_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_WDT_STG2_HOLD Configures the hold time of RTC watchdog at level 3. (R/W)
  </p>
  <p>
   <span id="page-252-0">
   </span>
   <img src="_page_252_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_WDT_STG3_HOLD Configures the hold time of RTC watchdog at level 4. (R/W)
  </p>
  <p>
   <span id="page-253-0">
   </span>
   <img src="_page_253_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-253-1">
   </span>
   RTC_CNTL_WDT_WKEY If the register contains a different value than 0x50d83aa1, write protection for the RTC watchdog (RWDT) is enabled. (R/W)
  </p>
  <h4>
   Register 9.38. RTC_CNTL_SWD_CONF_REG (0x00AC)
  </h4>
  <p>
   <span id="page-254-0">
   </span>
   <img src="_page_254_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SWD_RESET_FLAG Indicates the super watchdog reset flag. (RO)
  </p>
  <p block-type="Text">
   RTC_CNTL_SWD_FEED_INT Receiving this interrupt leads to feeding the super watchdog via SW. (RO)
  </p>
  <p block-type="Text">
   RTC_CNTL_SWD_BYPASS_RST Set this bit to bypass super watchdog reset. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_SWD_SIGNAL_WIDTH Adjusts the signal width sent to the super watchdog. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_SWD_RST_FLAG_CLR Set to reset the super watchdog reset flag. (WO)
  </p>
  <p block-type="Text">
   RTC_CNTL_SWD_FEED Set to feed the super watchdog via SW. (WO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_SWD_DISABLE Set this bit to disable super watchdog. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SWD_AUTO_FEED_EN Set this bit to enable automatic watchdog feeding upon interrupts. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-254-1">
   </span>
   <img src="_page_254_Figure_10.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SWD_WKEY Sets the write protection key of the super watchdog. (R/W)
  </p>
  <p>
   <span id="page-255-0">
   </span>
   <img src="_page_255_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SW_STALL_PROCPU_C1 When RTC_CNTL_SW_STALL_PROCPU_C0 is configured to 0x2, setting this bit to 0x21 stalls the CPU by SW. (R/W)
  </p>
  <p>
   <span id="page-255-1">
   </span>
   <img src="_page_255_Figure_2.jpeg"/>
  </p>
  <p>
   RTC_CNTL_SCRATCH4 Reservation register 4. (R/W)
  </p>
  <p>
   <span id="page-255-2">
   </span>
   <img src="_page_255_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_SCRATCH5 Reservation register 5. (R/W)
  </p>
  <p>
   <span id="page-256-0">
   </span>
   <img src="_page_256_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-256-1">
   </span>
   RTC_CNTL_SCRATCH7 Reservation register 7. (R/W)
  </p>
  <h4>
   Register 9.45. RTC_CNTL_LOW_POWER_ST_REG (0x00C8)
  </h4>
  <p>
   <span id="page-257-1">
   </span>
   <img src="_page_257_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_RDY_FOR_WAKEUP Indicates the RTC is ready to be triggered by any wakeup source. (RO)
  </p>
  <p block-type="Text">
   RTC_CNTL_MAIN_STATE_IN_IDLE Indicates the RTC state.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: the chip can be either
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       in sleep modes.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       entering sleep modes. In this case, wait until RTC_CNTL_RDY_FOR_WAKEUP bit is set, then you can wake up the chip.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       exiting sleep mode. In this case, RTC_CNTL
       <a href="#page-257-1">
        _MAIN_STATE_IN_IDLE
       </a>
       will eventually become 1.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: the chip is not in sleep modes (i.e.
     <a href="#page-257-1">
      running normally).
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   (RO)
  </p>
  <p>
   <span id="page-257-0">
   </span>
   <img src="_page_257_Figure_10.jpeg"/>
  </p>
  <h4>
   Register 9.46. RTC_CNTL_PAD_HOLD_REG (0x00D0)
  </h4>
  <p block-type="Text">
   RTC_CNTL_GPIO_PIN3_HOLD Sets the GPIO 3 to the holding state. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_GPIO_PIN4_HOLD Sets the GPIO 4 to the holding state. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_GPIO_PIN5_HOLD Sets the GPIO 5 to the holding state. (R/W)
  </p>
  <p>
   <span id="page-258-0">
   </span>
   <img src="_page_258_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_DIG_PAD_HOLD Set GPIO 6 to GPIO 21 to the holding state. (See bitmap to locate any GPIO). (R/W)
  </p>
  <h4>
   Register 9.48. RTC_CNTL_BROWN_OUT_REG (0x00D8)
  </h4>
  <p>
   <span id="page-259-1">
   </span>
   <img src="_page_259_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_INT_WAIT Configures the waiting cycles before sending an interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_CLOSE_FLASH_ENA Set this bit to enable PD the flash when a brownout happens. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_PD_RF_ENA Set this bit to enable PD the RF circuits when a brown-out happens. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_RST_WAIT Configures the waiting cycles before the reset after a brownout. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_RST_ENA Enables to reset brown-out. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_RST_SEL Selects the reset type when a brown-out happens. 1: chip reset, 0: system reset. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_ANA_RST_EN Enables to reset brown-out. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_CNT_CLR Clears the brown-out counter. (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_ENA Set this bit to enable brown-out detection. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_DET Indicates the status of the brown-out signal. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 9.49. RTC_CNTL_TIME_LOW1_REG (0x00DC)
  </h4>
  <p>
   <span id="page-259-0">
   </span>
   <img src="_page_259_Figure_13.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_TIMER_VALUE1_LOW Stores the lower 32 bits of RTC timer 1. (RO)
  </p>
  <p>
   <span id="page-260-0">
   </span>
   <img src="_page_260_Figure_0.jpeg"/>
  </p>
  <p>
   RTC_CNTL_TIMER_VALUE1_HIGH Stores the higher 16 bits of RTC timer. (RO)
  </p>
  <h4>
   Register 9.51. RTC_CNTL_XTAL32K_CLK_FACTOR_REG (0x00E4)
  </h4>
  <p>
   <span id="page-260-1">
   </span>
   <img src="_page_260_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_XTAL32K_CLK_FACTOR Configures the divider factor for the XTAL32K oscillator. (R/W)
  </p>
  <h4>
   Register 9.52. RTC_CNTL_XTAL32K_CONF_REG (0x00E8)
  </h4>
  <p>
   <span id="page-261-0">
   </span>
   <img src="_page_261_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_RETURN_WAIT Defines the waiting cycles before returning to the normal XTAL32K oscillator. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_RESTART_WAIT Defines the waiting cycles before restarting the XTAL32K oscillator. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_WDT_TIMEOUT Defines the waiting period for clock detection. If no clock is detected after this period, the XTAL32K oscillator can be regarded as dead. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_STABLE_THRES Defines the allowed restarting period, within which the XTAL32K oscillator can be regarded as stable. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-261-1">
   </span>
   <img src="_page_261_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   Register 9.53. RTC_CNTL_USB_CONF_REG (0x00EC)
  </p>
  <p block-type="Text">
   RTC_CNTL_IO_MUX_RESET_DISABLE Set this bit to disable io_mux reset. (R/W)
  </p>
  <p>
   <span id="page-262-1">
   </span>
   <img src="_page_262_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_REJECT_CAUSE Stores the reject-to-sleep cause. (RO)
  </p>
  <p block-type="Text">
   Register 9.55. RTC_CNTL_OPTION1_REG (0x00F4)
  </p>
  <p>
   <span id="page-262-0">
   </span>
   <img src="_page_262_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_FORCE_DOWNLOAD_BOOT Set this bit to force the chip to boot from the download mode. (R/W)
  </p>
  <p>
   <span id="page-262-2">
   </span>
   <img src="_page_262_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_WAKEUP_CAUSE Stores the wakeup cause. (RO)
  </p>
  <h4>
   Register 9.57. RTC_CNTL_INT_ENA_RTC_W1TS_REG (0x0100)
  </h4>
  <p>
   <span id="page-263-0">
   </span>
   <img src="_page_263_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_SLP_WAKEUP_INT_ENA_W1TS Enables interrupts when the chip wakes up from sleep by writing 1 to set (W1TS). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SLP_REJECT_INT_ENA_W1TS Enables interrupts when the chip rejects to go to sleep by writing 1 to set (W1TS). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_INT_ENA_W1TS Enables the RTC watchdog interrupt by writing 1 to set (W1TS). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_INT_ENA_W1TS Enables the brownout interrupt by writing 1 to set. (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_MAIN_TIMER_INT_ENA_W1TS Enables the RTC main timer interrupt by writing 1 to set (W1TS). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SWD_INT_ENA_W1TS Enables the super watchdog interrupt by writing 1 to set (W1TS). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_DEAD_INT_ENA_W1TS Enables interrupts when the XTAL32K is dead by writing 1 to set (W1TS). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_GLITCH_DET_INT_ENA_W1TS Enables interrupts when a glitch is detected by writing 1 to set (W1TS). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_CAL_INT_ENA_W1TS Enables interrupts upon the ending of a bb_pll call by writing 1 to set (W1TS). (WO)
    </li>
   </ul>
  </p>
  <h4>
   Register 9.58. RTC_CNTL_INT_ENA_RTC_W1TC_REG (0x0104)
  </h4>
  <p>
   <span id="page-264-0">
   </span>
   <img src="_page_264_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_SLP_WAKEUP_INT_ENA_W1TC Clear the interrupt enable bit when the chip wakes up from sleep by writing 1 to clear. (W1TC). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SLP_REJECT_INT_ENA_W1TC Clear the interrupt enable bit when the chip rejects to go to sleep by writing 1 to clear (W1TC). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_WDT_INT_ENA_W1TC Clear the RTC watchdog interrupt enable bit by writing 1 to clear (W1TC). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BROWN_OUT_INT_ENA_W1TC Clear the brownout interrupt enable bit by writing 1 to clear (W1TC). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_MAIN_TIMER_INT_ENA_W1TC Clear the RTC timer interrupt enable bit by writing 1 to clear. (W1TC). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_SWD_INT_ENA_W1TC Clear the super watchdog interrupt enable bit by writing 1 to clear (W1TC). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_XTAL32K_DEAD_INT_ENA_W1TC Clear the interrupt enable bit when the XTAL32K is dead by writing 1 to clear (W1TC). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_GLITCH_DET_INT_ENA_W1TC Clear the interrupt enable bit when a glitch is detected by writing 1 to clear (W1TC). (WO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_BBPLL_CAL_INT_ENA_W1TC Clear the interrupt enable bit upon the ending of a bb_pll call by writing 1 to clear (W1TC).(WO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-265-0">
   </span>
   <img src="_page_265_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   RTC_CNTL_RETENTION_CLK_SEL Selects the retention clock. 0: RC_FAST_CLK; 1: XTAL_CLK. (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_RETENTION_EN Set to enable the CPU retention in light sleep. (R/W)
  </p>
  <h4>
   Register 9.60. RTC_CNTL_GPIO_WAKEUP_REG (0x0110)
  </h4>
  <p>
   <span id="page-266-0">
   </span>
   <img src="_page_266_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RTC_CNTL_GPIO_WAKEUP_STATUS Indicates the RTC GPIO that woke up the chip, with Bit0 to Bit5 representing RTC GPIO 0 to RTC GPIO 5, respectively. For example, 010000 indicates it is the RTC GPIO 4 that woke up the chip. (RO)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_GPIO_WAKEUP_STATUS_CLR Clears the RTC GPIO wakeup flag. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_GPIO_PIN_CLK_GATE Enables the RTC GPIO clock gate. (R/W)
    </li>
    <li block-type="ListItem">
     RTC_CNTL_GPIO_PIN5_INT_TYPE Configures RTC GPIO 5 wakeup type.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: disable wakeup by RTC GPIO
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1: wake up the chip upon the rising edge
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2: wake up the chip upon the failing edge
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       3: wake up the chip upon the rising edge or the failing edge
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       4: wake up the chip upon low level
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       5: wake up the chip upon high level
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (R/W)
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   RTC_CNTL_GPIO_PIN4_INT_TYPE Configures RTC GPIO 4 wakeup type.
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     0: disable wakeup by RTC GPIO
    </li>
    <li block-type="ListItem">
     1: wake up the chip upon the rising edge
    </li>
    <li block-type="ListItem">
     2: wake up the chip upon the failing edge
    </li>
    <li block-type="ListItem">
     3: wake up the chip upon the rising edge or the failing edge
    </li>
    <li block-type="ListItem">
     4: wake up the chip upon low level
    </li>
    <li block-type="ListItem">
     5: wake up the chip upon high level
    </li>
    <li block-type="ListItem">
     (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RTC_CNTL_GPIO_PIN3_INT_TYPE Configures RTC GPIO 3 wakeup type.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     0: disable wakeup by RTC GPIO
    </li>
    <li block-type="ListItem">
     1: wake up the chip upon the rising edge
    </li>
    <li block-type="ListItem">
     2: wake up the chip upon the failing edge
    </li>
    <li block-type="ListItem">
     3: wake up the chip upon the rising edge or the failing edge
    </li>
    <li block-type="ListItem">
     4: wake up the chip upon low level
    </li>
    <li block-type="ListItem">
     5: wake up the chip upon high level
    </li>
    <li block-type="ListItem">
     (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Continued on the next page...
  </h4>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="Text">
   RTC_CNTL_GPIO_PIN2_INT_TYPE Configures RTC GPIO 2 wakeup type.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     0: disable wakeup by RTC GPIO
    </li>
    <li block-type="ListItem">
     1: wake up the chip upon the rising edge
    </li>
    <li block-type="ListItem">
     2: wake up the chip upon the failing edge
    </li>
    <li block-type="ListItem">
     3: wake up the chip upon the rising edge or the failing edge
    </li>
    <li block-type="ListItem">
     4: wake up the chip upon low level
    </li>
    <li block-type="ListItem">
     5: wake up the chip upon high level
    </li>
   </ul>
  </p>
  <p block-type="Text">
   (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_GPIO_PIN1_INT_TYPE Configures RTC GPIO 1 wakeup type.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     0: disable wakeup by RTC GPIO
    </li>
    <li block-type="ListItem">
     1: wake up the chip upon the rising edge
    </li>
    <li block-type="ListItem">
     2: wake up the chip upon the failing edge
    </li>
    <li block-type="ListItem">
     3: wake up the chip upon the rising edge or the failing edge
    </li>
    <li block-type="ListItem">
     4: wake up the chip upon low level
    </li>
    <li block-type="ListItem">
     5: wake up the chip upon high level
    </li>
   </ul>
  </p>
  <p block-type="Text">
   (R/W)
  </p>
  <p block-type="Text">
   RTC_CNTL_GPIO_PIN0_INT_TYPE Configures RTC GPIO 0 wakeup type.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     0: disable wakeup by RTC GPIO
    </li>
    <li block-type="ListItem">
     1: wake up the chip upon the rising edge
    </li>
    <li block-type="ListItem">
     2: wake up the chip upon the failing edge
    </li>
    <li block-type="ListItem">
     3: wake up the chip upon the rising edge or the failing edge
    </li>
    <li block-type="ListItem">
     4: wake up the chip upon low level
    </li>
    <li block-type="ListItem">
     5: wake up the chip upon high level
    </li>
    <li block-type="ListItem">
     (R/W)
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      (R/W)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      RTC_CNTL_GPIO_PIN5_WAKEUP_ENABLE
     </th>
     <th>
      Enables wakeup from RTC GPIO 5. (R/W)
     </th>
    </tr>
    <tr>
     <th>
      RTC_CNTL_GPIO_PIN4_WAKEUP_ENABLE
     </th>
     <th>
      Enables wakeup from RTC GPIO 4. (R/W)
     </th>
    </tr>
    <tr>
     <th>
      RTC_CNTL_GPIO_PIN3_WAKEUP_ENABLE
     </th>
     <th>
      Enables wakeup from RTC GPIO 3. (R/W)
     </th>
    </tr>
    <tr>
     <th>
      RTC_CNTL_GPIO_PIN2_WAKEUP_ENABLE
     </th>
     <th>
      Enables wakeup from RTC GPIO 2. (R/W)
     </th>
    </tr>
    <tr>
     <th>
      RTC_CNTL_GPIO_PIN1_WAKEUP_ENABLE
     </th>
     <th>
      Enables wakeup from RTC GPIO 1. (R/W)
     </th>
    </tr>
   </tbody>
  </table>
  <p>
   <img src="_page_268_Figure_0.jpeg"/>
  </p>
  <p block-type="TextInlineMath">
   RTC_CNTL_FORCE_XPD_SAR Set this field to FPU SAR ADC. (R/W)
  </p>
  <h1>
   <span id="page-269-0">
   </span>
   System Timer (SYSTIMER)
  </h1>
  <h1>
   10.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-269-1">
   </span>
   ESP32-C3 provides a 52-bit timer, which can be used to generate tick interrupts for operating system, or be used as a general timer to generate periodic interrupts or one-time interrupts.
  </p>
  <p block-type="Text">
   <span id="page-269-3">
   </span>
   The timer consists of two counters UNIT0 and UNIT1. The count values can be monitored by three comparators COMP0, COMP1 and COMP2. See the timer block diagram on Figure 10.1-1.
  </p>
  <p>
   <span id="page-269-4">
   </span>
   <img src="_page_269_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 10.1-1. System Timer Structure
  </p>
  <h1>
   10.2 Features
  </h1>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <span id="page-269-2">
     </span>
     <i>
      •
     </i>
     Consist of two 52-bit counters and three 52-bit comparators
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Software accessing registers is clocked by APB_CLK
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Use CNT_CLK for counting, with an average frequency of 16 MHz in two counting cycles
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Use 40 MHz XTAL_CLK as the clock source of CNT_CLK
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support for 52-bit alarm values (t) and 26-bit alarm periods (
     <i>
      δ
     </i>
     t)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Provide two modes to generate alarms:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Target mode: only a one-time alarm is generated based on the alarm value (t)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Period mode: periodic alarms are generated based on the alarm period (
       <i>
        δ
       </i>
       t)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Three comparators can generate three independent interrupts based on configured alarm value (t) or alarm period (
     <i>
      δ
     </i>
     t)
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Software configuring the reference count value. For example, the system timer is able to load back the sleep time recorded by the RTC timer via software after Light-sleep
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Can be configured to stall or continue running when CPU stalls or enters on-chip-debugging mode
    </li>
   </ul>
  </p>
  <h1>
   10.3 Clock Source Selection
  </h1>
  <p block-type="Text">
   <span id="page-270-0">
   </span>
   The counters and comparators are driven using XTAL_CLK. After scaled by a fractional divider, a
   <i>
    fXT AL
   </i>
   _
   <i>
    CLK
   </i>
   /3 clock is generated in one count cycle and a
   <i>
    fXT AL
   </i>
   _
   <i>
    CLK
   </i>
   /2 clock in another count cycle. The average clock frequency is
   <i>
    fXT AL
   </i>
   _
   <i>
    CLK
   </i>
   /2
   <i>
    .
   </i>
   5, which is 16 MHz, i.e. the CNT_CLK in Figure 10.4-1. The timer counting is incremented by 1/16
   <i>
    µs
   </i>
   on each CNT_CLK cycle.
  </p>
  <p block-type="Text">
   Software operation such as configuring registers is clocked by APB_CLK. For more information about APB_CLK, see Chapter 6
   <i>
    Reset and Clock
   </i>
   .
  </p>
  <p block-type="Text">
   The following two bits of system registers are also used to control the system timer:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_SYSTIM
     <a href="#page-190-0">
      ER_CLK_EN in regis
     </a>
     ter SYSTEM_PERIP_CLK_EN0_REG: enable APB_CLK signal to system timer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_SYSTIMER_RST in register SYSTEM_PERIP_RST_EN0_REG: reset system timer.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that if the timer is reset, its registers will be restored to their default values. For more information, please refer to Table Peripheral Clock Gating and Reset in Chapter 16
   <i>
    System Registers (SYSREG)
   </i>
   .
  </p>
  <p>
   <span id="page-270-3">
   </span>
   <img src="_page_270_Figure_9.jpeg"/>
  </p>
  <h1>
   <span id="page-270-1">
   </span>
   10.4 Functional Description
  </h1>
  <p>
   Figure 10.4-1. System Timer Alarm Generation
  </p>
  <p block-type="Text">
   Figure 10.4-1 shows the procedure to generate alarm in system timer. In this process, one timer counter and one timer comparator are used. An alarm interrupt will be generated accordingly based on the comparison result in comparator.
  </p>
  <h1>
   10.4.1 Counter
  </h1>
  <p block-type="Text">
   <span id="page-270-2">
   </span>
   The system timer has two 52-bit timer counters, shown as UNIT
   <i>
    n
   </i>
   (
   <i>
    n
   </i>
   = 0 or 1). Their counting clock source is a 16 MHz clock, i.e. CNT_CLK. Whether UNIT
   <i>
    n
   </i>
   works or not is controlled by two bits in register SYSTIMER_CONF_REG:
  </p>
  <p block-type="Text">
   Espressif Systems 271
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     _WORK_EN: set this bit to enable the counter UNIT
     <i>
      n
     </i>
     in system timer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     _CORE0_STALL_EN: if this bit is set, the counter UNIT
     <i>
      n
     </i>
     stops when CPU is stalled. The counter continues its counting after the CPU resumes.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The
   <a href="#page-276-1">
   </a>
   c
   <a href="#page-276-1">
    onfiguration of the two bits to contro
   </a>
   l the counter UNIT
   <i>
    n
   </i>
   is shown below, assuming that CPU is stalle
   <a href="#page-276-1">
    d.
   </a>
  </p>
  <span id="page-271-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Table 10.4-1. UNITn Configuration Bits
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TIMER_
      <br/>
      UNITn_WORK_EN
     </td>
     <td rowspan="2">
      SYSTIMER_TIMER_
      <br/>
      UNITn_CORE0_STALL_EN
      <br/>
      *
      <br/>
      x
     </td>
     <td>
      Counter
      <br/>
      UNITn
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      Not at work
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 10.4-1. UNIT
   <i>
    n
   </i>
   Configuration Bits
  </h4>
  <p block-type="Text">
   * x: Don't-care.
  </p>
  <p block-type="Text">
   When the counter UNIT
   <i>
    n
   </i>
   is at work, the count value is incremented on each counting cycle. When the counter UNIT
   <i>
    n
   </i>
   is stopped, the count value stops increasing and keeps unchanged.
  </p>
  <p block-type="Text">
   The lower 32 and higher 20 bits of initial count value are loaded from the registers SYSTIMER_TIMER_UNIT
   <i>
    n
   </i>
   _LOAD
  </p>
  <p block-type="Text">
   _LO and SYSTIMER_TIMER_UNIT
   <i>
    n
   </i>
   _LOAD_HI. Writing 1 to the bit SYSTIMER_TIMER_UNIT
   <i>
    n
   </i>
   _LOAD will trigger a reload event, and the current count value will be changed immediately. If UNIT
   <i>
    n
   </i>
   is at work, the counter will
   <a href="#page-277-0">
    continue to count up from the n
   </a>
   ew reloaded value.
  </p>
  <p block-type="Text">
   <a href="#page-277-0">
    Writi
   </a>
   ng 1 to
   <a href="#page-277-1">
    SYSTIMER_TIMER_UNIT
   </a>
   <i>
    n
   </i>
   _UPDATE will trigger an up
   <a href="#page-278-0">
    date event. The lower 32 and hig
   </a>
   her 20 bits of current count value will be locked into the registers SYSTIMER_TIMER_UNIT
   <i>
    n
   </i>
   _VALUE_LO and SYSTIMER_TIMER_
  </p>
  <p block-type="Text">
   UNIT
   <i>
    n
   </i>
   _VALUE_HI, and then
   <a href="#page-277-2">
    SYSTIMER_TIMER_
   </a>
   UNIT
   <i>
    n
   </i>
   _VALUE_VALID is asserted. Before the next update event, the values of SYSTIMER_TIMER_UNIT
   <i>
    n
   </i>
   _VALUE_LO and
   <a href="#page-278-1">
    SYSTIMER_TIMER_UNIT
   </a>
   <i>
    n
   </i>
   _VALUE_HI remain
   <a href="#page-278-2">
    unchanged.
   </a>
  </p>
  <h1>
   10.4.2
   <a href="#page-278-1">
    Comparator and Alarm
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-271-0">
   </span>
   The system timer has three 52-bit comparators, shown as COMP
   <i>
    x
   </i>
   (
   <i>
    x
   </i>
   = 0, 1, or 2). The comparators can generate independent interrupts based on different alarm values (t) or alarm periods (
   <i>
    δ
   </i>
   t).
  </p>
  <p block-type="Text">
   Configure SYSTIMER_TARGET
   <i>
    x
   </i>
   _PERIOD_MODE to choose from the two alarm modes for each COMP
   <i>
    x
   </i>
   :
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: select period mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: s
     <a href="#page-281-0">
      elect target mode
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In period mode, the alarm period (
   <i>
    δ
   </i>
   t) is provided by the register SYSTIMER_TARGET
   <i>
    x
   </i>
   _PERIOD. Assuming that current count value is t1, when it reaches (t1 +
   <i>
    δ
   </i>
   t), an alarm interrupt will be generated. Another alarm interrupt also will be generated when the count value reaches (t1 + 2*
   <i>
    δ
   </i>
   t). By such way, periodic alarms are generated.
  </p>
  <p block-type="Text">
   In target mode, the lower 32 bits and higher 20 bits of the alarm value (t) are provided by SYSTIMER_TIMER_TARGET
  </p>
  <p block-type="Text">
   Espressif Systems 272
  </p>
  <p block-type="Text">
   <i>
    x
   </i>
   _LO and SYSTIMER_TIMER_TARGET
   <i>
    x
   </i>
   _HI. Assuming that current count value is t2 (t2 &lt;= t), an alarm interrupt will be generated when the count value reaches the alarm value (t). Unlike in period mode, only one alarm interrupt is generated in target mode.
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET
   <i>
    x
   </i>
   <a href="#page-281-1">
    _TIMER_UNIT_SEL
   </a>
   is used to choose the count value from which timer counter to be compared for alarm:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: use the count value from UNIT
     <i>
      1
     </i>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-281-0">
      0: use the count value from UNIT
     </a>
     <i>
      0
     </i>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Finally, set SYSTIMER_TARGET
   <i>
    x
   </i>
   _WORK_EN and COMP
   <i>
    x
   </i>
   starts to compare the count value with the alarm value (t) in target mode or with the alarm period (t1 + n*
   <i>
    δ
   </i>
   t) in period mode.
  </p>
  <p block-type="Text">
   An alarm is generated when the count value equals to the alarm value (t) in target mode or to the start value + n*alarm period
   <i>
    δ
   </i>
   <a href="#page-276-1">
    t (n = 1,2,3...) in period mo
   </a>
   de. But if the alarm value (t) set in registers is less than current count value, i.e. the target has already passed, or current count value is larger than the target value (t) within a range (0 ~ 2
   <sup>
    51
   </sup>
   -1), an alarm interrupt also is generated immediately. The relationship between current count value
   <i>
    tc
   </i>
   , the alarm value
   <i>
    t
    <sup>
     t
    </sup>
   </i>
   and alarm trigger point is shown below.
  </p>
  <span id="page-272-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 10.4-2. Trigger Point
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Relationship Between tc
      <br/>
      and tt
     </th>
     <th>
      Trigger Point
     </th>
    </tr>
    <tr>
     <th>
      tc- tt
      <br/>
      &lt;= 0
     </th>
     <th>
      tc
      <br/>
      = tt, an alarm is triggered.
     </th>
    </tr>
    <tr>
     <th>
      51 - 1
      <br/>
      0 &lt;= tc
      <br/>
      - tt
      <br/>
      &lt; 2
     </th>
     <th>
      An alarm is triggered immediately.
     </th>
    </tr>
    <tr>
     <th>
      51 and
      <br/>
      51
      <br/>
      ( tc
      <br/>
      &lt; 2
      <br/>
      tt
      <br/>
      &lt; 2
      <br/>
      ,
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      51 and
      <br/>
      51)
      <br/>
      or tc
      <br/>
      &gt;= 2
      <br/>
      tt
      <br/>
      &gt;= 2
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      tc
      <br/>
      overflows after counting to its maximum value
     </th>
    </tr>
   </tbody>
  </table>
  <p>
   Table 10.4-2. Trigger Point
  </p>
  <h1>
   10.4.3 Synchronization Operation
  </h1>
  <p block-type="Text">
   <span id="page-272-0">
   </span>
   The clock (APB_CLK) used in software operation is not the same one as the timer counters and comparators working on CNT_CLK. Synchronization is needed for some configuration registers. A complete synchronization action takes two steps:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Software writes suitable values to configuration fields, see the first column in Table 10.4-3.
    </li>
    <li block-type="ListItem">
     2. Software writes 1 to corresponding bits to start synchronization, see the second column in Table 10.4-3.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 10.4-3. Synchronization Operation
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <span id="page-272-3">
  </span>
  <span id="page-272-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Synchronization Enable Bit
     </th>
    </tr>
    <tr>
     <td>
      Configuration Fields
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TIMER_UNITn_LOAD_LO
     </td>
     <td>
      SYSTIMER_TIMER_UNITn_LOAD
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TIMER_UNITn_LOAD_HI
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TARGETx_PERIOD
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TIMER_TARGETx_HI
      <br/>
      SYSTIMER_TIMER_TARGETx_LO
     </td>
     <td>
      SYSTIMER_TIMER_COMPx_LOAD
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   10.4.4 Interrupt
  </h1>
  <p block-type="Text">
   Each comparator has one level-type alarm interrupt, named as SYSTIMER_TARGET
   <i>
    x
   </i>
   _INT. Interrupts signal is asserted high when the comparator starts to alarm. Until the interrupt is cleared by software, it remains high. To enable interrupts, set the bit SYSTIMER_TARGET
   <i>
    x
   </i>
   _INT_ENA.
  </p>
  <h1>
   10.5 Programmi
   <a href="#page-285-0">
    ng Procedure
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-273-0">
   </span>
   When configuring COMP
   <i>
    x
   </i>
   and UNIT
   <i>
    n
   </i>
   , please ensure the corresponding COMP and UNIT are at work.
  </p>
  <h1>
   10.5.1 Read Current Count Value
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-273-1">
     </span>
     1. Set SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     _UPDATE to update the current count value into SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     _ VALUE_HI and SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     _VALUE_LO.
    </li>
    <li block-type="ListItem">
     2. Poll the reading of SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     _VALUE_VALID, till it's 1, which means user now can read the count value from
     <a href="#page-277-2">
      SYSTIMER_TIMER_UN
     </a>
     IT
     <i>
      n
     </i>
     _VALUE_HI and SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     <a href="#page-278-2">
      _VALUE_LO.
     </a>
    </li>
    <li block-type="ListItem">
     3.
     <a href="#page-278-2">
      Read the l
     </a>
     owe
     <a href="#page-278-1">
      r 32 bits and higher 20 bits from
     </a>
     SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     _VALUE_LO and SYSTIMER_TIMER_UNIT
     <i>
      n
     </i>
     <a href="#page-277-2">
      _VALUE_HI.
     </a>
    </li>
   </ul>
  </p>
  <h1>
   10.5.2 Configure One-Time Alarm
   <a href="#page-278-1">
   </a>
   i
   <a href="#page-278-1">
    n Target Mode
   </a>
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-273-2">
     </span>
     1. Set
     <a href="#page-278-2">
      SYSTIMER_TARGET
     </a>
     <i>
      x
     </i>
     _TIMER_UNIT_SEL to select the counter (UNIT
     <i>
      0
     </i>
     or UNIT
     <i>
      1
     </i>
     ) used for COMP
     <i>
      x
     </i>
     .
    </li>
    <li block-type="ListItem">
     2. Read current count value, see Section 10.5.1. This value will be used to calculate the alarm value (t) in Step 4.
    </li>
    <li block-type="ListItem">
     3. Clear
     <a href="#page-281-0">
      SYSTIMER_TARGET
     </a>
     <i>
      x
     </i>
     _PERIOD_MODE to enable target mode.
    </li>
    <li block-type="ListItem">
     4. Set an alarm value (t), and fill its lower
     <a href="#page-273-1">
      32 bits
     </a>
     to SYSTIMER_TIMER_TARGET
     <i>
      x
     </i>
     _LO, and the higher 20 bits to SYSTIMER_TIMER_TARGET
     <i>
      x
     </i>
     _HI.
    </li>
    <li block-type="ListItem">
     5. Set S
     <a href="#page-281-0">
      YSTIMER_TIMER_COMP
     </a>
     <i>
      x
     </i>
     _LOAD to synchronize the alarm value (t) to COMP
     <i>
      x
     </i>
     , i.e. load the alarm value (t) to the COMP
     <i>
      x
     </i>
     .
    </li>
    <li block-type="ListItem">
     6. Set
     <a href="#page-281-1">
      SYSTIMER_TARGET
     </a>
     <i>
      x
     </i>
     _WORK_EN to enable the selected COMP
     <i>
      x
     </i>
     . COMP
     <i>
      x
     </i>
     starts comparing the count val
     <a href="#page-282-0">
      ue with the alarm value (t).
     </a>
    </li>
    <li block-type="ListItem">
     7. Set SYSTIMER_TARGET
     <i>
      x
     </i>
     _INT_ENA to enable timer interrupt. When Unit
     <i>
      n
     </i>
     counts to the alarm value (t), a SYSTIMER_TARGET
     <i>
      x
     </i>
     <a href="#page-276-1">
      _INT interrupt is
     </a>
     triggered.
    </li>
   </ul>
  </p>
  <h1>
   10.5.3
   <a href="#page-285-0">
    Configure Periodic
   </a>
   Alarms in Period Mode
  </h1>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <span id="page-273-3">
     </span>
     1. Set SYSTIMER_TARGET
     <i>
      x
     </i>
     _TIMER_UNIT_SEL to select the counter (UNIT
     <i>
      0
     </i>
     or UNIT
     <i>
      1
     </i>
     ) used for COMP
     <i>
      x
     </i>
     .
    </li>
    <li block-type="ListItem">
     2. Set an alarm period (
     <i>
      δ
     </i>
     t), and fill it to SYSTIMER_TARGET
     <i>
      x
     </i>
     _PERIOD.
    </li>
    <li block-type="ListItem">
     3. Set
     <a href="#page-281-0">
      SYSTIMER_TIMER_COMP
     </a>
     <i>
      x
     </i>
     _LOAD to synchronize the alarm period (
     <i>
      δ
     </i>
     t) to COMP
     <i>
      x
     </i>
     , i.e. load the alarm period (
     <i>
      δ
     </i>
     t) to COMP
     <i>
      x
     </i>
     .
    </li>
    <li block-type="ListItem">
     4. Clear and then set SYSTIMER_TARGET
     <i>
      x
     </i>
     <a href="#page-281-0">
      _PERIOD_MODE
     </a>
     to configure COMP
     <i>
      x
     </i>
     into period mode.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     5. Set SYSTIMER_TARGET
     <i>
      x
     </i>
     _WORK_EN to enable the selected COMP
     <i>
      x
     </i>
     . COMP
     <i>
      x
     </i>
     starts comparing the count value with the sum of start value + n*
     <i>
      δ
     </i>
     t (n = 1, 2, 3...).
    </li>
    <li block-type="ListItem">
     6. Set SYSTIMER_TARGET
     <i>
      x
     </i>
     _INT_ENA to enable timer interrupt. A SYSTIMER_TARGET
     <i>
      x
     </i>
     _INT interrupt is trig
     <a href="#page-276-1">
      gered when Unit
     </a>
     <i>
      n
     </i>
     counts to start value + n*
     <i>
      δ
     </i>
     t (n = 1, 2, 3...) set in step 2.
    </li>
   </ul>
  </p>
  <h1>
   10.5.4
   <a href="#page-285-0">
    Update After Light-s
   </a>
   leep
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-274-0">
     </span>
     1. Configure the RTC timer before the chip goes to Light-sleep, to record the exact sleep time. For more information, see Chapter 9
     <i>
      Low-power Management
     </i>
     .
    </li>
    <li block-type="ListItem">
     2. Read the sleep time from the RTC timer when the chip is woken up from Light-sleep.
    </li>
    <li block-type="ListItem">
     3. Read current count value
     <a href="#page-218-0">
      of system timer, see Sectio
     </a>
     n 10.5.1.
    </li>
    <li block-type="ListItem">
     4. Convert the time value recorded by the RTC timer from the clock cycles based on RTC_SLOW_CLK to that based on 16 MHz CNT_CLK. For example, if the frequency of RTC_SLOW_CLK is 32 KHz, the recorded RTC timer value should be converted by mult
     <a href="#page-273-1">
      iplying
     </a>
     by 500.
    </li>
    <li block-type="ListItem">
     5. Add the converted RTC value to the current count value of the system timer:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Fill the new value into SYSTIMER_TIMER_UNIT
       <i>
        n
       </i>
       _LOAD_LO (low 32 bits) and SYSTIMER_TIMER_UNIT
       <i>
        n
       </i>
       _LOAD_HI (high 20 bits).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set SYSTIMER_TIMER_UNIT
       <i>
        n
       </i>
       _LOAD to load new timer value into system timer. By such way, the system timer is updat
       <a href="#page-277-0">
        ed.
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   10.6 R
   <a href="#page-278-0">
    egister Summary
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-274-1">
   </span>
   The addresses in this section are relative to system timer base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="4">
      Name
      <br/>
      Description
      <br/>
      Address
      <br/>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Clock Control Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_CONF_REG
     </td>
     <td>
      Configure system timer clock
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UNIT0 Control and Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT0_OP_REG
     </td>
     <td>
      Read UNIT0 value to registers
     </td>
     <td>
      0x0004
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT0_LOAD_HI_REG
     </td>
     <td>
      High 20 bits to be loaded to UNIT0
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT0_LOAD_LO_REG
     </td>
     <td>
      Low 32 bits to be loaded to UNIT0
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT0_VALUE_HI_REG
     </td>
     <td>
      UNIT0 value, high 20 bits
     </td>
     <td>
      0x0040
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT0_VALUE_LO_REG
     </td>
     <td>
      UNIT0 value, low 32 bits
     </td>
     <td>
      0x0044
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="3">
      SYSTIMER_UNIT0_LOAD_REG
      <br/>
      UNIT0 synchronization register
      <br/>
      0x005C
      <br/>
      WT
     </td>
    </tr>
    <tr>
     <td>
      UNIT1 Control and Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT1_OP_REG
     </td>
     <td>
      Read UNIT1 value to registers
     </td>
     <td>
      0x0008
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT1_LOAD_HI_REG
     </td>
     <td>
      High 20 bits to be loaded to UNIT1
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT1_LOAD_LO_REG
      <br/>
      SYSTIMER_UNIT1_VALUE_HI_REG
     </td>
     <td>
      Low 32 bits to be loaded to UNIT1
      <br/>
      UNIT1 value, high 20 bits
     </td>
     <td>
      0x0018
      <br/>
      0x0048
     </td>
     <td>
      R/W
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 10
      <br/>
      System Timer (SYSTIMER)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_UNIT1_LOAD_REG
     </td>
     <td>
      UNIT1 synchronization register
     </td>
     <td>
      0x0060
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      Comparator0 Control and Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TARGET0_HI_REG
     </td>
     <td>
      Alarm value to be loaded to COMP0, high 20
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      bits
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TARGET0_LO_REG
     </td>
     <td>
      Alarm value to be loaded to COMP0, low 32
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TARGET0_CONF_REG
     </td>
     <td>
      bits
      <br/>
      Configure COMP0 alarm mode
     </td>
     <td>
      0x0034
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_COMP0_LOAD_REG
     </td>
     <td>
      COMP0 synchronization register
     </td>
     <td>
      0x0050
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      Comparator1 Control and Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TARGET1_HI_REG
     </td>
     <td>
      Alarm value to be loaded to COMP1, high 20
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      bits
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TARGET1_LO_REG
     </td>
     <td>
      Alarm value to be loaded to COMP1, low 32
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      bits
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="4">
      SYSTIMER_TARGET1_CONF_REG
      <br/>
      Configure COMP1 alarm mode
      <br/>
      0x0038
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_COMP1_LOAD_REG
     </td>
     <td>
      COMP1 synchronization register
     </td>
     <td>
      0x0054
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      Comparator2 Control and Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TARGET2_HI_REG
     </td>
     <td>
      Alarm value to be loaded to COMP2, high 20
     </td>
     <td>
      0x002C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      bits
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_TARGET2_LO_REG
     </td>
     <td>
      Alarm value to be loaded to COMP2, low 32
     </td>
     <td>
      0x0030
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      bits
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="4">
      SYSTIMER_TARGET2_CONF_REG
      <br/>
      Configure COMP2 alarm mode
      <br/>
      0x003C
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_COMP2_LOAD_REG
     </td>
     <td>
      COMP2 synchronization register
     </td>
     <td>
      0x0058
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Registers
     </td>
     <td colspan="2">
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_INT_ENA_REG
      <br/>
      SYSTIMER_INT_RAW_REG
     </td>
     <td colspan="2">
      Interrupt enable register of system timer
      <br/>
      0x0064
      <br/>
      R/W
      <br/>
      0x0068
     </td>
     <td>
      R/WTC/SS
     </td>
    </tr>
    <tr>
     <td>
      SYSTIMER_INT_CLR_REG
     </td>
     <td>
      Interrupt raw register of system timer
      <br/>
      Interrupt clear register of system timer
     </td>
     <td>
      0x006C
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td colspan="4">
      SYSTIMER_INT_ST_REG
      <br/>
      Interrupt status register of system timer
      <br/>
      0x0070
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   10.7 Registers
  </h1>
  <p block-type="Text">
   <span id="page-276-0">
   </span>
   The addresses in this section are relative to system timer base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-276-1">
   </span>
   <img src="_page_276_Figure_2.jpeg"/>
  </p>
  <h4>
   Register 10.1. SYSTIMER_CONF_REG (0x0000)
  </h4>
  <p block-type="Text">
   SYSTIMER_TARGET2_WORK_EN COMP2 work enable bit. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET1_WORK_EN COMP1 work enable bit. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET0_WORK_EN COMP0 work enable bit. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT1_CORE0_STALL_EN UNIT1 is stalled when CPU stalled. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_CORE0_STALL_EN UNIT0 is stalled when CPU stalled. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT1_WORK_EN UNIT1 work enable bit. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_WORK_EN UNIT0 work enable bit. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_CLK_EN Register clock gating. 1: Register clock is always enabled for read and write operations. 0: Only enable needed clock for register read or write operations. (R/W)
  </p>
  <p>
   <span id="page-277-2">
   </span>
   <img src="_page_277_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_VALUE_VALID Timer value is synchronized and valid. (R/SS/WTC)
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_UPDATE Update timer UNIT0, i.e. read the UNIT0 count value to SYS-TIMER_TIMER_UNIT0_VALUE_HI and SYSTIMER_TIMER_UNIT0_VALUE_LO. (WT)
  </p>
  <p>
   <span id="page-277-1">
   </span>
   <img src="_page_277_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_LOAD_HI The value to be loaded to UNIT0, high 20 bits. (R/W)
  </p>
  <p>
   <span id="page-277-0">
   </span>
   <img src="_page_277_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_LOAD_LO The value to be loaded to UNIT0, low 32 bits. (R/W)
  </p>
  <p>
   <span id="page-278-2">
   </span>
   <img src="_page_278_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_VALUE_HI UNIT0 read value, high 20 bits. (RO)
  </p>
  <p>
   <span id="page-278-1">
   </span>
   <img src="_page_278_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_VALUE_LO UNIT0 read value, low 32 bits. (RO)
  </p>
  <p>
   <img src="_page_278_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-278-0">
   </span>
   <img src="_page_278_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT0_LOAD UNIT0 synchronization enable signal. Set this bit to reload the values of SYSTIMER_TIMER_UNIT0_LOAD_HI and SYSTIMER_TIMER_UNIT0_LOAD_LO to UNIT0. (WT)
  </p>
  <p>
   <span id="page-279-0">
   </span>
   <img src="_page_279_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT1_VALUE_VALID UNIT1 value is synchronized and valid. (R/SS/WTC)
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT1_UPDATE Update timer UNIT1, i.e. read the UNIT1 count value to SYS-TIMER_TIMER_UNIT1_VALUE_HI and SYSTIMER_TIMER_UNIT1_VALUE_LO. (WT)
  </p>
  <p>
   <span id="page-279-1">
   </span>
   <img src="_page_279_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT1_LOAD_HI The value to be loaded to UNIT1, high 20 bits. (R/W)
  </p>
  <p>
   <img src="_page_279_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT1_LOAD_LO The value to be loaded to UNIT1, low 32 bits. (R/W)
  </p>
  <p>
   <span id="page-280-0">
   </span>
   <img src="_page_280_Figure_0.jpeg"/>
  </p>
  <p>
   SYSTIMER_TIMER_UNIT1_VALUE_HI UNIT1 read value, high 20 bits. (RO)
  </p>
  <p>
   <span id="page-280-1">
   </span>
   <img src="_page_280_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT1_VALUE_LO UNIT1 read value, low 32 bits. (RO)
  </p>
  <p>
   <img src="_page_280_Figure_4.jpeg"/>
  </p>
  <p>
   <img src="_page_280_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_UNIT1_LOAD UNIT1 synchronization enable signal. Set this bit to reload the values of SYSTIMER_TIMER_UNIT1_LOAD_HI and SYSTIMER_TIMER_UNIT1_LOAD_LO to UNIT1. (WT)
  </p>
  <p>
   <span id="page-281-1">
   </span>
   <img src="_page_281_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_TARGET0_HI The alarm value to be loaded to COMP0, high 20 bits. (R/W)
  </p>
  <p>
   <span id="page-281-2">
   </span>
   <img src="_page_281_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_TARGET0_LO The alarm value to be loaded to COMP0, low 32 bits. (R/W)
  </p>
  <p>
   <span id="page-281-0">
   </span>
   <img src="_page_281_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   Register 10.16. SYSTIMER_TARGET0_CONF_REG (0x0034)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET0_PERIOD COMP0 alarm period. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET0_PERIOD_MODE Set COMP0 to period mode. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET0_TIMER_UNIT_SEL Select which unit to compare for COMP0. (R/W)
  </p>
  <p>
   <span id="page-282-0">
   </span>
   <img src="_page_282_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_COMP0_LOAD COMP0 synchronization enable signal. Set this bit to reload the alarm value/period to COMP0. (WT)
  </p>
  <p>
   <img src="_page_282_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_TARGET1_HI The alarm value to be loaded to COMP1, high 20 bits. (R/W)
  </p>
  <p>
   <span id="page-282-1">
   </span>
   <img src="_page_282_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_TARGET1_LO The alarm value to be loaded to COMP1, low 32 bits. (R/W)
  </p>
  <h4>
   <span id="page-283-0">
   </span>
   Register 10.20. SYSTIMER_TARGET1_CONF_REG (0x0038) SYSTIMER_TARGET1_TIMER_UNIT_SEL 0 31 SYSTIMER_TARGET1_PERIOD_MODE 0 30 (reserved) 0 0 0 0 29 26 SYSTIMER_TARGET1_PERIOD 0x00000 25 0 Reset
  </h4>
  <p block-type="Text">
   SYSTIMER_TARGET1_PERIOD COMP1 alarm period. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET1_PERIOD_MODE Set COMP1 to period mode. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET1_TIMER_UNIT_SEL Select which unit to compare for COMP1. (R/W)
  </p>
  <h4>
   Register 10.21. SYSTIMER_COMP1_LOAD_REG (0x0054)
  </h4>
  <p>
   <img src="_page_283_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_COMP1_LOAD COMP1 synchronization enable signal. Set this bit to reload the alarm value/period to COMP1. (WT)
  </p>
  <p>
   <img src="_page_283_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_TARGET2_HI The alarm value to be loaded to COMP2, high 20 bits. (R/W)
  </p>
  <p>
   <span id="page-284-0">
   </span>
   <img src="_page_284_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_TARGET2_LO The alarm value to be loaded to COMP2, low 32 bits. (R/W)
  </p>
  <h4>
   <span id="page-284-1">
   </span>
   SYSTIMER_TARGET2_TIMER_UNIT_SEL 0 31 SYSTIMER_TARGET2_PERIOD_MODE 0 30 (reserved) 0 0 0 0 29 26 SYSTIMER_TARGET2_PERIOD 0x00000 25 0 Reset
  </h4>
  <p block-type="Text">
   Register 10.24. SYSTIMER_TARGET2_CONF_REG (0x003C)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET2_PERIOD COMP2 alarm period. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET2_PERIOD_MODE Set COMP2 to period mode. (R/W)
  </p>
  <p block-type="Text">
   SYSTIMER_TARGET2_TIMER_UNIT_SEL Select which unit to compare for COMP2. (R/W)
  </p>
  <p block-type="Text">
   Register 10.25. SYSTIMER_COMP2_LOAD_REG (0x0058)
  </p>
  <p>
   <span id="page-284-2">
   </span>
   <img src="_page_284_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTIMER_TIMER_COMP2_LOAD COMP2 synchronization enable signal. Set this bit to reload the alarm value/period to COMP2. (WT)
  </p>
  <p>
   <span id="page-285-0">
   </span>
   <img src="_page_285_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-285-1">
   </span>
   SYSTIMER_TARGET2_INT_RAW SYSTIMER_TARGET2_INT raw bit. (R/WTC/SS)
  </p>
  <p>
   <span id="page-286-0">
   </span>
   <img src="_page_286_Figure_0.jpeg"/>
  </p>
  <p block-type="TextInlineMath">
   SYSTIMER_DATE Version control register. (R/W)
  </p>
  <h1>
   <span id="page-287-0">
   </span>
   Chapter 11
  </h1>
  <h1>
   Timer Group (TIMG)
  </h1>
  <h1>
   11.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-287-2">
   </span>
   <span id="page-287-1">
   </span>
   General purpose timers can be used to precisely time an interval, trigger an interrupt after a particular interval (periodically and aperiodically), or act as a hardware clock. As shown in Figure 11.1-1, the ESP32-C3 chip contains two timer groups, namely timer group 0 and timer group 1. Each timer group consists of one general purpose timer referred to as T0 and one Main System Watchdog Timer. All general purpose timers are based on 16-bit prescalers and 54-bit auto-reload-capable up-down counters.
  </p>
  <p>
   <span id="page-287-3">
   </span>
   <img src="_page_287_Figure_4.jpeg"/>
  </p>
  <p>
   Figure 11.1-1. Timer Units within Groups
  </p>
  <p block-type="Text">
   Note that while the Main System Watchdog Timer registers are described in this chapter, their functional description is included in the Chapter 12
   <i>
    Watchdog Timers (WDT)
   </i>
   . Therefore, the term 'timers' within this chapter refers to the general purpose timers.
  </p>
  <p block-type="Text">
   The timers' features are summarized as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A 16-bit clock prescaler, from 2
     <a href="#page-304-0">
     </a>
     t
     <a href="#page-304-0">
      o 65536
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A 54-bit time-base counter programmable to incrementing or decrementing
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Able to read real-time value of the time-base counter
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Halting and resuming the time-base counter
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Programmable alarm generation
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Timer value reload (Auto-reload at alarm or software-controlled instant reload)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Level interrupt generation
    </li>
   </ul>
  </p>
  <h1>
   11.2 Functional Description
  </h1>
  <p>
   <span id="page-288-4">
   </span>
   <span id="page-288-0">
   </span>
   <img src="_page_288_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 11.2-1. Timer Group Architecture
  </p>
  <p block-type="Text">
   Figure11.2-1 is a diagram of timer T0 in a timer group. T0 contains a clock selector, a 16-bit integer divider as a prescaler, a timer-based counter and a comparator for alarm generation.
  </p>
  <h1>
   11.2.1
   <a href="#page-288-4">
    1
   </a>
   6-bit Prescaler and Clock Selection
  </h1>
  <p block-type="Text">
   <span id="page-288-1">
   </span>
   The timer can select between the APB clock (APB_CLK) or external clock (XTAL_CLK) as its clock source by setting the TIMG_T0_USE_XTAL field of the TIMG_T0CONFIG_REG register. The selected clock is switched on by setting TIMG_TIMER_CLK_IS_ACTIVE field of the TIMG_REGCLK_REG register to 1 and switched off by setting it to 0. The clock is then divided by a 16-bit prescaler to generate the time-base counter clock (TB_CLK)
   <a href="#page-294-1">
    used by the time-base
   </a>
   counter. When the
   <a href="#page-294-1">
    TIMG_T0_DIV
   </a>
   IDER field is configured as 2 ~ 65536, the divisor of
   <a href="#page-303-0">
   </a>
   t
   <a href="#page-303-0">
    he prescaler would be 2
   </a>
   ~ 65536. Note
   <a href="#page-303-0">
   </a>
   t
   <a href="#page-303-0">
    hat programming valu
   </a>
   e 0 to TIMG_T0_DIVIDER will result in the divisor being 65536. When the TIMG_T0_DIVIDER is set to 1, the actual divisor is 2 so the timer counter value represents the half of real time.
  </p>
  <p block-type="Text">
   To modify the 16-bit prescaler, please first configure the TIMG_T0_DIVIDER field
   <a href="#page-294-1">
    , and then set
   </a>
   TIMG_T0_DIVIDER_RST to 1. Mean
   <a href="#page-294-1">
    while, the timer mus
   </a>
   t be disabled (i.e. TIMG_T0_EN should be cleared). Otherwise, the result can be unpredictable.
  </p>
  <h1>
   11.2.2
   <a href="#page-294-1">
    54-bit Tim
   </a>
   e-base Counter
  </h1>
  <p block-type="Text">
   <span id="page-288-2">
   </span>
   The 54-bit time-base counters are based on TB_CLK and can be configured to increment or decrement via the TIMG_T0_INCREASE field. The time-base counter can be enabled or disabled by setting or clearing the TIMG_T0_EN field, respectively. When enabled, the time-base counter increments or decrements on each cycle of TB_CLK. When disabled, the time-base counter is essentially frozen. Note that the TIM
   <a href="#page-294-1">
    G_T0_INCREASE
   </a>
   field can be changed while TIMG_T0_EN is set and this will cause the time-base counter
   <a href="#page-294-1">
    to change dir
   </a>
   ection instantly.
  </p>
  <p block-type="Text">
   To read the 54-bit value of the time-base counter, the timer value must be latched to two registers before
   <a href="#page-294-1">
    being read by the CP
   </a>
   U (due to the CPU being 3
   <a href="#page-294-1">
    2-bit). By writin
   </a>
   g any value to the TIMG_T0UPDATE_REG, the current value of the 54-bit timer starts to be latched into the TIMG_T0LO_REG and TIMG_T0HI_REG registers containing the lower 32-bits and higher 22-bits, respectively. When TIMG_T0UPDATE_REG is cleared by hardware, it indicates the latch operation has been completed and current timer
   <a href="#page-295-0">
    value can be read from t
   </a>
   he TIMG_T0LO_REG and TIMG_T0HI_REG registers. TIMG_T0LO_REG and
   <a href="#page-294-2">
    TIMG_T
   </a>
   0HI_REG
   <a href="#page-295-1">
    registers wi
   </a>
   ll remain unchanged for the CPU to read in its own time until TIMG_T0UPDATE_REG
   <a href="#page-295-0">
    is written to aga
   </a>
   in.
  </p>
  <p block-type="Text">
   <span id="page-288-3">
   </span>
   <a href="#page-294-2">
    Espressif Systems
   </a>
   289
  </p>
  <h1>
   11.2.3 Alarm Generation
  </h1>
  <p block-type="Text">
   A timer can be configured to trigger an alarm when the timer's current value matches the alarm value. An alarm will cause an interrupt to occur and (optionally) an automatic reload of the timer's current value (see Section 11.2.4).
  </p>
  <p block-type="Text">
   The 54-bit alarm value is configured using TIMG_T0ALARMLO_REG and TIMG_T0ALARMHI_REG, which represent the lower 32-bits and higher 22-bits of the alarm value, respectively. However, the configured alarm
   <a href="#page-289-0">
    value
   </a>
   is ineffective until the alarm is enabled by setting the TIMG_T0_ALARM_EN field. To avoid alarm being enabled 'too late' (i.e. the timer value has
   <a href="#page-295-2">
    already passed the alarm
   </a>
   val
   <a href="#page-295-3">
    ue when the alarm is ena
   </a>
   bled), the hardware will trigger the alarm immediately if the current timer value is higher than the alarm value (within a defined range) when the up-down counter increments, or
   <a href="#page-294-1">
   </a>
   l
   <a href="#page-294-1">
    ower than the alarm va
   </a>
   lue (within a defined range) when the up-down counter decrements. Table 11.2-1 and Table 11.2-2 show the relationship between the current value of the timer, the alarm value, and when an alarm is triggered.The current time value and the alarm value are defined as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TIMG_VALUE = {TIMG_T0HI_REG, TIMG_T
     <a href="#page-289-1">
      0LO_R
     </a>
     EG}
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ALARM_VALUE = {TIMG_T0ALARMHI_REG, TIMG_T0ALARMLO_REG}
    </li>
   </ul>
  </p>
  <span id="page-289-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 11.2-1. Alarm Generation When Up-Down Counter Increments
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Scenario
      <br/>
      1
     </td>
     <td>
      Range
     </td>
     <td>
      Alarm
     </td>
    </tr>
    <tr>
     <td>
      53
      <br/>
      ALARM_VALUE − TIMG_VALUE &gt; 2
     </td>
     <td colspan="2">
      Triggered
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      53
      <br/>
      0 &lt; ALARM_VALUE − TIMG_VALUE ≤ 2
     </td>
     <td>
      Triggered when the up-down counter counts
     </td>
    </tr>
    <tr>
     <td rowspan="4">
      3
      <br/>
      4
     </td>
     <td>
      53
     </td>
     <td>
      TIMG_VALUE up to ALARM_VALUE
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      0 ≤ TIMG_VALUE − ALARM_VALUE &lt; 2
      <br/>
      53
      <br/>
      TIMG_VALUE − ALARM_VALUE ≥ 2
     </td>
     <td>
      Triggered
     </td>
    </tr>
    <tr>
     <td>
      Triggered when the up-down counter restarts
     </td>
    </tr>
    <tr>
     <td>
      counting up from 0 after reaching the timer's
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <a href="#page-295-1">
    Table 11.2-1. Alarm
   </a>
   <a href="#page-294-2">
    Generation Whe
   </a>
   n Up-Down Counter Increments
  </h4>
  <h4>
   Table 11.2-2. Alarm Generation When Up-Down Counter Decrements
  </h4>
  <span id="page-289-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Scenario
     </td>
     <td>
      Range
     </td>
     <td>
      Alarm
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      53
      <br/>
      TIMG_VALUE − ALARM_VALUE &gt; 2
      <br/>
      5
      <br/>
      6
      <br/>
      0 &lt; TIMG_VALUE − ALARM_VALUE ≤ 2
     </td>
     <td>
     </td>
     <td>
      Triggered
     </td>
    </tr>
    <tr>
     <td>
      Triggered when the up-down counter counts
      <br/>
      53
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      TIMG_VALUE down to ALARM_VALUE
     </td>
    </tr>
    <tr>
     <td rowspan="4">
      7
      <br/>
      8
     </td>
     <td>
      53
      <br/>
      0 ≤ ALARM_VALUE − TIMG_VALUE &lt; 2
     </td>
     <td>
      Triggered
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      53
      <br/>
      ALARM_VALUE − TIMG_VALUE ≥ 2
     </td>
     <td>
      Triggered when the up-down counter restarts
     </td>
    </tr>
    <tr>
     <td>
      counting
      <br/>
      down
      <br/>
      from
      <br/>
      the
      <br/>
      timer's
      <br/>
      maximum
     </td>
    </tr>
    <tr>
     <td>
      value after reaching the minimum value and
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <span id="page-289-0">
   </span>
   When an alarm occurs, the TIMG_T0_ALARM_EN field is automatically cleared and no alarm will occur again until the TIMG_T0_ALARM_EN is set next time.
  </p>
  <h1>
   11.2.4 Timer Reload
  </h1>
  <p block-type="Text">
   A timer is reloaded when a timer's current value is overwritten with a reload value stored in the TIMG_T0_LOAD_LO and TIMG_T0_LOAD_HI fields that correspond to the lower 32-bits and higher 22-bits of the timer's new value, respectively. However, writing a reload value to TIMG_T0_LOAD_LO and TIMG_T0_LOAD_HI will not cause the timer's current value to change. Instead, the reload value is ignored by
   <a href="#page-296-0">
    the timer until a relo
   </a>
   ad e
   <a href="#page-296-1">
    vent occurs. A reloa
   </a>
   d event can be triggered either by a software instant reload or an auto-reload at alarm.
  </p>
  <p block-type="Text">
   <a href="#page-296-1">
    A software instant re
   </a>
   load is triggered by the CPU writing any value to TIMG_T0LOAD_REG, which causes the timer's current value to be instantly reloaded. If TIMG_T0_EN is set, the timer will continue incrementing or decrementing from the new value. If TIMG_T0_EN is cleared, the timer will remain frozen at the new value until counting is re-enabled.
  </p>
  <p block-type="Text">
   An auto-reload at alarm will cause a timer reloa
   <a href="#page-294-1">
    d when an alar
   </a>
   m occurs, thus allowing the timer to continue incrementing or decrementing from
   <a href="#page-294-1">
   </a>
   t
   <a href="#page-294-1">
    he reload valu
   </a>
   e. This is generally useful for resetting the timer's value when using periodic alarms. To enable auto-reload at alarm, the TIMG_T0_AUTORELOAD field should be set. If not enabled, the timer's value will continue to increment or decrement past the alarm value after an alarm.
  </p>
  <h1>
   11.2.5 RTC_SLOW_CLK Frequency Calculation
  </h1>
  <p block-type="Text">
   <span id="page-290-0">
   </span>
   Via XTAL_CLK, a timer could calculate the frequency of clock sources for RTC_SLOW_CLK (i.e. RC_RTC_SLOW_CLK, RC_FAST_DIV_CLK, and XTAL32K_CLK) as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Start periodic or one-shot frequency calculation;
    </li>
    <li block-type="ListItem">
     2. Once receiving the signal to start calculation, the counter of XTAL_CLK and the counter of RTC_SLOW_CLK begin to work at the same time. When the counter of RTC_SLOW_CLK counts to C0, the two counters stop counting simultaneously;
    </li>
    <li block-type="ListItem">
     3. Assume the value of XTAL_CLK's counter is C1, and the frequency of RTC_SLOW_CLK would be calculated as:
     <i>
      f
     </i>
     _
     <i>
      rtc
     </i>
     =
     <i>
      C
     </i>
     0
     <i>
      ×f
     </i>
     _
     <i>
      XT AL
     </i>
     _
     <i>
      CLK C
     </i>
     1
    </li>
   </ul>
  </p>
  <h1>
   11.2.6 Interrupts
  </h1>
  <p block-type="Text">
   <span id="page-290-1">
   </span>
   Each timer has its own interrupt line that can be routed to the CPU, and thus each timer group has a total of two interrupt lines. Timers generate level interrupts that must be explicitly cleared by the CPU on each triggering.
  </p>
  <p block-type="Text">
   Interrupts are triggered after an alarm (or stage timeout for watchdog timers) occurs. Level interrupts will be held high after an alarm (or stage timeout) occurs, and will remain so until manually cleared. To enable a timer's interrupt, the TIMG_T0_INT_ENA bit should be set.
  </p>
  <p block-type="Text">
   The interrupts of each timer group are governed by a set of registers. Each timer within the group has a corresponding bit in each of these registers:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TIMG_T0_INT_RAW
     <a href="#page-301-0">
      : An alarm eve
     </a>
     nt sets it to 1. The bit will remain set until the timer's corresponding bit in TIMG_T0_INT_CLR is written.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TIMG_WDT_INT_RAW : A stage time out will set the timer's bit to 1. The bit will remain set until the timer's
     <a href="#page-301-1">
      corresponding bit in
     </a>
     TIMG_WDT_INT_CLR is written.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TIMG_T0_INT_ST : Reflects the status of each timer's interrupt and is generated by masking the bits of TIMG_T0_INT_RAW with TIMG_T0_INT_ENA.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TIMG_WDT_INT_ST : Reflects the status of each watchdog timer's interrupt and is generated by masking
     <a href="#page-302-1">
      the bits of
     </a>
     TIMG_WDT_INT_RAW with TIMG_WDT_INT_ENA.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-301-1">
      TIMG_T0_INT_ENA
     </a>
     : Us
     <a href="#page-301-0">
      ed to enable or mas
     </a>
     k the interrupt status bits of timers within the group.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-302-1">
      TIMG_WDT_INT_EN
     </a>
     A
     <a href="#page-301-1">
      : Used to e
     </a>
     nabl
     <a href="#page-301-0">
      e or mask the interrup
     </a>
     t status bits of watchdog timer within the group.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-301-0">
      TIMG_T0_INT_CLR
     </a>
     : Used to clear a timer's interrupt by setting its corresponding bit to 1. The timer's
     <a href="#page-301-0">
      corresponding bit in
     </a>
     TIMG_T0_INT_RAW and TIMG_T0_INT_ST will be cleared as a result. Note that a timer's interrupt must be cleared before the next interrupt occurs.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-302-0">
      TIMG_WDT_INT_CL
     </a>
     R : Used to clear a timer's interrupt by setting its corresponding bit to 1. The watchdog timer's co
     <a href="#page-301-1">
      rresponding bit in
     </a>
     TIMG
     <a href="#page-302-1">
      _WDT_INT_RAW
     </a>
     and TIMG_WDT_INT_ST will be cleared as a result. Note that a watchdog timer's interrupt must be cleared before the next interrupt occurs.
    </li>
   </ul>
  </p>
  <h1>
   11.3 Configuration and
   <a href="#page-301-1">
    Usage
   </a>
  </h1>
  <h1>
   <span id="page-291-0">
   </span>
   11.3.1 Timer as a Simple Clock
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-291-1">
     </span>
     1. Configure the time-base counter
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Select clock source by setting or clearing TIMG_T0_USE_XTAL field.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure the 16-bit prescaler by setting TIMG_T0_DIVIDER.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure the timer direction by setting or clearing
       <a href="#page-294-1">
        TIMG_T0_IN
       </a>
       CREASE.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set the timer's starting value by writing t
       <a href="#page-294-1">
        he starting value to
       </a>
       TIMG_T0_LOAD_LO and TIMG_T0_LOAD_HI, then reloading it into the timer by writing any value to TIMG_T0LOAD_REG.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Start the timer by setting TIMG_T0_EN.
    </li>
    <li block-type="ListItem">
     3. Get
     <a href="#page-296-1">
     </a>
     t
     <a href="#page-296-1">
      he timer's current v
     </a>
     alue.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write any value to TI
       <a href="#page-294-1">
        MG_T0UPDAT
       </a>
       E_REG to latch the timer's current value.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Wait until TIMG_T0UPDATE_REG is cleared by hardware.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Read the latched
       <a href="#page-295-0">
       </a>
       t
       <a href="#page-295-0">
        imer value from
       </a>
       TIMG_T0LO_REG and TIMG_T0HI_REG.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   11.3.2 Timer
   <a href="#page-295-0">
    as One-shot Ala
   </a>
   rm
  </h1>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <span id="page-291-2">
     </span>
     1. Configure the time-base counter follow
     <a href="#page-294-2">
      ing step 1 of Secti
     </a>
     on 1
     <a href="#page-295-1">
      1.3.1.
     </a>
    </li>
    <li block-type="ListItem">
     2. Configure the alarm.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure the alarm value by setting TIMG_T0ALARML
       <a href="#page-291-1">
        O_REG
       </a>
       and TIMG_T0ALARMHI_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Enable interrupt by setting TIMG_T0_INT_ENA.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Disable auto reload by clearing TIMG_T0_
     <a href="#page-295-2">
      AUTORELOAD.
     </a>
    </li>
    <li block-type="ListItem">
     4. Start the alarm by setting TIMG
     <a href="#page-301-0">
      _T0_ALARM_EN.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     5. Handle the alarm interrupt.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Clear the interrupt by setting the timer's corresponding bit in TIMG_T0_INT_CLR.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Disable the timer by clearing TIMG_T0_EN.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   11.3.3 Timer as Periodic Alarm
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-292-0">
     </span>
     1. Configure the time-base counter
     <a href="#page-294-1">
     </a>
     f
     <a href="#page-294-1">
      ollowing step
     </a>
     1 in Section 11.3.1.
    </li>
    <li block-type="ListItem">
     2. Configure the alarm following step 2 in Section 11.3.2.
    </li>
    <li block-type="ListItem">
     3. Enable auto reload by setting TIMG_T0_AUTORELOAD and
     <a href="#page-291-1">
     </a>
     c
     <a href="#page-291-1">
      onfig
     </a>
     ure the reload value via TIMG_T0_LOAD_LO and TIMG_T0_LOAD_HI.
    </li>
    <li block-type="ListItem">
     4. Start the alarm by setting TIMG_T0_ALARM_EN
     <a href="#page-291-2">
      .
     </a>
    </li>
    <li block-type="ListItem">
     5.
     <a href="#page-296-0">
      Handle the alarm int
     </a>
     erru
     <a href="#page-296-1">
      pt (repeat on each
     </a>
     <a href="#page-294-1">
     </a>
     <a href="#page-296-1">
      a
     </a>
     <a href="#page-294-1">
      larm iterat
     </a>
     ion).
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Clear the interrupt b
       <a href="#page-294-1">
        y setting the timer's co
       </a>
       rresponding bit in TIMG_T0_INT_CLR.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the next alarm requires a new alarm value and reload value (i.e. different alarm interval per iteration), then TIMG_T0ALARMLO_REG, TIMG_T0ALARMHI_REG, TIMG_T0_LOAD_LO, and TIMG_T0_LOAD_HI should be reconfigured as needed. Othe
       <a href="#page-302-0">
        rwise, the aforemen
       </a>
       tioned registers should remain unchanged.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Re-enable the
       <a href="#page-295-2">
        alarm by setting
       </a>
       TIMG_T0
       <a href="#page-295-3">
        _ALARM_EN.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     6. Stop
     <a href="#page-296-1">
      the timer (on final a
     </a>
     larm iteration).
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Clear the interrupt by setting th
       <a href="#page-294-1">
        e timer's correspondin
       </a>
       g bit in TIMG_T0_INT_CLR.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Disable the timer by clearing TIMG_T0_EN.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   11.3.4 RTC_SLOW_CLK Fr
   <a href="#page-294-1">
    equency C
   </a>
   alculation
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-292-1">
     </span>
     1. One-shot frequency calculation
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Select the clock whose frequency is to be calculated (clock source of RTC_SLOW_CLK) via TIMG_RTC_CALI_CLK_SEL, and configure the time of calculation via TIMG_RTC_CALI_MAX.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Select one-shot frequency calculation by clearing TIMG_RTC_CALI_START_CYCLING, and enable the two counters via TIMG_RTC_CALI_START.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Once
       <a href="#page-300-0">
        TIMG_RTC_CALI_RDY
       </a>
       becomes 1, read TIMG_RTC_CALI_VALUE
       <a href="#page-300-0">
        to get the value of
       </a>
       XTAL_CLK's counter, and calculate the frequency
       <a href="#page-300-0">
        of RTC_SLOW_CLK.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Periodic frequency calcul
     <a href="#page-300-0">
      ation
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Selec
       <a href="#page-300-0">
        t the clock whose freq
       </a>
       uency is to be c
       <a href="#page-300-1">
        alculated (clock source o
       </a>
       f RTC_SLOW_CLK) via TIMG_RTC_CALI_CLK_SEL, and configure the time of calculation via TIMG_RTC_CALI_MAX.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Select periodic frequency calculation by enabling TIMG_RTC_CALI_START_CYCLING.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       When
       <a href="#page-300-0">
        TIMG_RTC_CALI_CYC
       </a>
       LING_DATA_VLD is 1, TIMG_RTC_CALI_VALUE
       <a href="#page-300-0">
        is valid.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Timeout
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If the counter of RTC_SLOW_CLK cannot finish counting in
   <a href="#page-300-0">
    TIMG_RTC_CALI_TIMEOUT_RS
   </a>
   T_CNT cycles, TIMG_RTC_CALI_TIMEOUT
   <a href="#page-300-1">
    will be set to indicate
   </a>
   a tim
   <a href="#page-300-1">
    eout.
   </a>
  </p>
  <p block-type="Text">
   Espressif Systems 293
  </p>
  <h1>
   11.4 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-293-0">
   </span>
   The addresses in this section are relative to Timer Group base addresses (one for Timer Group 0 and another one for Timer Group 1) provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      one for Timer Group 1) provided in Table 3.3-3 in Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="7">
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      T0 control and configuration registers
      <br/>
      TIMG_T0CONFIG_REG
     </td>
     <td>
      Timer 0 configuration register
     </td>
     <td>
      0x0000
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      TIMG_T0LO_REG
     </td>
     <td>
      Timer 0 current value, low 32 bits
     </td>
     <td>
      0x0004
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      TIMG_T0HI_REG
     </td>
     <td>
      Timer 0 current value, high 22 bits
     </td>
     <td>
      0x0008
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      TIMG_T0UPDATE_REG
     </td>
     <td>
      Write
      <br/>
      to
      <br/>
      copy
      <br/>
      current
      <br/>
      timer
      <br/>
      value
     </td>
     <td>
      to
      <br/>
      0x000C
     </td>
     <td>
      R/W/SC
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      TIMGn_T0_(LO/HI)_REG
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TIMG_T0ALARMLO_REG
     </td>
     <td>
      Timer 0 alarm value, low 32 bits
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TIMG_T0ALARMHI_REG
     </td>
     <td>
      Timer 0 alarm value, high bits
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TIMG_T0LOADLO_REG
     </td>
     <td>
      Timer 0 reload value, low 32 bits
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TIMG_T0LOADHI_REG
     </td>
     <td>
      Timer 0 reload value, high 22 bits
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TIMG_T0LOAD_REG
     </td>
     <td>
      Write
      <br/>
      to
      <br/>
      reload
      <br/>
      timer
      <br/>
      from
     </td>
     <td>
      0x0020
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      TIMG_T0_(LOADLO/LOADHI)_REG
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      WDT control and configuration registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TIMG_WDTCONFIG0_REG
     </td>
     <td>
      Watchdog timer configuration register
     </td>
     <td>
      0x0048
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      TIMG_WDTCONFIG1_REG
     </td>
     <td>
      Watchdog timer prescaler register
     </td>
     <td>
      0x004C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      TIMG_WDTCONFIG2_REG
     </td>
     <td>
      Watchdog timer stage 0 timeout value
     </td>
     <td>
      0x0050
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TIMG_WDTCONFIG3_REG
      <br/>
      TIMG_WDTCONFIG4_REG
     </td>
     <td>
      Watchdog timer stage 1 timeout value
      <br/>
      Watchdog timer stage 2 timeout value
     </td>
     <td>
      0x0054
      <br/>
      0x0058
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TIMG_WDTCONFIG5_REG
     </td>
     <td>
      Watchdog timer stage 3 timeout value
     </td>
     <td>
      0x005C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TIMG_WDTFEED_REG
     </td>
     <td>
      Write to feed the watchdog timer
     </td>
     <td>
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td colspan="7">
      0x0060
      <br/>
      TIMG_WDTWPROTECT_REG
      <br/>
      Watchdog write protect register
      <br/>
      0x0064
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RTC frequency calculation control and configuration registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TIMG_RTCCALICFG_REG
     </td>
     <td>
      RTC
      <br/>
      frequency
      <br/>
      calculation
      <br/>
      configuration
     </td>
     <td>
      0x0068
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      register 0
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TIMG_RTCCALICFG1_REG
     </td>
     <td>
      RTC
      <br/>
      frequency
      <br/>
      calculation
      <br/>
      configuration
     </td>
     <td>
      0x006C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      register 1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TIMG_RTCCALICFG2_REG
     </td>
     <td>
      RTC
      <br/>
      frequency
      <br/>
      calculation
      <br/>
      configuration
     </td>
     <td>
      0x0080
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td colspan="8">
      register 2
     </td>
    </tr>
    <tr>
     <td>
      Interrupt registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TIMG_INT_ENA_TIMERS_REG
     </td>
     <td>
      Interrupt enable bits
     </td>
     <td>
      0x0070
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TIMG_INT_RAW_TIMERS_REG
     </td>
     <td>
      Raw interrupt status
     </td>
     <td>
      0x0074
     </td>
     <td>
      R/SS/WTC
     </td>
    </tr>
    <tr>
     <td>
      TIMG_INT_ST_TIMERS_REG
     </td>
     <td>
      Masked interrupt status
     </td>
     <td>
      0x0078
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="6">
      TIMG_INT_CLR_TIMERS_REG
      <br/>
      Interrupt clear bits
      <br/>
      0x007C
      <br/>
      WT
      <br/>
      Version register
     </td>
    </tr>
    <tr>
     <td>
      TIMG_NTIMERS_DATE_REG
     </td>
     <td>
      Timer version control register
     </td>
     <td>
      0x00F8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="6">
      Clock configuration registers
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   11.5 Registers
  </h1>
  <p block-type="Text">
   <span id="page-294-0">
   </span>
   The addresses in this section are relative to Timer Group base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <h4>
   Register 11.1. TIMG_T0CONFIG_REG (0x0000)
  </h4>
  <p>
   <span id="page-294-1">
   </span>
   <img src="_page_294_Figure_3.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     TIMG_T0_USE_XTAL 1: Use XTAL_CLK as the source clock of timer group. 0: Use APB_CLK as the source clock of timer group. (R/W)
    </li>
    <li block-type="ListItem">
     TIMG_T0_ALARM_EN When set, the alarm is enabled. This bit is automatically cleared once an alarm occurs. (R/W/SC)
    </li>
    <li block-type="ListItem">
     TIMG_T0_DIVIDER_RST When set, Timer 0 's clock divider counter will be reset. (WT)
    </li>
    <li block-type="ListItem">
     TIMG_T0_DIVIDER Timer 0 clock (T0_clk) prescaler value. (R/W)
    </li>
    <li block-type="ListItem">
     TIMG_T0_AUTORELOAD When set, Timer 0 auto-reload at alarm is enabled. (R/W)
    </li>
    <li block-type="ListItem">
     TIMG_T0_INCREASE When set, the Timer 0 time-base counter will increment every clock tick. When cleared, the Timer 0 time-base counter will decrement. (R/W)
    </li>
    <li block-type="ListItem">
     TIMG_T0_EN When set, the Timer 0 time-base counter is enabled. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 11.2. TIMG_T0LO_REG (0x0004)
  </h4>
  <p>
   <span id="page-294-2">
   </span>
   <img src="_page_294_Figure_12.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_LO After writing to TIMG_T0UPDATE_REG, the low 32 bits of the time-base counter of Timer 0 can be read here. (RO)
  </p>
  <h4>
   Register 11.3. TIMG_T0HI_REG (0x0008)
  </h4>
  <p>
   <span id="page-295-1">
   </span>
   <img src="_page_295_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_HI After writing to TIMG_T0UPDATE_REG, the high 22 bits of the time-base counter of Timer 0 can be read here. (RO)
  </p>
  <p>
   <img src="_page_295_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-295-0">
   </span>
   <img src="_page_295_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_UPDATE After writing 0 or 1 to TIMG_T0UPDATE_REG, the counter value is latched. (R/W/SC)
  </p>
  <p>
   <span id="page-295-2">
   </span>
   <img src="_page_295_Figure_6.jpeg"/>
  </p>
  <p>
   TIMG_T0_ALARM_LO Timer 0 alarm trigger time-base counter value, low 32 bits. (R/W)
  </p>
  <p>
   <span id="page-295-3">
   </span>
   <img src="_page_295_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_ALARM_HI Timer 0 alarm trigger time-base counter value, high 22 bits. (R/W)
  </p>
  <p>
   <img src="_page_296_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-296-0">
   </span>
   <img src="_page_296_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_LOAD_LO Low 32 bits of the value that a reload will load onto Timer 0 time-base counter. (R/W)
  </p>
  <p>
   <img src="_page_296_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-296-1">
   </span>
   <img src="_page_296_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_LOAD_HI High 22 bits of the value that a reload will load onto Timer 0 time-base counter. (R/W)
  </p>
  <p>
   <span id="page-296-2">
   </span>
   <img src="_page_296_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_LOAD Write any value to trigger a Timer 0 time-base counter reload. (WT)
  </p>
  <h4>
   Register 11.10. TIMG_WDTCONFIG0_REG (0x0048)
  </h4>
  <p>
   <span id="page-297-0">
   </span>
   <img src="_page_297_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_WDT_APPCPU_RESET_EN WDT reset CPU enable. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_PROCPU_RESET_EN WDT reset CPU enable. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_FLASHBOOT_MOD_EN When set, Flash boot protection is enabled. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_SYS_RESET_LENGTH System reset signal length selection. 0: 100 ns, 1: 200 ns, 2: 300 ns, 3: 400 ns, 4: 500 ns, 5: 800 ns, 6: 1.6
   <i>
    µ
   </i>
   s, 7: 3.2
   <i>
    µ
   </i>
   s. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_CPU_RESET_LENGTH CPU reset signal length selection. 0: 100 ns, 1: 200 ns, 2: 300 ns, 3: 400 ns, 4: 500 ns, 5: 800 ns, 6: 1.6
   <i>
    µ
   </i>
   s, 7: 3.2
   <i>
    µ
   </i>
   s. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_USE_XTAL Chooses WDT clock. 0: APB_CLK; 1:XTAL_CLK. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_CONF_UPDATE_EN Updates the WDT configuration registers. (WT)
  </p>
  <p block-type="Text">
   TIMG_WDT_STG3 Stage 3 configuration. 0: off, 1: interrupt, 2: reset CPU, 3: reset system. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_STG2 Stage 2 configuration. 0: off, 1: interrupt, 2: reset CPU, 3: reset system. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_STG1 Stage 1 configuration. 0: off, 1: interrupt, 2: reset CPU, 3: reset system. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_STG0 Stage 0 configuration. 0: off, 1: interrupt, 2: reset CPU, 3: reset system. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_EN When set, MWDT is enabled. (R/W)
  </p>
  <p>
   <span id="page-297-1">
   </span>
   <img src="_page_297_Figure_14.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_WDT_DIVCNT_RST When set, WDT 's clock divider counter will be reset. (WT)
  </p>
  <p block-type="Text">
   TIMG_WDT_CLK_PRESCALE MWDT clock prescaler value. MWDT clock period = MWDT's clock source period * TIMG_WDT_CLK_PRESCALE. (R/W)
  </p>
  <p>
   <span id="page-298-0">
   </span>
   <img src="_page_298_Figure_0.jpeg"/>
  </p>
  <p>
   TIMG_WDT_STG0_HOLD Stage 0 timeout value, in MWDT clock cycles. (R/W)
  </p>
  <p>
   <span id="page-298-1">
   </span>
   <img src="_page_298_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_WDT_STG1_HOLD Stage 1 timeout value, in MWDT clock cycles. (R/W)
  </p>
  <p>
   <span id="page-298-2">
   </span>
   <img src="_page_298_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_WDT_STG2_HOLD Stage 2 timeout value, in MWDT clock cycles. (R/W)
  </p>
  <p>
   <span id="page-299-0">
   </span>
   <img src="_page_299_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-299-2">
   </span>
   <span id="page-299-1">
   </span>
   <img src="_page_299_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_WDT_WKEY If the register contains a different value than its reset value, write protection is enabled. (R/W)
  </p>
  <h4>
   Register 11.18. TIMG_RTCCALICFG_REG (0x0068)
  </h4>
  <p>
   <span id="page-300-0">
   </span>
   <img src="_page_300_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_RTC_CALI_START_CYCLING Enables periodic frequency calculation. (R/W)
  </p>
  <p block-type="Text">
   TIMG_RTC_CALI_CLK_SEL 0: RC_SLOW_CLK; 1: RC_FAST_DIV_CLK; 2: XTAL32K_CLK. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     TIMG_RTC_CALI_RDY Marks the completion of one-shot frequency calculation. (RO)
    </li>
    <li block-type="ListItem">
     TIMG_RTC_CALI_MAX Configures the time to calculate the frequency of RTC_SLOW_CLK. Measurement unit: RTC_SLOW_CLK cycle. (R/W)
    </li>
    <li block-type="ListItem">
     TIMG_RTC_CALI_START Set this bit to enable one-shot frequency calculation. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 11.19. TIMG_RTCCALICFG1_REG (0x006C)
  </h4>
  <p>
   <span id="page-300-1">
   </span>
   <img src="_page_300_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_RTC_CALI_CYCLING_DATA_VLD Marks the completion of periodic frequency calculation. (RO)
  </p>
  <p block-type="Text">
   TIMG_RTC_CALI_VALUE When one-shot or periodic frequency calculation completes, read this value to calculate the frequency of RTC_SLOW_CLK. Measurement unit: XTAL_CLK cycle. (RO)
  </p>
  <h4>
   Register 11.20. TIMG_RTCCALICFG2_REG (0x0080)
  </h4>
  <p>
   <span id="page-301-2">
   </span>
   <img src="_page_301_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_RTC_CALI_TIMEOUT Indicates frequency calculation timeout. (RO)
  </p>
  <p block-type="Text">
   TIMG_RTC_CALI_TIMEOUT_RST_CNT Cycles to reset frequency calculation timeout. (R/W)
  </p>
  <p block-type="Text">
   TIMG_RTC_CALI_TIMEOUT_THRES Threshold value for the frequency calculation timer. If the timer's value exceeds this threshold, a timeout is triggered. (R/W)
  </p>
  <p block-type="Text">
   Register 11.21. TIMG_INT_ENA_TIMERS_REG (0x0070)
  </p>
  <p>
   <span id="page-301-0">
   </span>
   <img src="_page_301_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_INT_ENA The interrupt enable bit for the TIMG_T0_INT interrupt. (R/W)
  </p>
  <p block-type="Text">
   TIMG_WDT_INT_ENA The interrupt enable bit for the TIMG_WDT_INT interrupt. (R/W)
  </p>
  <h4>
   Register 11.22. TIMG_INT_RAW_TIMERS_REG (0x0074)
  </h4>
  <p>
   <span id="page-301-1">
   </span>
   <img src="_page_301_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_INT_RAW The raw interrupt status bit for the TIMG_T0_INT interrupt. (R/SS/WTC) TIMG_WDT_INT_RAW The raw interrupt status bit for the TIMG_WDT_INT interrupt. (R/SS/WTC)
  </p>
  <h4>
   Register 11.23. TIMG_INT_ST_TIMERS_REG (0x0078)
  </h4>
  <p>
   <span id="page-302-1">
   </span>
   <img src="_page_302_Figure_1.jpeg"/>
  </p>
  <p block-type="TextInlineMath">
   TIMG_WDT_INT_ST The masked interrupt status bit for the TIMG_WDT_INT interrupt. (RO)
  </p>
  <h4>
   Register 11.24. TIMG_INT_CLR_TIMERS_REG (0x007C)
  </h4>
  <p>
   <span id="page-302-0">
   </span>
   <img src="_page_302_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_T0_INT_CLR Set this bit to clear the TIMG_T0_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   TIMG_WDT_INT_CLR Set this bit to clear the TIMG_WDT_INT interrupt. (WT)
  </p>
  <h4>
   Register 11.25. TIMG_NTIMERS_DATE_REG (0x00F8)
  </h4>
  <p>
   <img src="_page_302_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   TIMG_NTIMGS_DATE Timer version control register (R/W)
  </p>
  <p block-type="Text">
   <span id="page-303-0">
   </span>
   TIMG_WDT_CLK_IS_ACTIVE enable WDT's clock (R/W)
  </p>
  <p block-type="Text">
   TIMG_TIMER_CLK_IS_ACTIVE enable Timer 0's clock (R/W)
  </p>
  <p block-type="Text">
   TIMG_CLK_EN Register clock gate signal. 0: The clock used by software to read and write registers is on only when there is software operation. 1: The clock used by software to read and write registers is always on. (R/W)
  </p>
  <h1>
   <span id="page-304-0">
   </span>
   Chapter 12
  </h1>
  <h1>
   Watchdog Timers (WDT)
  </h1>
  <h1>
   12.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-304-1">
   </span>
   Watchdog timers are hardware timers used to detect and recover from malfunctions. They must be periodically fed (reset) to prevent a timeout. A system/software that is behaving unexpectedly (e.g. is stuck in a software loop or in overdue events) will fail to feed the watchdog thus trigger a watchdog timeout. Therefore, watchdog timers are useful for detecting and handling erroneous system/software behavior.
  </p>
  <p block-type="Text">
   As shown in Figure 12.1-1, ESP32-C3 contains three digital watchdog timers: one in each of the two timer groups in Chapter 11
   <i>
    Timer Group (TIMG)
   </i>
   (called Main System Watchdog Timers, or MWDT) and one in the RTC Module (called the RTC Watchdog Timer, or RWDT). Each digital watchdog timer allows for four separately configurable stage
   <a href="#page-304-2">
    s and
   </a>
   each stage can be programmed to take one action upon expiry, unless the watchdog is fed or disabled.
   <a href="#page-287-0">
    MWDT supports three
   </a>
   timeout actions: interrupt, CPU reset, and core reset, while RWDT supports four timeout actions: interrupt, CPU reset, core reset, and system reset (see details in Section 12.2.2.2
   <i>
    Stages and Timeout Actions
   </i>
   ). A timeout value can be set for each stage individually.
  </p>
  <p block-type="Text">
   During the flash boot process, RWDT and the first MWDT in timergroup 0 are enabled automatically in order to detect and recover from booting errors.
  </p>
  <p block-type="Text">
   <span id="page-304-2">
   </span>
   <a href="#page-307-0">
    ESP32-C3 also has one analog watch
   </a>
   dog timer: Super watchdog (SWD). It is an ultra-low-power circuit in analog domain that helps to prevent the system from operating in a sub-optimal state and resets the system if required.
  </p>
  <p>
   <img src="_page_304_Figure_7.jpeg"/>
  </p>
  <p>
   Figure 12.1-1. Watchdog Timers Overview
  </p>
  <p block-type="Text">
   Note that while this chapter provides the functional descriptions of the watchdog timer's, their register descriptions are provided in Chapter 11
   <i>
    Timer Group (TIMG)
   </i>
   and Chapter 9
   <i>
    Low-power Management
   </i>
   .
  </p>
  <h1>
   12.2 Digital Watchd
   <a href="#page-287-0">
    og Timers
   </a>
  </h1>
  <h1>
   <span id="page-305-0">
   </span>
   12.2.1 Features
  </h1>
  <p block-type="Text">
   <span id="page-305-1">
   </span>
   Watchdog timers have the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Four stages, each with a programmable timeout value. Each stage can be configured and enabled/disabled separately
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Three timeout actions (interrupt, CPU reset, or core reset) for MWDT and four timeout actions (interrupt, CPU reset, core reset, or system reset) for RWDT upon expiry of each stage
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     32-bit expiry counter
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Write protection, to prevent RWDT and MWDT configuration from being altered inadvertently
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Flash boot protection
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If the boot process from an SPI flash does not complete within a predetermined period of time, the watchdog will reboot the entire main system.
  </p>
  <h1>
   12.2.2 Functional Description
  </h1>
  <p>
   <span id="page-306-1">
   </span>
   <img src="_page_306_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 12.2-1. Watchdog Timers in ESP32-C3
  </p>
  <p block-type="Text">
   Figure 12.2-1 shows the three watchdog timers in ESP32-C3 digital systems.
  </p>
  <h1>
   12.2.2.1 Clock Source and 32-Bit Counter
  </h1>
  <p block-type="Text">
   <span id="page-306-0">
   </span>
   At the
   <a href="#page-306-1">
    core o
   </a>
   f each watchdog timer is a 32-bit counter.
  </p>
  <p block-type="Text">
   MWDTs can select between the APB clock (APB_CLK) or external clock (XTAL_CLK) as its clock source by setting the TIMG_WDT_USE_XTAL field of the TIMG_WDTCONFIG0_REG register. The selected clock is switched on by setting TIMG_WDT_CLK_IS_ACTIVE field of the TIMG_REGCLK_REG register to 1 and switched off by setting it to 0. Then the selected clock is divided by a 16-bit configurable prescaler. The 16-bit prescaler for MWDTs
   <a href="#page-297-0">
    is configured via the
   </a>
   TIMG_WDT_C
   <a href="#page-297-0">
    LK_PRESCALE
   </a>
   field of TIMG_WDTCONFIG1_REG.When TIMG_WDT_DIVCNT_RST
   <a href="#page-303-0">
    field is set, the prescaler is
   </a>
   reset and
   <a href="#page-303-0">
    it can be re-configure
   </a>
   d at once.
  </p>
  <p block-type="Text">
   In contrast, the clock source of RWDT is derived directly from an RTC slow clock (the RTC slow clock source shown in Chapter 6
   <i>
    Reset and
    <a href="#page-297-1">
     Clock
    </a>
   </i>
   ).
  </p>
  <p block-type="Text">
   <a href="#page-297-1">
    MWDTs and RWDT are en
   </a>
   abled by setting the TIMG_WDT_EN and RTC_CNTL_WDT_EN fields respectively.
  </p>
  <p block-type="Text">
   Espressif Systems 307
  </p>
  <p block-type="Text">
   When enabled, the 32-bit counters of each watchdog will increment on each source clock cycle until the timeout value of the current stage is reached (i.e. expiry of the current stage). When this occurs, the current counter value is reset to zero and the next stage will become active. If a watchdog timer is fed by software, the timer will return to stage 0 and reset its counter value to zero. Software can feed a watchdog timer by writing any value to TIMG_WDTFEED_REG for MDWTs and RTC_CNTL_WDT_FEED for RWDT.
  </p>
  <h1>
   12.2.2.2 Stages and Timeout Actions
  </h1>
  <p block-type="Text">
   <span id="page-307-0">
   </span>
   Timer stages allow
   <a href="#page-299-1">
   </a>
   f
   <a href="#page-299-1">
    or a timer to have a se
   </a>
   ries of different
   <a href="#page-253-0">
    timeout values and cor
   </a>
   responding expiry action. When one stage expires, the expiry action is triggered, the counter value is reset to zero, and the next stage becomes active. MWDTs/ RWDT provide four stages (called stages 0 to 3). The watchdog timers will progress through each stage in a loop (i.e. from stage 0 to 3, then back to stage 0).
  </p>
  <p block-type="Text">
   Timeout values of each stage for MWDTs are configured in TIMG_WDTCONFIG
   <i>
    i
   </i>
   _REG (where
   <i>
    i
   </i>
   ranges from 2 to 5), whilst timeout values for RWDT are configured using RTC_CNTL_WDT_STG
   <i>
    j
   </i>
   _HOLD field (where
   <i>
    j
   </i>
   ranges from 0 to 3).
  </p>
  <p block-type="Text">
   Please note that the timeout value of stage 0 for RWDT (T
   <a href="#page-298-0">
    hold₀) is determined by th
   </a>
   e combination of the
  </p>
  <p block-type="Text">
   EFUSE_WDT_DELAY_SEL field of eFuse register EFUSE_RD_REPEAT_DATA1_REG and RTC_CNTL_WDT_STG0_HOLD. The relationship is as follows:
  </p>
  <h4>
   <i>
    T
    <a href="#page-251-1">
     hold
    </a>
   </i>
   <sup>
    0
   </sup>
   =
   <i>
    <a href="#page-121-1">
     RT C
    </a>
   </i>
   _
   <i>
    CNT L
   </i>
   _
   <i>
    W DT
   </i>
   _
   <i>
    ST G
   </i>
   0_
   <i>
    HOLD &lt;&lt;
   </i>
   (
   <i>
    <a href="#page-121-1">
     EF USE
    </a>
   </i>
   _
   <i>
    W DT
   </i>
   _
   <i>
    DELAY
   </i>
   _
   <i>
    SEL
   </i>
   + 1)
  </h4>
  <p block-type="Text">
   where
   <i>
    &lt;&lt;
   </i>
   is a left-shift operator.
  </p>
  <p block-type="Text">
   Upon the expiry of
   <a href="#page-251-1">
    each stage, one of the following expir
   </a>
   y acti
   <a href="#page-121-1">
    ons will be executed:
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Trigger an interrupt When the stage expires, an interrupt is triggered.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU reset  Reset a CPU core When the stage expires, the CPU core will be reset.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Core reset  Reset the main system
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When the stage expires, the main system (which includes MWDTs, CPU, and all peripherals) will be reset. The power management unit and RTC peripheral will not be reset.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     System reset  Reset the main system, power management unit and RTC peripheral When the stage expires the main system, power management unit and RTC peripheral (see details in Chapter 9
     <i>
      Low-power Management
     </i>
     ) will all be reset. This action is only available in RWDT.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Disabled
    </li>
   </ul>
  </p>
  <p block-type="Text">
   This stage will have no effects on the system.
  </p>
  <p block-type="Text">
   For MWDTs, t
   <a href="#page-218-0">
    he expiry action of all stages
   </a>
   is configured in TIMG_WDTCONFIG0_REG. Likewise for RWDT, the expiry action is configured in RTC_CNTL_WDTCONFIG0_REG.
  </p>
  <h2>
   12.2.2.3 Write Protection
  </h2>
  <p block-type="Text">
   <span id="page-307-1">
   </span>
   Watchdog timers are critical
   <a href="#page-251-0">
   </a>
   t
   <a href="#page-251-0">
    o detecting and handling errone
   </a>
   ous system/software behavior, thus should not be disabled easily (e.g. due to a misplaced register write). Therefore, MWDTs and RWDT incorporate a write
  </p>
  <p block-type="Text">
   protection mechanism that prevent the watchdogs from being disabled or tampered with due to an accidental write. The write protection mechanism is implemented using a write-key field for each timer (TIMG_WDT_WKEY for MWDT, RTC_CNTL_WDT_WKEY for RWDT). The value 0x50D83AA1 must be written to the watchdog timer's write-key field before any other register of the same watchdog timer can be changed. Any attempts to write to a watchdog timer's registers (other than the write-key field itself) whilst the write-key field's v
   <a href="#page-299-2">
    alue is not
   </a>
   0x50D83A
   <a href="#page-253-1">
    A1 will be ignored. The
   </a>
   recommended procedure for accessing a watchdog timer is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Disable the write protection by writing the value 0x50D83AA1 to the timer's write-key field.
    </li>
    <li block-type="ListItem">
     2. Make the required modification of the watchdog such as feeding or changing its configuration.
    </li>
    <li block-type="ListItem">
     3. Re-enable write protection by writing any value other than 0x50D83AA1 to the timer's write-key field.
    </li>
   </ul>
  </p>
  <h2>
   12.2.2.4 Flash Boot Protection
  </h2>
  <p block-type="Text">
   <span id="page-308-0">
   </span>
   During flash booting process, MWDT in timer group 0 (see Figure 11.1-1
   <i>
    Timer Units within Groups
   </i>
   ), as well as RWDT, are automatically enabled. Stage 0 for the enabled MWDT is automatically configured to reset the system upon expiry, known as core reset. Likewise, stage 0 for RWDT is configured to system reset, which resets the main system and RTC when it expires. After booting, TI
   <a href="#page-287-2">
    MG_WDT_FLASHBOOT_MOD_EN
   </a>
   and RTC_CNTL_WDT_FLASHBOOT_MOD_EN should be cleared to stop the flash boot protection procedure for both MWDT and RWDT respectively. After this, MWDT and RWDT can be configured by software.
  </p>
  <h1>
   12.3
   <a href="#page-251-0">
    Super Watchdog
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-308-1">
   </span>
   Super watchdog (SWD) is an ultra-low-power circuit in analog domain that helps to prevent the system from operating in a sub-optimal state and resets the system if required. SWD contains a watchdog circuit that needs to be fed for at least once during its timeout period, which is slightly less than one second. About 100 ms before watchdog timeout, it will also send out a WD_INTR signal as a request to remind the system to feed the watchdog.
  </p>
  <p block-type="Text">
   If the system doesn't respond to SWD feed request and watchdog finally times out, SWD will generate a system level signal SWD_RSTB to reset whole digital circuits on the chip.
  </p>
  <h1>
   12.3.1 Features
  </h1>
  <p block-type="Text">
   <span id="page-308-2">
   </span>
   SWD has the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Ultra-low power
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Interrupt to indicate that the SWD timeout period is close to expiring
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Various dedicated methods for software to feed SWD, which enables SWD to monitor the working state of the whole operating system
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-308-4">
   </span>
   <span id="page-308-3">
   </span>
   12.3.2 Super Watchdog Controller
  </h1>
  <p>
   <span id="page-309-3">
   </span>
   <img src="_page_309_Figure_1.jpeg"/>
  </p>
  <p>
   <img src="_page_309_Figure_2.jpeg"/>
  </p>
  <h1>
   12.3.2.2 Workflow
  </h1>
  <p block-type="Text">
   <span id="page-309-0">
   </span>
   In normal state:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SWD controller receives feed request from SWD.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SWD controller can send an interrupt to main CPU.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Main CPU can feed SWD directly by setting RTC_CNTL_SWD_FEED.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When trying to feed SWD, CPU needs to disable SWD controller's write protection by writing 0x8F1D312A to RTC_CNTL_SWD_WKEY. This prevents SWD from being fed by mistake when the system is operating in sub-optimal state.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If setting RTC_CNTL_SWD_AUTO_FEED_EN to 1, SWD controller can also feed SWD itself without any int
     <a href="#page-254-1">
      eraction with CPU.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   After reset:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Check R
     <a href="#page-254-0">
      TC_CNTL_RESET_CAUSE_PROCPU[
     </a>
     5:0] for the cause of CPU reset. If RTC_CNTL_RESET_CAUSE_PROCPU[5:0] == 0x12, it indicates that the cause is SWD reset.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set RTC_CNTL_SWD_RST_FLAG_CLR to clear the SWD reset flag.
    </li>
   </ul>
  </p>
  <h1>
   12.4
   <a href="#page-254-0">
    Interrupts
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-309-2">
   </span>
   <span id="page-309-1">
   </span>
   For watchdog timer interrupts, please refer to Section 11.2.6
   <i>
    Interrupts
   </i>
   in Chapter 11
   <i>
    Timer Group (TIMG)
   </i>
   .
  </p>
  <h1>
   12.5 Registers
  </h1>
  <p block-type="Text">
   MWDT registers are part of the timer submodule and are described in Section 11.4
   <i>
    Register Summary
   </i>
   in Chapter 11
   <i>
    Timer Group (TIMG)
   </i>
   . RWDT and SWD registers are part of the RTC submodule and are described in Section 9.7
   <i>
    Register Summary
   </i>
   in Chapter 9
   <i>
    Low-power Management
   </i>
   .
  </p>
  <h1>
   <span id="page-311-0">
   </span>
   XTAL32K Watchdog Timers (XTWDT)
  </h1>
  <h1>
   13.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-311-1">
   </span>
   The XTAL32K watchdog timer on ESP32-C3 is used to monitor the status of external crystal XTAL32K_CLK. This watchdog timer can detect the oscillation failure of XTAL32K_CLK, change the clock source of RTC, etc. When XTAL32K_CLK works as the clock source of RTC_SLOW_CLK (for clock description, see Chapter 6
   <i>
    Reset and Clock
   </i>
   ) and stops vibrating, the XTAL32K watchdog timer first switches to BACKUP32K_CLK derived from RC_SLOW_CLK and generates an interrupt (if the chip is in Light-sleep and Deep-sleep mode, the CPU will be woken up), and then switches back to XTAL32K_CLK after it is restarted by software.
  </p>
  <p>
   <span id="page-311-5">
   </span>
   <img src="_page_311_Figure_4.jpeg"/>
  </p>
  <p>
   Figure 13.1-1. XTAL32K Watchdog Timer
  </p>
  <h1>
   13.2 Features
  </h1>
  <h1>
   <span id="page-311-2">
   </span>
   13.2.1 Interrupt and Wake-Up
  </h1>
  <p block-type="Text">
   <span id="page-311-4">
   </span>
   <span id="page-311-3">
   </span>
   When the XTAL32K watchdog timer detects the oscillation failure of XTAL32K_CLK, an oscillation failure interrupt RTC_XTAL32K_DEAD_INT (for interrupt description, please refer to Chapter 9
   <i>
    Low-power Management
   </i>
   ) is generated. At this point, the CPU will be woken up if in Light-sleep and Deep-sleep mode.
  </p>
  <h1>
   13.2.2 BACKUP32K_CLK
  </h1>
  <p block-type="Text">
   Once the XTAL32K watchdog timer detects the oscillation failure of XTAL32K_CLK, it replaces XTAL32K_CLK with BACKUP32K_CLK (with a frequency of 32 kHz or so) derived from RC_SLOW_CLK as RTC_SLOW_CLK, so as to ensure proper functioning of the system.
  </p>
  <h1>
   13.3 Functional Description
  </h1>
  <h1>
   <span id="page-312-0">
   </span>
   13.3.1 Workflow
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-312-1">
     </span>
     1. The XTAL32K watchdog timer starts counting when RTC_CNTL_XTAL32K_WDT_EN is enabled. The counter based on RC_SLOW_CLK keeps counting until it detects the positive edge of XTAL_32K and is then cleared. When the counter reaches RTC_CNTL_XTAL32K_WDT_TIMEOUT, it generates an interrupt or a wake-up signal and is then reset.
    </li>
    <li block-type="ListItem">
     2. If RTC_CNTL_XTAL32K_AUTO_BACKUP is set and step 1 is finished, the XTAL32K watchdog timer will automatically enable BACKUP32K_CLK a
     <a href="#page-261-0">
      s the alternative clock source of RTC_
     </a>
     SLOW_CLK, to ensure the system's proper functioning and the accuracy of timers running on RTC_SLOW_CLK (e.g. RTC_TIMER). F
     <a href="#page-244-0">
      or information about clock frequency c
     </a>
     onfiguration, please refer to Section 13.3.2.
    </li>
    <li block-type="ListItem">
     3. Software restarts XTAL32K_CLK by turning its XPD (meaning no power-down) signal off and on again via the RTC_CNTL_XPD_XTAL_32K bit. Then, the XTAL32K watchdog timer switches back to XTAL32K_CLK as the clock source of RTC_SLOW_CLK by clearing RTC_CNTL_XTAL32K_W
     <a href="#page-312-2">
      DT_EN
     </a>
     (BACKUP32K_CLK_EN is also automatically cleared). If the chip is in Light-sleep and Deep-sleep mode, the XTAL32K watchdog timer will wake up the CPU to finish the above steps.
    </li>
   </ul>
  </p>
  <h1>
   13.3.2 BACKUP32K_CLK Working Principle
  </h1>
  <p block-type="Text">
   <span id="page-312-2">
   </span>
   Chips have different RC_SLOW_CLK frequencies due to production process variations. To ensure the accuracy of RTC_TIMER and other timers running on RTC_SLOW_CLK when BACKUP32K_CLK is at work, the divisor of BACKUP32K_CLK should be configured according to the actual frequency of RC_SLOW_CLK (see details in Chapter 9
   <i>
    Low-power Management
   </i>
   ) via the RTC_CNTL_XTAL32K_CLK_FACTOR_REG register. Each byte in this register corresponds to a divisor component (
   <i>
    x
   </i>
   <sup>
    0
   </sup>
   ~
   <i>
    x
   </i>
   7). BACKUP32K_CLK is divided by a fraction where the denominator is always 4, as calculated below.
  </p>
  <blockquote>
   <p block-type="TextInlineMath">
    <i>
     f
    </i>
    _
    <i>
     back
    </i>
    _
    <i>
     clk
    </i>
    /4 =
    <i>
     f
    </i>
    _
    <i>
     rc
    </i>
    _
    <i>
     slow
    </i>
    _
    <i>
     clk
    </i>
    /
    <i>
     S S
    </i>
    =
    <i>
     x
    </i>
    <sup>
     0
    </sup>
    +
    <i>
     x
    </i>
    <sup>
     1
    </sup>
    +
    <i>
     ...
    </i>
    +
    <i>
     x
    </i>
    <sup>
     7
    </sup>
   </p>
  </blockquote>
  <p block-type="Text">
   f_back_clk is the desired frequency of BACKUP32K_CLK, i.e. 32.768 kHz; f_rc_slow_clk is the actual frequency of RC_SLOW_CLK;
   <i>
    x
   </i>
   <sup>
    0
   </sup>
   ~
   <i>
    x
   </i>
   <sup>
    7
   </sup>
   correspond to the pulse width in high and low state of four BACKUP32K_CLK clock signals (unit: RC_SLOW_CLK clock cycle).
  </p>
  <h1>
   13.3.3 Configuring the Divisor Component of BACKUP32K_CLK
  </h1>
  <p block-type="Text">
   <span id="page-312-3">
   </span>
   Based on principles described in Section 13.3.2, configure the divisor component as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Calculate the sum of divisor components S according to the frequency of RC_SLOW_CLK and the desired frequency of BACKUP32K_CLK;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Calculate the integer part of divisor
     <i>
      N
     </i>
     =
     <i>
      f
     </i>
     _
     <i>
      rc
     </i>
     _
     <i>
      slow
     </i>
     _
     <i>
      clk
     </i>
     /
     <i>
      f
     </i>
     _
     <i>
      back
     </i>
     _
     <i>
      clk
     </i>
     ;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Calculate the integer part of divisor component
     <i>
      M
     </i>
     =
     <i>
      N
     </i>
     /2. The integer part of divisor N are separated into two parts because a divisor component corresponds to a pulse width in high or low state;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Calculate the number of divisor components that equal M (
     <i>
      x
      <sup>
       n
      </sup>
     </i>
     = M) and the number of divisor components that equal M + 1 (
     <i>
      x
      <sup>
       n
      </sup>
     </i>
     = M + 1) according to the value of M and S. (M + 1) is the fractional part of divisor component.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For example, if the frequency of RC_SLOW_CLK is 163 kHz, then
   <i>
    f
   </i>
   _
   <i>
    rc
   </i>
   _
   <i>
    slow
   </i>
   _
   <i>
    clk
   </i>
   = 163000,
  </p>
  <p block-type="TextInlineMath">
   <i>
    f
   </i>
   _
   <i>
    back
   </i>
   _
   <i>
    clk
   </i>
   = 32768,
   <i>
    S
   </i>
   = 20,
   <i>
    M
   </i>
   = 2, and
   <i>
    {x
   </i>
   0
   <i>
    , x
   </i>
   1
   <i>
    , x
   </i>
   2
   <i>
    , x
   </i>
   3
   <i>
    , x
   </i>
   4
   <i>
    , x
   </i>
   5
   <i>
    , x
   </i>
   6
   <i>
    , x
   </i>
   7
   <i>
    }
   </i>
   =
   <i>
    {
   </i>
   2
   <i>
    ,
   </i>
   3
   <i>
    ,
   </i>
   2
   <i>
    ,
   </i>
   3
   <i>
    ,
   </i>
   2
   <i>
    ,
   </i>
   3
   <i>
    ,
   </i>
   2
   <i>
    ,
   </i>
   3
   <i>
    }
   </i>
   . As a result, the frequency of BACKUP32K_CLK is 32.6 kHz.
  </p>
  <h1>
   <span id="page-314-2">
   </span>
   <span id="page-314-0">
   </span>
   Permission Control (PMS)
  </h1>
  <h1>
   14.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-314-1">
   </span>
   ESP32-C3 includes a Permission Controller (PMS), which allocates the hardware resources (memory and peripherals) to two isolated environments, thereby realizing the separation of privileged and unprivileged environments.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Privileged Environment:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Can access all peripherals and memories;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Performs all confidential operations, such as user authentication, secure communication, and data encryption and decryption, etc.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Unprivileged Environment:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Can access some peripherals and memories;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Performs other operations, such as user operation and different applications, etc.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Besides, ESP32-C3's RISC-V CPU also has a Physical Memory Protection (PMP) unit, which can be used by software to set memory access privileges (read, write, and execute permissions) for required memory regions. However, the PMP unit has some limitations:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Only supports up to 16 configurable PMP regions, which sometimes are not enough to fully support the access management requirement of ESP32-C3's rich peripherals and different types of memories.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Can only control CPU, not GDMA.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   To this, ESP32-C3 has specially implemented this Permission Controller to complete the Physical Memory Protection unit.
  </p>
  <p block-type="Text">
   ESP32-C3's completed workflow of permission check can be described below (also see Figure 14.1-1):
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Check PMP permission
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Pass: then continue and further check PMS permission
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Fail: throw an exception and will not further check PMS permission
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Check PMS permission
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Pass: access allowed
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Fail: trigger an interrupt
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_315_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 14.1-1. Permission Control Overview
  </p>
  <p block-type="Text">
   For details about PMP, please refer to Section 1.8.1 in Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   . For details about World Controller, please refer to Chapter 15
   <i>
    World Controller (WCL)
   </i>
   . This chapter only describes ESP32-C3's PMS mechanism.
  </p>
  <h1>
   14.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-315-0">
   </span>
   ESP32-C3's extended permission control mechanism supports:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Independent access management in a privileged environment and unprivileged environment
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Independent access management to internal memory, including
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       CPU access to internal memory
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       GDMA access to internal memory
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Independent access management to external memory, including
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       CPU to external memory via SPI1
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       CPU to external memory via Cache
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Independent access management to peripheral regions, including
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       CPU access to peripheral regions
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Interrupt upon unsupported access alignment
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Address splitting for more flexible access management
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Register locks to secure the integrity of access management related registers
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Interrupt upon unauthorized access
    </li>
   </ul>
  </p>
  <h1>
   14.3 Privileged Environment and Unprivileged Environment
  </h1>
  <p block-type="Text">
   <span id="page-315-1">
   </span>
   During PMS check, ESP32-C3 chip:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   When in the privileged environment: check the permission configuration registers for the privileged environment
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   When not in the unprivileged environment: check the permission configuration registers for the unprivileged environment
  </p>
  <p block-type="Text">
   Users can choose either of these two ways below to enter the chip into privileged environment:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     By configuring the world controller
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Switching to Secure world: entering the privileged environment
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Switching to Non-secure world: entering the unprivileged environment
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     By configuring the privileged level of the 32-bit RISC-V CPU:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Switching to Machine mode: entering the privileged environment
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Switching to User mode: entering the unprivileged environment
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Users can configure PMS_PRIVILEGE_MODE_SEL to choose between the above-mentioned two ways to enter the chip into privileged environment:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0 (Default): via configuring the world controller. See details in Chapter 15
     <i>
      World Controller (WCL)
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: via configuri
     <a href="#page-338-0">
      ng the CP's privileged level. S
     </a>
     ee details in Chapter 1
     <i>
      ESP-RISC-V CPU
     </i>
     .
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The following sections introduce how to configure the permission to differe
   <a href="#page-412-0">
    nt areas in the privileged
   </a>
   environment and the unprivileged environment.
  </p>
  <h1>
   14.4 Internal Memory
  </h1>
  <p block-type="Text">
   <span id="page-316-0">
   </span>
   ESP32-C3 has the following types of internal memory:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ROM: 384 KB in total, including 256 KB Internal ROM0 and 128 KB Internal ROM1
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SRAM: 400 KB in total, including 16 KB Internal SRAM0 and 384 KB Internal SRAM1
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RTC FAST Memory: 8 KB in total, which can be further split into two regions each with independent permission configuration
    </li>
   </ul>
  </p>
  <p block-type="Text">
   This section describes how to configure the permission to each type of ESP32-C3's internal memory.
  </p>
  <h1>
   14.4.1 ROM
  </h1>
  <p block-type="Text">
   <span id="page-316-1">
   </span>
   ESP32-C3's ROM can be accessed by CPU's instruction bus (IBUS) and data bus (DBUS) when configured. The ROM ranges accessible for IBUS and DBUS respectively are listed in Table 14.4-1.
  </p>
  <span id="page-316-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th rowspan="2">
      ROM
     </th>
     <th>
     </th>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      IBUS Address
     </th>
     <th>
     </th>
     <th>
      DBUS Address
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
    </tr>
    <tr>
     <td>
      Internal ROM0
     </td>
     <td>
      0x4000_0000
     </td>
     <td>
      0x4003_FFFF
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 14.4-1. ROM Address
  </h4>
  <p block-type="Text">
   ESP32-C3 uses the registers listed in Table 14.4-2 to configure the instruction execution (X), write (W) and read (R) accesses of CPU's IBUS and DBUS, in User mode and Machine mode. Note that access configuration to ROM0 and ROM1 cannot be configured separately:
  </p>
  <span id="page-317-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th colspan="6">
      Chapter 14
      <br/>
      Permission Control (PMS)
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
     </td>
     <td>
      Table 14.4-2. Access Configuration to ROM (ROM0 and ROM1)
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Bus
     </td>
     <td>
      Environment
     </td>
     <td>
      Configuration RegistersA
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Privileged
     </td>
     <td>
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_2_REG [20:18]B
     </td>
     <td>
      X/W/R
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 14.4-2. Access Configuration to ROM (ROM0 and ROM1)
  </h4>
  <p block-type="Text">
   A 1: with access; 0: wit
   <a href="#page-362-0">
    hout access
   </a>
  </p>
  <p block-type="Text">
   B For example, configu
   <a href="#page-367-0">
    ring this field to 0b101 indicates CPU's IBUS is granted ins
   </a>
   truction execution and read acce
   <a href="#page-367-0">
    sses but not write access to ROM in the unprivileged envir
   </a>
   onment.
  </p>
  <p block-type="Text">
   C For example, configuring this field to 0b01 indicates CPU's DBUS is granted read access but not write access to ROM in privileged environment.
  </p>
  <h1>
   14.4.2 SRAM
  </h1>
  <p block-type="Text">
   <span id="page-317-0">
   </span>
   ESP32-C3's SRAM can be accessed by CPU's instruction bus (IBUS) and data bus (DBUS) when configured. The SRAM address ranges accessible for IBUS and DBUS respectively are listed in Table 14.4-3.
  </p>
  <span id="page-317-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th rowspan="2">
     </th>
     <th>
     </th>
     <th>
      Table 14.4-3. SRAM Address
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      SRAM
     </td>
     <td>
      Block
     </td>
     <td>
     </td>
     <td>
      IBUS Address
     </td>
     <td>
     </td>
     <td>
      DBUS Address
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      Internal SRAM0
     </td>
     <td>
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
    </tr>
    <tr>
     <td>
      -
     </td>
     <td>
      0x4037_C000
     </td>
     <td>
      0x4037_FFFF
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      Block0
     </td>
     <td>
      0x4038_0000
     </td>
     <td>
      0x4039_FFFF
     </td>
     <td>
      0x3FC8_0000
     </td>
     <td>
      0x3FC9_FFFF
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 14.4-3. SRAM Address
  </h4>
  <p block-type="Text">
   Here, we will first introduce how to configure the permission to Internal SRAM0 and then Internal SRAM1.
  </p>
  <h1>
   14.4.2.1 Internal SRAM0 Access Configuration
  </h1>
  <p block-type="Text">
   <span id="page-317-1">
   </span>
   ESP32-C3's Internal SRAM0 can be allocated to either CPU or ICACHE.
  </p>
  <p block-type="Text">
   Users can configure PMS_INTERNAL_SRAM_USAGE_CPU_CACHE to allocate ESP32-C3's Internal SRAM0 to either CPU or ICACHE:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: CPU
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: ICACHE
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When the Internal SRAM0 is allocated to CPU, ESP32-C3 uses the registers listed in Table 14.4-4 to configure the instruction execution (X), write (W) and read (R) accesses of CPU's IBUS, in the privileged environment and the unprivileged environment:
  </p>
  <span id="page-318-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 14
     </th>
     <th>
      Permission Control (PMS)
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
     </td>
     <td>
      Table 14.4-4. Access Configuration to Internal SRAM0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Table 14.4-4. Access Configuration to Internal SRAM0
  </p>
  <p block-type="Text">
   A To access the Internal SRAM0, CPU must be configured with both the usage permission and respective access pe
   <a href="#page-363-0">
    rmission.
   </a>
  </p>
  <p block-type="Text">
   B 1: with access; 0: wit
   <a href="#page-362-0">
    hout access
   </a>
  </p>
  <p block-type="Text">
   C For example, configuring this field to 0b101 indicates CPU's IBUS is granted with instruction execution and read accesses but not write access to SRAM0 in the privileged environment.
  </p>
  <h1>
   14.4.2.2 Internal SRAM1 Access Configuration
  </h1>
  <p block-type="Text">
   <span id="page-318-0">
   </span>
   ESP32-C3's Internal SRAM1 includes Block0 ~ Block2 (see details in Table 14.4-3) and can be:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Accessed by CPU's DBUS, IBUS and GDMA at the same time
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Further split into up to 6 regions with independent access managem
     <a href="#page-317-3">
      ent for
     </a>
     more flexible permission control.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   ESP32-C3's Internal SRAM1 can be further split into up to 6 regions with 5 split lines. Users can configure different access to each region independently.
  </p>
  <p block-type="Text">
   To be more specific, the Internal SRAM1 can be first split into Instruction Region and Data Region by IRam0_DRam0_split_line:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Instruction Region:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Then the Instruction Region should be only configured to be accessed by IBUS;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       And can be further split into three split regions by IRam0_split_line_0 and IRam0_split_line_1.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data Region:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The Data Region should be only configured to be accessed by DBUS;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       And can be further split into three split regions by DRam0_split_line_0 and DRam0_split_line_1.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-318-2">
   </span>
   See illustration in Figure 14.4-1 and Table 14.4-5 below.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Internal SRAM 1
     </th>
     <th>
     </th>
     <th>
      <b>
       IBUS Permission DBUS Permission
      </b>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Instr_region_0
     </td>
     <td>
     </td>
     <td>
      IRam0 PMS 0
     </td>
     <td>
     </td>
     <td>
      IRam0 split line 1
     </td>
    </tr>
    <tr>
     <td>
      Instr region 1
     </td>
     <td>
      Block
      <sub>
       0
      </sub>
     </td>
     <td>
      Ram0 PMS 1
     </td>
     <td>
      DRam0 PMS 0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Instr region 2
     </td>
     <td>
      Block1
     </td>
     <td>
      IRam0 PMS 2
     </td>
     <td>
     </td>
     <td>
      IRam0 split line 0
      <br/>
      IRam0 DRam0 split li
     </td>
    </tr>
    <tr>
     <td>
      Data region 0
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      DRam0 PMS 1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Data_region_1
     </td>
     <td>
      Block2
     </td>
     <td>
      IRam0_PMS_3
     </td>
     <td>
      DRam0 PMS 2
     </td>
     <td>
      DRam0 split line 0
     </td>
    </tr>
    <tr>
     <td>
      Data region 2
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      DRam0 PMS 3
     </td>
     <td>
      DRam0 split line 1
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Figure 14.4-1. Split Lines for Internal SRAM1
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Table 14.4-5. Internal SRAM1 Split Regions
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <span id="page-319-1">
  </span>
  <span id="page-319-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
      Table 14.4-5. Internal SRAM1 Split Regions
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Instruction / Data Regions
     </td>
     <td colspan="2">
     </td>
    </tr>
    <tr>
     <td>
      Internal Memory A
     </td>
     <td>
      Split RegionsB
     </td>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td rowspan="3">
      Instruction Region
     </td>
     <td>
      Instr_Region_0
     </td>
    </tr>
    <tr>
     <td colspan="2">
      Instr_Region_1
     </td>
    </tr>
    <tr>
     <td>
      SRAM1
     </td>
     <td>
      Instr_Region_2
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   A Access to each split region can be configured independently. See details in Table 14.4-6 and 14.4-7. B See the description below on how to configure the split lines.
  </p>
  <h4>
   Internal SRAM1 Split Regions
  </h4>
  <p block-type="Text">
   ESP32-C3 allows users to configure the split lines to their needs with registers below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Split line to split the Instruction and Data regions (IRam0_DRam0_split_line):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE_CONSTRAIN_1_REG
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The first split line to further split the Instruction Region (IRam0_split_line_0):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-356-0">
        PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE_CONSTRAIN_2_REG
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The second split line to further split the Instruction Region (IRam0_split_line_1):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-357-0">
        PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE_CONSTRAIN_3_REG
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The first split line to further split the data Region (DRam0_split_line_0):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-358-0">
        PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE_CONSTRAIN_4_REG
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The second split line to further split the data Region (DRam0_split_line_1):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-359-0">
        PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE_CONSTRAIN_5_REG
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When configuring the split lines,
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. First
     <a href="#page-360-0">
      configure the block in which the split line is by:
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configuring the Category_
       <i>
        x
       </i>
       field for the block in which the split line is to 0x1 or 0x2 (no difference)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configuring the Category_0 ~ Category_
       <i>
        x-1
       </i>
       fields for all the preceding blocks to 0x0
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configuring the Category_
       <i>
        x+1
       </i>
       ~ Category_2 fields for all blocks afterwards to 0x3
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For example, assuming you want to configure the split line in Block1, then first configure the Category_1 field for Block1 to 0x1 or 0x2; configure the Category_0 for Block0 to 0x0; and configure the Category_2 for Block2 to 0x3 (see illustration in Figure 14.4-2). On the other hand, when reading 0x1 or 0x2 from Category_1, then you know the split line is in Block1.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     2. Configure the position of the split line inside the configured block by:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Writing the [16:9] bits of the actual ad
       <a href="#page-320-0">
        dress a
       </a>
       t which you want to split the memory to the SPLITADDR field for the block in which the split line is.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Note that the split address must be aligned to 512 bytes, meaning you can only write the integral multiples of 0x200 to the SPLITADDR field.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For example, if you want to split the instruction region at 0x3fc88000, then write the [16:9] bits of this address, which is 0b01000000, to SPLITADDR.
  </p>
  <p block-type="Text">
   <span id="page-320-0">
   </span>
   3. The split address applies to both IBUS and DBUS address. For example, DBUS address 0x3fc88000 and IBUS address 0x40388000 indicate the same location in SRAM1. The split address for both buses is [16:9].
  </p>
  <p>
   <img src="_page_320_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_320_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   Note the following points when configuring the split lines:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Position:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The split line that splitting the Instruction Region and Data Region can be configured anywhere inside Internal SRAM1.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The two split lines further splitting the Instruction Region into 3 split regions must stay inside the Instruction Region.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The two split lines further splitting the Data Region into 3 split regions must stay inside the Data Region.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Spilt lines can overlap with each other. For example,
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       When the two split lines inside the Data Region are not overlapping with each other, then the Data Region is split into 3 split regions
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       When the two split lines inside the Data Region are overlapping with each other, then the Data Region is only split into 2 split regions
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       When the two split lines inside the Data Region are not only overlapping with each other but also with the split line that splits the Data Region and the Instruction Region, then the Data Region is not split at all and only has one region.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Access Configuration
  </h4>
  <p block-type="Text">
   After configuring the split lines, users can then use the registers described in the Table 14.4-6 and Table 14.4-7 below to configure the access of CPU's IBUS, DBUS and GDMA peripherals, in the privileged environment and the unprivileged environment, to these split regions independently.
  </p>
  <h4>
   Table 14.4-6. Access Configuration to the Instruction Region of Internal SRAM1
  </h4>
  <span id="page-321-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th rowspan="2">
     </th>
     <th rowspan="2">
     </th>
     <th rowspan="2">
      Table 14.4-6. Access Configuration to the Instruction Region of Internal SRAM1
     </th>
     <th colspan="3">
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Buses
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Environment
     </td>
     <td>
      Configuration Registers
     </td>
     <td>
     </td>
     <td>
      Instruction Region
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      IBUS
     </td>
     <td>
     </td>
     <td>
     </td>
     <td colspan="3">
      instr_region_0
      <br/>
      instr_region_1
      <br/>
      instr_region_2
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Privileged
     </td>
     <td>
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_2_REG
     </td>
     <td colspan="3">
      [2:0]
      <br/>
      [5:3]
      <br/>
      [8:6]
     </td>
     <td>
      X/W/R
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Unprivileged
     </td>
     <td>
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_1_REG
     </td>
     <td colspan="2">
      [2:0]
      <br/>
      [5:3]
      <br/>
      [8:6]
     </td>
     <td>
      X/W/R
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   A Configure DBUS' access to the
   <a href="#page-367-0">
    Instruction Region. However, it's re
   </a>
   commended to configure these bits to 0.
  </p>
  <p block-type="Text">
   B Configure GDMA's access to the Instruction Region. However, it's recommended to configure these bits to 0.
  </p>
  <p block-type="Text">
   C GMDA doesn't support the priv
   <a href="#page-342-0">
    ileged environment and unprivileged
   </a>
   environment.
  </p>
  <p block-type="Text">
   D ESP32-C3 has 6 peripherals, including SPI2, UCHI0, I2S, AES, SHA, ADC, which can access Internal SRAM1 via GDMA. Each peripherals can be configured with different access to the Internal SRAM1 independently.
  </p>
  <h4>
   Table 14.4-7. Access Configuration to the Data Region of Internal SRAM1
  </h4>
  <span id="page-321-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th rowspan="2">
     </th>
     <th rowspan="2">
      Table 14.4-7. Access Configuration to the Data Region of Internal SRAM1
     </th>
     <th colspan="3">
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Buses
     </td>
     <td>
      Environment
     </td>
     <td>
      Configuration Registers
     </td>
     <td colspan="2">
      Data Region
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td colspan="3">
      data_region_0
      <br/>
      data_region_1
      <br/>
      data_region_2
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      IBUS
     </td>
     <td>
      Privileged
     </td>
     <td>
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_2_REG
     </td>
     <td>
     </td>
     <td>
      [11:9]A
     </td>
     <td>
     </td>
     <td>
      X/W/R
     </td>
    </tr>
    <tr>
     <td>
      Unprivileged
     </td>
     <td>
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_1_REG
     </td>
     <td>
     </td>
     <td>
      [11:9]A
     </td>
     <td>
     </td>
     <td>
      X/W/R
     </td>
    </tr>
    <tr>
     <td>
      DBUS
     </td>
     <td>
      Privileged
     </td>
     <td>
      PMS_Core_X_DRAM0_PMS_CONSTRAIN_1_REG
     </td>
     <td>
      [3:2]
     </td>
     <td>
      [5:4]
     </td>
     <td>
      [7:6]
     </td>
     <td>
      W/R
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   A Configure IBUS' access to the
   <a href="#page-367-0">
    Data Region. However, it's recomm
   </a>
   ended to configure these bits to 0.
  </p>
  <p block-type="Text">
   B GMDA doesn't support the privileged environment and the unprivileged environment.
  </p>
  <p block-type="Text">
   C ESP32-C3 has six peripherals,
   <a href="#page-342-0">
   </a>
   i
   <a href="#page-342-0">
    ncluding SPI2, UCHI0, I2S, AES, SHA
   </a>
   , ADC, which can access Internal SRAM1 via GDMA. Each peripheral can be configured with different access to the Internal SRAM1 independently.
  </p>
  <p block-type="Text">
   For details on how to configure the split lines, see Section 14.4.2.2.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   If enabled, the permission control module watches all the me
   <a href="#page-319-1">
    mory acce
   </a>
   ss and fires the panic handler if a permission violation is detected. This feature automatically splits the SRAM memory into data and instruction segments and sets Read/Execute permissions for the instruction part (below given splitting address) and Read/Write permissions for the data part (above the splitting address). The memory protection is effective on all access through the IRAM0 and DRAM0 buses. See details, see
   <i>
    ESP-IDF api-reference Memory protection
   </i>
   .
  </p>
  <h1>
   14.4.3 RTC FAST M
   <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v4.3-beta1/esp32c3/api-reference/kconfig.html#memory-protection">
    emory
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-321-3">
   </span>
   <span id="page-321-0">
   </span>
   ESP32-C3's RTC FAST Memory is 8 KB. See the address of RTC FAST Memory below:
  </p>
  <p block-type="Text">
   Table 14.4-8. RTC FAST Memory Address
  </p>
  <p>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      RTC FAST Memory | 0x5000_0000
     </th>
     <th>
     </th>
     <th>
      0x5000_1FFF
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   ESP32-C3's RTC FAST Memory can be further split into 2 regions. Each split region can be configured independently with different access.
  </p>
  <p block-type="Text">
   The Register for configuring the split line is described below:
  </p>
  <h4>
   Table 14.4-9. Split RTC FAST Memory into the Higher Region and the Lower Region
  </h4>
  <span id="page-322-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <th>
      Table 14.4-9. Split RTC FAST Memory into the Higher Region and the Lower Region
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 The word offset from the RTC FAST Memory base address should be used when configuring the split address. For example, if you want to split the RTC FAST Memory at 0x5000_1000, then write 0x400 (0x1000
   <i>
    &gt;&gt;
   </i>
   2) to this register.
  </p>
  <p block-type="Text">
   Access configuration for the higher and lower regions of the RTC FAST Memory is described below:
  </p>
  <h4>
   Table 14.4-10. Access Configuration to the RTC FAST Memory
  </h4>
  <span id="page-322-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th colspan="2">
      Table 14.4-10. Access Configuration to the RTC FAST Memory
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Bus
     </td>
     <td>
      RTC
     </td>
     <td>
     </td>
     <td>
      Configuration Registers
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      FAST Memory
     </td>
     <td>
      Privileged Environment
     </td>
     <td>
      Unprivileged Environment
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   A 1: with access; 0: without access
  </p>
  <p block-type="Text">
   B For example, configuring
   <a href="#page-382-0">
    this field to 0b101 indicates CP
   </a>
   U's perip
   <a href="#page-382-0">
    heral (PIF) bus is granted with th
   </a>
   e instruction execution and read accesse
   <a href="#page-382-0">
    s but not the read access in th
   </a>
   e privileg
   <a href="#page-382-0">
    ed environment to the higher re
   </a>
   gion of RTC FAST Memory.
  </p>
  <h1>
   14.5 Peripherals
  </h1>
  <h1>
   <span id="page-322-0">
   </span>
   14.5.1 Access Configuration
  </h1>
  <p block-type="Text">
   <span id="page-322-1">
   </span>
   ESP32-C3's CPU can be configured with different read (R) and write (W) accesses to most of its modules and peripherals independently, in the privileged environment and in the unprivileged environment, by configuring respective registers
  </p>
  <p block-type="Text">
   (PMS_CORE_0_PIF_PMS_CONSTRAN_
   <i>
    n
   </i>
   _REG).
  </p>
  <p block-type="Text">
   Notes on PMS_CORE_0_PIF_PMS_CONSTRAN_
   <i>
    n
   </i>
   _REG:
  </p>
  <p block-type="Text">
   <i>
    • n
   </i>
   can be 1 ~
   <a href="#page-372-0">
    8, in which 1
   </a>
   ~ 4 are for the privileged environment and 5 ~ 8 are for the unprivileged environment.
  </p>
  <p block-type="Text">
   For exam
   <a href="#page-372-0">
    ple, users can configure
   </a>
   PMS_CORE_0_PIF_PMS_CONSTRAIN_1_REG [1:0] to 0x2, meaning CPU is granted with read access but not write access in the privileged environment to UART0. In this case, CPU won't be able to modify the UART0's internal registers when in the privileged environment.
  </p>
  <span id="page-323-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 14.5-1. Access Configuration of the Peripherals
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Peripherals
     </td>
     <td>
      Privileged Environment
     </td>
     <td>
      Unprivileged Environment
     </td>
     <td>
      Bit3
     </td>
    </tr>
    <tr>
     <td>
      GDMA
     </td>
     <td>
      **_PMS_CONSTRAN_4_REG
     </td>
     <td>
      **_PMS_CONSTRAN_8_REG
     </td>
     <td>
      [7:6]
     </td>
    </tr>
    <tr>
     <td>
      eFuse Controller &amp; PMU1
     </td>
     <td>
      **_PMS_CONSTRAN_1_REG
     </td>
     <td>
      **_PMS_CONSTRAN_5_REG
     </td>
     <td>
      [15:14]
     </td>
    </tr>
    <tr>
     <td>
      IO_MUX
     </td>
     <td>
      **_PMS_CONSTRAN_1_REG
     </td>
     <td>
      **_PMS_CONSTRAN_5_REG
     </td>
     <td>
      [17:16]
     </td>
    </tr>
    <tr>
     <td>
      GPIO
     </td>
     <td>
      **_PMS_CONSTRAN_1_REG
     </td>
     <td>
      **_PMS_CONSTRAN_5_REG
     </td>
     <td>
      [7:6]
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Matrix
     </td>
     <td>
      **_PMS_CONSTRAN_4_REG
     </td>
     <td>
      **_PMS_CONSTRAN_8_REG
     </td>
     <td>
      [21:20]
     </td>
    </tr>
    <tr>
     <td>
      System Timer
      <br/>
      Timer Group 0
     </td>
     <td>
      **_PMS_CONSTRAN_2_REG
      <br/>
      **_PMS_CONSTRAN_2_REG
     </td>
     <td>
      **_PMS_CONSTRAN_6_REG
      <br/>
      **_PMS_CONSTRAN_6_REG
     </td>
     <td>
      [31:30]
      <br/>
      [27:26]
     </td>
    </tr>
    <tr>
     <td>
      Timer Group 1
     </td>
     <td>
      **_PMS_CONSTRAN_2_REG
     </td>
     <td>
      **_PMS_CONSTRAN_6_REG
     </td>
     <td>
      [29:28]
     </td>
    </tr>
    <tr>
     <td>
      System Registers
     </td>
     <td>
      **_PMS_CONSTRAN_4_REG
     </td>
     <td>
      **_PMS_CONSTRAN_8_REG
     </td>
     <td>
      [17:16]
     </td>
    </tr>
    <tr>
     <td>
      PMS Registers
     </td>
     <td>
      **_PMS_CONSTRAN_4_REG
     </td>
     <td>
      **_PMS_CONSTRAN_8_REG
     </td>
     <td>
      [19:18]
     </td>
    </tr>
    <tr>
     <td>
      Debug Assist
     </td>
     <td>
      **_PMS_CONSTRAN_4_REG
     </td>
     <td>
      **_PMS_CONSTRAN_8_REG
     </td>
     <td>
      [27:26]
     </td>
    </tr>
    <tr>
     <td>
      Accelerators2
     </td>
     <td>
      **_PMS_CONSTRAN_4_REG
     </td>
     <td>
      **_PMS_CONSTRAN_8_REG
     </td>
     <td>
      [5:4]
     </td>
    </tr>
    <tr>
     <td>
      Cache &amp; XTS_AES1
     </td>
     <td>
      **_PMS_CONSTRAN_4_REG
     </td>
     <td>
      **_PMS_CONSTRAN_8_REG
     </td>
     <td>
      [25:25]
     </td>
    </tr>
    <tr>
     <td>
      UART 0
     </td>
     <td>
      **_PMS_CONSTRAN_1_REG
     </td>
     <td>
      **_PMS_CONSTRAN_5_REG
     </td>
     <td>
      [1:0]
     </td>
    </tr>
    <tr>
     <td>
      UART 1
     </td>
     <td>
      **_PMS_CONSTRAN_1_REG
     </td>
     <td>
      **_PMS_CONSTRAN_5_REG
     </td>
     <td>
      [31:30]
     </td>
    </tr>
    <tr>
     <td>
      SPI 0
     </td>
     <td>
      **_PMS_CONSTRAN_1_REG
     </td>
     <td>
      **_PMS_CONSTRAN_5_REG
     </td>
     <td>
      [5:4]
     </td>
    </tr>
    <tr>
     <td>
      SPI 1
     </td>
     <td>
      **_PMS_CONSTRAN_1_REG
     </td>
     <td>
      **_PMS_CONSTRAN_5_REG
     </td>
     <td>
      [3:2]
     </td>
    </tr>
    <tr>
     <td>
      SPI 2
     </td>
     <td>
      **_PMS_CONSTRAN_3_REG
     </td>
     <td>
      **_PMS_CONSTRAN_7_REG
     </td>
     <td>
      [1:0]
     </td>
    </tr>
    <tr>
     <td>
      I2C 0
     </td>
     <td>
      **_PMS_CONSTRAN_2_REG
     </td>
     <td>
      **_PMS_CONSTRAN_6_REG
     </td>
     <td>
      [5:4]
     </td>
    </tr>
    <tr>
     <td>
      I2S
     </td>
     <td>
      **_PMS_CONSTRAN_3_REG
     </td>
     <td>
      **_PMS_CONSTRAN_7_REG
     </td>
     <td>
      [15:14]
     </td>
    </tr>
    <tr>
     <td>
      USB OTG Core
     </td>
     <td>
      **_PMS_CONSTRAN_4_REG
     </td>
     <td>
      **_PMS_CONSTRAN_8_REG
     </td>
     <td>
      [15:14]
     </td>
    </tr>
    <tr>
     <td>
      Two-wire Automotive Interface
      <br/>
      UHCI 0
     </td>
     <td>
      **_PMS_CONSTRAN_3_REG
      <br/>
      **_PMS_CONSTRAN_2_REG
     </td>
     <td>
      **_PMS_CONSTRAN_7_REG
      <br/>
      **_PMS_CONSTRAN_6_REG
     </td>
     <td>
      [11:10]
      <br/>
      [7:6]
     </td>
    </tr>
    <tr>
     <td>
      LED PWM Controller
     </td>
     <td>
      **_PMS_CONSTRAN_2_REG
     </td>
     <td>
      **_PMS_CONSTRAN_6_REG
     </td>
     <td>
      [17:16]
     </td>
    </tr>
    <tr>
     <td>
      Remote Control Peripheral
     </td>
     <td>
      **_PMS_CONSTRAN_2_REG
     </td>
     <td>
      **_PMS_CONSTRAN_6_REG
     </td>
     <td>
      [11:10]
     </td>
    </tr>
    <tr>
     <td>
      APB Controller
     </td>
     <td>
      **_PMS_CONSTRAN_3_REG
     </td>
     <td>
      **_PMS_CONSTRAN_7_REG
     </td>
     <td>
      [5:4]
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 14.5-1. Access Configuration of the Peripherals
  </p>
  <p block-type="Text">
   1 : This is shared by more than one peripherals.
  </p>
  <p block-type="Text">
   2 : Accelerators: AES, SHA, RSA, Digital Signatures, HMAC
  </p>
  <p block-type="Text">
   3 : Access: R/W
  </p>
  <p block-type="Text">
   4 : ** in the table replaces PMS_CORE_0_PIF.
  </p>
  <h1>
   14.5.2 Split Peripheral Regions into Split Regions
  </h1>
  <p block-type="Text">
   <span id="page-323-0">
   </span>
   On top of what described in the previous section, user can select one of ESP32-C3's peripheral region to split them into 7 regions (from Peri Region0 ~ Peri Region7) for more flexible permission control.
  </p>
  <p block-type="Text">
   For example, the registers for ESP32-C3's GDMA controller are allocated as:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3 sets of registers for each of 3 RX channel
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3 sets of registers for each of 3 TX channel
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1 set of registers for configuration
    </li>
   </ul>
  </p>
  <p block-type="Text">
   As seen above, GDMA's peripheral region is divided into 7 split regions (implemented in hardware), which can be configured with different permission independently, thus achieving independent permission control for each GDMA channel.
  </p>
  <p block-type="Text">
   Users can configure CPU's read (R) and write (W) accesses to a specific split region (Peri Region
   <i>
    n
   </i>
   ) in the privileged environment and in the unprivileged environment by configuring PMS_REGION_PMS_CONSTRAN_
   <i>
    n
   </i>
   _REG.
  </p>
  <p block-type="Text">
   Notes on PMS_REGION_PMS_CONSTRAN_
   <i>
    n
   </i>
   _REG:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      • n
     </i>
     can be 1~
     <a href="#page-384-0">
      10, in which
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-384-0">
        PMS_REGION_PMS_CONSTRAN_1_REG
       </a>
       is for configuring CPU's permission in the privileged environment.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       PMS_REGION_PMS_CONSTRAN_2_REG is for configuring CPU's permission in the unprivileged
       <a href="#page-384-0">
        environment.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       PMS_REGION_PMS_CONSTRAN_
       <i>
        n
       </i>
       _REG (
       <i>
        n
       </i>
       = 3~10) are used to configuring the starting addresses
       <a href="#page-385-0">
        for each Peri Regions. Note the starting a
       </a>
       ddress of each Peri Region is also the ending address of the previous Peri Region.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <span id="page-324-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th colspan="3">
      Table 14.5-2. Access Configuration of Peri Regions
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Peri Regions
     </td>
     <td>
      Starting Address
     </td>
     <td>
     </td>
     <td>
      Access Configuration
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configuration
     </td>
     <td>
      Privileged Environment
     </td>
     <td>
      Unprivileged Environment
     </td>
    </tr>
    <tr>
     <td>
      Peri Region0
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_3_REG
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_1_REG [1:0]
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_2_REG [1:0]
     </td>
    </tr>
    <tr>
     <td>
      Peri Region1
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_4_REG
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_1_REG [3:2]
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_2_REG [3:2]
     </td>
    </tr>
    <tr>
     <td>
      Peri Region2
      <br/>
      Peri Region3
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_5_REG
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_1_REG [5:4]
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_2_REG [5:4]
     </td>
    </tr>
    <tr>
     <td>
      Peri Region4
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_6_REG
      <br/>
      PMS_REGION_PMS_CONSTRAN_7_REG
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_1_REG [7:6]
      <br/>
      PMS_REGION_PMS_CONSTRAN_1_REG [9:8]
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAN_2_REG [7:6]
      <br/>
      PMS_REGION_PMS_CONSTRAN_2_REG [9:8]
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   <a href="#page-386-0">
    Table 14.5-2. Access C
   </a>
   onfiguration of Peri Regions
  </p>
  <p block-type="Text">
   * The ending ad
   <a href="#page-386-0">
    dress of Peri Region6 is con
   </a>
   figured by
   <a href="#page-384-0">
    PMS_REGION_PMS_
   </a>
   CONST
   <a href="#page-384-0">
    RAN_10_REG.
   </a>
  </p>
  <h1>
   14.6 External Memory
  </h1>
  <p block-type="Text">
   <span id="page-324-0">
   </span>
   ESP32-C3 can access the external memory via one of the two ways illustrated in Figure 14.6-1 below.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU via SPI1
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU via CACHE
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Where,
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Box 0 checks the SPI and Cache's access to external flash.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Box 1 checks CPU's access to Cache.
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-324-2">
   </span>
   <span id="page-324-1">
   </span>
   14.6.1 SPI and Cache's Access to External Flash
  </h1>
  <p>
   <span id="page-325-4">
   </span>
   <img src="_page_325_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 14.6-1. Two Ways to Access External Memory
  </p>
  <h1>
   14.6.1.1 Address
  </h1>
  <p block-type="Text">
   ESP32-C3's flash can be further split to achieve more flexible permission control. Each split region can be configured with different access independently.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Flash can be split into 4 regions, the length of each should be the integral multiples of 64 KB.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Also, the starting address of each region should also be aligned to 64 KB.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The following registers can be used to configure how the flash is split.
  </p>
  <h4>
   Table 14.6-1. Split the External Memory into Split Regions
  </h4>
  <span id="page-325-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="3">
      Table 14.6-1. Split the External Memory into Split Regions
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Split Regions
     </td>
     <td>
     </td>
     <td>
      Split Region Configuration3
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 Configuring this field with the actual address, which should be aligned to 64 KB.
  </p>
  <p block-type="Text">
   2 When configuring the length of Region
   <i>
    n
   </i>
   , note the total length of all flash regions should be no greater than 16 MB, res
   <a href="#page-403-0">
    pectively.
   </a>
  </p>
  <p block-type="Text">
   3 Each region cannot overlap with others.
  </p>
  <h2>
   14.6.1.2 Access Configuration
  </h2>
  <p block-type="Text">
   <span id="page-325-0">
   </span>
   Each split region for flash can be configured with different permission independently via the register described in the table below.
  </p>
  <h4>
   Table 14.6-2. Access Configuration of Flash Regions
  </h4>
  <span id="page-325-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <td>
      Split Regions
     </td>
     <td>
      Access Configuration
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configuration Register
     </td>
     <td>
      Cache
     </td>
     <td>
      SPI
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   A These bits are configured in order R/X. For example, configuring this field to 2'b10 indicates CACHE is granted with the read access but no instruction execution access to the
   <a href="#page-403-1">
   </a>
   F
   <a href="#page-403-1">
    lash Region
   </a>
   <i>
    n
   </i>
   .
  </p>
  <p block-type="Text">
   <span id="page-325-1">
   </span>
   B These bits are configured in order W/R. For example, configuring this field to 2'b01 indicates SPI is granted with the read access but no write access to the Flash Region
   <i>
    n
   </i>
   .
  </p>
  <h1>
   14.6.2 CPU's Access to Cache
  </h1>
  <p block-type="Text">
   ESP32-C3's CPU access Cache using a virtual address. The memory space in ESP32-C3 that is accessible for CPU to access Cache is called "Virtual Address Region", which can be seen in Table 14.6-3 below.
  </p>
  <span id="page-326-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="2">
      CPU to access Cache is called "Virtual Address Region", which can be seen in Table 14.6-3 below.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 14.6-3. Cache Virtual Address Region
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Bus Type
     </td>
     <td>
     </td>
     <td>
      Virtual Address Region
     </td>
     <td>
      Size (MB)
     </td>
     <td>
      Target
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 14.6-3. Cache Virtual Address Region
  </p>
  <h1>
   14.6.2.1 Split Regions
  </h1>
  <p block-type="Text">
   <span id="page-326-0">
   </span>
   Both ESP32-C3's DBUS and IBUS Cache virtual address regions can be further split into up to 4 regions. Users can configure different access to each region independently.
  </p>
  <h4>
   Table 14.6-4. Split IBUS Cache Virtual Address into 4 Regions
  </h4>
  <span id="page-326-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="3">
      Table 14.6-4. Split IBUS Cache Virtual Address into 4 Regions
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Split Regions1
     </td>
     <td>
     </td>
     <td>
      Split Region Configuration
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
    </tr>
    <tr>
     <td>
      IBUS Region0
     </td>
     <td>
      0x4200_0000
     </td>
     <td>
      EXTMEM_IBUS_PMS_TBL_BOUNDARY0_REG2
     </td>
    </tr>
    <tr>
     <td>
      IBUS Region1
     </td>
     <td>
      EXTMEM_IBUS_PMS_TBL_BOUNDARY0_REG2
     </td>
     <td>
      EXTMEM_IBUS_PMS_TBL_BOUNDARY1_REG2
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 The address ra
   <a href="#page-406-0">
    nge of each split region is [Starting Address, E
   </a>
   ndi
   <a href="#page-406-1">
    ng Address).
   </a>
  </p>
  <p block-type="Text">
   2 The address
   <a href="#page-406-1">
   </a>
   r
   <a href="#page-406-1">
    epresented is "0x4200_0000 + 0x1000 *
   </a>
   EXTM
   <a href="#page-407-0">
    EM_IBUS_PMS_TBL_BOUNDARY
   </a>
   <i>
    n
   </i>
   _REG". For example, when
   <a href="#page-407-0">
    EXTMEM_IBUS_PMS_TBL_BOUNDARY0_REG
   </a>
   is configured to 2, then the address range of IBUS Region0 is [0x4200_0000, 0x4200_2000).
  </p>
  <h4>
   <a href="#page-406-1">
    Table 14.6-5. Split DBUS Cache Virtual A
   </a>
   ddress into 4 Regions
  </h4>
  <span id="page-326-4">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="3">
      Table 14.6-5. Split DBUS Cache Virtual Address into 4 Regions
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Split Region Configuration
     </th>
    </tr>
    <tr>
     <td>
      Split Regions1
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
    </tr>
    <tr>
     <td>
      DBUS Region0
     </td>
     <td>
      0x3C00_0000
     </td>
     <td>
      EXTMEM_DBUS_PMS_TBL_BOUNDARY0_REG2
     </td>
    </tr>
    <tr>
     <td>
      DBUS Region1
     </td>
     <td>
      EXTMEM_DBUS_PMS_TBL_BOUNDARY0_REG2
     </td>
     <td>
      EXTMEM_DBUS_PMS_TBL_BOUNDARY1_REG2
     </td>
    </tr>
    <tr>
     <td>
      DBUS Region2
     </td>
     <td>
      EXTMEM_DBUS_PMS_TBL_BOUNDARY1_REG2
     </td>
     <td>
      EXTMEM_DBUS_PMS_TBL_BOUNDARY2_REG2
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 The address ra
   <a href="#page-409-0">
    nge of each split region is [Starting Address, End
   </a>
   ing
   <a href="#page-410-0">
    Address).
   </a>
  </p>
  <p block-type="Text">
   2 The address re
   <a href="#page-410-0">
    presented is "0x3C00_0000 + 0x0100 *
   </a>
   EXTMEM
   <a href="#page-410-1">
    _DBUS_PMS_TBL_BOUNDARY
   </a>
   <i>
    n
   </i>
   _REG". For example, when EXT
   <a href="#page-410-1">
    MEM_DBUS_PMS_TBL_BOUNDARY
   </a>
   <i>
    n
   </i>
   _REG is configured to 2, then the address range of IBUS Split Region0 is [0x3C00_0000, 0x3C00_0200]).
  </p>
  <h1>
   14.6.3 A
   <a href="#page-410-0">
    ccess Configuration
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-326-1">
   </span>
   Each Cache split region can be configured with different permission independently via registers described in Table 14.6-6 and Table 14.6-7 below.
  </p>
  <p block-type="Text">
   Espressif Systems 327
  </p>
  <h4>
   Table 14.6-6. Access Configuration of IBUS to Split Regions
  </h4>
  <span id="page-327-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="4">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Table 14.6-6. Access Configuration of IBUS to Split Regions
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Split Regions
     </td>
     <td>
      Access Configuration
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configuration Register
     </td>
     <td>
      PrivilegedA
     </td>
     <td>
      UnprivilegedA
     </td>
    </tr>
    <tr>
     <td>
      IBUS Region0C
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   A These bits are c
   <a href="#page-408-0">
    onfigured in order R/X.
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     B For example, co
     <a href="#page-408-0">
      nfiguring this field to 2'b10 indicates CP
     </a>
     U's IBUS is granted read access but no instruction execution access to IBUS region1 in the privileged environment.
    </li>
    <li block-type="ListItem">
     C IBUS is not allowed to access Region0 and Region3, thus cannot be configured. All attempts will be rejected.
    </li>
   </ul>
  </p>
  <h4>
   Table 14.6-7. Access Configuration of DBUS to Split Regions
  </h4>
  <span id="page-327-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th rowspan="2">
     </th>
     <th colspan="4">
      Table 14.6-7. Access Configuration of DBUS to Split Regions
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Split Regions
     </td>
     <td>
      Access Configuration
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configuration Register
     </td>
     <td>
      PrivilegedA
     </td>
     <td>
      UnprivilegedA
     </td>
    </tr>
    <tr>
     <td>
      DBUS Region0C
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      DBUS Region1
     </td>
     <td>
      EXTMEM_DBUS_PMS_TBL_ATTR_REG
     </td>
     <td>
      [0]B
     </td>
     <td>
      [1]
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   A Only the read ac
   <a href="#page-411-0">
    cess can be configured.
   </a>
  </p>
  <p block-type="Text">
   B For example, co
   <a href="#page-411-0">
    nfiguring this field to 1'b1 indicates CPU's
   </a>
   DBUS is granted read access to DBUS region1 in the privileged environment.
  </p>
  <p block-type="Text">
   C DBUS is not allowed to access Region0 and Region3, thus cannot be configured. All attempts will be rejected.
  </p>
  <h1>
   14.7 Unauthorized Access and Interrupts
  </h1>
  <p block-type="Text">
   <span id="page-327-0">
   </span>
   Any attempt to access ESP32-C3's slave device without configured permission is considered an unauthorized access and will be handled as described below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     This attempt will only be responded with default values, in particular,
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       All instruction execution or read attempts will be responded with 0 (for internal memory and peripheral) or 0xdeadbeaf (for external memory)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       All write attempts will fail
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     An interrupt will be triggered (when enabled). See details below.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-327-1">
   </span>
   Note that only the information of the first interrupt is logged. Therefore, it's advised to handle interrupt signals and clear interrupts in-time, so the information of the next interrupt can be logged correctly.
  </p>
  <h1>
   14.7.1 Interrupt upon Unauthorized IBUS Access
  </h1>
  <p block-type="Text">
   ESP32-C3 can be configured to trigger interrupts when IBUS attempts to access internal ROM and SRAM without configured permission and log the information about this unauthorized access. Note that, once this interrupt is enabled, it's enabled for all internal ROM and SRAM memory, and cannot be only enabled for a certain address field. This interrupt corresponds to the PMS_IBUS_VIO_INTR interrupt source described in Table 8.3-1 from Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   .
  </p>
  <span id="page-328-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="2">
     </td>
     <td colspan="2">
      Table 14.7-1. Interrupt Registers for Unauthorized IBUS Access
     </td>
    </tr>
    <tr>
     <td>
      Registers
     </td>
     <td>
      Bit
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td colspan="2">
     </td>
     <td colspan="2">
      Clears interrupt signal
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_0_IRAM0_PMS_MONITOR_1_REG
     </td>
     <td>
      [0]
      <br/>
      [1]
     </td>
     <td colspan="2">
      Enables interrupt
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td rowspan="2">
      [0]
      <br/>
      [1]
     </td>
     <td>
      Stores interrupt status of unauthorized IBUS access
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Stores the access direction. 1: write; 0: read.
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_0_IRAM0_PMS_MONITOR_2_REG
     </td>
     <td rowspan="3">
      [2]
     </td>
     <td>
      Stores the instruction direction. 1: load/store; 0:
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      instruction execution.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Stores the privileged mode the CPU was in when the
     </td>
    </tr>
    <tr>
     <td colspan="2" rowspan="2">
     </td>
     <td>
      unauthorized IBUS access happened. 0b01: privileged
     </td>
    </tr>
    <tr>
     <td>
      environment; 0b10: unprivileged environment
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 14.7-1. Interrupt Registers for Unauthorized IBUS Access
  </h4>
  <h1>
   14.7.2 Interrupt upon Unauthorized DBUS Access
  </h1>
  <p block-type="Text">
   <span id="page-328-0">
   </span>
   ESP32-C3 can be configured to trigger interrupts when DBUS attempts to access internal ROM and SRAM without configured permission and log the information about this unauthorized access. Note that, once this interrupt is enabled, it's enabled for all internal ROM and SRAM memory, and cannot be only enabled for a certain address field. This interrupt corresponds to the PMS_DBUS_VIO_INTR interrupt source described in Table 8.3-1 from Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   .
  </p>
  <span id="page-328-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 14.7-2. Interrupt Registers for Unauthorized DBUS Access
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Registers
     </td>
     <td>
      Bit
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      [0]
     </td>
     <td>
      Clears interrupt signal
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      PMS_CORE_0_DRAM0_PMS_MONITOR_1_REG
      <br/>
      PMS_CORE_0_DRAM0_PMS_MONITOR_2_REG
     </td>
     <td>
      [1]
     </td>
     <td>
      Enables interrupt
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      [0]
      <br/>
      [1]
     </td>
     <td>
      Stores interrupt status of unauthorized DBUS access
     </td>
    </tr>
    <tr>
     <td>
      Flags atomic access. 1: atomic access; 0: not atomic
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      access.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      Stores the privileged mode the CPU was in when the
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [3:2]
     </td>
     <td>
      unauthorized DBUS access happened. 0b01: privileged
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      environment; 0b10: unprivileged environment
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [25:4]
     </td>
     <td>
      Stores the address that CPU's DBUS was trying to access
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      PMS_CORE_0_DRAM0_PMS_MONITOR_3_REG
     </td>
     <td>
      [0]
     </td>
     <td>
      unauthorized.
      <br/>
      Stores the access direction. 1: write; 0: read.
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      [25:4]
     </td>
     <td>
      Stores the byte information of the unauthorized DBUS
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      access.
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 14.7-2. Interrupt Registers for Unauthorized DBUS Access
  </p>
  <h1>
   14.7.3 Interrupt upon Unauthorized Access to External Memory
  </h1>
  <p block-type="Text">
   ESP32-C3 can be configured to trigger Interrupt upon unauthorized access to external memory, and log the information about this unauthorized access. This interrupt corresponds to the SPI_MEM_REJECT_INTR interrupt source described in Table 8.3-1 from Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Table 14.7-3. Interrupt Registers for Unauthorized Access to External Memory
     </th>
    </tr>
   </tbody>
  </table>
  <span id="page-329-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      interrupt source described in Table 8.3-1 from Chapter 8 Interrupt Matrix (INTERRUPT).
     </th>
    </tr>
    <tr>
     <td rowspan="7">
      Registers
      <br/>
      SYSCON_SPI_MEM_PMS_CTRL_REG
     </td>
     <td>
     </td>
     <td>
      Table 14.7-3. Interrupt Registers for Unauthorized Access to External Memory
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Bit
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      [0]
      <br/>
      [1]
     </td>
     <td>
      Stores exception signal
      <br/>
      Clears exception signal and logged information
     </td>
    </tr>
    <tr>
     <td>
      [2]
     </td>
     <td>
      Indicates unauthorized instruction execution
     </td>
    </tr>
    <tr>
     <td>
      [3]
     </td>
     <td>
      Indicates unauthorized read
     </td>
    </tr>
    <tr>
     <td>
      [4]
     </td>
     <td>
      Indicates unauthorized write
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   14.7.4 Interrupt upon Unauthorized Access to Internal Memory via GDMA
  </h1>
  <p block-type="Text">
   <span id="page-329-0">
   </span>
   ESP32-C3 can be configured to trigger Interrupt upon unauthorized access to internal memory via GDMA, and log the information about this unauthorized access. This interrupt corresponds to the PMS_DMA_VIO_INTR interrupt source described in Table 8.3-1 from Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   .
  </p>
  <span id="page-329-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 14.7-4. Interrupt Registers for Unauthorized Access to Internal Memory via GDMA
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Registers
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Bit
      <br/>
      [0]
     </td>
     <td>
      Description
      <br/>
      Clears interrupt signal
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_PMS_MONITOR_1_REG
     </td>
     <td>
      [1]
     </td>
     <td>
      Enables interrupt
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [0]
     </td>
     <td>
      Stores interrupt signal
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_PMS_MONITOR_2_REG
     </td>
     <td>
     </td>
     <td>
      Stores the privileged mode the CPU was in when the
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [2:1]
     </td>
     <td>
      unauthorized access happened. 0b01: privileged
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td rowspan="2">
     </td>
     <td>
      environment; 0b10: unprivileged environment
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Stores the address that GDMA was trying to access
     </td>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
      [24:3]
     </td>
     <td>
      unauthorized
     </td>
    </tr>
    <tr>
     <td>
      [0]
     </td>
     <td>
      Stores the access direction. 1: write; 0: read
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 14.7-4. Interrupt Registers for Unauthori
   <a href="#page-203-0">
    zed A
   </a>
   ccess to Inte
   <a href="#page-201-0">
    rnal Memory via G
   </a>
   DMA
  </h4>
  <p block-type="Text">
   F
   <a href="#page-394-0">
    or information about Interrupt upon unauthorize
   </a>
   d access to external memory via GDMA, please refer to Chapter 2
   <i>
    GDMA Controller (GDMA)
   </i>
   .
  </p>
  <h1>
   14.7.5 Interrupt upon Unauthorized peripheral bus (PIF) Access
  </h1>
  <p block-type="Text">
   <span id="page-329-1">
   </span>
   ESP32-
   <a href="#page-59-0">
    C3 can be configured to trig
   </a>
   ger interrupts when PIF attempts to access RTC FAST memory and peripheral regions without configured permission, and log the information about this unauthorized access. Note that, once this interrupt is enabled, it's enabled for all RTC FAST memory and peripheral regions, and
  </p>
  <p block-type="Text">
   cannot be only enabled for a certain address field. This interrupt corresponds to the PMS_PERI_VIO_INTR interrupt source described in Table 8.3-1 from Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   .
  </p>
  <span id="page-330-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      interrupt source described in Table 8.3-1 from Chapter 8 Interrupt Matrix (INTERRUPT).
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="2">
     </td>
     <td>
     </td>
     <td>
      Table 14.7-5. Interrupt Registers for Unauthorized PIF Access
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Registers
     </td>
     <td>
      Bit
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_0_PIF_PMS_MONITOR_1_REG
     </td>
     <td>
      [1]
     </td>
     <td>
      Enables interrupt
     </td>
    </tr>
    <tr>
     <td rowspan="6">
      PMS_CORE_0_PIF_PMS_MONITOR_2_REG
     </td>
     <td>
      [0]
     </td>
     <td>
      Clears interrupt signal and logged information
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Stores the privileged mode the CPU was in when the
      <br/>
      unauthorized PIF access happened. 0b01: privileged
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      [7:6]
      <br/>
      [5]
     </td>
     <td>
      environment; 0b10: unprivileged environment
     </td>
    </tr>
    <tr>
     <td>
      Stores the access direction. 1: write; 0: read
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Stores the data type of unauthorized access. 0: byte; 1:
     </td>
    </tr>
    <tr>
     <td>
      [4:2]
     </td>
     <td>
      half-word; 2: word
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [1]
     </td>
     <td>
      Stores the access type. 0: instruction; 1: data
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 14.7-5. Interrupt Registers for Unauthorized PIF Access
  </h4>
  <p block-type="Text">
   In particular, ESP32-C3 can also be configured to check the access alignment when PIF attempts to access t
   <a href="#page-399-0">
    he peripheral regions and trigger Interrupt up
   </a>
   on unauthorized alignment. See the detailed description in the following section.
  </p>
  <h1>
   14.7.6 Interrupt upon Unauthorized PIF Access Alignment
  </h1>
  <p block-type="Text">
   <span id="page-330-0">
   </span>
   Access to all of ESP32-C3's modules/peripherals is word aligned.
  </p>
  <p block-type="Text">
   ESP32-C3 can be configured to check the access alignment to all modules/peripherals, and trigger Interrupt upon non-word aligned access.
  </p>
  <p block-type="Text">
   This interrupt corresponds to the PMS_PERI_VIO_SIZE_INTR interrupt source described in Table 8.3-1 from Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   .
  </p>
  <p block-type="Text">
   Note that CPU can convert some non-word aligned access to word aligned access, thus avoiding triggering alignment interrupt.
  </p>
  <p block-type="Text">
   Table 14
   <a href="#page-201-0">
    .7-
   </a>
   6
   <a href="#page-201-0">
    below lists all the possible a
   </a>
   ccess alignments and their results (when the interrupt is enabled), in which:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     INTR: interrupt
    </li>
    <li block-type="ListItem">
     <span id="page-330-2">
     </span>
     <i>
      •
      <a href="#page-330-2">
       √
      </a>
     </i>
     : access succeeds and no interrupt.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Table 14.7-6. All Possible Access Alignment and their Results
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Accessed Address
     </td>
     <td>
      Access Alignment
     </td>
     <td>
      Read
      <br/>
      √
     </td>
     <td>
      Write
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Byte aligned
     </td>
     <td>
      √
     </td>
     <td>
      INTR
     </td>
    </tr>
    <tr>
     <td>
      0x0
     </td>
     <td>
      Half-word aligned
     </td>
     <td>
      √
     </td>
     <td>
      INTR
      <br/>
      √
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Word aligned
      <br/>
      Byte aligned
     </td>
     <td>
      √
     </td>
     <td>
      INTR
     </td>
    </tr>
    <tr>
     <td>
      0x1
     </td>
     <td>
      Half-word aligned
     </td>
     <td>
      √
     </td>
     <td>
      INTR
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      Accessed Address
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Access Alignment
     </td>
     <td>
      Read
      <br/>
      √
     </td>
     <td>
      Write
     </td>
    </tr>
    <tr>
     <td>
      Word aligned
     </td>
     <td>
      √
     </td>
     <td>
      INTR
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      0x2
     </td>
     <td>
      Byte aligned
     </td>
     <td>
      √
     </td>
     <td>
      INTR
     </td>
    </tr>
    <tr>
     <td>
      Half-word aligned
     </td>
     <td>
      √
     </td>
     <td>
      INTR
     </td>
    </tr>
    <tr>
     <td>
      Word aligned
     </td>
     <td>
     </td>
     <td>
      INTR
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 14.7-7. Interrupt Registers for Unauthorized Access Alignment
  </h4>
  <span id="page-331-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Registers
     </td>
     <td>
     </td>
     <td>
      Table 14.7-7. Interrupt Registers for Unauthorized Access Alignment
     </td>
    </tr>
    <tr>
     <td>
      Bit
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      [1]
     </td>
     <td>
      Enables interrupt
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_0_PIF_PMS_MONITOR_4_REG
     </td>
     <td>
      [0]
     </td>
     <td>
      Clears interrupt signal and logged information
     </td>
    </tr>
    <tr>
     <td rowspan="4">
      PMS_CORE_0_PIF_PMS_MONITOR_5_REG
     </td>
     <td>
     </td>
     <td>
      Stores the privileged mode the CPU was in when the
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      [4:3]
     </td>
     <td>
      unauthorized access happened. 0b01: privileged
     </td>
    </tr>
    <tr>
     <td>
      environment; 0b10: unprivileged environment
     </td>
    </tr>
    <tr>
     <td>
      [2:1]
     </td>
     <td colspan="2">
      Stores the unauthorized access type. 0: byte aligned; 1:
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      half-word aligned; 2: word aligned
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   14.8
   <a href="#page-401-0">
    Register Locks
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-331-0">
   </span>
   All ESP32-C3's permission control related registers can be locked by respective lock registers. When the lock registers are configured to 1, these registers themselves and their related permission control registers are all protected from modification until the next CPU reset.
  </p>
  <p block-type="Text">
   Note that there isn't a one-to-one correspondence between the lock registers and permission control registers. See details in Table 14.8-1.
  </p>
  <span id="page-331-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th colspan="3">
      Lock Registers
      <br/>
      Related Permission Control Registers
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Lock privileged Mode Configuration
      <br/>
      PMS_PRIVILEGE_MODE_SEL_LOCK_REG
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      PMS_PRIVILEGE_MODE_SEL_LOCK_REG
     </td>
    </tr>
    <tr>
     <th colspan="3">
      PMS_PRIVILEGE_MODE_SEL_REG
     </th>
    </tr>
    <tr>
     <td rowspan="3">
      Lock Internal SRAM Usuage and Access Configuration
      <br/>
      PMS_INTERNAL_SRAM_USAGE_0_REG
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      PMS_INTERNAL_SRAM_USAGE_0_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_INTERNAL_SRAM_USAGE_1_REG
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_0_REG
     </td>
     <td>
      PMS_INTERNAL_SRAM_USAGE_4_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_0_REG
      <br/>
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_1_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_X_IRAM0_PMS_CONSTRAIN_2_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 14.8-1. Lock Registers and Related Permission Control Registers
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   PMS_CORE_
   <i>
    m
   </i>
   <a href="#page-361-0">
    _IRAM0_PMS_MONITOR_0_REG
   </a>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 14
      <br/>
      Permission Control (PMS)
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Lock Registers
     </td>
     <td colspan="3">
     </td>
    </tr>
    <tr>
     <td>
      Related Permission Control Registers
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_CORE_m_IRAM0_PMS_MONITOR_1_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_CORE_X_DRAM0_PMS_CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_X_DRAM0_PMS_CONSTRAIN_0_REG
     </td>
     <td>
      PMS_CORE_X_DRAM0_PMS_CONSTRAIN_1_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_m_DRAM0_PMS_MONITOR_0_REG
     </td>
     <td>
      PMS_CORE_m_DRAM0_PMS_MONITOR_0_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="4">
      PMS_CORE_m_DRAM0_PMS_MONITOR_1_REG
     </td>
    </tr>
    <tr>
     <td>
      Lock SRAM Split Lines Configuration
     </td>
     <td colspan="4">
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="4">
      PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE_
     </td>
     <td>
      _CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
      CONSTRAIN_0_REG
     </td>
     <td colspan="3">
      PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      _CONSTRAIN_n_REG (n: 1 - 5)
     </td>
    </tr>
    <tr>
     <td>
      Lock Peripherals Access Configuration
     </td>
     <td>
      PMS_CORE_m_PIF_PMS_CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_m_PIF_PMS_CONSTRAIN_0_REG
     </td>
     <td>
      PMS_CORE_m_PIF_PMS_CONSTRAIN_n_REG (n: 1 - 14)
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_REGION_PMS_CONSTRAIN_0_REG
     </td>
     <td>
      PMS_REGION_PMS_CONSTRAIN_n_REG (n: 1 - 14)
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_CORE_m_PIF_PMS_CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_CORE_m_PIF_PMS_MONITOR_0_REG
     </td>
     <td>
      PMS_CORE_m_PIF_PMS_MONITOR_1_REG (n: 1 - 6)
     </td>
    </tr>
    <tr>
     <td>
      Lock Peripherals Access Configuration to Internal SRAM via GDMA
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_DMA_APBPERI_SPI2_PMS_CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_SPI2_PMS_CONSTRAIN_0_REG
     </td>
     <td>
      PMS_DMA_APBPERI_SPI2_PMS_CONSTRAIN_1_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_UCHI0_PMS_CONSTRAIN_0
     </td>
     <td>
      PMS_DMA_APBPERI_UCHI0_PMS_CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
      _REG
     </td>
     <td>
      PMS_DMA_APBPERI_UCHI0_PMS_CONSTRAIN_1_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_I2S0_PMS_CONSTRAIN_0_REG
     </td>
     <td>
      PMS_DMA_APBPERI_I2S0_PMS_CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_DMA_APBPERI_I2S0_PMS_CONSTRAIN_1_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_AES_PMS_CONSTRAIN_0_REG
     </td>
     <td>
      PMS_DMA_APBPERI_AES_PMS_CONSTRAIN_0_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_DMA_APBPERI_AES_PMS_CONSTRAIN_1_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_SHA_PMS_CONSTRAIN_0_REG
     </td>
     <td>
      PMS_DMA_APBPERI_SHA_PMS_CONSTRAIN_0_REG
      <br/>
      PMS_DMA_APBPERI_SHA_PMS_CONSTRAIN_1_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_DMA_APBPERI_ADC_DAC_PMS_CONSTRAIN_0
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_ADC_DAC_PMS_CONSTRAIN_0
     </td>
     <td>
      _REG
     </td>
    </tr>
    <tr>
     <td>
      _REG
     </td>
     <td>
      PMS_DMA_APBPERI_ADC_DAC_PMS_CONSTRAIN_1
     </td>
    </tr>
    <tr>
     <td rowspan="3">
     </td>
     <td>
      _REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_PMS_MONITOR_0_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_PMS_MONITOR_1_REG
     </td>
    </tr>
    <tr>
     <td>
      PMS_DMA_APBPERI_PMS_MONITOR_0_REG
     </td>
     <td>
      PMS_DMA_APBPERI_PMS_MONITOR_2_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      PMS_DMA_APBPERI_PMS_MONITOR_3_REG
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      Lock CPU's Access Configuration to Cache
      <br/>
      EXTMEM_DBUS_PMS_TBL_LOCK_REG
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="3">
      EXTMEM_DBUS_PMS_TBL_ATTR_REG
     </td>
    </tr>
    <tr>
     <td colspan="3">
      EXTMEM_DBUS_PMS_TBL_BOUNDARY0_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="3">
      EXTMEM_DBUS_PMS_TBL_BOUNDARY1_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      EXTMEM_DBUS_PMS_TBL_BOUNDARY2_REG
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      EXTMEM_IBUS_PMS_TBL_ATTR_REG
     </td>
    </tr>
    <tr>
     <td>
      EXTMEM_IBUS_PMS_TBL_LOCK_REG
     </td>
     <td>
      EXTMEM_IBUS_PMS_TBL_BOUNDARY0_REG
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <th>
      Chapter 14
      <br/>
      Permission Control (PMS)
     </th>
     <th>
      GoBack
     </th>
    </tr>
   </tbody>
  </table>
  <span id="page-334-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Na
      <br/>
      De
      <br/>
      me
     </th>
     <th>
      ip
      <br/>
      ion
      <br/>
      A
      <br/>
      d
      <br/>
      dr
      <br/>
      t
      <br/>
      sc
      <br/>
      r
      <br/>
      es
     </th>
     <th>
      Ac
      <br/>
      ce
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      Re
      <br/>
      is
      <br/>
      t
      <br/>
      te
      <br/>
      n
      <br/>
      ura
      <br/>
      g
      <br/>
      r
     </td>
     <td>
     </td>
     <td>
      s
      <br/>
      ss
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      P
      <br/>
      R
      <br/>
      I
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      E
      <br/>
      G
      <br/>
      E_
      <br/>
      M
      <br/>
      O
      <br/>
      D
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      L_
      <br/>
      L
      <br/>
      O
      <br/>
      C
      <br/>
      K_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      P
      <br/>
      M
     </td>
     <td>
      S_
      <br/>
      P
      <br/>
      R
      <br/>
      I
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      E
      <br/>
      G
      <br/>
      E_
      <br/>
      M
      <br/>
      O
      <br/>
      D
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      L_
      <br/>
      L
      <br/>
      O
      <br/>
      C
      <br/>
      K_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      0
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      P
      <br/>
      R
      <br/>
      I
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      E
      <br/>
      G
      <br/>
      E_
      <br/>
      M
      <br/>
      O
      <br/>
      D
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      L_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      P
      <br/>
      M
     </td>
     <td>
      S_
      <br/>
      P
      <br/>
      R
      <br/>
      I
      <br/>
      V
      <br/>
      I
      <br/>
      L
      <br/>
      E
      <br/>
      G
      <br/>
      E_
      <br/>
      M
      <br/>
      O
      <br/>
      D
      <br/>
      E_
      <br/>
      S
      <br/>
      E
      <br/>
      L_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      0
     </td>
     <td>
      8
      <br/>
      L
      <br/>
      /
      <br/>
      C
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      A
      <br/>
      P
      <br/>
      B_
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I
      <br/>
      P
      <br/>
      H
      <br/>
      E
      <br/>
      R
      <br/>
      A
      <br/>
      L_
      <br/>
      A
      <br/>
      C
      <br/>
      C
      <br/>
      E
      <br/>
      S
      <br/>
      S_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      A
      <br/>
      P
     </td>
     <td>
      he
      <br/>
      ip
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      1
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      p
      <br/>
      er
      <br/>
      ra
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
     </td>
     <td>
      L
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      C
      <br/>
      C
      <br/>
      S
      <br/>
      S_
      <br/>
      G
      <br/>
      M
      <br/>
      A
      <br/>
      P
      <br/>
      B_
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I
      <br/>
      P
      <br/>
      H
      <br/>
      E
      <br/>
      R
      <br/>
      A
      <br/>
      L_
      <br/>
      A
      <br/>
      E
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      A
      <br/>
      P
     </td>
     <td>
      l
      <br/>
      B
      <br/>
      r
      <br/>
      he
      <br/>
      ip
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      1
      <br/>
      t
      <br/>
      te
      <br/>
      er
      <br/>
      ra
      <br/>
      co
      <br/>
      n
      <br/>
      ura
     </td>
     <td>
      L
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      S
      <br/>
      S
      <br/>
      G
      <br/>
      0_
      <br/>
      G
      <br/>
      M
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      N
      <br/>
      A
      <br/>
      L_
      <br/>
      R
      <br/>
      A
      <br/>
      M_
      <br/>
      U
      <br/>
      A
      <br/>
      E_
      <br/>
      R
      <br/>
      E
      <br/>
      In
      <br/>
      te
     </td>
     <td>
      l
      <br/>
      B
      <br/>
      1
      <br/>
      4
      <br/>
      p
      <br/>
      reg
      <br/>
      r
      <br/>
      S
      <br/>
      R
      <br/>
      A
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      1
      <br/>
      t
      <br/>
      te
      <br/>
      rna
      <br/>
      co
      <br/>
      n
      <br/>
      ura
     </td>
     <td>
      L
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      S
      <br/>
      S
      <br/>
      G
      <br/>
      G
      <br/>
      M
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      N
      <br/>
      A
      <br/>
      L_
      <br/>
      R
      <br/>
      A
      <br/>
      M_
      <br/>
      U
      <br/>
      A
      <br/>
      E_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      In
      <br/>
      te
     </td>
     <td>
      l
      <br/>
      M
      <br/>
      8
      <br/>
      reg
      <br/>
      r
      <br/>
      S
      <br/>
      0
      <br/>
      C
      <br/>
      R
      <br/>
      A
      <br/>
      f
      <br/>
      ion
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      t
      <br/>
      te
      <br/>
      rna
      <br/>
      co
      <br/>
      n
      <br/>
      ura
     </td>
     <td>
      L
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      S
      <br/>
      S
      <br/>
      G
      <br/>
      G
      <br/>
      M
      <br/>
      I
      <br/>
      N
      <br/>
      T
      <br/>
      E
      <br/>
      R
      <br/>
      N
      <br/>
      A
      <br/>
      L_
      <br/>
      R
      <br/>
      A
      <br/>
      M_
      <br/>
      U
      <br/>
      A
      <br/>
      E_
      <br/>
      4_
      <br/>
      R
      <br/>
      E
      <br/>
      In
      <br/>
      te
     </td>
     <td>
      l
      <br/>
      M
      <br/>
      ig
      <br/>
      1
      <br/>
      reg
      <br/>
      r
      <br/>
      S
      <br/>
      R
      <br/>
      A
      <br/>
      f
      <br/>
      ion
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      2
      <br/>
      t
      <br/>
      te
     </td>
     <td>
      L
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      P
      <br/>
      M
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      P
      <br/>
      I
     </td>
     <td>
      l
      <br/>
      M
      <br/>
      ig
      <br/>
      4
      <br/>
      rna
      <br/>
      co
      <br/>
      n
      <br/>
      ura
      <br/>
      reg
      <br/>
      r
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      Pe
      <br/>
      Co
      <br/>
      Re
      <br/>
      iss
      <br/>
      ion
      <br/>
      f
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      3
     </td>
     <td>
      4
      <br/>
      L
      <br/>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      A_
      <br/>
      I_
      <br/>
      2_
      <br/>
      S_
      <br/>
      N_
      <br/>
      0_
     </td>
     <td>
      2
      <br/>
      A
      <br/>
      ig
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      L
      <br/>
      8
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      2_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      S
      <br/>
      P
      <br/>
      I
     </td>
     <td>
      2
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      3
      <br/>
      1
      <br/>
      0x
      <br/>
      0
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      C
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      U
      <br/>
      C
      <br/>
      H
      <br/>
      I
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      U
      <br/>
      C
     </td>
     <td>
      H
      <br/>
      I
      <br/>
      0
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      te
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      4
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      L
      <br/>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      U
      <br/>
      C
      <br/>
      H
      <br/>
      I
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      U
      <br/>
      C
     </td>
     <td>
      H
      <br/>
      I
      <br/>
      0
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      te
      <br/>
      1
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      4
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      L
      <br/>
      4
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      I
      <br/>
      2
      <br/>
      S
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      I
      <br/>
      2
     </td>
     <td>
      S
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      te
      <br/>
      4
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      I
      <br/>
      2
      <br/>
      S
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      I
      <br/>
      2
     </td>
     <td>
      S
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      4
      <br/>
      te
      <br/>
      1
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      C
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      A
      <br/>
      E
     </td>
     <td>
      S
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      6
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      8
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      A
      <br/>
      E
     </td>
     <td>
      S
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      6
      <br/>
      te
      <br/>
      1
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      C
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      S
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      0_
      <br/>
      G
      <br/>
      S
      <br/>
      M
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      H
      <br/>
      A_
      <br/>
      P
      <br/>
      M
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      R
      <br/>
      E
      <br/>
      H
     </td>
     <td>
      G
      <br/>
      Co
      <br/>
      A
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      7
      <br/>
      0
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      S
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      G
      <br/>
      S
      <br/>
      M
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      H
      <br/>
      A_
      <br/>
      P
      <br/>
      M
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      H
     </td>
     <td>
      G
      <br/>
      Co
      <br/>
      A
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      1
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      7
      <br/>
      4
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      C_
      <br/>
      C_
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      0_
      <br/>
      G
      <br/>
      M
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      A
      <br/>
      D
      <br/>
      D
      <br/>
      A
      <br/>
      P
      <br/>
      M
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      R
      <br/>
      E
      <br/>
      A
      <br/>
      D
     </td>
     <td>
      C_
      <br/>
      C
      <br/>
      G
      <br/>
      Co
      <br/>
      D
      <br/>
      A
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      7
      <br/>
      8
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      C_
      <br/>
      C_
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      G
      <br/>
      M
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      A
      <br/>
      D
      <br/>
      D
      <br/>
      A
      <br/>
      P
      <br/>
      M
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      A
      <br/>
      D
     </td>
     <td>
      C_
      <br/>
      C
      <br/>
      G
      <br/>
      Co
      <br/>
      0
      <br/>
      D
      <br/>
      A
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      1
      <br/>
      0x
      <br/>
      0
      <br/>
      7
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      C
      <br/>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      G
      <br/>
      D
     </td>
     <td>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      In
      <br/>
      Re
      <br/>
      iss
      <br/>
      ion
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      L
      <br/>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      X_
      <br/>
      I
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      D
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      S
      <br/>
      P
      <br/>
      L
      <br/>
      I
      <br/>
      T_
      <br/>
      L
      <br/>
      I
      <br/>
      N
      <br/>
      E
      <br/>
      S
      <br/>
      R
     </td>
     <td>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      1
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
      <br/>
      A
      <br/>
      l
      <br/>
      i
      <br/>
      l
      <br/>
      ine
      <br/>
      f
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      9
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      L
      <br/>
      4
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      *
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      (
      <br/>
      )
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      0
      <br/>
      5
      <br/>
      n
      <br/>
      n:
      <br/>
      -
      <br/>
      _
     </td>
     <td>
      M
      <br/>
      ig
      <br/>
      t
      <br/>
      te
      <br/>
      sp
      <br/>
      co
      <br/>
      n
      <br/>
      reg
      <br/>
      r
      <br/>
      n
     </td>
     <td>
      L
      <br/>
      0
      <br/>
      4
      <br/>
      +
      <br/>
      n
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Na
      <br/>
      me
     </th>
     <th>
      ip
      <br/>
      ion
      <br/>
      d
      <br/>
      dr
      <br/>
      De
      <br/>
      A
      <br/>
      t
      <br/>
      sc
      <br/>
      r
      <br/>
      es
     </th>
     <th>
      Ac
      <br/>
      s
      <br/>
      ce
      <br/>
      ss
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      G
      <br/>
      P
      <br/>
      M
      <br/>
      R
      <br/>
      E_
      <br/>
      X_
      <br/>
      I
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      P
      <br/>
      M
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      I
     </td>
     <td>
      S
      <br/>
      Co
      <br/>
      0
      <br/>
      0
      <br/>
      B
      <br/>
      U
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      1
      <br/>
      0x
      <br/>
      A
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      C
      <br/>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      2_
      <br/>
      G
      <br/>
      P
      <br/>
      M
      <br/>
      R
      <br/>
      E_
      <br/>
      X_
      <br/>
      I
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      P
      <br/>
      M
      <br/>
      N
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      R
      <br/>
      E
      <br/>
      I
     </td>
     <td>
      S
      <br/>
      Co
      <br/>
      0
      <br/>
      0
      <br/>
      B
      <br/>
      U
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      2
      <br/>
      0x
      <br/>
      B
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      0
      <br/>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      0_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      0_
      <br/>
      G
      <br/>
      P
      <br/>
      M
      <br/>
      R
      <br/>
      E_
      <br/>
      I
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      C
      <br/>
      0
      <br/>
      S
      <br/>
      0
      <br/>
      0
      <br/>
      P
      <br/>
      U
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      B
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      4
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      I
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      0
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Pe
      <br/>
      In
      <br/>
      Re
      <br/>
      0
      <br/>
      0
      <br/>
      B
      <br/>
      iss
      <br/>
      ion
      <br/>
      is
      <br/>
      1
      <br/>
      0x
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
     </td>
     <td>
      8
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      X_
      <br/>
      D
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      r
      <br/>
      D
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      0
      <br/>
      0x
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
     </td>
     <td>
      0
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      X_
      <br/>
      D
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      r
      <br/>
      D
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      te
      <br/>
      1
      <br/>
      0x
      <br/>
      rm
      <br/>
      n
      <br/>
      g
     </td>
     <td>
      4
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      D
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      r
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      d
      <br/>
      B
      <br/>
      U
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      te
      <br/>
      te
      <br/>
      0
      <br/>
      0x
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      D
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      0
      <br/>
      S
      <br/>
      t
      <br/>
      r
      <br/>
      d
      <br/>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      B
      <br/>
      U
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      C
      <br/>
      te
      <br/>
      te
      <br/>
      1
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
     </td>
     <td>
      8
      <br/>
      /
      <br/>
      C
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      (
      <br/>
      )
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      R
      <br/>
      E
      <br/>
      0
      <br/>
      1
      <br/>
      n
      <br/>
      n:
     </td>
     <td>
      0
      <br/>
      S
      <br/>
      t
      <br/>
      r
      <br/>
      he
      <br/>
      Pe
      <br/>
      ip
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      ion
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      D
      <br/>
      t
      <br/>
      te
      <br/>
      ra
      <br/>
      rm
      <br/>
      n
      <br/>
      ura
      <br/>
      n
      <br/>
      r
     </td>
     <td>
      L
      <br/>
      /
      <br/>
      *
      <br/>
      R
      <br/>
      W
      <br/>
      n
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      N_
      <br/>
      G
      <br/>
      0
      <br/>
      -
      <br/>
      _
      <br/>
      (
      <br/>
      )
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      I
      <br/>
      O
      <br/>
      N_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      N
      <br/>
      S
      <br/>
      T
      <br/>
      R
      <br/>
      A
      <br/>
      I
      <br/>
      N_
      <br/>
      R
      <br/>
      E
      <br/>
      0
      <br/>
      1
      <br/>
      n
      <br/>
      n:
     </td>
     <td>
      l
      <br/>
      g
      <br/>
      r
      <br/>
      l
      <br/>
      C
      <br/>
      P
      <br/>
      Sp
      <br/>
      i
      <br/>
      Re
      <br/>
      ion
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      t_
      <br/>
      te
      <br/>
      1
      <br/>
      rm
      <br/>
      n
     </td>
     <td>
      8
      <br/>
      L
      <br/>
      4
      <br/>
      +
      <br/>
      /
      <br/>
      *
      <br/>
      R
      <br/>
      W
      <br/>
      n
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      G
      <br/>
      0
      <br/>
      -
      <br/>
      _
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      U
      <br/>
      g
      <br/>
      g
      <br/>
      r
      <br/>
      C
      <br/>
      P
      <br/>
      P
      <br/>
      I
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      3
      <br/>
      0
      <br/>
      te
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
     </td>
     <td>
      L
      <br/>
      4
      <br/>
      4
      <br/>
      +
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      0_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      G
      <br/>
      P
      <br/>
      M
      <br/>
      R
      <br/>
      E_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      U
      <br/>
      F
      <br/>
      t
      <br/>
      p
      <br/>
      g
      <br/>
      r
      <br/>
      C
      <br/>
      P
      <br/>
      P
      <br/>
      I
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      3
      <br/>
      te
      <br/>
      te
      <br/>
      rm
     </td>
     <td>
      L
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      C
      <br/>
      O
      <br/>
      O
      <br/>
      O
      <br/>
      G
      <br/>
      P
      <br/>
      M
      <br/>
      R
      <br/>
      P
      <br/>
      I
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      U
      <br/>
      F
      <br/>
      1
      <br/>
      4
      <br/>
      t
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
      <br/>
      C
      <br/>
      P
      <br/>
      P
      <br/>
      I
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      4
      <br/>
      0
      <br/>
      te
      <br/>
      te
     </td>
     <td>
      L
      <br/>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      0_
      <br/>
      S_
      <br/>
      E_
      <br/>
      F_
      <br/>
      R_
      <br/>
      4_
     </td>
     <td>
      U
      <br/>
      F
      <br/>
      4
      <br/>
      t
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      L
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      is
      <br/>
      Re
      <br/>
      ta
      <br/>
      tu
      <br/>
      te
      <br/>
      s
      <br/>
      g
      <br/>
      r
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      S_
      <br/>
      O
      <br/>
      O
      <br/>
      2_
      <br/>
      G
      <br/>
      P
      <br/>
      M
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      P
      <br/>
      M
      <br/>
      M
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      R_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      O
      <br/>
      8
      <br/>
      R
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      D
      <br/>
      M
      <br/>
      A_
      <br/>
      A
      <br/>
      P
      <br/>
      B
      <br/>
      P
      <br/>
      E
      <br/>
      R
      <br/>
      I_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      G
      <br/>
      D
      <br/>
      M
      <br/>
      A
      <br/>
      Pe
      <br/>
      In
      <br/>
      Re
      <br/>
      0
      <br/>
      8
      <br/>
      iss
      <br/>
      ion
      <br/>
      is
      <br/>
      3
      <br/>
      0x
      <br/>
      0
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      C
      <br/>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      I
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      0
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      B
      <br/>
      2
      <br/>
      0x
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      C
      <br/>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      D
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      0
      <br/>
      d
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      D
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      2
      <br/>
      0x
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      0
      <br/>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      D
      <br/>
      R
      <br/>
      A
      <br/>
      M
      <br/>
      0_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      0
      <br/>
      d
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0
      <br/>
      0
      <br/>
      D
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      3
      <br/>
      0x
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      4
      <br/>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      P
      <br/>
      I
      <br/>
      F
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      2
      <br/>
      0x
      <br/>
      0
      <br/>
      3
      <br/>
      8
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      1
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      P
      <br/>
      I
      <br/>
      F
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      3
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      3
      <br/>
      C
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      5_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      P
      <br/>
      I
      <br/>
      F
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      5
      <br/>
      1
      <br/>
      4
      <br/>
      4
      <br/>
      rm
      <br/>
      p
      <br/>
      g
      <br/>
      rru
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      R
      <br/>
      E_
      <br/>
      0_
      <br/>
      P
      <br/>
      I
      <br/>
      F_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      M
      <br/>
      O
      <br/>
      N
      <br/>
      I
      <br/>
      T
      <br/>
      O
      <br/>
      R_
      <br/>
      6_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      C
      <br/>
      P
      <br/>
      U
      <br/>
      P
      <br/>
      I
      <br/>
      F
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      6
      <br/>
      0x
      <br/>
      0
      <br/>
      8
      <br/>
      te
      <br/>
      t
      <br/>
      te
      <br/>
      1
      <br/>
      4
      <br/>
      rm
      <br/>
      rru
      <br/>
      p
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      O
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ion
      <br/>
      is
      <br/>
      Ve
      <br/>
      Re
      <br/>
      te
      <br/>
      rs
      <br/>
      g
      <br/>
      r
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      C
      <br/>
      O
      <br/>
      C
      <br/>
      G
      <br/>
      G_
      <br/>
      G
      <br/>
      P
      <br/>
      M
      <br/>
      L
      <br/>
      K_
      <br/>
      A
      <br/>
      T
      <br/>
      E_
      <br/>
      R
      <br/>
      E
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      C
      <br/>
      loc
      <br/>
      k
      <br/>
      Ga
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      1
      <br/>
      7
      <br/>
      0
      <br/>
      te
      <br/>
      te
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Name
     </th>
     <th>
      Description
     </th>
     <th>
      <b>
       Address
      </b>
     </th>
     <th>
      Access
     </th>
    </tr>
    <tr>
     <th>
      <b>
       Configuration Registers
      </b>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      SYSCON_EXT_MEM_PMS_LOCK_REG
     </td>
     <td>
      External Memory Permission Lock Register
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSCON_FLASH_ACEn_ATTR_REG (n: 0 - 3)
     </td>
     <td>
      Flash Arean Permission Config Register
     </td>
     <td>
      <math>
       0x0028 + 4 * n
      </math>
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSCON_SRAM_ACEn_ADDR_S (n: 0 - 3)
     </td>
     <td>
      Flash Arean Starting Address Config Register
     </td>
     <td>
      <math>
       0x0038 + 4 * n
      </math>
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSCON_FLASH_ACEn_SIZE_REG (n: 0 - 3)
     </td>
     <td>
      Flash Arean Length Config Register
     </td>
     <td>
      <math>
       0x0048 + 4 * n
      </math>
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSCON_SPI_MEM_PMS_CTRL_REG
     </td>
     <td>
      External Memory Unauthorized Access Interrupt Register
     </td>
     <td>
      0x0088
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SYSCON_SPI_MEM_REJECT_ADDR_REG
     </td>
     <td>
      External Memory Unauthorized Access Address Register
     </td>
     <td>
      0x008C
     </td>
     <td>
      R
      <sub>
       O
      </sub>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      me
      <br/>
      ion
      <br/>
      is
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      t
      <br/>
      te
      <br/>
      n
      <br/>
      ura
      <br/>
      rs
      <br/>
      g
     </th>
     <th>
      De
      <br/>
      ip
      <br/>
      ion
      <br/>
      t
      <br/>
      sc
      <br/>
      r
     </th>
     <th>
      d
      <br/>
      dr
      <br/>
      A
      <br/>
      es
     </th>
     <th>
      Ac
      <br/>
      s
      <br/>
      ce
      <br/>
      ss
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Y
      <br/>
      S
      <br/>
      C
      <br/>
      O
      <br/>
      N_
      <br/>
      E
      <br/>
      X
      <br/>
      T_
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      L
      <br/>
      O
      <br/>
      C
      <br/>
      K_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      l
      <br/>
      Ex
      <br/>
      Me
      <br/>
      te
      <br/>
      rna
     </td>
     <td colspan="2">
      k
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Lo
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      2
      <br/>
      0
      <br/>
      te
      <br/>
      mo
      <br/>
      rm
      <br/>
      c
      <br/>
      g
      <br/>
      r
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      (
      <br/>
      )
      <br/>
      Y
      <br/>
      S
      <br/>
      C
      <br/>
      O
      <br/>
      N_
      <br/>
      F
      <br/>
      L
      <br/>
      A
      <br/>
      S
      <br/>
      H_
      <br/>
      A
      <br/>
      C
      <br/>
      En
      <br/>
      A
      <br/>
      T
      <br/>
      T
      <br/>
      R_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      0
      <br/>
      3
      <br/>
      n:
     </td>
     <td>
      las
      <br/>
      h
      <br/>
      F
      <br/>
      Ar
      <br/>
      ea
      <br/>
      n
     </td>
     <td>
      ry
      <br/>
      Pe
      <br/>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      2
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      8
      <br/>
      *
      <br/>
      R
      <br/>
      W
      <br/>
      4
      <br/>
      +
      <br/>
      n
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      -
      <br/>
      _
      <br/>
      (
      <br/>
      )
      <br/>
      S
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      C
      <br/>
      S
      <br/>
      Y
      <br/>
      N_
      <br/>
      R
      <br/>
      A
      <br/>
      M_
      <br/>
      A
      <br/>
      En
      <br/>
      A
      <br/>
      D
      <br/>
      D
      <br/>
      R_
      <br/>
      0
      <br/>
      3
      <br/>
      n:
     </td>
     <td>
      las
      <br/>
      h
      <br/>
      F
      <br/>
      Ar
      <br/>
      ea
      <br/>
      n
     </td>
     <td>
      S
      <br/>
      d
      <br/>
      dr
      <br/>
      Co
      <br/>
      ing
      <br/>
      A
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      3
      <br/>
      tar
      <br/>
      t
      <br/>
      te
      <br/>
      es
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      8
      <br/>
      4
      <br/>
      *
      <br/>
      R
      <br/>
      W
      <br/>
      +
      <br/>
      n
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      -
      <br/>
      _
      <br/>
      (
      <br/>
      )
      <br/>
      S
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      C
      <br/>
      S
      <br/>
      G
      <br/>
      Y
      <br/>
      N_
      <br/>
      F
      <br/>
      L
      <br/>
      A
      <br/>
      H_
      <br/>
      A
      <br/>
      En
      <br/>
      I
      <br/>
      Z
      <br/>
      E_
      <br/>
      R
      <br/>
      E
      <br/>
      0
      <br/>
      3
      <br/>
      n:
     </td>
     <td>
      las
      <br/>
      F
      <br/>
      Ar
      <br/>
      ea
     </td>
     <td>
      s
      <br/>
      Co
      <br/>
      Le
      <br/>
      f
      <br/>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      4
      <br/>
      t
      <br/>
      te
      <br/>
      ng
      <br/>
      n
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      /
      <br/>
      8
      <br/>
      4
      <br/>
      *
      <br/>
      R
      <br/>
      W
      <br/>
      +
      <br/>
      n
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      -
      <br/>
      _
      <br/>
      S
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      S_
      <br/>
      C
      <br/>
      G
      <br/>
      Y
      <br/>
      N_
      <br/>
      P
      <br/>
      I_
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      P
      <br/>
      M
      <br/>
      T
      <br/>
      R
      <br/>
      L_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      l
      <br/>
      Ex
      <br/>
      Me
      <br/>
      te
      <br/>
      rna
     </td>
     <td colspan="2">
      h
      <br/>
      h
      <br/>
      n
      <br/>
      ho
      <br/>
      Un
      <br/>
      ize
      <br/>
      Ac
      <br/>
      In
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      t
      <br/>
      te
      <br/>
      te
      <br/>
      mo
      <br/>
      au
      <br/>
      r
      <br/>
      ce
      <br/>
      ss
      <br/>
      rru
      <br/>
      p
      <br/>
      g
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      C
      <br/>
      O
      <br/>
      S
      <br/>
      C
      <br/>
      G
      <br/>
      Y
      <br/>
      N_
      <br/>
      P
      <br/>
      I_
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      R
      <br/>
      E
      <br/>
      J
      <br/>
      E
      <br/>
      T_
      <br/>
      A
      <br/>
      D
      <br/>
      D
      <br/>
      R_
      <br/>
      R
      <br/>
      E
     </td>
     <td>
      Ex
      <br/>
      Me
      <br/>
      te
      <br/>
      rna
     </td>
     <td>
      d
      <br/>
      t
      <br/>
      ry
      <br/>
      r
      <br/>
      ho
      <br/>
      d
      <br/>
      dr
      <br/>
      0
      <br/>
      8
      <br/>
      Un
      <br/>
      ize
      <br/>
      Ac
      <br/>
      A
      <br/>
      Re
      <br/>
      is
      <br/>
      0x
      <br/>
      0
      <br/>
      t
      <br/>
      te
      <br/>
      mo
      <br/>
      au
      <br/>
      r
      <br/>
      ce
      <br/>
      ss
      <br/>
      es
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      8
      <br/>
      ies
      <br/>
      va
      <br/>
      r
      <br/>
      C
      <br/>
      O
      <br/>
      R
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      l
     </td>
     <td>
      d
      <br/>
      ry
      <br/>
      s
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Na
      <br/>
      me
     </td>
     <td>
      De
      <br/>
      sc
     </td>
     <td>
      ip
      <br/>
      ion
      <br/>
      d
      <br/>
      dr
      <br/>
      A
      <br/>
      t
      <br/>
      r
      <br/>
      es
     </td>
     <td>
      Ac
      <br/>
      s
      <br/>
      ce
      <br/>
      ss
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      iss
      <br/>
      ion
      <br/>
      Co
      <br/>
      f
      <br/>
      ig
      <br/>
      is
      <br/>
      Pe
      <br/>
      te
      <br/>
      rm
      <br/>
      n
      <br/>
      ur
      <br/>
      e
      <br/>
      re
      <br/>
      g
      <br/>
      r
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S_
      <br/>
      S_
      <br/>
      O
      <br/>
      C
      <br/>
      G
      <br/>
      E
      <br/>
      X
      <br/>
      T
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      P
      <br/>
      M
      <br/>
      T
      <br/>
      B
      <br/>
      L_
      <br/>
      L
      <br/>
      K_
      <br/>
      R
      <br/>
      E
      <br/>
      (
      <br/>
      S_
      <br/>
      S_
      <br/>
      O
      <br/>
      G
      <br/>
      E
      <br/>
      X
      <br/>
      T
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      P
      <br/>
      M
      <br/>
      T
      <br/>
      B
      <br/>
      L_
      <br/>
      B
      <br/>
      U
      <br/>
      N
      <br/>
      D
      <br/>
      A
      <br/>
      R
      <br/>
      Yn
      <br/>
      R
      <br/>
      E
      <br/>
      0
      <br/>
      n:
      <br/>
      _
     </td>
     <td>
      Ca
      <br/>
      c
      <br/>
      Ca
      <br/>
      c
      <br/>
      )
      <br/>
      2
      <br/>
      -
     </td>
     <td>
      he
      <br/>
      S
      <br/>
      k
      <br/>
      0
      <br/>
      0
      <br/>
      8
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      Re
      <br/>
      ion
      <br/>
      Lo
      <br/>
      0x
      <br/>
      D
      <br/>
      g
      <br/>
      s
      <br/>
      c
      <br/>
      (
      <br/>
      )
      <br/>
      he
      <br/>
      S
      <br/>
      S
      <br/>
      d
      <br/>
      dr
      <br/>
      Co
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      Re
      <br/>
      ion
      <br/>
      +1
      <br/>
      ing
      <br/>
      A
      <br/>
      f
      <br/>
      ig
      <br/>
      tar
      <br/>
      t
      <br/>
      g
      <br/>
      n
      <br/>
      es
      <br/>
      s
      <br/>
      n
      <br/>
      0
      <br/>
      0
      <br/>
      0x
      <br/>
      D
     </td>
     <td>
      /
      <br/>
      R
      <br/>
      W
      <br/>
      C
      <br/>
      /
      <br/>
      4
      <br/>
      *
      <br/>
      R
      <br/>
      W
      <br/>
      +
      <br/>
      n
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Re
      <br/>
      is
      <br/>
      g
     </td>
     <td>
      te
      <br/>
      r
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      X
      <br/>
      T
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      S_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      T
      <br/>
      B
      <br/>
      L_
      <br/>
      A
      <br/>
      T
      <br/>
      T
      <br/>
      R_
      <br/>
      R
      <br/>
      E
      <br/>
      G
     </td>
     <td>
      Ca
      <br/>
      c
     </td>
     <td>
      he
      <br/>
      I
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Re
      <br/>
      Pe
      <br/>
      Re
      <br/>
      0
      <br/>
      0
      <br/>
      E
      <br/>
      8
      <br/>
      ion
      <br/>
      iss
      <br/>
      ion
      <br/>
      is
      <br/>
      0x
      <br/>
      te
      <br/>
      g
      <br/>
      rm
      <br/>
      g
      <br/>
      r
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      E
      <br/>
      X
      <br/>
      T
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      D
      <br/>
      B
      <br/>
      U
      <br/>
      S_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      T
      <br/>
      B
      <br/>
      L_
      <br/>
      L
      <br/>
      O
      <br/>
      C
      <br/>
      K_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      (
      <br/>
      E
      <br/>
      X
      <br/>
      T
      <br/>
      M
      <br/>
      E
      <br/>
      M_
      <br/>
      D
      <br/>
      B
      <br/>
      U
      <br/>
      S_
      <br/>
      P
      <br/>
      M
      <br/>
      S_
      <br/>
      T
      <br/>
      B
      <br/>
      L_
      <br/>
      B
      <br/>
      O
      <br/>
      U
      <br/>
      N
      <br/>
      D
      <br/>
      A
      <br/>
      R
      <br/>
      Yn
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      n:
      <br/>
      _
     </td>
     <td>
      Ca
      <br/>
      c
      <br/>
      Ca
      <br/>
      c
      <br/>
      )
      <br/>
      0
      <br/>
      2
     </td>
     <td>
      he
      <br/>
      D
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Re
      <br/>
      ion
      <br/>
      Lo
      <br/>
      k
      <br/>
      0
      <br/>
      0
      <br/>
      E
      <br/>
      C
      <br/>
      0x
      <br/>
      g
      <br/>
      s
      <br/>
      c
      <br/>
      (
      <br/>
      )
      <br/>
      he
      <br/>
      D
      <br/>
      B
      <br/>
      U
      <br/>
      S
      <br/>
      Re
      <br/>
      ion
      <br/>
      S
      <br/>
      ing
      <br/>
      A
      <br/>
      d
      <br/>
      dr
      <br/>
      +1
      <br/>
      tar
      <br/>
      t
      <br/>
      g
      <br/>
      n
      <br/>
      es
      <br/>
      s
      <br/>
      0
      <br/>
      0
      <br/>
      F
      <br/>
      0x
     </td>
     <td>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      0
      <br/>
      *
      <br/>
      R
      <br/>
      /
      <br/>
      W
      <br/>
      4
      <br/>
      +
      <br/>
      n
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      -
      <br/>
      Co
      <br/>
      f
      <br/>
      n
     </td>
     <td>
      ig
      <br/>
      Re
      <br/>
      is
      <br/>
      te
      <br/>
      g
      <br/>
      r
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Espressif Systems
  </p>
  <p block-type="Text">
   <span id="page-337-2">
   </span>
  </p>
  <p>
   <img src="_page_337_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-337-1">
   </span>
   <span id="page-337-0">
   </span>
  </p>
  <p>
   <img src="_page_338_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_338_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-338-2">
   </span>
  </p>
  <p>
   <img src="_page_338_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-338-1">
   </span>
   <img src="_page_338_Figure_7.jpeg"/>
  </p>
  <p>
   <span id="page-338-0">
   </span>
  </p>
  <p>
   <span id="page-339-1">
   </span>
   <img src="_page_339_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-339-2">
   </span>
  </p>
  <p>
   <img src="_page_339_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_339_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-339-0">
   </span>
   <img src="_page_339_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-340-2">
   </span>
   <img src="_page_340_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-340-3">
   </span>
  </p>
  <p>
   <img src="_page_340_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_340_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-340-1">
   </span>
   <span id="page-340-0">
   </span>
  </p>
  <p>
   <span id="page-341-1">
   </span>
   <img src="_page_341_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-341-0">
   </span>
   PMS_DMA_APBPERI_SPI2_PMS_CONSTRAIN_LOCKSet this bit to lock SPI2's DMA permission configuration register. (R/WL)
  </p>
  <p>
   <img src="_page_342_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-342-1">
   </span>
   <img src="_page_342_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-342-0">
   </span>
   PMS_DMA_APBPERI_SPI2_PMS_CONSTRAIN_SRAM_M_MODE_PMS_0 Configure SPI2's permission to the instruction region. (R/WL) PMS_DMA_APBPERI_SPI2_PMS_CONSTRAIN_SRAM_M_MODE_PMS_1 Configure SPI2's permission to the data region0 of SRAM. (R/WL) PMS_DMA_APBPERI_SPI2_PMS_CONSTRAIN_SRAM_M_MODE_PMS_2 Configure SPI2's permission to the data region1 of SRAM. (R/WL) PMS_DMA_APBPERI_SPI2_PMS_CONSTRAIN_SRAM_M_MODE_PMS_3Configure SPI2's permission to the data region2 of SRAM. (R/WL)
  </p>
  <p>
   <img src="_page_343_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-343-1">
   </span>
   <img src="_page_343_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-343-0">
   </span>
   PMS_DMA_APBPERI_UCHI0_PMS_CONSTRAIN_LOCKSet this bit to lock UHCI0's DMA permission configuration register. (R/WL)
  </p>
  <p>
   <span id="page-344-1">
   </span>
   <img src="_page_344_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-344-0">
   </span>
   PMS_DMA_APBPERI_UCHI0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_0 Configure UHCI0's permission to the instruction region. (R/WL) PMS_DMA_APBPERI_UCHI0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_1 Configure UHCI0's permission to the data region0 of SRAM. (R/WL) PMS_DMA_APBPERI_UCHI0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_2 Configure UHCI0's permission to the data region1 of SRAM. (R/WL) PMS_DMA_APBPERI_UCHI0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_3Configure UHCI0's permission to the data region2 of SRAM. (R/WL)
  </p>
  <p>
   <img src="_page_345_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-345-1">
   </span>
   <img src="_page_345_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-345-0">
   </span>
   PMS_DMA_APBPERI_I2S0_PMS_CONSTRAIN_LOCKSet this bit to lock I2S's DMA permission configuration register. (R/WL)
  </p>
  <p>
   <img src="_page_346_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-346-1">
   </span>
   <img src="_page_346_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-346-0">
   </span>
   PMS_DMA_APBPERI_I2S0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_0 Configure I2S's permission to the instruction region. (R/WL) PMS_DMA_APBPERI_I2S0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_1 Configure I2S's permission to the data region0 of SRAM. (R/WL) PMS_DMA_APBPERI_I2S0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_2 Configure I2S's permission to the data region1 of SRAM. (R/WL) PMS_DMA_APBPERI_I2S0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_3Configure I2S's permission to the data region2 of SRAM. (R/WL)
  </p>
  <p>
   <img src="_page_347_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-347-1">
   </span>
   <img src="_page_347_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-347-0">
   </span>
   PMS_DMA_APBPERI_AES_PMS_CONSTRAIN_LOCKSet this bit to lock AES's DMA permission configuration register. (R/WL)
  </p>
  <p>
   <span id="page-348-1">
   </span>
   <img src="_page_348_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-348-0">
   </span>
   PMS_DMA_APBPERI_AES_PMS_CONSTRAIN_SRAM_M_MODE_PMS_0 Configure AES's permission to the instruction region. (R/WL) PMS_DMA_APBPERI_AES_PMS_CONSTRAIN_SRAM_M_MODE_PMS_1 Configure AES's permission to the data region0 of SRAM. (R/WL) PMS_DMA_APBPERI_AES_PMS_CONSTRAIN_SRAM_M_MODE_PMS_2 Configure AES's permission to the data region1 of SRAM. (R/WL) PMS_DMA_APBPERI_AES_PMS_CONSTRAIN_SRAM_M_MODE_PMS_3Configure AES's permission to the data region2 of SRAM. (R/WL)
  </p>
  <p>
   <img src="_page_349_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-349-1">
   </span>
   <img src="_page_349_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-349-0">
   </span>
   PMS_DMA_APBPERI_SHA_PMS_CONSTRAIN_LOCKSet this bit to lock SHA's DMA permission configuration register. (R/WL)
  </p>
  <p>
   <img src="_page_350_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-350-1">
   </span>
   <img src="_page_350_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-350-0">
   </span>
   PMS_DMA_APBPERI_SHA_PMS_CONSTRAIN_SRAM_M_MODE_PMS_0 Configure SHA's permission to the instruction region. (R/WL) PMS_DMA_APBPERI_SHA_PMS_CONSTRAIN_SRAM_M_MODE_PMS_1 Configure SHA's permission to the data region0 of SRAM. (R/WL) PMS_DMA_APBPERI_SHA_PMS_CONSTRAIN_SRAM_M_MODE_PMS_2 Configure SHA's permission to the data region1 of SRAM. (R/WL) PMS_DMA_APBPERI_SHA_PMS_CONSTRAIN_SRAM_M_MODE_PMS_3Configure SHA's permission to the data region2 of SRAM. (R/WL)
  </p>
  <p>
   <span id="page-351-1">
   </span>
   <img src="_page_351_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-351-0">
   </span>
   PMS_DMA_APBPERI_ADC_DAC_PMS_CONSTRAIN_LOCKSet this bit to lock ADC_DAC's DMA permission configuration register. (R/WL)
  </p>
  <p>
   <img src="_page_352_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-352-1">
   </span>
   <img src="_page_352_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-352-0">
   </span>
   PMS_DMA_APBPERI_ADC_DAC_PMS_CONSTRAIN_SRAM_M_MODE_PMS_0 Configure ADC_DAC's permission to the instruction region. (R/WL) PMS_DMA_APBPERI_ADC_DAC_PMS_CONSTRAIN_SRAM_M_MODE_PMS_1 Configure ADC_DAC's permission to the data region0 of SRAM. (R/WL) PMS_DMA_APBPERI_ADC_DAC_PMS_CONSTRAIN_SRAM_M_MODE_PMS_2 Configure ADC_DAC's permission to the data region1 of SRAM. (R/WL) PMS_DMA_APBPERI_ADC_DAC_PMS_CONSTRAIN_SRAM_M_MODE_PMS_3Configure ADC_DAC's permission to the data region2 of SRAM. (R/WL)
  </p>
  <p>
   <span id="page-353-1">
   </span>
   <img src="_page_353_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-353-0">
   </span>
   PMS_DMA_APBPERI_PMS_MONITOR_LOCKSet this bit to lock DMA access interrupt configuration register. (R/WL)
  </p>
  <p>
   <span id="page-354-1">
   </span>
   <img src="_page_354_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_DMA_APBPERI_PMS_MONITOR_VIOLATE_CLRSet this bit to clear DMA access interrupt status. (R/WL)
  </p>
  <p block-type="Text">
   <span id="page-354-0">
   </span>
   PMS_DMA_APBPERI_PMS_MONITOR_VIOLATE_ENSet this bit to enable interrupt upon illegal DMA access. (R/WL)
  </p>
  <p>
   <span id="page-355-1">
   </span>
   <img src="_page_355_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-355-0">
   </span>
   PMS_CORE_X_IRAM0_DRAM0_DMA_SPLIT_LINE_CONSTRAIN_LOCKSet this bit to lock internal SRAM's split lines configuration. (R/WL)
  </p>
  <p>
   <img src="_page_356_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_DRAM0_DMA_SRAM_CATEGORY_0 Configures Block0's category field for the instruction and data split line IRAM0_DRAM0_Split_Line. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_DRAM0_DMA_SRAM_CATEGORY_1 Configures Block1's category field for the instruction and data split line IRAM0_DRAM0_Split_Line. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_DRAM0_DMA_SRAM_CATEGORY_2 Configures Block2's category field for the instruction and data split line IRAM0_DRAM0_Split_Line. (R/WL)
    </li>
    <li block-type="ListItem">
     <span id="page-356-0">
     </span>
     PMS_CORE_X_IRAM0_DRAM0_DMA_SRAM_SPLITADDR Configures the split address of the instruction and data split line IRAM0_DRAM0_Split_Line. (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_357_Figure_1.jpeg"/>
  </p>
  <p>
   PMS_CORE_X_IRAM0_SRAM_LINE_0_CATEGORY_0Configures Block0's category field for the instruction internal split line IRAM0_Split_Line_0. (R/WL)
  </p>
  <p block-type="Text">
   PMS_CORE_X_IRAM0_SRAM_LINE_0_CATEGORY_1 Configures Block1's category field for the instruction internal split line IRAM0_Split_Line_0. (R/WL) PMS_CORE_X_IRAM0_SRAM_LINE_0_CATEGORY_2Configures Block2's category field for the instruction internal split line IRAM0_Split_Line_0. (R/WL)
  </p>
  <p block-type="Text">
   <span id="page-357-0">
   </span>
   PMS_CORE_X_IRAM0_SRAM_LINE_0_SPLITADDRConfigures the split address of the instruction internal split line IRAM0_Split_Line_0. (R/WL)
  </p>
  <p>
   <img src="_page_358_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-358-0">
   </span>
   PMS_CORE_X_IRAM0_SRAM_LINE_1_CATEGORY_0 Configures Block0's category field for the instruction internal split line IRAM0_Split_Line_1. (R/WL) PMS_CORE_X_IRAM0_SRAM_LINE_1_CATEGORY_1 Configures Block1's category field for the instruction internal split line IRAM0_Split_Line_1. (R/WL) PMS_CORE_X_IRAM0_SRAM_LINE_1_CATEGORY_2 Configures Block2's category field for the instruction internal split line IRAM0_Split_Line_1. (R/WL) PMS_CORE_X_IRAM0_SRAM_LINE_1_SPLITADDRConfigures the split address of the instruction internal split line IRAM0_Split_Line_1. (R/WL)
  </p>
  <p>
   <img src="_page_359_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-359-0">
   </span>
   PMS_CORE_X_DRAM0_DMA_SRAM_LINE_0_CATEGORY_0 Configures Block0's category field for data internal split line DRAM0_Split_Line_0. (R/WL) PMS_CORE_X_DRAM0_DMA_SRAM_LINE_0_CATEGORY_1 Configures Block1's category field for data internal split line DRAM0_Split_Line_0. (R/WL) PMS_CORE_X_DRAM0_DMA_SRAM_LINE_0_CATEGORY_2 Configures Block2's category field for data internal split line DRAM0_Split_Line_0. (R/WL) PMS_CORE_X_DRAM0_DMA_SRAM_LINE_0_SPLITADDRConfigures the split address of data internal split line DRAM0_Split_Line_0. (R/WL)
  </p>
  <p>
   <img src="_page_360_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-360-0">
   </span>
   PMS_CORE_X_DRAM0_DMA_SRAM_LINE_1_CATEGORY_0 Configures Block0's category field for data internal split line DRAM0_Split_Line_1. (R/WL) PMS_CORE_X_DRAM0_DMA_SRAM_LINE_1_CATEGORY_1 Configures Block1's category field for data internal split line DRAM0_Split_Line_1. (R/WL) PMS_CORE_X_DRAM0_DMA_SRAM_LINE_1_CATEGORY_2 Configures Block2's category field for data internal split line DRAM0_Split_Line_1. (R/WL) PMS_CORE_X_DRAM0_DMA_SRAM_LINE_1_SPLITADDRConfigures the split address of data internal split line DRAM0_Split_Line_1. (R/WL)
  </p>
  <p>
   <span id="page-361-1">
   </span>
   <img src="_page_361_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-361-0">
   </span>
   PMS_CORE_X_IRAM0_PMS_CONSTRAIN_LOCKSet this bit to lock the permission of CPU IBUS to internal SRAM. (R/WL)
  </p>
  <p>
   <img src="_page_362_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-362-1">
   </span>
   <img src="_page_362_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_U_MODE_PMS_0 Configures the permission of CPU's IBUS to instruction region0 of SRAM from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_U_MODE_PMS_1 Configures the permission of CPU's IBUS to instruction region1 of SRAM from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_U_MODE_PMS_2 Configures the permission of CPU's IBUS to instruction region2 of SRAM from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_U_MODE_PMS_3 Configures the permission of CPU's IBUS to data region of SRAM from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_U_MODE_CACHEDATAARRAY_PMS_0 Configure the permission of CPU's IBUS to SRAM0 from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     <span id="page-362-0">
     </span>
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_ROM_U_MODE_PMS Configure the permission of CPU's IBUS to ROM from the unpriviledged environment. (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_363_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-363-1">
   </span>
   <img src="_page_363_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_0 Configures the permission of CPU's IBUS to instruction region0 of SRAM from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_1 Configures the permission of CPU's IBUS to instruction region1 of SRAM from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_2 Configures the permission of CPU's IBUS to instruction region2 of SRAM from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_3 Configures the permission of CPU's IBUS to data region of SRAM from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_SRAM_M_MODE_CACHEDATAARRAY_PMS_0 Configures the permission of CPU's IBUS to SRAM0 from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     <span id="page-363-0">
     </span>
     PMS_CORE_X_IRAM0_PMS_CONSTRAIN_ROM_M_MODE_PMS Configures the permission of CPU's IBUS to ROM from the privileged environment (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-364-1">
   </span>
   <img src="_page_364_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-364-0">
   </span>
   PMS_CORE_0_IRAM0_PMS_MONITOR_LOCKSet this bit to lock CPU0's IBUS interrupt configuration. (R/WL)
  </p>
  <p>
   <span id="page-365-1">
   </span>
   <img src="_page_365_Figure_1.jpeg"/>
  </p>
  <p>
   PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_CLR Set this bit to clear the interrupt triggered when CPU0's IBUS tries to access SRAM or ROM unauthorized. (R/WL)
  </p>
  <p block-type="Text">
   <span id="page-365-0">
   </span>
   PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_EN Set this bit to enable interrupt when CPU0's IBUS tries to access SRAM or ROM unauthorized. (R/WL)
  </p>
  <p>
   <img src="_page_366_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-366-1">
   </span>
   <img src="_page_366_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-366-0">
   </span>
   PMS_CORE_X_DRAM0_PMS_CONSTRAIN_LOCKSet this bit to lock the permission of CPU DBUS to internal SRAM. (R/WL)
  </p>
  <p block-type="Text">
  </p>
  <p>
   <span id="page-367-1">
   </span>
   <img src="_page_367_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_X_DRAM0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_0 Configures the permission of CPU's DBUS to instruction region of SRAM from the privileged environment It's advised to configure this field to 0. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_DRAM0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_1 Configures the permission of CPU's DBUS to data region0 of SRAM from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_DRAM0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_2 Configures the permission of CPU's DBUS to data region1 of SRAM from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_DRAM0_PMS_CONSTRAIN_SRAM_M_MODE_PMS_3 Configures the permission of CPU's DBUS to data region2 of SRAM from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_X_DRAM0_PMS_CONSTRAIN_SRAM_U_MODE_PMS_0 Configures the permission of CPU's DBUS to instruction region of SRAM from the privileged environment It's advised to configure this field to 0. (R/WL)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-367-0">
   </span>
   Continued on the next page...
  </p>
  <p block-type="Text">
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
     GoBack Register 14.34. PMS_CORE_X_DRAM0_PMS_CONSTRAIN_1_REG (0x00C4) Continued from the previous page... PMS_CORE_X_DRAM0_PMS_CONSTRAIN_SRAM_U_MODE_PMS_1 Configures the permission of CPU's DBUS to data region0 of SRAM from the privi- leged environment (R/WL) PMS_CORE_X_DRAM0_PMS_CONSTRAIN_SRAM_U_MODE_PMS_2 Configures the permission of CPU's DBUS to data region1 of SRAM from the privi- leged environment (R/WL) PMS_CORE_X_DRAM0_PMS_CONSTRAIN_SRAM_U_MODE_PMS_3 Configures the permission of CPU's DBUS to data region2 of SRAM from the privi- leged environment (R/WL) PMS_CORE_X_DRAM0_PMS_CONSTRAIN_ROM_M_MODE_PMS Configures the permission of CPU's DBUS to ROM from the privileged environment (R/WL) PMS_CORE_X_DRAM0_PMS_CONSTRAIN_ROM_U_MODE_PMS Configures the permission of CPU's DBUS to ROM from the unpriviledged environment. (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-369-1">
   </span>
   <img src="_page_369_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-369-0">
   </span>
   PMS_CORE_0_DRAM0_PMS_MONITOR_LOCKSet this bit to lock CPU's DBUS interrupt configuration. (R/WL)
  </p>
  <p>
   <span id="page-370-1">
   </span>
   <img src="_page_370_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_DRAM0_PMS_MONITOR_VIOLATE_CLR Set this bit to clear the interrupt triggered when CPU0's dBUS tries to access SRAM or ROMunauthorized. (R/WL)
    </li>
    <li block-type="ListItem">
     <span id="page-370-0">
     </span>
     PMS_CORE_0_DRAM0_PMS_MONITOR_VIOLATE_EN Set this bit to enable interrupt when CPU0's dBUS tries to access SRAM or ROM unauthorized. (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-371-1">
   </span>
   <img src="_page_371_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-371-0">
   </span>
   PMS_CORE_0_PIF_PMS_CONSTRAIN_LOCKSet this bit to lock CPU permission to different peripherals. (R/WL)
  </p>
  <p block-type="Text">
  </p>
  <p>
   <img src="_page_372_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_UART Configures CPU's permission to access UART
   <sup>
    0
   </sup>
   from the privileged environment (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_G0SPI_1 Configures CPU's permission to access SPI
   <sup>
    1
   </sup>
   from the privileged environment (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_G0SPI_0 Configures CPU's permission to access SPI
   <sup>
    0
   </sup>
   from the privileged environment (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_GPIO Configures CPU's permission to access GPIO from the privileged environment (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_RTC Configures CPU's permission to access eFuse Controller &amp; PMU from the privileged environment (R/WL)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_IO_MUXConfigures CPU's permission to access IO_MUX from the privileged environment (R/WL)
  </p>
  <p block-type="Text">
   <span id="page-372-0">
   </span>
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_UART1Configures CPU's permission to access UART
   <sup>
    1
   </sup>
   from the privileged environment (R/WL)
  </p>
  <p block-type="Text">
  </p>
  <p>
   <img src="_page_373_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_I2C_EXT0Configures CPU's permission to access I2C
   <sup>
    0
   </sup>
   from the privileged environment (R/WL)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_UHCI0Configures CPU's permission to access UHCI
   <sup>
    0
   </sup>
   from the privileged environment (R/WL)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_RMT Configures CPU's permission to access Remote Control Peripheral from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_LEDC Configures CPU's permission to access LED PWM Controller from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_TIMERGROUP Configures CPU's permission to access Timer Group
     <sup>
      0
     </sup>
     from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_TIMERGROUP1 Configures CPU's permission to access Timer Group
     <sup>
      1
     </sup>
     from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_SYSTIMER Configures CPU's permission to access System Timer from the privileged environment (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_374_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_374_Figure_1.jpeg"/>
  </p>
  <p>
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_SPI_2Configures CPU's permission to access SPI
   <sup>
    2
   </sup>
   from the privileged environment (R/WL)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_APB_CTRL Configures CPU's permission to access APB Controller from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_CAN Configures CPU's permission to access Two-wire Automotive Interface from the privileged environment (R/WL)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_I2S1Configures CPU's permission to access I2S
   <sup>
    1
   </sup>
   from the privileged environment (R/WL)
  </p>
  <p>
   <img src="_page_375_Figure_1.jpeg"/>
  </p>
  <p>
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_USB_WRAP Configures CPU's permission to access USB OTG External from the privileged environment (R/WL)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_CRYPTO_PERI Configures CPU's permission to access Accelerators from the privileged environment (R/WL)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_CRYPTO_DMAConfigures CPU's permission to access GDMA from the privileged environment (R/WL)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_APB_ADC Configures CPU's permission to access ADC Controller from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_USB_DEVICE Configures CPU's permission to access USB OTG Core from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_SYSTEM Configures CPU's permission to access System Registers from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_PMSConfigures CPU's permission to access PMS Registers from the privileged environment (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_INTERRUPT Configures CPU's permission to access Interrupt Matrix from the privileged environment (R/WL)
    </li>
   </ul>
  </p>
  <p block-type="Text">
  </p>
  <p block-type="Text">
  </p>
  <h1>
   GoBack Register 14.41. PMS_CORE_0_PIF_PMS_CONSTRAIN_4_REG (0x00E8) Continued from the previous page... PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_CACHE_CONFIG Configures CPU's permission to access Cache &amp; XTS_AES from the privileged envi- ronment (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_M_MODE_AD Configures CPU's permission to access Debug Assist from the privileged environment (R/WL)
  </h1>
  <p block-type="Text">
  </p>
  <p block-type="Text">
  </p>
  <p>
   <img src="_page_377_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_UART Configures CPU's permission to access UART
   <sup>
    0
   </sup>
   from the unpriviledged environment. (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_G0SPI_1 Configures CPU's permission to access SPI
   <sup>
    1
   </sup>
   from the unpriviledged environment. (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_G0SPI_0 Configures CPU's permission to access SPI
   <sup>
    0
   </sup>
   from the unpriviledged environment. (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_GPIO Configures CPU's permission to access GPIO from the unpriviledged environment. (R/WL) PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_RTC Configures CPU's permission to access eFuse Controller &amp; PMU from the unpriviledged environment. (R/WL)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_IO_MUXConfigures CPU's permission to access IO_MUX from the unpriviledged environment. (R/WL)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_UART1Configures CPU's permission to access UART
   <sup>
    1
   </sup>
   from the unpriviledged environment. (R/WL)
  </p>
  <p block-type="Text">
  </p>
  <p>
   <img src="_page_378_Figure_1.jpeg"/>
  </p>
  <p>
   PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_I2C_EXT0Configures CPU's permission to access I2C
   <sup>
    0
   </sup>
   from the unpriviledged environment. (R/WL)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_UHCI0Configures CPU's permission to access UHCI
   <sup>
    0
   </sup>
   from the unpriviledged environment. (R/WL)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_RMT Configures CPU's permission to access Remote Control Peripheral from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_LEDC Configures CPU's permission to access LED PWM Controller from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_TIMERGROUP Configures CPU's permission to access Timer Group
     <sup>
      0
     </sup>
     from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_TIMERGROUP1 Configures CPU's permission to access Timer Group
     <sup>
      1
     </sup>
     from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_SYSTIMER Configures CPU's permission to access System Timer from the unpriviledged environment. (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_379_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_379_Figure_1.jpeg"/>
  </p>
  <p>
   PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_SPI_2Configures CPU's permission to access SPI
   <sup>
    2
   </sup>
   from the unpriviledged environment. (R/WL)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_APB_CTRL Configures CPU's permission to access APB Controller from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_CAN Configures CPU's permission to access Two-wire Automotive Interface from the unpriviledged environment. (R/WL)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_I2S1Configures CPU's permission to access I2S
   <sup>
    1
   </sup>
   from the unpriviledged environment. (R/WL)
  </p>
  <p>
   <img src="_page_380_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_USB_WRAP Configures CPU's permission to access USB OTG External from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_CRYPTO_PERI Configures CPU's permission to access Accelerators from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_CRYPTO_DMA Configures CPU's permission to access GDMA from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_APB_ADC Configures CPU's permission to access ADC Controller from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_USB_DEVICE Configures CPU's permission to access USB OTG Core from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_SYSTEM Configures CPU's permission to access System Registers from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_PMS Configures CPU's permission to access PMS Registers from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_INTERRUPT Configures CPU's permission to access Interrupt Matrix from the unpriviledged environment. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_U_MODE_CACHE_CONFIGConfigures CPU's permission to access Cache &amp; XTS_AES from the unpriviledged
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_381_Figure_0.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_RTCFAST_SPLTADDR_M_MODE Configures the address to split RTC Fast Memory into two regions in unpriviledgeddenvironment for CPU. Note you should use address offset, instead of absolute address. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_RTCFAST_SPLTADDR_U_MODE Configures the address to split RTC Fast Memory into two regions in privilegedenvironment for CPU. Note you should use address offset, instead of absolute address. (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_382_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_382_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_RTCFAST_M_MODE_L Configures the permission of CPU from unpriviledgeddenvironment to the lower region of RTC Fast Memory. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_RTCFAST_M_MODE_H Configures the permission of CPU from unpriviledgeddenvironment to the higher region of RTC Fast Memory. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_CONSTRAIN_RTCFAST_U_MODE_L Configures the permission of CPU from privilegedenvironment to the lower region of RTCFast Memory. (R/WL)
    </li>
    <li block-type="ListItem">
     <span id="page-382-0">
     </span>
     PMS_CORE_0_PIF_PMS_CONSTRAIN_RTCFAST_U_MODE_H Configures the permission of CPU from privilegedenvironment to the higher region of RTC Fast Memory. (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-383-1">
   </span>
   <img src="_page_383_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-383-0">
   </span>
   PMS_REGION_PMS_CONSTRAIN_LOCKSet this bit to lock Core0's permission to peripheral regions. (R/WL)
  </p>
  <p>
   <img src="_page_384_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_384_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-384-0">
   </span>
  </p>
  <p block-type="Text">
  </p>
  <p>
   <img src="_page_385_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-385-0">
   </span>
   PMS_REGION_PMS_CONSTRAIN_U_MODE_AREA_0 Configures CPU's permission to Peri Region0 from the unpriviledged environment. (R/WL) PMS_REGION_PMS_CONSTRAIN_U_MODE_AREA_1 Configures CPU's permission to Peri Region1 from the unpriviledged environment. (R/WL) PMS_REGION_PMS_CONSTRAIN_U_MODE_AREA_2 Configures CPU's permission to Peri Region2 from the unpriviledged environment. (R/WL) PMS_REGION_PMS_CONSTRAIN_U_MODE_AREA_3 Configures CPU's permission to Peri Region3 from the unpriviledged environment. (R/WL) PMS_REGION_PMS_CONSTRAIN_U_MODE_AREA_4 Configures CPU's permission to Peri Region4 from the unpriviledged environment. (R/WL) PMS_REGION_PMS_CONSTRAIN_U_MODE_AREA_5 Configures CPU's permission to Peri Region5 from the unpriviledged environment. (R/WL) PMS_REGION_PMS_CONSTRAIN_U_MODE_AREA_6Configures CPU's permission to Peri Region6 from the unpriviledged environment. (R/WL)
  </p>
  <p>
   <img src="_page_386_Figure_0.jpeg"/>
  </p>
  <p>
   PMS_REGION_PMS_CONSTRAIN_ADDR_0Configures the starting address of Region0 for CPU0. (R/WL)
  </p>
  <p>
   Register 14.52. PMS_REGION_PMS_CONSTRAIN_4_REG (0x0114)
  </p>
  <p>
   <img src="_page_386_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-386-0">
   </span>
   PMS_REGION_PMS_CONSTRAIN_ADDR_1Configures the starting address of Region1 for CPU0. (R/WL)
  </p>
  <p>
   <img src="_page_387_Figure_0.jpeg"/>
  </p>
  <p>
   PMS_REGION_PMS_CONSTRAIN_ADDR_2Configures the starting address of Region2 for CPU0. (R/WL)
  </p>
  <p>
   Register 14.54. PMS_REGION_PMS_CONSTRAIN_6_REG (0x011C)
  </p>
  <p>
   <img src="_page_387_Figure_3.jpeg"/>
  </p>
  <p>
   PMS_REGION_PMS_CONSTRAIN_ADDR_3Configures the starting address of Region3 for CPU0. (R/WL)
  </p>
  <p>
   <img src="_page_388_Figure_0.jpeg"/>
  </p>
  <p>
   PMS_REGION_PMS_CONSTRAIN_ADDR_4Configures the starting address of Region4 for CPU0. (R/WL)
  </p>
  <p>
   <img src="_page_388_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_388_Figure_3.jpeg"/>
  </p>
  <p>
   PMS_REGION_PMS_CONSTRAIN_ADDR_5Configures the starting address of Region5 for CPU0. (R/WL)
  </p>
  <p>
   <img src="_page_389_Figure_0.jpeg"/>
  </p>
  <p>
   PMS_REGION_PMS_CONSTRAIN_ADDR_6Configures the starting address of Region6 for CPU0. (R/WL)
  </p>
  <p>
   Register 14.58. PMS_REGION_PMS_CONSTRAIN_10_REG (0x012C)
  </p>
  <p>
   <img src="_page_389_Figure_3.jpeg"/>
  </p>
  <p>
   PMS_REGION_PMS_CONSTRAIN_ADDR_7Configures the starting address of Region7 for CPU0. (R/WL)
  </p>
  <p>
   <span id="page-390-1">
   </span>
   <img src="_page_390_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-390-0">
   </span>
   PMS_CORE_0_PIF_PMS_MONITOR_LOCKSet this bit to lock CPU's PIF interrupt configuration. (R/WL)
  </p>
  <p>
   <img src="_page_391_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-391-1">
   </span>
   <img src="_page_391_Figure_1.jpeg"/>
  </p>
  <p>
   PMS_CORE_0_PIF_PMS_MONITOR_VIOLATE_CLR Set this bit to clear the interrupt triggered when CPU's PIF bus tries to access RTC memory or peripherals unauthorized. (R/WL)
  </p>
  <p block-type="Text">
   <span id="page-391-0">
   </span>
   PMS_CORE_0_PIF_PMS_MONITOR_VIOLATE_EN Set this bit to enable interrupt when CPU's PIF bus tries to access RTC memory or peripherals unauthorized. (R/WL)
  </p>
  <p>
   <img src="_page_392_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-392-0">
   </span>
   <img src="_page_392_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_MONITOR_NONWORD_VIOLATE_CLR Set this bit to clear the interrupt triggered when CPU's PIF bus tries to access RTC memory or peripherals using unsupported data type. (R/WL)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_PIF_PMS_MONITOR_NONWORD_VIOLATE_EN Set this bit to enable interrupt when CPU's PIF bus tries to access RTC memory or peripherals using unsupported data type. (R/WL)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-393-1">
   </span>
   <img src="_page_393_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_DMA_APBPERI_PMS_MONITOR_VIOLATE_INTRStores unauthorized DMA access interrupt status. (RO)
  </p>
  <p block-type="Text">
   <span id="page-393-0">
   </span>
   PMS_DMA_APBPERI_PMS_MONITOR_VIOLATE_STATUS_ADDR Stores the address that triggered the unauthorized DMA address. Note that this is an offset to 0x3c000000 and the unit is 16, which means the actual address should be 0x3c000000
   <sup>
    +
   </sup>
   <a href="#page-393-1">
    PMS_DMA_APBPERI_PMS_MONITOR_VIOLATE_STATUS_ADDR
   </a>
   * 16. (RO)
  </p>
  <p>
   <span id="page-394-1">
   </span>
   <img src="_page_394_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-394-0">
   </span>
   PMS_DMA_APBPERI_PMS_MONITOR_VIOLATE_STATUS_WR Store the direction of unauthorized GDMA access. 1: write, 0: read. (RO) PMS_DMA_APBPERI_PMS_MONITOR_VIOLATE_STATUS_BYTEENStores the byte information of unauthorized GDMA access. (RO)
  </p>
  <p block-type="Text">
  </p>
  <p>
   <span id="page-395-0">
   </span>
   <img src="_page_395_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_INTRStores the interrupt status of CPU's unauthorized IBUS access. (RO)
  </p>
  <p block-type="Text">
   PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_STATUS_WR Indicates the access direction. 1: write, 0: read. Note that this field is only valid when
   <a href="#page-395-0">
    PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_STATUS_LOADSTORE
   </a>
   is 1. (RO)
  </p>
  <p block-type="Text">
   PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_STATUS_LOADSTOREIndicates the instruction direction. 1: load/store, 0: instruction execution. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_STATUS_WORLD Stores the privileged mode the CPU was in when the illegal access happened. 0x01: privilegedenvironment, 0x10: unpriviledged environment. (RO)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_STATUS_ADDR Stores the address that CPU's IBUS was trying to access unauthorized. Note that this is an offset to 0x40000000 and the unit is 4, which means the actual address should be 0x40000000
     <sup>
      +
     </sup>
     PMS_CORE_0_IRAM0_PMS_MONITOR_VIOLATE_STATUS_ADDR * 4. (RO)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_396_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-396-0">
   </span>
   <img src="_page_396_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_CORE_0_DRAM0_PMS_MONITOR_VIOLATE_INTRStores the interrupt status of dBUS unauthorized access. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     PMS_CORE_0_DRAM0_PMS_MONITOR_VIOLATE_STATUS_WORLD Stores the privileged mode the CPU was in when the illegal access happened. 0x01: privilegedenvironment, 0x10: unpriviledged environment. (RO)
    </li>
    <li block-type="ListItem">
     PMS_CORE_0_DRAM0_PMS_MONITOR_VIOLATE_STATUS_ADDR Stores the address that CPU0's dBUS was trying to access unauthorized. Note that this is an offset to 0x3c000000 and the unit is 16, which means the actual address should be 0x3c000000
     <sup>
      +
     </sup>
     <a href="#page-396-0">
      PMS_CORE_0_DRAM0_PMS_MONITOR_VIOLATE_STATUS_ADDR
     </a>
     * 4. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-397-1">
   </span>
   <img src="_page_397_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-397-0">
   </span>
   PMS_CORE_0_DRAM0_PMS_MONITOR_VIOLATE_STATUS_WR Stores the direction of unauthorized access. 0: read, 1: write. (RO) PMS_CORE_0_DRAM0_PMS_MONITOR_VIOLATE_STATUS_BYTEENStores the byte information of illegal access. (RO)
  </p>
  <p>
   <span id="page-398-1">
   </span>
   <img src="_page_398_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_MONITOR_VIOLATE_INTRStores the interrupt status of PIF bus unauthorized access. (RO)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_MONITOR_VIOLATE_STATUS_HPORT_0Stores the type of unauthorized access. 0: instruction. 1: data. (RO)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_MONITOR_VIOLATE_STATUS_HSIZEStores the data type of unauthorized access. 0: byte. 1: half-word. 2: word. (RO)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_MONITOR_VIOLATE_STATUS_HWRITEStores the direction of unauthorized access. 0: read. 1: write. (RO)
  </p>
  <p block-type="Text">
   <span id="page-398-0">
   </span>
   PMS_CORE_0_PIF_PMS_MONITOR_VIOLATE_STATUS_HWORLD Stores the privileged mode the CPU was in when the unauthorized access happened. 01: privileged environment 10: unpriviledged environment. (RO)
  </p>
  <p>
   <span id="page-399-1">
   </span>
   <img src="_page_399_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-399-0">
   </span>
   PMS_CORE_0_PIF_PMS_MONITOR_VIOLATE_STATUS_HADDRStores the address that CPU's PIF bus was trying to access unauthorized. (RO)
  </p>
  <p>
   <img src="_page_400_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-400-1">
   </span>
   <img src="_page_400_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_MONITOR_NONWORD_VIOLATE_INTRStores the interrupt status of PIF upsupported data type. (RO)
  </p>
  <p block-type="Text">
   PMS_CORE_0_PIF_PMS_MONITOR_NONWORD_VIOLATE_STATUS_HSIZEStores the data type when the unauthorized access happened. (RO)
  </p>
  <p block-type="Text">
   <span id="page-400-0">
   </span>
   PMS_CORE_0_PIF_PMS_MONITOR_NONWORD_VIOLATE_STATUS_HWORLD Stores the privileged mode the CPU was in when the unauthorized access happened. 01: privileged environment 10: unpriviledged environment. (RO)
  </p>
  <p>
   <span id="page-401-1">
   </span>
   <img src="_page_401_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-401-2">
   </span>
   PMS_CORE_0_PIF_PMS_MONITOR_NONWORD_VIOLATE_STATUS_HADDR Stores the address that CPU's PIF bus was trying to access using unsupported data type. (RO)
  </p>
  <p>
   <img src="_page_401_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_401_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-401-0">
   </span>
   PMS_CLK_ENSet this bit to force the clock gating always on. (R/W)
  </p>
  <p block-type="Text">
  </p>
  <p>
   <img src="_page_402_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-402-1">
   </span>
   <img src="_page_402_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_402_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-402-0">
   </span>
   <img src="_page_402_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
  </p>
  <p>
   <span id="page-403-2">
   </span>
   <img src="_page_403_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-403-3">
   </span>
   SYSCON_FLASH_ACE
   <i>
    n
   </i>
   _ATTR Configures the permission to Region
   <i>
    n
   </i>
   of Flash. (R/W)
  </p>
  <p>
   <img src="_page_403_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-403-1">
   </span>
   <span id="page-403-0">
   </span>
   SYSCON_FLASH_ACE0_ADDR_S Configure the starting address of Flash Region
   <i>
    <sup>
     n
    </sup>
   </i>
   . The size of each region should be aligned to
   <sup>
    64
   </sup>
   KB. (R/W)
  </p>
  <p>
   <span id="page-404-0">
   </span>
   <img src="_page_404_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-404-1">
   </span>
   SYSCON_FLASH_ACE
   <i>
    n
   </i>
   _SIZE Configure the length of Flash Region
   <i>
    <sup>
     n
    </sup>
   </i>
   . The size of each region should be aligned to
   <sup>
    64
   </sup>
   KB. (R/W)
  </p>
  <p>
   <img src="_page_404_Figure_2.jpeg"/>
  </p>
  <h1>
   Register 14.77. SYSCON_SPI_MEM_PMS_CTRL_REG (0x0088)
  </h1>
  <p>
   SYSCON_SPI_MEM_REJECT_INTIndicates exception accessing external memory and triggers an interrupt. (RO)
  </p>
  <p block-type="Text">
   SYSCON_SPI_MEM_REJECT_CLRSet this bit to clear the exception status. (WT)
  </p>
  <p block-type="Text">
   SYSCON_SPI_MEM_REJECT_CDE Stores the exception cause: invalid region, overlapping regions, illegal write, illegal read and illegal instruction execution. (RO)
  </p>
  <p>
   <img src="_page_405_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-405-1">
   </span>
   <img src="_page_405_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-405-2">
   </span>
   SYSCON_SPI_MEM_REJECT_ADDRStore the execption address.(RO)
  </p>
  <p>
   <img src="_page_405_Figure_3.jpeg"/>
  </p>
  <p>
   <img src="_page_405_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-405-0">
   </span>
   EXTMEM_IBUS_PMS_LOCKSet this bit to lock IBUS' access to Cache IBUS regions. (R/W)
  </p>
  <p>
   <img src="_page_406_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_406_Figure_1.jpeg"/>
  </p>
  <p>
   EXTMEM_IBUS_PMS_BOUNDARY0Configures the starting address of Cache IBUS Region1. (R/W)
  </p>
  <p block-type="Text">
   Register 14.81. EXTMEM_IBUS_PMS_TBL_BOUNDARY1_REG (0x00E0)
  </p>
  <p>
   <span id="page-406-2">
   </span>
   <img src="_page_406_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-406-1">
   </span>
   <span id="page-406-0">
   </span>
   EXTMEM_IBUS_PMS_BOUNDARY1Configures the starting address of Cache IBUS Region2.(R/W)
  </p>
  <p>
   <img src="_page_407_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-407-0">
   </span>
   EXTMEM_IBUS_PMS_BOUNDARY2Configures the starting address of Cache IBUS Region3. (R/W)
  </p>
  <p>
   <span id="page-408-1">
   </span>
   <img src="_page_408_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
     <span id="page-408-0">
     </span>
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_409_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-409-2">
   </span>
  </p>
  <p>
   <span id="page-409-1">
   </span>
   <img src="_page_409_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-409-0">
   </span>
  </p>
  <p>
   <img src="_page_410_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_410_Figure_1.jpeg"/>
  </p>
  <p>
   EXTMEM_DBUS_PMS_BOUNDARY1Configures the starting address of Cache DBUS Region2. (R/W)
  </p>
  <p>
   <img src="_page_410_Figure_3.jpeg"/>
  </p>
  <p>
   <img src="_page_410_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-410-1">
   </span>
   <span id="page-410-0">
   </span>
   EXTMEM_DBUS_PMS_BOUNDARY2Configures the starting address of Cache DBUS Region3. (R/W)
  </p>
  <p>
   <span id="page-411-1">
   </span>
   <img src="_page_411_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
     <span id="page-411-0">
     </span>
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-412-0">
   </span>
   Chapter 15
  </h1>
  <h1>
   World Controller (WCL)
  </h1>
  <h1>
   15.1 Introduction
  </h1>
  <p block-type="Text">
   <span id="page-412-1">
   </span>
   ESP32-C3 allows users to allocate its hardware and software resources into Secure World (World0) and Non-secure World (World1), thus protecting resources from unauthorized access (read or write), and from malicious attacks such as malware, hardware-based monitoring, hardware-level intervention, and so on. CPUs can switch between Secure World and Non-secure World with the help of the World Controller.
  </p>
  <p block-type="Text">
   By default, all resources in ESP32-C3 are shareable. Users can allocate the resources into two worlds by managing respective permission (For details, please refer to Chapter 14
   <i>
    Permission Control (PMS)
   </i>
   ). This chapter only introduces the World Controller and how CPUs can switch between worlds with the help of World Controller.
  </p>
  <h1>
   15.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-412-2">
   </span>
   ESP32-C3's World Controller:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Controls the CPUs to switch between the Secure World and Non-secure World
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Logs CPU's world switches
    </li>
   </ul>
  </p>
  <h1>
   15.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-412-3">
   </span>
   With the help of World Controller, we can allocate different resources to the Secure World and the Non-secure World:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Secure World (World0):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Can access all peripherals and memories;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Performs all security related operations, such user authentication, secure communication, and data encryption and decryption, etc.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Non-secure World (World1):
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Can access some peripherals and memories;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Performs other operations, such as user operation and different applications, etc.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   ESP32-C3's CPU and slave devices are both configurable with permission to either Secure World and/or Non-Secure World:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   CPU can be in either world at a particular time:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     In Secure World: performs confidential operations;
    </li>
    <li block-type="ListItem">
     In Non-secure World: performs non-confidential operations;
    </li>
    <li block-type="ListItem">
     By default, CPU runs in Secure World after power-up, then can be programmed to switch between two worlds.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     All slave devices (including peripherals* and memories) can be configured to be accessible from the Secure World and/or the Non-secure World:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Secure World Access: this slave can be called from Secure World only, meaning it can be accessed only when CPU is in Secure Worl
       <a href="#page-412-3">
        d;
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Non-secure World Access: this slave can be called from Non-secure World only, meaning it can be accessed only when CPU is in Non-secure World.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Note that a slave can be configured to be accessible from both Secure World and Non-secure World simultaneously.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For details, please refer to Chapter 14
   <i>
    Permission Control (PMS)
   </i>
   .
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   * World Controller itself is a peripheral, me
   <a href="#page-314-0">
    aning it also can be granted with
   </a>
   Secure World access and/or Non-secure World access, just like all other peripherals. However, to secure the world switch mechanism, World Controller should not be accessible from Non-secure world. Therefore, world controller should not be granted with Non-secure World access, preventing any modification to world controller from the Non-secure World.
  </p>
  <h4>
   When CPU accesses any slaves:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. First, CPU notifies the slave about its own world information;
    </li>
    <li block-type="ListItem">
     2. Second, slave checks if it can be accessed by CPU based on the CPU's world information and its own world permission configuration.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       if allowed, then this slave responds to CPU;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       if not allowed, then this slave will not respond to CPU and trigger an interrupt.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In this way, the resources in the Secure World will not be illegally accessible by the Non-secure World in an unauthorized way.
  </p>
  <p block-type="Text">
   Note that the following CPU interrupt-related CSR registers can only be written to in the Secure World, and can only be read but not written to in the Non-secure World, thus ensuring that interrupts can only be controlled by the Secure World.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th colspan="5">
      Name
      <br/>
      Description
      <br/>
      Address
      <br/>
      Access
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Machine Trap Setup CSRs
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      mstatus
     </td>
     <td>
      Machine Mode Status
     </td>
     <td>
      0x300
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="6">
      mtvec
      <br/>
      Machine Trap Vector
      <br/>
      0x305
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Machine Trap Handling CSRs
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      mscratch
      <br/>
      mepc
     </td>
     <td>
      Machine Scratch
      <br/>
      Machine Trap Program Counter
     </td>
     <td>
      0x340
      <br/>
      0x341
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      mcause
     </td>
     <td>
      Machine Trap Cause
     </td>
     <td>
      0x342
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      mtval
     </td>
     <td>
      Machine Trap Value
     </td>
     <td>
      0x343
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   15.4 CPU's World Switch
  </h1>
  <p block-type="Text">
   <span id="page-414-0">
   </span>
   CPU can switch from Secure World to Non-secure World, and from Non-secure World to Secure World.
  </p>
  <h1>
   <span id="page-414-1">
   </span>
   15.4.1 From Secure World to Non-secure World
  </h1>
  <p>
   <span id="page-414-2">
   </span>
   <img src="_page_414_Figure_3.jpeg"/>
  </p>
  <p>
   Figure 15.4-1. Switching From Secure World to Non-secure World
  </p>
  <p block-type="Text">
   ESP32-C3's CPU only needs to complete the following steps to switch from Secure World to Non-secure World:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Write 0x2 to Register WCL_CORE_0_WORLD_PERPARE_REG, indicating the CPU needs to switch to the Non-secure World.
    </li>
    <li block-type="ListItem">
     2. Configure Register WCL_CORE_0_World_TRIGGER_ADDR_REG as the entry address to the Non-secure World, i.e., the addre
     <a href="#page-424-0">
      ss of the application in the Non-secure
     </a>
     World that needs to be executed.
    </li>
    <li block-type="ListItem">
     3. Write any value to Register WCL_CORE_0_World_UPDATE_REG, indicating the configuration is done.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   <i>
    •
   </i>
   Registers WCL_CORE
   <i>
    m
   </i>
   _W
   <a href="#page-424-1">
    ORLD_PERPARE_REG
   </a>
   and WCL_CORE_0_World_TRIGGER_ADDR_REG can be configured in any order. Register WCL_CORE_0_World_UPDATE_REG must be configured at last.
  </p>
  <p block-type="Text">
   Afterwards, the
   <a href="#page-424-0">
    World Controller keeps monitoring if
   </a>
   CP
   <a href="#page-423-0">
    U is executing the configured address o
   </a>
   f the application in Non-secure World
   <a href="#page-424-1">
    . CPU switches to the Non-secur
   </a>
   e World once it executes the configured address, and executes the applications in the Non-secure World.
  </p>
  <p block-type="Text">
   After configuration, the World Controller:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Keeps monitoring until the CPU executes the configured address and switches to the Non-secure World.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Write any value to Register WCL_CORE_0_World_Cancel_REG to cancel the World Controller configuration. After the cancellation, CPU will not switch to the Non-secure World even it executes to the configured address.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The World Controller can only s
     <a href="#page-424-2">
      witch from the Secure World to Non
     </a>
     -secure World once per configuration. Therefore, the World Controller needs to be configured again after each world switch to
    </li>
   </ul>
  </p>
  <p block-type="Text">
   prepare it for the next world switch.
  </p>
  <p block-type="Text">
   However, it's worth noting that you cannot call the application in Non-secure world immediately after configuring the World Controller. For reasons such as CPU pre-indexed addressing and pipeline, it is possible that the CPU has already executed the application in Non-secure World before the World Controller configuration is effective, meaning the CPU runs unsecured application in the Secure World.
  </p>
  <p block-type="Text">
   Therefore, you need to make sure the CPU only calls applications in the Non-secure world after the World Controller configuration takes effect. This can be guaranteed by declaring the applications in the Non-secure World as "noinline".
  </p>
  <p>
   <span id="page-415-1">
   </span>
   <img src="_page_415_Figure_3.jpeg"/>
  </p>
  <h1>
   <span id="page-415-0">
   </span>
   15.4.2 From Non-secure World to Secure World
  </h1>
  <p>
   Figure 15.4-2. Switching From Non-secure World to Secure World
  </p>
  <p block-type="Text">
   CPU can only switch from Non-secure World to Secure World via Interrupts (or Exceptions). After configuring the World Controller, the CPU can switch back from Non-secure World to Secure World upon the configured Interrupt trigger.
  </p>
  <h2>
   Configuring the World Controller
  </h2>
  <p block-type="Text">
   The detailed steps to configure the World Controller to switch the CPU from Non-secure World to Secure World are described below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure the entry base address of interrupts or exception WCL_CORE_0_MTVEC_BASE_REG. After that, the World controller populates the monitored addresses for each entry as follows:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Exception entry: WCL_CORE_0_MTVEC_BASE_REG + 0x00
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Interrupt entries: WCL_CORE_0_MTVEC_BASE_REG + 4*
       <i>
        i
       </i>
       (
       <i>
        i
       </i>
       <a href="#page-422-1">
        = 1
       </a>
       ~31)
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that this register
   <a href="#page-422-1">
    must be configured to the mtvec C
   </a>
   SR register of the CPU. When modifying the CPU's mtvec CSR registers, this register also must be updated. For details, please refer to Chapter 1
   <i>
    ESP-RISC-V CPU
   </i>
   .
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     2. Configure Register WCL_CORE_0_ENTRY_CHECK_REG to enable the monitoring of one or more certain entries (0: disable; 1: enable).
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Bit 0 controls the entry monitoring of exception
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Bit
       <i>
        x
       </i>
       controls
       <a href="#page-422-2">
        the entry monitoring of interrupt Entr
       </a>
       y
       <i>
        x
       </i>
       (
       <i>
        x
       </i>
       = 1~31), respectively
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that, once configured, register WCL_CORE_0_ENTRY_CHECK_REG is always effective till it's disabled again, meaning you don't need to configure this register every time after each world switch.
  </p>
  <p block-type="Text">
   3. Configure WCL_CORE_0_MSTATUS_MIE_REG to enable updating the World Switch Log. Otherwise, this log will not be updated for world swi
   <a href="#page-422-2">
    tches. For detailed information abou
   </a>
   t the World Switch Log, see Section 15.5.
  </p>
  <h1>
   15.5
   <a href="#page-416-0">
    Wor
   </a>
   ld Switch Log
  </h1>
  <p block-type="Text">
   <span id="page-416-0">
   </span>
   In actual use cases, CPU is switching between two worlds quite frequently and has to deal with nested interrupts. To be able to restore to the previous world, World Controller keeps a world switching log in a series of registers, which is called "World Switch Log Table".
  </p>
  <h1>
   15.5.1 Structure of World Switch Log Register
  </h1>
  <p block-type="Text">
   <span id="page-416-1">
   </span>
   ESP32-C3's World Switch Log Table consists of 32 WCL_CORE_0_STATUSTABLE
   <i>
    n
   </i>
   _REG(
   <i>
    n
   </i>
   : 0-31) registers (see Figure 15.5-1). The Entry
   <i>
    x
   </i>
   , is logged in WCL_CORE_0_STATUSTABLE
   <i>
    x
   </i>
   _REG.
  </p>
  <p>
   <img src="_page_416_Figure_9.jpeg"/>
  </p>
  <p>
   Figure 15.5-1. World Switch Log Register
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-416-3">
     </span>
     <i>
      •
     </i>
     WCL_CORE_0_FROM_WORLD_
     <i>
      n
     </i>
     : logs the world information before the world switch.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: CPU was in Secure World
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-423-1">
        1: CPU was in Non-secure W
       </a>
       orld
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WCL_CORE_0_FROM_ENTRY_
     <i>
      n
     </i>
     : logs the entry information before the world switch, in total of 6 bits.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0~31: CPU is currently jumping from another interrupt/exception entry 0~31
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-423-1">
        32: CPU was not at any inte
       </a>
       rrupts monitored at any entry
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <span id="page-416-2">
     </span>
     <i>
      •
     </i>
     WCL_CORE_0_CURRENT_
     <i>
      n
     </i>
     : indicates if CPU is at the interrupt monitored at the current entry. When CPU is at the interrupt monitored at Entry
     <i>
      x
     </i>
     ,
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       WCL_CORE_0_CURRENT_
       <i>
        x
       </i>
       is updated to 1;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-423-1">
        and the same field of a
       </a>
       ll other entries are updated to 0.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   15.5.2 How World Switch Log Registers are Updated
  </h1>
  <p block-type="Text">
   To explain this process, assuming:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. At the beginning:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       CPU is running in the Non-secure World;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Registers WCL_CORE_0_STATUSTABLE
       <i>
        n
       </i>
       _REG(
       <i>
        n
       </i>
       : 0-31) are all empty.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Then an interrupt occurs at Entry 9;
    </li>
    <li block-type="ListItem">
     3. Then another
     <a href="#page-423-1">
     </a>
     i
     <a href="#page-423-1">
      nterrupt with higher priority occurs at Entry 1;
     </a>
    </li>
    <li block-type="ListItem">
     4. Then the last interrupt with highest priority occurs at Entry 4.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The World Switch Log Table is updated as described below:
  </p>
  <p block-type="Text">
   <span id="page-417-0">
   </span>
   1. First, an interrupt occurs at Entry 9. At this time, CPU executes to the entry address of this interrupt. The World Switch Log Table is updated as described in Figure 15.5-2:
  </p>
  <p>
   <img src="_page_417_Figure_10.jpeg"/>
  </p>
  <p>
   Figure 15.5-2. Nested Interrupts Handling - Entry 9
  </p>
  <p block-type="Text">
   At this time:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WCL_CORE_0_STATUSTABLE9_REG
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Field WCL_CORE_0_FROM_WORLD_9 is updated to 1, indicating CPU was in Non-secure World before the interrupt;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Field
       <a href="#page-423-1">
        WCL_CORE_0_FROM_ENT
       </a>
       RY_9 is updated to 32, indicating there was not any interrupt befor
       <a href="#page-423-1">
        e this one;
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Field WCL_CORE_0_CURRENT_9 is updated to 1, indicating the CPU is currently at the interrupt moni
       <a href="#page-423-1">
        tored at Entry 9.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Other WCL_CORE_0_STATUSTABLE
     <i>
      n
     </i>
     _REG registers are not updated.
    </li>
    <li block-type="ListItem">
     2. Then another
     <a href="#page-423-1">
     </a>
     i
     <a href="#page-423-1">
      nterrupt with higher priority o
     </a>
     ccurs at Entry 1. At this time, CPU executes to the entry address of this interrupt. The World Switch Log Table is updated again as described in Figure 15.5-3:
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      entry
     </th>
     <th>
      current
     </th>
     <th>
      from_entry
     </th>
     <th>
      from world
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      C
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      9
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      C
     </td>
     <td>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      <math>
       \frac{1}{2}
      </math>
      <math>
       \frac{2}{3}
      </math>
      <math>
       \frac{4}{5}
      </math>
      <math>
       \frac{5}{6}
      </math>
     </td>
     <td>
     </td>
     <td>
      G,
     </td>
     <td>
      ٢,
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Ŭ,
     </td>
     <td>
      O
     </td>
     <td>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      L
     </td>
     <td>
      n
     </td>
     <td>
      Γ
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      C
     </td>
     <td>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      L
     </td>
     <td>
      n
     </td>
     <td>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      <math>
       \overline{8}
      </math>
     </td>
     <td>
      L
     </td>
     <td>
     </td>
     <td>
      ٠,
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
     </td>
     <td>
      32
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </td>
     <td>
     </td>
     <td>
      С
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      3
      <sup>
       2
      </sup>
     </td>
     <td>
     </td>
     <td>
      n
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Figure 15.5-3. Nested Interrupts Handling - Entry 1
  </p>
  <p block-type="Text">
   <span id="page-418-0">
   </span>
   At this time:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WCL_CORE_0_STATUSTABLE1_REG
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Field WCL_CORE_0_FROM_WORLD_1 is updated to 0, indicating the CPU was in Secure World before this interrupt.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Field
       <a href="#page-423-1">
        WCL_CORE_0_FROM_EN
       </a>
       TRY_1 is updated to 9, indicating the CPU was executing the interr
       <a href="#page-423-1">
        upt at Entry 9.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Field WCL_CORE_0_CURRENT_1 is updated to 1, indicating CPU is currently at the interrupt moni
       <a href="#page-423-1">
        tored at Entry 1.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WCL_CORE_0_STATUSTABLE9_REG
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Field
       <a href="#page-423-1">
        WCL_CORE_0_CURRENT_9
       </a>
       is updated to 0, indicating CPU is no longer at the interrupt monitored at Entry 9 (Instead, CPU is at the interrupt monitored at Entry 1 already).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Fields
       <a href="#page-423-1">
        WCL_CORE_0_FROM_WO
       </a>
       RLD_9 and WCL_CORE_0_FROM_ENTRY_9 stay the same.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Other WC
     <a href="#page-423-1">
      L_CORE_0_STATUSTABLE
     </a>
     <i>
      n
     </i>
     _REG registers are not updated.
    </li>
    <li block-type="ListItem">
     <span id="page-418-1">
     </span>
     3. Then the last in
     <a href="#page-423-1">
      terrupt with highest priority occurs
     </a>
     at
     <a href="#page-423-1">
      Entry 4. At this time, CPU execute
     </a>
     s to the entry address of interrupt 4. The World Switch Log Table is updated again as described in Figure 15.5-4:
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_418_Figure_12.jpeg"/>
  </p>
  <p>
   Figure 15.5-4. Nested Interrupts Handling - Entry 4
  </p>
  <p block-type="Text">
   At this time:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   WCL_CORE_0_STATUSTABLE4_REG
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     Field WCL_CORE_0_FROM_WORLD_4 is updated to 0, indicating the CPU was in Secure World before this interrupt.
    </li>
    <li block-type="ListItem">
     Field WCL_CORE_0_FROM_ENTRY_4 is updated to 1, indicating the CPU was the interrupt at Entry
     <a href="#page-423-1">
      1.
     </a>
    </li>
    <li block-type="ListItem">
     Field WCL_CORE_0_CURRENT_4 is updated to 1, indicating the CPU is currently at the interrupt moni
     <a href="#page-423-1">
      tored an Entry 4.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WCL_CORE_0_STATUSTABLE1_REG
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Field
       <a href="#page-423-1">
        WCL_CORE_0_CURRENT_1
       </a>
       is updated to 0, indicating the CPU is no longer at the interrupt monitored at Entry 1 (Instead CPU is at the interrupt monitored at Entry 4 already).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Fields
       <a href="#page-423-1">
        WCL_CORE_0_FROM_W
       </a>
       ORLD_1 and WCL_CORE_0_FROM_ENTRY_1 are not updated.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Other WC
     <a href="#page-423-1">
      L_CORE_0_STATUSTABLE
     </a>
     <i>
      n
     </i>
     _REG registers are not updated.
    </li>
   </ul>
  </p>
  <h1>
   15.5.3 How t
   <a href="#page-423-1">
    o Read World Switch Lo
   </a>
   g
   <a href="#page-423-1">
    Registers
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-419-0">
   </span>
   By reading World
   <a href="#page-423-1">
    Switch Log Registers, we get to und
   </a>
   erstand the information of previous world switches and nested interrupts, thus being able to restore to previous world.
  </p>
  <p block-type="Text">
   Steps are described below: (See Figure 15.5-4 as an example):
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Read Register WCL_CORE_0_STATUSTABLE_CURRENT_REG, and understand CPU is now at the interrupt monitored at Entry 4.
    </li>
    <li block-type="ListItem">
     2. Read 1 from Field WCL_CORE_0_F
     <a href="#page-418-1">
      ROM_E
     </a>
     NTRY_4, and understand the CPU was at an interrupt monitored at
     <a href="#page-423-2">
      Entry 1.
     </a>
    </li>
    <li block-type="ListItem">
     3. Read 9 from Field WCL_CORE_0_FROM_ENTRY_1, and understand the CPU was at an interrupt monitored at Entr
     <a href="#page-423-1">
      y 9.
     </a>
    </li>
    <li block-type="ListItem">
     4. Read 32 from WCL_CORE_0_FROM_ENTRY_9, and understand CPU wasn't at any interrupt. Then read 1 from WCL_CORE
     <a href="#page-423-1">
      _0_FROM_WORLD_9, and unders
     </a>
     tand CPU was in Non-secure World at the beginning.
    </li>
   </ul>
  </p>
  <h1>
   15.5.4 Nest
   <a href="#page-423-1">
    ed Interrupts
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-419-1">
   </span>
   To support
   <a href="#page-423-1">
    interrupt nesting, World controlle
   </a>
   r provides additional configuration to update World Switch Log. See details in Section Programming Procedure below.
  </p>
  <h1>
   15.5.4.1 Programming Procedure
  </h1>
  <h4>
   <span id="page-419-2">
   </span>
   Handling the interrupt
   <a href="#page-419-2">
    at Entry
   </a>
   <i>
    A
   </i>
   :
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Save context.
    </li>
    <li block-type="ListItem">
     2. Configure WCL_CORE_0_MSTATUS_MIE_REG register to enable updating the World Switch Log table.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       After entering the interrupt and exception vector, CPU will automatically turn off the global interrupt enable to avoid interrupt nesting. After saving the context, the global interrupt enable can be turned on a
       <a href="#page-422-3">
        gain to respond to higher-level interru
       </a>
       pts.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       The World Controller WCL_CORE_0_MSTATUS_MIE_REG register also supports a similar feature of global interrupt enable. When any entry trigger is detected, WCL_CORE_0_MSTATUS_MIE_REG will
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   be automatically cleared to 0, and software needs to be enabled again in the interrupt/exception service routine. This register should be configured before turning on the global interrupt enable.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     3. Enable the global interrupt enable.
    </li>
    <li block-type="ListItem">
     4. Execute the interrupt programs.
    </li>
    <li block-type="ListItem">
     5. Disable CPU global interrupt enable.
    </li>
    <li block-type="ListItem">
     6. Read Field WCL_CORE_0_FROM_ENTRY_
     <i>
      A
     </i>
     for Entry
     <i>
      A
     </i>
     :
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       32: indicates all interrupts are handled, and return to a normal program,
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         (a) Update Field
         <a href="#page-423-1">
          WCL_CORE_0_CURR
         </a>
         ENT_
         <i>
          A
         </i>
         of Entry
         <i>
          A
         </i>
         to 0, indicating the CPU is no longer at the interrupt monitored at Entry
         <i>
          A
         </i>
         .
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         (b) Go to Step 7.
        </li>
       </ul>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0~31: indicates t
       <a href="#page-423-1">
        he CPU returns to another int
       </a>
       errupt monitored at Entry
       <i>
        B
       </i>
       ,
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         Update the
         <a href="#page-420-0">
          w
         </a>
         orld switch register of Entry
         <i>
          A
         </i>
         :
         <ul>
          <li block-type="ListItem" class="list-indent-3">
           * Update Field WCL_CORE_0_CURRENT_
           <i>
            A
           </i>
           to 0, indicating the CPU is no longer at the interrupt monitored at Entry
           <i>
            A
           </i>
           .
          </li>
         </ul>
         <ul>
          <li block-type="ListItem" class="list-indent-3">
           * Fields WCL_CORE_0_FROM_WORLD_
           <i>
            A
           </i>
           and WCL_CORE_0_FROM_ENTRY_
           <i>
            A
           </i>
           stay the same.
          </li>
         </ul>
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         Update the world switch register of Entry
         <i>
          B
         </i>
         :
         <ul>
          <li block-type="ListItem" class="list-indent-3">
           * Update Field
           <a href="#page-423-1">
            WCL_CORE_0_CURRENT_
           </a>
           <i>
            B
           </i>
           to
           <a href="#page-423-1">
            1, indicating the CPU will return to
           </a>
           Entry
           <i>
            B
           </i>
           .
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <span id="page-420-0">
     </span>
     7. Prepare to exit interrupt.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Check if CPU needs
       <a href="#page-423-1">
        to switch to the other world:
       </a>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         <i>
          •
         </i>
         If world switch not required, then go to Step 8.
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         <i>
          •
         </i>
         If world switch required, then switch the CPU to the other world following instructions described in Section 15.4, then go to Step 8.
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     8. Enable interrupts, restore context and exit.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   Steps 6 and 7 should not be interrupted by any interrupts. Therefore, users need to disable all the interrupts before these steps, and enable interrupts once done.
  </p>
  <h1>
   15.6 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-421-0">
   </span>
   The addresses in this section are relative to the World Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th colspan="7">
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      WORLD1 to WORLD0 Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_MTVEC_BASE_REG
      <br/>
      WCL_Core_0_MSTATUS_MIE_REG
     </td>
     <td>
      MTVEC configuration
      <br/>
      MSTATUS_MIE configuration
     </td>
     <td>
      0x0000
      <br/>
      0x0004
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_ENTRY_CHECK_REG
     </td>
     <td>
      CPU entry check configuration
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      StatusTable Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td rowspan="2">
      R/W
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_STATUSTABLEn_REG (n: 0-31)
     </td>
     <td>
      Entry n world switching status
     </td>
     <td>
      0x0040
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Represetns the entry where the
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_STATUSTABLE_CURRENT_REG
     </td>
     <td>
      interrupt is currently at
     </td>
     <td>
      0x00E0
     </td>
     <td rowspan="2">
      R/W
     </td>
    </tr>
    <tr>
     <td>
      WORLD0 to WORLD1 Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      CPU trigger address
     </td>
     <td>
     </td>
     <td rowspan="2">
      RW
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_World_TRIGGER_ADDR_REG
     </td>
     <td>
      configuration
     </td>
     <td>
      0x0140
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_World_PREPARE_REG
     </td>
     <td>
      CPU world switching preparation
     </td>
     <td>
      0x0144
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      configuration
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_World_UPDATE_REG
     </td>
     <td>
      CPU world switching update
     </td>
     <td>
      0x0148
     </td>
     <td rowspan="2">
      WO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      configuration
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_World_Cancel_REG
     </td>
     <td>
      CPU world switching cancel
     </td>
     <td>
      0x014C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      configuration
     </td>
     <td>
     </td>
     <td rowspan="2">
      R/W
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_World_IRam0_REG
     </td>
     <td>
      CPU IBUS world info
     </td>
     <td>
      0x0150
     </td>
    </tr>
    <tr>
     <td>
      WCL_Core_0_World_DRam0_PIF_REG
     </td>
     <td>
      CPU DBUS and PIF bus world
     </td>
     <td>
      0x0154
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   15.7 Registers
  </h1>
  <p block-type="Text">
   <span id="page-422-0">
   </span>
   The addresses in this section are relative to the World Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-422-1">
   </span>
   <img src="_page_422_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_MTVEC_BASE Configures the MTVEC base address, which should be kept consistent with the MTVEC in RISC-V. (R/W)
  </p>
  <p>
   <span id="page-422-3">
   </span>
   <img src="_page_422_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_MSTATUS_MIE Write 1 to enable World Switch Log Table. Only when the bit is set, the world switching is recorded in the World Switch Log Table. This bit is cleared once CPU switches from the Non-secure World to Secure World. (R/W)
  </p>
  <p>
   <span id="page-422-2">
   </span>
   <img src="_page_422_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_ENTRY_CHECK Write 1 to enable CPU switching from Non-secure World to Secure world upon the monitored addresses. (R/W)
  </p>
  <p>
   <img src="_page_423_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-423-1">
   </span>
   <img src="_page_423_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_FROM_WORLD_
   <i>
    n
   </i>
   Stores the world info before CPU entering entry
   <i>
    n
   </i>
   . (R/W) WCL_CORE_0_FROM_ENTRY_
   <i>
    n
   </i>
   Stores the previous entry info before CPU entering entry
   <i>
    n
   </i>
   .(R/W) WCL_CORE_0_CURRENT_
   <i>
    n
   </i>
   Represents if the interrupt is at entry
   <i>
    n
   </i>
   . (R/W)
  </p>
  <h4>
   Register 15.5. WCL_Core_0_STATUSTABLE_CURRENT_REG (0x00E0)
  </h4>
  <p>
   <span id="page-423-2">
   </span>
   <img src="_page_423_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_STATUSTABLE_CURRENT Represents the entry where the interrupt is currently at. (R/W)
  </p>
  <p>
   <span id="page-423-0">
   </span>
   <img src="_page_423_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_WORLD_TRIGGER_ADDR Configures the entry address at which CPU switches from Secure World to Non-secure World. (RW)
  </p>
  <p>
   <span id="page-424-0">
   </span>
   <img src="_page_424_Figure_0.jpeg"/>
  </p>
  <h4>
   WCL_CORE_0_WORLD_PREPARE Configures the world to switch to.
  </h4>
  <p block-type="Text">
   0x1: reserved 0x2: Non-secure World (R/W)
  </p>
  <p>
   <span id="page-424-1">
   </span>
   <img src="_page_424_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_UPDATE Write any value to this field to indicate the completion of CPU configuration for switching from Secure World to Non-Secure World. (WO)
  </p>
  <p>
   <span id="page-424-2">
   </span>
   <img src="_page_424_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_WORLD_CANCEL Write any value to this filed to cancel the CPU configuration for switching from Secure World to Non-Secure World. (WO)
  </p>
  <p>
   <span id="page-425-0">
   </span>
   <img src="_page_425_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_WORLD_IRAM0 Stores the world info of CPU's instruction bus. Only used for debugging. (R/W)
  </p>
  <p>
   <img src="_page_425_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_425_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_WORLD_DRAM0_PIF Stores the world info of CPU's data bus and peripheral bus. Only used for debugging. (R/W)
  </p>
  <p>
   <img src="_page_425_Figure_5.jpeg"/>
  </p>
  <p>
   <img src="_page_425_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   WCL_CORE_0_WORLD_PHASE Represents if the CPU is ready to switch from Non-secure World to Secure World.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1: ready 2: not ready
    </li>
    <li block-type="ListItem">
     (RO)
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-426-6">
   </span>
   <span id="page-426-0">
   </span>
   Chapter 16
  </h1>
  <h1>
   System Registers (SYSREG)
  </h1>
  <h1>
   16.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-426-1">
   </span>
   The ESP32-C3 integrates a large number of peripherals, and enables the control of individual peripherals to achieve optimal characteristics in performance-vs-power-consumption scenarios. Specifically, ESP32-C3 has various system configuration registers that can be used for the chip's clock management (clock gating), power management, and the configuration of peripherals and core-system modules. This chapter lists all these system registers and their functions.
  </p>
  <h1>
   16.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-426-2">
   </span>
   ESP32-C3 system registers can be used to control the following peripheral blocks and core modules:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     System and memory
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Clock
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Software Interrupt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Low-power management
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Peripheral clock gating and reset
    </li>
   </ul>
  </p>
  <h1>
   16.3 Function Description
  </h1>
  <h1>
   <span id="page-426-3">
   </span>
   16.3.1 System and Memory Registers
  </h1>
  <h2>
   <span id="page-426-4">
   </span>
   16.3.1.1 Internal Memory
  </h2>
  <p block-type="Text">
   The following registers can be used to control ESP32-C3's internal memory:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-426-5">
     </span>
     <i>
      •
     </i>
     In register SYSCON_CLKGATE_FORCE_ON_REG:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Setting different bits of the SYSCON_ROM_CLKGATE_FORCE_ON field forces on the clock gates of different blocks of Internal ROM 0 and Internal ROM 1.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Setti
       <a href="#page-443-0">
        ng different bits of the
       </a>
       SYSCON_SRAM_CLKGATE_FORCE_ON field forces on the clock gates of different blocks of Intern
       <a href="#page-443-0">
        al SRAM.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       This means when the respective bits of this register are set to 1, the clock gate of the corresponding ROM or SR
       <a href="#page-443-0">
        AM blocks will always be on. Otherwise,
       </a>
       the clock gate will turn on automatically when the corresponding ROM or SRAM blocks are accessed and turn off
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   automatically when the corresponding ROM or SRAM blocks are not accessed. Therefore, it's recommended to configure these bits to 0 to lower power consumption.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In register SYSCON_MEM_POWER_DOWN_REG:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Setting different bits of the SYSCON_ROM_POWER_DOWN field sends different blocks of Internal ROM 0 and Internal ROM 1 into retention state.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Setti
       <a href="#page-444-0">
        ng different bits of the
       </a>
       SYSCON_SRAM_POWER_DOWN field sends different blocks of Internal SRAM into retention state.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The "Retention" state is a low-power state of a memory block. In this state, the memory block still holds all the data stored bu
       <a href="#page-444-0">
        t cannot be accessed, thus redu
       </a>
       cing the power consumption. Therefore, you can send a certain block of memory into the retention state to reduce power consumption if you know you are not going to use such memory block for some time.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In register SYSCON_MEM_POWER_UP_REG:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       By default, all memory enters low-power state when the chip enters the Light-sleep mode.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Setti
       <a href="#page-444-1">
        ng different bits of the
       </a>
       SYSCON_ROM_POWER_UP field forces different blocks of Internal ROM 0 and Internal ROM 1 to work as normal (do not enter the retention state) when the chip enters Light-sleep.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Setting different bits of the
       <a href="#page-444-1">
        SYSCON_SRAM_POWER_UP
       </a>
       field forces different blocks of Internal SRAM to work as normal (do not enter the retention state) when the chip enters Light-sleep.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For detailed information about the controlling bits of different blocks, please see Table 16.3-1 below.
  </p>
  <span id="page-427-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 16.3-1. Memory Controlling Bit
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Memory
     </td>
     <td>
      Lowest Address1
     </td>
     <td>
      Highest Address1
     </td>
     <td>
      Lowest Address2
     </td>
     <td>
      Highest Address2
     </td>
     <td>
      Controlling Bit
     </td>
    </tr>
    <tr>
     <td>
      ROM 0
     </td>
     <td>
      0x4000_0000
     </td>
     <td>
      0x4003_FFFF
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      Bit0
     </td>
    </tr>
    <tr>
     <td>
      ROM 1
     </td>
     <td>
      0x4004_0000
     </td>
     <td>
      0x4005_FFFF
     </td>
     <td>
      0x3FF0_0000
     </td>
     <td>
      0x3FF1_FFFF
     </td>
     <td>
      Bit1
     </td>
    </tr>
    <tr>
     <td>
      SRAM Block 0
     </td>
     <td>
      0x4037_C000
     </td>
     <td>
      0x4037_FFFF
     </td>
     <td>
      -
     </td>
     <td>
      -
     </td>
     <td>
      Bit0
     </td>
    </tr>
    <tr>
     <td>
      SRAM Block 1
     </td>
     <td>
      0x4038_0000
     </td>
     <td>
      0x4039_FFFF
     </td>
     <td>
      0x3FC8_0000
     </td>
     <td>
      0x3FC9_FFFF
     </td>
     <td>
      Bit1
     </td>
    </tr>
    <tr>
     <td>
      SRAM Block 2
     </td>
     <td>
      0x403A_0000
     </td>
     <td>
      0x403B_FFFF
     </td>
     <td>
      0x3FCA_0000
     </td>
     <td>
      0x3FCB_FFFF
     </td>
     <td>
      Bit2
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <a href="#page-444-1">
    Table 16.3-1. Memory Contro
   </a>
   lling Bit
  </h4>
  <p block-type="Text">
   For more information, please refer to Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <h1>
   16.3.1.2 External Memory
  </h1>
  <p block-type="Text">
   <span id="page-427-0">
   </span>
   SYSTEM_EXTERNAL_DEVICE_ENCRYPT_DEC
   <a href="#page-90-0">
    RYPT_CONTROL_REG
   </a>
   configures encryption and decryption options of the external memory. For details, please refer to Chapter 23
   <i>
    External Memory Encryption and Decryption (XTS_AES)
   </i>
   .
  </p>
  <h2>
   16.3.1.3 RSA Memory
  </h2>
  <p block-type="Text">
   <span id="page-427-1">
   </span>
   <a href="#page-533-0">
    SYSTEM_RSA_PD_CTR
   </a>
   L_REG controls the SRAM memory in the RSA accelerator.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Setting the SYSTEM_RSA_MEM_PD bit to send the RSA memory into retention state. This bit has the lowest priority, meaning it can be masked by the SYSTEM_RSA_MEM_FORCE_PU field. This bit is invalid when the
   <i>
    <a href="#page-442-0">
     Digital Signatur
    </a>
    e (DS)
   </i>
   occupies the RSA.
  </p>
  <p block-type="Text">
   Espressif System
   <a href="#page-442-0">
    s
   </a>
   428
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Setting the SYSTEM_RSA_MEM_FORCE_PU bit to force the RSA memory to work as normal when the chip enters light sleep. This bit has the second highest priority, meaning it overrides the SYSTEM_RSA_MEM_PD field.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Setting the
     <a href="#page-442-0">
      SYSTEM_RSA_MEM_FORCE_PD
     </a>
     bit to send the RSA memory into retention state. This bit has the highest priority, meaning it sends the RSA memory into retention state regardless of the
     <a href="#page-442-0">
      SYSTEM_RSA_MEM_FOR
     </a>
     CE_PU field.
    </li>
   </ul>
  </p>
  <h1>
   16.3.2 Clock Registers
  </h1>
  <p block-type="Text">
   <span id="page-428-0">
   </span>
   The
   <a href="#page-442-0">
   </a>
   f
   <a href="#page-442-0">
    ollowing registers are used to set
   </a>
   clock sources and frequency. For more information, please refer to Chapter 6
   <i>
    Reset and Clock
   </i>
   .
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_CPU_PER_CONF_REG
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SY
     <a href="#page-190-0">
      STEM_SYSCLK_CO
     </a>
     NF_REG
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-438-1">
      SYSTEM_BT_LPCK_DIV_FRAC_R
     </a>
     EG
    </li>
   </ul>
  </p>
  <h1>
   16.3.3
   <a href="#page-439-0">
    Interrupt Signal R
   </a>
   egisters
  </h1>
  <p block-type="Text">
   <span id="page-428-1">
   </span>
   The
   <a href="#page-438-0">
   </a>
   f
   <a href="#page-438-0">
    ollowing registers are used for gener
   </a>
   ating the interrupt signals (software interrupt), which then can be routed to the CPU peripheral interrupts via the interrupt matrix. To be more specific, writing 1 to any of the following registers generates an interrupt signal. Therefore, these registers can be used by software to control interrupts. The following registers correspond to the interrupt source SW_INTR_0/1/2/3. For more information, please refer to Chapter 8
   <i>
    Interrupt Matrix (INTERRUPT)
   </i>
   .
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_CPU_INTR_FROM_CPU_0_REG
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_CPU_IN
     <a href="#page-201-0">
      TR_FROM_CPU_1_REG
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-440-0">
      SYSTEM_CPU_INTR_FROM_CPU_2_REG
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-440-1">
      SYSTEM_CPU_INTR_FROM_CPU_3_REG
     </a>
    </li>
   </ul>
  </p>
  <h1>
   16.3.4
   <a href="#page-441-0">
    Low-power Managemen
   </a>
   t Registers
  </h1>
  <p block-type="Text">
   <span id="page-428-2">
   </span>
   The
   <a href="#page-441-1">
   </a>
   f
   <a href="#page-441-1">
    ollowing registers are used for low-power
   </a>
   management. For more information, please refer to Chapter 9
   <i>
    Low-power Management
   </i>
   .
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_RTC_FASTMEM_CONFIG_REG: configures the RTC CRC check.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-218-0">
      SYSTEM_RTC_FAST
     </a>
     MEM_CRC_REG: configures the CRC check value.
    </li>
   </ul>
  </p>
  <h1>
   16.3.5
   <a href="#page-439-1">
    Peripheral Clock Gating
   </a>
   and Reset Registers
  </h1>
  <p block-type="Text">
   <span id="page-428-3">
   </span>
   The
   <a href="#page-440-2">
   </a>
   f
   <a href="#page-440-2">
    ollowing registers are used for contro
   </a>
   lling the clock gating and reset of different peripherals. Details can be seen in Table 16.3-2.
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_CACHE_CONTROL_REG
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_P
     <a href="#page-429-0">
      ERIP_C
     </a>
     LK_EN0_REG
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-437-1">
      SYSTEM_PERIP_RST_EN0_REG
     </a>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_PERIP_CLK_EN1_REG
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_PERIP_RST_EN1_REG
    </li>
   </ul>
  </p>
  <p block-type="Text">
   ESP3
   <a href="#page-435-0">
    2-C3 features low power consu
   </a>
   mption. This is why some peripheral clocks are gated (disabled) by default. Before using any of these peripherals, it is mandatory to enable the clock for the given peripheral and relea
   <a href="#page-437-0">
    se the peripheral from reset stat
   </a>
   e. For details, see the table below:
  </p>
  <span id="page-429-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Table 16.3-2. Clock Gating and Reset Bits
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Component
     </td>
     <td>
      Clock Enabling Bit 1
     </td>
     <td>
      Reset Controlling Bit 2 3
     </td>
    </tr>
    <tr>
     <td>
      CACHE Control
     </td>
     <td>
     </td>
     <td>
      SYSTEM_CACHE_CONTROL_REG
     </td>
    </tr>
    <tr>
     <td>
      DCACHE
     </td>
     <td>
      SYSTEM_DCACHE_CLK_ON
     </td>
     <td>
      SYSTEM_DCACHE_RESET
     </td>
    </tr>
    <tr>
     <td>
      ICACHE
     </td>
     <td>
      SYSTEM_ICACHE_CLK_ON
     </td>
     <td>
      SYSTEM_ICACHE_RESET
     </td>
    </tr>
    <tr>
     <td>
      CPU
     </td>
     <td>
      SYSTEM_CPU_PERI_CLK_EN_REG
     </td>
     <td>
      SYSTEM_CPU_PERI_RST_EN_REG
     </td>
    </tr>
    <tr>
     <td>
      DEBUG_ASSIST
     </td>
     <td>
      SYSTEM_CLK_EN_ASSIST_DEBUG
     </td>
     <td>
      SYSTEM_RST_EN_ASSIST_DEBUG
     </td>
    </tr>
    <tr>
     <td>
      Peripherals
     </td>
     <td>
      SYSTEM_PERIP_CLK_EN0_REG
     </td>
     <td>
      SYSTEM_PERIP_RST_EN0_REG
     </td>
    </tr>
    <tr>
     <td>
      TIMER
     </td>
     <td>
      SYSTEM_TIMERS_CLK_EN
     </td>
     <td>
      SYSTEM_TIMERS_RST
     </td>
    </tr>
    <tr>
     <td>
      SPI0 / SPI1
     </td>
     <td>
      SYSTEM_SPI01_CLK_EN
     </td>
     <td>
      SYSTEM_SPI01_RST
     </td>
    </tr>
    <tr>
     <td>
      UART0
     </td>
     <td>
      SYSTEM_UART_CLK_EN
     </td>
     <td>
      SYSTEM_UART_RST
     </td>
    </tr>
    <tr>
     <td>
      UART1
     </td>
     <td>
      SYSTEM_UART1_CLK_EN
     </td>
     <td>
      SYSTEM_UART1_RST
     </td>
    </tr>
    <tr>
     <td>
      I2S
     </td>
     <td>
      SYSTEM_I2S0_CLK_EN
     </td>
     <td>
      SYSTEM_I2S0_RST
     </td>
    </tr>
    <tr>
     <td>
      SPI2
     </td>
     <td>
      SYSTEM_SPI2_CLK_EN
     </td>
     <td>
      SYSTEM_SPI2_RST
     </td>
    </tr>
    <tr>
     <td>
      I2C0
     </td>
     <td>
      SYSTEM_EXT0_CLK_EN
     </td>
     <td>
      SYSTEM_EXT0_RST
     </td>
    </tr>
    <tr>
     <td>
      UHCI0
     </td>
     <td>
      SYSTEM_UHCI0_CLK_EN
     </td>
     <td>
      SYSTEM_UHCI0_RST
     </td>
    </tr>
    <tr>
     <td>
      RMT
     </td>
     <td>
      SYSTEM_RMT_CLK_EN
     </td>
     <td>
      SYSTEM_RMT_RST
     </td>
    </tr>
    <tr>
     <td>
      LED PWM Controller
      <br/>
      Timer Group0
     </td>
     <td>
      SYSTEM_LEDC_CLK_EN
      <br/>
      SYSTEM_TIMERGROUP_CLK_EN
     </td>
     <td>
      SYSTEM_LEDC_RST
      <br/>
      SYSTEM_TIMERGROUP_RST
     </td>
    </tr>
    <tr>
     <td>
      Timer Group1
     </td>
     <td>
      SYSTEM_TIMERGROUP1_CLK_EN
     </td>
     <td>
      SYSTEM_TIMERGROUP1_RST
     </td>
    </tr>
    <tr>
     <td>
      TWAI Controller
     </td>
     <td>
      SYSTEM_CAN_CLK_EN
     </td>
     <td>
      SYSTEM_CAN_RST
     </td>
    </tr>
    <tr>
     <td>
      USB_DEVICE
     </td>
     <td>
      SYSTEM_USB_DEVICE_CLK_EN
     </td>
     <td>
      SYSTEM_USB_DEVICE_RST
     </td>
    </tr>
    <tr>
     <td>
      UART MEM
     </td>
     <td>
      SYSTEM_UART_MEM_CLK_EN 4
     </td>
     <td>
      SYSTEM_UART_MEM_RST
     </td>
    </tr>
    <tr>
     <td>
      APB SARADC
     </td>
     <td>
      SYSTEM_APB_SARADC_CLK_EN
     </td>
     <td>
      SYSTEM_APB_SARADC_RST
     </td>
    </tr>
    <tr>
     <td>
      ADC Controller
     </td>
     <td>
      SYSTEM_ADC2_ARB_CLK_EN
     </td>
     <td>
      SYSTEM_ADC2_ARB_RST
     </td>
    </tr>
    <tr>
     <th>
      System Timer
     </th>
     <th>
      SYSTEM_SYSTIMER_CLK_EN
     </th>
     <th>
      SYSTEM_SYSTIMER_RST
     </th>
    </tr>
    <tr>
     <td>
      Accelerators
     </td>
     <td>
      SYSTEM_PERIP_CLK_EN1_REG
     </td>
     <td>
      SYSTEM_PERIP_RST_EN1_REG
     </td>
    </tr>
    <tr>
     <td>
      TSENS
     </td>
     <td>
      SYSTEM_TSENS_CLK_EN
     </td>
     <td>
      SYSTEM_TSENS_RST
     </td>
    </tr>
    <tr>
     <td>
      DMA
     </td>
     <td>
      SYSTEM_DMA_CLK_EN
     </td>
     <td>
      SYSTEM_DMA_RST5
     </td>
    </tr>
    <tr>
     <td>
      HMAC
     </td>
     <td>
      SYSTEM_CRYPTO_HMAC_CLK_EN
     </td>
     <td>
      SYSTEM_CRYPTO_HMAC_RST 6
     </td>
    </tr>
    <tr>
     <td>
      Digital Signature
     </td>
     <td>
      SYSTEM_CRYPTO_DS_CLK_EN
     </td>
     <td>
      SYSTEM_CRYPTO_DS_RST 7
     </td>
    </tr>
    <tr>
     <td>
      RSA Accelerator
     </td>
     <td>
      SYSTEM_CRYPTO_RSA_CLK_EN
     </td>
     <td>
      SYSTEM_CRYPTO_RSA_RST
     </td>
    </tr>
    <tr>
     <td>
      SHA Accelerator
     </td>
     <td>
      SYSTEM_CRYPTO_SHA_CLK_EN
     </td>
     <td>
      SYSTEM_CRYPTO_SHA_RST
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 16.3-2. Clock Gating and Reset Bits
  </h4>
  <table>
   <tbody>
    <tr>
     <th colspan="4">
     </th>
    </tr>
    <tr>
     <td>
      Chapter 16
      <br/>
      System Registers (SYSREG)
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 Set the clock enable bit to 1 to enable the clock, and to 0 to disable the clock;
  </p>
  <p block-type="Text">
   2 Set the reset enabling bit to 1 to reset a peripheral, and to 0 to disable the reset.
  </p>
  <p block-type="Text">
   3 Reset registers cannot be cleared by hardware. Therefore, SW reset clear is required after setting the reset registers.
  </p>
  <p block-type="Text">
   4 UART memory is shared by all UART peripherals, meaning having any active UART peripherals will prevent the UART memory from entering the clock-gated state.
  </p>
  <p block-type="Text">
   5 When DMA is required for periphral communications, for example, UCHI0, SPI2, I2S, AES, SHA, and ADC, DMA clock should also be enabled.
  </p>
  <p block-type="Text">
   6 Resetting this bit also resets the SHA accelerator.
  </p>
  <p block-type="Text">
   7 Resetting this bit also resets the AES, SHA, and RSA accelerators.
  </p>
  <h1>
   16.4 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-431-0">
   </span>
   The addresses in this section are relative to the base address of system registers provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="8">
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Peripheral Clock Control Registers
      <br/>
      SYSTEM_CPU_PERI_CLK_EN_REG
     </td>
     <td>
      CPU peripheral clock enable register
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_CPU_PERI_RST_EN_REG
     </td>
     <td>
      CPU peripheral clock reset register
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_PERIP_CLK_EN0_REG
     </td>
     <td>
      System peripheral clock enable register 0
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_PERIP_CLK_EN1_REG
     </td>
     <td>
      System peripheral clock enable register 1
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_PERIP_RST_EN0_REG
     </td>
     <td>
      System peripheral clock reset register 0
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_PERIP_RST_EN1_REG
     </td>
     <td>
      System peripheral clock reset register 1
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_CACHE_CONTROL_REG
     </td>
     <td>
      Cache clock control register
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Clock Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_CPU_PER_CONF_REG
     </td>
     <td>
      CPU clock configuration register
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_SYSCLK_CONF_REG
     </td>
     <td>
      System clock configuration register
     </td>
     <td>
      0x0058
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      Low-power Management Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_BT_LPCK_DIV_FRAC_REG
     </td>
     <td>
      Low-power clock configuration register 1
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_RTC_FASTMEM_CONFIG_REG
     </td>
     <td>
      Fast memory CRC configuration register
     </td>
     <td>
      0x0048
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_RTC_FASTMEM_CRC_REG
     </td>
     <td>
      Fast memory CRC result register
     </td>
     <td>
      0x004C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      CPU Interrupt Control Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_CPU_INTR_FROM_CPU_0_REG
     </td>
     <td>
      CPU interrupt control register 0
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_CPU_INTR_FROM_CPU_1_REG
     </td>
     <td>
      CPU interrupt control register 1
     </td>
     <td>
      0x002C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="7">
      SYSTEM_CPU_INTR_FROM_CPU_2_REG
      <br/>
      CPU interrupt control register 2
      <br/>
      0x0030
      <br/>
      R/W
      <br/>
      SYSTEM_CPU_INTR_FROM_CPU_3_REG
      <br/>
      CPU interrupt control register 3
      <br/>
      0x0034
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      System and Memory Control Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_RSA_PD_CTRL_REG
     </td>
     <td>
      RSA memory power control register
     </td>
     <td>
      0x0038
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSTEM_EXTERNAL_DEVICE_ENCRYPT_
     </td>
     <td>
      External memory encryption and decryp
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="5">
      DECRYPT_CONTROL_REG
      <br/>
      tion control register
     </td>
    </tr>
    <tr>
     <td>
      Clock Gate Control Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="6">
      SYSTEM_CLOCK_GATE_REG
      <br/>
      Clock gate control register
      <br/>
      0x0054
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Date Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   The addresses below are relative to the base address of apb control provided in Table 3.3-3 in Chapter 3
   <i>
    S
    <a href="#page-443-1">
     ystem and Memory
    </a>
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Name
      <br/>
      Configuration Register
     </th>
     <th>
      Description
     </th>
     <th>
      Address
     </th>
     <th>
      Access
     </th>
    </tr>
    <tr>
     <td>
      SYSCON_CLKGATE_FORCE_ON_REG
     </td>
     <td>
      Internal memory clock gate enable register
     </td>
     <td>
      0x00A4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SYSCON_MEM_POWER_DOWN_REG
     </td>
     <td>
      Internal memory control register
     </td>
     <td>
      0x00A8
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 16
      <br/>
      System Registers (SYSREG)
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   16.5 Registers
  </h1>
  <p block-type="Text">
   <span id="page-433-0">
   </span>
   The addresses below are relative to the base address of system register provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-433-1">
   </span>
   <img src="_page_433_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   Register 16.1. SYSTEM_CPU_PERI_CLK_EN_REG (0x0000)
  </p>
  <p block-type="Text">
   SYSTEM_CLK_EN_ASSIST_DEBUG Set this bit to enable the ASSIST_DEBUG clock. Please see Chapter 17
   <i>
    Debug Assistant (ASSIST_DEBUG)
   </i>
   for more information about ASSIST_DEBUG. (R/W)
  </p>
  <p>
   <img src="_page_433_Figure_5.jpeg"/>
  </p>
  <p>
   <span id="page-433-2">
   </span>
   <img src="_page_433_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_RST_EN_ASSIST_DEBUG Set this bit to reset the ASSIST_DEBUG clock. Please see Chapter 17
   <i>
    Debug Assistant (ASSIST_DEBUG)
   </i>
   for more information about ASSIST_DEBUG. (R/W)
  </p>
  <h4>
   <span id="page-434-0">
   </span>
   Register 16.3. SYSTEM_PERIP_CLK_EN0_REG (0x0010) (reserved) 1 31 SYSTEM_ADC2_ARB_CLK_EN 1 30 SYSTEM_SYSTIMER_CLK_EN 1 29 SYSTEM_APB_SARADC_CLK_EN 1 28 SYSTEM_SPI3_DMA_CLK_EN 1 27 (reserved) 0 0 26 25 SYSTEM_UART_MEM_CLK_EN 1 24 SYSTEM_USB_DEVICE_CLK_EN 1 23 (reserved) 1 22 SYSTEM_I2S0_CLK_EN 0 21 (reserved) 0 20 SYSTEM_CAN_CLK_EN 0 19 (reserved) 0 0 1 18 16 SYSTEM_TIMERGROUP1_CLK_EN 1 15 (reserved) 1 14 SYSTEM_TIMERGROUP_CLK_EN 1 13 (reserved) 0 12 SYSTEM_LEDC_CLK_EN 0 11 (reserved) 0 10 SYSTEM_RMT_CLK_EN 0 9 SYSTEM_UHCI0_CLK_EN 0 8 SYSTEM_EXT0_CLK_EN 0 7 SYSTEM_SPI2_CLK_EN 1 6 SYSTEM_UART1_CLK_EN 1 5 (reserved) 0 4 (reserved) 1 3 SYSTEM_UART_CLK_EN 1 2 SYSTEM_SPI01_CLK_EN 1 1 SYSTEM_TIMERS_CLK_EN 1 0 Reset
  </h4>
  <p block-type="Text">
   SYSTEM_TIMERS_CLK_EN Set this bit to enable TIMERS clock. (R/W) SYSTEM_SPI01_CLK_EN Set this bit to enable SPI0 / SPI1 clock. (R/W) SYSTEM_UART_CLK_EN Set this bit to enable UART clock. (R/W) SYSTEM_UART1_CLK_EN Set this bit to enable UART1 clock. (R/W) SYSTEM_SPI2_CLK_EN Set this bit to enable SPI2 clock. (R/W) SYSTEM_EXT0_CLK_EN Set this bit to enable I2C_EXT0 clock. (R/W) SYSTEM_UHCI0_CLK_EN Set this bit to enable UHCI0 clock. (R/W) SYSTEM_RMT_CLK_EN Set this bit to enable RMT clock. (R/W) SYSTEM_LEDC_CLK_EN Set this bit to enable LEDC clock. (R/W) SYSTEM_TIMERGROUP_CLK_EN Set this bit to enable TIMER GROUP clock. (R/W) SYSTEM_TIMERGROUP1_CLK_EN Set this bit to enable TIMERGROUP1 clock. (R/W) SYSTEM_CAN_CLK_EN Set this bit to enable TWAI clock. (R/W) SYSTEM_I2S0_CLK_EN Set this bit to enable I2S clock. (R/W) SYSTEM_USB_DEVICE_CLK_EN Set this bit to enable USB DEVICE clock. (R/W) SYSTEM_UART_MEM_CLK_EN Set this bit to enable UART_MEM clock. (R/W) SYSTEM_SPI3_DMA_CLK_EN Set this bit to enable SPI3 DMA clock. (R/W) SYSTEM_APB_SARADC_CLK_EN Set this bit to enable APB_SARADC clock. (R/W) SYSTEM_SYSTIMER_CLK_EN Set this bit to enable SYSTEMTIMER clock. (R/W) SYSTEM_ADC2_ARB_CLK_EN Set this bit to enable ADC2_ARB clock. (R/W)
  </p>
  <h4>
   Register 16.4. SYSTEM_PERIP_CLK_EN1_REG (0x0014)
  </h4>
  <p>
   <span id="page-435-0">
   </span>
   <img src="_page_435_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_CRYPTO_AES_CLK_EN Set this bit to enable AES clock. (R/W) SYSTEM_CRYPTO_SHA_CLK_EN Set this bit to enable SHA clock. (R/W) SYSTEM_CRYPTO_RSA_CLK_EN Set this bit to enable RSA clock. (R/W) SYSTEM_CRYPTO_DS_CLK_EN Set this bit to enable DS clock. (R/W) SYSTEM_CRYPTO_HMAC_CLK_EN Set this bit to enable HMAC clock. (R/W) SYSTEM_DMA_CLK_EN Set this bit to enable DMA clock. (R/W) SYSTEM_TSENS_CLK_EN Set this bit to enable TSENS clock. (R/W)
  </p>
  <h4>
   Register 16.5. SYSTEM_PERIP_RST_EN0_REG (0x0018)
  </h4>
  <p>
   <span id="page-436-0">
   </span>
   <img src="_page_436_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_TIMERS_RST Set this bit to reset TIMERS. (R/W) SYSTEM_SPI01_RST Set this bit to reset SPI0 / SPI1. (R/W) SYSTEM_UART_RST Set this bit to reset UART. (R/W) SYSTEM_UART1_RST Set this bit to reset UART1. (R/W) SYSTEM_SPI2_RST Set this bit to reset SPI2. (R/W) SYSTEM_EXT0_RST Set this bit to reset I2C_EXT0. (R/W) SYSTEM_UHCI0_RST Set this bit to reset UHCI0. (R/W) SYSTEM_RMT_RST Set this bit to reset RMT. (R/W) SYSTEM_LEDC_RST Set this bit to reset LEDC. (R/W) SYSTEM_TIMERGROUP_RST Set this bit to reset TIMERGROUP. (R/W) SYSTEM_TIMERGROUP1_RST Set this bit to reset TIMERGROUP1. (R/W) SYSTEM_CAN_RST Set this bit to reset CAN. (R/W) SYSTEM_I2S0_RST Set this bit to reset I2S. (R/W) SYSTEM_USB_DEVICE_RST Set this bit to reset USB DEVICE. (R/W) SYSTEM_UART_MEM_RST Set this bit to reset UART_MEM. (R/W) SYSTEM_SPI3_DMA_RST Set this bit to reset SPI3. (R/W) SYSTEM_APB_SARADC_RST Set this bit to reset APB_SARADC. (R/W) SYSTEM_SYSTIMER_RST Set this bit to reset SYSTIMER. (R/W) SYSTEM_ADC2_ARB_RST Set this bit to reset ADC2_ARB. (R/W)
  </p>
  <p>
   <span id="page-437-0">
   </span>
   <img src="_page_437_Figure_0.jpeg"/>
  </p>
  <p>
   Register 16.7. SYSTEM_CACHE_CONTROL_REG (0x0040)
  </p>
  <p>
   <span id="page-437-1">
   </span>
   <img src="_page_437_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_ICACHE_CLK_ON Set this bit to enable i-cache clock. (R/W) SYSTEM_ICACHE_RESET Set this bit to reset i-cache. (R/W) SYSTEM_DCACHE_CLK_ON Set this bit to enable d-cache clock. (R/W) SYSTEM_DCACHE_RESET Set this bit to reset d-cache. (R/W)
  </p>
  <p>
   <img src="_page_438_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-438-1">
   </span>
   <img src="_page_438_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SYSTEM_CPUPERIOD_SEL Set this field to select the CPU clock frequency. For details, please refer to Table 6.2-3 in Chapter 6
     <i>
      Reset and Clock
     </i>
     .(R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_PLL_FREQ_SEL Set this bit to select the PLL clock frequency. For details, please refer to Table 6.
     <a href="#page-195-0">
      2-3
     </a>
     in Chapter 6
     <i>
      <a href="#page-190-0">
       Reset and Clock
      </a>
     </i>
     . (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_CPU_WAIT_MODE_FORCE_ON Set this bit to force on the clock gate of CPU wait mode. Usually, after executing the WFI instruction, CPU enters the wait mode, during which the clock gate
     <a href="#page-195-0">
      of CPU
     </a>
     is turned
     <a href="#page-190-0">
      off until any interru
     </a>
     pts occur. In this way, power consumption is saved. However, if this bit is set, the clock gate of CPU is always on and will not be turned off by the WFI instruction. (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_CPU_WAITI_DELAY_NUM Sets the number of delay cycles to turn off the CPU clock gate after the CPU enters the wait mode because of a WFI instruction. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-438-0">
   </span>
   <img src="_page_438_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   Register 16.9. SYSTEM_BT_LPCK_DIV_FRAC_REG (0x0024)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SYSTEM_LPCLK_SEL_RTC_SLOW Set this bit to select RTC_SLOW_CLK as the low-power clock. (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_LPCLK_SEL_8M Set this bit to select RC_FAST_CLK div n clock as the low-power clock. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   SYSTEM_LPCLK_SEL_XTAL Set this bit to select XTAL clock as the low-power clock. (R/W)
  </p>
  <p block-type="Text">
   SYSTEM_LPCLK_SEL_XTAL32K Set this bit to select xtal32k clock as the low-power clock. (R/W)
  </p>
  <p block-type="Text">
   SYSTEM_LPCLK_RTC_EN Set this bit to enable the LOW_POWER_CLK clock. (R/W)
  </p>
  <h4>
   Register 16.10. SYSTEM_SYSCLK_CONF_REG (0x0058)
  </h4>
  <p>
   <span id="page-439-0">
   </span>
   <img src="_page_439_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_PRE_DIV_CNT This field is used to set the count of prescaler of XTAL_CLK. For details, please refer to Table 6.2-3 in Chapter 6
   <i>
    Reset and Clock
   </i>
   . (R/W)
  </p>
  <p block-type="Text">
   SYSTEM_SOC_CLK_SEL This field is used to select SOC clock. For details, please refer to Table 6.2-1 in Chapter 6
   <i>
    R
    <a href="#page-195-0">
     eset an
    </a>
    d Clock
   </i>
   . (
   <a href="#page-190-0">
    R/W)
   </a>
  </p>
  <p block-type="Text">
   SYSTEM_CLK_XTAL_FREQ This field is used to read XTAL frequency in MHz. (RO)
  </p>
  <p>
   <span id="page-439-1">
   </span>
   <img src="_page_439_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_RTC_MEM_CRC_START Set this bit to start the CRC of RTC memory. (R/W)
  </p>
  <p block-type="Text">
   SYSTEM_RTC_MEM_CRC_ADDR This field is used to set address of RTC memory for CRC. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SYSTEM_RTC_MEM_CRC_LEN This field is used to set length of RTC memory for CRC based on start address. (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_RTC_MEM_CRC_FINISH This bit stores the status of RTC memory CRC. High level means finished while low level means not finished. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-440-2">
   </span>
   <img src="_page_440_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_RTC_MEM_CRC_RES This field stores the CRC result of RTC memory. (RO)
  </p>
  <h4>
   Register 16.13. SYSTEM_CPU_INTR_FROM_CPU_0_REG (0x0028)
  </h4>
  <p>
   <span id="page-440-0">
   </span>
   <img src="_page_440_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_CPU_INTR_FROM_CPU_0 Set this bit to generate CPU interrupt 0. This bit needs to be reset by software in the ISR process. (R/W)
  </p>
  <h4>
   Register 16.14. SYSTEM_CPU_INTR_FROM_CPU_1_REG (0x002C)
  </h4>
  <p>
   <span id="page-440-1">
   </span>
   <img src="_page_440_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_CPU_INTR_FROM_CPU_1 Set this bit to generate CPU interrupt 1. This bit needs to be reset by software in the ISR process. (R/W)
  </p>
  <p>
   <span id="page-441-0">
   </span>
   <img src="_page_441_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_CPU_INTR_FROM_CPU_2 Set this bit to generate CPU interrupt 2. This bit needs to be reset by software in the ISR process. (R/W)
  </p>
  <h4>
   Register 16.16. SYSTEM_CPU_INTR_FROM_CPU_3_REG (0x0034)
  </h4>
  <p>
   <span id="page-441-1">
   </span>
   <img src="_page_441_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_CPU_INTR_FROM_CPU_3 Set this bit to generate CPU interrupt 3. This bit needs to be reset by software in the ISR process. (R/W)
  </p>
  <p>
   <span id="page-442-0">
   </span>
   <img src="_page_442_Figure_0.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SYSTEM_RSA_MEM_PD Set this bit to send the RSA memory into retention state. This bit has the lowest priority, meaning it can be masked by the SYSTEM_RSA_MEM_FORCE_PU field. When Digital Signature occupies the RSA, this bit is invalid. (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_RSA_MEM_FORCE_PU Set this bit to force the RSA memory to work as normal when the chip enters light sleep. This bit has the sec
     <a href="#page-442-0">
      ond highest priority, meaning it o
     </a>
     verrides the SYSTEM_RSA_MEM_PD field. (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_RSA_MEM_FORCE_PD Set this bit to send the RSA memory into retention state. This bit has the highest priority, meaning it sends the RSA memory into retention state regardless of the
     <a href="#page-442-0">
      SYSTEM_RSA_MEM_FOR
     </a>
     CE_PU field. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   <a href="#page-442-0">
    Register 16.18. SYSTEM_EXTERNA
   </a>
   L_DEVICE_ENCRYPT_DECRYPT_CONTROL_REG (0x0044)
  </h4>
  <p>
   <span id="page-442-1">
   </span>
   <img src="_page_442_Figure_5.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SYSTEM_ENABLE_SPI_MANUAL_ENCRYPT Set this bit to enable Manual Encryption under SPI Boot mode. (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_ENABLE_DOWNLOAD_DB_ENCRYPT Set this bit to enable Auto Encryption under Download Boot mode. (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_ENABLE_DOWNLOAD_G0CB_DECRYPT Set this bit to enable Auto Decryption under Download Boot mode. (R/W)
    </li>
    <li block-type="ListItem">
     SYSTEM_ENABLE_DOWNLOAD_MANUAL_ENCRYPT Set this bit to enable Manual Encryption under Download Boot mode. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 16.19. SYSTEM_CLOCK_GATE_REG (0x0054)
  </h4>
  <p>
   <img src="_page_443_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_CLK_EN Set this bit to enable the system clock. (R/W)
  </p>
  <h4>
   Register 16.20. SYSTEM_DATE_REG (0x0FFC)
  </h4>
  <p>
   <span id="page-443-1">
   </span>
   <img src="_page_443_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   SYSTEM_DATE Version control register. (R/W)
  </p>
  <p block-type="Text">
   The addresses below are relative to the base address of apb control provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <img src="_page_443_Figure_7.jpeg"/>
  </p>
  <p>
   <span id="page-443-0">
   </span>
   <img src="_page_443_Figure_8.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SYSCON_ROM_CLKGATE_FORCE_ON Set 1 to configure the ROM clock gate to be always on; Set 0 to configure the clock gate to turn on automatically when ROM is accessed and turn off automatically when ROM is not accessed. (R/W)
    </li>
    <li block-type="ListItem">
     SYSCON_SRAM_CLKGATE_FORCE_ON Set 1 to configure the SRAM clock gate to be always on; Set 0 to configure the clock gate to turn on automatically when SRAM is accessed and turn off automatically when SRAM is not accessed. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-444-0">
   </span>
   <img src="_page_444_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   SYSCON_ROM_POWER_DOWN Set this field to send the internal ROM into retention state. (R/W) SYSCON_SRAM_POWER_DOWN Set this field to send the internal SRAM into retention state. (R/W)
  </p>
  <h4>
   Register 16.23. SYSCON_MEM_POWER_UP_REG (0x00AC)
  </h4>
  <p>
   <span id="page-444-1">
   </span>
   <img src="_page_444_Figure_3.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SYSCON_ROM_POWER_UP Set this field to force the internal ROM to work as normal (do not enter the retention state) when the chip enters light sleep. (R/W)
    </li>
    <li block-type="ListItem">
     SYSCON_SRAM_POWER_UP Set this field to force the internal SRAM to work as normal (do not enter the retention state) when the chip enters light sleep. (R/W)
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-445-7">
   </span>
   <span id="page-445-0">
   </span>
   Chapter 17
  </h1>
  <h1>
   Debug Assistant (ASSIST_DEBUG)
  </h1>
  <h1>
   17.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-445-1">
   </span>
   Debug Assistant is an auxiliary module that features a set of functions to help locate bugs and issues during software debugging.
  </p>
  <h1>
   17.2 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-445-2">
     </span>
     <i>
      •
     </i>
     Read/write monitoring: Monitors whether the CPU bus has read from or written to a specified address space. A detected read or write will trigger an interrupt.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Stack pointer (SP) monitoring: Monitors whether the SP exceeds the specified address space. A bounds violation will trigger an interrupt.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Program counter (PC) logging: Records PC value. The developer can get the last PC value at the most recent CPU reset.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bus access logging: Records the information about bus access. When the CPU or DMA writes a specified value, the Debug Assistant module will record the address and PC value of this write operation, and push the data to the SRAM.
    </li>
   </ul>
  </p>
  <h1>
   17.3 Functional Description
  </h1>
  <h1>
   <span id="page-445-3">
   </span>
   17.3.1 Region Read/Write Monitoring
  </h1>
  <p block-type="Text">
   <span id="page-445-4">
   </span>
   The Debug Assistant module can monitor reads/writes performed by the CPU's Data bus and Peripheral bus in a certain address space, i.e., memory region. Whenever the Data bus reads or writes in the specified address space, an interrupt will be triggered. The Data bus can monitor two memory regions (assuming they are region 0 and region 1, defined by developer's needs) at the same time, so can the Peripheral bus.
  </p>
  <h1>
   17.3.2 SP Monitoring
  </h1>
  <p block-type="Text">
   <span id="page-445-6">
   </span>
   <span id="page-445-5">
   </span>
   The Debug Assistant module can monitor the SP so as to prevent stack overflow or erroneous push/pop. When the stack pointer exceeds the minimum or maximum threshold, Debug Assistant will record the PC pointer and generate an interrupt. The threshold is configured by software.
  </p>
  <h1>
   17.3.3 PC Logging
  </h1>
  <p block-type="Text">
   In some cases, software developers want to know the PC at the last CPU reset. For instance, when the program is stuck and can only be reset, the developer may want to know where the program got stuck in order to debug. The Debug Assistant module can record the PC at the last CPU reset, which can be then read for software debugging.
  </p>
  <h1>
   17.3.4 CPU/DMA Bus Access Logging
  </h1>
  <p block-type="Text">
   The Debug Assistant module can record the information about the CPU Data bus's and DMA bus's write behaviors in real time. When a write operation occurs in or a specific value is written to a specified address space, the Debug Assistant will record the bus type, PC, and the address, and then store the data in the SRAM in a certain format.
  </p>
  <h1>
   17.4 Recommended Operation
  </h1>
  <h1>
   <span id="page-446-0">
   </span>
   17.4.1 Region Monitoring and SP Monitoring Configuration Process
  </h1>
  <p block-type="Text">
   <span id="page-446-1">
   </span>
   The Debug Assistant module can monitor reads and writes performed by the CPU's Data bus and Peripheral bus. Two memory regions on each bus can be monitored at the same time. All the monitoring modes supported by the Debug Assistant module are listed below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Monitoring of the read/write operations on Data bus
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Data bus reads in region 0
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Data bus writes in region 0
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Data bus reads in region 1
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Data bus writes in region 1
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Monitoring of the read/write operations on Peripheral bus
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Peripheral bus reads in region 0
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Peripheral bus writes in region 0
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Peripheral bus reads in region 1
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Peripheral bus writes in region 1
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Monitoring of exceeding the SP bounds
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       SP exceeds the upper bound address
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       SP exceeds the lower bound address
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The configuration process for region monitoring and SP monitoring is as follows:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. Configure monitored region and SP threshold.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure Data bus region 0 with ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MIN_REG and ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MAX_REG.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure Data bus region 1 with ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_MIN_REG and ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_MAX_REG.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure Peripheral bus region 0 with ASSIST_DEBUG_CORE_0_AREA_PIF_0_MIN_REG and ASSIST_DEBUG_CORE_0_AREA
     <a href="#page-456-0">
      _PIF_0_MAX_REG.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-456-1">
      Configure Peripheral bus region 1 with
     </a>
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_MIN_REG and ASSIST_DEBUG_CORE_0_AREA_PIF_1
     <a href="#page-457-0">
      _MAX_REG.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-457-1">
      Configure SP threshold with
     </a>
     ASSIST_DEBUG_CORE_0_SP_MIN_REG and ASSIST_DEBUG_CORE_0_SP_MAX_R
     <a href="#page-458-0">
      EG.
     </a>
    </li>
    <li block-type="ListItem">
     2. Con
     <a href="#page-458-1">
      figure interrupts.
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure
       <a href="#page-459-1">
        ASSIST_DEBUG_CORE_0_INT
       </a>
       <a href="#page-459-0">
        R_ENA_REG
       </a>
       to enable the interrupt of a monitoring mode.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure ASSIST_DEBUG_CORE_0_INTR_RAW_REG to get the interrupt status of a monitoring mode.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure
       <a href="#page-462-0">
        ASSIST_DEBUG_CORE_0_INTR_CLR_REG
       </a>
       to clear the interrupt of a monitoring mode.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Configure ASSI
     <a href="#page-461-0">
      ST_DEBUG_CORE_0_MONTR_ENA_REG
     </a>
     to enable the monitoring mode(s). Various monitoring modes can be enabled at the same time.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Assuming that Debu
   <a href="#page-463-0">
    g Assistant needs to monitor whether Data
   </a>
   bus has written to [A ~ B] address space, the user can enabl
   <a href="#page-454-1">
    e monitoring in either Data bus region 0 or reg
   </a>
   ion 1. The following configuration process is based on region 0:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MIN_REG to A.
    </li>
    <li block-type="ListItem">
     2. Configure ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MAX_REG to B.
    </li>
    <li block-type="ListItem">
     3. Configure
     <a href="#page-455-1">
      ASSIST_DEBUG_CORE_0_INTR_ENA_REG
     </a>
     bit[1] to enable the interrupt for write operations by Data bus in region 0.
    </li>
    <li block-type="ListItem">
     4. Configure
     <a href="#page-455-0">
      ASSIST_DEBUG_CORE_0_MONTR_ENA_REG
     </a>
     bit[1] to enable monitoring write operations by Data bus
     <a href="#page-462-0">
     </a>
     i
     <a href="#page-462-0">
      n region 0.
     </a>
    </li>
    <li block-type="ListItem">
     5. Configure interrupt matrix to map ASSIST_DEBUG_INT into CPU interrupt (please refer to Chapter 8
     <i>
      Interrupt
      <a href="#page-454-1">
       Matrix (INTERRUPT)
      </a>
     </i>
     ).
    </li>
    <li block-type="ListItem">
     6. After the interrupt is triggered:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Read
       <a href="#page-201-0">
        ASSIST_DEBUG_CO
       </a>
       RE_0_INTR_RAW_REG to learn which operation triggered interrupt
       <a href="#page-201-0">
        .
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the interrupt is triggered by region monitoring, read ASSIST_DEBUG_CORE_0_AREA_PC_REG for the PC value, and ASSIST_DEBUG_CORE_0_AREA_SP_REG for the SP.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the
       <a href="#page-461-0">
        interrupt is triggered by stack monitoring, r
       </a>
       ead ASSIST_DEBUG_CORE_0_SP_PC_REG for the PC value.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write '1' to the corresponding bits of
       <a href="#page-459-2">
        ASSIST_DEBUG_CORE_
       </a>
       0_INTR_RAW_REG to clear the interrupts.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   17.4.2 PC Logging Configuratio
   <a href="#page-461-0">
    n Process
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-447-0">
   </span>
   The CPU sends PC signals to Debug Assistant. Only when ASSIST_DEBUG_CORE_0_RCD_PDEBUGEN is 1, the PC signal is valid, otherwise, it is always 0.
  </p>
  <p block-type="Text">
   Espressif Systems 448
  </p>
  <p block-type="Text">
   Only when ASSIST_DEBUG_CORE_0_RCD_RECORDEN is 1, ASSIST_DEBUG_CORE_0_RCD_PDEBUGPC_REG samples the CPU's PC signals, otherwise, it keeps the original value.
  </p>
  <p block-type="Text">
   The description of ASSIST_DEBUG_CORE_0_RCD_EN_REG and ASSIST_DE
   <a href="#page-464-0">
    BUG_CORE_0_RCD_PDEBUGPC_REG
   </a>
   can be fo
   <a href="#page-464-1">
    und in section
   </a>
   17.18 and 17.19.
  </p>
  <p block-type="Text">
   When the CPU resets, ASSIST_DEBUG_CORE_0_RCD_EN_REG will reset, while ASSIST_DEBUG_C
   <a href="#page-464-0">
    ORE_0_RCD_PDEBUGPC_REG
   </a>
   will not. Therefore, the latter will keep the PC value at the
   <a href="#page-464-1">
    CPU reset.
   </a>
  </p>
  <h1>
   17.4.3
   <a href="#page-464-1">
    CPU/DMA Bus Access Log
   </a>
   ging Configuration Process
  </h1>
  <p block-type="Text">
   <span id="page-448-0">
   </span>
   The configuration process for CPU/DMA bus access logging is described below.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure monitored address space.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure ASSIST_DEBUG_LOG_MIN_REG and ASSIST_DEBUG_LOG_MAX_REG to specify monitored address space.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Configure monitoring mode with ASSIST_DEBUG_LOG_MODE:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       write moni
       <a href="#page-466-0">
        toring (whether the bus has writ
       </a>
       e op
       <a href="#page-467-0">
        erations)
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       word monitoring (whether
       <a href="#page-465-0">
       </a>
       t
       <a href="#page-465-0">
        he bus writes a specific word
       </a>
       )
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       halfword monitoring (whether the bus writes a specific halfword)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       byte monitoring (whether the bus writes a specific byte)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Configure the specific values to be monitored.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       In word monitoring mode, ASSIST_DEBUG_LOG_DATA_0_REG specifies the monitored word.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       In halfword monitoring mode, ASSIST_DEBUG_LOG_DATA_0_REG[15:0] specifies the monitored halfword.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       In byte monitoring mode,
       <a href="#page-466-1">
        ASSIST_DEBUG_LOG_DATA_0_REG[
       </a>
       7:0] specifies the monitored byte.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       ASSIST_DEBUG_LOG_DATA_MASK_REG
       <a href="#page-466-1">
        is used to mask the byte
       </a>
       specified in ASSIST_DEBUG_LOG_DATA_0_REG. A masked byte can be any value. For example, in word monitoring, ASSIST_DEB
       <a href="#page-466-1">
        UG_LOG_DATA_0_REG
       </a>
       is configured to 0x01020304, and
       <a href="#page-466-2">
        ASSIST_DEBUG_LOG_DATA_MASK_REG
       </a>
       is configured to 0x1, then bus writes with data matching to
       <a href="#page-466-1">
        0x010203XX pattern will be recorde
       </a>
       d.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     4. Configure the st
     <a href="#page-466-1">
      orage space for recorded data.
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       <a href="#page-466-2">
        ASSIST_DEBUG_LOG_MEM_START_REG
       </a>
       and ASSIST_DEBUG_LOG_MEM_END_REG specify the storage space for recorded data. The storage space must be in the range of 0x3FCC_0000 ~ 0x3FCD_FFFF.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       <a href="#page-467-1">
        Configure the permission for the Debug
       </a>
       Assi
       <a href="#page-467-2">
        stant module to access the internal SRA
       </a>
       M. Only if the access permission is enabled, the Debug Assistant module is able to access the internal SRAM. For more information please refer to Chapter 14
       <i>
        Permission Control (PMS)
       </i>
       ).
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     5. Configure the writing mode for recorded data: loop mode and non-loop mode.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   In loop mode, writing to specified address space is performed in loops. When writing reaches the end address, it will return to the starting address and continue, overwriting the previously recorded data.
  </p>
  <p block-type="Text">
   For example, 10 writes (1 ~ 10) write to address space 0 ~ 4. After the 5th write writes to address 4, the 6th write will start writing from address 0. The 6th to 10th writes will overwrite the previous data written by 0 ~ 4 writes.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In non-loop mode, when writing reaches the end address, it will stop at the end address, not overwriting the previously recorded data. For example, 10 writes (1 ~ 10) write to address space 0 ~ 4. After the 5th write writes to address 4, the 6th to 10th writes will write at address 4. Only the data written by the last (10th) write will be retained at address 4.
    </li>
    <li block-type="ListItem">
     6. Configure bus enable registers.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Enable CPU or DMA bus access logging with ASSIST_DEBUG_LOG_ENA. CPU and DMA bus access logging can be enabled at the same time.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When bus access logging is finished, the recorded data can be read from memory for decoding. The recorded data is in two packet formats, namely CPU pa
   <a href="#page-465-0">
    cket (corresponding to CPU
   </a>
   bus) and DMA packet (corresponding to DMA bus). The packet formats are shown in Table 17.4-1 and 17.4-2:
  </p>
  <h4>
   Table 17.4-1. CPU Packet Format
  </h4>
  <span id="page-449-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Table 17.4-1. CPU Packet Format
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 17.4-2. DMA Packet Format
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
      Table 17.4-2. DMA Packet Format
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <span id="page-449-1">
   </span>
   It can be seen from the data packet formats that the CPU packet size is 50 bits and DMA packet size 25 bits. The packet formats contain the following fields:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     format  the packet type. 1: CPU packet; 3: DMA packet; other values: reserved.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     pc_offset  the offset of the PC register at time of access. Actual PC = pc_offset + 0x4000_0000.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     addr_offset  the address offset of a write operation. Actual adddress = addr_offset + ASSIST_DEBUG_LOG_MIN_REG.
    </li>
    <li block-type="ListItem">
     <span id="page-449-2">
     </span>
     <i>
      •
     </i>
     dma_source – the source of DMA access. Refer to Table 17.4-3.
    </li>
   </ul>
  </p>
  <h4>
   Table 17.4-3. DMA Source
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Value
     </td>
     <td>
      Source
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      SPI2
     </td>
    </tr>
    <tr>
     <td>
      2
      <br/>
      3
     </td>
     <td>
      reserved
      <br/>
      reserved
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Value
     </td>
     <td>
      Source
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      SHA
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      ADC
     </td>
    </tr>
    <tr>
     <td>
      7
     </td>
     <td>
      I2S
     </td>
    </tr>
    <tr>
     <td>
      8
     </td>
     <td>
      reserved
     </td>
    </tr>
    <tr>
     <td>
      9
     </td>
     <td>
      reserved
     </td>
    </tr>
    <tr>
     <td>
      10
     </td>
     <td>
      reserved
     </td>
    </tr>
    <tr>
     <td>
      11
      <br/>
      12
     </td>
     <td>
      UHCI0
      <br/>
      reserved
     </td>
    </tr>
    <tr>
     <td>
      13
     </td>
     <td>
      reserved
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   The packets are stored in the internal buffer first. When the buffered data reaches 125 bits, it will be expanded to 128 bits and written to the internal SRAM. The written data format is shown in Table 17.4-4.
  </p>
  <p>
   Table 17.4-4. Written Data Format
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Table 17.4-4. Written Data Format
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <span id="page-450-0">
   </span>
   Since the CPU packet size is 50 bits and the DMA packet size 25 bits, the recorded data in each record is at least 25 bits and at most 75 bits. When the data stored in the internal buffer reaches 125 bits, it will be popped into memory. There are cases where a packet is divided into two portions: the first portion is written to memory, and the second portion is left in the buffer and will be popped into memory in the next write. The data left in the buffer is called residual data. The value of START_FLAG records the number of residual bits left from the last write to memory. The number of residual bits is START_FLAG * 25. START_FLAG also indicates the starting bit of the first valid packet in the current write. As an example: Assume that four DMA writes have generated four DMA packets to be stored in the buffer with a total of 100-bit data. Then, one CPU write occurs and generates one 50-bit CPU packet. The buffer will pop the previously-recorded 100-bit data plus the first 25 bits in the CPU packet into SRAM. The remaining 25 bits in the CPU packet is left in the buffer, waiting for the next write. START_FLAG in the next write will indicate that 25 bits in this write is from the last write.
  </p>
  <p block-type="Text">
   In loop writing mode, if data is looped several times in the storage memory, the residual data will interfere with packet parsing. Therefore, users need to filter out the residual data in order to determine the starting position of the first valid packet with START_FLAG and ASSIST_DEBUG_LOG_MEM_CURRENT_ADDR_REG. Once the starting position of the packet is identified, the subsequent data is continuous and users do not need to care about the value of START_FLAG.
  </p>
  <p block-type="Text">
   Note that if data in the buffer does not reach
   <a href="#page-468-0">
    125 bits, it will not be written to memory. All data sh
   </a>
   ould be written to memory for packet parsing. This can be done by disabling bus access logging. When ASSIST_DEBUG_LOG_ENA is set to 0, if there is data in the buffer, it will be padded with zeros from the left until it becomes 128 bits long and written to the memory.
  </p>
  <p block-type="Text">
   The process of packet parsing is described below:
  </p>
  <p block-type="Text" class="has-continuation">
   <i>
    •
   </i>
   <a href="#page-465-0">
    Determine whether t
   </a>
   here is a data overflow with ASSIST_DEBUG_LOG_MEM_FULL_FLAG. If there is no overflow, ASSIST_DEBUG_LOG_MEM_START_REG is the starting address of the first packet. If there is an
  </p>
  <p block-type="Text">
   overflow and loop mode is enabled, ASSIST_DEBUG_LOG_MEM_CURRENT_ADDR_REG is the starting address of the first packet.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Read and parse data from the starting address. Read 128 bits each time.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Use START_FLAG to determine the s
     <a href="#page-468-0">
      tarting bit of the first packet. Starting bit = START_FL
     </a>
     AG * 25 + 3.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that START_FLAG is only used to locate the starting bit of the first packet. Once the starting bit is located, START_FLAG should be filtered out in the subsequent data.
  </p>
  <p block-type="Text">
   After packet parsing is completed, clear the ASSIST_DEBUG_LOG_MEM_FULL_FLAG flag bit by setting ASSIST_DEBUG_CLR_LOG_MEM_FULL_FLAG.
  </p>
  <h1>
   17.5 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-452-0">
   </span>
   The addresses in this section are relative to Debug Assistant base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Monitor configuration registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_MONTR_ENA_REG
     </td>
     <td>
      Monitoring enable register
      <br/>
      Configures boundary ad
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MIN_REG
     </td>
     <td>
      dress of region 0 moni
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tored on Data bus
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures boundary ad
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MAX_REG
     </td>
     <td>
      dress of region 0 moni
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tored on Data bus
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures boundary ad
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_MIN_REG
     </td>
     <td>
      dress
      <br/>
      of
      <br/>
      region
      <br/>
      1 moni
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tored on Data bus
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures boundary ad
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_MAX_REG
     </td>
     <td>
      dress
      <br/>
      of
      <br/>
      region
      <br/>
      1 moni
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tored on Data bus
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_PIF_0_MIN_REG
     </td>
     <td>
      Configures boundary ad
      <br/>
      dress of region 0 moni
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tored on Peripheral bus
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures boundary ad
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_PIF_0_MAX_REG
     </td>
     <td>
      dress of region 0 moni
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tored on Peripheral bus
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures boundary ad
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_PIF_1_MIN_REG
     </td>
     <td>
      dress
      <br/>
      of
      <br/>
      region
      <br/>
      1 moni
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tored on Peripheral bus
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures boundary ad
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_PIF_1_MAX_REG
     </td>
     <td>
      dress
      <br/>
      of
      <br/>
      region
      <br/>
      1 moni
     </td>
     <td>
      0x002C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tored on Peripheral bus
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_PC_REG
     </td>
     <td>
      Region monitoring PC sta
     </td>
     <td>
      0x0030
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tus register
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_AREA_SP_REG
     </td>
     <td>
      Region monitoring SP sta
      <br/>
      tus register
     </td>
     <td>
      0x0034
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures stack monitor
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_SP_MIN_REG
     </td>
     <td>
      ing boundary address
     </td>
     <td>
      0x0038
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures stack monitor
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_SP_MAX_REG
     </td>
     <td>
      ing boundary address
     </td>
     <td>
      0x003C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Stack monitoring PC sta
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_SP_PC_REG
     </td>
     <td>
      tus register
     </td>
     <td>
      0x0040
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Interrupt configuration registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_INTR_RAW_REG
     </td>
     <td>
      Interrupt status register
     </td>
     <td>
      0x0004
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 17
      <br/>
      Debug Assistant (ASSIST_DEBUG)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_INTR_ENA_REG
     </td>
     <td>
      Interrupt enable register
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_INTR_CLR_REG
     </td>
     <td>
      Interrupt clear register
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      PC logging configuration register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_RCD_EN_REG
     </td>
     <td>
      PC logging enable register
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      PC logging status registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_RCD_PDEBUGPC_REG
      <br/>
      ASSIST_DEBUG_CORE_0_RCD_PDEBUGSP_REG
      <br/>
      Bus access logging configuration registers
     </td>
     <td>
      PC logging register
      <br/>
      PC logging register
     </td>
     <td>
      0x0048
      <br/>
      0x004C
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_LOG_SETTING_REG
     </td>
     <td>
      Bus access logging con
      <br/>
      figuration register
      <br/>
      Configures
      <br/>
      monitored
     </td>
     <td>
      0x0070
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_LOG_DATA_0_REG
     </td>
     <td>
      data in Bus access log
      <br/>
      ging
     </td>
     <td>
      0x0074
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_LOG_DATA_MASK_REG
     </td>
     <td>
      Configures masked data in
      <br/>
      Bus access logging
      <br/>
      Configures monitored ad
     </td>
     <td>
      0x0078
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_LOG_MIN_REG
     </td>
     <td>
      dress
      <br/>
      space
      <br/>
      in
      <br/>
      Bus
      <br/>
      ac
      <br/>
      cess logging
      <br/>
      Configures monitored ad
     </td>
     <td>
      0x007C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_LOG_MAX_REG
     </td>
     <td>
      dress
      <br/>
      space
      <br/>
      in
      <br/>
      Bus
      <br/>
      ac
      <br/>
      cess logging
      <br/>
      Configures
      <br/>
      the
      <br/>
      starting
     </td>
     <td>
      0x0080
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_LOG_MEM_START_REG
      <br/>
      ASSIST_DEBUG_LOG_MEM_END_REG
     </td>
     <td>
      address
      <br/>
      of
      <br/>
      the
      <br/>
      storage
      <br/>
      memory for recorded data
      <br/>
      Configures
      <br/>
      the
      <br/>
      end
      <br/>
      ad
      <br/>
      dress of the storage mem
     </td>
     <td>
      0x0084
      <br/>
      0x0088
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_LOG_MEM_CURRENT_ADDR_REG
     </td>
     <td>
      ory for recorded data
      <br/>
      The
      <br/>
      current
      <br/>
      address
      <br/>
      the
      <br/>
      storage
      <br/>
      memory
     </td>
     <td>
      of
      <br/>
      for
      <br/>
      0x008C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      recorded data
      <br/>
      Logging
      <br/>
      overflow
      <br/>
      status
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_LOG_MEM_FULL_FLAG_REG
     </td>
     <td>
      register
     </td>
     <td>
      0x0090
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      CPU status registers
      <br/>
      ASSIST_DEBUG_CORE_0_LASTPC_BEFORE_EXCEPTION_REG
     </td>
     <td>
      PC of the last command
      <br/>
      before CPU enters excep
     </td>
     <td>
      0x0094
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      ASSIST_DEBUG_CORE_0_DEBUG_MODE_REG
     </td>
     <td>
      tion
      <br/>
      CPU debug mode status
     </td>
     <td>
      0x0098
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="4">
      register
     </td>
    </tr>
    <tr>
     <td>
      Version register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   17.6 Registers
  </h1>
  <p block-type="Text">
   <span id="page-454-0">
   </span>
   The addresses in this section are relative to Debug Assistant base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-454-1">
   </span>
   <img src="_page_454_Figure_2.jpeg"/>
  </p>
  <h4>
   Register 17.1. ASSIST_DEBUG_CORE_0_MONTR_ENA_REG (0x0000)
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_RD_ENA Monitoring enable bit for read operations in region 0 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_WR_ENA Monitoring enable bit for write operations in region 0 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_RD_ENA Monitoring enable bit for read operations in region 1 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_WR_ENA Monitoring enable bit for write operations in region 1 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_0_RD_ENA Monitoring enable bit for read operations in region 0 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_0_WR_ENA Monitoring enable bit for write operations in region 0 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_RD_ENA Monitoring enable bit for read operations in region 1 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_WR_ENA Monitoring enable bit for write operations in region 1 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_SP_SPILL_MIN_ENA Monitoring enable bit for SP exceeding the lower bound address of SP monitored region. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_SP_SPILL_MAX_ENA Monitoring enable bit for SP exceeding the upper bound address of SP monitored region. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_455_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-455-1">
   </span>
   <img src="_page_455_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MIN The lower bound address of Data bus region 0. (R/W)
  </p>
  <h4>
   Register 17.3. ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MAX_REG (0x0014)
  </h4>
  <p>
   <span id="page-455-0">
   </span>
   <img src="_page_455_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_MAX The upper bound address of Data bus region 0. (R/W)
  </p>
  <p>
   Register 17.4. ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_MIN_REG (0x0018)
  </p>
  <p>
   <span id="page-456-0">
   </span>
   <img src="_page_456_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_MIN The lower bound address of Data bus region 1. (R/W)
  </p>
  <h4>
   Register 17.5. ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_MAX_REG (0x001C)
  </h4>
  <p>
   <span id="page-456-1">
   </span>
   <img src="_page_456_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_MAX The upper bound address of Data bus region 1. (R/W)
  </p>
  <p>
   <img src="_page_457_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-457-0">
   </span>
   <img src="_page_457_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_PIF_0_MIN The lower bound address of Peripheral bus region 0. (R/W)
  </p>
  <p>
   <img src="_page_457_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-457-1">
   </span>
   <img src="_page_457_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_PIF_0_MAX The upper bound address of Peripheral bus region 0. (R/W)
  </p>
  <p>
   <span id="page-458-0">
   </span>
   <img src="_page_458_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_PIF_1_MIN The lower bound address of Peripheral bus region 1. (R/W)
  </p>
  <p>
   <span id="page-458-1">
   </span>
   <img src="_page_458_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_PIF_1_MAX The upper bound address of Peripheral bus region 1. (R/W)
  </p>
  <p>
   <img src="_page_458_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_PC Records the PC value when interrupt triggers during region monitoring. (RO)
  </p>
  <p>
   <span id="page-459-2">
   </span>
   <img src="_page_459_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_AREA_SP Records SP when interrupt triggers during region monitoring. (RO)
  </p>
  <p>
   <span id="page-459-0">
   </span>
   <img src="_page_459_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_459_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-459-1">
   </span>
   <img src="_page_459_Figure_4.jpeg"/>
  </p>
  <p>
   <img src="_page_459_Figure_5.jpeg"/>
  </p>
  <p>
   <span id="page-460-0">
   </span>
   <img src="_page_460_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_SP_PC Records the PC value during stack monitoring. (RO)
  </p>
  <p>
   <span id="page-461-0">
   </span>
   <img src="_page_461_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_RD_RAW Interrupt status bit for read operations in region 0 by the Data bus. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_WR_RAW Interrupt status bit for write operations in region 0 by the Data bus. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_RD_RAW Interrupt status bit for read operations in region 1 by the Data bus. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_WR_RAW Interrupt status bit for write operations in region 1 by the Data bus. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_0_RD_RAW Interrupt status bit for read operations in region 0 by the Peripheral bus. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_0_WR_RAW Interrupt status bit for write operations in region 0 by the Peripheral bus. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_RD_RAW Interrupt status bit for read operations in region 1 by the Peripheral bus. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_WR_RAW Interrupt status bit for write operations in region 1 by the Peripheral bus. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_SP_SPILL_MIN_RAW Interrupt status bit for SP exceeding the lower bound address of SP monitored region. (RO)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_SP_SPILL_MAX_RAW Interrupt status bit for SP exceeding the upper bound address of SP monitored region. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-462-0">
   </span>
   <img src="_page_462_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_RD_INTR_ENA Interrupt enable bit for read operations in region 0 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_WR_INTR_ENA Interrupt enable bit for write operations in region 0 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_RD_INTR_ENA Interrupt enable bit for read operations in region 1 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_WR_INTR_ENA Interrupt enable bit for write operations in region 1 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_0_RD_INTR_ENA Interrupt enable bit for read operations in region 0 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_0_WR_INTR_ENA Interrupt enable bit for write operations in region 0 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_RD_INTR_ENA Interrupt enable bit for read operations in region 1 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_WR_INTR_ENA Interrupt enable bit for write operations in region 1 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_SP_SPILL_MIN_INTR_ENA Interrupt enable bit for SP exceeding the lower bound address of SP monitored region. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_SP_SPILL_MAX_INTR_ENA Interrupt enable bit for SP exceeding the upper bound address of SP monitored region. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 17.17. ASSIST_DEBUG_CORE_0_INTR_CLR_REG (0x000C)
  </h4>
  <p>
   <span id="page-463-0">
   </span>
   <img src="_page_463_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_RD_CLR Interrupt clear bit for read operations in region 0 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_0_WR_CLR Interrupt clear bit for write operations in region 0 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_RD_CLR Interrupt clear bit for read operations in region 1 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_DRAM0_1_WR_CLR Interrupt clear bit for write operations in region 1 by the Data bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_0_RD_CLR Interrupt clear bit for read operations in region 0 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_0_WR_CLR Interrupt clear bit for write operations in region 0 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_RD_CLR Interrupt clear bit for read operations in region 1 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_AREA_PIF_1_WR_CLR Interrupt clear bit for write operations in region 1 by the Peripheral bus. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_SP_SPILL_MIN_CLR Interrupt clear bit for SP exceeding the lower bound address of SP monitored region. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_CORE_0_SP_SPILL_MAX_CLR Interrupt clear bit for SP exceeding the upper bound address of SP monitored region. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-464-0">
   </span>
   <img src="_page_464_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-464-1">
   </span>
   <img src="_page_464_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_RCD_PDEBUGPC Records the PC value at CPU reset. (RO)
  </p>
  <p>
   <img src="_page_465_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-465-1">
   </span>
   <img src="_page_465_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_RCD_PDEBUGSP Records SP. (RO)
  </p>
  <p>
   <span id="page-465-0">
   </span>
   <img src="_page_465_Figure_3.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     ASSIST_DEBUG_LOG_ENA Enables the CPU bus or DMA bus access logging. bit[0]: CPU bus access logging; bit[1]: reserved; bit[2]: DMA bus access logging. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_LOG_MODE Configures monitoring mode. bit[0]: write monitoring; bit[1]: word monitoring; bit[2]: halfword monitoring; bit[3]: byte monitoring. (R/W)
    </li>
    <li block-type="ListItem">
     ASSIST_DEBUG_LOG_MEM_LOOP_ENABLE Configures the writing mode for recorded data. 1: loop mode; 0: non-loop mode. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-466-1">
   </span>
   <img src="_page_466_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_LOG_DATA_0 Specifies the monitored data. (R/W)
  </p>
  <h4>
   Register 17.23. ASSIST_DEBUG_LOG_DATA_MASK_REG (0x0078)
  </h4>
  <p>
   <span id="page-466-2">
   </span>
   <img src="_page_466_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_LOG_DATA_SIZE Masks the byte specified in ASSIST_DEBUG_LOG_DATA_0_REG. (R/W)
  </p>
  <p>
   <span id="page-466-0">
   </span>
   <img src="_page_466_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_LOG_MIN Configures the lower bound address of monitored address space. (R/W)
  </p>
  <p>
   <span id="page-467-0">
   </span>
   <img src="_page_467_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_LOG_MAX Configures the upper bound address of monitored address space. (R/W)
  </p>
  <h4>
   Register 17.26. ASSIST_DEBUG_LOG_MEM_START_REG (0x0084)
  </h4>
  <p>
   <span id="page-467-1">
   </span>
   <img src="_page_467_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_LOG_MEM_START Configures the starting address of the storage space for recorded data. (R/W)
  </p>
  <p>
   <span id="page-467-2">
   </span>
   <img src="_page_467_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_LOG_MEM_END Configures the end address of the storage space for recorded data. (R/W)
  </p>
  <p>
   <span id="page-468-0">
   </span>
   <img src="_page_468_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_LOG_MEM_WRITING_ADDR Indicates the address of the next write. (RO)
  </p>
  <p>
   <img src="_page_468_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-468-1">
   </span>
   <img src="_page_468_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_LOG_MEM_FULL_FLAG The value "1" means there is a data overflow that exceeds the storage space. (RO)
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CLR_LOG_MEM_FULL_FLAG Set to 1 to clear AS-SIST_DEBUG_LOG_MEM_FULL_FLAG flag bit. Default value is "0". (R/W)
  </p>
  <p>
   <span id="page-469-0">
   </span>
   <img src="_page_469_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_LASTPC_BEFORE_EXC Records the PC of the last command before the CPU enters exception. (RO)
  </p>
  <p>
   <img src="_page_469_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-469-1">
   </span>
   <img src="_page_469_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_DEBUG_MODE Indicates whether the RISC-V CPU is in debug mode. 1: in debug mode; 0: not in debug mode. (RO)
  </p>
  <p block-type="Text">
   ASSIST_DEBUG_CORE_0_DEBUG_MODULE_ACTIVE Indicates the status of the RISC-V CPU debug module. 1: active status; 0: inactive status. (RO)
  </p>
  <h4>
   Register 17.32. ASSIST_DEBUG_DATE_REG (0x01FC)
  </h4>
  <p>
   <img src="_page_470_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   ASSIST_DEBUG__DATE Version control register. (R/W)
  </p>
  <h1>
   Part IV
  </h1>
  <h1>
   <span id="page-471-0">
   </span>
   Cryptography/Security Component
  </h1>
  <p block-type="Text">
   Dedicated to security features, this part explores cryptographic accelerators like SHA and AES. It also covers digital signatures, random number generation, and encryption/decryption algorithms, showcasing the SoC's capabilities in cryptography and secure data processing.
  </p>
  <h1>
   <span id="page-472-4">
   </span>
   <span id="page-472-0">
   </span>
   Chapter 18
  </h1>
  <h1>
   AES Accelerator (AES)
  </h1>
  <h1>
   18.1 Introduction
  </h1>
  <p block-type="Text">
   <span id="page-472-1">
   </span>
   ESP32-C3 integrates an Advanced Encryption Standard (AES) Accelerator, which is a hardware device that speeds up AES Algorithm significantly, compared to AES algorithms implemented solely in software. The AES Accelerator integrated in ESP32-C3 has two working modes, which are Typical AES and DMA-AES.
  </p>
  <h1>
   18.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-472-2">
   </span>
   The following functionality is supported:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Typical AES working mode
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       AES-128/AES-256 encryption and decryption
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DMA-AES working mode
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       AES-128/AES-256 encryption and decryption
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Block cipher mode
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * ECB (Electronic Codebook)
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * CBC (Cipher Block Chaining)
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * OFB (Output Feedback)
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * CTR (Counter)
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * CFB8 (8-bit Cipher Feedback)
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * CFB128 (128-bit Cipher Feedback)
        </li>
       </ul>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Interrupt on completion of computation
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   18.3 AES Working Modes
  </h1>
  <p block-type="Text">
   <span id="page-472-3">
   </span>
   The AES Accelerator integrated in ESP32-C3 has two working modes, which are Typical AES and DMA-AES.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Typical AES Working Mode:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-476-1">
        –
       </a>
       Supports encryption and decryption using cryptographic keys of 128
       <a href="#page-474-0">
        and 256 bits
       </a>
       , specified in NIST FIPS 197.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In this working mode, the plaintext and ciphertext is written and read via CPU directly.
  </p>
  <p block-type="Text">
   Espressif
   <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.197.pdf">
    Systems
   </a>
   473
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DMA-AES Working Mode:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Supports encryption and decryption using cryptographic keys of 128 and 256 bits, specified in NIST FIPS 197;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Supports block cipher modes ECB/CBC/OFB/CTR/CFB8/CFB128 under NIST SP 800-38A.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In thi
   <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.197.pdf">
    s working
   </a>
   mode, the plaintext and ciphertext are written and read via DMA. An interrupt will be generated when operation completes.
  </p>
  <p block-type="Text">
   Users can choose the working mode for AES accelerator by configuring the AES_
   <a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-38a.pdf">
    DMA_ENABLE_REG
   </a>
   register according to Table 18.3-1 below.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Table 18.3-1. AES Accelerator Working Mode
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_DMA_ENABLE_REG
     </td>
     <td>
      Working Mode
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 18.3-1. AES Accelerator Working Mod
   <a href="#page-482-0">
    e
   </a>
  </p>
  <p block-type="Text">
   <span id="page-473-1">
   </span>
   <span id="page-473-0">
   </span>
   Users can choose the length of cryptographic keys and encryption / decryption by configuring the AES_MODE_REG register according to Table 18.3-2 below.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 18.3-2. Key Length and Encryption/Decryption
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 18.3-2. Key Length and Encryption/Decryption
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_MODE_REG[2:0]
     </td>
     <td>
      Key Length and Encryption / Decryption
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      AES-128 encryption
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      reserved
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      AES-256 encryption
     </td>
    </tr>
    <tr>
     <td>
      3
      <br/>
      4
     </td>
     <td>
      reserved
      <br/>
      AES-128 decryption
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      reserved
     </td>
    </tr>
    <tr>
     <td>
      6
     </td>
     <td>
      AES-256 decryption
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   For detailed introduction on these two working modes, please refer to Section 18.4 and Section 18.5 below.
  </p>
  <h4>
   Notice:
  </h4>
  <p block-type="Text">
   ESP32-C3's Digital Signature (DS) module will call the AES accelerator. Therefore, u
   <a href="#page-474-0">
    sers
   </a>
   cannot acces
   <a href="#page-476-1">
    s the
   </a>
   AES accelerator when Digital Signature (DS) module is working.
  </p>
  <h1>
   18.4 Typical AES Working Mode
  </h1>
  <p block-type="Text">
   <span id="page-474-0">
   </span>
   In the Typical AES working mode, users can check the working status of the AES accelerator by inquiring the AES_STATE_REG register and comparing the return value against the Table 18.4-1 below.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 18.4-1. Working Status under Typical AES Working Mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 18.4-1. Working Status under Typical AES Working Mode
  </h4>
  <h1>
   <span id="page-474-3">
   </span>
   18.4.1 Key, Plaintext, and Ciphertext
  </h1>
  <p block-type="Text">
   <span id="page-474-1">
   </span>
   The encryption or decryption key is stored in AES_KEY_
   <i>
    n
   </i>
   _REG, which is a set of eight 32-bit registers.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For AES-128 encryption/decryption, the 128-bit key is stored in AES_KEY_0_REG ~ AES_KEY_3_REG.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For AES-256 encryption/decryption, th
     <a href="#page-481-1">
      e 256-bit key is sto
     </a>
     red in AES_KEY_0_REG ~ AES_KEY_7_REG.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The plaintext and ciphertext are stored in AES_TEXT_IN_
   <i>
    m
   </i>
   _REG and
   <a href="#page-481-1">
    AES_TEXT_OUT_
   </a>
   <i>
    m
   </i>
   _
   <a href="#page-481-1">
    REG, which are tw
   </a>
   o sets of four 32-bit registers.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For AES-128/AES-256 encryption, the AES_TEXT_IN_
     <i>
      m
     </i>
     _REG reg
     <a href="#page-481-1">
      isters are initialize
     </a>
     d
     <a href="#page-481-1">
      with plaintext. Th
     </a>
     en, the AES Accelerator stores the ciphertext into
     <a href="#page-481-2">
      AES_TEXT_O
     </a>
     UT_
     <i>
      m
     </i>
     _REG
     <a href="#page-481-3">
      after operation.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For AES-128/AES-256 decryption, the AES_TEXT_IN_
     <i>
      m
     </i>
     _REG registers are initialized with ciphertext. Then, the AES Accelerator stores the
     <a href="#page-481-2">
      plaintext into
     </a>
     AES_TEXT_OUT_
     <i>
      m
     </i>
     _REG after operation.
    </li>
   </ul>
  </p>
  <h1>
   18.4.2 Endianness
  </h1>
  <h4>
   <span id="page-474-2">
   </span>
   Text Endianness
  </h4>
  <p block-type="Text">
   In Typical AES working mode, the AES Accelerator uses cryptographic keys to encrypt and decrypt data in blocks of 128 bits. When filling data into AES_TEXT_IN_
   <i>
    m
   </i>
   _REG register or reading result from AES_TEXT_OUT_
   <i>
    m
   </i>
   _REG registers, users should follow the text endianness type specified in Table 18.4-2.
  </p>
  <span id="page-474-4">
  </span>
  <table>
   <tbody>
    <tr>
     <th colspan="6">
     </th>
    </tr>
    <tr>
     <td colspan="2" rowspan="2">
      State1
     </td>
     <td colspan="5">
      Plaintext/Ciphertext
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      2
      <br/>
      c
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="4">
      r
     </td>
     <td>
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      2
     </td>
     <td>
      3
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      AES_TEXT_x_0_REG[7:0]
     </td>
     <td>
      AES_TEXT_x_1_REG[7:0]
     </td>
     <td>
      AES_TEXT_x_2_REG[7:0]
     </td>
     <td>
      AES_TEXT_x_3_REG[7:0]
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      AES_TEXT_x_0_REG[15:8]
     </td>
     <td>
      AES_TEXT_x_1_REG[15:8]
     </td>
     <td>
      AES_TEXT_x_2_REG[15:8]
     </td>
     <td>
      AES_TEXT_x_3_REG[15:8]
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      AES_TEXT_x_0_REG[23:16]
     </td>
     <td>
      AES_TEXT_x_1_REG[23:16]
     </td>
     <td>
      AES_TEXT_x_2_REG[23:16]
     </td>
     <td>
      AES_TEXT_x_3_REG[23:16]
     </td>
    </tr>
   </tbody>
  </table>
  <p>
  </p>
  <p block-type="Text">
   1 The d
   <a href="#page-481-2">
    efinition of "State (in
   </a>
   cluding
   <a href="#page-481-2">
    c and r)" is descr
   </a>
   ibed in S
   <a href="#page-481-2">
    ection 3.4 The Stat
   </a>
   e in NIST
   <a href="#page-481-2">
    FIPS
   </a>
   197. 2 Where
   <i>
    x
   </i>
   <a href="#page-481-2">
    = IN or OUT.
   </a>
  </p>
  <h1>
   Key Endianness
  </h1>
  <p block-type="Text">
   <span id="page-475-2">
   </span>
   In Typical AES working mode, when filling key into
   <a href="#page-481-4">
    AES_KEY_
   </a>
   <i>
    m
   </i>
   _REG registers, users should follow the key endianness type specified in Table
   <a href="#page-475-2">
    18.4-3
   </a>
   and Table
   <a href="#page-475-3">
    18.4-4
   </a>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      1
      <br/>
      B
      <br/>
      i
      <br/>
      t
      <br/>
      w
     </th>
     <th>
      [
      <br/>
      ]
      <br/>
      [
      <br/>
      0
      <br/>
      1
      <br/>
      w
     </th>
     <th>
      ]
      <br/>
      [
      <br/>
      ]
      <br/>
      2
      <br/>
      w
     </th>
     <th>
      2
      <br/>
      [
      <br/>
      ]
      <br/>
      3
      <br/>
      w
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      [
      <br/>
      ]
      <br/>
      A
      <br/>
      3
      <br/>
      1:
      <br/>
      2
      <br/>
      4
     </td>
     <td>
      E
      <br/>
      S_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      [
      <br/>
      ]
      <br/>
      A
      <br/>
      E
      <br/>
      7:
      <br/>
      0
     </td>
     <td>
      S_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      [
      <br/>
      ]
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      7:
      <br/>
      0
     </td>
     <td>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      [
      <br/>
      ]
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      K
      <br/>
      7:
      <br/>
      0
     </td>
     <td>
      E
      <br/>
      Y_
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      [
      <br/>
      ]
      <br/>
      7:
      <br/>
      0
     </td>
    </tr>
    <tr>
     <td>
      [
      <br/>
      2
      <br/>
      3:
      <br/>
      6
      <br/>
      ]
      <br/>
      A
      <br/>
      1
     </td>
     <td>
      E
      <br/>
      S_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      [
      <br/>
      8
      <br/>
      ]
      <br/>
      A
      <br/>
      E
      <br/>
      1
      <br/>
      5:
     </td>
     <td>
      S_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      [
      <br/>
      8
      <br/>
      ]
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      1
      <br/>
      5:
     </td>
     <td>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      [
      <br/>
      8
      <br/>
      ]
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      K
      <br/>
      1
      <br/>
      5:
     </td>
     <td>
      E
      <br/>
      Y_
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      [
      <br/>
      8
      <br/>
      ]
      <br/>
      1
      <br/>
      5:
     </td>
    </tr>
    <tr>
     <td>
      [
      <br/>
      ]
      <br/>
      8
      <br/>
      A
      <br/>
      1
      <br/>
      5:
     </td>
     <td>
      [
      <br/>
      ]
      <br/>
      E
      <br/>
      S_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      2
      <br/>
      3:
      <br/>
      6
      <br/>
      A
      <br/>
      E
      <br/>
      1
     </td>
     <td>
      [
      <br/>
      ]
      <br/>
      S_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      2
      <br/>
      3:
      <br/>
      6
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      1
     </td>
     <td>
      [
      <br/>
      ]
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      2
      <br/>
      3:
      <br/>
      6
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      K
      <br/>
      1
     </td>
     <td>
      [
      <br/>
      ]
      <br/>
      E
      <br/>
      Y_
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      2
      <br/>
      3:
      <br/>
      6
      <br/>
      1
     </td>
    </tr>
    <tr>
     <td>
      [
      <br/>
      ]
      <br/>
      0
      <br/>
      A
      <br/>
      7:
     </td>
     <td>
      [
      <br/>
      ]
      <br/>
      E
      <br/>
      S_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      0_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      3
      <br/>
      2
      <br/>
      A
      <br/>
      E
      <br/>
      1:
      <br/>
      4
     </td>
     <td>
      [
      <br/>
      ]
      <br/>
      S_
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      1_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      3
      <br/>
      2
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      1:
      <br/>
      4
     </td>
     <td>
      [
      <br/>
      ]
      <br/>
      K
      <br/>
      E
      <br/>
      Y_
      <br/>
      2_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      3
      <br/>
      2
      <br/>
      A
      <br/>
      E
      <br/>
      S_
      <br/>
      K
      <br/>
      1:
      <br/>
      4
     </td>
     <td>
      [
      <br/>
      ]
      <br/>
      E
      <br/>
      Y_
      <br/>
      3_
      <br/>
      R
      <br/>
      E
      <br/>
      G
      <br/>
      3
      <br/>
      2
      <br/>
      1:
      <br/>
      4
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   Table 18.4-3. Key Endianness Type for AES-128 Encryption and Decryption
  </h1>
  <p block-type="Text">
   1 Column "Bit" specifies the bytes of each word stored in w[0] ~w[3].
  </p>
  <p block-type="Text">
   2 w[0]~ w[3] are "the first Nk words of the expanded key" as specified in Section 5.2 Key Expansion in
   <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.197.pdf">
    NIST
   </a>
   FIPS
   <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.197.pdf">
    197
   </a>
   .
  </p>
  <h1>
   Table 18.4-4. Key Endianness Type for AES-256 Encryption and Decryption
  </h1>
  <span id="page-475-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      1
      <br/>
      B
      <br/>
      i
      <br/>
      t
     </th>
     <th>
      0
     </th>
     <th>
      1
     </th>
     <th>
      2
      <br/>
      3
     </th>
     <th>
      4
     </th>
     <th>
      5
     </th>
     <th>
      6
     </th>
     <th>
      2
      <br/>
      7
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      [
      <br/>
      ]
      <br/>
      w
      <br/>
      w
     </th>
     <th>
      [
      <br/>
      ]
      <br/>
      [
      <br/>
      w
     </th>
     <th>
      ]
      <br/>
      [
      <br/>
      w
     </th>
     <th>
      ]
      <br/>
      [
      <br/>
      ]
      <br/>
      w
     </th>
     <th>
      [
      <br/>
      ]
      <br/>
      w
     </th>
     <th>
      [
      <br/>
      ]
      <br/>
      w
     </th>
     <th>
      [
      <br/>
      ]
      <br/>
      w
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      [
      <br/>
      ]
      <br/>
      3
      <br/>
      1:
      <br/>
      2
      <br/>
      4
     </th>
     <th>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      0_
      <br/>
      REG
      <br/>
      [
      <br/>
      ]
      <br/>
      7:0
     </th>
     <th>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      1_R
      <br/>
      EG[
      <br/>
      ]
      <br/>
      AES
      <br/>
      7:0
     </th>
     <th>
      _K
      <br/>
      EY_
      <br/>
      2_
      <br/>
      REG
      <br/>
      [
      <br/>
      ]
      <br/>
      AES
      <br/>
      7:0
     </th>
     <th>
      _K
      <br/>
      EY_
      <br/>
      3_
      <br/>
      REG
      <br/>
      [
      <br/>
      ]
      <br/>
      AES
      <br/>
      _K
      <br/>
      7:0
     </th>
     <th>
      EY_
      <br/>
      4_
      <br/>
      REG
      <br/>
      [
      <br/>
      ]
      <br/>
      AES
      <br/>
      _K
      <br/>
      7:0
     </th>
     <th>
      EY_
      <br/>
      5_
      <br/>
      REG
      <br/>
      [
      <br/>
      ]
      <br/>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      7:0
     </th>
     <th>
      6_
      <br/>
      REG
      <br/>
      [
      <br/>
      ]
      <br/>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      7_R
      <br/>
      7:0
     </th>
     <th>
      EG[
      <br/>
      ]
      <br/>
      7:0
     </th>
    </tr>
    <tr>
     <th>
      [
      <br/>
      ]
      <br/>
      2
      <br/>
      3:
      <br/>
      1
      <br/>
      6
     </th>
     <th>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      0_
      <br/>
      REG
      <br/>
      [
      <br/>
      15:8
      <br/>
      ]
     </th>
     <th>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      1_R
      <br/>
      EG[
      <br/>
      15:8
      <br/>
      ]
      <br/>
      AES
     </th>
     <th>
      _K
      <br/>
      EY_
      <br/>
      2_
      <br/>
      REG
      <br/>
      [
      <br/>
      15:8
      <br/>
      ]
      <br/>
      AES
     </th>
     <th>
      _K
      <br/>
      EY_
      <br/>
      3_
      <br/>
      REG
      <br/>
      [
      <br/>
      15:8
      <br/>
      ]
      <br/>
      AES
      <br/>
      _K
     </th>
     <th>
      EY_
      <br/>
      4_
      <br/>
      REG
      <br/>
      [
      <br/>
      15:8
      <br/>
      ]
      <br/>
      AES
      <br/>
      _K
     </th>
     <th>
      EY_
      <br/>
      5_
      <br/>
      REG
      <br/>
      [
      <br/>
      15:8
      <br/>
      ]
      <br/>
      AES
      <br/>
      _K
      <br/>
      EY_
     </th>
     <th>
      6_
      <br/>
      REG
      <br/>
      [
      <br/>
      15:8
      <br/>
      ]
      <br/>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      7_R
     </th>
     <th>
      EG[
      <br/>
      15:8
      <br/>
      ]
     </th>
    </tr>
    <tr>
     <th>
      [
      <br/>
      ]
      <br/>
      1
      <br/>
      5:
      <br/>
      8
     </th>
     <th>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      0_
      <br/>
      REG
      <br/>
      [
      <br/>
      23:
      <br/>
      16]
     </th>
     <th>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      1_R
      <br/>
      EG[
      <br/>
      23:
      <br/>
      16]
      <br/>
      AES
     </th>
     <th>
      _K
      <br/>
      EY_
      <br/>
      2_
      <br/>
      REG
      <br/>
      [
      <br/>
      23:
      <br/>
      16]
      <br/>
      AES
     </th>
     <th>
      _K
      <br/>
      EY_
      <br/>
      3_
      <br/>
      REG
      <br/>
      [
      <br/>
      23:
      <br/>
      16]
      <br/>
      AES
      <br/>
      _K
     </th>
     <th>
      EY_
      <br/>
      4_
      <br/>
      REG
      <br/>
      [
      <br/>
      23:
      <br/>
      16]
      <br/>
      AES
      <br/>
      _K
     </th>
     <th>
      EY_
      <br/>
      5_
      <br/>
      REG
      <br/>
      [
      <br/>
      23:
      <br/>
      16]
      <br/>
      AES
      <br/>
      _K
      <br/>
      EY_
     </th>
     <th>
      6_
      <br/>
      REG
      <br/>
      [
      <br/>
      23:
      <br/>
      16]
      <br/>
      AES
      <br/>
      _K
      <br/>
      EY_
      <br/>
      7_R
     </th>
     <th>
      EG[
      <br/>
      23:
      <br/>
      16]
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 Column "Bit" specifies the bytes of each word stored in w[0] ~w[7].
  </p>
  <p block-type="Text">
   2 w[0]~w[7] are "the first Nk words of the expanded key" as specified in Chapter 5.2 Key Expansion in
   <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.197.pdf">
    NIST
   </a>
   FIPS
  </p>
  <p block-type="TextInlineMath">
   <span id="page-475-1">
   </span>
   <span id="page-475-0">
   </span>
   <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.197.pdf">
    197
   </a>
   .
  </p>
  <h1>
   18.4.3 Operation Process
  </h1>
  <h4>
   Single Operation
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-476-0">
     </span>
     1. Write 0 to the AES_DMA_ENABLE_REG register.
    </li>
    <li block-type="ListItem">
     2. Initialize registers AES_MODE_REG, AES_KEY_
     <i>
      n
     </i>
     _REG, AES_TEXT_IN_
     <i>
      m
     </i>
     _REG.
    </li>
    <li block-type="ListItem">
     3. Start operatio
     <a href="#page-482-0">
      n by writing 1 to the
     </a>
     AES_TRIGGER_REG register.
    </li>
    <li block-type="ListItem">
     4. Wait till the content of the
     <a href="#page-482-1">
      AES_STA
     </a>
     TE_REG
     <a href="#page-481-1">
      register b
     </a>
     <a href="#page-481-2">
      ecomes 0, which indica
     </a>
     tes the operation is completed.
    </li>
    <li block-type="ListItem">
     5. Read results from the AES_TEXT_OUT_
     <i>
      m
     </i>
     _REG
     <a href="#page-483-1">
      registe
     </a>
     r.
    </li>
   </ul>
  </p>
  <h4>
   Consecutive Operations
  </h4>
  <p block-type="Text">
   In consecutive operations,
   <a href="#page-481-3">
    primarily the input
   </a>
   AES_TEXT_IN_
   <i>
    m
   </i>
   _REG and output AES_TEXT_OUT_
   <i>
    m
   </i>
   _REG registers are being written and read, while the content of AES_DMA_ENABLE_REG, AES_MODE_REG, AES_KEY_
   <i>
    n
   </i>
   _REG is kept unchanged. Therefore, the initialization can be simplified during the consecutive operation.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Write 0 to the AES_DMA_ENABLE_REG register bef
     <a href="#page-482-0">
      ore starting the first opera
     </a>
     t
     <a href="#page-482-1">
      ion.
     </a>
    </li>
    <li block-type="ListItem">
     2.
     <a href="#page-481-1">
      Initialize reg
     </a>
     isters AES_MODE_REG and AES_KEY_
     <i>
      n
     </i>
     _REG before starting the first operation.
    </li>
    <li block-type="ListItem">
     3. Update the content of
     <a href="#page-482-0">
      AES_TEXT_IN_
     </a>
     <i>
      m
     </i>
     _REG.
    </li>
    <li block-type="ListItem">
     4. Start operation by
     <a href="#page-482-1">
      writing 1 to the
     </a>
     AES_
     <a href="#page-481-1">
      TRIGGER_REG
     </a>
     register.
    </li>
    <li block-type="ListItem">
     5. Wait till the content of the
     <a href="#page-481-2">
      AES_STATE_REG
     </a>
     register becomes 0, which indicates the operation completes.
    </li>
    <li block-type="ListItem">
     6. Read results from the AES_TEXT_OUT_
     <i>
      m
     </i>
     _REG
     <a href="#page-483-1">
      registe
     </a>
     r, and return to Step 3 to continue the next operation.
    </li>
   </ul>
  </p>
  <h1>
   18.5 DMA-AES
   <a href="#page-481-3">
    Working Mod
   </a>
   e
  </h1>
  <p block-type="Text">
   <span id="page-476-1">
   </span>
   In the DMA-AES working mode, the AES accelerator supports six block cipher modes including ECB/CBC/OFB/CTR/CFB8/CFB128. Users can choose the block cipher mode by configuring the AES_BLOCK_MODE_REG register according to Table 18.5-1 below.
  </p>
  <span id="page-476-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      AES_BLOCK_MODE_REG[2:0]
     </td>
     <td>
      Block Cipher Mode
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td colspan="2">
      ECB (Electronic Codebook)
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td colspan="2">
      CBC (Cipher Block Chaining)
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      OFB (Output Feedback)
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      CTR (Counter)
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td colspan="2">
      CFB8 (8-bit Cipher Feedback)
     </td>
    </tr>
    <tr>
     <td>
      5
      <br/>
      6
     </td>
     <td>
      CFB128 (128-bit Cipher Feedback)
      <br/>
      reserved
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 18.5-1. Block Cipher Mode
  </h4>
  <p block-type="Text">
   Users can check the working status of the AES accelerator by inquiring the AES_STATE_REG register and comparing the return value against the Table 18.5-2 below.
  </p>
  <span id="page-477-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      Table 18.5-2. Working Status under DMA-AES Working mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_STATE_REG[1:0]
     </td>
     <td>
      Status
     </td>
     <td>
      Description
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 18.5-2. Working Status under DMA-AES Wor
   <a href="#page-483-0">
    king mode
   </a>
  </p>
  <p block-type="Text">
   When working in the DMA-AES working mode, the AES accelerator supports interrupt on the completion of computation. To enable this function, write 1 to the AES_INT_ENA_REG register. By default, the interrupt function is disabled. Also, note that the interrupt should be cleared by software after use.
  </p>
  <h1>
   18.5.1 Key, Plaintext, and Cipherte
   <a href="#page-484-0">
    xt
   </a>
  </h1>
  <h4>
   <span id="page-477-0">
   </span>
   Block Operation
  </h4>
  <p block-type="Text">
   During the block operations, the AES Accelerator reads source data from DMA, and write result data to DMA after the computation.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For encryption, DMA reads plaintext from memory, then passes it to AES as source data. After computation, AES passes ciphertext as result data back to DMA to write into memory.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For decryption, DMA reads ciphertext from memory, then passes it to AES as source data. After computation, AES passes plaintext as result data back to DMA to write into memory.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   During block operations, the lengths of the source data and result data are the same. The total computation time is reduced because the DMA data operation and AES computation can happen concurrently.
  </p>
  <p block-type="Text">
   The length of source data for AES Accelerator under DMA-AES working mode must be 128 bits or the integral multiples of 128 bits. Otherwise, trailing zeros will be added to the original source data, so the length of source data equals to the nearest integral multiples of 128 bits. Please see details in Table 18.5-3 below.
  </p>
  <h2>
   Table 18.5-3. TEXT-PADDING
  </h2>
  <span id="page-477-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Function : TEXT-PADDING( )
     </th>
    </tr>
    <tr>
     <th>
      Input
     </th>
     <th>
      : X, bit string.
     </th>
    </tr>
    <tr>
     <th>
      Output
     </th>
     <th>
      : Y = TEXT-PADDING(X), whose length is the nearest integral multiples of 128 bits.
     </th>
    </tr>
    <tr>
     <th>
      Steps
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Let us assume that X is a data-stream that can be split into n parts as following:
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      X = X1||X2|| · · · ||Xn−1||Xn
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Here, the lengths of X1, X2, · · · , Xn−1
      <br/>
      all equal to 128 bits, and the length of Xn
      <br/>
      is t
     </th>
    </tr>
    <tr>
     <th>
      (0&lt;=t&lt;=127).
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      If t = 0, then
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      TEXT-PADDING(X) = X;
      <br/>
      128−t
      <br/>
      If 0 &lt; t &lt;= 127, define a 128-bit block, X∗
      <br/>
      , and let X∗
      <br/>
      , then
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      n = Xn||0
      <br/>
      n
      <br/>
      128−t
     </th>
    </tr>
   </tbody>
  </table>
  <h1>
   18.5.2 Endianness
  </h1>
  <p block-type="Text">
   Under the DMA-AES working mode, the transmission of source data and result data for AES Accelerator is solely controlled by DMA. Therefore, the AES Accelerator cannot control the Endianness of the source data and result data, but does have requirement on how these data should be stored in memory and on the length of the data.
  </p>
  <p block-type="Text">
   For example, let us assume DMA needs to write the following data into memory at address 0x0280.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data represented in hexadecimal:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0102030405060708090A0B0C0D0E0F101112131415161718191A1B1C1D1E1F20
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data Length:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Equals to 2 blocks.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-478-3">
   </span>
   Then, this data will be stored in memory as shown in Table 18.5-4 below.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 18.5-4. Text Endianness for DMA-AES
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Address
     </td>
     <td>
      Byte
     </td>
     <td>
      Address
     </td>
     <td>
      Byte
     </td>
     <td>
      Address
     </td>
     <td>
      Byte
     </td>
     <td>
      Address
     </td>
     <td>
      Byte
     </td>
    </tr>
    <tr>
     <td>
      0x0280
     </td>
     <td>
      0x01
     </td>
     <td>
      0x0281
     </td>
     <td>
      0x02
     </td>
     <td>
      0x0282
     </td>
     <td>
      0x03
     </td>
     <td>
      0x0283
     </td>
     <td>
      0x04
     </td>
    </tr>
    <tr>
     <td>
      0x0284
     </td>
     <td>
      0x05
     </td>
     <td>
      0x0285
     </td>
     <td>
      0x06
     </td>
     <td>
      0x0286
     </td>
     <td>
      0x07
     </td>
     <td>
      0x0287
     </td>
     <td>
      0x08
     </td>
    </tr>
    <tr>
     <td>
      0x0288
     </td>
     <td>
      0x09
     </td>
     <td>
      0x0289
     </td>
     <td>
      0x0A
     </td>
     <td>
      0x028A
     </td>
     <td>
      0x0B
     </td>
     <td>
      0x028B
     </td>
     <td>
      0x0C
     </td>
    </tr>
    <tr>
     <td>
      0x028C
     </td>
     <td>
      0x0D
     </td>
     <td>
      0x028D
     </td>
     <td>
      0x0E
     </td>
     <td>
      0x028E
     </td>
     <td>
      0x0F
     </td>
     <td>
      0x028F
     </td>
     <td>
      0x10
     </td>
    </tr>
    <tr>
     <td>
      0x0290
     </td>
     <td>
      0x11
     </td>
     <td>
      0x0291
     </td>
     <td>
      0x12
     </td>
     <td>
      0x0292
     </td>
     <td>
      0x13
     </td>
     <td>
      0x0293
     </td>
     <td>
      0x14
     </td>
    </tr>
    <tr>
     <td>
      0x0294
     </td>
     <td>
      0x15
     </td>
     <td>
      0x0295
     </td>
     <td>
      0x16
     </td>
     <td>
      0x0296
     </td>
     <td>
      0x17
     </td>
     <td>
      0x0297
     </td>
     <td>
      0x18
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 18.5-4. Text Endianness for DMA-AES
  </p>
  <h1>
   18.5.3 Standard Incrementing Function
  </h1>
  <p block-type="Text">
   <span id="page-478-0">
   </span>
   AES accelerator provides two Standard Incrementing Functions for the CTR block operation, which are INC
   <sup>
    32
   </sup>
   and INC
   <sup>
    128
   </sup>
   Standard Incrementing Functions. By setting the AES_INC_SEL_REG register to 0 or 1, users can choose the INC
   <sup>
    32
   </sup>
   or INC
   <sup>
    128
   </sup>
   functions respectively. For details on the Standard Incrementing Function, please see Chapter B.1 The Standard Incrementing Function in NIST SP 800-38A.
  </p>
  <h1>
   18.5.4 Block Number
  </h1>
  <p block-type="Text">
   <span id="page-478-1">
   </span>
   Register AES_BLOCK_NUM_REG stores the Block Num
   <a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-38a.pdf">
    ber of plaintext
   </a>
   <i>
    P
   </i>
   or ciphertext
   <i>
    C
   </i>
   . The length of this register equals to length(TEXT-PADDING(
   <i>
    P
   </i>
   ))/128 or length(TEXT-PADDING(
   <i>
    C
   </i>
   ))/128. The AES Accelerator only uses this register when working in the DMA-AES mode.
  </p>
  <h1>
   18.5.5 Initialization Vector
  </h1>
  <p block-type="Text">
   <span id="page-478-2">
   </span>
   AES_IV_MEM is a 16-byte memory, which is only available for AES Accelerator working in block operations. For CBC/OFB/CFB8/CFB128 operations, the AES_IV_MEM memory stores the Initialization Vector (IV). For the CTR operation, the AES_IV_MEM memory stores the Initial Counter Block (ICB).
  </p>
  <p block-type="Text">
   Both IV and ICB are 128-bit strings, which can be divided into Byte0, Byte1, Byte2
   <i>
    · · ·
   </i>
   Byte15 (from left to right). AES_IV_MEM stores data following the Endianness pattern presented in Table 18.5-4, i.e. the most significant (i.e., left-most) byte Byte0 is stored at the lowest address while the least significant (i.e., right-most) byte Byte15 at the highest address.
  </p>
  <p block-type="Text">
   <a href="#page-478-2">
    For more deta
   </a>
   ils on IV and ICB, please refer to NIST SP 800-38A.
  </p>
  <h1>
   18.5.6 Block Operation Process
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-479-0">
     </span>
     1. Select one of DMA channels to connect
     <a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-38a.pdf">
      with AES, configur
     </a>
     e the DMA chained list, and then start DMA. For details, please refer to Chapter 2
     <i>
      GDMA Controller (GDMA)
     </i>
     .
    </li>
    <li block-type="ListItem">
     2. Initialize the AES accelerator-related registers:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write 1 to the AES_DMA_ENA
       <a href="#page-59-0">
        BL
       </a>
       E_REG
       <a href="#page-59-0">
        register.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure the AES_INT_ENA_REG register to enable or disable the interrupt function.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Initialize registers
       <a href="#page-482-0">
        AES_MODE_REG
       </a>
       and AES_KEY_
       <i>
        n
       </i>
       _REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Select block
       <a href="#page-484-0">
        cipher mode by confi
       </a>
       guring the AES_BLOCK_MODE_REG register. For details, see Table 18.5-1.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Initialize the AES
       <a href="#page-482-1">
        _BLOCK_NUM_RE
       </a>
       G re
       <a href="#page-481-1">
        gister. For details,
       </a>
       see Section 18.5.4.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Initiali
       <a href="#page-476-2">
        ze the
       </a>
       AES_INC_SEL_REG register (onl
       <a href="#page-482-2">
        y needed when AES Accel
       </a>
       erator is working under CTR block operation).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Initialize the
       <a href="#page-482-3">
        AES_IV_MEM
       </a>
       memory (This is always needed except for
       <a href="#page-478-1">
        ECB bl
       </a>
       ock operation).
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Start operation b
     <a href="#page-483-2">
      y writing 1 to the
     </a>
     AES_TRIGGER_REG register.
    </li>
    <li block-type="ListItem">
     4. Wait for the com
     <a href="#page-478-2">
      pletion of com
     </a>
     putation, which happens when the content of AES_STATE_REG becomes 2 or the AES interrupt occurs.
    </li>
    <li block-type="ListItem">
     5. Check if DMA completes data tra
     <a href="#page-483-1">
      nsmission from AES
     </a>
     to memory. At this time, DMA had already written the result data in memory, which can be accessed directly. For details on DM
     <a href="#page-483-0">
      A, please refer to
     </a>
     Chapter 2
     <i>
      GDMA Controller (GDMA)
     </i>
     .
    </li>
    <li block-type="ListItem">
     6. Clear interrupt by writing 1 to the AES_INT_CLR_REG register, if any AES interrupt occurred during the computation.
    </li>
    <li block-type="ListItem">
     7.
     <a href="#page-59-0">
      Release the AES Accelera
     </a>
     tor by writing 0 to the AES_DMA_EXIT_REG register. After this, the content of the AES_STATE_REG register be
     <a href="#page-484-1">
      comes 0. Note that,
     </a>
     you can release DMA earlier, but only after Step 4 is completed.
    </li>
   </ul>
  </p>
  <h1>
   18.6
   <a href="#page-483-0">
    Memory
   </a>
   Summary
  </h1>
  <p block-type="Text">
   <span id="page-479-1">
   </span>
   The addresses in this section are relative to the AES accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Name
     </th>
     <th>
      Description
     </th>
     <th>
      Size (byte)
     </th>
     <th>
      Starting Address
     </th>
     <th>
      Ending Address
     </th>
     <th>
      Access
     </th>
    </tr>
    <tr>
     <th>
      AES_IV_MEM
     </th>
     <th>
      Memory IV
     </th>
     <th>
      16 bytes
     </th>
     <th>
      0x0050
     </th>
     <th>
      0x005F
     </th>
     <th>
      R/W
     </th>
    </tr>
   </tbody>
  </table>
  <h1>
   18.7 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-480-0">
   </span>
   The addresses in this section are relative to the AES accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Key Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_KEY_0_REG
      <br/>
      AES_KEY_1_REG
     </td>
     <td>
      AES key data register 0
      <br/>
      AES key data register 1
     </td>
     <td>
      0x0000
      <br/>
      0x0004
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_KEY_2_REG
     </td>
     <td>
      AES key data register 2
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_KEY_3_REG
     </td>
     <td>
      AES key data register 3
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_KEY_4_REG
     </td>
     <td>
      AES key data register 4
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_KEY_5_REG
     </td>
     <td>
      AES key data register 5
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_KEY_6_REG
     </td>
     <td>
      AES key data register 6
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_KEY_7_REG
     </td>
     <td>
      AES key data register 7
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TEXT_IN Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_TEXT_IN_0_REG
     </td>
     <td>
      Source text data register 0
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_TEXT_IN_1_REG
     </td>
     <td>
      Source text data register 1
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_TEXT_IN_2_REG
     </td>
     <td>
      Source text data register 2
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_TEXT_IN_3_REG
     </td>
     <td>
      Source text data register 3
     </td>
     <td>
      0x002C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TEXT_OUT Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_TEXT_OUT_0_REG
     </td>
     <td>
      Result text data register 0
     </td>
     <td>
      0x0030
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      AES_TEXT_OUT_1_REG
     </td>
     <td>
      Result text data register 1
     </td>
     <td>
      0x0034
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      AES_TEXT_OUT_2_REG
      <br/>
      AES_TEXT_OUT_3_REG
     </td>
     <td>
      Result text data register 2
      <br/>
      Result text data register 3
     </td>
     <td>
      0x0038
      <br/>
      0x003C
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_MODE_REG
     </td>
     <td>
      Defines key length and encryption / de
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      cryption
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_DMA_ENABLE_REG
     </td>
     <td>
      Selects the working mode of the AES ac
     </td>
     <td>
      0x0090
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      celerator
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_BLOCK_MODE_REG
     </td>
     <td>
      Defines the block cipher mode
     </td>
     <td>
      0x0094
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_BLOCK_NUM_REG
     </td>
     <td>
      Block number configuration register
     </td>
     <td>
      0x0098
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      AES_INC_SEL_REG
     </td>
     <td>
      Standard incrementing function register
     </td>
     <td>
      0x009C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Controlling / Status Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      AES_TRIGGER_REG
     </td>
     <td>
      Operation start controlling register
     </td>
     <td>
      0x0048
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      AES_STATE_REG
     </td>
     <td>
      Operation status register
     </td>
     <td>
      0x004C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      AES_DMA_EXIT_REG
     </td>
     <td>
      Operation exit controlling register
     </td>
     <td>
      0x00B8
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      Interruption Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      AES_INT_CLR_REG
     </td>
     <td colspan="3">
      DMA-AES interrupt clear register
      <br/>
      0x00AC
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   18.8 Registers
  </h1>
  <p block-type="Text">
   <span id="page-481-4">
   </span>
   <span id="page-481-0">
   </span>
   The addresses in this section are relative to the AES accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-481-1">
   </span>
   <img src="_page_481_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-481-2">
   </span>
   <img src="_page_481_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   AES_TEXT_IN_
   <i>
    m
   </i>
   _REG (
   <i>
    m
   </i>
   : 0-3) Stores the source text data when the AES Accelerator operates in the Typical AES working mode. (R/W)
  </p>
  <p>
   <span id="page-481-3">
   </span>
   <img src="_page_481_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   AES_TEXT_OUT_
   <i>
    m
   </i>
   _REG (
   <i>
    m
   </i>
   : 0-3) Stores the result text data when the AES Accelerator operates in the Typical AES working mode. (RO)
  </p>
  <h4>
   Register 18.4. AES_MODE_REG (0x0040)
  </h4>
  <p>
   <span id="page-482-1">
   </span>
   <img src="_page_482_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   AES_MODE Defines the key length and encryption / decryption of the AES Accelerator. For details, see Table 18.3-2. (R/W)
  </p>
  <p>
   <img src="_page_482_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-482-0">
   </span>
   <img src="_page_482_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   AES_DMA_ENABLE Defines the working mode of the AES Accelerator. 0: Typical AES, 1: DMA-AES. For details, see Table 18.3-1. (R/W)
  </p>
  <p>
   <img src="_page_482_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-482-2">
   </span>
   <img src="_page_482_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   AES_BLOCK_MODE Defines the block cipher mode of the AES Accelerator operating under the DMA-AES working mode. For details, see Table 18.5-1. (R/W)
  </p>
  <p>
   <span id="page-482-3">
   </span>
   <img src="_page_482_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   AES_BLOCK_NUM Stores the Block Number of plaintext or ciphertext when the AES Accelerator operates under the DMA-AES working mode. For details, see Section 18.5.4. (R/W)
  </p>
  <p>
   <span id="page-483-2">
   </span>
   <img src="_page_483_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   AES_INC_SEL Defines the Standard Incrementing Function for CTR block operation. Set this bit to 0 or 1 to choose INC
   <sup>
    32
   </sup>
   or INC128. (R/W)
  </p>
  <p>
   <img src="_page_483_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-483-1">
   </span>
   <img src="_page_483_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   AES_TRIGGER Set this bit to 1 to start AES operation. (WO)
  </p>
  <h4>
   Register 18.10. AES_STATE_REG (0x004C)
  </h4>
  <p>
   <span id="page-483-0">
   </span>
   <img src="_page_483_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   AES_STATE Stores the working status of the AES Accelerator. For details, see Table 18.4-1 for Typical AES working mode and Table 18.5-2 for DMA AES working mode. (RO)
  </p>
  <p>
   <img src="_page_483_Figure_9.jpeg"/>
  </p>
  <p>
   <span id="page-483-3">
   </span>
   <img src="_page_483_Figure_10.jpeg"/>
  </p>
  <p block-type="Text">
   AES_DMA_EXIT Set this bit to 1 to exit AES operation. This register is only effective for DMA-AES operation. (WO)
  </p>
  <p>
   <span id="page-484-1">
   </span>
   <img src="_page_484_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   AES_INT_CLR Set this bit to 1 to clear AES interrupt. (WO)
  </p>
  <h4>
   Register 18.13. AES_INT_ENA_REG (0x00B0)
  </h4>
  <p>
   <span id="page-484-0">
   </span>
   <img src="_page_484_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   AES_INT_ENA Set this bit to 1 to enable AES interrupt and 0 to disable interrupt. (R/W)
  </p>
  <h1>
   <span id="page-485-0">
   </span>
   Chapter 19
  </h1>
  <h1>
   HMAC Accelerator (HMAC)
  </h1>
  <p block-type="Text">
   The Hash-based Message Authentication Code (HMAC) module computes Message Authentication Codes (MACs) using Hash algorithm and keys as described in RFC 2104. The hash algorithm is SHA-256, the 256-bit HMAC key is stored in an eFuse key block and can be set as read-protected, i. e., the key is not accessible from outside the HMAC accelerator itself.
  </p>
  <h1>
   19.1 Main Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-485-1">
     </span>
     <i>
      •
     </i>
     Standard HMAC-SHA-256 algorithm
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Hash result only accessible by configurable hardware peripheral (in downstream mode)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Compatible to challenge-response authentication algorithm
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Generates required keys for the Digital Signature (DS) peripheral (in downstream mode)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Re-enables soft-disabled JTAG (in downstream mode)
    </li>
   </ul>
  </p>
  <h1>
   19.2 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-485-2">
   </span>
   The HMAC module operates in two modes: upstream mode and downstream mode. In upstream mode, the HMAC message is provided by users and the calculation result is read back by them; in downstream mode, the HMAC module is used as a Key Derivation Function (KDF) for other internal hardware. For instance, the JTAG can be temporarily disabled by burning odd number bits of EFUSE_SOFT_DIS_JTAG in eFuse. In this case, users can temporarily re-enable JTAG using the HMAC module in downstream mode.
  </p>
  <p block-type="Text">
   After the reset signal being released, the HMAC module will check whether the DS key exists in the eFuse. If the key exists, the HMAC module will enter downstream digital signature mode and finish the DS key calculation automatically.
  </p>
  <h1>
   19.2.1 Upstream Mode
  </h1>
  <p block-type="Text">
   <span id="page-485-3">
   </span>
   Common use cases for the upstream mode are challenge-response protocols supporting HMAC-SHA-256. Assume the two entities in the challenge-response protocol are A and B respectively, and the data message they expect to exchange is M. The general process of this protocol is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A calculates a unique random number M
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A sends M to B
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     B calculates the HMAC (through M and KEY) and sends the result to A
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A calculates the HMAC (through M and KEY) internally
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 486
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   A compares the two results. If they are the same, then the identity of B is authenticated
  </p>
  <p block-type="Text">
   To calculate the HMAC value (the following steps should be done by the user):
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Initialize the HMAC module, and enter upstream mode.
    </li>
    <li block-type="ListItem">
     2. Write the correctly padded message to the HMAC, one block at a time.
    </li>
    <li block-type="ListItem">
     3. Read back the result from HMAC.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For details of this process, please see Section 19.2.5.
  </p>
  <h1>
   19.2.2 Downstream JTAG Enable Mode
  </h1>
  <p block-type="Text">
   <span id="page-486-0">
   </span>
   JTAG debugging can be disabled in a way whic
   <a href="#page-488-0">
    h allow
   </a>
   s later re-enabling using the HMAC module. The HMAC module will expect the user to supply the HMAC result for one of the eFuse keys. The HMAC module will check whether the supplied HMAC matches the one calculated from the chosen key. If both HMACs are the same, JTAG will be enabled until the user calls the HMAC module to clear the results and consequently disable JTAG again.
  </p>
  <p block-type="Text">
   There are two parameters in eFuse memory to disable JTAG: EFUSE_HARD_DIS_JTAG and EFUSE_SOFT_DIS_JTAG. Write 1 to EFUSE_DIS_PAD_JTAG to disable JTAG permanently, and write odd numbers of 1 to EFUSE_SOFT_DIS_JTAG to disable JTAG temporarily. For more details, please see Chapter 4
   <i>
    eFuse Controller (EFUSE)
   </i>
   . After bit EFUSE_SOFT_DIS_JTAG is set, the key to re-enable JTAG can be calculated in HMAC module's downstream mode. JTAG is re-enabled when the result configured by the user is the same as the HMAC result.
  </p>
  <p block-type="Text">
   <a href="#page-99-0">
    To re-enable JTAG:
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Users enable the HMAC module by initializing clock and reset signals of HMAC, and enter downstream JTAG enable mode by configuring HMAC_SET_PARA_PURPOSE_REG, then Wait for the calculation to complete. Please see Section 19.2.5 for more details.
    </li>
    <li block-type="ListItem">
     2. Users write 1 to the HMAC_SOFT_JTAG_CTRL_REG register to enter JTAG re-enable compare mode.
    </li>
    <li block-type="ListItem">
     3. Users write the 256-bit HMAC
     <a href="#page-488-0">
      value w
     </a>
     hich is calculated locally from the 32-byte 0x00 using SHA-256 and the generated key to register HMAC_WR_JTAG_REG by writing 8 times and 32-bit each time in big-endian word or
     <a href="#page-500-0">
      der.
     </a>
    </li>
    <li block-type="ListItem">
     4. If the HMAC result matches the value that users calculated locally, then JTAG is re-enabled. Otherwise, JTAG remains disabled.
    </li>
    <li block-type="ListItem">
     5. After writing 1 to HMAC_SET_INVALIDATE_JTAG_REG or resetting the chip, JTAG will be disabled. If users want to re-enable JTAG again, they need to repeat the above steps again.
    </li>
   </ul>
  </p>
  <h1>
   19.2.3 Down
   <a href="#page-497-0">
    stream Digital Signature M
   </a>
   ode
  </h1>
  <p block-type="Text">
   <span id="page-486-1">
   </span>
   The Digital Signature (DS) module encrypts its parameters using the AES-CBC algorithm. The HMAC module is used as a Key Derivation Function (KDF) to derive the AES key to decrypt these parameters (parameter decryption key). The key used for the HMAC as KDF is stored in one of the eFuse key blocks.
  </p>
  <p block-type="Text" class="has-continuation">
   Before starting the DS module, users need to obtain the parameter decryption key for the DS module through HMAC calculation. For more information, please see Chapter 22
   <i>
    Digital Signature (DS)
   </i>
   . After the chip is powered on, the HMAC module will check whether the key required to calculate the parameter decryption key
  </p>
  <p block-type="Text">
   has been burned in the eFuse block. If the key has been burned, HMAC module will automatically enter the downstream digital signature mode and complete the HMAC calculation based on the chosen key.
  </p>
  <h1>
   19.2.4 HMAC eFuse Configuration
  </h1>
  <p block-type="Text">
   <span id="page-487-0">
   </span>
   Each HMAC key burned into an eFuse block has a key purpose, also burned into the eFuse section. This purpose specifies for which functionality the key can be used. The HMAC module will not accept a key with a non-matching purpose for any functionality. The HMAC module provides three different functionalities: re-enabling JTAG and serving as DS KDF in downstream mode as well as pure HMAC calculation in upstream mode. For each functionality, there exists a corresponding key purpose, listed in Table 19.2-1. Additionally, another purpose specifies a key which may be used for re-enabling JTAG as well as for serving as DS KDF.
  </p>
  <p block-type="Text">
   Before enabling HMAC to do calculations, user should make sure the key to be used ha
   <a href="#page-487-1">
    s been
   </a>
   burned in eFuse by reading EFUSE_KEY_PURPOSE_x (We totally have 6 keys in eFuse, so x = 0,1,2,..,5), registers from 4
   <i>
    eFuse Controller (EFUSE)
   </i>
   . Take upstream as example, if there is no EFUSE_KEY_PURPOSE_HMAC_UP in EFUSE_KEY_PURPOSE_0~5, means there is no upstream used key in efuse. You can burn key to efuse as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1.
     <a href="#page-99-0">
      Prepare a sec
     </a>
     ret 256-bit HMAC key and burn the key to an empty eFuse block
     <i>
      y
     </i>
     (there are six blocks for storing a key in eFuse. The numbers of those blocks range from 4 to 9, so y = 4,5,..,9. Hence, if we are talking about key0, we mean eFuse block4), and then program the purpose to EFUSE_KEY_PURPOSE_(
     <i>
      y −
     </i>
     4). Take upstream mode as an example: after programming the key, the user should program EFUSE_KEY_PURPOSE_HMAC_UP (corresponding value is 6) to EFUSE_KEY_PURPOSE_(
     <i>
      y −
     </i>
     4). Please see Chapter 4
     <i>
      eFuse Controller (EFUSE)
     </i>
     on how to program eFuse keys.
    </li>
    <li block-type="ListItem">
     2. Configure this eFuse key block to be read protected, so that users cannot read its value. A copy of this key should be kept by any party who needs to verify
     <a href="#page-99-0">
      this device.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Please note that the key whose purpose is EFUSE_KEY_PURPOSE_HMAC_DOWN_ALL can be used for both re-enabling JTAG or DS.
  </p>
  <span id="page-487-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 19.2-1. HMAC Purposes and Configuration Value
     </th>
    </tr>
    <tr>
     <td>
      Purpose
     </td>
     <td>
      Mode
     </td>
     <td>
      Value
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      JTAG Re-enable
     </td>
     <td>
      Downstream
     </td>
     <td>
      6
     </td>
     <td>
      EFUSE_KEY_PURPOSE_HMAC_DOWN_JTAG
     </td>
    </tr>
    <tr>
     <td>
      DS Key Derivation
     </td>
     <td>
      Downstream
     </td>
     <td>
      7
     </td>
     <td>
      EFUSE_KEY_PURPOSE_HMAC_DOWN_DIGITAL_SIGNATURE
     </td>
    </tr>
    <tr>
     <td>
      HMAC Calculation
     </td>
     <td>
      Upstream
     </td>
     <td>
      8
     </td>
     <td>
      EFUSE_KEY_PURPOSE_HMAC_UP
     </td>
    </tr>
    <tr>
     <td>
      Both JTAG Re-enable
     </td>
     <td>
      Downstream
     </td>
     <td>
      5
     </td>
     <td>
      EFUSE_KEY_PURPOSE_HMAC_DOWN_ALL
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 19.2-1. HMAC Purposes and Configuration Value
  </p>
  <h4>
   Configure HMAC Purposes
  </h4>
  <p block-type="Text">
   The correct purpose has to be written to register HMAC_SET_PARA_PURPOSE_REG (see Section 19.2.5). If there is no valid value in efuse purpose section, HMAC will terminate calculation.
  </p>
  <h4>
   Select eFuse Key Blocks
  </h4>
  <p block-type="Text">
   The eFuse controller provides six key blocks, i.e., KEY0 ~
   <a href="#page-498-0">
    5. To select a particular K
   </a>
   EYn for an H
   <a href="#page-488-0">
    MAC
   </a>
   calculation, write the key number n to register HMAC_SET_PARA_KEY_REG.
  </p>
  <p block-type="Text">
   Espressif Systems 488
  </p>
  <p block-type="Text">
   Note that the purpose of the key has also been programmed to eFuse memory. Only when the configured HMAC purpose matches the defined purpose of KEYn, will the HMAC module execute the configured calculation. Otherwise, it will return a matching error and stop the current calculation. For example, suppose a user selects KEY3 for HMAC calculation, and the value programmed to KEY_PURPOSE_3 is 6 (EFUSE_KEY_PURPOSE_HMAC_DOWN_JTAG). Based on Table 19.2-1, KEY3 can be used to re-enable JTAG. If the value written to register HMAC_SET_PARA_PURPOSE_REG is also 6, then the HMAC module will start the process to re-enable JTAG.
  </p>
  <h1>
   19.2.5 HMAC Pro
   <a href="#page-498-0">
    cess (Detailed)
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-488-0">
   </span>
   The process to call HMAC is as follows:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. Enable HMAC module
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Set the peripheral clock bits for HMAC and SHA peripherals in register SYSTEM_PERIP_CLK_EN1_REG, and clear the corresponding peripheral reset bits in register SYSTEM_PERIP_RST_EN1_REG. For information on those registers, please see Chapter 3
       <i>
        System and Memory
       </i>
       .
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (b) Write 1 to register HMAC_SET_START_REG.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Con
     <a href="#page-90-0">
      figure HMAC k
     </a>
     eys and key purposes
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Write the key purpose
       <i>
        m
       </i>
       <a href="#page-495-1">
        to register
       </a>
       HMAC_SET_PARA_PURPOSE_REG. The possible key purpose values are shown in Table 19.2-1. For more information, please refer to Section 19.2.4.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (b) Select KEYn in eFuse memory as the key by writing n (ranges from 0 to 5) to register HMAC_SET_PARA_KEY_REG. For m
       <a href="#page-498-0">
        ore information, please refer to Sec
       </a>
       tion 19.2.4.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (c) Write 1 to register HMAC_
       <a href="#page-487-1">
        SET_PA
       </a>
       RA_FINISH_REG to complete the configuratio
       <a href="#page-487-1">
        n.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (d) Read register
       <a href="#page-498-1">
        HMAC_QUERY_
       </a>
       ERROR_REG. If its value is 1, it means the pur
       <a href="#page-487-1">
        pose o
       </a>
       f the selected block does not match the configured key purpose and the calculation will not proceed. If its value is 0, it means the
       <a href="#page-495-2">
        purpose of the selected block m
       </a>
       atches the configured key purpose, and then the calculation ca
       <a href="#page-497-1">
        n proceed.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (e) When the value of HMAC_SET_PARA_PURPOSE_REG is not 8, it means the HMAC module is in downstream mode, proceed with step 3. When the value is 8, it means the HMAC module is in upstream mode, proceed with step 4.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Downstream mode
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Poll Status register HMAC_QUERY_BUSY_REG until it reads 0.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (b) To clear the result and make further usage of the dependent hardware (JTAG or DS) impossible, write 1 to either register HMAC_SET_INVALIDATE_JTAG_REG to clear the result generated by the JTAG key; or to register
       <a href="#page-498-2">
        HMAC_SET_INVALIDA
       </a>
       TE_DS_REG to clear the result generated by DS key. Afterwards, the HMAC Process needs to be restarted to re-enable any of the dependent peripherals.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     4. Transmit message block Block_n (
     <i>
      n &gt;
     </i>
     = 1
     <a href="#page-497-0">
      ) in upstream mode
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Poll Status register HM
       <a href="#page-497-2">
        AC_QUERY_BUSY_REG
       </a>
       until it reads 0.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (b) Write the 512-bit Block_n to register HMAC_WDATA0~15_REG. Write 1 to register HMAC_SET_MESSAGE_ONE_REG, to trigger the processing of this message block.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     (c) Poll Status register HMAC_QUERY_BUSY_REG until it reads 0.
    </li>
    <li block-type="ListItem">
     (d) Different message blocks will be generated, depending on whether the size of the to-be-processed message is a multiple of 512 bits.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the bit lengt
       <a href="#page-498-2">
        h of the message is a multi
       </a>
       ple of 512 bits, there are three possible options:
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         i. If Block_n+1 exists, write 1 to register HMAC_SET_MESSAGE_ING_REG to make
         <i>
          n
         </i>
         =
         <i>
          n
         </i>
         + 1, and then jump to step 4.(b).
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         ii. If Block_n is the last block of the message and users expects to apply SHA padding in hardware, write 1 to register HMAC_S
         <a href="#page-496-0">
          ET_MESSAGE_END_REG, and the
         </a>
         n jump to step 6.
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         iii. If Block_n is the last block of the padded message and SHA padding has been applied by users, write 1 to register HMAC_SET_MESSAGE_PAD_REG, and then jump to step 5.
        </li>
       </ul>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the bit length of the message
       <a href="#page-496-1">
        is not a multiple of 512 bits, there
       </a>
       are three possible options as follows. Note that in this case, the user is required to apply SHA padding to the message, after which the padded message
       <a href="#page-499-0">
        length should be a multiple of 512
       </a>
       bits.
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         i. If there is only one message block in total which has included all padding bits, write 1 to register HMAC_ONE_BLOCK_REG, and then jump to step 6.
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         ii. If Block_n is the second last padded block, write 1 to register HMAC_SET_MESSAGE_PAD_REG, and then jump to step 5.
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         iii. If Block_n
         <a href="#page-499-1">
          is neither the last nor th
         </a>
         e second last message block, write 1 to register HMAC_SET_MESSAGE_ING_REG and define
         <i>
          n
         </i>
         =
         <i>
          n
         </i>
         + 1, and then jump to step 4.(b).
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     5. Apply SHA p
     <a href="#page-499-0">
      adding to message
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Users a
       <a href="#page-496-0">
        pply SHA padding to the last mess
       </a>
       age block as described in Section 19.3.1, write this block to register HMAC_WDATA0~15_REG, and then write 1 to register HMAC_SET_MESSAGE_ONE_REG. Then the HMAC module will process this message block.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (b) Jump to step 6.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     6. Read hash result in upstream mode
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Poll Status register HMAC_QUERY_BUSY_REG until it reads 0.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (b) Read hash result from register HMAC_RDATA0~7_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (c) Write 1 to register H
       <a href="#page-498-2">
        MAC_SET_RESULT_FINISH
       </a>
       _REG to finish calculation. The result will be cleared at the same time.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (d) Upstream mode operation is completed.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   The SHA accelerator can be called directly, or used internally by the DS module and the HMAC module. However, they can not share the hardware resources simultaneously. Therefore, the SHA module must not be called neither by the CPU nor by the DS module when the HMAC module is in use.
  </p>
  <h1>
   <span id="page-489-1">
   </span>
   <span id="page-489-0">
   </span>
   19.3 HMAC Algorithm Details
  </h1>
  <h1>
   19.3.1 Padding Bits
  </h1>
  <p block-type="Text">
   The HMAC module uses SHA-256 as hash algorithm. If the input message is not a multiple of 512 bits, the user must apply a SHA-256 padding algorithm in software. The SHA-256 padding algorithm is the same as described in Section
   <i>
    Padding the Message
   </i>
   of FIPS PUB 180-4. In downstream mode, users do not need to input any message or apply padding. The HMAC module uses a default 32-byte pattern of 0x00 for re-enabling JTAG and a 32-byte pattern of 0xff for deriving the AES key for the DS module.
  </p>
  <p block-type="Text">
   As shown in Figure 19.3-1, suppose the length
   <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf">
    of the unpadded
   </a>
   message is
   <i>
    m
   </i>
   bits. Padding steps are as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Append one bit of value "1" to the end of the unpadded message;
    </li>
    <li block-type="ListItem">
     2. Append
     <i>
      k
     </i>
     bit
     <a href="#page-490-1">
      s of va
     </a>
     lue "0", where
     <i>
      k
     </i>
     is the smallest non-negative number which satisfies
     <i>
      m
     </i>
     + 1 +
     <i>
      k≡
     </i>
     448(
     <i>
      mod
     </i>
     512);
    </li>
    <li block-type="ListItem">
     3. Append a 64-bit integer value as a binary block. This block consists of the length of the unpadded message as a big-endian binary integer value
     <i>
      m
     </i>
     .
    </li>
   </ul>
  </p>
  <p>
   <span id="page-490-1">
   </span>
   <img src="_page_490_Figure_6.jpeg"/>
  </p>
  <p>
   Figure 19.3-1. HMAC SHA-256 Padding Diagram
  </p>
  <p block-type="Text">
   In upstream mode, if the length of the unpadded message is a multiple of 512 bits, users can configure hardware to apply SHA padding by writing 1 to HMAC_SET_MESSGAE_END_REG or do padding work themselves by writing 1 to HMAC_SET_MESSAGE_PAD_REG. If the length is not a multiple of 512 bits, SHA padding must be manually applied by the user. After the user prepared the padding data, they should complete the subsequent configuration accor
   <a href="#page-496-1">
    ding to the Section
   </a>
   19.2.5.
  </p>
  <h1>
   19.3.2 HMAC Algorithm Structure
  </h1>
  <p block-type="Text">
   <span id="page-490-0">
   </span>
   The structure of the implemented algorithm in the HMAC module
   <a href="#page-488-0">
    is show
   </a>
   n in Figure 19.3-2. This is the standard HMAC algorithm as described in RFC 2104.
  </p>
  <p>
   <span id="page-491-0">
   </span>
   <img src="_page_491_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 19.3-2. HMAC Structure Schematic Diagram
  </p>
  <p block-type="Text">
   In Figure 19.3-2:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. ipad is a 512-bit message block composed of 64 bytes of 0x36.
    </li>
    <li block-type="ListItem">
     2. op
     <a href="#page-491-0">
      ad is a
     </a>
     512-bit message block composed of 64 bytes of 0x5c.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The HMAC module appends a 256-bit 0 sequence after the bit sequence of the 256-bit key k in order to get a 512-bit K0. Then, the HMAC module XORs K
   <sup>
    0
   </sup>
   with ipad to get the 512-bit S1. Afterwards, the HMAC module appends the input message (multiple of 512 bits) after the 512-bit S1, and exercises the SHA-256 algorithm to get the 256-bit H1.
  </p>
  <p block-type="Text">
   The HMAC module appends the 256-bit SHA-256 hash result H1 to the 512-bit S2 value, which is calculated using the XOR operation of K
   <sup>
    0
   </sup>
   and opad. A 768-bit sequence will be generated. Then, the HMAC module uses the SHA padding algorithm described in Section 19.3.1 to pad the 768-bit sequence to a 1024-bit sequence, and applies the SHA-256 algorithm to get the final hash result (256-bit).
  </p>
  <h1>
   19.4 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-493-0">
   </span>
   The addresses in this section are relative to HMAC Accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th colspan="5">
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
      <br/>
      Control/Status Registers
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_START_REG
     </td>
     <td>
      HMAC start control register
     </td>
     <td>
      0x0040
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_PARA_FINISH_REG
     </td>
     <td>
      HMAC configuration completion register
     </td>
     <td>
      0x004C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_MESSAGE_ONE_REG
     </td>
     <td>
      HMAC message control register
     </td>
     <td>
      0x0050
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_MESSAGE_ING_REG
     </td>
     <td>
      HMAC message continue register
     </td>
     <td>
      0x0054
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_MESSAGE_END_REG
     </td>
     <td>
      HMAC message end register
     </td>
     <td>
      0x0058
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_RESULT_FINISH_REG
     </td>
     <td>
      HMAC result reading finish register
     </td>
     <td>
      0x005C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_INVALIDATE_JTAG_REG
      <br/>
      HMAC_SET_INVALIDATE_DS_REG
     </td>
     <td>
      Invalidate JTAG result register
      <br/>
      Invalidate digital signature result register
     </td>
     <td>
      0x0060
      <br/>
      0x0064
     </td>
     <td>
      WO
      <br/>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_QUERY_ERROR_REG
     </td>
     <td>
      Stores matching results between keys gener
     </td>
     <td>
      0x0068
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      ated by users and corresponding purposes
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      HMAC_QUERY_BUSY_REG
     </td>
     <td>
      Busy state of HMAC module
     </td>
     <td>
      0x006C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_PARA_PURPOSE_REG
     </td>
     <td>
      HMAC parameter configuration register
     </td>
     <td>
      0x0044
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SET_PARA_KEY_REG
     </td>
     <td>
      HMAC parameters configuration register
     </td>
     <td>
      0x0048
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_SOFT_JTAG_CTRL_REG
     </td>
     <td>
      Re-enable JTAG register 0
     </td>
     <td>
      0x00F8
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_JTAG_REG
     </td>
     <td>
      Re-enable JTAG register 1
     </td>
     <td>
      0x00FC
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC Message Block
      <br/>
      HMAC_WR_MESSAGE_0_REG
     </td>
     <td>
      Message register 0
     </td>
     <td>
      0x0080
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_1_REG
     </td>
     <td>
      Message register 1
     </td>
     <td>
      0x0084
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_2_REG
     </td>
     <td>
      Message register 2
     </td>
     <td>
      0x0088
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_3_REG
     </td>
     <td>
      Message register 3
     </td>
     <td>
      0x008C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_4_REG
     </td>
     <td>
      Message register 4
     </td>
     <td>
      0x0090
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_5_REG
     </td>
     <td>
      Message register 5
     </td>
     <td>
      0x0094
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_6_REG
     </td>
     <td>
      Message register 6
     </td>
     <td>
      0x0098
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_7_REG
     </td>
     <td>
      Message register 7
     </td>
     <td>
      0x009C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_8_REG
     </td>
     <td>
      Message register 8
     </td>
     <td>
      0x00A0
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_9_REG
     </td>
     <td>
      Message register 9
     </td>
     <td>
      0x00A4
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_10_REG
     </td>
     <td>
      Message register 10
     </td>
     <td>
      0x00A8
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_11_REG
     </td>
     <td>
      Message register 11
     </td>
     <td>
      0x00AC
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_12_REG
     </td>
     <td>
      Message register 12
     </td>
     <td>
      0x00B0
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_13_REG
     </td>
     <td>
      Message register 13
     </td>
     <td>
      0x00B4
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_WR_MESSAGE_14_REG
     </td>
     <td>
      Message register 14
     </td>
     <td>
      0x00B8
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td colspan="5">
      HMAC_WR_MESSAGE_15_REG
      <br/>
      Message register 15
      <br/>
      0x00BC
      <br/>
      WO
      <br/>
      HMAC Upstream Result
     </td>
    </tr>
    <tr>
     <td>
      HMAC_RD_RESULT_0_REG
     </td>
     <td>
      Hash result register 0
     </td>
     <td>
      0x00C0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_RD_RESULT_1_REG
     </td>
     <td>
      Hash result register 1
     </td>
     <td>
      0x00C4
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 19
      <br/>
      HMAC Accelerator (HMAC)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      HMAC_RD_RESULT_2_REG
     </td>
     <td>
      Hash result register 2
     </td>
     <td>
      0x00C8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_RD_RESULT_3_REG
     </td>
     <td>
      Hash result register 3
     </td>
     <td>
      0x00CC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_RD_RESULT_4_REG
     </td>
     <td>
      Hash result register 4
     </td>
     <td>
      0x00D0
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="5">
      HMAC_RD_RESULT_5_REG
      <br/>
      Hash result register 5
      <br/>
      0x00D4
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_RD_RESULT_6_REG
     </td>
     <td>
      Hash result register 6
     </td>
     <td>
      0x00D8
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_RD_RESULT_7_REG
     </td>
     <td>
      Hash result register 7
     </td>
     <td>
      0x00DC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="5">
      Control/Status Registers
      <br/>
      HMAC_SET_MESSAGE_PAD_REG
      <br/>
      Software padding register
      <br/>
      0x00F0
      <br/>
      WO
     </td>
    </tr>
    <tr>
     <td>
      HMAC_ONE_BLOCK_REG
     </td>
     <td>
      One block message register
     </td>
     <td>
      0x00F4
     </td>
     <td>
      WO
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   19.5 Registers
  </h1>
  <p block-type="Text">
   <span id="page-495-0">
   </span>
   The addresses in this section are relative to HMAC Accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-495-1">
   </span>
   <img src="_page_495_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_495_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-495-3">
   </span>
   <span id="page-495-2">
   </span>
   <img src="_page_495_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_SET_TEXT_ONE Call SHA to calculate one message block. (WO)
  </p>
  <p>
   <span id="page-496-0">
   </span>
   <img src="_page_496_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_SET_TEXT_ING Set this bit to show there are still some message blocks to be processed. (WO)
  </p>
  <h4>
   Register 19.5. HMAC_SET_MESSAGE_END_REG (0x0058)
  </h4>
  <p>
   <span id="page-496-1">
   </span>
   <img src="_page_496_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_SET_TEXT_END Set this bit to start hardware padding. (WO)
  </p>
  <p>
   <img src="_page_496_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-496-2">
   </span>
   <img src="_page_496_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_SET_RESULT_END Set this bit to exit upstream mode and clear calculation results. (WO)
  </p>
  <p>
   <span id="page-497-0">
   </span>
   <img src="_page_497_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_SET_INVALIDATE_JTAG Set this bit to clear calculation results when re-enabling JTAG in downstream mode. (WO)
  </p>
  <h4>
   Register 19.8. HMAC_SET_INVALIDATE_DS_REG (0x0064)
  </h4>
  <p>
   <span id="page-497-2">
   </span>
   <img src="_page_497_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_SET_INVALIDATE_DS Set this bit to clear calculation results of the DS module in downstream mode. (WO)
  </p>
  <p>
   <span id="page-497-1">
   </span>
   <img src="_page_497_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_QUREY_CHECK Indicates whether an HMAC key matches the purpose.(RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: HMAC key and purpose match.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: error.
    </li>
   </ul>
  </p>
  <p>
   <span id="page-498-2">
   </span>
   <img src="_page_498_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_BUSY_STATE Indicates whether HMAC is in busy state. Before configuring HMAC, please make sure HMAC is in IDLE state. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: idle.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: HMAC is still working on calculation.
    </li>
   </ul>
  </p>
  <p>
   <span id="page-498-0">
   </span>
   <img src="_page_498_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_PURPOSE_SET Determines the HMAC purpose, refer to the Table 19.2-1. (WO)
  </p>
  <p>
   <img src="_page_498_Figure_7.jpeg"/>
  </p>
  <p>
   <span id="page-498-1">
   </span>
   <img src="_page_498_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_KEY_SET Selects HMAC key. There are six keys with index 0~5. Write the index of the selected key to this field. (WO)
  </p>
  <p>
   <span id="page-499-3">
   </span>
   <span id="page-499-2">
   </span>
   <img src="_page_499_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-499-1">
   </span>
   <span id="page-499-0">
   </span>
   HMAC_SET_ONE_BLOCK Set this bit when there is only one block which already contins padding bits. (WO)
  </p>
  <p>
   <img src="_page_500_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-500-0">
   </span>
   <img src="_page_500_Figure_1.jpeg"/>
  </p>
  <p>
   HMAC_SOFT_JTAG_CTRL Set this bit to enable JTAG authentication mode. (WO)
  </p>
  <p>
   <span id="page-500-1">
   </span>
   <img src="_page_500_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   HMAC_WR_JTAG Set this field to re-enable the JTAG comparing input register. (WO)
  </p>
  <p>
   <img src="_page_500_Figure_5.jpeg"/>
  </p>
  <p>
   <img src="_page_500_Figure_6.jpeg"/>
  </p>
  <h1>
   <span id="page-501-4">
   </span>
   <span id="page-501-0">
   </span>
   Chapter 20
  </h1>
  <h1>
   RSA Accelerator (RSA)
  </h1>
  <h1>
   20.1 Introduction
  </h1>
  <p block-type="Text">
   <span id="page-501-1">
   </span>
   The RSA Accelerator provides hardware support for high precision computation used in various RSA asymmetric cipher algorithms by significantly reducing their software complexity. Compared with RSA algorithms implemented solely in software, this hardware accelerator can speed up RSA algorithms significantly. Besides, the RSA Accelerator also supports operands of different lengths, which provides more flexibility during the computation.
  </p>
  <h1>
   20.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-501-2">
   </span>
   The following functionality is supported:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Large-number modular exponentiation with two optional acceleration options
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Large-number modular multiplication
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Large-number multiplication
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Operands of different lengths
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Interrupt on completion of computation
    </li>
   </ul>
  </p>
  <h1>
   20.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-501-3">
   </span>
   The RSA Accelerator is activated by setting the SYSTEM_CRYPTO_RSA_CLK_EN bit in the SYSTEM_PERIP_CLK
  </p>
  <p block-type="Text">
   _EN1_REG register and clearing the SYSTEM_RSA_MEM_PD bit in the SYSTEM_RSA_PD_CTRL_REG register. This releases the RSA Accelerator from reset.
  </p>
  <p block-type="Text">
   <a href="#page-435-0">
    The RSA Accelerator
   </a>
   is only available after the RSA-related memories are initialized. The content of the
   <a href="#page-435-0">
    RSA_CLEA
   </a>
   N
  </p>
  <p block-type="Text">
   _REG register is 0 during initialization and will become 1 after the initialization is done. Therefore, it is advised to wait until RSA_CLEAN_REG becomes 1 bef
   <a href="#page-505-0">
    ore using the RSA Acce
   </a>
   lerator.
  </p>
  <p block-type="Text">
   The
   <a href="#page-508-1">
    RSA_INT
   </a>
   ERRUPT_ENA_REG register is used to control the interrupt triggered on completion of
   <a href="#page-508-1">
    comp
   </a>
   utation. Write 1 or 0 to this register to enable or disable interrupt. By default, the interrupt function of the RSA Accele
   <a href="#page-508-1">
    rator is enabled.
   </a>
  </p>
  <h4>
   N
   <a href="#page-511-0">
    otice:
   </a>
  </h4>
  <p block-type="Text">
   ESP32-C3's Digital Signature (DS) module also calls the RSA accelerator. Therefore, users cannot access the RSA
  </p>
  <h1>
   20.3.1 Larg
   <a href="#page-522-0">
    e Number Mo
   </a>
   dular Exponentiation
  </h1>
  <p block-type="Text">
   <span id="page-502-0">
   </span>
   Large-number modular exponentiation performs
   <i>
    Z
   </i>
   =
   <i>
    X
    <sup>
     Y
    </sup>
   </i>
   mod
   <i>
    M
   </i>
   . The computation is based on Montgomery multiplication. Therefore, aside from the
   <i>
    X
   </i>
   ,
   <i>
    Y
   </i>
   , and
   <i>
    M
   </i>
   arguments, two additional ones are needed —
   <i>
    r
   </i>
   and
   <i>
    M′
   </i>
   , which need to be calculated in advance by software.
  </p>
  <p block-type="TextInlineMath">
   RSA Accelerator supports operands of length
   <i>
    N
   </i>
   = 32
   <i>
    × x
   </i>
   , where
   <i>
    x ∈ {
   </i>
   1
   <i>
    ,
   </i>
   2
   <i>
    ,
   </i>
   3
   <i>
    , . . . ,
   </i>
   96
   <i>
    }
   </i>
   . The bit lengths of arguments
   <i>
    Z
   </i>
   ,
   <i>
    X
   </i>
   ,
   <i>
    Y
   </i>
   ,
   <i>
    M
   </i>
   , and
   <i>
    r
   </i>
   can be arbitrary
   <i>
    N
   </i>
   , but all numbers in a calculation must be of the same length. The bit length of
   <i>
    M′
   </i>
   must be 32.
  </p>
  <p block-type="Text">
   To represent the numbers used as operands, let us define a base-
   <i>
    b
   </i>
   positional notation, as follows:
  </p>
  <p block-type="Equation">
   <math display="block">
    b=2^{32}
   </math>
  </p>
  <p block-type="Text">
   Using this notation, each number is represented by a sequence of base-
   <i>
    b
   </i>
   digits:
  </p>
  <p block-type="Equation">
   <math display="block">
    n = \frac{N}{32}
   </math>
   <br/>
   \n
   <math display="block">
    Z = (Z_{n-1}Z_{n-2}\cdots Z_0)_b
   </math>
   <br/>
   \n
   <math display="block">
    X = (X_{n-1}X_{n-2}\cdots X_0)_b
   </math>
   <br/>
   \n
   <math display="block">
    Y = (Y_{n-1}Y_{n-2}\cdots Y_0)_b
   </math>
   <br/>
   \n
   <math display="block">
    M = (M_{n-1}M_{n-2}\cdots M_0)_b
   </math>
   <br/>
   \n
   <math display="block">
    \overline{r} = (\overline{r}_{n-1}\overline{r}_{n-2}\cdots \overline{r}_0)_b
   </math>
  </p>
  <p block-type="TextInlineMath">
   Each of the
   <i>
    n
   </i>
   values in
   <i>
    Zn−
   </i>
   <sup>
    1
   </sup>
   <i>
    · · ·Z
   </i>
   0,
   <i>
    Xn−
   </i>
   <sup>
    1
   </sup>
   <i>
    · · · X
   </i>
   0,
   <i>
    Yn−
   </i>
   <sup>
    1
   </sup>
   <i>
    · · · Y
   </i>
   0,
   <i>
    Mn−
   </i>
   <sup>
    1
   </sup>
   <i>
    · · · M
   </i>
   0,
   <i>
    rn−
   </i>
   <sup>
    1
   </sup>
   <i>
    · · · r
   </i>
   <sup>
    0
   </sup>
   represents one base-
   <i>
    b
   </i>
   digit (a 32-bit word).
  </p>
  <p block-type="TextInlineMath">
   <i>
    Zn−
   </i>
   1,
   <i>
    Xn−
   </i>
   1,
   <i>
    Yn−
   </i>
   1,
   <i>
    Mn−
   </i>
   <sup>
    1
   </sup>
   and
   <i>
    rn−
   </i>
   <sup>
    1
   </sup>
   are the most significant bits of
   <i>
    Z
   </i>
   ,
   <i>
    X
   </i>
   ,
   <i>
    Y
   </i>
   ,
   <i>
    M
   </i>
   , while
   <i>
    Z
   </i>
   0,
   <i>
    X
   </i>
   0,
   <i>
    Y
   </i>
   0,
   <i>
    M
   </i>
   <sup>
    0
   </sup>
   and
   <i>
    r
   </i>
   <sup>
    0
   </sup>
   are the least significant bits.
  </p>
  <p block-type="TextInlineMath">
   If we define
   <i>
    R
   </i>
   =
   <i>
    b
    <sup>
     n
    </sup>
   </i>
   , the additional arguments can be calculated as
   <i>
    r
   </i>
   =
   <i>
    R
   </i>
   <sup>
    2
   </sup>
   mod
   <i>
    M
   </i>
   .
  </p>
  <p block-type="Text">
   The following equation in the form compatible with the extended binary GCD algorithm can be written as:
  </p>
  <p block-type="Equation">
   <math display="block">
    M^{-1} \times M + 1 = R \times R^{-1}
   </math>
   <math display="block">
    M' = M^{-1} \mod b
   </math>
  </p>
  <p block-type="Text">
   Large-number modular exponentiation can be implemented as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Write 1 or 0 to the RSA_INTERRUPT_ENA_REG register to enable or disable the interrupt function.
    </li>
    <li block-type="ListItem">
     2. Configure relevant registers:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Write (
       <i>
        N
       </i>
       <sup>
        32
       </sup>
       <i>
        −
       </i>
       1) to the
       <a href="#page-511-0">
        RSA_MODE_REG
       </a>
       register.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (b) Write
       <i>
        M′
       </i>
       to the RSA_M_PRIME_REG register.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 503
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     (c) Configure registers related to the acceleration options, which are described later in Section 20.3.4.
    </li>
    <li block-type="ListItem">
     3. Write
     <i>
      X
      <sup>
       i
      </sup>
     </i>
     ,
     <i>
      Y
      <sup>
       i
      </sup>
     </i>
     ,
     <i>
      M
      <sup>
       i
      </sup>
     </i>
     and
     <i>
      r
      <sup>
       i
      </sup>
     </i>
     for
     <i>
      i ∈ {
     </i>
     0
     <i>
      ,
     </i>
     1
     <i>
      , . . . , n −
     </i>
     1
     <i>
      }
     </i>
     to memory blocks RSA_X_MEM, RSA_Y_MEM, RSA_M_MEM and RSA_Z_MEM. The capacity of each memory block is 96 words. Each word of each memory block can store one base-
     <i>
      b
     </i>
     digit. The memory blocks use the little endian format for st
     <a href="#page-504-1">
      orage,
     </a>
     i.e. the least significant digit of each number is in the lowest addr
     <a href="#page-506-0">
      ess.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <a href="#page-506-0">
    Users need to
   </a>
   writ
   <a href="#page-506-0">
    e data to each
   </a>
   memory block only according to the length of the number; data beyond this length are ignored.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     4. Write 1 to the RSA_MODEXP_START_REG register to start computation.
    </li>
    <li block-type="ListItem">
     5. Wait for the completion of computation, which happens when the content of RSA_IDLE_REG becomes 1 or the RSA interrupt occurs.
    </li>
    <li block-type="ListItem">
     6. Read the result
     <i>
      Z
      <sup>
       i
      </sup>
     </i>
     for
     <i>
      i ∈ {
     </i>
     0
     <i>
      ,
     </i>
     1
     <i>
      <a href="#page-509-0">
       , . . . , n
      </a>
      −
     </i>
     1
     <i>
      }
     </i>
     from RSA_Z_MEM.
    </li>
    <li block-type="ListItem">
     7. Write 1 to RSA_CLEAR_INTERRUPT_REG to clear the interrupt, if you have ena
     <a href="#page-509-1">
      bled the interrup
     </a>
     t function.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   After the computation, the RSA_MODE_REG register,
   <a href="#page-506-0">
    memory bloc
   </a>
   ks RSA_Y_MEM and RSA_M_MEM, as well as the RSA_M_PRIME_REG remain unchanged. However,
   <i>
    X
    <sup>
     i
    </sup>
   </i>
   in RSA_X_MEM and
   <i>
    r
    <sup>
     i
    </sup>
   </i>
   in RSA_Z_MEM computation ar
   <a href="#page-510-0">
    e overwritten, and only these o
   </a>
   verwritten memory blocks need to be re-initialized before starting another computati
   <a href="#page-508-3">
    on.
   </a>
  </p>
  <h1>
   20.3.2 Large Number Modular Multiplication
  </h1>
  <p block-type="Text">
   <span id="page-503-0">
   </span>
   Large-number modular multiplication performs
   <i>
    Z
   </i>
   =
   <i>
    X × Y
   </i>
   mod
   <i>
    M
   </i>
   . This computation is based on Montgomery multiplication. Therefore, similar to the large number modular exponentiation, two additional arguments are needed –
   <i>
    r
   </i>
   and
   <i>
    M′
   </i>
   , which need to be calculated in advance by software.
  </p>
  <p block-type="Text">
   The RSA Accelerator supports large-number modular multiplication with operands of 96 different lengths.
  </p>
  <p block-type="Text">
   The computation can be executed as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Write 1 or 0 to the RSA_INTERRUPT_ENA_REG register to enable or disable the interrupt function.
    </li>
    <li block-type="ListItem">
     2. Configure relevant registers:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (a) Write (
       <i>
        N
       </i>
       <sup>
        32
       </sup>
       <i>
        −
       </i>
       1) to the
       <a href="#page-511-0">
        RSA_MODE_REG
       </a>
       register.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (b) Write
       <i>
        M′
       </i>
       to the RSA_M_PRIME_REG register.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Write
     <i>
      X
      <sup>
       i
      </sup>
     </i>
     ,
     <i>
      Y
      <sup>
       i
      </sup>
     </i>
     ,
     <i>
      M
      <sup>
       i
      </sup>
     </i>
     , and
     <i>
      r
      <sup>
       i
      </sup>
     </i>
     for
     <i>
      i ∈ {
     </i>
     0
     <i>
      ,
     </i>
     1
     <i>
      , . . . , n −
     </i>
     1
     <i>
      }
     </i>
     to memory blocks RSA_X_MEM, RSA_Y_MEM, RSA_M_MEM and RSA_Z
     <a href="#page-508-3">
      _MEM. The capac
     </a>
     ity of each memory block is 96 words. Each word of each memory block can s
     <a href="#page-508-2">
      tore one base-
     </a>
     <i>
      b
     </i>
     digit. The memory blocks use the little endian format for storage, i.e. the least significant digit of each number is in the lowest addr
     <a href="#page-506-0">
      ess.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <a href="#page-506-0">
    Users need to
   </a>
   writ
   <a href="#page-506-0">
    e data to each
   </a>
   memory block only according to the length of the number; data beyond this length are ignored.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     4. Write 1 to the RSA_MODMULT_START_REG register.
    </li>
    <li block-type="ListItem">
     5. Wait for the completion of computation, which happens when the content of RSA_IDLE_REG becomes 1 or the RSA interrupt occurs.
    </li>
    <li block-type="ListItem">
     6. Read the result
     <i>
      Z
      <sup>
       i
      </sup>
     </i>
     for
     <i>
      i ∈ {
     </i>
     0
     <i>
      ,
     </i>
     1
     <i>
      <a href="#page-509-2">
       , . . . , n
      </a>
      −
     </i>
     1
     <i>
      }
     </i>
     from RSA_Z_MEM.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   7. Write 1 to RSA_CLEAR_INTERRUPT_REG to clear the interrupt, if you have enabled the interrupt function.
  </p>
  <p block-type="Text">
   After the computation, the length of operands in RSA_MODE_REG, the
   <i>
    X
    <sup>
     i
    </sup>
   </i>
   in memory RSA_X_MEM, the
   <i>
    Y
    <sup>
     i
    </sup>
   </i>
   in memory RSA_Y_MEM, the
   <i>
    M
    <sup>
     i
    </sup>
   </i>
   in memory RSA_M_MEM, and the
   <i>
    M′
   </i>
   in memory RSA_M_PRIME_REG remain unchanged. H
   <a href="#page-510-0">
    owever, the
   </a>
   <i>
    r
    <sup>
     i
    </sup>
   </i>
   in memory RSA_Z_MEM has already been overwritten, and only this overwritten memory block needs to be re-initialized before s
   <a href="#page-508-3">
    tarting another co
   </a>
   mputation.
  </p>
  <h1>
   20.3.3 Large Number Mul
   <a href="#page-506-0">
    tiplication
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-504-0">
   </span>
   Large-number multiplication performs
   <i>
    Z
   </i>
   =
   <i>
    X × Y
   </i>
   . The length of result
   <i>
    Z
   </i>
   is twice that of operand
   <i>
    X
   </i>
   and operand
   <i>
    Y
   </i>
   . Therefore, the RSA Accelerator only supports Large Number Multiplication with operand length
   <i>
    N
   </i>
   = 32
   <i>
    × x
   </i>
   , where
   <i>
    x ∈ {
   </i>
   1
   <i>
    ,
   </i>
   2
   <i>
    ,
   </i>
   3
   <i>
    , . . . ,
   </i>
   48
   <i>
    }
   </i>
   . The length
   <i>
    N
   </i>
   ˆ of result
   <i>
    Z
   </i>
   is 2
   <i>
    × N
   </i>
   .
  </p>
  <p block-type="Text">
   The computation can be executed as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Write 1 or 0 to the RSA_INTERRUPT_ENA_REG register to enable or disable the interrupt function.
    </li>
    <li block-type="ListItem">
     2. Write (
     <i>
      N
     </i>
     ˆ
     <sup>
      32
     </sup>
     <i>
      −
     </i>
     1), i.e. (
     <i>
      N
     </i>
     <sup>
      16
     </sup>
     <i>
      −
     </i>
     1) to the RSA_MODE_REG register.
    </li>
    <li block-type="ListItem">
     3. Write
     <i>
      X
      <sup>
       i
      </sup>
     </i>
     and
     <i>
      Y
      <sup>
       i
      </sup>
     </i>
     for
     <i>
      ∈ {
     </i>
     0
     <i>
      ,
     </i>
     1
     <i>
      , . . . , n −
     </i>
     1
     <i>
      }
     </i>
     to memory blocks RSA_X_MEM and RSA_Z_MEM. Each word of each memory blo
     <a href="#page-511-0">
      ck can store one base-
     </a>
     <i>
      b
     </i>
     digit. The memory blocks use the little endian format for storage, i.e. the least significant
     <a href="#page-508-3">
     </a>
     d
     <a href="#page-508-3">
      igit of each numb
     </a>
     er is in the lowest address.
     <i>
      n
     </i>
     is
     <i>
      <sup>
       N
      </sup>
     </i>
     32 .
    </li>
   </ul>
  </p>
  <p block-type="TextInlineMath">
   Write
   <i>
    X
    <sup>
     i
    </sup>
   </i>
   for
   <i>
    i ∈ {
   </i>
   0
   <i>
    ,
   </i>
   1
   <i>
    , . . . , n −
   </i>
   1
   <i>
    }
   </i>
   to the address of the
   <i>
    i
   </i>
   <a href="#page-506-0">
    words of the
   </a>
   RSA_
   <a href="#page-506-0">
    X_MEM
   </a>
   memory block. Note that
   <i>
    Y
    <sup>
     i
    </sup>
   </i>
   for
   <i>
    i ∈ {
   </i>
   0
   <i>
    ,
   </i>
   1
   <i>
    , . . . , n −
   </i>
   1
   <i>
    }
   </i>
   will not be written to the address of the
   <i>
    i
   </i>
   words of the RSA_Z_MEM register, but the address of the
   <i>
    n
   </i>
   +
   <i>
    i
   </i>
   words, i.e. the base address of the RSA_Z_MEM memory plus the address offset 4
   <i>
    ×
   </i>
   (
   <i>
    n
   </i>
   +
   <i>
    i
   </i>
   ).
  </p>
  <p block-type="Text">
   Users need to write data to each memory block only according to the length of the n
   <a href="#page-506-0">
    umber; data
   </a>
   beyond this length are ignored.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     4. Write 1 to the RSA_MULT_START_REG register.
    </li>
    <li block-type="ListItem">
     5. Wait for the completion of computation, which happens when the content of RSA_IDLE_REG becomes 1 or the RSA interrupt occurs.
    </li>
    <li block-type="ListItem">
     6. Read the result
     <i>
      Z
      <sup>
       i
      </sup>
     </i>
     for
     <i>
      i ∈ {
     </i>
     0
     <i>
      ,
     </i>
     1
     <i>
      <a href="#page-509-3">
       , . . . ,
      </a>
      n
     </i>
     ˆ
     <i>
      −
     </i>
     1
     <i>
      }
     </i>
     from the RSA_Z_MEM register.
     <i>
      n
     </i>
     ˆ is 2
     <i>
      × n
     </i>
     .
    </li>
    <li block-type="ListItem">
     7. Write 1 to RSA_CLEAR_INTERRUPT_REG to clear the interrupt, if you have ena
     <a href="#page-509-1">
      bled the interrup
     </a>
     t function.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   After the computation, the length of operands in RSA_M
   <a href="#page-506-0">
    ODE_REG
   </a>
   and the
   <i>
    X
    <sup>
     i
    </sup>
   </i>
   in memory RSA_X_MEM remain unchanged. However, the
   <i>
    Y
    <sup>
     i
    </sup>
   </i>
   in memory RSA_Z_MEM has already been overwritten, and only this overwritten memory block
   <a href="#page-510-0">
    needs to be re-initialized befor
   </a>
   e starting another computation.
  </p>
  <h1>
   20.3.4 Options for Accele
   <a href="#page-506-0">
    ration
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-504-1">
   </span>
   The ESP32-C3 RSA accelerator also provides SEARCH and CONSTANT_TIME options that can be configured to accelerate the large-number modular exponentiation. By default, both options are configured for no acceleration. Users can choose to use one or two of these options to accelerate the computation.
  </p>
  <p block-type="TextInlineMath">
   To be more specific, when neither of these t
   <a href="#page-510-1">
    wo option
   </a>
   s ar
   <a href="#page-510-2">
    e configured for a
   </a>
   cceleration, the time required to calculate
   <i>
    Z
   </i>
   =
   <i>
    X
    <sup>
     Y
    </sup>
   </i>
   mod
   <i>
    M
   </i>
   is solely determined by the lengths of operands. When either or both of these two options are configured for acceleration, the time required is also correlated with the 0/1 distribution of
   <i>
    Y
   </i>
   .
  </p>
  <p block-type="Equation">
   <math display="block">
    Y=(\widetilde Y_{N-1}\widetilde Y_{N-2}\cdots\widetilde Y_{t+1}\widetilde Y_t\widetilde Y_{t-1}\cdots\widetilde Y_0)_2
   </math>
  </p>
  <p block-type="Text">
   where,
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      • N
     </i>
     is the length of
     <i>
      Y
     </i>
     ,
    </li>
    <li block-type="ListItem">
     <i>
      • Y
     </i>
     e
     <i>
      <sup>
       t
      </sup>
     </i>
     is 1,
    </li>
    <li block-type="ListItem">
     <i>
      • Y
     </i>
     e
     <i>
      N−
     </i>
     <sup>
      1
     </sup>
     ,
     <i>
      Y
     </i>
     e
     <i>
      N−
     </i>
     <sup>
      2
     </sup>
     , …,
     <i>
      Y
     </i>
     e
     <i>
      t
     </i>
     +1 are all equal to 0,
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     and
     <i>
      Y
     </i>
     e
     <i>
      t−
     </i>
     <sup>
      1
     </sup>
     ,
     <i>
      Y
     </i>
     e
     <i>
      t−
     </i>
     <sup>
      2
     </sup>
     , …,
     <i>
      Y
     </i>
     e
     <sup>
      0
     </sup>
     are either 0 or 1 but exactly
     <i>
      m
     </i>
     bits should be equal to 0 and
     <i>
      t
     </i>
     -
     <i>
      m
     </i>
     bits 1, i.e. the Hamming weight of
     <i>
      Y
     </i>
     e
     <i>
      t−
     </i>
     1
     <i>
      Y
     </i>
     e
     <i>
      t−
     </i>
     2
     <i>
      , · · · , Y
     </i>
     e
     <sup>
      0
     </sup>
     is
     <i>
      t − m
     </i>
     .
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When either of these two options is configured for acceleration:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SEARCH Option (Configuring RSA_SEARCH_ENABLE to 1 for acceleration)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The accelerator ignores the bit positions of
       <i>
        Y
       </i>
       e
       <i>
        <sup>
         i
        </sup>
       </i>
       , where
       <i>
        i &gt; α
       </i>
       . Search position
       <i>
        α
       </i>
       is set by configuring the RSA_SEARCH_POS_REG register. The maximum value of
       <i>
        α
       </i>
       is
       <i>
        N
       </i>
       -1, which leads to the same result when this option
       <a href="#page-510-1">
       </a>
       i
       <a href="#page-510-1">
        s not used for accelerat
       </a>
       ion. The best acceleration performance can be achieved by setting
       <i>
        α
       </i>
       to
       <i>
        t
       </i>
       , in which case, all the
       <i>
        Y
       </i>
       e
       <i>
        N−
       </i>
       1,
       <i>
        Y
       </i>
       e
       <i>
        N−
       </i>
       2, …,
       <i>
        Y
       </i>
       e
       <i>
        t
       </i>
       +1 of 0s are ignored during the cal
       <a href="#page-511-1">
        culation. Note that if you s
       </a>
       et
       <i>
        α
       </i>
       to be less than
       <i>
        t
       </i>
       , then the result of the modular exponentiation
       <i>
        Z
       </i>
       =
       <i>
        X
        <sup>
         Y
        </sup>
       </i>
       mod
       <i>
        M
       </i>
       will be incorrect.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CONSTANT_TIME Option (Configuring RSA_CONSTANT_TIME_REG to 0 for acceleration)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The accelerator speeds up the calculation by simplifying the calculation concerning the 0 bits of
       <i>
        Y
       </i>
       . Therefore, the higher the proportion of bits 0 against bits 1, the better the acceleration performance is.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   We provide an example to demonstrate the performance of the RSA Accelerator under different combinations of SEARCH and CONSTANT_TIME configuration. Here we perform
   <i>
    Z
   </i>
   =
   <i>
    X
    <sup>
     Y
    </sup>
   </i>
   mod
   <i>
    M
   </i>
   with
   <i>
    N
   </i>
   = 3072 and
   <i>
    Y
   </i>
   = 65537. Table 20.3-1 below demonstrates the time costs under different combinations of SEARCH and CONSTANT_TIME configuration. Here, we should also mention that,
   <i>
    α
   </i>
   is set to 16 when the SEARCH option is en
   <a href="#page-510-1">
    abled.
   </a>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      SEARCH Option
     </td>
     <td>
      CONSTANT_TIME Option
     </td>
     <td>
      Time Cost (ms)
     </td>
    </tr>
    <tr>
     <td>
      No acceleration
     </td>
     <td>
      No acceleration
     </td>
     <td>
      752.81
     </td>
    </tr>
    <tr>
     <td>
      Accelerated
     </td>
     <td>
      No acceleration
     </td>
     <td>
      4.52
     </td>
    </tr>
    <tr>
     <td>
      No acceleration
     </td>
     <td>
      Acceleration
     </td>
     <td>
      2.406
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 20.3-1. Acceleration Performance
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <span id="page-505-1">
   </span>
   It's obvious that:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The time cost is the biggest when none of these two options is configured for acceleration.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The time cost is the smallest when both of these two options are configured for acceleration.
    </li>
    <li block-type="ListItem">
     <span id="page-505-0">
     </span>
     <i>
      •
     </i>
     The time cost can be dramatically reduced when either or both option(s) are configured for acceleration.
    </li>
   </ul>
  </p>
  <h1>
   20.4 Memory Summary
  </h1>
  <p block-type="Text">
   The addresses in this section are relative to the RSA accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <span id="page-506-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Table 20.4-1. RSA Accelerator Memory Blocks
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Size (byte)
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      RSA_M_MEM
     </td>
     <td>
      Memory M
     </td>
     <td>
      384
     </td>
     <td>
      0x0000
     </td>
     <td>
      0x017F
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 20.4-1. RSA Accelerator Memory Blocks
  </h4>
  <h1>
   20.5 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-507-0">
   </span>
   The addresses in this section are relative to the RSA accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="5">
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
      <br/>
      RSA_M_PRIME_REG
     </td>
     <td>
      Register to store M'
     </td>
     <td>
      0x0800
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RSA_MODE_REG
     </td>
     <td>
      RSA length mode
     </td>
     <td>
      0x0804
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RSA_CONSTANT_TIME_REG
     </td>
     <td>
      The constant_time option
     </td>
     <td>
      0x0820
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="6">
      RSA_SEARCH_ENABLE_REG
      <br/>
      The search option
      <br/>
      0x0824
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RSA_SEARCH_POS_REG
     </td>
     <td>
      The search position
     </td>
     <td>
      0x0828
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Status/Control Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RSA_CLEAN_REG
     </td>
     <td>
      RSA clean register
     </td>
     <td>
      0x0808
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RSA_MODEXP_START_REG
     </td>
     <td>
      Modular exponentiation starting bit
     </td>
     <td>
      0x080C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      RSA_MODMULT_START_REG
     </td>
     <td>
      Modular multiplication starting bit
     </td>
     <td>
      0x0810
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td colspan="5">
      RSA_MULT_START_REG
      <br/>
      Normal multiplication starting bit
      <br/>
      0x0814
      <br/>
      WO
     </td>
    </tr>
    <tr>
     <td>
      RSA_IDLE_REG
     </td>
     <td>
      RSA idle register
     </td>
     <td>
      0x0818
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="5">
      RSA_CLEAR_INTERRUPT_REG
      <br/>
      RSA clear interrupt register
      <br/>
      0x081C
      <br/>
      WO
     </td>
    </tr>
    <tr>
     <td>
      RSA_INTERRUPT_ENA_REG
     </td>
     <td>
      RSA interrupt enable register
     </td>
     <td>
      0x082C
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   20.6 Registers
  </h1>
  <p block-type="Text">
   <span id="page-508-0">
   </span>
   The addresses in this section are relative to the RSA accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-508-2">
   </span>
   <img src="_page_508_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-508-3">
   </span>
   <span id="page-508-1">
   </span>
   RSA_CLEAN The content of this bit is 1 when memories complete initialization. (RO)
  </p>
  <p>
   <img src="_page_509_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-509-0">
   </span>
   <img src="_page_509_Figure_1.jpeg"/>
  </p>
  <p>
   <img src="_page_509_Figure_2.jpeg"/>
  </p>
  <h4>
   Register 20.5. RSA_MODMULT_START_REG (0x0810)
  </h4>
  <p>
   <span id="page-509-2">
   </span>
   <img src="_page_509_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   RSA_MODMULT_START Set this bit to 1 to start the modular multiplication. (WO)
  </p>
  <p block-type="Text">
   Register 20.6. RSA_MULT_START_REG (0x0814)
  </p>
  <p>
   <span id="page-509-3">
   </span>
   <img src="_page_509_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   RSA_MULT_START Set this bit to 1 to start the multiplication. (WO)
  </p>
  <p>
   <img src="_page_509_Figure_9.jpeg"/>
  </p>
  <p>
   <span id="page-509-1">
   </span>
   <img src="_page_509_Figure_10.jpeg"/>
  </p>
  <p block-type="Text">
   RSA_IDLE The content of this bit is 1 when the RSA accelerator is idle. (RO)
  </p>
  <p>
   <span id="page-510-0">
   </span>
   <img src="_page_510_Figure_1.jpeg"/>
  </p>
  <p>
   RSA_CLEAR_INTERRUPT Set this bit to 1 to clear the RSA interrupts. (WO)
  </p>
  <h4>
   Register 20.9. RSA_CONSTANT_TIME_REG (0x0820)
  </h4>
  <p>
   <span id="page-510-2">
   </span>
   <img src="_page_510_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   RSA_CONSTANT_TIME_REG Controls the constant_time option. 0: acceleration. 1: no acceleration (by default). (R/W)
  </p>
  <p>
   <img src="_page_510_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-510-1">
   </span>
   <img src="_page_510_Figure_7.jpeg"/>
  </p>
  <p>
   RSA_SEARCH_ENABLE Controls the search option. 0: no acceleration (by default). 1: acceleration. (R/W)
  </p>
  <h4>
   Register 20.11. RSA_SEARCH_POS_REG (0x0828)
  </h4>
  <p>
   <span id="page-511-1">
   </span>
   <img src="_page_511_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RSA_SEARCH_POS Is used to configure the starting address when the acceleration option of search is used. (R/W)
  </p>
  <h4>
   Register 20.12. RSA_INTERRUPT_ENA_REG (0x082C)
  </h4>
  <p>
   <span id="page-511-0">
   </span>
   <img src="_page_511_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   RSA_INTERRUPT_ENA Set this bit to 1 to enable the RSA interrupt. This option is enabled by default. (R/W)
  </p>
  <h4>
   Register 20.13. RSA_DATE_REG (0x0830)
  </h4>
  <p>
   <img src="_page_511_Figure_7.jpeg"/>
  </p>
  <p>
   RSA_DATE Version control register. (R/W)
  </p>
  <h1>
   <span id="page-512-5">
   </span>
   <span id="page-512-0">
   </span>
   Chapter 21
  </h1>
  <h1>
   SHA Accelerator (SHA)
  </h1>
  <h1>
   21.1 Introduction
  </h1>
  <p block-type="Text">
   <span id="page-512-1">
   </span>
   ESP32-C3 integrates an SHA accelerator, which is a hardware device that speeds up SHA algorithm significantly, compared to SHA algorithm implemented solely in software. The SHA accelerator integrated in ESP32-C3 has two working modes, which are Typical SHA and DMA-SHA.
  </p>
  <h1>
   21.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-512-2">
   </span>
   The following functionality is supported:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The following hash algorithms introduced in FIPS PUB 180-4 Spec.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       SHA-1
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       SHA-224
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       SHA-256
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Two working modes
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Typical SHA
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       DMA-SHA
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Interleaved function when working in Typical SHA working mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Interrupt function when working in DMA-SHA working mode
    </li>
   </ul>
  </p>
  <h1>
   21.3 Working Modes
  </h1>
  <p block-type="Text">
   <span id="page-512-3">
   </span>
   The SHA accelerator integrated in ESP32-C3 has two working modes.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Typical SHA Working Mode: all the data is written and read via CPU directly.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DMA-SHA Working Mode: all the data is read via DMA. That is, users can configure the DMA controller to read all the data needed for hash operation, thus releasing CPU for completing other tasks.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-512-4">
   </span>
   Users
   <a href="#page-514-2">
    can start the SHA accelera
   </a>
   tor with different working modes by configuring registers SHA_START_REG and S
   <a href="#page-515-0">
    HA_DMA_START_REG. Fo
   </a>
   r details, please see Table 21.3-1.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 21.3-1. SHA Accelerator Working Mode
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Working Mode
     </th>
     <th>
      Configuration Method
     </th>
    </tr>
    <tr>
     <td>
      Typical SHA
     </td>
     <td>
      Set SHA_START_REG to 1
     </td>
    </tr>
   </tbody>
  </table>
  <p>
  </p>
  <p block-type="Text">
   Users can choose hash algorithms by configuring the SHA_MODE_REG register. For details, please see Table 21.3-2.
  </p>
  <h4>
   Table 21.3-2. SHA Hash Algorithm Selection
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 21.3-2. SHA Hash Algorithm Selection
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Hash Algorithm
     </td>
     <td>
      SHA_MODE_REG Configuration
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <span id="page-513-4">
   </span>
   Notice:
  </h4>
  <p block-type="Text">
   ESP32-C3's Digital Signature (DS) and HMAC Accelerator (HMAC) modules also call the SHA accelerator. Therefore, users cannot access the SHA accelerator when these modules are working.
  </p>
  <h1>
   21.4 Function Description
  </h1>
  <p block-type="Text">
   <span id="page-513-0">
   </span>
   SHA accelerator can generate the message digest via two steps: Preprocessing and Hash operation.
  </p>
  <h1>
   21.4.1 Preprocessing
  </h1>
  <p block-type="Text">
   <span id="page-513-1">
   </span>
   Preprocessing consists of three steps: padding the message, pa
   <a href="#page-513-1">
    rsing the messa
   </a>
   ge
   <a href="#page-514-1">
   </a>
   i
   <a href="#page-514-1">
    nto message blo
   </a>
   cks and setting the initial hash value.
  </p>
  <h4>
   21.4.1.1 Padding the Message
  </h4>
  <p block-type="Text">
   <span id="page-513-2">
   </span>
   <a href="#page-514-0">
    The SHA accelerator can on
   </a>
   ly process message blocks of 512 bits. Thus, all the messages should be padded to a multiple of 512 bits before the hash task.
  </p>
  <p block-type="Text">
   Suppose that the length of the message
   <i>
    M
   </i>
   is
   <i>
    m
   </i>
   bits. Then
   <i>
    M
   </i>
   shall be padded as introduced below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. First, append the bit "1" to the end of the message;
    </li>
    <li block-type="ListItem">
     2. Second, append
     <i>
      k
     </i>
     bits of zeros, where
     <i>
      k
     </i>
     is the smallest, non-negative solution to the equation
     <i>
      m
     </i>
     + 1 +
     <i>
      k ≡
     </i>
     448
     <i>
      mod
     </i>
     512;
    </li>
    <li block-type="ListItem">
     3. Last, append the 64-bit block of value equal to the number
     <i>
      m
     </i>
     expressed using a binary representation.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For more details, please refer to Section "5.1 Padding the Message" in FIPS PUB 180-4 Spec.
  </p>
  <h4>
   21.4.1.2 Parsing the Message
  </h4>
  <p block-type="TextInlineMath">
   <span id="page-513-3">
   </span>
   The message and its padding must be parsed into
   <i>
    N
   </i>
   512-bit blocks,
   <i>
    M
   </i>
   (1) ,
   <i>
    M
   </i>
   (2)
   <a href="https://doi.org/10.6028/NIST.FIPS.180-4">
    , …,
   </a>
   <i>
    M
   </i>
   (
   <i>
    N
   </i>
   ) . Since the 512 bits of the input block may be expressed as sixteen 32-bit words, the first 32 bits of message block
   <i>
    i
   </i>
   are denoted M (
   <i>
    i
   </i>
   ) 0 , the next 32 bits are M(
   <i>
    i
   </i>
   ) 1 , and so on up to M(
   <i>
    i
   </i>
   )
   <sup>
    15
   </sup>
   .
  </p>
  <p block-type="TextInlineMath">
   During the task, all the message blocks are written into the SHA_M_
   <i>
    n
   </i>
   _REG: M(
   <i>
    i
   </i>
   ) 0 is stored in SHA_M_0_REG, M (
   <i>
    i
   </i>
   ) 1 stored in SHA_M_1_REG, …, and M(
   <i>
    i
   </i>
   )
   <sup>
    15
   </sup>
   stored in SHA_M_15_REG.
  </p>
  <p block-type="Text">
   For more information about "message block", please refer to Section "2.1 Glossary of Terms and Acronyms" in FIPS PUB 180-4 Spec.
  </p>
  <h4>
   2
   <a href="https://doi.org/10.6028/NIST.FIPS.180-4">
    1.4.1.3
   </a>
   Setting the Initial Hash Value
  </h4>
  <p block-type="Text">
   <span id="page-514-0">
   </span>
   Before hash task begins for any secure hash algorithms, the initial Hash value H(0) must be set based on different algorithms. However, the SHA accelerator uses the initial Hash values (constant C) stored in the hardware for hash tasks.
  </p>
  <h1>
   21.4.2 Hash Operation
  </h1>
  <p block-type="Text">
   <span id="page-514-1">
   </span>
   After the preprocessing, the ESP32-C3 SHA accelerator starts to hash a message
   <i>
    M
   </i>
   and generates message digest of different lengths, depending on different hash algorithms. As described above, the ESP32-C3 SHA accelerator supports two working modes, which are Typical SHA and DMA-SHA. The operation process for the SHA accelerator under two working modes is described in the following subsections.
  </p>
  <h4>
   21.4.2.1 Typical SHA Mode Process
  </h4>
  <p block-type="Text">
   <span id="page-514-2">
   </span>
   Usually, the SHA accelerator will process all blocks of a message and produce a message digest before starting the computation of the next message digest.
  </p>
  <p block-type="Text">
   However, ESP32-C3 SHA also supports optional "interleaved" message digest calculation. Users can insert new calculation (both Typical SHA and DMA-SHA) each time the SHA accelerator completes a sequence of operations.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In Typical SHA mode, this can be done after each individual message block.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In DMA-SHA mode, this can be done after a full sequence of DMA operations is complete.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Specifi
   <a href="#page-514-2">
    cally, users ca
   </a>
   n read out the message digest from registers SHA_H_
   <i>
    n
   </i>
   _REG after completing part of a message digest calculation, and use the SHA accelerator for a different calculation. After the different calculat
   <a href="#page-515-0">
    ion comple
   </a>
   tes, users can restore the previous message digest to registers SHA_H_
   <i>
    n
   </i>
   _REG, and resume the accelerator with the previously paused calculation.
  </p>
  <h4>
   Typical SHA Process
  </h4>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. Select a hash algorithm.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure the SHA_MODE_REG register based on Table 21.3-2.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Process the current message block
     <sup>
      1
     </sup>
     .
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write the mes
       <a href="#page-520-0">
        sage block in regis
       </a>
       ters SHA_M_
       <i>
        n
       </i>
       _REG.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Start the SHA accelerator.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If this is the first time to execute this
       <a href="#page-521-0">
        step, set the
       </a>
       SHA_START_REG register to 1 to start the SHA accelerator. In this case, the accelerator uses the initial hash value stored in hardware for a given algorithm configured in Step 1 to start the calculation;
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If this is not the first time to execute this step
     <sup>
      2
     </sup>
     , set the SHA_CONTINUE_REG register to 1 to start the SHA accelerator. In this case, the accelerator uses the hash value stored in the SHA_H_
     <i>
      n
     </i>
     _REG register to start calculation.
    </li>
    <li block-type="ListItem">
     4. Check the progress of the current message block
     <a href="#page-515-1">
      .
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Poll register SHA_BUSY_REG until the content of this register becomes 0, indicating
       <a href="#page-521-1">
        the accelerator
       </a>
       has completed the calculation for the current message block and now is in the "idle" status
       <sup>
        3
       </sup>
       .
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     5. Decide if you have more message blocks to process:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If yes, pleas
       <a href="#page-519-0">
        e go back to Ste
       </a>
       p 2.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Otherwise, please continue.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     6. Obtain the message digest.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Read the message digest from registers SHA_H_
       <i>
        n
       </i>
       _REG.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   <span id="page-515-1">
   </span>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. In this step, the software can also write the next
     <a href="#page-521-1">
      message block (
     </a>
     to be processed) in registers SHA_M_
     <i>
      n
     </i>
     _REG, if any, while the hardware starts SHA calculation, to save time.
    </li>
    <li block-type="ListItem">
     2. You are resuming the SHA accelerator with the previously paused calculation.
    </li>
    <li block-type="ListItem">
     3. Here you can decide if you want to insert other calculations. If yes, please go to the proce
     <a href="#page-521-0">
      ss for interleaved
     </a>
     calculations for details.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-515-2">
   </span>
   As mentioned above, ESP32-C3 SHA accelerator supports "interleaving" calculation u
   <a href="#page-515-2">
    nder the Typical SHA
   </a>
   workin
   <a href="#page-515-2">
    g mode
   </a>
   .
  </p>
  <p block-type="Text">
   The process to implement interleaved calculation is described below.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Prepare to hand the SHA accelerator over for an interleaved calculation by storing the following data of the previous calculation.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       The selected hash algorithm stored in the SHA_MODE_REG register.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       The message digest stored in registers SHA_H_
       <i>
        n
       </i>
       _REG.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Perform the interleaved calculation. For the det
     <a href="#page-520-0">
      ailed process of t
     </a>
     he interleaved calculation, please refer to Typical SHA process or DMA-SHA process, depending on the working mode of your interleaved calculation.
    </li>
    <li block-type="ListItem">
     3. Prepare to hand the SHA accelerator back to the previously paused calculation by restoring the following da
     <a href="#page-514-2">
      ta of the previous ca
     </a>
     lcu
     <a href="#page-515-0">
      lation.
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write the previously stored hash algorithm back to register SHA_MODE_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write the previously stored message digest back to registers SHA_H_
       <i>
        n
       </i>
       _REG.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <span id="page-515-0">
     </span>
     4. Write the next message block from the previous paused calcul
     <a href="#page-520-0">
      ation in registers
     </a>
     SHA_M_
     <i>
      n
     </i>
     _REG, and set the SHA_CONTINUE_REG register to 1 to restart the SHA accelerator with the previously paused calculation.
    </li>
   </ul>
  </p>
  <h2>
   21.4.2.2 DMA-SHA Mode Process
  </h2>
  <p block-type="Text">
   ESP32-C3 SHA accelerator does not support "interleaving" message digest calculation at the level of individual message blocks when using DMA, which means you cannot insert new calculation before a complete DMA-SHA process (of one or more message blocks) completes. In this case, users who need interleaved operation are recommended to divide the message blocks and perform several DMA-SHA calculations, instead of trying to compute all the messages in one go.
  </p>
  <p block-type="Text">
   Single DMA-SHA calculation supports up to 63 data blocks.
  </p>
  <p block-type="Text">
   In contrast to the Typical SHA working mode, when the SHA accelerator is working under the DMA-SHA mode, all data read are completed via DMA. Therefore, users are required to configure the DMA controller following the description in Chapter 2
   <i>
    GDMA Controller (GDMA)
   </i>
   .
  </p>
  <h4>
   DMA-SHA process
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Select a hash algorit
     <a href="#page-59-0">
      hm.
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Select a hash algorithm by configuring the SHA_MODE_REG register. For details, please refer to Table 21.3-2.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Configure the SHA_INT_ENA_REG register to enable or disable interrupt (Set 1 to enable).
    </li>
    <li block-type="ListItem">
     3. Configure
     <a href="#page-513-4">
      the num
     </a>
     ber of message blocks.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write the
       <a href="#page-520-1">
        number of message
       </a>
       blocks
       <i>
        M
       </i>
       to the SHA_DMA_BLOCK_NUM_REG register.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     4. Start the DMA-SHA calculation.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the current DMA-SHA calculation follows a pr
       <a href="#page-521-2">
        evious calculation, firstly write t
       </a>
       he message digest from the previous calculation to registers SHA_H_
       <i>
        n
       </i>
       _REG, then write 1 to register SHA_DMA_CONTINUE_REG to start SHA accelerator;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Otherwise, write 1 to register SHA_DMA_START_REG to start the accelerator.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     5. Wait
     <a href="#page-519-1">
      till the completion of the DM
     </a>
     A-SHA calcul
     <a href="#page-521-1">
      ation, which hap
     </a>
     pens when:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       The content of SHA_BUSY_REG
       <a href="#page-519-2">
        register becomes 0,
       </a>
       or
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       An SHA interrupt occurs. In this case, please clear interrupt by writing 1 to the SHA_INT_CLEAR_REG register.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     6. Obtain the message
     <a href="#page-519-0">
      digest:
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Read the message digest from registers SHA_H_
       <i>
        n
       </i>
       _REG.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   21.4.3 Message Digest
  </h1>
  <p block-type="Text">
   <span id="page-516-0">
   </span>
   After the hash task completes, the SHA accelerator
   <a href="#page-521-1">
    writes the mess
   </a>
   age digest from the task to registers SHA_H_
   <i>
    n
   </i>
   _REG(
   <i>
    n
   </i>
   : 0~7). The lengths of the generated message digest are different depending on different hash algorithms. For details, see Table 21.4-1 below:
  </p>
  <span id="page-517-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th colspan="4">
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 21.4-1. The Storage and Length of Message Digest from Different Algorithms
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Hash Algorithm
     </td>
     <td>
      Length of Message Digest (in bits)
     </td>
     <td>
      Storage1
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 21.4-1. The Storage and Length of Message Digest from Different Algorithms
  </p>
  <p block-type="Text">
   1 The message digest is stored in registers from most significant bits to the least significant bits, with the first word stored in register SHA_H_0_REG and the second word stored in register SHA_H_1_REG... For details, please see subsection 21.4.1.2.
  </p>
  <h1>
   21.4.4 Inter
   <a href="#page-521-1">
    rupt
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-517-0">
   </span>
   SHA accelerator supports interrupt on the completion of message digest calculation when working in the DMA-SHA mode. To enable this function, write 1 to register SHA_INT_ENA_REG. Note that the interrupt should be cleared by software after use via setting the SHA_INT_CLEAR_REG register to 1.
  </p>
  <h1>
   21.5 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-517-1">
   </span>
   The addresses in this section are relative to the SHA accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="4">
     </td>
    </tr>
    <tr>
     <td>
      Name
      <br/>
      Control/Status registers
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      SHA_CONTINUE_REG
     </td>
     <td>
      Continues SHA operation (only effective in Typ
      <br/>
      ical SHA mode)
     </td>
     <td>
      0x0014
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      SHA_BUSY_REG
     </td>
     <td>
      Indicates if SHA Accelerator is busy or not
      <br/>
      Starts the SHA accelerator for DMA-SHA oper
     </td>
     <td>
      0x0018
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      SHA_DMA_START_REG
     </td>
     <td>
      ation
      <br/>
      Starts the SHA accelerator for Typical SHA op
     </td>
     <td>
      0x001C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      SHA_START_REG
     </td>
     <td>
      eration
      <br/>
      Continues
      <br/>
      SHA
      <br/>
      operation
      <br/>
      (only
      <br/>
      effective
     </td>
     <td>
      0x0010
      <br/>
      in
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      SHA_DMA_CONTINUE_REG
     </td>
     <td>
      DMA-SHA mode)
     </td>
     <td>
      0x0020
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      SHA_INT_CLEAR_REG
     </td>
     <td>
      DMA-SHA interrupt clear register
     </td>
     <td>
      0x0024
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td colspan="4">
      SHA_INT_ENA_REG
      <br/>
      DMA-SHA interrupt enable register
      <br/>
      0x0028
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Version Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="5">
      SHA_DATE_REG
      <br/>
      Version control register
      <br/>
      0x002C
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
     </td>
     <td colspan="2">
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="5">
      SHA_MODE_REG
      <br/>
      Defines the algorithm of SHA accelerator
      <br/>
      0x0000
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Data Registers
      <br/>
      SHA_DMA_BLOCK_NUM_REG
     </td>
     <td>
      Block number register (only effective for DMA
      <br/>
      SHA)
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_H_0_REG
     </td>
     <td>
      Hash value
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_H_1_REG
     </td>
     <td>
      Hash value
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 21
      <br/>
      SHA Accelerator (SHA)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      SHA_H_2_REG
     </td>
     <td>
      Hash value
     </td>
     <td>
      0x0048
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_H_3_REG
     </td>
     <td>
      Hash value
     </td>
     <td>
      0x004C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_H_4_REG
     </td>
     <td>
      Hash value
     </td>
     <td>
      0x0050
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_H_5_REG
     </td>
     <td>
      Hash value
     </td>
     <td>
      0x0054
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_H_6_REG
     </td>
     <td>
      Hash value
     </td>
     <td>
      0x0058
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_H_7_REG
     </td>
     <td>
      Hash value
     </td>
     <td>
      0x005C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_0_REG
      <br/>
      SHA_M_1_REG
     </td>
     <td>
      Message
      <br/>
      Message
     </td>
     <td>
      0x0080
      <br/>
      0x0084
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_2_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x0088
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_3_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x008C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_4_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x0090
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_5_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x0094
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_6_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x0098
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_7_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x009C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_8_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x00A0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_9_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x00A4
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_10_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x00A8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_11_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x00AC
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_12_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x00B0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SHA_M_13_REG
     </td>
     <td>
      Message
     </td>
     <td>
      0x00B4
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   21.6
   <a href="#page-521-0">
    Reg
   </a>
   isters
  </h1>
  <p block-type="Text">
   <span id="page-518-0">
   </span>
   The addresses in this section are relative to the SHA accelerator base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-518-1">
   </span>
   <img src="_page_518_Figure_3.jpeg"/>
  </p>
  <p>
   Register 21.1. SHA_START_REG (0x0010)
  </p>
  <p block-type="Text">
   SHA_START Write 1 to start Typical SHA calculation. (WO)
  </p>
  <p>
   <span id="page-519-3">
   </span>
   <img src="_page_519_Figure_1.jpeg"/>
  </p>
  <p>
   SHA_CONTINUE Write 1 to continue Typical SHA calculation. (WO)
  </p>
  <p>
   <img src="_page_519_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-519-0">
   </span>
   <img src="_page_519_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   SHA_BUSY_STATE Indicates the states of SHA accelerator. (RO) 1'h0: idle 1'h1: busy
  </p>
  <p block-type="Text">
   Register 21.4. SHA_DMA_START_REG (0x001C)
  </p>
  <p>
   <span id="page-519-2">
   </span>
   <img src="_page_519_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   SHA_DMA_START Write 1 to start DMA-SHA calculation. (WO)
  </p>
  <p>
   <img src="_page_519_Figure_9.jpeg"/>
  </p>
  <p>
   <span id="page-519-1">
   </span>
   <img src="_page_519_Figure_10.jpeg"/>
  </p>
  <p block-type="Text">
   SHA_DMA_CONTINUE Write 1 to continue DMA-SHA calculation. (WO)
  </p>
  <p>
   <span id="page-520-2">
   </span>
   <img src="_page_520_Figure_1.jpeg"/>
  </p>
  <p>
   SHA_CLEAR_INTERRUPT Clears DMA-SHA interrupt. (WO)
  </p>
  <h4>
   Register 21.7. SHA_INT_ENA_REG (0x0028)
  </h4>
  <p>
   <span id="page-520-1">
   </span>
   <img src="_page_520_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   SHA_INTERRUPT_ENA Enables DMA-SHA interrupt. (R/W)
  </p>
  <h4>
   Register 21.8. SHA_DATE_REG (0x002C)
  </h4>
  <p>
   <span id="page-520-3">
   </span>
   <img src="_page_520_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   SHA_DATE Version control register. (R/W)
  </p>
  <h4>
   Register 21.9. SHA_MODE_REG (0x0000)
  </h4>
  <p>
   <span id="page-520-0">
   </span>
   <img src="_page_520_Figure_10.jpeg"/>
  </p>
  <p>
   <img src="_page_520_Figure_11.jpeg"/>
  </p>
  <h4>
   Register 21.10. SHA_DMA_BLOCK_NUM_REG (0x000C)
  </h4>
  <p>
   <span id="page-521-2">
   </span>
   <img src="_page_521_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SHA_DMA_BLOCK_NUM Defines the DMA-SHA block number. (R/W)
  </p>
  <h4>
   Register 21.11. SHA_H_
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-7) (0x0040+4*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-521-1">
   </span>
   <img src="_page_521_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   SHA_H_
   <i>
    n
   </i>
   Stores the
   <i>
    n
   </i>
   th 32-bit piece of the Hash value. (R/W)
  </p>
  <h4>
   Register 21.12. SHA_M_
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0-15) (0x0080+4*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-521-0">
   </span>
   <img src="_page_521_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   SHA_M_
   <i>
    n
   </i>
   Stores the
   <i>
    n
   </i>
   th 32-bit piece of the message. (R/W)
  </p>
  <h1>
   <span id="page-522-0">
   </span>
   Chapter 22
  </h1>
  <h1>
   Digital Signature (DS)
  </h1>
  <h1>
   22.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-522-1">
   </span>
   A Digital Signature is used to verify the authenticity and integrity of a message using a cryptographic algorithm. This can be used to validate a device's identity to a server, or to check the integrity of a message.
  </p>
  <p block-type="Text">
   The ESP32-C3 includes a Digital Signature (DS) module providing hardware acceleration of messages' signatures based on RSA. It uses pre-encrypted parameters to calculate a signature. The parameters are encrypted using HMAC as a key-derivation function. In turn, the HMAC uses eFuses as an input key. The whole process happens in hardware so that neither the decryption key for the RSA parameters nor the input key for the HMAC key derivation function can be seen by users while calculating the signature.
  </p>
  <h1>
   22.2 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-522-2">
     </span>
     <i>
      •
     </i>
     RSA digital signatures with key length up to 3072 bits
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Encrypted private key data, only decryptable by DS module
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SHA-256 digest to protect private key data against tampering by an attacker
    </li>
   </ul>
  </p>
  <h1>
   22.3 Functional Description
  </h1>
  <h1>
   <span id="page-522-3">
   </span>
   22.3.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-522-4">
   </span>
   The DS peripheral calculates RSA signature as
   <i>
    Z
   </i>
   =
   <i>
    X
    <sup>
     Y
    </sup>
   </i>
   mod
   <i>
    M
   </i>
   where
   <i>
    Z
   </i>
   is the signature,
   <i>
    X
   </i>
   is the input message, and
   <i>
    Y
   </i>
   and
   <i>
    M
   </i>
   are the RSA private key parameters.
  </p>
  <p block-type="Text">
   Private key parameters are stored in flash as ciphertext. They are decrypted using a key (
   <i>
    DS
   </i>
   _
   <i>
    KEY
   </i>
   ) which can only be calculated by the DS peripheral via the HMAC peripheral. The required inputs (
   <i>
    HMAC
   </i>
   _
   <i>
    KEY
   </i>
   ) to generate the key are only stored in eFuse and can only be accessed by the HMAC peripheral. That is to say, the DS peripheral hardware can decrypt the private key, and the private key in plaintext is never accessed by the software. For more detailed information about eFuse and HMAC peripherals, please refer to Chapter 4
   <i>
    eFuse Controller (EFUSE)
   </i>
   and 19
   <i>
    HMAC Accelerator (HMAC)
   </i>
   peripheral.
  </p>
  <p block-type="Text">
   The input message
   <i>
    X
   </i>
   will be sent directly to the DS peripheral by the software each time a signature is needed. After the RSA signature operation, the signature
   <i>
    Z
   </i>
   is read back by the software.
  </p>
  <p block-type="Text">
   <a href="#page-99-0">
    For better understanding,
   </a>
   we
   <a href="#page-485-0">
    define some symbols and func
   </a>
   tions here, which are only applicable to this chapter:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   1
   <i>
    <sup>
     s
    </sup>
   </i>
   A bit string consist of
   <i>
    s
   </i>
   bits with the value of "1".
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     [
     <i>
      x
     </i>
     ]
     <i>
      <sup>
       s
      </sup>
     </i>
     A bit string of
     <i>
      s
     </i>
     bits, in which
     <i>
      s
     </i>
     should be an integer multiple of 8 bits. If
     <i>
      x
     </i>
     is a number (
     <i>
      x
     </i>
     &lt; 2
     <i>
      <sup>
       s
      </sup>
     </i>
     ), it is represented in little endian byte order in the bit string.
     <i>
      x
     </i>
     may be a variable such as [
     <i>
      Y
     </i>
     ]
     <sup>
      4096
     </sup>
     or as a hexadecimal constant such as [0x0C]8. If necessary, the value [
     <i>
      x
     </i>
     ]
     <i>
      <sup>
       t
      </sup>
     </i>
     can be right-padded with (
     <i>
      s − t
     </i>
     ) number of 0 to reach
     <i>
      s
     </i>
     bits in length, and finally get [
     <i>
      x
     </i>
     ]
     <i>
      s
     </i>
     . For example, [0x05]
     <sup>
      8
     </sup>
     = 00000101, [0x05]
     <sup>
      16
     </sup>
     = 0000010100000000, [0x0005]
     <sup>
      16
     </sup>
     = 0000000000000101, [0x13]
     <sup>
      8
     </sup>
     = 00010011, [0x13]
     <sup>
      16
     </sup>
     = 0001001100000000, [0x0013]
     <sup>
      16
     </sup>
     = 0000000000010011.
    </li>
    <li block-type="ListItem">
     <i>
      • ||
     </i>
     A bit string concatenation operator for joining multiple bit strings into a longer bit string.
    </li>
   </ul>
  </p>
  <h1>
   22.3.2 Private Key Operands
  </h1>
  <p block-type="Text">
   <span id="page-523-0">
   </span>
   Private key operands
   <i>
    Y
   </i>
   (private key exponent) and
   <i>
    M
   </i>
   (key modulus) are generated by you. They have a particular RSA key length (up to 3072 bits). Two additional private key operands are needed:
   <i>
    r
   </i>
   and
   <i>
    M′
   </i>
   . These two operands are derived from
   <i>
    Y
   </i>
   and
   <i>
    M
   </i>
   .
  </p>
  <p block-type="Text">
   Operands
   <i>
    Y
   </i>
   ,
   <i>
    M
   </i>
   ,
   <i>
    r
   </i>
   and
   <i>
    M′
   </i>
   are encrypted by you along with an authentication digest and stored as a single ciphertext
   <i>
    C
   </i>
   .
   <i>
    C
   </i>
   is input to the DS peripheral in this encrypted format, decrypted by the hardware, and then used for RSA signature calculation. Detailed description of how to generate
   <i>
    C
   </i>
   is provided in Section 22.3.3.
  </p>
  <p block-type="Text">
   The DS peripheral supports RSA signature calculation
   <i>
    Z
   </i>
   =
   <i>
    X
    <sup>
     Y
    </sup>
   </i>
   mod
   <i>
    M
   </i>
   , in which the length of operands should be
   <i>
    N
   </i>
   = 32
   <i>
    × x
   </i>
   where
   <i>
    x ∈ {
   </i>
   1
   <i>
    ,
   </i>
   2
   <i>
    ,
   </i>
   3
   <i>
    , . . . ,
   </i>
   96
   <i>
    }
   </i>
   . The bit lengths of arguments
   <i>
    Z
   </i>
   ,
   <i>
    X
   </i>
   ,
   <i>
    Y
   </i>
   ,
   <i>
    M
   </i>
   and
   <i>
    r
   </i>
   should be
   <a href="#page-523-1">
    an arbi
   </a>
   trary value in
   <i>
    N
   </i>
   , and all of them in a calculation must be of the same length, while the bit length of
   <i>
    M′
   </i>
   should always be 32. For more detailed information about RSA calculation, please refer to Section 20.3.1
   <i>
    Large Number Modular Exponentiation
   </i>
   in Chapter 20
   <i>
    RSA Accelerator (RSA)
   </i>
   .
  </p>
  <h1>
   22.3.3 Software Prerequisites
  </h1>
  <p block-type="Text">
   <span id="page-523-1">
   </span>
   <a href="#page-502-0">
    If users want to use the DS modu
   </a>
   le for digit
   <a href="#page-501-0">
    al s
   </a>
   i
   <a href="#page-501-0">
    gnature, the software a
   </a>
   nd hardware must work closely to implement this successfully, and the software needs to do a series of preparations, as shown in Figure 22.3-1. The left side lists preparations required by the software before the hardware starts RSA signature calculation, while the right side lists the hardware workflow during the entire calculation procedure.
  </p>
  <p>
   <span id="page-524-1">
   </span>
   <img src="_page_524_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 22.3-1. Software Preparations and Hardware Working Process
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   1. The software preparation (left side in the Figure 22.3-1) is a one-time operation before any signature is calculated, while the hardware calculation (right side in the Figure 22.3-1) repeats for every signature calculation.
  </p>
  <p block-type="Text">
   You need to follow the steps shown in the left par
   <a href="#page-524-1">
    t of Figure
   </a>
   22.3-1 to calculate
   <i>
    C
   </i>
   . Detailed instructions are as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Step 1: Prepare operands
     <i>
      Y
     </i>
     and
     <i>
      M
     </i>
     whose lengths should meet the requirements in Section 22.3.2. Define [
     <i>
      L
     </i>
     ]
     <sup>
      32
     </sup>
     =
     <i>
      N
     </i>
     <sup>
      32
     </sup>
     <i>
      −
     </i>
     1 (i.e., for RSA 3072, [
     <i>
      L
     </i>
     ]
     <sup>
      32
     </sup>
     == [0x6
     <a href="#page-524-1">
      0-1]
     </a>
     32). Prepare [
     <i>
      HMAC
     </i>
     _
     <i>
      KEY
     </i>
     ]
     <sup>
      256
     </sup>
     and calculate [
     <i>
      DS
     </i>
     _
     <i>
      KEY
     </i>
     ]
     <sup>
      256
     </sup>
     based on
     <i>
      DS
     </i>
     _
     <i>
      KEY
     </i>
     = HMAC-SHA256 ([
     <i>
      HMAC
     </i>
     _
     <i>
      KEY
     </i>
     ]256, 1
     <sup>
      256
     </sup>
     ). Generate a random [
     <i>
      IV
     </i>
     ]
     <sup>
      128
     </sup>
     which should meet the requirements of the AES-CBC block encryption algorithm. Fo
     <a href="#page-523-0">
      r more
     </a>
     information on AES, please refer to Chapter 18
     <i>
      AES Accelerator (AES)
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Step 2: Calculate
     <i>
      r
     </i>
     and
     <i>
      M′
     </i>
     based on
     <i>
      M
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Step 3: Extend
     <i>
      Y
     </i>
     ,
     <i>
      M
     </i>
     and
     <i>
      r
     </i>
     , in order to get [
     <i>
      <a href="#page-472-0">
       Y
      </a>
     </i>
     ]3072, [
     <i>
      M
     </i>
     ]
     <sup>
      3072
     </sup>
     and [
     <i>
      r
     </i>
     ]3072, respectively. This step is only required for
     <i>
      Y
     </i>
     ,
     <i>
      M
     </i>
     and
     <i>
      r
     </i>
     whose length are less
     <a href="#page-472-0">
      than 3072 bits, since
     </a>
     their largest length are 3072 bits.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Step 4: Calculate MD authentication code using the SHA-256: [
     <i>
      MD
     </i>
     ]
     <sup>
      256
     </sup>
     = SHA256 ([
     <i>
      Y
     </i>
     ]3072
     <i>
      ||
     </i>
     [
     <i>
      M
     </i>
     ]3072
     <i>
      ||
     </i>
     [
     <i>
      r
     </i>
     ]3072
     <i>
      ||
     </i>
     [
     <i>
      M′
     </i>
     ]32
     <i>
      ||
     </i>
     [
     <i>
      L
     </i>
     ]32
     <i>
      ||
     </i>
     [
     <i>
      IV
     </i>
     ]128)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Step 5: Build [
     <i>
      P
     </i>
     ]
     <sup>
      9600
     </sup>
     = ( [
     <i>
      Y
     </i>
     ]3072
     <i>
      ||
     </i>
     [
     <i>
      M
     </i>
     ]3072
     <i>
      ||
     </i>
     [
     <i>
      r
     </i>
     ]3072
     <i>
      ||
     </i>
     [
     <i>
      Box
     </i>
     ]384), where [
     <i>
      Box
     </i>
     ]
     <sup>
      384
     </sup>
     = ( [
     <i>
      MD
     </i>
     ]256
     <i>
      ||
     </i>
     [
     <i>
      M′
     </i>
     ]32
     <i>
      ||
     </i>
     [
     <i>
      L
     </i>
     ]32
     <i>
      ||
     </i>
     [
     <i>
      β
     </i>
     ]64) and [
     <i>
      β
     </i>
     ]
     <sup>
      64
     </sup>
     is a PKCS#7 padding value, i.e., a [0x0808080808080808]
     <sup>
      64
     </sup>
     string composed of 8 bytes (0x80). The purpose of [
     <i>
      β
     </i>
     ]
     <sup>
      64
     </sup>
     is to make the bit length of
     <i>
      P
     </i>
     a multiple of 128.
    </li>
    <li block-type="ListItem">
     <span id="page-524-0">
     </span>
     <i>
      •
     </i>
     Step 6: Calculate
     <i>
      C
     </i>
     = [
     <i>
      C
     </i>
     ]
     <sup>
      9600
     </sup>
     = AES-CBC-ENC ([
     <i>
      P
     </i>
     ]9600, [
     <i>
      DS
     </i>
     _
     <i>
      KEY
     </i>
     ]256, [
     <i>
      IV
     </i>
     ]128), where C is the ciphertext with a length of 1200 bytes.
     <i>
      C
     </i>
     can also be calculated as
     <i>
      C
     </i>
     = [
     <i>
      C
     </i>
     ]
     <sup>
      9600
     </sup>
     = ([
     <i>
      Y
     </i>
     b]3072
     <i>
      ||
     </i>
     [
     <i>
      M
     </i>
     c]3072
     <i>
      ||
     </i>
     [b
     <i>
      r
     </i>
     ]3072
     <i>
      ||
     </i>
     [
     <i>
      Box
     </i>
     d]384), where [
     <i>
      Y
     </i>
     b]3072, [
     <i>
      M
     </i>
     c]3072, [b
     <i>
      r
     </i>
     ]3072, [
     <i>
      Box
     </i>
     d]
     <sup>
      384
     </sup>
     are the four sub-parameters of
     <i>
      C
     </i>
     , and correspond to the ciphertext of [
     <i>
      Y
     </i>
     ]3072, [
     <i>
      M
     </i>
     ]3072, [
     <i>
      r
     </i>
     ]3072, [
     <i>
      Box
     </i>
     ]
     <sup>
      384
     </sup>
     respectively.
    </li>
   </ul>
  </p>
  <h1>
   22.3.4 DS Operation at the Hardware Level
  </h1>
  <p block-type="Text">
   The hardware operation is triggered each time a digital signature needs to be calculated. The inputs are the pre-generated private key ciphertext
   <i>
    C
   </i>
   , a unique message
   <i>
    X
   </i>
   , and
   <i>
    IV
   </i>
   .
  </p>
  <p block-type="Text">
   The DS operation at the hardware level can be divided into the following three stages:
  </p>
  <h4>
   1. Decryption: Step 7 and 8 in Figure 22.3-1
  </h4>
  <p block-type="Text">
   The decryption process is the inverse of Step 6 in figure 22.3-1. The DS module will call AES accelerator to decrypt
   <i>
    C
   </i>
   in CBC block mode and get the resulted plaintext. The decryption process can be represented by
   <i>
    P
   </i>
   = AES-CBC-DEC (
   <i>
    C
   </i>
   ,
   <i>
    <a href="#page-524-1">
     DS
    </a>
   </i>
   _
   <i>
    KEY
   </i>
   ,
   <i>
    IV
   </i>
   ), where
   <i>
    IV
   </i>
   (i.e., [
   <i>
    IV
   </i>
   ]128) is defined by you. [
   <i>
    DS
   </i>
   _
   <i>
    KEY
   </i>
   ]
   <sup>
    256
   </sup>
   is provided by HMAC module, derived from
   <i>
    <a href="#page-524-1">
     HM
    </a>
    AC
   </i>
   _
   <i>
    KEY
   </i>
   stored in eFuse. [
   <i>
    DS
   </i>
   _
   <i>
    KEY
   </i>
   ]256, as well as [
   <i>
    HMAC
   </i>
   _
   <i>
    KEY
   </i>
   ]
   <sup>
    256
   </sup>
   are not readable by users. For more information, please refer to Chapter 19
   <i>
    HMAC Accelerator (HMAC)
   </i>
   .
  </p>
  <p block-type="Text">
   With P, the DS module can derive [
   <i>
    Y
   </i>
   ]3072, [
   <i>
    M
   </i>
   ]3072, [
   <i>
    r
   </i>
   ]3072, [
   <i>
    M′
   </i>
   ]32, [
   <i>
    L
   </i>
   ]32, MD authentication code, and the padding value [
   <i>
    β
   </i>
   ]64. This process is the inverse of Step 5.
  </p>
  <h4>
   2. Check: Step 9
   <a href="#page-485-0">
    and 10 in Figure
   </a>
   22.3-1
  </h4>
  <p block-type="Text">
   The DS module will perform two checks: MD check and padding check. Padding check is not shown in Figure 22.3-1, as it happens at the same time with MD check.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     MD check: The DS modul
     <a href="#page-524-1">
      e calls S
     </a>
     HA-256 to calculate the hash value [
     <i>
      CALC
     </i>
     _
     <i>
      MD
     </i>
     ]
     <sup>
      256
     </sup>
     (i.e., step 4). Then, [
     <i>
      CALC
     </i>
     _
     <i>
      MD
     </i>
     ]
     <sup>
      256
     </sup>
     is compared against the MD authentication code [
     <i>
      MD
     </i>
     ]
     <sup>
      256
     </sup>
     from step 4. O
     <a href="#page-524-1">
      nly wh
     </a>
     en the two match does the MD check pass.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Padding check: The DS module checks if [
     <i>
      β
     </i>
     ]
     <sup>
      64
     </sup>
     complies with the aforementioned PKCS#7 format. Only when [
     <i>
      β
     </i>
     ]
     <sup>
      64
     </sup>
     complies with the format does the padding check pass.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The DS module will only perform subsequent operations if MD check passes. If padding check fails, a warning message is generated, but it does not affect the subsequent operations.
  </p>
  <h4>
   3. Calculation: Step 11 and 12 in Figure 22.3-1
  </h4>
  <p block-type="Text">
   The DS module treats
   <i>
    X
   </i>
   (input by you) and
   <i>
    Y
   </i>
   ,
   <i>
    M
   </i>
   ,
   <i>
    r
   </i>
   (compiled) as big numbers. With
   <i>
    M′
   </i>
   , all operands to perform
   <i>
    X
    <sup>
     Y
    </sup>
   </i>
   mod
   <i>
    M
   </i>
   are in place. The operand length is defined by
   <i>
    L
   </i>
   only. The DS module will get the signed result
   <i>
    Z
   </i>
   by calling RSA to per
   <a href="#page-524-1">
    form
   </a>
   <i>
    Z
   </i>
   =
   <i>
    X
    <sup>
     Y
    </sup>
   </i>
   mod
   <i>
    M
   </i>
   .
  </p>
  <h1>
   22.3.5 DS Operation at the Software Level
  </h1>
  <p block-type="Text">
   <span id="page-525-0">
   </span>
   The software steps below should be followed each time a digital signature needs to be calculated. The inputs are the pre-generated private key ciphertext
   <i>
    C
   </i>
   , a unique message
   <i>
    X
   </i>
   , and
   <i>
    IV
   </i>
   . These software steps trigger the hardware steps described in Section 22.3.4.
  </p>
  <p block-type="Text">
   We assume that the software has called the HMAC peripheral and HMAC on the hardware has calculated
   <i>
    DS
   </i>
   _
   <i>
    KEY
   </i>
   based on
   <i>
    HMAC
   </i>
   _
   <i>
    KEY
   </i>
   .
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Prerequisites: Prepare operands
     <i>
      C
     </i>
     ,
     <i>
      X
     </i>
     ,
     <i>
      <a href="#page-524-0">
       IV
      </a>
     </i>
     according to Section 22.3.3.
    </li>
    <li block-type="ListItem">
     2. Activate the DS peripheral: Write 1 to DS_SET_START_REG.
    </li>
    <li block-type="ListItem">
     3. Check if
     <i>
      DS
     </i>
     _
     <i>
      KEY
     </i>
     is ready: Poll DS_QUERY_BUSY_REG until th
     <a href="#page-523-1">
      e softwa
     </a>
     re reads 0.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If the software does not read 0 in DS_QUERY_BUSY_REG after approximately 1 ms, it indicates a problem with HMAC initialization. In such a case, the software can read register DS_QUERY_KEY_WRONG_REG to get more information:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the software reads 0 in DS
     <a href="#page-531-0">
      _QUERY_KEY_WRONG_R
     </a>
     EG, it indicates that the HMAC peripheral has not been called.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the software reads any value from 1 to 15 in DS_QUERY_KEY_WRONG_REG, it indicates that HMAC was called, but the DS m
     <a href="#page-531-1">
      odule did not successfully get
     </a>
     the
     <i>
      DS
     </i>
     _
     <i>
      KEY
     </i>
     value from the HMAC peripheral. This may indicate that the HMAC operation has been interrupted due to a software concurrency problem.
    </li>
    <li block-type="ListItem">
     4. Configure register: Write
     <i>
      IV
     </i>
     block to register DS_IV_
     <i>
      m
     </i>
     _REG (
     <i>
      m
     </i>
     : 0 ~ 3). For more information on the
     <i>
      IV
     </i>
     block, please refer to Chapter 18
     <i>
      AES Accelerator (AES)
     </i>
     .
    </li>
    <li block-type="ListItem">
     5. Write
     <i>
      X
     </i>
     to memory block DS_X_MEM: Write
     <i>
      X
      <sup>
       i
      </sup>
     </i>
     (
     <i>
      i ∈ {
     </i>
     0
     <i>
      ,
     </i>
     1
     <i>
      , . . . , n −
     </i>
     1
     <i>
      }
     </i>
     ), where
     <i>
      n
     </i>
     =
     <i>
      N
     </i>
     <sup>
      32
     </sup>
     , to memory block DS_X_MEM whose capacity is 96 words. Each word can store one base-
     <i>
      b
     </i>
     digit. The memory block uses the little endian format for stor
     <a href="#page-472-0">
      age, i.e., the least signific
     </a>
     ant digit of the operand is in the lowest address. Words in DS_X_MEM bloc
     <a href="#page-528-1">
      k after the co
     </a>
     nfigured length of
     <i>
      X
     </i>
     (
     <i>
      N
     </i>
     bits, as described in Section 22.3.2), are
     <a href="#page-528-1">
      ignored.
     </a>
    </li>
    <li block-type="ListItem">
     6. Write
     <i>
      C
     </i>
     to corresponding memory blocks: Write the four sub-parameters of
     <i>
      C
     </i>
     to corresponding memory
     <a href="#page-528-1">
      blocks:
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write
       <i>
        Y
       </i>
       b
       <i>
        <sup>
         i
        </sup>
       </i>
       (
       <i>
        i ∈ {
       </i>
       0
       <i>
        ,
       </i>
       1
       <i>
        , . . . ,
       </i>
       95
       <i>
        }
       </i>
       ) to DS_Y_MEM.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write
       <i>
        M
       </i>
       c
       <i>
        <sup>
         i
        </sup>
       </i>
       (
       <i>
        i ∈ {
       </i>
       0
       <i>
        ,
       </i>
       1
       <i>
        , . . . ,
       </i>
       95
       <i>
        }
       </i>
       ) to DS_M_MEM.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Write b
       <i>
        r
        <sup>
         i
        </sup>
       </i>
       (
       <i>
        i ∈ {
       </i>
       0
       <i>
        ,
       </i>
       1
       <i>
        , . . . ,
       </i>
       95
       <i>
        }
       </i>
       ) to
       <a href="#page-528-1">
        DS_RB_ME
       </a>
       M.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       write
       <i>
        Box
       </i>
       d
       <i>
        <sup>
         i
        </sup>
       </i>
       (
       <i>
        i ∈ {
       </i>
       0
       <i>
        ,
       </i>
       1
       <i>
        , . . . ,
       </i>
       11
       <i>
        }
       </i>
       ) to
       <a href="#page-528-1">
        DS_BOX_M
       </a>
       EM.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The capacity of DS_Y_MEM,
   <a href="#page-528-1">
    DS_M_MEM, a
   </a>
   nd DS_RB_MEM is 96 words, whereas the capacity of DS_BOX_MEM is only 12 words. Each word can store one base-
   <i>
    b
   </i>
   digit. The memory blocks use the little endian format for storage,
   <a href="#page-528-1">
   </a>
   i.
   <a href="#page-528-1">
    e., the least sig
   </a>
   nificant digit of the operand is in the lowest address.
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     7. Start DS operation:
     <a href="#page-528-1">
      Write 1 to reg
     </a>
     ister
     <a href="#page-528-1">
      DS_SET_
     </a>
     ME_
     <a href="#page-528-1">
      REG.
     </a>
    </li>
    <li block-type="ListItem">
     8. Wait
     <a href="#page-528-1">
      for the operatio
     </a>
     n to be completed: Poll register DS_QUERY_BUSY_REG until the software reads 0.
    </li>
    <li block-type="ListItem">
     9. Query check result: Read register DS
     <a href="#page-530-1">
      _QUERY_CHECK_R
     </a>
     EG and conduct subsequent operations as illustrated below based on the return value:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the value is 0, it indicates that both padding c
       <a href="#page-531-0">
        heck and MD check pas
       </a>
       s. You can continue to get the signed result
       <i>
        Z
       </i>
       .
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the value is 1, it indicates that the padding check passes but MD check fails. The signed result
       <i>
        Z
       </i>
       is invalid. The operation will resume directly from Step 11.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the value is 2, it indicates that the padding check fails but MD check passes. You can continue to get the signed result
       <i>
        Z
       </i>
       . But please note that the data does not comply with the aforementioned PKCS#7 padding format, which may not be what you
       <a href="#page-527-0">
        wa
       </a>
       nt.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the value is 3, it indicates that both padding check and MD check fail. In this case, some fatal errors have occurred and the signed result
       <i>
        Z
       </i>
       is invalid. The operation will resume directly from Step 11.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     10. Read the signed result: Read the signed result
     <i>
      Z
      <sup>
       i
      </sup>
     </i>
     (
     <i>
      i ∈ {
     </i>
     0
     <i>
      ,
     </i>
     1
     <i>
      , . . . , n −
     </i>
     1
     <i>
      }
     </i>
     ), where
     <i>
      n
     </i>
     =
     <i>
      N
     </i>
     <sup>
      32
     </sup>
     , from memory block DS_Z_MEM. The memory block stores
     <i>
      Z
     </i>
     in little-endian byte order.
    </li>
    <li block-type="ListItem">
     11. Exit the operation: Write 1 to DS_SET_FINISH_REG, and then poll DS_QUERY_BUSY_REG until the software reads 0.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-527-0">
   </span>
   After the o
   <a href="#page-528-1">
    peration, all th
   </a>
   e input/output registers and memory blocks are cleared.
  </p>
  <h1>
   22.4 Memory Summary
  </h1>
  <p block-type="Text">
   <span id="page-528-0">
   </span>
   The addresses in this section are relative to the Digital Signature base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <span id="page-528-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      The addresses in this section are relative to the Digital Signature base address provided in Table 3.3-3 in
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 3 System and Memory.
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Size (byte)
     </td>
     <td>
      Starting Address
     </td>
     <td>
      Ending Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      DS_Y_MEM
     </td>
     <td>
      Memory block Y
     </td>
     <td>
      384
     </td>
     <td>
      0x0000
     </td>
     <td>
      0x017F
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      DS_M_MEM
      <br/>
      DS_RB_MEM
     </td>
     <td>
      Memory block M
      <br/>
      Memory block r
     </td>
     <td>
      384
      <br/>
      384
     </td>
     <td>
      0x0200
      <br/>
      0x0400
     </td>
     <td>
      0x037F
      <br/>
      0x057F
     </td>
     <td>
      WO
      <br/>
      WO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   22.5 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-529-0">
   </span>
   The addresses in this section are relative to Digital Signature base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
      <br/>
      DS_IV_0_REG
     </td>
     <td>
      IV block data
     </td>
     <td>
      0x0630
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      DS_IV_1_REG
     </td>
     <td>
      IV block data
     </td>
     <td>
      0x0634
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      DS_IV_2_REG
     </td>
     <td>
      IV block data
     </td>
     <td>
      0x0638
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      DS_IV_3_REG
     </td>
     <td>
      IV block data
     </td>
     <td>
      0x063C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      Status/Control Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      DS_SET_START_REG
     </td>
     <td>
      Activates the DS module
     </td>
     <td>
      0x0E00
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      DS_SET_ME_REG
     </td>
     <td>
      Starts DS operation
     </td>
     <td>
      0x0E04
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      DS_SET_FINISH_REG
     </td>
     <td>
      Ends DS operation
     </td>
     <td>
      0x0E08
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      DS_QUERY_BUSY_REG
     </td>
     <td>
      Status of the DS module
     </td>
     <td>
      0x0E0C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      DS_QUERY_KEY_WRONG_REG
     </td>
     <td>
      Checks the reason why DS_KEY
      <br/>
      is not
     </td>
     <td>
      0x0E10
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="4">
      ready
     </td>
    </tr>
    <tr>
     <td>
      DS_QUERY_CHECK_REG
     </td>
     <td colspan="3">
      Queries DS check result
      <br/>
      0x0814
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   22.6 Registers
  </h1>
  <p block-type="Text">
   <span id="page-530-0">
   </span>
   The addresses in this section are relative to Digital Signature base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-530-2">
   </span>
   <img src="_page_530_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   DS_IV_
   <i>
    m
   </i>
   _REG (
   <i>
    m
   </i>
   : 0-3)
   <i>
    IV
   </i>
   block data. (WO)
  </p>
  <p block-type="Text">
   Register 22.2. DS_SET_START_REG (0x0E00)
  </p>
  <p>
   <span id="page-530-3">
   </span>
   <img src="_page_530_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   DS_SET_START Write 1 to this register to activate the DS peripheral. (WO)
  </p>
  <p block-type="Text">
   Register 22.3. DS_SET_ME_REG (0x0E04)
  </p>
  <p>
   <span id="page-530-1">
   </span>
   <img src="_page_530_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   DS_SET_ME Write 1 to this register to start DS operation. (WO)
  </p>
  <p>
   <img src="_page_531_Figure_1.jpeg"/>
  </p>
  <p>
   DS_SET_FINISH Write 1 to this register to end DS operation. (WO)
  </p>
  <p>
   <img src="_page_531_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-531-0">
   </span>
   <img src="_page_531_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   DS_QUERY_BUSY 1: The DS module is busy; 0: The DS module is idle. (RO)
  </p>
  <p block-type="Text">
   Register 22.6. DS_QUERY_KEY_WRONG_REG (0x0E10)
  </p>
  <p>
   <span id="page-531-1">
   </span>
   <img src="_page_531_Figure_7.jpeg"/>
  </p>
  <p>
   DS_QUERY_KEY_WRONG 1-15: HMAC was activated, but the DS peripheral did not successfully receive the
   <i>
    DS
   </i>
   _
   <i>
    KEY
   </i>
   from the HMAC peripheral. (The biggest value is 15); 0: HMAC is not called. (RO)
  </p>
  <h4>
   Register 22.7. DS_QUERY_CHECK_REG (0x0E14)
  </h4>
  <p>
   <img src="_page_532_Figure_1.jpeg"/>
  </p>
  <p block-type="TextInlineMath">
   DS_MD_ERROR 1: The MD check fails; 0: The MD check passes. (RO)
  </p>
  <h4>
   Register 22.8. DS_DATE_REG (0x0E20)
  </h4>
  <p>
   <img src="_page_532_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   DS_DATE Version control register. (R/W)
  </p>
  <h1>
   <span id="page-533-0">
   </span>
   External Memory Encryption and Decryption (XTS_AES)
  </h1>
  <h1>
   23.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-533-1">
   </span>
   The ESP32-C3 integrates an External Memory Encryption and Decryption module that complies with the XTS_AES standard algorithm specified in IEEE Std 1619-2007, providing security for users' application code and data stored in the external memory (flash). Users can store proprietary firmware and sensitive data (e.g., credentials for gaining access to a private network) to the external flash.
  </p>
  <h1>
   23.2 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-533-2">
     </span>
     <i>
      •
     </i>
     General XTS_AES algorithm, compliant with IEEE Std 1619-2007
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Software-based manual encryption
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     High-speed auto decryption, without software's participation
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Encryption and decryption functions jointly determined by registers configuration, eFuse parameters, and boot mode
    </li>
   </ul>
  </p>
  <h1>
   23.3 Module Structure
  </h1>
  <p block-type="Text">
   <span id="page-533-3">
   </span>
   The External Memory Encryption and Decryption module consists of two blocks, namely the Manual Encryption block and Auto Decryption block. The module architecture is shown in Figure 23.3-1.
  </p>
  <p>
   <span id="page-534-3">
   </span>
   <img src="_page_534_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 23.3-1. Architecture of the External Memory Encryption and Decryption
  </p>
  <p block-type="Text">
   The Manual Encryption block can encrypt instructions/data which will then be written to the external flash as ciphertext via SPI1.
  </p>
  <p block-type="Text">
   In the System Registers (SYSREG) peripheral (see 16
   <i>
    System Registers (SYSREG)
   </i>
   ), the following four bits in register SYSTEM_EXTERNAL_DEVICE_ENCRYPT_DECRYPT_CONTROL_REG are relevant to the external memory encryption and decryption:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SYSTEM_ENABLE_DOWNLOAD_MANUAL_E
     <a href="#page-426-0">
      NCRYPT
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     S
     <a href="#page-442-1">
      YSTEM_ENABLE_DOWNLOAD_G0CB_DECRYPT
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-442-1">
      SYSTEM_ENABLE_DOWNLOAD_DB_ENCRYPT
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-442-1">
      SYSTEM_ENABLE_SPI_MANUAL_ENCRYPT
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The
   <a href="#page-442-1">
   </a>
   X
   <a href="#page-442-1">
    TS_AES module also fetches two parameters f
   </a>
   rom the peripheral eFuse Controller, which are: EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT and EFUSE_SPI_BOOT_CRYPT_CNT. For detailed information, please see 4
   <i>
    <a href="#page-442-1">
     eFuse Controller (EFUSE)
    </a>
   </i>
   .
  </p>
  <h1>
   23.4
   <a href="#page-119-1">
    F
   </a>
   <a href="#page-99-0">
    unctional Des
   </a>
   <a href="#page-119-1">
    cript
   </a>
   io
   <a href="#page-121-1">
    n
   </a>
  </h1>
  <h1>
   <span id="page-534-0">
   </span>
   23.4.1 XTS Algorithm
  </h1>
  <p block-type="Text">
   <span id="page-534-2">
   </span>
   <span id="page-534-1">
   </span>
   The manual encryption and auto decryption use the XTS algorithm. During implementation, the XTS algorithm is characterized by a "data unit" of 1024 bits, defined in the Section
   <i>
    XTS-AES encryption procedure
   </i>
   of
   <i>
    XTS-AES Tweakable Block Cipher
   </i>
   Standard. For more information about XTS-AES algorithm, please refer to IEEE Std 1619-2007.
  </p>
  <h1>
   23.4.2 Key
  </h1>
  <p block-type="Text">
   The Manual Encryption block and Auto Decryption block share the same
   <i>
    Key
   </i>
   when implementing XTS algorithm. The
   <i>
    Key
   </i>
   is provided by the eFuse hardware and cannot be accessed by users.
  </p>
  <p block-type="Text">
   The
   <i>
    Key
   </i>
   is 256-bit long. The value of the
   <i>
    Key
   </i>
   is determined by the content in one eFuse block from BLOCK4 ~ BLOCK9. For easier description, we define:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Block
   <i>
    A
   </i>
   : the block whose key purpose is EFUSE_KEY_PURPOSE_XTS_AES_128_KEY (please refer to Table 4.3-2
   <i>
    Secure Key Purpose Values
   </i>
   ). The 256-bit
   <i>
    Key
    <sup>
     A
    </sup>
   </i>
   is stored in it.
  </p>
  <p block-type="Text">
   There are two possibilities of how the
   <i>
    Key
   </i>
   is generated depending on whether Block
   <i>
    <sup>
     A
    </sup>
   </i>
   exists or not, as shown in Table 23.4-1. In each case, the
   <i>
    Key
   </i>
   can be uniquely determined by Block
   <i>
    A
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Table 23.4-1.
     </td>
     <td>
     </td>
     <td>
      Key generated based on KeyA
     </td>
    </tr>
    <tr>
     <td>
      BlockA
     </td>
     <td>
      Key
     </td>
     <td>
      Key Length (bit)
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 23.4-1.
   <i>
    Key
   </i>
   generated based on
   <i>
    Key
    <sup>
     A
    </sup>
   </i>
  </p>
  <h4>
   <span id="page-535-0">
   </span>
   Notes:
  </h4>
  <p block-type="Text">
   "YES" indicates that the block exists; "NO" indicates that the block does not exist; "0
   <sup>
    256
   </sup>
   " indicates a bit string that consists of 256-bit zeros. Note that using 0
   <sup>
    256
   </sup>
   as Key is not secure. We strongly recommend to configure a valid key.
  </p>
  <p block-type="Text">
   For more information of key purposes, please refer to Table 4.3-2
   <i>
    Secure Key Purpose Values
   </i>
   in Chapter 4
   <i>
    eFuse Controller (EFUSE)
   </i>
   .
  </p>
  <h1>
   23.4.3 Target Memory Space
  </h1>
  <p block-type="Text">
   <a href="#page-99-0">
    The target memory space
   </a>
   refers to a continuous address space in the external memory (flash) where the ciphertext is stored. The target memory space can be uniquely determined by two relevant parameters: size and base address, whose definitions are listed below.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Size: the
     <i>
      size
     </i>
     of the target memory space, indicating the number of bytes encrypted in one encryption operation, which supports 16 or 32 bytes.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Base address: the
     <i>
      base
     </i>
     _
     <i>
      addr
     </i>
     of the target memory space. It is a 24-bit physical address, with range of 0x0000_0000 ~ 0x00FF_FFFF. It should be aligned to
     <i>
      size
     </i>
     , i.e.,
     <i>
      base
     </i>
     _
     <i>
      addr
     </i>
     %
     <i>
      size
     </i>
     == 0.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For example, if there are 16 bytes of instruction data need to be encrypted and written to address 0x130 ~ 0x13F in the external flash, then the target space is 0x130 ~ 0x13F, size is 16 (bytes), and base address is 0x130.
  </p>
  <p block-type="Text">
   The encryption of any length (must be multiples of 16 bytes) of plaintext instruction/data can be completed separately in multiple operations, and each operation has its individual target memory space and the relevant parameters.
  </p>
  <p block-type="Text">
   For Auto Decryption blocks, these parameters are automatically determined by hardware. For Manual Encryption blocks, these parameters should be configured by users.
  </p>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="Text">
   The "tweak" defined in Section
   <i>
    Data units and tweaks
   </i>
   of IEEE Std 1619-2007 is a 128-bit non-negative integer
  </p>
  <h1>
   23.4.4 Data Writing
  </h1>
  <p block-type="Text">
   <span id="page-536-0">
   </span>
   For Auto Decryption blocks, data writing is automatically applied in hardware. For Manual Encryption blocks, data writing should be applied by users. The Manual Encryption block has a register block which consists of 8 registers, i.e., XTS_AES_PLAIN_
   <i>
    n
   </i>
   _REG (
   <i>
    n
   </i>
   : 0 ~ 7), that are dedicated to data writing and can store up to 256 bits of plaintext at a time.
  </p>
  <p block-type="Text">
   Actually, the Manual Encryption block does not care where the plaintext comes from, but only where the ciphertext will be stored. Because of the strict correspondence between plaintext and ciphertext, in order to better describe how the plaintext is stored in the register block, we assume that the plaintext is stored in the target memory space in the first place and replaced by ciphertext after encryption. Therefore, the following description no longer has the concept of "plaintext", but uses "target memory space" instead. Please note that the plaintext can come from everywhere in actual use, but users should understand how the plaintext is stored in the register block.
  </p>
  <h4>
   How mapping between target memory space and registers works:
  </h4>
  <p block-type="TextInlineMath">
   Assume a word in the target memory space is stored in
   <i>
    address
   </i>
   , define
   <i>
    offset
   </i>
   =
   <i>
    address
   </i>
   %32,
   <i>
    n
   </i>
   =
   <i>
    of f set
   </i>
   4 , then the word will be stored in register XTS_AES_PLAIN_
   <i>
    n
   </i>
   _REG.
  </p>
  <p block-type="Text">
   The mapping between
   <i>
    offset
   </i>
   and registers is shown in Table 23.4-2.
  </p>
  <span id="page-536-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 23.4-2. Mapping Between Offsets and Registers
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      offset
      <br/>
      0x00
     </td>
     <td>
      Register
      <br/>
      XTS_AES_PLAIN_0_REG
     </td>
     <td>
      offset
      <br/>
      0x10
     </td>
     <td>
      Register
      <br/>
      XTS_AES_PLAIN_4_REG
     </td>
    </tr>
    <tr>
     <td>
      0x04
     </td>
     <td>
      XTS_AES_PLAIN_1_REG
     </td>
     <td>
      0x14
     </td>
     <td>
      XTS_AES_PLAIN_5_REG
     </td>
    </tr>
    <tr>
     <td>
      0x08
     </td>
     <td>
      XTS_AES_PLAIN_2_REG
     </td>
     <td>
      0x18
     </td>
     <td>
      XTS_AES_PLAIN_6_REG
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 23.4-2. Mapping Between Offsets and Registers
  </p>
  <h1>
   23.4.5 Manual
   <a href="#page-540-1">
    Encryption Block
   </a>
  </h1>
  <p block-type="Text">
   The Manual Encryption block is a peripheral module. It is equipped with registers and can be accessed by the CPU directly. Registers embedded in this block, the System Registers (SYSREG) peripheral, eFuse parameters, and boot mode jointly configure and use this module. Please note that the Manual Encryption block can only encrypt for storage in external flash.
  </p>
  <p block-type="Text">
   The Manual Encryption block is operational only under certain conditions. The operating conditions are:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   In SPI Boot mode
  </p>
  <p block-type="Text">
   If bit SYSTEM_ENABLE_SPI_MANUAL_ENCRYPT in register SYSTEM_EXTERNAL_DEVICE_ENCRYPT_DECRYPT_CONTROL_REG is 1, the Manual Encryption block can be enabled. Otherwise, it is not operational.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   In D
   <a href="#page-442-1">
    ownload Boot mode
   </a>
  </p>
  <p block-type="Text">
   If bit SYSTEM_ENABLE_DOWNLOAD_MANUAL_ENCRYPT in register SYSTEM_EXTERNAL_DEVICE_ENCRYPT_DECRYPT_CONTROL_REG is 1 and the eFuse parameter EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT is 0, the Manual Encryption block can be enabled. Othe
   <a href="#page-442-1">
    rwise, it is not operational.
   </a>
  </p>
  <h4>
   Not
   <a href="#page-119-1">
    e:
   </a>
  </h4>
  <p block-type="Text">
   <i>
    •
   </i>
   Even though the CPU can skip cache and get the encrypted instruction/data directly by reading the external memory, users can by no means access
   <i>
    Key
   </i>
   .
  </p>
  <h1>
   23.4.6 Auto Decryption Block
  </h1>
  <p block-type="Text">
   <span id="page-537-0">
   </span>
   The Auto Decryption block is not a conventional peripheral, so it does not have any registers and cannot be accessed by the CPU directly. The System Registers (SYSREG) peripheral, eFuse parameters, and boot mode jointly configure and use this block.
  </p>
  <p block-type="Text">
   The Auto Decryption block is operational only under certain conditions. The operating conditions are:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   In SPI Boot mode
  </p>
  <p block-type="Text">
   If the first bit or the third bit in parameter SPI_BOOT_CRYPT_CNT (3 bits) is set to 1, then the Auto Decryption block can be enabled. Otherwise, it is not operational.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   In Download Boot mode
  </p>
  <p block-type="Text">
   If bit SYSTEM_ENABLE_DOWNLOAD_G0CB_DECRYPT in register SYSTEM_EXTERNAL_DEVICE_ENCRYPT_DECRYPT_CONTROL_REG is 1, the Auto Decryption block can be enabled. Otherwise, it is not operational.
  </p>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the Auto Decryption block is enabled, it will automatically decrypt the ciphertext if the CPU reads instructions/data from the external memory via cache to retrieve the instructions/data. The entire decryption process does not need software participation and is transparent to the cache. Users can by no means obtain the decryption
     <i>
      Key
     </i>
     during the process.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the Auto Decryption block is disabled, it does not have any effect on the contents stored in the external memory, no matter if they are encrypted or not. Therefore, what the CPU reads via cache is the original information stored in the external memory.
    </li>
   </ul>
  </p>
  <h1>
   23.5 Software Process
  </h1>
  <p block-type="Text">
   <span id="page-537-1">
   </span>
   When the Manual Encryption block operates, software needs to be involved in the process. The steps are as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure XTS_AES:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set register XTS_AES_PHYSICAL_ADDRESS_REG to
       <i>
        base
       </i>
       _
       <i>
        addr
       </i>
       .
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set register XTS_AES_LINESIZE_REG to
       <i>
        size
       </i>
       <sup>
        32
       </sup>
       .
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   For definitions of
   <i>
    base
   </i>
   _
   <i>
    addr
   </i>
   and
   <i>
    size
   </i>
   , please refer to Section 23.4.3.
  </p>
  <p block-type="Text">
   Espressif Systems 538
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     2. Write plaintext data to the registers block XTS_AES_PLAIN_
     <i>
      n
     </i>
     _REG (
     <i>
      n
     </i>
     : 0-7). For detailed information, please refer to Section 23.4.4. Please write data to registers according to your actual needs, and the unused ones could be set to arbitrary values.
    </li>
    <li block-type="ListItem">
     3. Wait for Manual Encryp
     <a href="#page-536-0">
      tion blo
     </a>
     ck to be idle. Poll register XTS_AES_STATE_REG until it reads 0 that indicates the Manual Encryption block is idle.
    </li>
    <li block-type="ListItem">
     4. Trigger manual encryption by writing 1 to register XTS_AES_TRIGGER_REG.
    </li>
    <li block-type="ListItem">
     5. Wait for the encryption process completion. Poll register XTS_AES_STATE_REG until it reads 2.
     <i>
      Step 1 to 5 are the steps of encrypting plaintext instructions with the Manual Encryption block using the Key.
     </i>
    </li>
    <li block-type="ListItem">
     6. Write 1 to register XTS_AES_RELEASE_REG to grant SPI1 the access to the encrypted ciphertext. After this, the value of register XTS_AES_STATE_REG will become 3.
    </li>
    <li block-type="ListItem">
     7. Call SPI1 to write the ciphertext in the external flash (see Chapter 27
     <i>
      SPI Controller (SPI)
     </i>
     ).
    </li>
    <li block-type="ListItem">
     8. Write 1 to register
    </li>
   </ul>
  </p>
  <p block-type="Text">
   XTS_AES_DESTROY_REG to destroy the ciphertext. After this, the value of register XTS_AES_STATE_REG will become 0.
  </p>
  <p block-type="Text">
   Repeat above steps according to the amount of plaintext instructions/data that need to be encrypted.
  </p>
  <h1>
   23.6 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-539-0">
   </span>
   The addresses in this section are relative to External Memory Encryption and Decryption base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      provided in Table 3.3-3 in Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="5">
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Plaintext Register Heap
      <br/>
      XTS_AES_PLAIN_0_REG
     </td>
     <td>
      Plaintext register 0
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_PLAIN_1_REG
     </td>
     <td>
      Plaintext register 1
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_PLAIN_2_REG
     </td>
     <td>
      Plaintext register 2
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_PLAIN_3_REG
     </td>
     <td>
      Plaintext register 3
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_PLAIN_4_REG
     </td>
     <td>
      Plaintext register 4
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_PLAIN_5_REG
     </td>
     <td>
      Plaintext register 5
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_PLAIN_6_REG
     </td>
     <td>
      Plaintext register 6
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_PLAIN_7_REG
     </td>
     <td>
      Plaintext register 7
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_LINESIZE_REG
     </td>
     <td>
      Configures the size of target memory space
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="4">
      XTS_AES_DESTINATION_REG
      <br/>
      Configures the type of the external memory
      <br/>
      0x0044
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_PHYSICAL_ADDRESS_REG
     </td>
     <td>
      Physical address
     </td>
     <td>
      0x0048
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Control/Status Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_TRIGGER_REG
     </td>
     <td>
      Activates AES algorithm
     </td>
     <td>
      0x004C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_RELEASE_REG
     </td>
     <td>
      Release control
     </td>
     <td>
      0x0050
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td colspan="4">
      XTS_AES_DESTROY_REG
      <br/>
      Destroys control
      <br/>
      0x0054
      <br/>
      WO
     </td>
    </tr>
    <tr>
     <td>
      XTS_AES_STATE_REG
     </td>
     <td>
      Status register
     </td>
     <td>
      0x0058
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   23.7 Registers
  </h1>
  <p block-type="Text">
   <span id="page-540-0">
   </span>
   The addresses in this section are relative to External Memory Encryption and Decryption base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-540-1">
   </span>
   <img src="_page_540_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_540_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-540-3">
   </span>
   <span id="page-540-2">
   </span>
   <img src="_page_540_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   XTS_AES_DESTINATION Configures the type of the external memory. Currently, it must be set to 0, as the Manual Encryption block only supports flash encryption. Errors may occur if users write 1.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: flash;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: external RAM. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-541-0">
   </span>
   <img src="_page_541_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   XTS_AES_PHYSICAL_ADDRESS Physical address. (Note that its value should be within the range between 0x0000_0000 and 0x00FF_FFFF). (R/W)
  </p>
  <h4>
   Register 23.5. XTS_AES_TRIGGER_REG (0x004C)
  </h4>
  <p>
   <span id="page-541-1">
   </span>
   <img src="_page_541_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   XTS_AES_TRIGGER Write 1 to enable manual encryption. (WO)
  </p>
  <h4>
   Register 23.6. XTS_AES_RELEASE_REG (0x0050)
  </h4>
  <p>
   <span id="page-541-2">
   </span>
   <img src="_page_541_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   XTS_AES_RELEASE Write 1 to grant SPI1 access to the encrypted result. (WO)
  </p>
  <h4>
   Register 23.7. XTS_AES_DESTROY_REG (0x0054)
  </h4>
  <p>
   <span id="page-542-0">
   </span>
   <img src="_page_542_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x0 (XTS_AES_IDLE): idle;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x1 (XTS_AES_BUSY): busy with encryption;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x2 (XTS_AES_DONE): encryption is completed, but the encrypted result is not accessible to SPI;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0x3 (XTS_AES_RELEASE): encrypted result is accessible to SPI. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 23.9. XTS_AES_DATE_REG (0x005C)
  </h4>
  <p>
   <img src="_page_542_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   XTS_AES_DATE Version control register. (R/W)
  </p>
  <h1>
   <span id="page-543-0">
   </span>
   Random Number Generator (RNG)
  </h1>
  <h1>
   24.1 Introduction
  </h1>
  <p block-type="Text">
   <span id="page-543-1">
   </span>
   The ESP32-C3 contains a true random number generator, which generates 32-bit random numbers that can be used for cryptographical operations, among other things.
  </p>
  <h1>
   24.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-543-2">
   </span>
   The random number generator in ESP32-C3 generates true random numbers, which means random number generated from a physical process, rather than by means of an algorithm. No number generated within the specified range is more or less likely to appear than any other number.
  </p>
  <h1>
   24.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-543-3">
   </span>
   Every 32-bit value that the system reads from the RNG_DATA_REG register of the random number generator is a true random number. These true random numbers are generated based on the thermal noise in the system and the asynchronous clock mismatch.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Thermal noise comes from the high-speed
     <a href="#page-545-0">
      ADC or SAR ADC
     </a>
     or both. Whenever the high-speed ADC or SAR ADC is enabled, bit streams will be generated and fed into the random number generator through an XOR logic gate as random seeds.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RC_FAST_CLK is an asynchronous clock source and it increases the RNG entropy by introducing circuit metastability.
    </li>
   </ul>
  </p>
  <p>
   <span id="page-543-4">
   </span>
   <img src="_page_543_Figure_10.jpeg"/>
  </p>
  <h4>
   Figure 24.3-1. Noise Source
  </h4>
  <p block-type="Text" class="has-continuation">
   When there is noise coming from the SAR ADC, the random number generator is fed with a 2-bit entropy in one clock cycle of RC_FAST_CLK (20 MHz), which is generated from an internal RC oscillator (see Chapter 6
  </p>
  <p block-type="Text">
   <i>
    Reset and Clock
   </i>
   for details). Thus, it is advisable to read the RNG_DATA_REG register at a maximum rate of 1 MHz to obtain the maximum entropy.
  </p>
  <p block-type="Text">
   When there is noise coming from the high-speed ADC, the random number generator is fed with a 2-bit
   <a href="#page-190-0">
    entropy in one AP
   </a>
   B clock cycle, which is normally 80 MHz. T
   <a href="#page-545-0">
    hus, it is advisab
   </a>
   le to read the RNG_DATA_REG register at a maximum rate of 5 MHz to obtain the maximum entropy.
  </p>
  <p block-type="Text">
   A data sample of 2 GB, which is read from the random number generator at a rate of 5 MHz with only the high-speed ADC being enabled, has been tested using the Dieharder Random Number Test
   <a href="#page-545-0">
    suite (version
   </a>
   3.31.1). The sample passed all tests.
  </p>
  <h1>
   24.4 Programming Procedure
  </h1>
  <p block-type="Text">
   <span id="page-544-0">
   </span>
   When using the random number generator, make sure at least either the SAR ADC, high-speed ADC
   <sup>
    1
   </sup>
   , or RC_FAST_CLK
   <sup>
    2
   </sup>
   is enabled. Otherwise, pseudo-random numbers will be returned.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SAR ADC can be enabled by using the DIG ADC controller. For details, please refer to Chapter 34
     <i>
      On-Chip Sensor and Analog Signal Processing
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     High-speed ADC is enabled automatically when the Wi-Fi or Bluetooth modules is enabled.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-867-0">
      RC_FAST_CLK is enabled by setting the
     </a>
     RTC_CNTL_DIG_FOSC_EN bit in the RTC_CNTL_CLK_CONF_REG register.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1.
     <a href="#page-246-0">
      Note that, when the Wi-Fi mod
     </a>
     ule is enabl
     <a href="#page-246-0">
      ed, the value read from the hig
     </a>
     h-speed ADC can be saturated in some extreme cases, which lowers the entropy. Thus, it is advisable to also enable the SAR ADC as the noise source for the random number generator for such cases.
    </li>
    <li block-type="ListItem">
     2. Enabling RC_FAST_CLK increases the RNG entropy. However, to ensure maximum entropy, it's recommended to always enable an ADC source as well.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When using the random number generator, read the RNG_DATA_REG register multiple times until sufficient random numbers have been generated. Ensure the rate at which the register is read does not exceed the frequencies described in section 24.3 above.
  </p>
  <h1>
   24.5 Register Su
   <a href="#page-543-3">
    mm
   </a>
   ary
  </h1>
  <p block-type="Text">
   <span id="page-544-2">
   </span>
   <span id="page-544-1">
   </span>
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th colspan="2">
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   24.6 Register
  </h1>
  <p block-type="Text">
   Register 24.1. RNG_DATA_REG (0x6002_60B0)
  </p>
  <p>
   <span id="page-545-0">
   </span>
   <img src="_page_545_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   RNG_DATA Random number source. (RO)
  </p>
  <h1>
   <span id="page-546-0">
   </span>
   Chapter 25
  </h1>
  <h1>
   Clock Glitch Detection
  </h1>
  <h4>
   25.1 Overview 时钟毛刺检测
  </h4>
  <p block-type="Text">
   <span id="page-546-1">
   </span>
   The Clock Glitch Detection module on ESP32-C3 detects glitches in external crystal XTAL_CLK signals, and generates a system reset signal when detecting glitches to reset the whole digital circuit including RTC. By doing so, it prevents attackers from injecting glitches on external crystal XTAL_CLK clock to compromise ESP32-C3 and thus strengthens chip security. 1. 概述 为提升 ESP32-S2 的安全性能,防止攻击者通过给外部晶振 XTAL 附加毛刺,使芯片进入异常状态, 从而实施对芯片的攻击,ESP32-S2 搭载了毛刺检测模块,Glitch_Detect),用于检测从外部晶振输入的
  </p>
  <h1>
   25.2 Functional Description
  </h1>
  <h2>
   <span id="page-546-2">
   </span>
   25.2.1 Clock Glitch Detection 2.1 毛刺检测
  </h2>
  <p block-type="Text">
   <span id="page-546-5">
   </span>
   <span id="page-546-3">
   </span>
   The Clock Glitch Detection module on ESP32-C3 monitors input clock signals from XTAL_CLK. If it detects a glitch, namely a clock pulse (a or b in the figure below) with a width shorter than 3 ns, input clock signals from XTAL_CLK are blocked. ESP32-S2 的毛刺检测模块将对输入芯片的 XTAL_CLK 时钟信号进行检测,当时钟的脉宽,a 或 :)小 于 3ns 时,将认为检测到毛刺,触发毛刺检测信号,屏蔽输入的 XTAL_CLK 时钟信号。
  </p>
  <p>
   <img src="_page_546_Figure_7.jpeg"/>
  </p>
  <p>
   Figure 25.2-1. XTAL_CLK Pulse Width
  </p>
  <h4>
   当毛刺检测信号触发后,毛刺检测模块将向系统发送中断,GLITCH_DET_INT),如果 25.2.2 Reset
  </h4>
  <p block-type="Text">
   <span id="page-546-4">
   </span>
   RTC_CNTL_GLITCH_RST_EN 使能,将触发系统级复位。 Once detecting a glitch on XTAL_CLK that affects the circuit's normal operation, the Clock Glitch Detection module triggers a system reset if RTC_CNTL_GLITCH_RST_EN bit is enabled. By default, this bit is set to enable a reset.
  </p>
  <h1>
   Part V
  </h1>
  <h1>
   Connectivity Interface
  </h1>
  <p block-type="Text">
   <span id="page-547-0">
   </span>
   This part addresses the connectivity aspects of the system, describing components related to various communication interfaces like I2C, I2S, SPI, UART, USB, and more. The part also covers interfaces to generate signals used in remote control, motor control, LED control, etc.
  </p>
  <h1>
   <span id="page-548-3">
   </span>
   <span id="page-548-0">
   </span>
   Chapter 26
  </h1>
  <h1>
   UART Controller (UART)
  </h1>
  <h1>
   26.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-548-1">
   </span>
   In embedded system applications, data is required to be transferred in a simple way with minimal system resources. This can be achieved by a Universal Asynchronous Receiver/Transmitter (UART), which flexibly exchanges data with other peripheral devices in full-duplex mode. ESP32-C3 has two UART controllers compatible with various UART devices. They support Infrared Data Association (IrDA) and RS485 transmission.
  </p>
  <p block-type="Text">
   Each of the two UART controllers has a group of registers that function identically. In this chapter, the two UART controllers are referred to as UART
   <i>
    n
   </i>
   , in which
   <i>
    n
   </i>
   denotes 0 or 1.
  </p>
  <p block-type="Text">
   A UART is a character-oriented data link for asynchronous communication between devices. Such communication does not add clock signals to the data sent. Therefore, in order to communicate successfully, the transmitter and the receiver must operate at the same baud rate with the same stop bit(s) and parity bit.
  </p>
  <p block-type="Text">
   A UART data frame usually begins with one start bit, followed by data bits, one parity bit (optional) and one or more stop bits. UART controllers on ESP32-C3 support various lengths of data bits and stop bits. These controllers also support software and hardware flow control as well as GDMA for seamless high-speed data transfer. This allows developers to use multiple UART ports at minimal software cost.
  </p>
  <h1>
   26.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-548-2">
   </span>
   Each UART controller has the following features:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Three clock sources that can be divided
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Programmable baud rate
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     512 x 8-bit RAM shared by TX FIFOs and RX FIFOs of the two UART controllers
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Full-duplex asynchronous communication
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Automatic baud rate detection of input signals
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data bits ranging from 5 to 8
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Stop bits whose length can be 1, 1.5 or 2 bits
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Parity bit
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Special character AT_CMD detection
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RS485 protocol
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     IrDA protocol
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     High-speed data communication using GDMA
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART as wake-up source
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Software and hardware flow control
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-549-1">
   </span>
   <span id="page-549-0">
   </span>
   26.3 UART Structure
  </h1>
  <p>
   <img src="_page_549_Figure_5.jpeg"/>
  </p>
  <p>
   <img src="_page_549_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-549-2">
   </span>
   <img src="_page_549_Figure_7.jpeg"/>
  </p>
  <p>
   Figure 26.3-2. UART Structure
  </p>
  <p block-type="Text">
   Figure 26.3-2 shows the basic structure of a UART controller. A UART controller works in two clock domains, namely APB_CLK domain and Core Clock domain (the UART Core's clock domain). The UART Core has three clock sources: a 80 MHz APB_CLK, RC_FAST_CLK and external crystal clock XTAL_CLK (for details, please refer t
   <a href="#page-549-2">
    o Chapt
   </a>
   er 6
   <i>
    Reset and Clock
   </i>
   ), which are selected by configuring UART_SCLK_SEL. The selected clock source is divided by a divider to generate clock signals that drive the UART Core. The divisor is configured by UART_CLKDIV_REG: UART_CLKDIV for the integral part, and UART_CLKDIV_FRAG for the fractional part.
  </p>
  <p block-type="Text">
   A UART controll
   <a href="#page-190-0">
    er is broken down in
   </a>
   to two parts according to functions
   <a href="#page-584-0">
    : a transmitter and
   </a>
   a receiver.
  </p>
  <p block-type="Text">
   <a href="#page-578-0">
    The transmitter con
   </a>
   t
   <a href="#page-578-0">
    ains a TX FIFO
   </a>
   , which buffers data to b
   <a href="#page-578-0">
    e sent. Software can
   </a>
   write data to Tx_FIFO via the APB bus, or move data to Tx_FIFO using GDMA. Tx_FIFO_Ctrl controls writing and reading Tx_FIFO. When Tx_FIFO is not empty, Tx_FSM reads data bits in the data frame via Tx_FIFO_Ctrl, and converts them into a bitstream. The levels of output signal txd_out can be inverted by configuring the UART_TXD_INV field.
  </p>
  <p block-type="Text">
   The receiver contains a RX FIFO, which buffers data to be processed. The levels of input signal rxd_in can be inverted by configuring UART_RXD_INV field. Baudrate_Detect measures the baud rate of input signal rxd_in by detecting its minimum pulse width. Start_Detect detects the start bit in a data fra
   <a href="#page-579-0">
    me. If the start
   </a>
   bit is detected, Rx_FSM stores data bits in the data frame into Rx_FIFO by Rx_FIFO_Ctrl. Software can read data from Rx_FIFO via the A
   <a href="#page-579-0">
    PB bus, or recei
   </a>
   ve data using GDMA.
  </p>
  <p block-type="Text">
   HW_Flow_Ctrl controls rxd_in and txd_out data flows by standard UART RTS and CTS flow control signals (rtsn_out and ctsn_in). SW_Flow_Ctrl controls data flows by automatically adding special characters to outgoing data and detecting special characters in incoming data. When a UART controller is Light-sleep mode (see Chapter 9
   <i>
    Low-power Management
   </i>
   for more details), Wakeup_Ctrl counts up rising edges of rxd_in. When the number is equal to or greater than (UART_ACTIVE_THRESHOLD + 3), a wake_up signal is generated and sent to RTC, which then wakes up the ESP32-C3 chip.
  </p>
  <h1>
   26.4 Functional Descrip
   <a href="#page-581-0">
    tion
   </a>
  </h1>
  <h1>
   <span id="page-550-0">
   </span>
   26.4.1 Clock and Reset
  </h1>
  <p block-type="Text">
   <span id="page-550-1">
   </span>
   UART controllers are asynchronous. Their register configuration module, TX FIFO and RX FIFO are in APB_CLK domain, while the UART Core that controls transmission and reception is in Core Clock domain. The three clock sources of the UART core, namely APB_CLK, RC_FAST_CLK and external crystal clock XTAL_CLK, are selected by configuring UART_SCLK_SEL. The selected clock source is divided by a divider. This divider supports fractional frequency division: UART_SCLK_DIV_NUM field is the integral part, UART_SCLK_DIV_B field is the numerator of the fractional part, and UART_SCLK_DIV_A is the denominator of the fractional part. The divisor ranges from 1 ~
   <a href="#page-584-0">
    256.
   </a>
  </p>
  <p block-type="Text">
   When the frequency of the UART Core'
   <a href="#page-584-0">
    s clock is higher than th
   </a>
   e frequency needed to
   <a href="#page-584-0">
    generate the baud
   </a>
   rate, the UART Core can be clocked at a lower
   <a href="#page-584-0">
   </a>
   f
   <a href="#page-584-0">
    requency by the div
   </a>
   ider, in order to reduce power consumption. Usually, the UART Core's clock frequency is lower than the APB_CLK's frequency, and can be divided by the largest divisor value when higher than the frequency needed to generate the baud rate. The frequency of the UART Core's clock can also be at most twice higher than the APB_CLK. The clock for the UART transmitter and the UART receiver can be controlled independently. To enable the clock for the UART transmitter, UART_TX_SCLK_EN shall be set; to enable the clock for the UART receiver, UART_RX_SCLK_EN shall be set.
  </p>
  <p block-type="Text">
   To ensure that the configured register values are synchronized from APB_CLK domain to Core Clock domain,
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      <b>
       Espressif Systems
      </b>
     </th>
     <th>
      551
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   please follow procedures in Section26.5.
  </p>
  <p block-type="Text">
   To reset the whole UART, please:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     enable the clock for UART RA
     <a href="#page-562-3">
      M by
     </a>
     setting SYSTEM_UART_MEM_CLK_EN to 1;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     enable APB_CLK for UART
     <i>
      n
     </i>
     by setting SYSTEM_UART
     <i>
      n
     </i>
     _CLK_EN to 1
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clear SYSTEM_UART
     <i>
      n
     </i>
     _RST to 0;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     write 1 to UART_RST_CORE;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     write 1 to
     <a href="#page-436-0">
      SYSTEM_UART
     </a>
     <i>
      n
     </i>
     _RST;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clear SYS
     <a href="#page-584-0">
      TEM_UART
     </a>
     <i>
      n
     </i>
     _RST to 0;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clear UA
     <a href="#page-436-0">
      RT_RST_CORE
     </a>
     to 0.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that
   <a href="#page-436-0">
   </a>
   it
   <a href="#page-436-0">
    is not recommended
   </a>
   to reset the APB clock domain module or UART Core only.
  </p>
  <h1>
   <span id="page-551-1">
   </span>
   <span id="page-551-0">
   </span>
   26.4.2
   <a href="#page-584-0">
    UART RAM
   </a>
  </h1>
  <p>
   <img src="_page_551_Figure_11.jpeg"/>
  </p>
  <p>
   Figure 26.4-1. UART Controllers Sharing RAM
  </p>
  <p block-type="Text">
   The two UART controllers on ESP32-C3 share 512 × 8 bits of FIFO RAM. As Figure 26.4-1 illustrates, RAM is divided into 4 blocks, each has 128 × 8 bits. Figure 26.4-1 shows how many RAM blocks are allocated to TX FIFOs and RX FIFOs of the two UART controllers by default. UART
   <i>
    n
   </i>
   Tx_FIFO can be expanded by configuring UART_TX_SIZE, while UART
   <i>
    n
   </i>
   Rx_FIFO can be expanded by configuring UART_RX_
   <a href="#page-551-1">
    SIZE. S
   </a>
   ome limits are imposed:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART0 Tx_FIFO can be increased up to 4 blocks (the whole RAM);
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-570-1">
      UART1 Tx
     </a>
     _FIFO can be increased up to 3 blocks (from offset 128
     <a href="#page-570-1">
      to the end addr
     </a>
     ess);
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART0 Rx_FIFO can be increased up to 2 blocks (from offset 256 to the end address);
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART1 Rx_FIFO cannot be increased.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Please note that starting addresses of all FIFOs are fixed, so expanding one FIFO may take up the default space of other FIFOs. For example, by setting UART_TX_SIZE of UART0 to 2, the size of UART0 Tx_FIFO is increased by 128 bytes (from offset 0 to offset 255). In this case, UART0 Tx_FIFO takes up the default space for UART1 Tx_FIFO, and UART1's transmitting function cannot be used as a result.
  </p>
  <p block-type="Text">
   When neither of the two UART controllers is a
   <a href="#page-570-1">
    ctive, RAM coul
   </a>
   d enter low-power mode by setting UART_MEM_FORCE_PD.
  </p>
  <p block-type="Text">
   UART0 Tx_FIFO and UART1 Tx_FIFO are reset by setting UART_TXFIFO_RST. UART0 Rx_FIFO and UART1 Rx_FIFO are reset by setting UART_RXFIFO_RST.
  </p>
  <p block-type="Text">
   Data to be sent is written to TX FIFO via the APB bus or using GDMA, read automatically and converted from a frame into a bitstream by hardware Tx_FSM; data receiv
   <a href="#page-579-0">
    ed is converted from
   </a>
   a bitstream into a frame by hardware Rx_FSM, written in
   <a href="#page-579-0">
    to RX FIFO, and then
   </a>
   stored into RAM via the APB bus or using GDMA. The two UART controllers share one GDMA channel.
  </p>
  <p block-type="Text">
   The empty signal threshold for Tx_FIFO is configured by setting UART_TXFIFO_EMPTY_THRHD. When data stored in Tx_FIFO is less than UART_TXFIFO_EMPTY_THRHD, a UART_TXFIFO_EMPTY_INT interrupt is generated. The full signal threshold for Rx_FIFO is configured by setting UART_RXFIFO_FULL_THRHD. When data stored in Rx_FIFO is greater than UART_RXFIFO_FULL_THR
   <a href="#page-580-0">
    HD, a UART_RXFIFO_FULL_INT
   </a>
   interrupt is generated. In addition, when
   <a href="#page-580-0">
    Rx_FIFO receives more data t
   </a>
   han its capacity, a UART_RXFIFO_OVF_INT interrupt is generated.
  </p>
  <p block-type="Text">
   UART
   <i>
    n
   </i>
   can access FIFO via register U
   <a href="#page-580-0">
    ART_FIFO_REG. Writing to
   </a>
   UART_RXFIFO_RD_BYTE stores the data into the TX FIFO. As UART_RXFIFO_RD_BYTE is a read-only register field, the hardware does not actually perform a write operation on UART_RXFIFO_RD_BYTE; instead, upon detecting a write request to this field's address, it passes the corresponding write dat
   <a href="#page-570-2">
    a to the TX FIFO v
   </a>
   ia a separ
   <a href="#page-570-2">
    ate bypass. Reading
   </a>
   UART_RXFIFO_RD_BYTE retrieves the da
   <a href="#page-570-2">
    ta from the RX FIFO.
   </a>
  </p>
  <h1>
   26.4.3 Baud Rate Generation and Detection
  </h1>
  <h4>
   <span id="page-552-0">
   </span>
   26.4.3.1 Baud Rate Generation
  </h4>
  <p block-type="Text">
   <span id="page-552-1">
   </span>
   Before a UART controller sends or receives data, the baud rate should be configured by setting corresponding registers. The baud rate generator of a UART controller functions by dividing the input clock source. It can divide the clock source by a fractional amount. The divisor is configured by UART_CLKDIV_REG: UART_CLKDIV for the integral part, and UART_CLKDIV_FRAG for the fractional part. When using the 80 MHz input clock, the UART controller supports a maximum baud rate of 5 Mbaud.
  </p>
  <p block-type="Text">
   The divisor of the baud rate divider is equal to
  </p>
  <p block-type="Equation">
   <math display="block">
    UART\_CLKDIV + \frac{UART\_CLKDIV\_FRAG}{16}
   </math>
  </p>
  <p block-type="Text">
   meaning that the final baud rate is equal to
  </p>
  <p block-type="Equation">
   <math display="block">
    \frac{INVUT\_FREQ}{UART\_CLKDIV + \frac{UART\_CLKDIV\_FRAG}{16}}
   </math>
  </p>
  <p block-type="Text">
   where INPUT_FREQ is the frequency of UART Core's source clock. For example, if UART_CLKDIV = 694 and UART_CLKDIV_FRAG = 7 then the divisor value is
  </p>
  <p block-type="Equation">
   <math display="block">
    694 + \frac{7}{16} = 694.4375
   </math>
  </p>
  <p block-type="Text">
   When
   <a href="#page-578-0">
    UART_CLKDIV_
   </a>
   FRAG is 0, the baud rate generator is an integer clock divider where an output pulse is generated every UART_CLKDIV input pulses.
  </p>
  <p block-type="Text">
   When UART_CLKDIV_FRAG is not 0, the divider is fractional and the output baud rate clock pulses are not strictl
   <a href="#page-578-0">
    y uniform. As shown i
   </a>
   n Figure 26.4-2, for every 16 output pulses, the generator divides either (UART_CLKDIV +
   <a href="#page-578-0">
    1) input pulses
   </a>
   or UART_CLKDIV input pulses per output pulse. A total of UART_CLKDIV_FRAG outpu
   <a href="#page-578-0">
    t pulses are generate
   </a>
   d by dividing (UART_CLKDIV + 1) input pulses, and the remaining (16 - UART_CLKDIV_FRAG) output pulses
   <a href="#page-553-1">
    are ge
   </a>
   nerated by dividing UART_CLKDIV input pulses.
  </p>
  <p block-type="Text">
   <a href="#page-578-0">
    Espressif Syste
   </a>
   ms 553
  </p>
  <p block-type="Text">
   ESP32-
   <a href="#page-578-0">
    C3 TRM (Version 1.3)
   </a>
  </p>
  <p block-type="Text">
   The output pulses are interleaved as shown in Figure 26.4-2 below, to make the output timing more uniform:
  </p>
  <p>
   <span id="page-553-1">
   </span>
   <img src="_page_553_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 26.4-2. UART Controllers Division
  </p>
  <p block-type="Text">
   To support IrDA (see Section 26.4.7 for details), the fractional clock divider for IrDA data transmission generates clock signals divided by 16 × UART_CLKDIV_REG. This divider works similarly as the one elaborated above: it takes UART_CLKDIV/16 as the integer value and the lowest four bits of UART_CLKDIV as the fractional value.
  </p>
  <h1>
   26.4.3.2 B
   <a href="#page-578-0">
    aud Rate De
   </a>
   tection
  </h1>
  <p block-type="Text">
   <span id="page-553-0">
   </span>
   Automatic baud rate detection (Autobaud) on UARTs is enabled by setting UART_AUTOBAUD_EN. The Baudrate_Detect module shown in Figure 26.3-2 filters any noise whose pulse width is shorter than UART_GLITCH_FILT.
  </p>
  <p block-type="Text">
   Before communication starts, the transmitter could send random data to t
   <a href="#page-579-0">
    he receiver for baud ra
   </a>
   te detection. UART_LOWPULSE_MIN_CNT stores the m
   <a href="#page-549-2">
    inimum
   </a>
   low pulse width, UART_HIGHPULSE_MIN_CNT stores the
   <a href="#page-578-1">
    minimum high pulse
   </a>
   width, UART_POSEDGE_MIN_CNT stores the minimum pulse width between two rising edges, and UART_NEGEDGE_MIN_CNT stores the minimum pulse width between two falling edges. These
   <a href="#page-586-0">
    four fields are read by softwa
   </a>
   re to determine the transmitter's bau
   <a href="#page-586-1">
    d rate.
   </a>
  </p>
  <p>
   <span id="page-553-2">
   </span>
   <img src="_page_553_Figure_7.jpeg"/>
  </p>
  <p>
   Figure 26.4-3. The Timing Diagram of Weak UART Signals Along Falling Edges
  </p>
  <p block-type="Text">
   The baud rate can be determined in the following three ways:
  </p>
  <p block-type="Text">
   1. Normally, to avoid sampling erroneous data along rising or falling edges in a metastable state, which results in the inaccuracy of UART_LOWPULSE_MIN_CNT or UART_HIGHPULSE_MIN_CNT, use a weighted average of these two values to eliminate errors. In this case, the baud rate is calculated as follows:
  </p>
  <p block-type="Equation">
   <math display="block">
    B_{\text{uart}} = \frac{f_{\text{clk}}}{(\text{UART\_LOWPULSE\_MIN\_CNT} + \text{UART\_HIGHPULSE\_MIN\_CNT} + 2)/2}
   </math>
  </p>
  <p block-type="Text">
   Espressif Systems 554
  </p>
  <p block-type="Text">
   Submit Documentation Feedback
  </p>
  <p block-type="Text">
   ESP32-C3 TRM (Version 1.3)
  </p>
  <p block-type="Text">
   2. If UART signals are weak along falling edges as shown in Figure 26.4-3, which leads to an inaccurate average of UART_LOWPULSE_MIN_CNT and UART_HIGHPULSE_MIN_CNT, use UART_POSEDGE_MIN_CNT to determine the transmitter's baud rate as follows:
  </p>
  <p block-type="Equation">
   <math display="block">
    B_{\text{uart}} = \frac{f_{\text{clk}}}{(\text{UART\_POSEDGE\_MIN\_CNT}+1)/2}
   </math>
  </p>
  <p block-type="Text">
   3.
   <a href="#page-587-0">
    If UART signals are weak alo
   </a>
   ng rising edges, use UART_NEGEDGE_MIN_CNT to determine the transmitter's baud rate as follows:
  </p>
  <p block-type="Equation">
   <math display="block">
    B_{\text{uart}} = \frac{f_{\text{clk}}}{(\text{UART\_NEGEDGE\_MIN\_CNT}+1)/2}
   </math>
  </p>
  <h1>
   26.4.4 UART Data Frame
  </h1>
  <p>
   <span id="page-554-2">
   </span>
   <span id="page-554-0">
   </span>
   <img src="_page_554_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 26.4-4. Structure of UART Data Frame
  </p>
  <p block-type="Text">
   Figure 26.4-4 shows the basic structure of a data frame. A frame starts with one START bit, and ends with STOP bits which can be 1, 1.5, or 2 bits long, configured by UART_STOP_BIT_NUM (in RS485 mode turnaround delay may be added. See details in Section 26.4.6.2). The START bit is logical low, whereas STOP bits are logical
   <a href="#page-554-2">
    high.
   </a>
  </p>
  <p block-type="Text">
   The actual data length can be anywhere between 5 ~ 8 bit,
   <a href="#page-579-0">
    configured by
   </a>
   UART_BIT_NUM. When UART_PARITY_EN is set, a parity bit is added
   <a href="#page-556-0">
    after dat
   </a>
   a bits. UART_PARITY is used to choose even parity or odd parity. When the receiver detects a parity bit error in the data received, a UART_PARITY_ERR_INT interrupt is generated, and the data received is still stored into RX FIFO. When the r
   <a href="#page-579-0">
    eceiver detects a
   </a>
   data frame error, a
   <a href="#page-579-0">
    UART_FRM_ERR_
   </a>
   INT interrupt is generated, and the data re
   <a href="#page-579-0">
    ceived by defa
   </a>
   ult is stored into RX FIFO.
  </p>
  <p block-type="Text">
   If all data in Tx_FIFO has been sent, a UART_TX_DONE_INT interrupt is generated. After this, if the UART_TXD_BRK bit is set then the transmitter will enter the Break condition and send several NULL characters in which the TX data line is logical low. The number of NULL characters is configured by UART_TX_BRK_NUM. Once the transmitter has sent all NULL characters, a UART_TX_BRK_DONE_INT interrupt is generated. The
   <a href="#page-579-0">
    minimum interva
   </a>
   l between data frames can be configured using UART_TX_IDLE_NUM. If the transmitter stays idle for UART_TX_IDLE_NUM or more time, a UART_TX_BRK_IDLE_DONE_INT interrupt is
   <a href="#page-582-0">
    generated.
   </a>
  </p>
  <p block-type="Text">
   The receiver can also detect the Break conditions when the RX data line remains logical low for one NULL character transmission, and a UART_BRK_DET_INT interrupt will
   <a href="#page-583-0">
    be triggered to detec
   </a>
   t that a Break condition has be
   <a href="#page-583-0">
    en completed.
   </a>
  </p>
  <p block-type="Text">
   <span id="page-554-1">
   </span>
   The receiver can detect the current bus state through the timeout interrupt UART_RXFIFO_TOUT_INT. The UART_RXFIFO_TOUT_INT interrupt will be triggered when the bus is in the idle state for more than UART_RX_TOUT_THRHD bit time on current baud rate after the receiver has received at least one byte. You can use this interrupt to detect whether all the data from the transmitter has been sent.
  </p>
  <h1>
   26.4.5 AT_CMD Character Structure
  </h1>
  <p>
   <span id="page-555-2">
   </span>
   <img src="_page_555_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 26.4-5. AT_CMD Character Structure
  </p>
  <p block-type="Text">
   Figure 26.4-5 is the structure of a special character AT_CMD. If the receiver constantly receives AT_CMD_CHAR and the following conditions are met, a UART_AT_CMD_CHAR_DET_INT interrupt is generated.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The interval between the first AT_CMD_CHAR and the last non-AT_CMD_CHAR character is at least UART
     <a href="#page-555-2">
      _PRE_ID
     </a>
     LE_NUM cycles.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The interval between two AT_CMD_CHAR characters is less than UART_RX_GAP_TOUT cycles.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-587-2">
      The number of AT_
     </a>
     CMD_CHAR characters is equal to or greater than UART_CHAR_NUM.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The interval between the last AT_CMD_CHAR character and next
     <a href="#page-588-0">
      non-AT_CMD_CHAR c
     </a>
     haracter is at least UART_POST_IDLE_NUM cycles.
    </li>
   </ul>
  </p>
  <h1>
   26.4.6 RS485
  </h1>
  <p block-type="Text">
   <span id="page-555-0">
   </span>
   The
   <a href="#page-588-1">
   </a>
   t
   <a href="#page-588-1">
    wo UART controllers sup
   </a>
   port RS485 protocol. This protocol uses differential signals to transmit data, so it can communicate over longer distances at higher bit rates than RS232. RS485 has two-wire half-duplex mode and four-wire full-duplex mode. UART controllers support two-wire half-duplex transmission and bus snooping. In a two-wire RS485 multidrop network, there can be 32 slaves at most.
  </p>
  <h1>
   26.4.6.1 Driver Control
  </h1>
  <p block-type="Text">
   <span id="page-555-1">
   </span>
   As shown in Figure 26.4-6, in a two-wire multidrop network, an external RS485 transceiver is needed for differential to single-ended conversion. An RS485 transceiver contains a driver and a receiver. When a UART controller is not in transmitter mode, the connection to the differential line can be broken by disabling the driver. When DE is
   <a href="#page-556-3">
    1, the dr
   </a>
   iver is enabled; when DE is 0, the driver is disabled.
  </p>
  <p block-type="Text">
   The UART receiver converts differential signals to single-ended signals via an external receiver. RE is the enable control signal for the receiver. When RE is 0, the receiver is enabled; when RE is 1, the receiver is disabled. If RE is configured as 0, the UART controller is allowed to snoop data on the bus, including the data sent by itself.
  </p>
  <p block-type="Text">
   DE can be controlled by either software or hardware. To reduce the cost of software, in our design DE is controlled by hardware. As shown in Figure 26.4-6, DE is connected to dtrn_out of UART (please refer to Section 26.4.9.1 for more details).
  </p>
  <p>
   <span id="page-556-3">
   </span>
   <img src="_page_556_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 26.4-6. Driver Control Diagram in RS485 Mode
  </p>
  <h1>
   26.4.6.2 Turnaround Delay
  </h1>
  <p block-type="Text">
   <span id="page-556-0">
   </span>
   By default, the two UART controllers work in receiver mode. When a UART controller is switched from transmitter mode to receiver mode, the RS485 protocol requires a turnaround delay of one cycle after the stop bit. The UART transmitter supports adding a turnaround delay of one cycle before the start bit or after the stop bit. When UART_DL0_EN is set, a turnaround delay of one cycle is added before the start bit; when UART_DL1_EN is set, a turnaround delay of one cycle is added after the stop bit.
  </p>
  <h1>
   26.4.6.3
   <a href="#page-583-1">
    Bus Snoop
   </a>
   ing
  </h1>
  <p block-type="Text">
   <span id="page-556-1">
   </span>
   <a href="#page-583-1">
    In a two-wire m
   </a>
   ultidrop network, UART controllers support bus snooping if RE of the external RS485 transceiver is 0. By default, a UART controller is not allowed to transmit and receive data simultaneously. If UART_RS485TX_RX_EN is set and the external RS485 transceiver is configured as in Figure 26.4-6, a UART controller may receive data in transmitter mode and snoop the bus. If UART_RS485RXBY_TX_EN is set, a UART controller may transmit data in receiver mode.
  </p>
  <p block-type="Text">
   <a href="#page-583-1">
    The two UART controller
   </a>
   s can snoop the data sent by themselves. In transmitter mode, whe
   <a href="#page-556-3">
    n a UAR
   </a>
   T controller monitors a collision between the data sent and the data received, a U
   <a href="#page-583-1">
    ART_RS485_CLASH_INT is
   </a>
   generated; when a UART controller monitors a data frame error, a UART_RS485_FRM_ERR_INT interrupt is generated; when a UART controller monitors a polarity error, a UART_RS485_PARITY_ERR_INT is generated.
  </p>
  <h1>
   26.4.7 IrDA
  </h1>
  <p block-type="Text">
   <span id="page-556-2">
   </span>
   IrDA protocol consists of three layers, namely the physical layer, the link access protocol, and the link management protocol. The two UART controllers implement IrDA's physical layer. In IrDA encoding, a UART controller supports data rates up to 115.2 kbit/s (SIR, or serial infrared mode). As shown in Figure 26.4-7, the IrDA encoder converts a NRZ (non-return to zero code) signal to a RZI (return to zero inverted code) signal and sends it to the external driver and infrared LED. This encoder uses modulated signals whose pulse width is 3/16 bits to indicate logic "0", and low levels to indicate logic "1". The IrDA decoder receives sig
   <a href="#page-557-2">
    nals from
   </a>
   the infrared receiver and converts them to NRZ signals. In most cases, the receiver is high when it is idle, and the encoder output polarity is the opposite of the decoder input polarity. If a low pulse is detected, it indicates that a start bit has been received.
  </p>
  <p block-type="Text">
   When IrDA function is enabled, one bit is divided into 16 clock cycles. If the bit to be sent is zero, then the 9th, 10th and 11th clock cycle are high.
  </p>
  <p>
   <span id="page-557-2">
   </span>
   <img src="_page_557_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 26.4-7. The Timing Diagram of Encoding and Decoding in SIR mode
  </p>
  <p block-type="Text">
   <span id="page-557-3">
   </span>
   The IrDA transceiver is half-duplex, meaning that it cannot send and receive data simultaneously. As shown in Figure 26.4-8, IrDA function is enabled by setting UART_IRDA_EN. When UART_IRDA_TX_EN is set (high), the IrDA transceiver is enabled to send data and not allowed to receive data; when UART_IRDA_TX_EN is reset (low), the IrDA transceiver is enabled to receive data and not allowed to send data.
  </p>
  <p>
   <img src="_page_557_Figure_3.jpeg"/>
  </p>
  <p>
   Figure 26.4-8. IrDA Encoding and Decoding Diagram
  </p>
  <h1>
   26.4.8 Wake-up
  </h1>
  <p block-type="Text">
   <span id="page-557-0">
   </span>
   UART0 and UART1 can be set as wake-up source. When a UART controller is in Light-sleep mode, Wakeup_Ctrl counts up the rising edges of rxd_in. When the number of rising edges is is equal to or greater than (UART_ACTIVE_THRESHOLD + 3), a wake_up signal is generated and sent to RTC, which then wakes up ESP32-C3.
  </p>
  <p block-type="Text">
   <span id="page-557-1">
   </span>
   After the chip is woken up by UART, it is necessary to clear the wake_up signal by transmitting data to UART in
   <a href="#page-581-0">
    Active mode or resetting the
   </a>
   whole UART, otherwise the number of rising edges required for the next wakeup will be reduced.
  </p>
  <h1>
   26.4.9 Flow Control
  </h1>
  <p block-type="Text">
   UART controllers have two ways to control data flow, namely hardware flow control and software flow control. Hardware flow control is achieved using output signal rtsn_out and input signal dsrn_in. Software flow control is achieved by inserting special characters in the data flow sent and detecting special characters in the data flow received.
  </p>
  <h1>
   <span id="page-558-1">
   </span>
   <span id="page-558-0">
   </span>
   26.4.9.1 Hardware Flow Control
  </h1>
  <p>
   <img src="_page_558_Figure_3.jpeg"/>
  </p>
  <p>
   Figure 26.4-9. Hardware Flow Control Diagram
  </p>
  <p block-type="Text">
   Figure 26.4-9 shows the hardware flow control of a UART controller. Hardware flow control uses output signal rtsn_out and input signal dsrn_in. Figure 26.4-10 illustrates how these signals are connected between UART on ESP32-C3 (hereinafter referred to as IU0) and the external UART (hereinafter referred to as EU0).
  </p>
  <p block-type="Text">
   When
   <a href="#page-558-1">
    rtsn_ou
   </a>
   t of IU0 is low, EU0 is allowed to send data; when rtsn_out of IU0 is high, EU0 is notified to stop sending data until rtsn_out of IU0 returns
   <a href="#page-559-1">
    to low.
   </a>
   The output signal rtsn_out can be controlled in two ways.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Software control: Enter this mode by clearing UART_RX_FLOW_EN to 0. In this mode, the level of rtsn_out is changed by configuring UART_SW_RTS.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Hardware control: Enter this mode by setting UART_RX_FLOW_EN to 1. In this mode, rtsn_out is pulled high when data in Rx_FIFO exceeds UART_RX
     <a href="#page-580-0">
      _FLOW_THRHD.
     </a>
    </li>
   </ul>
  </p>
  <p>
   <span id="page-559-1">
   </span>
   <img src="_page_559_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 26.4-10. Connection between Hardware Flow Control Signals
  </p>
  <p block-type="Text">
   When ctsn_in of IU0 is low, IU0 is allowed to send data; when ctsn_in is high, IU0 is not allowed to send data. When IU0 detects an edge change of ctsn_in, a UART_CTS_CHG_INT interrupt is generated.
  </p>
  <p block-type="Text">
   If dtrn_out of IU0 is high, it indicates that IU0 is ready to transmit data. dtrn_out is generated by configuring the UART_SW_DTR field. When the IU0 transmitter detects a edge change of dsrn_in, a UART_DSR_CHG_INT interrupt is generated. After this interrupt is detected, software can obtain the level of input signal dsrn_in by reading UART_DSRN. If dsrn_in is high, it indicates that EU0 is ready to transmit data.
  </p>
  <p block-type="Text">
   In a
   <a href="#page-579-0">
    two-wire RS485
   </a>
   multidrop network enabled by setting UART_RS485_EN, dtrn_out is generated by hardware and used for transmit/receive turnaround. When data transmission starts, dtrn_out is pulled high and the ext
   <a href="#page-584-1">
    ernal driver is
   </a>
   enabled; when data transmission completes, dtrn_out is pulled low and the external driver is disabled. Please note that when there is a turnaro
   <a href="#page-583-1">
    und delay of one
   </a>
   cycle added after the stop bit, dtrn_out is pulled low after the delay.
  </p>
  <p block-type="Text">
   UART loopback test is enabled by setting UART_LOOPBACK. In the test, UART output signal txd_out is connected to its input signal rxd_in, rtsn_out is connected to ctsn_in, and dtrn_out is connected to dsrn_out. If the data sent matches the data received, it indicates that UART controllers are working properly.
  </p>
  <h1>
   26.4.9.2 Software Flow Control
  </h1>
  <p block-type="Text">
   <span id="page-559-0">
   </span>
   Instead of CTS/RTS lines, software flow control uses XON/XOFF characters to start or stop data transmission. Such flow control is enabled by setting UART_SW_FLOW_CON_EN to 1.
  </p>
  <p block-type="Text">
   When using software flow control, hardware automatically detects if there are XON/XOFF characters in the data flow received, and generate a UART_SW_XOFF_INT or a UART_SW_XON_INT interrupt accordingly. If an XOFF character is detected, the transmitter st
   <a href="#page-581-1">
    ops data transmission once
   </a>
   the current byte has been transmitted; if an XON character is detected, the transmitter starts data transmission. In addition, software can force the transmitter to stop sending data by setting UART_FORCE_XOFF, or to start sending data by setting UART_FORCE_XON.
  </p>
  <p block-type="Text">
   Software determines whether to insert flow control characters according to the remaining room in RX FIFO. When UART_SEND_XOFF is set, the transm
   <a href="#page-581-1">
    itter sends an XOFF
   </a>
   character configured by UART_XOFF_CHAR
   <a href="#page-581-1">
    after the current by
   </a>
   te in transmission; when UART_SEND_XON is set, the transmitter sends an XON character configured by UART_XON_CHAR after the current byte in transmission. If the RX FIFO of a UART controller stores
   <a href="#page-581-1">
    more data than
   </a>
   UART_XOFF_THRESHOLD, UART_SEND_XOFF is set by hardware.
   <a href="#page-582-1">
    As a result, the
   </a>
   transmitter sends an XOFF character configured by
   <a href="#page-581-1">
    UART_XOF
   </a>
   F_CHAR after the current byte in transmission. If the RX FIFO of
   <a href="#page-582-2">
    a UART controller
   </a>
   stores less data than UART_XON_THRESHOLD, UART_SEND_XON is set by
  </p>
  <p block-type="Text">
   hardware. As a result, the transmitter sends an XON character configured by UART_XON_CHAR after the current byte in transmission.
  </p>
  <h1>
   26.4.10 GDMA Mode
  </h1>
  <p block-type="Text">
   <span id="page-560-1">
   </span>
   <span id="page-560-0">
   </span>
   The two UART controllers on ESP32-C3 share one TX/RX GDMA (general direct memory access) channel via UHCI. In GDMA mode, UART controllers support the decoding and encoding of HCI data packets. The UHCI_UART
   <i>
    n
   </i>
   _CE field determines which UART controller occupies the GDMA TX/RX channel.
  </p>
  <p>
   <img src="_page_560_Figure_3.jpeg"/>
  </p>
  <p>
   Figure 26.4-11. Data Transfer in GDMA Mode
  </p>
  <p block-type="Text">
   Figure 26.4-11 shows how data is transferred using GDMA. Before GDMA receives data, software prepares an inlink. GDMA_INLINK_ADDR_CH
   <i>
    n
   </i>
   points to the first receive descriptor in the inlink. After GDMA_INLINK_START_CH
   <i>
    n
   </i>
   is set, UHCI sends data that UART has received to the decoder. The decoded data is then
   <a href="#page-560-1">
    stored
   </a>
   into the RAM pointed by the inlink under the control of GDMA.
  </p>
  <p block-type="Text">
   Befor
   <a href="#page-79-0">
    e GDMA sends data, softwar
   </a>
   e prepares an outlink and data to be sent. GDMA_OUTLINK_ADDR_CH
   <i>
    n
   </i>
   <a href="#page-79-0">
    points to the first transmit d
   </a>
   escriptor in the outlink. After GDMA_OUTLINK_START_CH
   <i>
    n
   </i>
   is set, GDMA reads data from the RAM pointed by outlink. The data is then encoded by the encoder, and sent sequentially by the UART transmitter.
  </p>
  <p block-type="Text">
   HCI data packets have separators at the beginning and
   <a href="#page-81-0">
   </a>
   t
   <a href="#page-81-0">
    he end, with data bits in the m
   </a>
   iddle (separators + data bits + separators). The encoder inserts separators in front of and after data bits, and replaces data bits identical to separators with special characters. The decoder removes separators in front of and after data bits, and replaces special characters with separators. There can be more than one continuous separator at the beginning and the end of a data packet. The separator is configured by UHCI_SEPER_CHAR, 0xC0 by default. The special character is configured by UHCI_ESC_SEQ0_CHAR0 (0xDB by default) and UHCI_ESC_SEQ0_CHAR1 (0xDD by default). When all data has been sent, a GDMA_OUT_TOTAL_EOF_CH
   <i>
    n
   </i>
   _INT interrupt is generated. When all data has been received, a GDMA_IN_S
   <a href="#page-599-0">
    UC_EOF_CH
   </a>
   <i>
    n
   </i>
   _INT is generated.
  </p>
  <h1>
   26.4.11
   <a href="#page-599-1">
    UART Int
   </a>
   errupts
  </h1>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_AT_CMD_CHAR_DET_INT: Triggered when the receiver detects an AT_CMD character.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_RS485_CLASH_INT: Triggered when a collision is detected between the transmitter and the receiver in RS485 mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_RS485_FRM_ERR_INT: Triggered when an error is detected in the data frame sent by the transmitter in RS485 mode.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_RS485_PARITY_ERR_INT: Triggered when an error is detected in the parity bit sent by the transmitter in RS485 mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_TX_DONE_INT: Triggered when all data in the transmitter's TX FIFO has been sent.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_TX_BRK_IDLE_DONE_INT: Triggered when the transmitter stays idle for the minimum interval (threshold) after sending the last data bit.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_TX_BRK_DONE_INT: Triggered when the transmitter has sent all NULL characters after all data in TX FIFO had been sent.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_GLITCH_DET_INT: Triggered when the receiver detects a glitch in the middle of the start bit.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_SW_XOFF_INT: Triggered when UART_SW_FLOW_CON_EN is set and the receiver receives a XOFF character.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_SW_XON_INT: Triggered when UART_SW_FLOW_CON_EN is set and the receiver receives a XON character.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_RXFIFO_TOUT_INT: Triggered when the receiver takes more time than UART_RX_TOUT_THRHD to receive one byte.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_BRK_DET_INT: Triggered when the receiver detects a NULL character (i.e. logic 0 for one NULL character transmission) after stop bits.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_CTS_CHG_INT: Triggered when the receiver detects an edge change of CTSn signals.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_DSR_CHG_INT: Triggered when the receiver detects an edge change of DSRn signals.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_RXFIFO_OVF_INT: Triggered when the receiver receives more data than the capacity of RX FIFO.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_FRM_ERR_INT: Triggered when the receiver detects a data frame error.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_PARITY_ERR_INT: Triggered when the receiver detects a parity error.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_TXFIFO_EMPTY_INT: Triggered when TX FIFO stores less data than what UART_TXFIFO_EMPTY_THRHD specifies.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UART_RXFIFO_FULL_INT: Triggered when the receiver receives more data than what UART_RXFIFO_FULL_THRHD specifies.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-580-0">
      UART_WAKEUP_INT: Triggered
     </a>
     when UART is woken up.
    </li>
   </ul>
  </p>
  <h1>
   26.4.12
   <a href="#page-580-0">
    UHCI Interrupt
   </a>
   s
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-561-0">
     </span>
     <i>
      •
     </i>
     UHCI_APP_CTRL1_INT: Triggered when software sets UHCI_APP_CTRL1_INT_RAW.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UHCI_APP_CTRL0_INT: Triggered when software sets UHCI_APP_CTRL0_INT_RAW.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UHCI_OUTLINK_EOF_ERR_INT: Triggered when an E
     <a href="#page-602-0">
      OF error is detected in a trans
     </a>
     mit descriptor.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UHCI_SEND_A_REG_Q_INT: Triggered when UHCI has
     <a href="#page-602-0">
      sent a series of short packet
     </a>
     s using always_send.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UHCI_SEND_S_REG_Q_INT: Triggered when UHCI has sent a series of short packets using single_send.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UHCI_TX_HUNG_INT: Triggered when UHCI takes too long to read RAM using a GDMA transmit channel.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UHCI_RX_HUNG_INT: Triggered when UHCI takes too long to receive data using a GDMA receive channel.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     UHCI_TX_START_INT: Triggered when GDMA detects a separator character.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   UHCI_RX_START_INT: Triggered when a separator character has been sent.
  </p>
  <h1>
   26.5 Programming Procedures
  </h1>
  <h1>
   <span id="page-562-3">
   </span>
   26.5.1 Register Type
  </h1>
  <p block-type="Text">
   <span id="page-562-0">
   </span>
   All UART registers are in APB_CLK domain. According to whether clock domain crossing and synchronization are required, UART registers that can be configured by software are classified into three types, namely immediate registers, synchronous registers, and static registers. Immediate registers are read in APB_CLK domain, and take effect after configured via the APB bus. Synchronous registers are read in Core Clock domain, and take effect after synchronization. Static registers are also read in Core Clock domain, but would not change dynamically. Therefore, for static registers clock domain crossing is not required, and software can turn on and off the clock for the UART transmitter or receiver to ensure that the configuration sampled in Core Clock domain is correct.
  </p>
  <h1>
   26.5.1.1 Synchronous Registers
  </h1>
  <p block-type="Text">
   <span id="page-562-1">
   </span>
   Read in Core Clock domain, synchronous registers implement the clock domain crossing design to ensure that their values sampled in Core Clock domain are correct. These registers as listed in Table 26.5-1 are configured as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Enable register synchronization by clearing UART_UPDATE_CTRL to 0;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Wait for UART_REG_UPDATE to become 0, which indicates the completion of last synch
     <a href="#page-562-2">
      ronizat
     </a>
     ion;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure synchronous registers;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Synchr
     <a href="#page-589-0">
      onize the configured
     </a>
     values to Core Clock domain by writting 1 to UART_REG_UPDATE.
    </li>
   </ul>
  </p>
  <span id="page-562-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 26.5-1. UARTn Synchronous Registers
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Register
      <br/>
      UART_CLKDIV_REG
     </td>
     <td>
      Field
     </td>
    </tr>
    <tr>
     <td>
      UART_CLKDIV_FRAG[3:0]
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_CLKDIV[11:0]
     </td>
    </tr>
    <tr>
     <td>
      UART_CONF0_REG
     </td>
     <td>
      UART_AUTOBAUD_EN
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_ERR_WR_MASK
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_TXD_INV
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_RXD_INV
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_IRDA_EN
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_TX_FLOW_EN
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_LOOPBACK
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_IRDA_RX_INV
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_IRDA_TX_EN
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_IRDA_WCTL
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_IRDA_TX_EN
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_IRDA_DPLX
      <br/>
      UART_STOP_BIT_NUM
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_BIT_NUM
     </td>
    </tr>
   </tbody>
  </table>
  <h2>
   Table 26.5-1. UART
   <i>
    n
   </i>
   Synchronous Registers
  </h2>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 26.5-1 – cont'd from previous page
     </td>
    </tr>
    <tr>
     <td>
      Register
     </td>
     <td>
      Field
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_PARITY_EN
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      UART_FLOW_CONF_REG
     </td>
     <td>
      UART_PARITY
     </td>
    </tr>
    <tr>
     <td>
      UART_SEND_XOFF
     </td>
    </tr>
    <tr>
     <td>
      UART_SEND_XON
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_FORCE_XOFF
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_FORCE_XON
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_XONOFF_DEL
      <br/>
      UART_SW_FLOW_CON_EN
     </td>
    </tr>
    <tr>
     <td rowspan="4">
      UART_TXBRK_CONF_REG
     </td>
     <td>
      UART_RS485_TX_DLY_NUM[3:0]
     </td>
    </tr>
    <tr>
     <td>
      UART_RS485_RX_DLY_NUM
     </td>
    </tr>
    <tr>
     <td>
      UART_RS485RXBY_TX_EN
     </td>
    </tr>
    <tr>
     <td>
      UART_RS485TX_RX_EN
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      UART_DL1_EN
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 26.5-1 – cont'd from previous page
  </h4>
  <h4>
   26.5.1.2 Static Registers
  </h4>
  <p block-type="Text">
   <span id="page-563-0">
   </span>
   Static registers, though also read in Core Clock domain, would not change dynamically when UART controllers are at work, so they do not implement the clock domain crossing design. These registers must be configured when the UART transmitter or receiver is not at work. In this case, software can turn off the clock for the UART transmitter or receiver, so that static registers are not sampled in their metastable state. When software turns on the clock, the configured values are stable to be correctly sampled. Static registers as listed in Table 26.5-2 are configured as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Turn off the clock for the UART transmitter by clearing UART_TX_SCLK_EN, or the clock for the UART receiver by clearing UART_RX_SCLK_EN, depending on which one (transmitter or receiver) is not
     <a href="#page-563-1">
     </a>
     a
     <a href="#page-563-1">
      t work;
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure static registers;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Turn on the clock f
     <a href="#page-584-0">
      or the UART transmitte
     </a>
     r by writing 1 to
     <a href="#page-584-0">
      UART_TX_SCLK_E
     </a>
     N, or the clock for the UART receiver by writing 1 to UART_RX_SCLK_EN.
    </li>
   </ul>
  </p>
  <span id="page-563-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Field
     </td>
    </tr>
    <tr>
     <td>
      UART_GLITCH_FILT_EN
     </td>
    </tr>
    <tr>
     <td>
      UART_GLITCH_FILT[7:0]
     </td>
    </tr>
    <tr>
     <td>
      UART_ACTIVE_THRESHOLD[9:0]
     </td>
    </tr>
    <tr>
     <td>
      UART_XOFF_CHAR[7:0]
     </td>
    </tr>
    <tr>
     <td>
      UART_XON_CHAR[7:0]
     </td>
    </tr>
    <tr>
     <td>
      UART_TX_IDLE_NUM[9:0]
     </td>
    </tr>
    <tr>
     <td>
      UART_PRE_IDLE_NUM[15:0]
      <br/>
      UART_POST_IDLE_NUM[15:0]
     </td>
    </tr>
    <tr>
     <td>
      UART_RX_GAP_TOUT[15:0]
     </td>
    </tr>
    <tr>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 26.5-2. UART
   <i>
    n
   </i>
   Stati
   <a href="#page-584-0">
    c Registers
   </a>
  </h4>
  <table>
   <tbody>
    <tr>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 26.5-2 – cont'd from previous page
     </td>
    </tr>
   </tbody>
  </table>
  <p>
  </p>
  <h4>
   26.5.1.3 I
   <a href="#page-588-2">
    mmediate Registers
   </a>
  </h4>
  <p block-type="Text">
   <span id="page-564-0">
   </span>
   Except those listed in Table 26.5-1 and Table 26.5-2, registers that can be configured by software are immediate registers read in APB_CLK domain, such as interrupt and FIFO configuration registers.
  </p>
  <h1>
   26.5.2 Detailed S
   <a href="#page-562-2">
    teps
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-564-3">
   </span>
   <span id="page-564-1">
   </span>
   Figure 26.5-1 illustrates the process to program UART controllers, namely initialize UART, configure registers, enable the UART transmitter or receiver, and finish data transmission.
  </p>
  <p>
   <img src="_page_564_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-564-2">
   </span>
   Figure 26.5-1. UART Programming Procedures
  </p>
  <h4>
   26.5.2.1 Initializing UART
   <i>
    n
   </i>
  </h4>
  <p block-type="Text">
   To initialize UART
   <i>
    n
   </i>
   :
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     enable the clock for UART RAM by setting SYSTEM_UART_MEM_CLK_EN to 1;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     enable APB_CLK for UART
     <i>
      n
     </i>
     by setting SYSTEM_UART
     <i>
      n
     </i>
     _CLK_EN to 1;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clear SYSTEM_UART
     <i>
      n
     </i>
     _RST;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     write 1 to UART_RST_CORE;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     write 1 to
     <a href="#page-436-0">
      SYSTEM_UART
     </a>
     <i>
      n
     </i>
     _RST;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clear SYS
     <a href="#page-584-0">
      TEM_UART
     </a>
     <i>
      n
     </i>
     _RST;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clear UA
     <a href="#page-436-0">
      RT_RST_CORE;
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     enabl
     <a href="#page-436-0">
      e register synchroniza
     </a>
     tion by clearing UART_UPDATE_CTRL.
    </li>
   </ul>
  </p>
  <h4>
   26.5.2.2
   <a href="#page-584-0">
    Configuring U
   </a>
   ART
   <i>
    n
   </i>
   Communication
  </h4>
  <p block-type="Text">
   <span id="page-565-0">
   </span>
   To configure UART
   <i>
    n
   </i>
   communication:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     wait for UART_REG_UPDATE to become 0, which indicates the completion of the last synchronization;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     configure static registers (if any) following Section 26.5.1.2;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     select
     <a href="#page-589-0">
     </a>
     t
     <a href="#page-589-0">
      he clock source via
     </a>
     UART_SCLK_SEL;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     configure divisor of the divider via UART_SCLK_DI
     <a href="#page-563-0">
      V_NUM,
     </a>
     UART_SCLK_DIV_A, and UART_SCLK_DIV_B;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     configure the baud rate for
     <a href="#page-584-0">
      transmission via
     </a>
     UART_CLKDIV and UART_CLKDIV_FRAG;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     configure data length via UART_BI
     <a href="#page-584-0">
      T_NUM;
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     configure odd or even parity check via UAR
     <a href="#page-578-0">
      T_PARITY_EN
     </a>
     and
     <a href="#page-578-0">
      UART_PARITY;
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     optional steps dependin
     <a href="#page-579-0">
      g on application
     </a>
     ...
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     synchronize the configured values to t
     <a href="#page-579-0">
      he Core Clock dom
     </a>
     ain
     <a href="#page-579-0">
      by writing 1 to
     </a>
     UART_REG_UPDATE.
    </li>
   </ul>
  </p>
  <h4>
   26.5.2.3 Enabling UART
   <i>
    n
   </i>
  </h4>
  <p block-type="Text">
   <span id="page-565-1">
   </span>
   To enable UART
   <i>
    n
   </i>
   transmitter:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     configure TX FIFO's empty threshold via UART_TXFIFO_EMPTY_THRHD;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     disable UART_TXFIFO_EMPTY_INT interrupt by clearing UART_TXFIFO_EMPTY_INT_ENA;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     write data to be sent to UART_RXFIFO_R
     <a href="#page-580-0">
      D_BYTE;
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clear UART_TXFIFO_EMPTY_INT interrupt by setting UA
     <a href="#page-575-0">
      RT_TXFIFO_EMPTY_INT_CLR;
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     enable UART_TXFIFO_E
     <a href="#page-570-2">
      MPTY_INT interrupt by se
     </a>
     tting UART_TXFIFO_EMPTY_INT_ENA;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     detect UART_TXFIFO_EMPTY_INT and wait for the c
     <a href="#page-577-0">
      ompletion of data transmission.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   To enable UART
   <i>
    n
   </i>
   receiver:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     configure RX FIFO's full threshold via UART_RXFIFO_FULL_THRHD;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     enable UART_RXFIFO_FULL_INT interrupt by setting UART_RXFIFO_FULL_INT_ENA;
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     detect UART_TXFIFO_FULL_INT and wait until the RX FIFO is full;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     read data from RX FIFO via UART_RXFIFO_RD_BYTE, and obtain the number of bytes received in RX FIFO via UART_RXFIFO_CNT.
    </li>
   </ul>
  </p>
  <h1>
   26.6 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-567-0">
   </span>
   The addresses in this section are relative to UART Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      FIFO Configuration
      <br/>
      UART_FIFO_REG
     </td>
     <td>
      FIFO data register
     </td>
     <td>
      0x0000
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UART_MEM_CONF_REG
     </td>
     <td>
      UART threshold and allocation configuration
     </td>
     <td>
      0x0060
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART Interrupt Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      UART_INT_RAW_REG
     </td>
     <td>
      Raw interrupt status
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/WTC/SS
     </td>
    </tr>
    <tr>
     <td>
      UART_INT_ST_REG
     </td>
     <td>
      Masked interrupt status
     </td>
     <td>
      0x0008
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UART_INT_ENA_REG
     </td>
     <td>
      Interrupt enable bits
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_INT_CLR_REG
     </td>
     <td>
      Interrupt clear bits
     </td>
     <td>
      0x0010
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      Configuration Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      UART_CLKDIV_REG
     </td>
     <td>
      Clock divider configuration
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_RX_FILT_REG
     </td>
     <td>
      RX filter configuration
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_CONF0_REG
     </td>
     <td>
      Configuration register 0
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_CONF1_REG
     </td>
     <td>
      Configuration register 1
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_FLOW_CONF_REG
     </td>
     <td>
      Software flow control configuration
     </td>
     <td>
      0x0034
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      UART_SLEEP_CONF_REG
     </td>
     <td>
      Sleep mode configuration
     </td>
     <td>
      0x0038
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_SWFC_CONF0_REG
     </td>
     <td>
      Software flow control character configuration
     </td>
     <td>
      0x003C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_SWFC_CONF1_REG
     </td>
     <td>
      Software flow control character configuration
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_TXBRK_CONF_REG
      <br/>
      UART_IDLE_CONF_REG
     </td>
     <td>
      TX break character configuration
      <br/>
      Frame end idle time configuration
     </td>
     <td>
      0x0044
      <br/>
      0x0048
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_RS485_CONF_REG
     </td>
     <td>
      RS485 mode configuration
     </td>
     <td>
      0x004C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_CLK_CONF_REG
     </td>
     <td>
      UART core clock configuration
     </td>
     <td>
      0x0078
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Status Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      UART_STATUS_REG
     </td>
     <td>
      UART status register
     </td>
     <td>
      0x001C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UART_MEM_TX_STATUS_REG
     </td>
     <td>
      TX FIFO write and read offset address
     </td>
     <td>
      0x0064
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UART_MEM_RX_STATUS_REG
     </td>
     <td>
      RX FIFO write and read offset address
     </td>
     <td>
      0x0068
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UART_FSM_STATUS_REG
     </td>
     <td>
      UART transmitter and receiver status
     </td>
     <td>
      0x006C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Autobaud Register
     </td>
     <td>
      Autobaud minimum low pulse duration
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      UART_LOWPULSE_REG
     </td>
     <td>
      register
      <br/>
      Autobaud minimum high pulse duration
     </td>
     <td>
      0x0028
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UART_HIGHPULSE_REG
     </td>
     <td>
      register
     </td>
     <td>
      0x002C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UART_RXD_CNT_REG
     </td>
     <td>
      Autobaud edge change count register
     </td>
     <td>
      0x0030
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UART_POSPULSE_REG
     </td>
     <td>
      Autobaud high pulse register
     </td>
     <td>
      0x0070
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td colspan="4">
      UART_NEGPULSE_REG
      <br/>
      Autobaud low pulse register
      <br/>
      0x0074
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      AT Escape Sequence Selection Configuration
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      UART_AT_CMD_PRECNT_REG
      <br/>
      UART_AT_CMD_POSTCNT_REG
     </td>
     <td>
      Pre-sequence timing configuration
      <br/>
      Post-sequence timing configuration
     </td>
     <td>
      0x0050
      <br/>
      0x0054
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 26
      <br/>
      UART Controller (UART)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="3">
      Name
      <br/>
      Description
      <br/>
      Address
      <br/>
      Access
     </td>
    </tr>
    <tr>
     <td>
      UART_AT_CMD_GAPTOUT_REG
     </td>
     <td>
      Timeout configuration
     </td>
     <td>
      0x0058
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UART_AT_CMD_CHAR_REG
     </td>
     <td>
      AT escape sequence detection configuration
     </td>
     <td>
      0x005C
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      UART_ID_REG
     </th>
     <th>
      UART ID register
     </th>
     <th>
      0x0080
     </th>
     <th>
      varies
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Configuration Register
      <br/>
      UHCI_CONF0_REG
     </td>
     <td>
      UHCI configuration register
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_CONF1_REG
     </td>
     <td>
      UHCI configuration register
     </td>
     <td>
      0x0014
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      UHCI_ESCAPE_CONF_REG
     </td>
     <td>
      Escape character configuration
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_HUNG_CONF_REG
     </td>
     <td>
      Timeout configuration
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_ACK_NUM_REG
     </td>
     <td>
      UHCI ACK number configuration
     </td>
     <td>
      0x0028
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      UHCI_QUICK_SENT_REG
     </td>
     <td>
      UHCI quick_sent configuration register
     </td>
     <td>
      0x0030
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q0_WORD0_REG
     </td>
     <td>
      Q0_WORD0 quick_sent register
     </td>
     <td>
      0x0034
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q0_WORD1_REG
     </td>
     <td>
      Q0_WORD1 quick_sent register
     </td>
     <td>
      0x0038
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q1_WORD0_REG
     </td>
     <td>
      Q1_WORD0 quick_sent register
     </td>
     <td>
      0x003C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q1_WORD1_REG
     </td>
     <td>
      Q1_WORD1 quick_sent register
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q2_WORD0_REG
     </td>
     <td>
      Q2_WORD0 quick_sent register
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q2_WORD1_REG
     </td>
     <td>
      Q2_WORD1 quick_sent register
     </td>
     <td>
      0x0048
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q3_WORD0_REG
     </td>
     <td>
      Q3_WORD0 quick_sent register
     </td>
     <td>
      0x004C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q3_WORD1_REG
     </td>
     <td>
      Q3_WORD1 quick_sent register
     </td>
     <td>
      0x0050
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q4_WORD0_REG
      <br/>
      UHCI_REG_Q4_WORD1_REG
     </td>
     <td>
      Q4_WORD0 quick_sent register
      <br/>
      Q4_WORD1 quick_sent register
     </td>
     <td>
      0x0054
      <br/>
      0x0058
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q5_WORD0_REG
     </td>
     <td>
      Q5_WORD0 quick_sent register
     </td>
     <td>
      0x005C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q5_WORD1_REG
     </td>
     <td>
      Q5_WORD1 quick_sent register
     </td>
     <td>
      0x0060
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q6_WORD0_REG
     </td>
     <td>
      Q6_WORD0 quick_sent register
     </td>
     <td>
      0x0064
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_REG_Q6_WORD1_REG
     </td>
     <td>
      Q6_WORD1 quick_sent register
     </td>
     <td>
      0x0068
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_ESC_CONF0_REG
     </td>
     <td>
      Escape sequence configuration register 0
     </td>
     <td>
      0x006C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_ESC_CONF1_REG
     </td>
     <td>
      Escape sequence configuration register 1
     </td>
     <td>
      0x0070
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_ESC_CONF2_REG
     </td>
     <td>
      Escape sequence configuration register 2
     </td>
     <td>
      0x0074
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_ESC_CONF3_REG
     </td>
     <td>
      Escape sequence configuration register 3
     </td>
     <td>
      0x0078
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_PKT_THRES_REG
     </td>
     <td>
      Configuration register for packet length
     </td>
     <td>
      0x007C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI Interrupt Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      UHCI_INT_RAW_REG
     </td>
     <td>
      Raw interrupt status
     </td>
     <td>
      0x0004
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      UHCI_INT_ST_REG
     </td>
     <td>
      Masked interrupt status
     </td>
     <td>
      0x0008
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UHCI_INT_ENA_REG
     </td>
     <td>
      Interrupt enable bits
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      UHCI_INT_CLR_REG
     </td>
     <td>
      Interrupt clear bits
     </td>
     <td>
      0x0010
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      UHCI Status Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      UHCI_STATE0_REG
      <br/>
      UHCI_STATE1_REG
     </td>
     <td>
      UHCI receive status
      <br/>
      UHCI transmit status
     </td>
     <td>
      0x0018
      <br/>
      0x001C
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      UHCI_RX_HEAD_REG
     </td>
     <td>
      UHCI packet header register
     </td>
     <td>
      0x002C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 26
      <br/>
      UART Controller (UART)
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   26.7 Registers
  </h1>
  <p block-type="Text">
   <span id="page-570-0">
   </span>
   The addresses in this section are relative to UART Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <img src="_page_570_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-570-2">
   </span>
   <img src="_page_570_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   UART_RXFIFO_RD_BYTE UART
   <i>
    n
   </i>
   accesses FIFO via this field. (RO)
  </p>
  <h4>
   Register 26.2. UART_MEM_CONF_REG (0x0060)
  </h4>
  <p>
   <span id="page-570-1">
   </span>
   <img src="_page_570_Figure_6.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_RX_SIZE This field is used to configure the amount of RAM allocated for RX FIFO. The default number is 128 bytes. (R/W)
    </li>
    <li block-type="ListItem">
     UART_TX_SIZE This field is used to configure the amount of RAM allocated for TX FIFO. The default number is 128 bytes. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RX_FLOW_THRHD This field is used to configure the maximum amount of data bytes that can be received when hardware flow control works. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RX_TOUT_THRHD This field is used to configure the threshold time that the receiver takes to receive one byte, in the unit of bit time (the time it takes to transfer one bit). The UART_RXFIFO_TOUT_INT interrupt will be triggered when the receiver takes more time to receive one byte with UART RX_TOUT_EN set to 1. (R/W)
    </li>
    <li block-type="ListItem">
     UART_MEM_FORCE_PD Set this bit to force power down UART RAM. (R/W)
    </li>
    <li block-type="ListItem">
     UART_MEM_FORCE_PU Set this bit to force power up UART RAM. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 26.3. UART_INT_RAW_REG (0x0004)
  </h4>
  <p>
   <span id="page-571-0">
   </span>
   <img src="_page_571_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_RXFIFO_FULL_INT_RAW This interrupt raw bit turns to high level when the receiver receives more data than what UART_RXFIFO_FULL_THRHD specifies. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_TXFIFO_EMPTY_INT_RAW This interrupt raw bit turns to high level when the amount of data in TX FIFO is less than what UART_TXFIFO_EMPTY_THRHD specifies. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_PARITY_ERR_INT_RAW This interrupt raw bit turns to high level when the receiver detects a parity error in the data. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_FRM_ERR_INT_RAW This interrupt raw bit turns to high level when the receiver detects a data frame error. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_RXFIFO_OVF_INT_RAW This interrupt raw bit turns to high level when the receiver receives more data than the capacity of RX FIFO. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_DSR_CHG_INT_RAW This interrupt raw bit turns to high level when the receiver detects the edge change of DSRn signal. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_CTS_CHG_INT_RAW This interrupt raw bit turns to high level when the receiver detects the edge change of CTSn signal. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_BRK_DET_INT_RAW This interrupt raw bit turns to high level when the receiver detects a 0 after the stop bit. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_RXFIFO_TOUT_INT_RAW This interrupt raw bit turns to high level when the receiver takes more time than UART_RX_TOUT_THRHD to receive a byte. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_SW_XON_INT_RAW This interrupt raw bit turns to high level when the receiver receives an XON character and UART_SW_FLOW_CON_EN is set to 1. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_SW_XOFF_INT_RAW This interrupt raw bit turns to high level when the receiver receives an XOFF character and UART_SW_FLOW_CON_EN is set to 1. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_GLITCH_DET_INT_RAW This interrupt raw bit turns to high level when the receiver detects a glitch in the middle of a start bit. (R/WTC/SS)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_TX_BRK_DONE_INT_RAW This interrupt raw bit turns to high level when the transmitter completes sending NULL characters, after all data in TX FIFO are sent. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_TX_BRK_IDLE_DONE_INT_RAW This interrupt raw bit turns to high level when the transmitter has kept the shortest duration after sending the last data. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_TX_DONE_INT_RAW This interrupt raw bit turns to high level when the transmitter has sent out all data in FIFO. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_RS485_PARITY_ERR_INT_RAW This interrupt raw bit turns to high level when the receiver detects a parity error from the echo of the transmitter in RS485 mode. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_RS485_FRM_ERR_INT_RAW This interrupt raw bit turns to high level when the receiver detects a data frame error from the echo of the transmitter in RS485 mode. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_RS485_CLASH_INT_RAW This interrupt raw bit turns to high level when a collision is detected between the transmitter and the receiver in RS485 mode. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_AT_CMD_CHAR_DET_INT_RAW This interrupt raw bit turns to high level when the receiver detects the configured UART_AT_CMD_CHAR. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UART_WAKEUP_INT_RAW This interrupt raw bit turns to high level when the input RXD edge changes more times than what (UART_ACTIVE_THRESHOLD + 3) specifies in Light-sleep mode. (R/WTC/SS)
    </li>
   </ul>
  </p>
  <h4>
   Register 26.4. UART_INT_ST_REG (0x0008)
  </h4>
  <p>
   <span id="page-573-0">
   </span>
   <img src="_page_573_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_RXFIFO_FULL_INT_ST This is the status bit for UART_RXFIFO_FULL_INT when UART_RXFIFO_FULL_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_TXFIFO_EMPTY_INT_ST This is the status bit for UART_TXFIFO_EMPTY_INT when UART_TXFIFO_EMPTY_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_PARITY_ERR_INT_ST This is the status bit for UART_PARITY_ERR_INT when UART_PARITY_ERR_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_FRM_ERR_INT_ST This is the status bit for UART_FRM_ERR_INT when UART_FRM_ERR_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_RXFIFO_OVF_INT_ST This is the status bit for UART_RXFIFO_OVF_INT when UART_RXFIFO_OVF_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_DSR_CHG_INT_ST This is the status bit for UART_DSR_CHG_INT when UART_DSR_CHG_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_CTS_CHG_INT_ST This is the status bit for UART_CTS_CHG_INT when UART_CTS_CHG_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_BRK_DET_INT_ST This is the status bit for UART_BRK_DET_INT when UART_BRK_DET_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_RXFIFO_TOUT_INT_ST This is the status bit for UART_RXFIFO_TOUT_INT when UART_RXFIFO_TOUT_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_SW_XON_INT_ST This is the status bit for UART_SW_XON_INT when UART_SW_XON_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_SW_XOFF_INT_ST This is the status bit for UART_SW_XOFF_INT when UART_SW_XOFF_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_GLITCH_DET_INT_ST This is the status bit for UART_GLITCH_DET_INT when UART_GLITCH_DET_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_TX_BRK_DONE_INT_ST This is the status bit for UART_TX_BRK_DONE_INT when UART_TX_BRK_DONE_INT_ENA is set to 1. (RO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_TX_BRK_IDLE_DONE_INT_ST This is the status bit for UART_TX_BRK_IDLE_DONE_INT when UART_TX_BRK_IDLE_DONE_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_TX_DONE_INT_ST This is the status bit for UART_TX_DONE_INT when UART_TX_DONE_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_RS485_PARITY_ERR_INT_ST This is the status bit for UART_RS485_PARITY_ERR_INT when UART_RS485_PARITY_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_RS485_FRM_ERR_INT_ST This is the status bit for UART_RS485_FRM_ERR_INT when UART_RS485_FRM_ERR_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_RS485_CLASH_INT_ST This is the status bit for UART_RS485_CLASH_INT when UART_RS485_CLASH_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_AT_CMD_CHAR_DET_INT_ST This is the status bit for UART_AT_CMD_CHAR_DET_INT when UART_AT_CMD_CHAR_DET_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UART_WAKEUP_INT_ST This is the status bit for UART_WAKEUP_INT when UART_WAKEUP_INT_ENA is set to 1. (RO)
    </li>
   </ul>
  </p>
  <h4>
   <span id="page-575-0">
   </span>
   Register 26.5. UART_INT_ENA_REG (0x000C) (reserved) 0 0 0 0 0 0 0 0 0 0 0 0 31 20 UART_WAKEUP_INT_ENA 0 19 UART_AT_CMD_CHAR_DET_INT_ENA 0 18 UART_RS485_CLASH_INT_ENA 0 17 UART_RS485_FRM_ERR_INT_ENA 0 16 UART_RS485_PARITY_ERR_INT_ENA 0 15 UART_TX_DONE_INT_ENA 0 14 UART_TX_BRK_IDLE_DONE_INT_ENA 0 13 UART_TX_BRK_DONE_INT_ENA 0 12 UART_GLITCH_DET_INT_ENA 0 11 UART_SW_XOFF_INT_ENA 0 10 UART_SW_XON_INT_ENA 0 9 UART_RXFIFO_TOUT_INT_ENA 0 8 UART_BRK_DET_INT_ENA 0 7 UART_CTS_CHG_INT_ENA 0 6 UART_DSR_CHG_INT_ENA 0 5 UART_RXFIFO_OVF_INT_ENA 0 4 UART_FRM_ERR_INT_ENA 0 3 UART_PARITY_ERR_INT_ENA 0 2 UART_TXFIFO_EMPTY_INT_ENA 0 1 UART_RXFIFO_FULL_INT_ENA 0 0 Reset
  </h4>
  <p block-type="Text">
   UART_RXFIFO_FULL_INT_ENA This is the enable bit for UART_RXFIFO_FULL_INT. (R/W) UART_TXFIFO_EMPTY_INT_ENA This is the enable bit for UART_TXFIFO_EMPTY_INT. (R/W) UART_PARITY_ERR_INT_ENA This is the enable bit for UART_PARITY_ERR_INT. (R/W) UART_FRM_ERR_INT_ENA This is the enable bit for UART_FRM_ERR_INT. (R/W) UART_RXFIFO_OVF_INT_ENA This is the enable bit for UART_RXFIFO_OVF_INT. (R/W) UART_DSR_CHG_INT_ENA This is the enable bit for UART_DSR_CHG_INT. (R/W) UART_CTS_CHG_INT_ENA This is the enable bit for UART_CTS_CHG_INT. (R/W) UART_BRK_DET_INT_ENA This is the enable bit for UART_BRK_DET_INT. (R/W) UART_RXFIFO_TOUT_INT_ENA This is the enable bit for UART_RXFIFO_TOUT_INT. (R/W) UART_SW_XON_INT_ENA This is the enable bit for UART_SW_XON_INT. (R/W) UART_SW_XOFF_INT_ENA This is the enable bit for UART_SW_XOFF_INT. (R/W) UART_GLITCH_DET_INT_ENA This is the enable bit for UART_GLITCH_DET_INT. (R/W) UART_TX_BRK_DONE_INT_ENA This is the enable bit for UART_TX_BRK_DONE_INT. (R/W) UART_TX_BRK_IDLE_DONE_INT_ENA This is the enable bit for UART_TX_BRK_IDLE_DONE_INT. (R/W) UART_TX_DONE_INT_ENA This is the enable bit for UART_TX_DONE_INT. (R/W)
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <p block-type="Text">
   Continued from the previous page...
  </p>
  <p block-type="Text">
   UART_RS485_PARITY_ERR_INT_ENA This is the enable bit for UART_RS485_PARITY_ERR_INT. (R/W)
  </p>
  <p block-type="Text">
   UART_RS485_FRM_ERR_INT_ENA This is the enable bit for UART_RS485_PARITY_ERR_INT. (R/W)
  </p>
  <p block-type="Text">
   UART_RS485_CLASH_INT_ENA This is the enable bit for UART_RS485_CLASH_INT. (R/W)
  </p>
  <p block-type="Text">
   UART_AT_CMD_CHAR_DET_INT_ENA This is the enable bit for UART_AT_CMD_CHAR_DET_INT. (R/W)
  </p>
  <p block-type="Text">
   UART_WAKEUP_INT_ENA This is the enable bit for UART_WAKEUP_INT. (R/W)
  </p>
  <h4>
   <span id="page-577-0">
   </span>
   Register 26.6. UART_INT_CLR_REG (0x0010) (reserved) 0 0 0 0 0 0 0 0 0 0 0 0 31 20 UART_WAKEUP_INT_CLR 0 19 UART_AT_CMD_CHAR_DET_INT_CLR 0 18 UART_RS485_CLASH_INT_CLR 0 17 UART_RS485_FRM_ERR_INT_CLR 0 16 UART_RS485_PARITY_ERR_INT_CLR 0 15 UART_TX_DONE_INT_CLR 0 14 UART_TX_BRK_IDLE_DONE_INT_CLR 0 13 UART_TX_BRK_DONE_INT_CLR 0 12 UART_GLITCH_DET_INT_CLR 0 11 UART_SW_XOFF_INT_CLR 0 10 UART_SW_XON_INT_CLR 0 9 UART_RXFIFO_TOUT_INT_CLR 0 8 UART_BRK_DET_INT_CLR 0 7 UART_CTS_CHG_INT_CLR 0 6 UART_DSR_CHG_INT_CLR 0 5 UART_RXFIFO_OVF_INT_CLR 0 4 UART_FRM_ERR_INT_CLR 0 3 UART_PARITY_ERR_INT_CLR 0 2 UART_TXFIFO_EMPTY_INT_CLR 0 1 UART_RXFIFO_FULL_INT_CLR 0 0 Reset
  </h4>
  <p block-type="Text">
   UART_RXFIFO_FULL_INT_CLR Set this bit to clear the UART_THE RXFIFO_FULL_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   UART_TXFIFO_EMPTY_INT_CLR Set this bit to clear the UART_TXFIFO_EMPTY_INT interrupt. (WT) UART_PARITY_ERR_INT_CLR Set this bit to clear the UART_PARITY_ERR_INT interrupt. (WT) UART_FRM_ERR_INT_CLR Set this bit to clear the UART_FRM_ERR_INT interrupt. (WT) UART_RXFIFO_OVF_INT_CLR Set this bit to clear the UART_UART_RXFIFO_OVF_INT interrupt. (WT) UART_DSR_CHG_INT_CLR Set this bit to clear the UART_DSR_CHG_INT interrupt. (WT) UART_CTS_CHG_INT_CLR Set this bit to clear the UART_CTS_CHG_INT interrupt. (WT) UART_BRK_DET_INT_CLR Set this bit to clear the UART_BRK_DET_INT interrupt. (WT) UART_RXFIFO_TOUT_INT_CLR Set this bit to clear the UART_RXFIFO_TOUT_INT interrupt. (WT) UART_SW_XON_INT_CLR Set this bit to clear the UART_SW_XON_INT interrupt. (WT) UART_SW_XOFF_INT_CLR Set this bit to clear the UART_SW_XOFF_INT interrupt. (WT) UART_GLITCH_DET_INT_CLR Set this bit to clear the UART_GLITCH_DET_INT interrupt. (WT) UART_TX_BRK_DONE_INT_CLR Set this bit to clear the UART_TX_BRK_DONE_INT interrupt. (WT) UART_TX_BRK_IDLE_DONE_INT_CLR Set this bit to clear the UART_TX_BRK_IDLE_DONE_INT interrupt. (WT) UART_TX_DONE_INT_CLR Set this bit to clear the UART_TX_DONE_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   UART_RS485_PARITY_ERR_INT_CLR Set this bit to clear the UART_RS485_PARITY_ERR_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <p block-type="Text">
   Continued from the previous page...
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_RS485_FRM_ERR_INT_CLR Set this bit to clear the UART_RS485_FRM_ERR_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     UART_RS485_CLASH_INT_CLR Set this bit to clear the UART_RS485_CLASH_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     UART_AT_CMD_CHAR_DET_INT_CLR Set this bit to clear the UART_AT_CMD_CHAR_DET_INT interrupt. (WT)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   UART_WAKEUP_INT_CLR Set this bit to clear the UART_WAKEUP_INT interrupt. (WT)
  </p>
  <p>
   <span id="page-578-0">
   </span>
   <img src="_page_578_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   UART_CLKDIV The integral part of the frequency divisor. (R/W)
  </p>
  <p block-type="Text">
   UART_CLKDIV_FRAG The fractional part of the frequency divisor. (R/W)
  </p>
  <p block-type="Text">
   Register 26.8. UART_RX_FILT_REG (0x0018)
  </p>
  <p>
   <span id="page-578-1">
   </span>
   <img src="_page_578_Figure_10.jpeg"/>
  </p>
  <p block-type="Text">
   UART_GLITCH_FILT When input pulse width is lower than this value, the pulse is ignored. (R/W)
  </p>
  <p block-type="Text">
   UART_GLITCH_FILT_EN Set this bit to enable RX signal filter. (R/W)
  </p>
  <h4>
   Register 26.9. UART_CONF0_REG (0x0020)
  </h4>
  <p>
   <span id="page-579-0">
   </span>
   <img src="_page_579_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UART_PARITY This bit is used to configure the parity check mode. (R/W)
  </p>
  <p block-type="Text">
   UART_PARITY_EN Set this bit to enable UART parity check. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_BIT_NUM This field is used to set the length of data. (R/W)
    </li>
    <li block-type="ListItem">
     UART_STOP_BIT_NUM This field is used to set the length of stop bit. (R/W)
    </li>
    <li block-type="ListItem">
     UART_SW_RTS This bit is used to configure the software RTS signal which is used in software flow control. (R/W)
    </li>
    <li block-type="ListItem">
     UART_SW_DTR This bit is used to configure the software DTR signal which is used in software flow control. (R/W)
    </li>
    <li block-type="ListItem">
     UART_TXD_BRK Set this bit to enable the transmitter to send NULL characters when the process of sending data is done. (R/W)
    </li>
    <li block-type="ListItem">
     UART_IRDA_DPLX Set this bit to enable IrDA loopback mode. (R/W)
    </li>
    <li block-type="ListItem">
     UART_IRDA_TX_EN This is the start enable bit for IrDA transmitter. (R/W)
    </li>
    <li block-type="ListItem">
     UART_IRDA_WCTL 1: The IrDA transmitter's 11th bit is the same as 10th bit; 0: Set IrDA transmitter's 11th bit to 0. (R/W)
    </li>
    <li block-type="ListItem">
     UART_IRDA_TX_INV Set this bit to invert the level of IrDA transmitter. (R/W)
    </li>
    <li block-type="ListItem">
     UART_IRDA_RX_INV Set this bit to invert the level of IrDA receiver. (R/W)
    </li>
    <li block-type="ListItem">
     UART_LOOPBACK Set this bit to enable UART loopback test mode. (R/W)
    </li>
    <li block-type="ListItem">
     UART_TX_FLOW_EN Set this bit to enable flow control function for the transmitter. (R/W)
    </li>
    <li block-type="ListItem">
     UART_IRDA_EN Set this bit to enable IrDA protocol. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RXFIFO_RST Set this bit to reset the UART RX FIFO. (R/W)
    </li>
    <li block-type="ListItem">
     UART_TXFIFO_RST Set this bit to reset the UART TX FIFO. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RXD_INV Set this bit to invert the level value of UART RXD signal. (R/W)
    </li>
    <li block-type="ListItem">
     UART_CTS_INV Set this bit to invert the level value of UART CTS signal. (R/W)
    </li>
    <li block-type="ListItem">
     UART_DSR_INV Set this bit to invert the level value of UART DSR signal. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Register 26.9. UART_CONF0_REG (0x0020)
  </h4>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_TXD_INV Set this bit to invert the level value of UART TXD signal. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RTS_INV Set this bit to invert the level value of UART RTS signal. (R/W)
    </li>
    <li block-type="ListItem">
     UART_DTR_INV Set this bit to invert the level value of UART DTR signal. (R/W)
    </li>
    <li block-type="ListItem">
     UART_CLK_EN 1: Force clock on for register; 0: Support clock only when application writes registers. (R/W)
    </li>
    <li block-type="ListItem">
     UART_ERR_WR_MASK 1: The receiver stops storing data into FIFO when data is wrong; 0: The receiver stores the data even if the received data is wrong. (R/W)
    </li>
    <li block-type="ListItem">
     UART_AUTOBAUD_EN This is the enable bit for baud rate detection. (R/W)
    </li>
    <li block-type="ListItem">
     UART_MEM_CLK_EN The signal to enable UART RAM clock gating. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-580-0">
   </span>
   <img src="_page_580_Figure_9.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_RXFIFO_FULL_THRHD An UART_RXFIFO_FULL_INT interrupt is generated when the receiver receives more data than the value of this field. (R/W)
    </li>
    <li block-type="ListItem">
     UART_TXFIFO_EMPTY_THRHD An UART_TXFIFO_EMPTY_INT interrupt is generated when the number of data bytes in TX FIFO is less than the value of this field. (R/W)
    </li>
    <li block-type="ListItem">
     UART_DIS_RX_DAT_OVF Disable UART RX data overflow detection. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RX_TOUT_FLOW_DIS Set this bit to stop accumulating idle_cnt when hardware flow control works. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RX_FLOW_EN This is the flow enable bit for UART receiver. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   UART_RX_TOUT_EN This is the enable bit for UART receiver's timeout function. (R/W)
  </p>
  <h4>
   Register 26.11. UART_FLOW_CONF_REG (0x0034)
  </h4>
  <p>
   <span id="page-581-1">
   </span>
   <img src="_page_581_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_SW_FLOW_CON_EN Set this bit to enable software flow control. When UART receives flow control characters XON or XOFF, which can be configured by UART_XON_CHAR or UART_XOFF_CHAR respectively, UART_SW_XON_INT or UART_SW_XOFF_INT interrupts can be triggered if enabled. (R/W)
    </li>
    <li block-type="ListItem">
     UART_XONOFF_DEL Set this bit to remove flow control characters from the received data. (R/W)
    </li>
    <li block-type="ListItem">
     UART_FORCE_XON Set this bit to force the transmitter to send data. (R/W)
    </li>
    <li block-type="ListItem">
     UART_FORCE_XOFF Set this bit to stop the transmitter from sending data. (R/W)
    </li>
    <li block-type="ListItem">
     UART_SEND_XON Set this bit to send an XON character. This bit is cleared by hardware automatically. (R/W/SS/SC)
    </li>
    <li block-type="ListItem">
     UART_SEND_XOFF Set this bit to send an XOFF character. This bit is cleared by hardware automatically. (R/W/SS/SC)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_581_Figure_8.jpeg"/>
  </p>
  <p>
   <span id="page-581-0">
   </span>
   <img src="_page_581_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   UART_ACTIVE_THRESHOLD UART is activated from Light-sleep mode when the input RXD edge changes more times than the value of this field plus 3. (R/W)
  </p>
  <h4>
   Register 26.13. UART_SWFC_CONF0_REG (0x003C)
  </h4>
  <p>
   <span id="page-582-1">
   </span>
   <img src="_page_582_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UART_XOFF_THRESHOLD When the number of data bytes in RX FIFO is more than the value of this field with UART_SW_FLOW_CON_EN set to 1, the transmitter sends an XOFF character. (R/W)
  </p>
  <p block-type="Text">
   UART_XOFF_CHAR This field stores the XOFF flow control character. (R/W)
  </p>
  <p block-type="Text">
   Register 26.14. UART_SWFC_CONF1_REG (0x0040)
  </p>
  <p>
   <span id="page-582-2">
   </span>
   <img src="_page_582_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   UART_XON_THRESHOLD When the number of data bytes in RX FIFO is less than the value of this field with UART_SW_FLOW_CON_EN set to 1, the transmitter sends an XON character. (R/W)
  </p>
  <p block-type="Text">
   UART_XON_CHAR This field stores the XON flow control character. (R/W)
  </p>
  <h4>
   Register 26.15. UART_TXBRK_CONF_REG (0x0044)
  </h4>
  <p>
   <span id="page-582-0">
   </span>
   <img src="_page_582_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   UART_TX_BRK_NUM This field is used to configure the number of 0 to be sent after the process of sending data is done. It is active when UART_TXD_BRK is set to 1. (R/W)
  </p>
  <h4>
   Register 26.16. UART_IDLE_CONF_REG (0x0048)
  </h4>
  <p>
   <span id="page-583-0">
   </span>
   <img src="_page_583_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_RX_IDLE_THRHD A frame end signal is generated when the receiver takes more time to receive one byte data than the value of this field, in the unit of bit time (the time it takes to transfer one bit). (R/W)
    </li>
    <li block-type="ListItem">
     UART_TX_IDLE_NUM This field is used to configure the duration time between transfers, in the unit of bit time (the time it takes to transfer one bit). (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-583-1">
   </span>
   <img src="_page_583_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   UART_RS485_EN Set this bit to choose RS485 mode. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_DL0_EN Configures whether or not to add a turnaround delay of 1 bit before the start bit.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: Not add
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1: Add
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (R/W)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     UART_DL1_EN Configures whether or not to add a turnaround delay of 1 bit after the stop bit.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: Not add
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1: Add
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (R/W)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     UART_RS485TX_RX_EN Set this bit to enable the receiver could receive data when the transmitter is transmitting data in RS485 mode. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RS485RXBY_TX_EN 1: enable RS485 transmitter to send data when RS485 receiver line is busy. (R/W)
    </li>
    <li block-type="ListItem">
     UART_RS485_RX_DLY_NUM This bit is used to delay the receiver's internal data signal. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   UART_RS485_TX_DLY_NUM This field is used to delay the transmitter's internal data signal. (R/W)
  </p>
  <h4>
   Register 26.18. UART_CLK_CONF_REG (0x0078)
  </h4>
  <p>
   <span id="page-584-0">
   </span>
   <img src="_page_584_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UART_SCLK_DIV_B The denominator of the frequency divisor. (R/W)
  </p>
  <p block-type="Text">
   UART_SCLK_DIV_A The numerator of the frequency divisor. (R/W)
  </p>
  <p block-type="Text">
   UART_SCLK_DIV_NUM The integral part of the frequency divisor. (R/W)
  </p>
  <p block-type="Text">
   UART_SCLK_SEL Selects UART clock source. 1: APB_CLK; 2: RC_FAST_CLK; 3: XTAL_CLK. (R/W)
  </p>
  <p block-type="Text">
   UART_SCLK_EN Set this bit to enable UART TX/RX clock. (R/W)
  </p>
  <p block-type="Text">
   UART_RST_CORE Write 1 and then write 0 to this bit, to reset UART TX/RX. (R/W)
  </p>
  <p block-type="Text">
   UART_TX_SCLK_EN Set this bit to enable UART TX clock. (R/W)
  </p>
  <p block-type="Text">
   UART_RX_SCLK_EN Set this bit to enable UART RX clock. (R/W)
  </p>
  <p block-type="Text">
   Register 26.19. UART_STATUS_REG (0x001C)
  </p>
  <p>
   <span id="page-584-1">
   </span>
   <img src="_page_584_Figure_11.jpeg"/>
  </p>
  <p block-type="Text">
   UART_RXFIFO_CNT Stores the number of valid data bytes in RX FIFO. (RO)
  </p>
  <p block-type="Text">
   UART_DSRN This bit represents the level of the internal UART DSR signal. (RO)
  </p>
  <p block-type="Text">
   UART_CTSN This bit represents the level of the internal UART CTS signal. (RO)
  </p>
  <p block-type="Text">
   UART_RXD This bit represents the level of the internal UART RXD signal. (RO)
  </p>
  <p block-type="Text">
   UART_TXFIFO_CNT Stores the number of data bytes in TX FIFO. (RO)
  </p>
  <p block-type="Text">
   UART_DTRN This bit represents the level of the internal UART DTR signal. (RO)
  </p>
  <p block-type="Text">
   UART_RTSN This bit represents the level of the internal UART RTS signal. (RO)
  </p>
  <p block-type="Text">
   UART_TXD This bit represents the level of the internal UART TXD signal. (RO)
  </p>
  <h4>
   Register 26.20. UART_MEM_TX_STATUS_REG (0x0064)
  </h4>
  <p>
   <span id="page-585-0">
   </span>
   <img src="_page_585_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UART_APB_TX_WADDR This field stores the offset address in TX FIFO when software writes TX FIFO via APB. (RO)
  </p>
  <p block-type="Text">
   UART_TX_RADDR This field stores the offset address in TX FIFO when TX FSM reads data via Tx_FIFO_Ctrl. (RO)
  </p>
  <h4>
   Register 26.21. UART_MEM_RX_STATUS_REG (0x0068)
  </h4>
  <p>
   <span id="page-585-1">
   </span>
   <img src="_page_585_Figure_5.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_APB_RX_RADDR This field stores the offset address in RX FIFO when software reads data from RX FIFO via APB. UART0 is 0x200. UART1 is 0x280. (RO)
    </li>
    <li block-type="ListItem">
     UART_RX_WADDR This field stores the offset address in RX FIFO when Rx_FIFO_Ctrl writes RX FIFO. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-585-2">
   </span>
   <img src="_page_585_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   UART_ST_URX_OUT This is the status field of the receiver. (RO)
  </p>
  <p block-type="Text">
   UART_ST_UTX_OUT This is the status field of the transmitter. (RO)
  </p>
  <p>
   <span id="page-586-0">
   </span>
   <img src="_page_586_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   UART_LOWPULSE_MIN_CNT This field stores the value of the minimum duration time of the low level pulse, in the unit of APB_CLK cycles. It is used in baud rate detection. (RO)
  </p>
  <h4>
   Register 26.24. UART_HIGHPULSE_REG (0x002C)
  </h4>
  <p>
   <span id="page-586-1">
   </span>
   <img src="_page_586_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   UART_HIGHPULSE_MIN_CNT This field stores the value of the maximum duration time for the high level pulse, in the unit of APB_CLK cycles. It is used in baud rate detection. (RO)
  </p>
  <p>
   <span id="page-586-2">
   </span>
   <img src="_page_586_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   UART_RXD_EDGE_CNT This field stores the count of RXD edge change. It is used in baud rate detection. (RO)
  </p>
  <p>
   <img src="_page_587_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-587-0">
   </span>
   <img src="_page_587_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UART_POSEDGE_MIN_CNT This field stores the minimal input clock count between two positive edges. It is used in baud rate detection. (RO)
  </p>
  <p>
   <img src="_page_587_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-587-1">
   </span>
   <img src="_page_587_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   UART_NEGEDGE_MIN_CNT This field stores the minimal input clock count between two negative edges. It is used in baud rate detection. (RO)
  </p>
  <p>
   <span id="page-587-2">
   </span>
   <img src="_page_587_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   UART_PRE_IDLE_NUM This field is used to configure the idle duration time before the first AT_CMD is received by the receiver, in the unit of bit time (the time it takes to transfer one bit). (R/W)
  </p>
  <p>
   <span id="page-588-1">
   </span>
   <img src="_page_588_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   UART_POST_IDLE_NUM This field is used to configure the duration time between the last AT_CMD and the next data byte, in the unit of bit time (the time it takes to transfer one bit). (R/W)
  </p>
  <h4>
   Register 26.30. UART_AT_CMD_GAPTOUT_REG (0x0058)
  </h4>
  <p>
   <span id="page-588-0">
   </span>
   <img src="_page_588_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   UART_RX_GAP_TOUT This field is used to configure the duration time between the AT_CMD characters, in the unit of bit time (the time it takes to transfer one bit). (R/W)
  </p>
  <h4>
   Register 26.31. UART_AT_CMD_CHAR_REG (0x005C)
  </h4>
  <p>
   <span id="page-588-2">
   </span>
   <img src="_page_588_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   UART_AT_CMD_CHAR This field is used to configure the content of AT_CMD character. (R/W)
  </p>
  <p block-type="Text">
   UART_CHAR_NUM This field is used to configure the number of continuous AT_CMD characterss received by the receiver. (R/W)
  </p>
  <h4>
   Register 26.32. UART_DATE_REG (0x007C)
  </h4>
  <p>
   <span id="page-589-1">
   </span>
   <img src="_page_589_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UART_DATE This is the version control register. (R/W)
  </p>
  <p>
   <img src="_page_589_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-589-0">
   </span>
   <img src="_page_589_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   UART_ID This field is used to configure the UART_ID. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UART_UPDATE_CTRL This bit is used to control register synchronization mode. This bit must be cleared before writing 1 to UART_REG_UPDATE to synchronize configured values to UART Core's clock domain. (R/W)
    </li>
    <li block-type="ListItem">
     UART_REG_UPDATE When this bit is set to 1 by software, registers are synchronized to UART Core's clock domain. This bit is cleared by hardware after synchronization is done. (R/W/SC)
    </li>
   </ul>
  </p>
  <h4>
   Register 26.34. UHCI_CONF0_REG (0x0000)
  </h4>
  <p>
   <span id="page-590-0">
   </span>
   <img src="_page_590_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_TX_RST Write 1, then write 0 to this bit to reset decode state machine. (R/W)
  </p>
  <p block-type="Text">
   UHCI_RX_RST Write 1, then write 0 to this bit to reset encode state machine. (R/W)
  </p>
  <p block-type="Text">
   UHCI_UART0_CE Set this bit to link up UHCI and UART0. (R/W)
  </p>
  <p block-type="Text">
   UHCI_UART1_CE Set this bit to link up UHCI and UART1. (R/W)
  </p>
  <p block-type="Text">
   UHCI_SEPER_EN Set this bit to separate the data frame using a special character. (R/W)
  </p>
  <p block-type="Text">
   UHCI_HEAD_EN Set this bit to encode the data packet with a formatting header. (R/W)
  </p>
  <p block-type="Text">
   UHCI_CRC_REC_EN Set this bit to enable UHCI to receive the 16 bit CRC. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_UART_IDLE_EOF_EN If this bit is set to 1, UHCI will end the payload receiving process when UART has been in idle state. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_LEN_EOF_EN If this bit is set to 1, UHCI decoder stops receiving payload data when the number of received data bytes has reached the specified value. The value is payload length indicated by UHCI packet header when UHCI_HEAD_EN is 1 or the value is configuration value when UHCI_HEAD_EN is 0. If this bit is set to 0, UHCI decoder stops receiving payload data when 0xC0 has been received. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_ENCODE_CRC_EN Set this bit to enable data integrity check by appending a 16 bit CCITT-CRC to end of the payload. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_CLK_EN 1: Force clock on for register; 0: Support clock only when application writes registers. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_UART_RX_BRK_EOF_EN If this bit is set to 1, UHCI will end payload receive process when NULL frame is received by UART. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-591-0">
   </span>
   <img src="_page_591_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_CHECK_SUM_EN This is the enable bit to check header checksum when UHCI receives a data packet. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_CHECK_SEQ_EN This is the enable bit to check sequence number when UHCI receives a data packet. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_CRC_DISABLE Set this bit to support CRC calculation. Data Integrity Check Present bit in UHCI packet frame should be 1. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_SAVE_HEAD Set this bit to save the packet header when UHCI receives a data packet. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_TX_CHECK_SUM_RE Set this bit to encode the data packet with a checksum. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_TX_ACK_NUM_RE Set this bit to encode the data packet with an acknowledgment when a reliable packet is to be transmitted. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_WAIT_SW_START The UHCI der will jump to ST_SW_WAIT status if this bit is set to 1. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_SW_START If current UHCI_ENCODE_STATE is ST_SW_WAIT, the UHCI will start to send data packet out when this bit is set to 1. (R/W/SC)
    </li>
   </ul>
  </p>
  <h4>
   Register 26.36. UHCI_ESCAPE_CONF_REG (0x0020)
  </h4>
  <p>
   <span id="page-592-0">
   </span>
   <img src="_page_592_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_TX_C0_ESC_EN Set this bit to decode character 0xC0 when DMA receives data. (R/W)
  </p>
  <p block-type="Text">
   UHCI_TX_DB_ESC_EN Set this bit to decode character 0xDB when DMA receives data. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_TX_11_ESC_EN Set this bit to decode flow control character 0x11 when DMA receives data. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_TX_13_ESC_EN Set this bit to decode flow control character 0x13 when DMA receives data. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_RX_C0_ESC_EN Set this bit to replace 0xC0 by special characters when DMA sends data. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_RX_DB_ESC_EN Set this bit to replace 0xDB by special characters when DMA sends data. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_RX_11_ESC_EN Set this bit to replace flow control character 0x11 by special characters when DMA sends data. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_RX_13_ESC_EN Set this bit to replace flow control character 0x13 by special characters when DMA sends data. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 26.37. UHCI_HUNG_CONF_REG (0x0024)
  </h4>
  <p>
   <span id="page-593-0">
   </span>
   <img src="_page_593_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_TXFIFO_TIMEOUT This field stores the timeout value. UHCI will produce the UHCI_TX_HUNG_INT interrupt when DMA takes more time to receive data. (R/W)
  </p>
  <p block-type="Text">
   UHCI_TXFIFO_TIMEOUT_SHIFT This field is used to configure the maximum tick count. (R/W)
  </p>
  <p block-type="Text">
   UHCI_TXFIFO_TIMEOUT_ENA This is the enable bit for TX FIFO receive timeout. (R/W)
  </p>
  <p block-type="Text">
   UHCI_RXFIFO_TIMEOUT This field stores the timeout value. UHCI will produce the UHCI_RX_HUNG_INT interrupt when DMA takes more time to read data from RAM. (R/W)
  </p>
  <p block-type="Text">
   UHCI_RXFIFO_TIMEOUT_SHIFT This field is used to configure the maximum tick count. (R/W) UHCI_RXFIFO_TIMEOUT_ENA This is the enable bit for DMA send timeout. (R/W)
  </p>
  <p block-type="Text">
   Register 26.38. UHCI_ACK_NUM_REG (0x0028)
  </p>
  <p>
   <span id="page-593-1">
   </span>
   <img src="_page_593_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_ACK_NUM This is the ACK number used in software flow control. (R/W)
  </p>
  <p block-type="Text">
   UHCI_ACK_NUM_LOAD Set this bit to 1, and the value configured by UHCI_ACK_NUM would be loaded. (WT)
  </p>
  <p>
   <span id="page-594-0">
   </span>
   <img src="_page_594_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   Register 26.39. UHCI_QUICK_SENT_REG (0x0030)
  </p>
  <p block-type="Text">
   UHCI_SINGLE_SEND_NUM This field is used to specify the single_send mode. (R/W)
  </p>
  <p block-type="Text">
   UHCI_SINGLE_SEND_EN Set this bit to enable single_send mode to send short packets. (R/W/SC)
  </p>
  <p block-type="Text">
   UHCI_ALWAYS_SEND_NUM This field is used to specify the always_send mode. (R/W)
  </p>
  <p block-type="Text">
   UHCI_ALWAYS_SEND_EN Set this bit to enable always_send mode to send short packets. (R/W)
  </p>
  <p>
   <span id="page-594-1">
   </span>
   <img src="_page_594_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q0_WORD0 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-594-2">
   </span>
   <img src="_page_594_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q0_WORD1 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-595-0">
   </span>
   <img src="_page_595_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q1_WORD0 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-595-1">
   </span>
   <img src="_page_595_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q1_WORD1 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-595-2">
   </span>
   <img src="_page_595_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q2_WORD0 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-596-0">
   </span>
   <img src="_page_596_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q2_WORD1 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-596-1">
   </span>
   <img src="_page_596_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q3_WORD0 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-596-2">
   </span>
   <img src="_page_596_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q3_WORD1 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-597-0">
   </span>
   <img src="_page_597_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q4_WORD0 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-597-1">
   </span>
   <img src="_page_597_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q4_WORD1 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-597-2">
   </span>
   <img src="_page_597_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q5_WORD0 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-598-0">
   </span>
   <img src="_page_598_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q5_WORD1 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-598-1">
   </span>
   <img src="_page_598_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q6_WORD0 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <p>
   <span id="page-598-2">
   </span>
   <img src="_page_598_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEND_Q6_WORD1 This register is used as a quick_sent register when mode is specified by UHCI_ALWAYS_SEND_NUM or UHCI_SINGLE_SEND_NUM. (R/W)
  </p>
  <h4>
   Register 26.54. UHCI_ESC_CONF0_REG (0x006C)
  </h4>
  <p>
   <span id="page-599-0">
   </span>
   <img src="_page_599_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_SEPER_CHAR This field is used to define separators to encode data packets. The default value is 0xC0. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_SEPER_ESC_CHAR0 This field is used to define the first character of SLIP escape sequence. The default value is 0xDB. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_SEPER_ESC_CHAR1 This field is used to define the second character of SLIP escape sequence. The default value is 0xDC. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-599-1">
   </span>
   <img src="_page_599_Figure_5.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_ESC_SEQ0 This field is used to define a character that need to be encoded. The default value is 0xDB that used as the first character of SLIP escape sequence. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_ESC_SEQ0_CHAR0 This field is used to define the first character of SLIP escape sequence. The default value is 0xDB. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_ESC_SEQ0_CHAR1 This field is used to define the second character of SLIP escape sequence. The default value is 0xDD. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 26.56. UHCI_ESC_CONF2_REG (0x0074)
  </h4>
  <p>
   <span id="page-600-0">
   </span>
   <img src="_page_600_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_ESC_SEQ1 This field is used to define a character that need to be encoded. The default value is 0x11 that used as a flow control character. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_ESC_SEQ1_CHAR0 This field is used to define the first character of SLIP escape sequence. The default value is 0xDB. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_ESC_SEQ1_CHAR1 This field is used to define the second character of SLIP escape sequence. The default value is 0xDE. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-600-1">
   </span>
   <img src="_page_600_Figure_5.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_ESC_SEQ2 This field is used to define a character that need to be decoded. The default value is 0x13 that used as a flow control character. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_ESC_SEQ2_CHAR0 This field is used to define the first character of SLIP escape sequence. The default value is 0xDB. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_ESC_SEQ2_CHAR1 This field is used to define the second character of SLIP escape sequence. The default value is 0xDF. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 26.58. UHCI_PKT_THRES_REG (0x007C)
  </h4>
  <p>
   <span id="page-601-0">
   </span>
   <img src="_page_601_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_PKT_THRS This field is used to configure the maximum value of the packet length when UHCI_HEAD_EN is 0. (R/W)
  </p>
  <h4>
   Register 26.59. UHCI_INT_RAW_REG (0x0004)
  </h4>
  <p>
   <span id="page-602-0">
   </span>
   <img src="_page_602_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_RX_START_INT_RAW This is the interrupt raw bit for UHCI_RX_START_INT interrupt. The interrupt is triggered when a separator has been sent. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UHCI_TX_START_INT_RAW This is the interrupt raw bit for UHCI_TX_START_INT interrupt. The interrupt is triggered when UHCI detects a separator. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UHCI_RX_HUNG_INT_RAW This is the interrupt raw bit for UHCI_RX_HUNG_INT interrupt. The interrupt is triggered when UHCI takes more time to receive data than configure value. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UHCI_TX_HUNG_INT_RAW This is the interrupt raw bit for UHCI_TX_HUNG_INT interrupt. The interrupt is triggered when UHCI takes more time to read data from RAM than the configured value. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UHCI_SEND_S_REG_Q_INT_RAW This is the interrupt raw bit for UHCI_SEND_S_REG_Q_INT interrupt. The interrupt is triggered when UHCI has sent out a short packet using single_send mode. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UHCI_SEND_A_REG_Q_INT_RAW This is the interrupt raw bit for UHCI_SEND_A_REG_Q_INT interrupt. The interrupt is triggered when UHCI has sent out a short packet using always_send mode. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UHCI_OUT_EOF_INT_RAW This is the interrupt raw bit for UHCI_OUT_EOF_INT interrupt. The interrupt is triggered when there are some errors in EOF in the transmit descriptors. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     UHCI_APP_CTRL0_INT_RAW This is the interrupt raw bit for UHCI_APP_CTRL0_INT interrupt. The interrupt is triggered when UHCI_APP_CTRL0_IN_SET is set. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_APP_CTRL1_INT_RAW This is the interrupt raw bit for UHCI_APP_CTRL1_INT interrupt. The interrupt is triggered when UHCI_APP_CTRL1_IN_SET is set. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-603-0">
   </span>
   <img src="_page_603_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_RX_START_INT_ST This is the masked interrupt bit for UHCI_RX_START_INT interrupt when UHCI_RX_START_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UHCI_TX_START_INT_ST This is the masked interrupt bit for UHCI_TX_START_INT interrupt when UHCI_TX_START_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UHCI_RX_HUNG_INT_ST This is the masked interrupt bit for UHCI_RX_HUNG_INT interrupt when UHCI_RX_HUNG_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UHCI_TX_HUNG_INT_ST This is the masked interrupt bit for UHCI_TX_HUNG_INT interrupt when UHCI_TX_HUNG_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UHCI_SEND_S_REG_Q_INT_ST This is the masked interrupt bit for UHCI_SEND_S_REG_Q_INT interrupt when UHCI_SEND_S_REG_Q_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UHCI_SEND_A_REG_Q_INT_ST This is the masked interrupt bit for UHCI_SEND_A_REG_Q_INT interrupt when UHCI_SEND_A_REG_Q_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UHCI_OUTLINK_EOF_ERR_INT_ST This is the masked interrupt bit for UHCI_OUTLINK_EOF_ERR_INT interrupt when UHCI_OUTLINK_EOF_ERR_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UHCI_APP_CTRL0_INT_ST This is the masked interrupt bit for UHCI_APP_CTRL0_INT interrupt when UHCI_APP_CTRL0_INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     UHCI_APP_CTRL1_INT_ST This is the masked interrupt bit for UHCI_APP_CTRL1_INT interrupt when UHCI_APP_CTRL1_INT_ENA is set to 1. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 26.61. UHCI_INT_ENA_REG (0x000C)
  </h4>
  <p>
   <span id="page-604-0">
   </span>
   <img src="_page_604_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_RX_START_INT_ENA This is the interrupt enable bit for UHCI_RX_START_INT interrupt. (R/W)
  </p>
  <p block-type="Text">
   UHCI_TX_START_INT_ENA This is the interrupt enable bit for UHCI_TX_START_INT interrupt. (R/W)
  </p>
  <p block-type="Text">
   UHCI_RX_HUNG_INT_ENA This is the interrupt enable bit for UHCI_RX_HUNG_INT interrupt. (R/W)
  </p>
  <p block-type="Text">
   UHCI_TX_HUNG_INT_ENA This is the interrupt enable bit for UHCI_TX_HUNG_INT interrupt. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     UHCI_SEND_S_REG_Q_INT_ENA This is the interrupt enable bit for UHCI_SEND_S_REG_Q_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_SEND_A_REG_Q_INT_ENA This is the interrupt enable bit for UHCI_SEND_A_REG_Q_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_OUTLINK_EOF_ERR_INT_ENA This is the interrupt enable bit for UHCI_OUTLINK_EOF_ERR_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_APP_CTRL0_INT_ENA This is the interrupt enable bit for UHCI_APP_CTRL0_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     UHCI_APP_CTRL1_INT_ENA This is the interrupt enable bit for UHCI_APP_CTRL1_INT interrupt. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-605-0">
   </span>
   <img src="_page_605_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_605_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-605-1">
   </span>
   <img src="_page_605_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_RX_ERR_CAUSE This field indicates the error type when DMA has received a packet with error. 3'b001: Checksum error in the HCI packet; 3'b010: Sequence number error in the HCI packet; 3'b011: CRC bit error in the HCI packet; 3'b100: 0xC0 is found but the received the HCI packet is not end; 3'b101: 0xC0 is not found when the HCI packet has been received; 3'b110: CRC check error. (RO)
  </p>
  <p block-type="Text">
   UHCI_DECODE_STATE UHCI decoder status. (RO)
  </p>
  <p>
   <img src="_page_606_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_606_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-606-0">
   </span>
   <img src="_page_606_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   UHCI_DATE This is the version control register. (R/W)
  </p>
  <h1>
   <span id="page-607-3">
   </span>
   <span id="page-607-0">
   </span>
   Chapter 27
  </h1>
  <h1>
   SPI Controller (SPI)
  </h1>
  <h1>
   27.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-607-1">
   </span>
   The Serial Peripheral Interface (SPI) is a synchronous serial interface useful for communication with external peripherals. The ESP32-C3 chip integrates three SPI controllers:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI0,
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI1,
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     General Purpose SPI2 (GP-SPI2).
    </li>
   </ul>
  </p>
  <p block-type="Text">
   SPI0 and SPI1 controllers are primarily reserved for internal use. This chapter mainly focuses on the GP-SPI2 controller.
  </p>
  <h1>
   27.2 Glossary
  </h1>
  <p block-type="Text">
   <span id="page-607-2">
   </span>
   To better illustrate the functions of GP-SPI2, the following terms are used in this chapter.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      To better illustrate the functions of GP-SPI2, the following terms are used in this chapter.
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Master Mode
     </th>
     <th>
      GP-SPI2 acts as an SPI master and initiates SPI transactions.
     </th>
    </tr>
    <tr>
     <th>
      Slave Mode
     </th>
     <th>
      GP-SPI2 acts as an SPI slave and transfers data with its master
     </th>
    </tr>
    <tr>
     <th>
      MISO
     </th>
     <th>
      when its CS is asserted.
      <br/>
      Master in, slave out, data transmission from a slave to a master.
     </th>
    </tr>
    <tr>
     <th>
      MOSI
     </th>
     <th>
      Master out, slave in, data transmission from a master to a slave
     </th>
    </tr>
    <tr>
     <th>
      Transaction
     </th>
     <th>
      One instance of a master asserting a CS line, transferring data to
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      and from a slave, and de-asserting the CS line. Transactions are
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      atomic, which means they can never be interrupted by another
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      transaction.
     </th>
    </tr>
    <tr>
     <th>
      SPI Transfer
     </th>
     <th>
      The whole process of an SPI master exchanges data with a slave.
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      One SPI transfer consists of one or more SPI transactions.
     </th>
    </tr>
    <tr>
     <th>
      Single Transfer
     </th>
     <th>
      An SPI transfer consists of only one transaction.
     </th>
    </tr>
    <tr>
     <th>
      CPU-Controlled Transfer
     </th>
     <th>
      A data transfer happens between CPU buffer SPI_W0_REG ~
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      SPI_W15_REG and SPI peripheral.
     </th>
    </tr>
    <tr>
     <th>
      DMA-Controlled Transfer
     </th>
     <th>
      A data transfer happens between DMA and SPI peripheral, con
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      trolled by DMA engine.
     </th>
    </tr>
    <tr>
     <th>
      Configurable Segmented Transfer
     </th>
     <th>
      A data transfer controlled by DMA in SPI master mode.
      <br/>
      Such
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      transfer consists of multiple transactions (segments), and each
     </th>
    </tr>
    <tr>
     <th>
      Slave Segmented Transfer
     </th>
     <th>
      of transactions can be configured independently.
      <br/>
      A data transfer controlled by DMA in SPI slave mode. Such transfer
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Full-duplex
     </th>
     <th>
      The sending line and receiving line between the master and the
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      slave are independent. Sending data and receiving data happen
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      at the same time.
     </th>
    </tr>
    <tr>
     <th>
      Half-duplex
     </th>
     <th>
      Only one side, the master or the slave, sends data first, and the
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      other side receives data. Sending data and receiving data can not
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      happen at the same time.
     </th>
    </tr>
    <tr>
     <th>
      4-line full-duplex
     </th>
     <th>
      4-line here means: clock line, CS line, and two data lines. The two
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      data lines can be used to send or receive data simultaneously.
     </th>
    </tr>
    <tr>
     <th>
      4-line half-duplex
     </th>
     <th>
      4-line here means: clock line, CS line, and two data lines.
      <br/>
      The
     </th>
    </tr>
    <tr>
     <th>
      3-line half-duplex
     </th>
     <th>
      two data lines can not be used simultaneously.
      <br/>
      3-line here means: clock line, CS line, and one data line. The data
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      line is used to transmit or receive data.
     </th>
    </tr>
    <tr>
     <th>
      1-bit SPI
     </th>
     <th>
      In one clock cycle, one bit can be transferred.
     </th>
    </tr>
    <tr>
     <th>
      (2-bit) Dual SPI
     </th>
     <th>
      In one clock cycle, two bits can be transferred.
     </th>
    </tr>
    <tr>
     <th>
      Dual Output Read
     </th>
     <th>
      A data mode of Dual SPI. In one clock cycle, one bit of a com
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      mand, or one bit of an address, or two bits of data can be trans
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      ferred.
     </th>
    </tr>
    <tr>
     <th>
      Dual I/O Read
     </th>
     <th>
      Another data mode of Dual SPI. In one clock cycle, one bit of a
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      command, or two bits of an address, or two bits of data can be
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      transferred.
     </th>
    </tr>
    <tr>
     <th>
      (4-bit) Quad SPI
     </th>
     <th>
      In one clock cycle, four bits can be transferred.
     </th>
    </tr>
    <tr>
     <th>
      Quad Output Read
     </th>
     <th>
      A data mode of Quad SPI. In one clock cycle, one bit of a com
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      mand, or one bit of an address, or four bits of data can be trans
     </th>
    </tr>
    <tr>
     <th>
      Quad I/O Read
     </th>
     <th>
      ferred.
      <br/>
      Another data mode of Quad SPI. In one clock cycle, one bit of a
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      command, or four bits of an address, or four bits of data can be
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      transferred.
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <h1>
   27.3 Features
  </h1>
  <p block-type="Text">
   <span id="page-608-0">
   </span>
   Some of the key features of GP-SPI2 are:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Master and slave modes
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Half- and full-duplex communications
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU- and DMA-controlled transfers
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Various data modes:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1-bit SPI mode
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2-bit Dual SPI mode
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       4-bit Quad SPI mode
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       QPI mode
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable module clock frequency:
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 609
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     Master: up to 80 MHz
    </li>
    <li block-type="ListItem">
     Slave: up to 60 MHz
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable data length:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       CPU-controlled transfer in master mode or in slave mode: 1 ~ 64 B
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       DMA-controlled single transfer in master mode: 1 ~ 32 KB
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       DMA-controlled configurable segmented transfer in master mode: data length is unlimited
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       DMA-controlled single transfer or segmented transfer in slave mode: data length is unlimited
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable bit read/write order
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Independent interrupts for CPU-controlled transfer and DMA-controlled transfer
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable clock polarity and phase
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Four SPI clock modes: mode 0 ~ mode 3
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Six CS lines in master mode: CS0 ~ CS5
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Able to communicate with SPI devices, such as a sensor, a screen controller, as well as a flash or RAM chip
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-609-0">
   </span>
   27.4 Architectural Overview
  </h1>
  <p>
   <span id="page-609-3">
   </span>
   <img src="_page_609_Figure_14.jpeg"/>
  </p>
  <p>
   <img src="_page_609_Figure_15.jpeg"/>
  </p>
  <p block-type="Text">
   Figure 27.4-1 shows an overview of SPI module. GP-SPI2 exchanges data with SPI devices by the following ways:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU-controlled transfer: CPU ←&gt; GP-SPI2 ←&gt; SPI devices
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-609-3">
      DMA-c
     </a>
     ontrolled transfer: GDMA ←&gt; GP-SPI2 ←&gt; SPI devices
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The signals for GP-SPI2 are prefixed with "FSPI" (Fast SPI). FSPI bus signals are routed to GPIO pins via either GPIO matrix or IO MUX. For more information, see Chapter 5
   <i>
    IO MUX and GPIO Matrix (GPIO, IO MUX)
   </i>
   .
  </p>
  <h1>
   <span id="page-609-2">
   </span>
   <span id="page-609-1">
   </span>
   27.5 Functional Description
  </h1>
  <h1>
   27.5.1 Data Modes
  </h1>
  <p block-type="Text">
   GP-SPI2 can be configured as either a master or a slave to communicate with other SPI devices in the following data modes, see Table 27.5-1.
  </p>
  <span id="page-610-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th colspan="2">
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="2">
      Table 27.5-1. Data Modes Supported by GP-SPI2
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Supported Mode
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      CMD State
     </td>
     <td>
      Address State
     </td>
     <td>
      Data State
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      1-bit SPI
      <br/>
      Dual SPI
     </td>
     <td>
     </td>
     <td>
      1-bit
     </td>
     <td>
      1-bit
     </td>
     <td>
      1-bit
     </td>
    </tr>
    <tr>
     <td>
      Dual Output Read
      <br/>
      Dual I/O Read
     </td>
     <td>
      1-bit
      <br/>
      1-bit
     </td>
     <td>
      1-bit
      <br/>
      2-bit
     </td>
     <td>
      2-bit
      <br/>
      2-bit
     </td>
    </tr>
    <tr>
     <td colspan="2">
      Quad Output Read
     </td>
     <td>
      1-bit
     </td>
     <td>
      1-bit
     </td>
     <td>
      4-bit
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 27.5-1. Data Modes Supported by GP-SPI2
  </p>
  <p block-type="Text">
   For the states can be used in
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     master mode, see Section 27.5.8.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     slave mode, see Section 27.5.9.
    </li>
   </ul>
  </p>
  <h1>
   27.5.2 FSPI Bus Sign
   <a href="#page-620-0">
    al Ma
   </a>
   pping
  </h1>
  <p block-type="Text">
   <span id="page-610-2">
   </span>
   <span id="page-610-0">
   </span>
   The mapping of FSPI bus sign
   <a href="#page-632-0">
    als and
   </a>
   the functional description of the signals are shown in Table 27.5-2 and in Table 27.5-3, respectively. The signals in one line in Table 27.5-2 corresponds to each other. For example, the signal FSPID is connected to MOSI in GP-SPI2 full-duplex communication, and FSPIQ to MISO. You can take Figure 27.5-6 as an example.
  </p>
  <table>
   <tbody>
    <tr>
     <th colspan="2">
      Table 27.5-2. Mapping of FSPI Bus Signals
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Standard SPI Protocol
     </th>
     <th>
      Extended SPI Protocol
     </th>
    </tr>
    <tr>
     <th>
      Full-Duplex
     </th>
     <th>
      Half-Duplex
     </th>
     <th>
      FSPI Bus
     </th>
    </tr>
    <tr>
     <td>
      SPI Signal
     </td>
     <td>
      SPI Signal
     </td>
     <td>
      Signal
     </td>
    </tr>
    <tr>
     <td>
      MOSI
     </td>
     <td>
      MOSI
     </td>
     <td>
      FSPID
     </td>
    </tr>
    <tr>
     <td>
      MISO
     </td>
     <td>
      (MISO)
     </td>
     <td>
      FSPIQ
     </td>
    </tr>
    <tr>
     <td>
      CS
     </td>
     <td>
      CS
     </td>
     <td>
      FSPICS0 ~ 5
     </td>
    </tr>
    <tr>
     <td>
      CLK
     </td>
     <td>
      CLK
     </td>
     <td>
      FSPICLK
     </td>
    </tr>
    <tr>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      FSPIWP
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 27.5-2. Mapping
   <a href="#page-610-2">
    of FSPI
   </a>
   Bus Signals
  </p>
  <p>
   Table 27.5-3. Functional Description of FSPI Bus Signals
  </p>
  <span id="page-610-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      FSPI Bus Signal
     </td>
     <td>
      Function
     </td>
    </tr>
    <tr>
     <td>
      FSPID
     </td>
     <td>
      MOSI/SIO0 (serial data input and output, bit0)
     </td>
    </tr>
    <tr>
     <td>
      FSPIQ
      <br/>
      FSPIWP
     </td>
     <td>
      MISO/SIO1 (serial data input and output, bit1)
      <br/>
      SIO2 (serial data input and output, bit2)
     </td>
    </tr>
    <tr>
     <td>
      FSPIHD
     </td>
     <td>
      SIO3 (serial data input and output, bit3)
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      <b>
       FSPICLK
      </b>
     </th>
     <th>
      Input and output clock in master/slave mode
     </th>
    </tr>
    <tr>
     <td>
      <b>
       FSPICSO
      </b>
     </td>
     <td>
      Input and output CS signal in master/slave mode
     </td>
    </tr>
    <tr>
     <td>
      <math>
       FSPICS1 \sim 5
      </math>
     </td>
     <td>
      Output CS signal in master mode
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Figure 27.5-4 shows the signals used in various SPI modes.
  </p>
  <span id="page-612-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th colspan="6">
      le
      <br/>
      ls
      <br/>
      d
      <br/>
      in
      <br/>
      s
     </th>
     <th colspan="4">
      I
     </th>
    </tr>
    <tr>
     <th>
      ig
      <br/>
      l
      <br/>
      F
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      S
      <br/>
      na
     </th>
     <th>
      1
      <br/>
      F
      <br/>
      D
      <br/>
      3-
     </th>
     <th>
      b
      <br/>
      i
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      1-
      <br/>
      t
      <br/>
      2
      <br/>
      l
      <br/>
      ine
      <br/>
      H
      <br/>
      D
      <br/>
      4-
     </th>
     <th>
      Ma
      <br/>
      te
      <br/>
      s
      <br/>
      2-
      <br/>
      l
      <br/>
      ine
      <br/>
      H
      <br/>
      D
     </th>
     <th>
      de
      <br/>
      Mo
      <br/>
      r
      <br/>
      b
      <br/>
      i
      <br/>
      l
      <br/>
      b
      <br/>
      Du
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      t
      <br/>
      4-
      <br/>
      a
     </th>
     <th>
      i
      <br/>
      d
      <br/>
      Qu
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      Q
      <br/>
      P
      <br/>
      I
      <br/>
      t
      <br/>
      a
     </th>
     <th>
      F
      <br/>
      D
     </th>
     <th>
      1-
      <br/>
      l
      <br/>
      ine
      <br/>
      3-
     </th>
     <th>
      b
      <br/>
      i
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      t
      <br/>
      l
      <br/>
      ine
      <br/>
      H
      <br/>
      D
      <br/>
      4-
     </th>
     <th>
      lav
      <br/>
      S
      <br/>
      Mo
      <br/>
      e
      <br/>
      b
      <br/>
      i
      <br/>
      2-
      <br/>
      Du
      <br/>
      t
      <br/>
      H
      <br/>
      D
     </th>
     <th>
      de
      <br/>
      l
      <br/>
      b
      <br/>
      i
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      Qu
      <br/>
      4-
      <br/>
      t
      <br/>
      a
     </th>
     <th>
      d
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      Q
      <br/>
      P
      <br/>
      I
      <br/>
      a
     </th>
     <th>
      Chapter
      <br/>
      27
     </th>
    </tr>
    <tr>
     <td>
      F
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      C
      <br/>
      L
      <br/>
      K
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      SPI
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      C
      <br/>
      S
      <br/>
      0
      <br/>
      F
      <br/>
      P
      <br/>
      I
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Controller
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      C
      <br/>
      S
      <br/>
      F
      <br/>
      P
      <br/>
      I
      <br/>
      1
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      C
      <br/>
      S
      <br/>
      2
      <br/>
      F
      <br/>
      P
      <br/>
      I
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      S
      <br/>
      C
      <br/>
      S
      <br/>
      3
      <br/>
      F
      <br/>
      P
      <br/>
      I
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      (SPI)
     </td>
    </tr>
    <tr>
     <td>
      F
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      C
      <br/>
      S
      <br/>
      4
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      F
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      C
      <br/>
      S
      <br/>
      5
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      3
     </td>
     <td>
      4
     </td>
     <td>
      5
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      6
     </td>
     <td>
     </td>
     <td>
      7
      <br/>
      8
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      F
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      D
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Y
      <br/>
      3
     </td>
     <td>
      Y
      <br/>
      4
     </td>
     <td>
      Y
      <br/>
      Y
      <br/>
      5
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Y
      <br/>
      6
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      7
      <br/>
      8
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      F
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      Q
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      Y
      <br/>
      5
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
     <td>
      (
      <br/>
      )
      <br/>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
      <br/>
      8
     </td>
     <td>
      Y
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="8">
      F
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      W
      <br/>
      P
      <br/>
      Y
      <br/>
      Y
      <br/>
      Y
      <br/>
      Y
      <br/>
      8
      <br/>
      5
      <br/>
      F
      <br/>
      S
      <br/>
      P
      <br/>
      I
      <br/>
      H
      <br/>
      D
      <br/>
      Y
      <br/>
      Y
      <br/>
      Y
      <br/>
      Y
      <br/>
      1
      <br/>
      F
      <br/>
      D:
      <br/>
      fu
      <br/>
      l
      <br/>
      l-
      <br/>
      du
      <br/>
      lex
      <br/>
      p
      <br/>
      2
      <br/>
      H
      <br/>
      D:
      <br/>
      ha
      <br/>
      l
      <br/>
      f-
      <br/>
      du
      <br/>
      lex
      <br/>
      p
      <br/>
      3
      <br/>
      On
      <br/>
      ly
      <br/>
      f
      <br/>
      he
      <br/>
      ig
      <br/>
      ls
      <br/>
      is
      <br/>
      d
      <br/>
      im
      <br/>
      t
      <br/>
      tw
      <br/>
      t
      <br/>
      t
      <br/>
      on
      <br/>
      e
      <br/>
      o
      <br/>
      o
      <br/>
      s
      <br/>
      na
      <br/>
      us
      <br/>
      e
      <br/>
      a
      <br/>
      a
      <br/>
      e.
      <br/>
      4
      <br/>
      T
      <br/>
      he
      <br/>
      ig
      <br/>
      ls
      <br/>
      d
      <br/>
      in
      <br/>
      l
      <br/>
      le
      <br/>
      l.
      <br/>
      tw
      <br/>
      o
      <br/>
      s
      <br/>
      na
      <br/>
      are
      <br/>
      us
      <br/>
      e
      <br/>
      p
      <br/>
      ara
      <br/>
      5
      <br/>
      T
      <br/>
      he
      <br/>
      fo
      <br/>
      ig
      <br/>
      ls
      <br/>
      d
      <br/>
      in
      <br/>
      l
      <br/>
      le
      <br/>
      l.
      <br/>
      ur
      <br/>
      s
      <br/>
      na
      <br/>
      are
      <br/>
      us
      <br/>
      e
      <br/>
      p
      <br/>
      ara
      <br/>
      6
      <br/>
      On
      <br/>
      ly
      <br/>
      he
      <br/>
      ig
      <br/>
      ls
      <br/>
      is
      <br/>
      d
      <br/>
      im
      <br/>
      f
      <br/>
      t
      <br/>
      tw
      <br/>
      t
      <br/>
      t
      <br/>
      on
      <br/>
      e
      <br/>
      o
      <br/>
      o
      <br/>
      s
      <br/>
      na
      <br/>
      us
      <br/>
      e
      <br/>
      a
      <br/>
      a
      <br/>
      e.
      <br/>
      7
      <br/>
      T
      <br/>
      he
      <br/>
      ls
      <br/>
      d
      <br/>
      l
      <br/>
      le
      <br/>
      l.
      <br/>
      ig
      <br/>
      in
      <br/>
      tw
      <br/>
      o
      <br/>
      s
      <br/>
      na
      <br/>
      are
      <br/>
      us
      <br/>
      e
      <br/>
      p
      <br/>
      ara
      <br/>
      8
      <br/>
      he
      <br/>
      ls
      <br/>
      d
      <br/>
      l
      <br/>
      le
      <br/>
      l.
      <br/>
      T
      <br/>
      fo
      <br/>
      ig
      <br/>
      in
      <br/>
      ur
      <br/>
      s
      <br/>
      na
      <br/>
      are
      <br/>
      us
      <br/>
      e
      <br/>
      p
      <br/>
      ara
      <br/>
      GoBack
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   27.5.3 Bit Read/Write Order Control
  </h1>
  <p block-type="Text">
   In master mode:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-613-0">
     </span>
     <i>
      •
     </i>
     The bit order of the command, address and data sent by the GP-SPI2 master is controlled by SPI_WR_BIT_ORDER.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The bit order of the data received by the master is controlled by SPI_RD_BIT_ORDER.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In sla
   <a href="#page-652-0">
    ve mode:
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The bit order of the data sent by the GP-SPI2 slave is controlled by
     <a href="#page-652-0">
      SPI_WR_BIT_ORD
     </a>
     ER.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The bit order of the command, address and data received by the slave is controlled by SPI_RD_BIT_ORDER.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Table 27.5-5 shows the function of SPI_RD/WR_BIT_ORDER.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 27.5-5. Bit Order Control in GP-SPI2 Master and Slave Modes
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <span id="page-613-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="2">
     </td>
     <td>
      Table 27.5-5. Bit Order Control in GP-SPI2 Master and Slave Modes
     </td>
     <td colspan="2">
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      Bit Mode
      <br/>
      1-bit mode
     </td>
     <td>
      FSPI Bus Data
     </td>
     <td>
      SPI_RD/WR_BIT_ORDER = 0 (MSB)
     </td>
     <td>
      SPI_RD/WR_BIT_ORDER = 1 (LSB)
     </td>
    </tr>
    <tr>
     <td>
      FSPID or FSPIQ
     </td>
     <td>
      B7→B6→B5→B4→B3→B2→B1→B0
     </td>
     <td>
      B0→B1→B2→B3→B4→B5→B6→B7
     </td>
    </tr>
    <tr>
     <td rowspan="4">
      2-bit mode
      <br/>
      4-bit mode
     </td>
     <td>
      FSPIQ
     </td>
     <td>
      B7→B5→B3→B1
     </td>
     <td>
      B1→B3→B5→B7
     </td>
    </tr>
    <tr>
     <td>
      FSPID
     </td>
     <td>
      B6→B4→B2→B0
     </td>
     <td>
      B0→B2→B4→B6
     </td>
    </tr>
    <tr>
     <td>
      FSPIHD
     </td>
     <td>
      B7→B3
     </td>
     <td>
      B3→B7
     </td>
    </tr>
    <tr>
     <td>
      FSPIWP
     </td>
     <td>
      B6→B2
     </td>
     <td>
      B2→B6
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   27.5.4 Transfer Modes
  </h1>
  <p block-type="Text">
   <span id="page-613-1">
   </span>
   GP-SPI2 supports the following transfers when working as a master or a slave.
  </p>
  <span id="page-613-4">
  </span>
  <table>
   <tbody>
    <tr>
     <th colspan="2">
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 27.5-6. Supported Transfers in Master and Slave Modes
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <th colspan="2">
      Mode
     </th>
     <th>
      CPU-Controlled
     </th>
     <th>
      DMA-Controlled
     </th>
     <th>
      DMA-Controlled
     </th>
     <th colspan="2">
      DMA-Controlled
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Single Transfer
     </th>
     <th>
      Single Transfer
     </th>
     <th>
      Configurable
     </th>
     <th>
      Slave Segmented
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Segmented Transfer
     </td>
     <td>
      Transfer
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Full-Duplex
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      –
     </td>
    </tr>
    <tr>
     <td>
      Master
     </td>
     <td>
      Half-Duplex
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      –
     </td>
    </tr>
    <tr>
     <td>
      Slave
     </td>
     <td>
      Full-Duplex
     </td>
     <td>
      Y
     </td>
     <td>
      Y
     </td>
     <td>
      –
     </td>
     <td>
      Y
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 27.5-6. Supported Transfers in Master and Slave Modes
  </p>
  <p block-type="Text">
   The following sections provide detailed information about the transfer modes listed in the table above.
  </p>
  <h1>
   27.5.5 CPU-Controlled Data Transfer
  </h1>
  <p block-type="Text">
   <span id="page-613-2">
   </span>
   GP-SPI2 provides 16 x 32-bit data buffers, i.e., SPI_W0_REG ~ SPI_W15_REG, see Figure 27.5-1. CPU-controlled transfer indicates the transfer, in which the data to send is from GP-SPI2 data buffer and the received data is stored to GP-SPI2 data buffer. In such transfer, every single transaction needs to be triggered by the CPU, after its related registers are confi
   <a href="#page-670-0">
    gured. For suc
   </a>
   h
   <a href="#page-674-0">
    reason, the CP
   </a>
   U-controlle
   <a href="#page-614-1">
    d trans
   </a>
   fer is always
  </p>
  <p block-type="Text">
   Espressif Systems 614
  </p>
  <p block-type="Text">
   <span id="page-614-1">
   </span>
   single transfers (consisting of only one transaction). CPU-controlled mode supports full-duplex communication and half-duplex communication.
  </p>
  <p>
   <img src="_page_614_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 27.5-1. Data Buffer Used in CPU-Controlled Transfer
  </p>
  <h4>
   27.5.5.1 CPU-Controlled Master Mode
  </h4>
  <p block-type="Text">
   <span id="page-614-0">
   </span>
   In a CPU-controlled master full-duplex or half-duplex transfer, the RX or TX data is saved to or sent from SPI_W0_REG ~ SPI_W15_REG. The bits SPI_USR_MOSI_HIGHPART and SPI_USR_MISO_HIGHPART control which buffers are used, see the list below.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TX data
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-670-0">
        Wh
       </a>
       en
       <a href="#page-674-0">
        SPI_USR_MO
       </a>
       SI_HIGHPART
       <a href="#page-649-0">
        is cleared, i.e., high pa
       </a>
       rt m
       <a href="#page-649-0">
        ode is disabled, TX data is fr
       </a>
       om SPI_W0_REG ~ SPI_W15_REG and the data address is incremented by 1 on each byte transferred. If the data byte length is larger than 64, the data in SPI_W0_REG[7:0] ~ SPI_W15_REG[31:24] may be sent
       <a href="#page-649-0">
        more than once. For instance
       </a>
       , if 66 bytes (byte0 ~ byte65) need to be sent, then the address
       <a href="#page-670-0">
        of byte65 is t
       </a>
       he
       <a href="#page-674-0">
        result of (65 %
       </a>
       64 = 1), i.e., byte65 is from SPI_W0_REG[15:8], and byte64 is from SPI_W0_REG[7:0]. In this case, the content of S
       <a href="#page-670-0">
        PI_W0_REG[15
       </a>
       :0] ma
       <a href="#page-674-0">
        y be sent more
       </a>
       than once.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       When SPI_USR_MOSI_HIGHPART is set, i.e., high part mode is enabled, TX data is from SPI_W8_REG ~ SPI_W15_REG and the data address is incr
       <a href="#page-670-0">
        emented by 1 o
       </a>
       n each byte transferred. If
       <a href="#page-670-0">
        the data byte
       </a>
       length is larger than 32, the data in
       <a href="#page-670-0">
        SPI_W8_RE
       </a>
       G[7:0] ~ SPI_W15_REG[31:24] may be sent
       <a href="#page-649-0">
        more than once.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RX d
     <a href="#page-672-0">
      ata
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       When SPI_USR_MISO_HIGHPART is cleared, i.e.,
       <a href="#page-672-0">
        high part mod
       </a>
       e is di
       <a href="#page-674-0">
        sabled, RX data
       </a>
       is saved to SPI_W0_REG ~ SPI_W15_REG, and the data address is incremented by 1 on each byte transferred. If the data byte length is larger than 64, the data in SPI_W0_REG[7:0] ~ SPI_W15_REG[31:24] may be ov
       <a href="#page-649-0">
        erwritten. For instance, whe
       </a>
       n 66 bytes (byte0 ~ byte65) are received, byte65 and byte64 are
       <a href="#page-670-0">
        stored to the
       </a>
       a
       <a href="#page-674-0">
        ddresses of (65
       </a>
       % 64 = 1) and (64 % 64 = 0), i.e., SPI_W0_REG[15:8] and SPI_W0_REG[7:0]. In this case, the content of SPI
       <a href="#page-670-0">
        _W0_REG[15:0
       </a>
       ] may
       <a href="#page-674-0">
        be overwritten.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       When SPI_USR_MISO_HIGHPART is set, i.e., high part mode is enabled, the RX data is saved to SPI_W8_REG ~ SPI_W15_REG, and the data address is increment
       <a href="#page-670-0">
        ed by 1 on eac
       </a>
       h byte transferred.
       <a href="#page-670-0">
        If the data by
       </a>
       te length is larger than 32, the co
       <a href="#page-670-0">
        ntent of
       </a>
       SPI_W8_REG ~ SPI_W15_REG may be overw
       <a href="#page-649-0">
        ritten.
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TX/RX data address mentioned above both are byte-addressable. Address 0 stands for SPI_W0_REG[7:0], and Address 1 for SPI_W0_REG[15:8], and so on. The largest address is SPI_W15_REG[31:24].
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     To avoid any possible error in TX/RX data, such as TX data being sent more than once or RX data being overwritten, please make sure the registers are configured correctly.
    </li>
   </ul>
  </p>
  <h1>
   27.5.5.2 CPU-Controlled Slave Mode
  </h1>
  <p block-type="Text">
   <span id="page-615-0">
   </span>
   In a CPU-controlled slave full-duplex or half-duplex transfer, the RX data or TX data is saved to or sent from SPI_W0_REG ~ SPI_W15_REG, which are byte-addressable.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In full-duplex communication, the address of SPI_W0_REG ~ SPI_W15_REG starts from 0 and is incremented by 1 on each byte transferred. If the data address is larger than 63, the content of
     <a href="#page-670-0">
      SPI_W15
     </a>
     _
     <a href="#page-674-0">
      REG[31:24] is o
     </a>
     verwritten.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In half-duplex communication, the ADDR valu
     <a href="#page-670-0">
      e in transmiss
     </a>
     io
     <a href="#page-674-0">
      n format is the
     </a>
     start address of the RX or TX data, corresponding to the registers SPI_W0_REG ~ SPI_W15_REG. The RX or TX address is incremented
     <a href="#page-674-0">
      by 1 on each b
     </a>
     yte transferred. If the address is larger than 63 (the highest byte address, i.e. SPI_W15_REG[31:24]), the address of overflowing data is always 63 and only the content of SPI_W15_REG[31:24] is overwritten.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   According to your applications, the registers SPI_W0_REG ~ SPI_W15_REG can be used as:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-674-0">
      data buffers on
     </a>
     ly
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     data buffers and status buffers
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     status buffers only
    </li>
   </ul>
  </p>
  <h1>
   27.5.6 DMA-Controlled Data Transfer
  </h1>
  <p block-type="Text">
   <span id="page-615-1">
   </span>
   DMA-controlled transfer refers to the transfer, in which GDMA RX module receives data and GDMA TX module sends data. This transfer is supported both in master mode and in slave mode.
  </p>
  <p block-type="Text">
   A DMA-controlled transfer can be
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     a single transfer, consisting of only one transaction. GP-SPI2 supports this transfer both in master and slave modes.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     a configurable segmented transfer, consisting of several transactions (segments). GP-SPI2 supports this transfer only in master mode. For more information, see Section 27.5.8.5.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     a slave segmented transfer, consisting of several transactions (segments). GP-SPI2 supports this transfer only in slave mode. For more information, see Section 27.5.9.3.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   A DMA-controlled transfer only needs to be triggered once by CPU. W
   <a href="#page-628-0">
    hen such
   </a>
   transfer is triggered, data is transferred by the GDMA engine from or to the DMA-linked memory, without CPU operation.
  </p>
  <p block-type="Text">
   DMA-controlled mode supports full-duplex communication, half-dup
   <a href="#page-636-0">
    lex comm
   </a>
   unication and functions described in Section 27.5.8 and Section 27.5.9. Meanwhile, the GDMA RX module is independent from the GDMA TX module, which means that there are four kinds of full-duplex communications:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Data is received in DMA-controlled mode and sent in DMA-controlled mode.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data is received in DMA-controlled mode but sent in CPU-controlled mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data is received in CPU-controlled mode but sent in DMA-controlled mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data is received in CPU-controlled mode and sent in CPU-controlled mode.
    </li>
   </ul>
  </p>
  <h4>
   27.5.6.1 GDMA Configuration
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-616-0">
     </span>
     <i>
      •
     </i>
     Select a GDMA channel
     <i>
      n
     </i>
     , and configure a GDMA TX/RX descriptor, see Chapter 2
     <i>
      GDMA Controller (GDMA)
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set the bit GDMA_INLINK_START_CH
     <i>
      n
     </i>
     or GDMA_OUTLINK_START_CH
     <i>
      n
     </i>
     to start GDMA RX/TX engine.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-59-0">
      Before a
     </a>
     ll the GDMA TX buffer is used or the GDMA TX engine is reset, if GDMA
     <a href="#page-59-0">
      _OUTLINK_RESTART
     </a>
     _CH
     <i>
      n
     </i>
     is set, a new TX buffer will be added to the end of the last TX buffer in use.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GDMA RX
     <a href="#page-79-0">
      buffer is linked in the same w
     </a>
     a
     <a href="#page-81-0">
      y as the GDMA TX buffer, by se
     </a>
     tting GDMA_INLINK_START_CH
     <i>
      n
     </i>
     or GDMA_INLINK_RESTART_CH
     <i>
      n
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The TX and RX data lengths are determined by the configured GDMA TX and RX buffer respectively, both of which are 0 ~ 32 KB.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Ini
     <a href="#page-79-0">
      tialize GDMA inlink and outlink b
     </a>
     efore GDMA starts. The bits SPI_DMA_RX_ENA and SPI_DMA_TX_ENA in register SPI_DMA_CONF_REG should be set, otherwise the read/write data will be stored to/sent from the registers SPI_W0_REG ~ SPI_W15_REG.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In master mode, if GDMA_IN_SUC_EOF_CH
   <i>
    n
   </i>
   _INT_ENA is set, then
   <a href="#page-655-0">
   </a>
   t
   <a href="#page-655-0">
    he interrupt GDMA_
   </a>
   IN_
   <a href="#page-655-0">
    SUC_EOF_CH
   </a>
   <i>
    n
   </i>
   _INT will be triggered
   <a href="#page-655-0">
    when one single trans
   </a>
   fer or one configurable segmented transfer is finished.
  </p>
  <p block-type="Text">
   The only differenc
   <a href="#page-670-0">
    e between DM
   </a>
   A
   <a href="#page-674-0">
    -controlled tran
   </a>
   sfers in master mode and in slave mode is on the GDMA RX control:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the bit SPI_RX_EOF_EN is cleared, a GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT interrupt may be generated after the CS is pulled high once:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In a slave single transfer, if SPI_DMA_SLV_SEG_TRANS_EN is cleared and GDMA_I
       <a href="#page-655-0">
        N_SUC_EOF_CH
       </a>
       <i>
        n
       </i>
       _INT _ENA is set, a GDMA_IN_SUC_EOF_CH
       <i>
        n
       </i>
       _INT interrupt will be triggered once the single transfer is done.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In a slave segmented transfer, if both SPI_DMA_SLV_SEG_TRANS_EN and GDMA_IN_SUC_EOF_CH
       <i>
        n
       </i>
       _ INT_ENA are set, a GDMA_IN_SUC_EOF_CH
       <i>
        n
       </i>
       _INT interrupt also is triggered once the command (CMD7 or End_SEG_TRANS) is receiv
       <a href="#page-655-0">
        ed correctly.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the bit SPI_RX_EOF_EN is set, the generation of GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT also depends on the length of transferred data.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       I
       <a href="#page-633-1">
        n a sla
       </a>
       ve
       <a href="#page-634-1">
        single transfer, if
       </a>
       SPI_DMA_SLV_SEG_TRANS_EN is cleared and GDMA_I
       <a href="#page-655-0">
        N_SUC_EOF_CH
       </a>
       <i>
        n
       </i>
       _ INT_ENA is set, a GDMA_IN_SUC_EOF_CH
       <i>
        n
       </i>
       _INT interrupt will be generated once the single transfer is done or the length of G
       <a href="#page-655-0">
        DMA RX received data is equal to
       </a>
       (SPI_MS_DATA_BITLEN + 1).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In a slave segmented transfer, if SPI_DMA_SLV_SEG_TRANS_EN is set, a GDMA_IN_SUC_EOF_CH
       <i>
        n
       </i>
       _INT interrupt will be generated once the command (CMD7 or
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   End_SEG_TRANS) is received correctly or the length of GDMA RX received data is equal to (SPI_MS_DATA_BITLEN + 1).
  </p>
  <h1>
   27.5.6.2
   <a href="#page-634-1">
    GDMA TX/RX
   </a>
   Buffer Length Control
  </h1>
  <p block-type="Text">
   <span id="page-617-0">
   </span>
   It is recom
   <a href="#page-653-0">
    mended that the length
   </a>
   of configured GDMA TX/RX buffer is equal to the length of real transferred data.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the length of configured GDMA TX buffer is shorter than that of real transferred data, the extra data will be the same as the last transferred data. SPI_OUTFIFO_EMPTY_ERR_INT and GDMA_OUT_EOF_CH
     <i>
      n
     </i>
     _INT are triggered.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the length of configured GDMA TX buffer is longer than the that of real transferred data, the TX buffer is not fully used, and the remaining buffer
     <a href="#page-643-0">
     </a>
     i
     <a href="#page-643-0">
      s available for following transactio
     </a>
     n even if a new TX buffer is
     <a href="#page-65-1">
      linked later. Please keep it i
     </a>
     n mind. Or save the unused data and reset DMA.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the length of configured GDMA RX buffer is shorter than that of real transferred data, the extra data will be lost. The interrupts SPI_INFIFO_FULL_ERR_INT and SPI_TRANS_DONE_INT are triggered. But GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT interrupt is not generated.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the length of configured GDMA RX buffer is longer than that of real transferred data, the RX buffer is not fully used, and the re
     <a href="#page-643-0">
      maining buffer is discarded. In
     </a>
     the
     <a href="#page-643-0">
      following transaction, a
     </a>
     new linked buffer will be
     <a href="#page-65-1">
      used directly.
     </a>
    </li>
   </ul>
  </p>
  <h1>
   27.5.7 Data Flow Control in GP-SPI2 Master and Slave Modes
  </h1>
  <p block-type="Text">
   <span id="page-617-1">
   </span>
   CPU-controlled and DMA-controlled transfers are supported in GP-SPI2 master and slave modes. CPU-controlled transfer means that data transfers between registers SPI_W0_REG ~ SPI_W15_REG and the SPI device. DMA-controlled transfer means that data transfers between the configured GDMA TX/RX buffer and the SPI device. To select between the two transfer modes, configure SPI_DMA_RX_ENA and SPI_DMA_TX_ENA before the transfer starts.
  </p>
  <h1>
   27.5.7.1 GP-SPI2 Functional Blocks
  </h1>
  <p>
   <span id="page-617-3">
   </span>
   <span id="page-617-2">
   </span>
   <img src="_page_617_Figure_10.jpeg"/>
  </p>
  <p>
   Figure 27.5-2. GP-SPI2 Block Diagram
  </p>
  <p block-type="Text">
   Figure 27.5-2 shows main functional blocks in GP-SPI2, including:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Master FSM: all the features, supported in GP-SPI2 master mode, are controlled by this state machine together with register configuration.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI Buffer: SPI_W0_REG ~ SPI_W15_REG, see Figure 27.5-1. The data transferred in CPU-controlled
     <a href="#page-620-1">
      mode is prep
     </a>
     ared in this buffer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Timing Module: capture data on FSPI bus.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     spi_mst/sl
     <a href="#page-670-0">
      v_din/dout_ctr
     </a>
     l:
     <a href="#page-674-0">
      convert the TX
     </a>
     /RX data int
     <a href="#page-614-1">
      o byte
     </a>
     s.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     spi_rx_afifo: store the received data.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     buf_tx_afifo: store the data to send.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     dma_tx_afifo: store the data from GDMA.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clk_spi_mst: this clock is the module clock of GP-SPI2 and derived from PLL_CLK. It is used in GP-SPI2 master mode, to generate SPI_CLK signal for data transfer and for slaves.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_CLK Generator: generate SPI_CLK by dividing clk_spi_mst. The divider is determined by SPI_CLKCNT_N and SPI_CLKDIV_PRE.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_CLK_out Mode Control: output the SPI_CLK signal for data transfer and for slaves.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_CLK_in Mode Control: capture the SPI_CLK signal from SPI master when GP-SPI2 works as a slave.
    </li>
   </ul>
  </p>
  <h1>
   27.5.7.2 Data Flow Control in Master Mode
  </h1>
  <p>
   <span id="page-618-1">
   </span>
   <span id="page-618-0">
   </span>
   <img src="_page_618_Figure_12.jpeg"/>
  </p>
  <p>
   Figure 27.5-3. Data Flow Control in GP-SPI2 Master Mode
  </p>
  <p block-type="Text">
   Figure 27.5-3 shows the data flow of GP-SPI2 in master mode. Its control logic is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RX data: data in FSPI bus is captured by Timing Module, converted in units of bytes by spi_mst_din_ctrl module, and then stored in corresponding addresses according to the transfer modes.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-618-1">
        CP
       </a>
       U-controlled transfer: the data is stored to registers SPI_W0_REG ~ SPI_W15_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       DMA-controlled transfer: the data is stored to GDMA RX buffer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TX data: the TX data is from corresponding addresses acc
     <a href="#page-670-0">
      ording to transf
     </a>
     er
     <a href="#page-674-0">
      modes and is
     </a>
     saved to buf_tx_afifo.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       CPU-controlled transfer: TX data is from SPI_W0_REG ~ SPI_W15_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       DMA-controlled transfer: TX data is from GDMA TX buffer.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The data in buf_tx_afifo is sent out to Timing Module in 1/2/4-bit modes, controlled by GP-SPI2 state machine. The Timing Module can be used for timing compensation. For more information, see Section 27.8.
  </p>
  <h1>
   27.5.7.3 Data Flow Control in Slave Mode
  </h1>
  <p>
   <span id="page-619-1">
   </span>
   <span id="page-619-0">
   </span>
   <img src="_page_619_Figure_2.jpeg"/>
  </p>
  <p>
   Figure 27.5-4. Data Flow Control in GP-SPI2 Slave Mode
  </p>
  <p block-type="Text">
   Figure 27.5-4 shows the data flow in GP-SPI2 slave mode. Its control logic is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In CPU/DMA-controlled full-duplex/half-duplex modes, when an external SPI master starts the SPI transfer, data on the FSPI bus is captured, converted into unit of bytes by spi_slv_din_ctrl module, and t
     <a href="#page-619-1">
      hen is
     </a>
     stored in spi_rx_afifo.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In CPU-controlled full-duplex transfer, the received data in spi_rx_afifo will be later stored into registers SPI_W0_REG ~ SPI_W15_REG, successively.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In half-duplex Wr_BUF transfer, when the value of address (SLV_ADDR[7:0]) is received, the received data in spi_rx_afifo will be stored in the related address of registers SPI_W0_REG ~ SPI_W15
       <a href="#page-670-0">
        _REG
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In DMA-contr
       <a href="#page-633-2">
        olled full-
       </a>
       duplex transfer or in half-duplex Wr_DMA transfer, the received data in spi_rx_afifo will be stored in the configured GDMA RX buffer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In C
     <a href="#page-674-0">
      PU-controlled f
     </a>
     ull-/half-duplex transfer, the data to send is stored in buf_tx_afifo. In DMA-controlled full-/half-duplex transfer, the data to send is stored in dma_
     <a href="#page-633-3">
      tx_afifo.
     </a>
     Therefore, Rd_BUF transaction controlled by CPU and Rd_DMA transaction controlled by DMA can be done in one slave segmented transfer. TX data comes from corresponding addresses according the transfer modes.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In CPU-controlled full-duplex transfer, when SPI_SLAVE_MODE and SPI_DOUTDIN are set and SPI_DMA
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         _TX_ENA is cleared, the data in SPI_W0_REG ~ SPI_W15_REG will be stored into buf_tx_afifo;
        </li>
       </ul>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In CPU-controlled half-duplex transfer, when
       <a href="#page-656-0">
        SPI_SLAVE_MODE
       </a>
       is set,
       <a href="#page-649-0">
        SPI_DOUTD
       </a>
       IN is cleared, Rd_BUF command and SLV_ADDR[7:0] are received, the data started from the related address of SPI_W0_REG ~ SPI_W15_REG
       <a href="#page-670-0">
        will be stored in
       </a>
       t
       <a href="#page-674-0">
        o buf_tx_afifo;
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In DMA-controlled full-duplex transfer, when
       <a href="#page-656-0">
        SPI_SLAVE_MODE,
       </a>
       SPI_D
       <a href="#page-649-0">
        OUTDIN
       </a>
       and SPI_DMA_TX_ ENA are set, the data in the configured GDMA TX buffer will be stored into dma_tx_afifo;
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   – In DMA-controlled half-duplex transfer, when SPI_SLAVE_MODE is set, SPI_DOUTDIN is cleared, and Rd_DMA command is received, the data in the configured GDMA TX buffer will be stored into dma_tx_afifo.
  </p>
  <p block-type="Text">
   The data in buf_tx_afifo or dma_tx_afifo is sent o
   <a href="#page-656-0">
    ut by spi_slv_dout_
   </a>
   ctrl mo
   <a href="#page-649-0">
    dule in 1/2/4-b
   </a>
   it modes.
  </p>
  <h1>
   27.5.8 GP-SPI2 Works as a Master
  </h1>
  <p block-type="Text">
   <span id="page-620-0">
   </span>
   GP-SPI2 can be configured as a SPI master by clearing the bit SPI_SLAVE_MODE in SPI_SLAVE_REG. In this operation mode, GP-SPI2 provides clock signal (the divided clock from GP-SPI2 module clock) and six CS lines (CS0 ~ CS5).
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The length of transferred data must be in unit of bytes, otherwise the extra bits will be lost. The extra bits here means the result of total data bits % 8.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     To transfer bits not in unit of bytes, consider implementing it in CMD state or ADDR state.
    </li>
   </ul>
  </p>
  <h4>
   27.5.8.1 State Machine
  </h4>
  <p block-type="Text">
   <span id="page-620-1">
   </span>
   When GP-SPI2 works as a master, the state machine controls its various states during data transfer, including configuration (CONF), preparation (PREP), command (CMD), address (ADDR), dummy (DUMMY), data out (DOUT), and data in (DIN) states. GP-SPI2 is mainly used to access 1/2/4-bit SPI devices, such as flash and external RAM, thus the naming of GP-SPI2 states keeps consistent with the sequence naming of flash and external RAM. The meaning of each state is described as follows and Figure 27.5-5 shows the workflow of GP-SPI2 state machine.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. IDLE: GP-SPI2 is not active or is in slave mode.
    </li>
    <li block-type="ListItem">
     2. CONF: only used in DMA-controlled configurable segmented transfer.
     <a href="#page-621-0">
      Set
     </a>
     SPI_USR and SPI_USR_CONF to enable this state. If this state is not enabled, it means the current transfer is a single transfer.
    </li>
    <li block-type="ListItem">
     3. PREP: prepare an SPI transaction and control SPI CS setup time. Set SPI_USR and SPI_CS_SETUP to enable this state.
    </li>
    <li block-type="ListItem">
     4. CMD: send command sequence. Set SPI_USR and SPI_USR_COMMAND to enable this state.
    </li>
    <li block-type="ListItem">
     5. ADDR: send address sequence. Set SPI_USR and SPI_USR_ADDR to
     <a href="#page-647-1">
      enable th
     </a>
     is s
     <a href="#page-649-0">
      tate.
     </a>
    </li>
    <li block-type="ListItem">
     6. DUMMY (wait cycle): send dummy se
     <a href="#page-647-1">
      quence. S
     </a>
     et SPI_USR and
     <a href="#page-649-0">
      SPI_USR
     </a>
     _DUMMY to enable this state.
    </li>
    <li block-type="ListItem">
     7. DATA: transfer data.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       DOUT: send data sequence. Set SPI_USR and
       <a href="#page-647-1">
        SPI_USR
       </a>
       _MOSI
       <a href="#page-649-0">
        to enable this s
       </a>
       tate.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       DIN: receive data sequence. Set SPI_USR and SPI_USR_MISO to enable this state.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     8. DONE: control SPI CS hold time. Set
     <a href="#page-647-1">
      SPI_USR
     </a>
     to en
     <a href="#page-649-0">
      able this state.
     </a>
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_621_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-621-0">
   </span>
   GoBack Figure 27.5-5. GP-SPI2 State Machine in Master Mode
  </p>
  <p block-type="Text">
   622
   <a href="https://www.espressif.com/en/company/documents/documentation_feedback?docId=5086§ions=&amp;version=1.3">
    Submit Documentation Feedback
   </a>
  </p>
  <p block-type="Text">
   Espressif Systems
  </p>
  <p block-type="Text">
   Legend to state flow:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     —: indicates corresponding state condition is not satisfied; repeats current state.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     —: corresponding registers are set and conditions are satisfied; goes to next state.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     —: state registers are not set; skips one or more following states, depending on the registers of the following states are set or not.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Explanation to the conditions listed in the figure above:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CONF condition: gpc[17:0] &gt;= SPI_CONF_BITLEN[17:0]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     PREP condition: gpc[4:0] &gt;= SPI_CS_SETUP_TIME[4:0]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CMD condition: gpc[3:0] &gt;= S
     <a href="#page-647-1">
      PI_USR_COMMAND
     </a>
     _BITLEN[3:0]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ADDR condition: gpc[4:0] &gt;=
     <a href="#page-651-0">
      SPI_USR_ADDR_BITL
     </a>
     EN[4:0]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DUMMY condition: gpc[7:0] &gt;=
     <a href="#page-651-1">
      SPI_USR_DUMMY_CYCLEL
     </a>
     EN[7:0]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DOUT condition: gpc[17:0] &gt;=
     <a href="#page-651-0">
      SPI_MS_DATA_BITLEN[1
     </a>
     7:0]
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DIN condition: gpc[17:0] &gt;= SPI
     <a href="#page-651-0">
      _MS_DATA_BITLEN[17:0]
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DONE condition: (gpc[4:0] &gt;=
     <a href="#page-653-0">
      SPI_CS_HOLD_TIME[4:
     </a>
     0] || SPI_CS_HOLD == 1'b0)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   A counter (gpc[17:0]) is used in th
   <a href="#page-653-0">
    e state machine to con
   </a>
   trol the cycle length of each state. The states CONF, PREP, CMD, ADDR, DUMMY, DOUT, and DIN can be enabled or disabled independently. The cycle length of each state can also be configured i
   <a href="#page-651-0">
    ndependently.
   </a>
  </p>
  <h1>
   27.5.8.2 Register Configuration for State and Bit Mode Control
  </h1>
  <h2>
   <span id="page-622-0">
   </span>
   Introduction
  </h2>
  <p block-type="Text">
   The registers, related to GP-SPI2 state control, are listed in Table 27.5-7. Users can enable QPI mode for GP-SPI2 by setting the bit SPI_QPI_MODE in register SPI_USER_REG.
  </p>
  <span id="page-622-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 27.5-7. Registers Used for State Control in 1/2/4-bit Modes
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Control Registers for 1-bit
     </th>
     <th>
      Control Registers for 2-bit
     </th>
     <th colspan="3">
      Control Registers for 4-bit
     </th>
    </tr>
    <tr>
     <td>
      State
      <br/>
      CMD
     </td>
     <td>
      Mode FSPI Bus
      <br/>
      SPI_USR_COMMAND_VALUE
      <br/>
      SPI_USR_COMMAND_BITLEN
      <br/>
      SPI_USR_COMMAND
     </td>
     <td>
      Mode FSPI Bus
      <br/>
      SPI_USR_COMMAND_VALUE
      <br/>
      SPI_USR_COMMAND_BITLEN
      <br/>
      SPI_FCMD_DUAL
     </td>
     <td>
      Mode FSPI Bus
      <br/>
      SPI_USR_COMMAND_VALUE
      <br/>
      SPI_USR_COMMAND_BITLEN
      <br/>
      SPI_FCMD_QUAD
     </td>
    </tr>
    <tr>
     <td>
      ADDR
     </td>
     <td>
      SPI_USR_ADDR_VALUE
      <br/>
      SPI_USR_ADDR_BITLEN
      <br/>
      SPI_USR_ADDR
     </td>
     <td>
      SPI_USR_COMMAND
      <br/>
      SPI_USR_ADDR_VALUE
      <br/>
      SPI_USR_ADDR_BITLEN
      <br/>
      SPI_USR_ADDR
     </td>
     <td>
      SPI_USR_COMMAND
      <br/>
      SPI_USR_ADDR_VALUE
      <br/>
      SPI_USR_ADDR_BITLEN
      <br/>
      SPI_USR_ADDR
     </td>
    </tr>
    <tr>
     <td>
      DUMMY
     </td>
     <td>
      SPI_USR_DUMMY_CYCLELEN
     </td>
     <td>
      SPI_FADDR_DUAL
      <br/>
      SPI_USR_DUMMY_CYCLELEN
     </td>
     <td>
      SPI_FADDR_QUAD
      <br/>
      SPI_USR_DUMMY_CYCLELEN
     </td>
    </tr>
    <tr>
     <td>
      DIN
     </td>
     <td>
      SPI_USR_DUMMY
      <br/>
      SPI_USR_MISO
      <br/>
      SPI_MS_DATA_BITLEN
     </td>
     <td>
      SPI_USR_DUMMY
      <br/>
      SPI_USR_MISO
      <br/>
      SPI_MS_DATA_BITLEN
     </td>
     <td>
      SPI_USR_DUMMY
      <br/>
      SPI_USR_MISO
      <br/>
      SPI_MS_DATA_BITLEN
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   Table 27.5-7. Registers Used for State Co
   <a href="#page-622-1">
    ntrol in
   </a>
   1/2/4-bit Modes
  </h1>
  <h4>
   Table 27.5-7. Registers Used for State Control in 1/2/4-bit Modes
  </h4>
  <table>
   <tbody>
    <tr>
     <th rowspan="2">
     </th>
     <th>
     </th>
     <th>
     </th>
     <th colspan="3">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Table 27.5-7. Registers Used for State Control in 1/2/4-bit Modes
     </th>
     <th colspan="2">
     </th>
    </tr>
    <tr>
     <td rowspan="3">
      State
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Control Registers for 1-bit
     </td>
     <td>
      Control Registers for 2-bit
     </td>
     <td>
      Control Registers for 4-bit
     </td>
    </tr>
    <tr>
     <td>
      Mode FSPI Bus
     </td>
     <td>
      Mode FSPI Bus
     </td>
     <td>
      Mode FSPI Bus
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   As shown in Table
   <a href="#page-653-0">
    27.5-7, the registe
   </a>
   rs in each
   <a href="#page-653-0">
    cell should be configure
   </a>
   d to set t
   <a href="#page-653-0">
    he FSPI bus to correspo
   </a>
   nding bit mode, i.e. the mode shown in the table he
   <a href="#page-649-0">
    ader, at a specific st
   </a>
   ate (correspo
   <a href="#page-649-0">
    nding to the first
   </a>
   column).
  </p>
  <h4>
   Configuration
  </h4>
  <p block-type="Text">
   For instance, when GP-SPI2 reads data, and
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CMD is in 1-bit mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ADDR is in 2-bit mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DUMMY is 8 clock cycles
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DIN is in 4-bit mode
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The register configuration can be as follows:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. Configure CMD state related registers.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure the required command value in SPI_USR_COMMAND_VALUE.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure command bit length in SPI_USR_COMMAND_BITLEN. SPI_USR_COMMAND_BITLEN = expected bit length - 1.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set SPI_USR_COMMAND.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Clear SPI_FCMD_DUAL and SPI_
       <a href="#page-651-1">
        FCMD_QUAD.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. Configur
     <a href="#page-649-0">
      e ADDR state related re
     </a>
     gisters.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Confi
       <a href="#page-652-0">
        gure the required a
       </a>
       ddr
       <a href="#page-652-0">
        ess value in
       </a>
       SPI_USR_ADDR_VALUE.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Configure address bit length in SPI_USR_ADDR_BITLEN. SPI_USR_ADDR_BITLEN = expected bit length - 1.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set SPI_USR_ADDR and SPI_FADDR_D
       <a href="#page-648-0">
        UAL.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Clear SPI_FADDR_QUAD.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. Configur
     <a href="#page-649-0">
      e DUMMY state r
     </a>
     elat
     <a href="#page-652-0">
      ed registers.
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Confi
       <a href="#page-652-0">
        gure DUMMY cycle
       </a>
       s in SPI_USR_DUMMY_CYCLELEN. SPI_USR_DUMMY_CYCLELEN = expected clock cycles - 1.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Set SPI_USR_DUMMY.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     4. Configure DIN state related regist
     <a href="#page-651-0">
      ers.
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Co
       <a href="#page-649-0">
        nfigure read data bit
       </a>
       length in SPI_MS_DATA_BITLEN. SPI_MS_DATA_BITLEN = bit length expected - 1.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set SPI_FREAD_QUAD and SPI_USR_MISO.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Clear SPI_FREAD_DUAL.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Co
     <a href="#page-652-0">
      nfigure GDMA in DM
     </a>
     A-c
     <a href="#page-649-0">
      ontrolled mode.
     </a>
     In CPU controlled mode, no action is needed.
    </li>
    <li block-type="ListItem">
     5. Clear SPI_
     <a href="#page-652-0">
      USR_MOSI.
     </a>
    </li>
    <li block-type="ListItem">
     6. Set SPI_DMA_AFIFO_RST, SPI_BUF_AFIFO_RST, and SPI_RX_AFIFO_RST to reset these buffers.
    </li>
    <li block-type="ListItem">
     7. Set SPI_USR
     <a href="#page-649-0">
      to start G
     </a>
     P-SPI2 transfer.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When wri
   <a href="#page-655-0">
    ting data (DOUT state),
   </a>
   <a href="#page-655-0">
    SPI_USR_MOSI
   </a>
   should be
   <a href="#page-655-0">
    configured instead, w
   </a>
   hile SPI_USR_MISO should be cleared. The output data bit length is the value of SPI_MS_DATA_BITLEN + 1. Output data should be configure
   <a href="#page-647-1">
    d in GP-S
   </a>
   PI2 data buffer (SPI_W0_REG ~ SPI_W15_REG) in CPU-controlled mode, or GDMA TX buffer in DMA-controlled mode. The d
   <a href="#page-649-0">
    ata byte order is
   </a>
   incremented from LSB (byte 0) to M
   <a href="#page-649-0">
    SB.
   </a>
  </p>
  <p block-type="Text">
   Pay special attention to the command value in SPI_U
   <a href="#page-653-0">
    SR_COMMAND_VALUE
   </a>
   and to address value in SPI_USR_
  </p>
  <h4>
   ADDR_VALUE.
  </h4>
  <p block-type="Text">
   The configuration of command value is as follo
   <a href="#page-651-1">
    ws:
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If
     <a href="#page-648-0">
      SPI_U
     </a>
     SR_COMMAND_BITLEN &lt; 8, the command value is written to SPI_USR_COMMAND_VALUE[7:0]. Command value is sent as follows.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is set, the lower part of SPI_USR_COMMAND_VALUE[7:0], i.e. SPI_USR_
       <a href="#page-651-1">
        COMMAND_VALUE[SPI_US
       </a>
       R_COMMAND_BITLEN:0], is sent first
       <a href="#page-651-1">
        .
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is cleared, the higher part of SPI_USR_COMMAND_VALUE[7:0], i.e. S
       <a href="#page-652-0">
        PI_USR_COM
       </a>
       <a href="#page-651-1">
        MAND_VALUE[7:7 -
       </a>
       <a href="#page-651-1">
        SPI_USR_COMMAND_BITLEN
       </a>
       ], is sent first.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If 7 &lt; S
     <a href="#page-652-0">
      PI_USR_COMMAND_
     </a>
     BITLEN &lt; 16, the command
     <a href="#page-651-1">
      value is written to
     </a>
     SPI_
     <a href="#page-651-1">
      USR_COMMAND
     </a>
     _VALUE[15:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0]. C
       <a href="#page-651-1">
        ommand value
       </a>
       is s
       <a href="#page-651-1">
        ent as follows.
       </a>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         If
         <a href="#page-651-1">
          SPI_WR_BIT_ORDER
         </a>
         is set, SPI_USR_COMMAND_VALUE[7:0] is sent first, and then the lower part of
         <a href="#page-651-1">
          SPI_USR_COMMAND
         </a>
         _VALUE[15:8], i.e. SPI_USR_COMMAND_VALUE[SPI_USR_COMMAND _BITLEN:8], is sent.
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         If
         <a href="#page-652-0">
          SPI_WR_BIT_ORDER
         </a>
         is cleared,
         <a href="#page-651-1">
          SPI_USR_COMMAND_VA
         </a>
         LUE[7:0] is sent first, and then the higher part of
         <a href="#page-651-1">
          SPI_USR_COMMAND_VA
         </a>
         LUE[15:8], i.e.
         <a href="#page-651-1">
          SPI_USR_COMMAND_VALUE[15:15 -
         </a>
         <a href="#page-651-1">
          SPI_USR
         </a>
         _COMMAN D
         <a href="#page-652-0">
          _BITLEN], is sent.
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The configuration
   <a href="#page-651-1">
    of address value is as follows
   </a>
   :
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If SP
     <a href="#page-651-1">
      I_USR_ADDR_BITLE
     </a>
     N &lt; 8, the address value is written to SPI_USR_ADDR_VALUE[31:24]. Address value is sent as follows.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is set, the lower part of SPI_USR_ADDR_VALUE[31:24], i.e. SPI_USR_ADD
       <a href="#page-651-0">
        R_VALUE[SPI_USR_AD
       </a>
       DR_BITLEN + 24:24], is sent first.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is cleared, the higher part of SPI_USR_ADDR_VALUE[31:24], i.e. S
       <a href="#page-652-0">
        PI_USR_ADDR_
       </a>
       <a href="#page-648-0">
        VALUE[31
       </a>
       :31 -
       <a href="#page-651-0">
        SPI_USR_ADDR_BIT
       </a>
       LEN], is sent first.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If 7 &lt; SPI_USR_ADDR_BITLEN &lt; 16, the ADDR value is written to SPI_USR_ADDR_VALUE[31:16]. Address value is sent as follows.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is set, SPI_USR_ADDR_VALUE[31:24] is sent first, and then the lower part of
       <a href="#page-651-0">
        SPI_USR_ADDR_VALUE[2
       </a>
       3:16], i.e. SPI_USR_ADDR_VALUE[
       <a href="#page-648-0">
        SPI_USR_ADDR_BITLEN
       </a>
       + 8:16], is sent.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is cleared, SPI_USR_ADDR_VALUE[31:24] is sent first, and then the higher part of
       <a href="#page-652-0">
        SPI_USR_ADDR
       </a>
       _VALU
       <a href="#page-648-0">
        E[23:16], i.e.
       </a>
       SPI_USR_ADDR_VALUE[23:31 - SPI_USR_ADDR_BITLEN],
       <a href="#page-648-0">
        is sent.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If 15 &lt;
     <a href="#page-652-0">
      SPI_USR_ADDR_BITL
     </a>
     EN &lt; 24, t
     <a href="#page-648-0">
      he ADDR value is written
     </a>
     to SPI_USR_ADDR_VALUE[31:8]. Address value is sen
     <a href="#page-648-0">
      t as follows.
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is set, SPI_USR_ADDR_VALUE[31:16] is sent first, and then the lower part of S
       <a href="#page-651-0">
        PI_USR_ADDR_VALUE[15
       </a>
       :8], i.e. SPI_USR_ADDR_VALUE[SP
       <a href="#page-648-0">
        I_USR_ADDR_BITLEN
       </a>
       - 8:8], is sent.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is cleared, SPI_USR_ADDR_VALUE[31:16] is sent first, and then the higher part of
       <a href="#page-652-0">
        SPI_USR_ADDR
       </a>
       _VALUE[15:8], i.e.
       <a href="#page-648-0">
        SPI_USR_AD
       </a>
       DR_VALUE[15:31 - SPI_USR_ADDR_BITLEN],
       <a href="#page-648-0">
        is sent.
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If 23 &lt;
     <a href="#page-652-0">
      SPI_USR_ADDR_BIT
     </a>
     LEN &lt; 32,
     <a href="#page-648-0">
     </a>
     t
     <a href="#page-648-0">
      he ADDR value is written
     </a>
     to SPI_USR_ADDR_VALUE[31:0]. Address value is sen
     <a href="#page-648-0">
      t as follows.
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is set, SPI_USR_ADDR_VALUE[31:8] is sent first, and then the lower part of S
       <a href="#page-651-0">
        PI_USR_ADDR_VALUE[7:0
       </a>
       ], i.e. SPI_USR_ADDR_VALUE[SPI
       <a href="#page-648-0">
        _USR_ADDR_BITLEN
       </a>
       - 24:0], is sent.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If SPI_WR_BIT_ORDER is cleared, SPI_USR_ADDR_VALUE[31:8] is sent first, and then the higher part of
       <a href="#page-652-0">
        SPI_USR_ADDR_VAL
       </a>
       UE[7:0], i.e.
       <a href="#page-648-0">
        SPI_USR_ADDR_V
       </a>
       ALUE[7:31 - SPI_USR_ADDR_BITLEN], is sent.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   27.5.8.3
   <a href="#page-652-0">
    Full-Duplex Comm
   </a>
   unicatio
   <a href="#page-648-0">
    n (1-bit Mode Only)
   </a>
  </h1>
  <h4>
   <span id="page-625-0">
   </span>
   Introduction
  </h4>
  <p block-type="Text">
   GP-SPI2 supports SPI full-duplex communication. In this mode, SPI master provides CLK and CS signals, exchanging data with SPI slave in 1-bit mode via MOSI (FSPID, sending) and MISO (FSPIQ, receiving) at the same time. To enable this communication mode, set the bit SPI_DOUTDIN in register SPI_USER_REG. Figure 27.5-6 illustrates the connection of GP-SPI2 with its slave in full-duplex communication.
  </p>
  <p>
   <img src="_page_625_Figure_12.jpeg"/>
  </p>
  <p>
   <span id="page-625-1">
   </span>
   Figure 27.5-6. Full-Duplex Communication Between GP-SPI2 Master and a Slave
  </p>
  <p block-type="Text">
   In full-duplex communication, the behavior of states CMD, ADDR, DUMMY, DOUT and DIN are configurable. Usually, the states CMD, ADDR and DUMMY are not used in this communication. The bit length of transferred data is configured in SPI_MS_DATA_BITLEN. The actual bit length used in communication equals to (SPI_MS_DATA_BITLEN + 1).
  </p>
  <p block-type="Text">
   Espressif Systems 626
  </p>
  <h4>
   Configuration
  </h4>
  <p block-type="Text">
   To start a data transfer, follow the steps below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure the IO path via IO MUX or GPIO matrix between GP-SPI2 and an external SPI device.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure APB clock (APB_CLK, see Chapter 6
     <i>
      Reset and Clock
     </i>
     ) and module clock (clk_spi_mst) for the GP-SPI2 module.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set SPI_DOUTDIN and clear SPI_SLAVE_MODE, to enable full-duplex communication in master mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure GP-SPI2 registers listed in Table 27.
     <a href="#page-190-0">
      5-7.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Co
     <a href="#page-649-0">
      nfigure SPI CS s
     </a>
     etup time
     <a href="#page-656-0">
      and hold time acco
     </a>
     rding to Section 27.6.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set the property of FSPICLK according to
     <a href="#page-622-1">
      Sectio
     </a>
     n 27.7.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Prepare data according to the selected transfer mode:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In CPU-controlled MOSI mode, prepare data
       <a href="#page-639-2">
       </a>
       i
       <a href="#page-639-2">
        n re
       </a>
       gisters SPI_W0_REG ~ SPI_W15_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       In DMA-controlled mode,
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * configure SPI_DMA_TX_ENA/SPI_DMA_RX_ENA
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * configure GDMA TX/RX link
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * start GDM
         <a href="#page-655-0">
          A TX/RX engine, as described in Sectio
         </a>
         n 27.5.6 and Section 27.5.7.
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure interrupts and wait for SPI slave to get ready for transfer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set SPI_DMA_AFIFO_RST, SPI_BUF_AFIFO_RST, and SPI_R
     <a href="#page-615-1">
      X_AFI
     </a>
     FO_RST to re
     <a href="#page-617-1">
      set the
     </a>
     se buffers.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set SPI_USR in register SPI_CMD_REG to start the transfer and wait for the configured interrupts.
    </li>
   </ul>
  </p>
  <h1>
   27.5.8.4
   <a href="#page-655-0">
    Half-Duplex Communication (1/2/4
   </a>
   -bit
   <a href="#page-655-0">
    Mode)
   </a>
  </h1>
  <h4>
   <span id="page-626-0">
   </span>
   Introduct
   <a href="#page-647-1">
    ion
   </a>
  </h4>
  <p block-type="Text">
   In this mode, GP-SPI2 provides CLK and CS signals. Only one side (SPI master or slave) can send data at a time, while the other side receives the data. To enable this communication mode, clear the bit SPI_DOUTDIN in register SPI_USER_REG. The standard format of SPI half-duplex communication is CMD + [ADDR +] [DUMMY +] [DOUT or DIN]. The states ADDR, DUMMY, DOUT, and DIN are optional, and can be disabled or enabled independently.
  </p>
  <p block-type="Text">
   As descri
   <a href="#page-649-0">
    bed in Section
   </a>
   27.5.8.2, the properties of GP-SPI2 states: CMD, ADDR, DUMMY, DOUT and DIN, such as cycle length, value, and parallel bus bit mode, can be set independently. For the register configuration, see Table 27.5-7.
  </p>
  <p block-type="Text">
   The detailed properties
   <a href="#page-622-0">
    of half-d
   </a>
   uplex GP-SPI2 are as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1.
     <a href="#page-622-1">
      CMD:
     </a>
     0 ~ 16 bits, master output, slave input.
    </li>
    <li block-type="ListItem">
     2. ADDR: 0 ~ 32 bits, master output, slave input.
    </li>
    <li block-type="ListItem">
     3. DUMMY: 0 ~ 256 FSPICLK cycles, master output, slave input.
    </li>
    <li block-type="ListItem">
     4. DOUT: 0 ~ 512 bits (64 B) in CPU-controlled mode and 0 ~ 256 Kbits (32 KB) in DMA-controlled mode, master output, slave input.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   5. DIN: 0 ~ 512 bits (64 B) in CPU-controlled mode and 0 ~ 256 Kbits (32 KB) in DMA-controlled mode, master input, slave output.
  </p>
  <h4>
   Configuration
  </h4>
  <p block-type="Text">
   The register configuration is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure the IO path via IO MUX or GPIO matrix between GP-SPI2 and an external SPI device.
    </li>
    <li block-type="ListItem">
     2. Configure APB clock (APB_CLK) and module clock (clk_spi_mst) for the GP-SPI2 module.
    </li>
    <li block-type="ListItem">
     3. Clear SPI_DOUTDIN and SPI_SLAVE_MODE, to enable half-duplex communication in master mode.
    </li>
    <li block-type="ListItem">
     4. Configure GP-SPI2 registers listed in Table 27.5-7.
    </li>
    <li block-type="ListItem">
     5. Confi
     <a href="#page-649-0">
      gure SPI CS se
     </a>
     tup
     <a href="#page-656-0">
     </a>
     t
     <a href="#page-656-0">
      ime and hold time
     </a>
     according to Section 27.6.
    </li>
    <li block-type="ListItem">
     6. Set the property of FSPICLK according to
     <a href="#page-622-1">
      Sectio
     </a>
     n 27.7.
    </li>
    <li block-type="ListItem">
     7. Prepare data according to the selected transfer mode:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       In CPU-controlled MOSI mode, prepare data
       <a href="#page-639-2">
       </a>
       i
       <a href="#page-639-2">
        n re
       </a>
       gisters SPI_W0_REG ~ SPI_W15_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       In DMA-controlled mode,
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         configure SPI_DMA_TX_ENA/SPI_DMA_RX_ENA
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         configure GDMA TX/RX link
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         start GDM
         <a href="#page-655-0">
          A TX/RX engine, as described in Sectio
         </a>
         n 27.5.6 and Section 27.5.7.
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     8. Configure interrupts and wait for SPI slave to get ready for transfer.
    </li>
    <li block-type="ListItem">
     9. Set SPI_DMA_AFIFO_RST, SPI_BUF_AFIFO_RST, and SPI_R
     <a href="#page-615-1">
      X_AFI
     </a>
     FO_RST to re
     <a href="#page-617-1">
      set the
     </a>
     se buffers.
    </li>
    <li block-type="ListItem">
     10. Set SPI_USR in register SPI_CMD_REG to start the transfer and wait for the configured interrupts.
    </li>
   </ul>
  </p>
  <h4>
   Applicati
   <a href="#page-655-0">
    on Example
   </a>
  </h4>
  <p block-type="Text">
   The follo
   <a href="#page-647-1">
    wing exam
   </a>
   ple shows
   <a href="#page-647-1">
    how GP-SPI2 t
   </a>
   o access flash and external RAM in master half-duplex mode.
  </p>
  <p>
   <span id="page-628-1">
   </span>
   <img src="_page_628_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 27.5-7. Connection of GP-SPI2 to Flash and External RAM in 4-bit Mode
  </p>
  <p block-type="Text">
   Figure 27.5-8 indicates GP-SPI2 Quad I/O Read sequence according to standard flash specification. Other GP-SPI2 command sequences are implemented in accordance with the requirements of SPI slaves.
  </p>
  <p>
   <span id="page-628-2">
   </span>
   <img src="_page_628_Figure_3.jpeg"/>
  </p>
  <p>
   Figure 27.5-8. SPI Quad I/O Read Command Sequence Sent by GP-SPI2 to Flash
  </p>
  <h1>
   27.5.8.5 DMA-Controlled Configurable Segmented Transfer
  </h1>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   <span id="page-628-0">
   </span>
   Note that there is no separate section on how to configure a single transfer in master mode, since the CONF state of a configurable segmented transfer can be skipped to implement a single transfer.
  </p>
  <h2>
   Introduction
  </h2>
  <p block-type="Text">
   When GP-SPI2 works as a master, it provides a feature named: configurable segmented transfer controlled by DMA.
  </p>
  <p block-type="Text">
   A DMA-controlled transfer in master mode can be
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     a single transfer, consisting of only one transaction;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     or a configurable segmented transfer, consisting of several transactions (segments).
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In a configurable segmented transfer, the registers of its each single transaction (segment) are configurable.
  </p>
  <p block-type="Text">
   This feature enables GP-SPI2 to do as many as transactions (segments) as configured when such transfer is triggered once by CPU. Figure 27.5-9 shows how this feature works.
  </p>
  <p>
   <span id="page-629-0">
   </span>
   <img src="_page_629_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 27.5-9. Configurable Segmented Transfer in DMA-Controlled Master Mode
  </p>
  <p block-type="Text">
   As shown in Figure 27.5-9, the registers for one transaction (segment
   <i>
    n
   </i>
   ) can be reconfigured by GP-SPI2 hardware according to the content in its Conf_buf
   <i>
    n
   </i>
   during a CONF state, before this segment starts.
  </p>
  <p block-type="Text">
   It's recommended to provide separate GDMA CONF links and CONF buffers (Conf_buf
   <i>
    i
   </i>
   in Figure 27.5-9) for each CONF state.
   <a href="#page-629-0">
    A GDMA
   </a>
   TX link is used to connect all the CONF buffers and TX data buffers (Tx_buf
   <i>
    i
   </i>
   in Figure 27.5-9) into a chain. Hence, the behavior of the FSPI bus in each segment can be controlled independently.
  </p>
  <p block-type="Text">
   For example, in a configurable segmentent transfer, its segment
   <i>
    i
   </i>
   , segment
   <i>
    j
   </i>
   , and segment
   <i>
    k
   </i>
   can be configured to full-
   <a href="#page-629-0">
    duplex
   </a>
   , half-duplex MISO, and half-duplex MOSI, respectively.
   <i>
    i
   </i>
   ,
   <i>
    j
   </i>
   , and
   <i>
    k
   </i>
   are integer variables, which can be any segment number.
  </p>
  <p block-type="Text">
   Meanwhile, the state of GP-SPI2, the data length and cycle length of the FSPI bus, and the behavior of the GDMA, can be configured independently for each segment. When this whole DMA-controlled transfer (consisting of several segments) has finished, a GP-SPI2 interrupt, SPI_DMA_SEG_TRANS_DONE_INT, is triggered.
  </p>
  <h4>
   Configuration
  </h4>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. Configure the IO path via IO MUX or GPIO matrix between GP-
     <a href="#page-643-0">
      SPI2 and an external SPI device.
     </a>
    </li>
    <li block-type="ListItem">
     2. Configure APB clock (APB_CLK) and module clock (clk_spi_mst) for GP-SPI2 module.
    </li>
    <li block-type="ListItem">
     3. Clear SPI_DOUTDIN and SPI_SLAVE_MODE, to enable half-duplex communication in master mode.
    </li>
    <li block-type="ListItem">
     4. Configure GP-SPI2 registers listed in Table 27.5-7.
    </li>
    <li block-type="ListItem">
     5. Confi
     <a href="#page-649-0">
      gure SPI CS se
     </a>
     tup
     <a href="#page-656-0">
     </a>
     t
     <a href="#page-656-0">
      ime and hold time
     </a>
     according to Section 27.6.
    </li>
    <li block-type="ListItem">
     6. Set the property of FSPICLK according to
     <a href="#page-622-1">
      Sectio
     </a>
     n 27.7.
    </li>
    <li block-type="ListItem">
     7. Prepare descriptors for GDMA CONF buffer and TX data (optional
     <a href="#page-637-1">
      ) for
     </a>
     each segment. Chain the descriptors of CONF buffer and TX buffers of several segments into one linked list.
    </li>
    <li block-type="ListItem">
     8. Similarly, prepare descriptors for RX buffers for ea
     <a href="#page-639-2">
      ch se
     </a>
     gment and chain them into one linked list.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     9. Configure all the needed CONF buffers, TX buffers and RX buffers, respectively for each segment before this DMA-controlled transfer begins.
    </li>
    <li block-type="ListItem">
     10. Point GDMA_OUTLINK_ADDR_CH
     <i>
      n
     </i>
     to the head address of the CONF and TX buffer descriptor linked list, and then set GDMA_OUTLINK_START_CH
     <i>
      n
     </i>
     to start the TX GDMA.
    </li>
    <li block-type="ListItem">
     11. Clear the bit SPI_RX_EOF_EN in register SPI_DMA_CONF_REG. Point GDMA_INLINK_ADDR_CH
     <i>
      n
     </i>
     to the head
     <a href="#page-81-0">
      address of the RX buffer desc
     </a>
     riptor linked list, and then set GDMA_INLINK_START_CH
     <i>
      n
     </i>
     to start the RX GDMA.
    </li>
    <li block-type="ListItem">
     12. Set SPI_USR_CONF
     <a href="#page-655-0">
      to enable
     </a>
     CONF sta
     <a href="#page-655-0">
      te.
     </a>
    </li>
    <li block-type="ListItem">
     13. Set SPI_DMA_SEG_TRANS_DONE_INT_ENA to enable the SPI_D
     <a href="#page-79-0">
      MA_SEG_TRANS_DONE_INT
     </a>
     interrupt. Configure other interrupts if needed according to Section 27.9.
    </li>
    <li block-type="ListItem">
     14. Wai
     <a href="#page-656-0">
      t for all the slave
     </a>
     s to get ready for transfer.
    </li>
    <li block-type="ListItem">
     15. Set
     <a href="#page-663-0">
      SPI_DMA_AFIFO_RST,
     </a>
     SPI_BUF_AFIFO_RST and SPI
     <a href="#page-643-0">
      _RX_AFIFO_RST, to reset these buff
     </a>
     ers.
    </li>
    <li block-type="ListItem">
     16. Set SPI_USR to start this DMA-controlled transfer.
    </li>
    <li block-type="ListItem">
     17. Wait for
     <a href="#page-655-0">
      SPI_DMA_SEG_TRANS_DONE_INT
     </a>
     interrupt,
     <a href="#page-655-0">
      which means this tra
     </a>
     nsfer has finished and the data has been stored into corresponding memory.
    </li>
   </ul>
  </p>
  <h4>
   Configur
   <a href="#page-647-1">
    ation of C
   </a>
   ONF Buffer and Magic Value
  </h4>
  <p block-type="Text">
   On GP-SPI2,
   <a href="#page-643-0">
    only registers which will change from
   </a>
   the last transaction (segment) need to be re-configured to new values in CONF state. The configuration of other registers can be skipped (i.e. kept the same) to save time and chip resources.
  </p>
  <p block-type="Text">
   The first word in GDMA CONF buffer
   <i>
    i
   </i>
   , called SPI_BIT_MAP_WORD, defines whether each GP-SPI2 register is to be updated or not in segment
   <i>
    i
   </i>
   . The relation of SPI_BIT_MAP_WORD and GP-SPI2 registers to update can be seen in Table 27.5-8 Bitmap (BM) Table. If a bit in the BM table is set to 1, its corresponding register value will be updated in this segment. Otherwise, if some registers should be kept from being changed, the related bits should be set to 0.
  </p>
  <span id="page-630-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 27.5-8. GP-SPI2 Master BM Table for CONF State
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      BM Bit
     </td>
     <td>
      Register Name
     </td>
     <td>
      BM Bit
     </td>
     <td>
      Register Name
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      SPI_ADDR_REG
     </td>
     <td>
      7
     </td>
     <td>
      SPI_MISC_REG
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      SPI_CTRL_REG
     </td>
     <td>
      8
     </td>
     <td>
      SPI_DIN_MODE_REG
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      SPI_CLOCK_REG
     </td>
     <td>
      9
     </td>
     <td>
      SPI_DIN_NUM_REG
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      SPI_USER_REG
     </td>
     <td>
      10
     </td>
     <td>
      SPI_DOUT_MODE_REG
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
      SPI_USER1_REG
     </td>
     <td>
      11
     </td>
     <td>
      SPI_DMA_CONF_REG
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      SPI_USER2_REG
     </td>
     <td>
      12
     </td>
     <td>
      SPI_DMA_INT_ENA_REG
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 27.5-8. GP-SPI2 Master BM Table for CONF State
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Then new values of all the
   <a href="#page-651-1">
   </a>
   r
   <a href="#page-651-1">
    egisters to be mo
   </a>
   dified should be placed
   <a href="#page-663-0">
    right after SPI_BIT_MAP_W
   </a>
   ORD, in consecutive words in the C
   <a href="#page-653-0">
    ONF buffer.
   </a>
  </p>
  <p block-type="Text">
   To ensure the correctness of the content in each CONF buffer, the value in SPI_BIT_MAP_WORD[31:28] is used as "magic value", and will be compared with SPI_DMA_SEG_MAGIC_VALUE in the register SPI_SLAVE_REG. The value of SPI_DMA_SEG_MAGIC_VALUE should be configured before this DMA-controlled transfer starts, and can not be changed during these segments.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If SPI_BIT_MAP_WORD[31:28] == SPI_DMA_SEG_MAGIC_VALUE, this DMA-controlled transfer continues normally; the interrupt SPI_DMA_SEG_TRANS_DONE_INT is triggered at the end of this DMA-controlled transfer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If SPI_BIT_MAP_WORD[31:28] !=
     <a href="#page-656-0">
      SPI_DMA_SEG_MAGIC_VALUE,
     </a>
     GP-SPI2 state (spi_st) goes back to IDLE and the transfer
     <a href="#page-643-0">
     </a>
     i
     <a href="#page-643-0">
      s ended immediately. The interrupt
     </a>
     SPI_DMA_SEG_TRANS_DONE_INT is still triggered, with SPI_SEG_MAGIC_ERR_INT_RAW bit set to 1.
    </li>
   </ul>
  </p>
  <h4>
   CONF Buffer Configuration Example
  </h4>
  <p block-type="Text">
   Table 27.5-9 and Table 27.5-10
   <a href="#page-667-0">
    provide an example to s
   </a>
   how how
   <a href="#page-643-0">
    to configure a CONF buffer for a tra
   </a>
   nsaction (segment
   <i>
    i
   </i>
   ) whose SPI_ADDR_REG, SPI_CTRL_REG, SPI_CLOCK_REG, SPI_USER_REG, SPI_USER1_REG need to be updated. Table 27.5-9. An Example of CONF buffer
   <i>
    <sup>
     i
    </sup>
   </i>
   in Segment
   <i>
    <sup>
     i
    </sup>
   </i>
  </p>
  <span id="page-631-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      need to be updated.
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="4">
      Table 27.5-9. An Example of CONF bufferi in Segmenti
     </td>
    </tr>
    <tr>
     <td>
      CONF bufferi
     </td>
     <td>
      Note
     </td>
    </tr>
    <tr>
     <td>
      SPI_BIT_MAP_WORD
     </td>
     <td>
      The first word in this buffer.
      <br/>
      Its value is 0xA000001F in this ex
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      ample when the SPI_DMA_SEG_MAGIC_VALUE is set to 0xA. As
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      shown in Table 27.5-10, bits 0, 1, 2, 3, and 4 are set, indicating the
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      following registers will be updated.
     </td>
    </tr>
    <tr>
     <td>
      SPI_ADDR_REG
     </td>
     <td>
      The second word, stores the new value to SPI_ADDR_REG.
     </td>
    </tr>
    <tr>
     <td>
      SPI_CTRL_REG
     </td>
     <td>
      The third word, stores the new value to SPI_CTRL_REG.
     </td>
    </tr>
    <tr>
     <td>
      SPI_CLOCK_REG
     </td>
     <td>
      The fourth word, stores the new value to SPI_CLOCK_REG.
     </td>
    </tr>
   </tbody>
  </table>
  <p>
  </p>
  <h4>
   <a href="#page-649-0">
    Table 2
   </a>
   <a href="#page-651-0">
    7
   </a>
   .5-10. BM Bit Value v.s. Register to Be Updated
   <a href="#page-649-0">
    in This Exampl
   </a>
   <a href="#page-651-0">
    e
   </a>
  </h4>
  <span id="page-631-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 27.5-10. BM Bit Value v.s. Register to Be Updated in This Example
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      BM Bit
     </td>
     <td>
      Value
     </td>
     <td>
      Register Name
     </td>
     <td>
      BM Bit
     </td>
     <td>
      Value
     </td>
     <td>
      Register Name
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      SPI_ADDR_REG
     </td>
     <td>
      7
     </td>
     <td>
      0
     </td>
     <td>
      SPI_MISC_REG
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      SPI_CTRL_REG
     </td>
     <td>
      8
     </td>
     <td>
      0
     </td>
     <td>
      SPI_DIN_MODE_REG
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      SPI_CLOCK_REG
     </td>
     <td>
      9
     </td>
     <td>
      0
     </td>
     <td>
      SPI_DIN_NUM_REG
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      1
     </td>
     <td>
      SPI_USER_REG
     </td>
     <td>
      10
     </td>
     <td>
      0
     </td>
     <td>
      SPI_DOUT_MODE_REG
     </td>
    </tr>
    <tr>
     <td>
      4
     </td>
     <td>
      1
     </td>
     <td>
      SPI_USER1_REG
     </td>
     <td>
      11
     </td>
     <td>
      0
     </td>
     <td>
      SPI_DMA_CONF_REG
     </td>
    </tr>
    <tr>
     <td>
      5
     </td>
     <td>
      0
     </td>
     <td>
      SPI_USER2_REG
     </td>
     <td>
      12
     </td>
     <td>
      0
     </td>
     <td>
      SPI_DMA_INT_ENA_REG
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Notes:
  </h4>
  <p block-type="Text">
   In a DMA-controlled configur
   <a href="#page-653-0">
    able segmented trans
   </a>
   fer, please pay special att
   <a href="#page-665-0">
    ention to the following bit
   </a>
   s:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_USR_CONF: set SPI_USR_CONF before SPI_USR is set, to enable this transfer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_USR_CONF_NXT: if segment
     <i>
      i
     </i>
     is not the final transaction of this whole DMA-controlled transfer, its SPI_USR_CONF_NXT should be set to 1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-656-0">
      SPI_CONF_BITL
     </a>
     EN:
     <a href="#page-656-0">
      GP-SPI2 CS setu
     </a>
     p time
     <a href="#page-647-1">
      and hold t
     </a>
     ime are programmable independently in each
     <a href="#page-649-0">
      segment, see Section
     </a>
     27.6 for detailed configuration. The CS high time in each segment is about:
    </li>
   </ul>
  </p>
  <p block-type="Text">
   (
   <i>
    SP I
   </i>
   _
   <i>
    CONF
   </i>
   _
   <i>
    BIT LEN
   </i>
   + 5)
   <i>
    × TAP B
   </i>
   _
   <i>
    CLK
   </i>
  </p>
  <p block-type="Text">
   The CS high time in CONF state can be set from 62.5
   <i>
    µs
   </i>
   to 3.2768 ms when
   <i>
    f
   </i>
   APB_CLK is 80 MHz. (SPI_CONF_ BITLEN + 5) will overflow from (0x40000 - SPI_CONF_BITLEN - 5) if SPI_CONF_BITLEN is larger than
  </p>
  <p block-type="Text">
   0x3FFFA.
  </p>
  <h1>
   27.5
   <a href="#page-647-1">
    .9
   </a>
   GP-SPI2 Works as a Slav
   <a href="#page-647-1">
    e
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-632-0">
   </span>
   GP-SPI2 can be used as a slave to communicate with an SPI master. As a slave, GP-SPI2 supports 1-bit SPI, 2-bit dual SPI, 4-bit quad SPI, and QPI modes, with specific communication formats. To enable this mode, set SPI_SLAVE_MODE in register SPI_SLAVE_REG.
  </p>
  <p block-type="Text">
   The CS signal must be held low during the transmission, and its falling/rising edges indicate the start/end of a single or segmented transmission. The length of transferred data must be in unit of bytes, otherwise the extra
   <a href="#page-656-0">
    bits will be lost. Th
   </a>
   e extra bit
   <a href="#page-656-0">
    s here means the
   </a>
   result of total bits % 8.
  </p>
  <h1>
   27.5.9.1 Communication Formats
  </h1>
  <p block-type="Text">
   <span id="page-632-1">
   </span>
   In GP-SPI2 slave mode, SPI full-duplex and half-duplex communications are available. To select from the two communications, configure SPI_DOUTDIN in register SPI_USER_REG.
  </p>
  <p block-type="Text">
   Full-duplex communication means that input data and output data are transmitted simultaneously throughout the entire transaction. All bits are treated as input or output data, which means no command, address or dummy states are expected
   <a href="#page-649-0">
    . The interrupt
   </a>
   SPI_TRAN
   <a href="#page-649-0">
    S_DONE_INT
   </a>
   is triggered once the transaction ends.
  </p>
  <p block-type="Text">
   In half-duplex communication, the format is CMD+ADDR+DUMMY+DATA (DIN or DOUT).
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     "DIN" means that an SPI master read
     <a href="#page-643-0">
      s data from GP-SPI2.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     "DOUT" means that an SPI master writes data to GP-SPI2.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The detailed properties of each state are as follows:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. CMD:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Indicate the function of SPI slave;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       One byte from master to slave;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Only the values in Table 27.5-11 and Table 27.5-12 are valid;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Can be sent in 1-bit SPI mode or 4-bit QPI mode.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     2. ADDR:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       The address for Wr_BUF and Rd_BUF commands in CPU-controlled transfer, or placeholder bits in other transfers and can be defined by application;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       One byte from master to slave;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Can be sent in 1-bit, 2-bit or 4-bit modes (according to the command).
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     3. DUMMY:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       It's value is meaningless. SPI slave prepares data in this state;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Bit mode of FSPI bus is also meaningless here;
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Last for eight SPI_CLK cycles.
    </li>
    <li block-type="ListItem">
     4. DIN or DOUT:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Data length can be 0 ~ 64 B in CPU-controlled mode and unlimited in DMA-controlled mode;
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Can be sent in 1-bit, 2-bit or 4-bit modes according to the CMD value.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   The states of ADDR and DUMMY can never be omitted in any half-duplex communications.
  </p>
  <p block-type="Text">
   When a half-duplex transaction is complete, the transferred CMD and ADDR values are latched into SPI_SLV_
  </p>
  <p block-type="Text">
   LAST_COMMAND and SPI_SLV_LAST_ADDR respectively. The SPI_SLV_CMD_ERR_INT_RAW will be set if the transferred CMD value is not supported by GP-SPI2 slave mode. The SPI_SLV_CMD_ERR_INT_RAW can only
   <a href="#page-657-1">
    be cleare
   </a>
   d by software.
  </p>
  <h2>
   27.5.9.2 Supported CMD Values in Half-Duplex Commu
   <a href="#page-667-0">
    nication
   </a>
  </h2>
  <p block-type="Text">
   <span id="page-633-0">
   </span>
   In half-duplex communication, the defined values of CMD determine the transfer types. Unsupported CMD values are disregarded, meanwhile the related transfer is ignored and SPI_SLV_CMD_ERR_INT_RAW is set. The transfer format is CMD (8 bits) + ADDR (8 bits) + DUMMY (8 SPI_CLK cycles) + DATA (unit in bytes). The detailed description of CMD[3:0] is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. 0x1 (Wr_BUF): CPU-controlled write mode. Master sends data
     <a href="#page-667-0">
     </a>
     a
     <a href="#page-667-0">
      nd GP-SPI2 receives data. Th
     </a>
     e data is stored in the related address of SPI_W0_REG ~ SPI_W15_REG.
    </li>
    <li block-type="ListItem">
     <span id="page-633-2">
     </span>
     2. 0x2 (Rd_BUF): CPU-controlled read mode. Master receives the data sent by GP-SPI2. The data comes from the related address of SPI_W0_REG ~ SPI_W15_REG.
    </li>
    <li block-type="ListItem">
     3. 0x3 (Wr_DMA): DMA-controlled
     <a href="#page-670-0">
      write mode. M
     </a>
     a
     <a href="#page-674-0">
      ster sends dat
     </a>
     a and GP-SPI2 receives data. The data is stored in GP-SPI2 GDMA RX buffer.
    </li>
    <li block-type="ListItem">
     <span id="page-633-3">
     </span>
     4. 0x4 (Rd_DMA): DMA-contr
     <a href="#page-670-0">
      olled read mod
     </a>
     e.
     <a href="#page-674-0">
      Master receiv
     </a>
     es the data sent by GP-SPI2. The data comes from GP-SPI2 GDMA TX buffer.
    </li>
    <li block-type="ListItem">
     5. 0x7 (CMD7): used to generate an SPI_SLV_CMD7_INT interrupt. It can also generate a GDMA_IN_SUC_EOF _CH
     <i>
      n
     </i>
     _INT interrupt in a slave segmented transfer when GDMA RX link is used. But it will not end GP-SPI2's slave segmented transf
     <a href="#page-643-0">
      er.
     </a>
    </li>
    <li block-type="ListItem">
     <span id="page-633-1">
     </span>
     6. 0x8 (CMD8): only used to generate an SPI_SLV_CMD8_INT interrupt, which will not end GP-SPI2's slave segmented transfer.
    </li>
    <li block-type="ListItem">
     7. 0x9 (CMD9): only used to generate an SPI_SLV_CMD9_INT interrupt, which will not end GP-SPI2's slave segmented transfer.
    </li>
    <li block-type="ListItem">
     8. 0xA (CMDA): only used to generate an SPI_SLV_CMDA_INT interrupt, which will not end GP-SPI2's slave segmented transfer.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The detail function of CMD7, CMD8, CMD9, and CMDA commands is reserved for user definition. These commands can be used as handshake signa
   <a href="#page-643-0">
    ls, the passwords of
   </a>
   some specific functions, the triggers of some user defined actions, and so on.
  </p>
  <p block-type="Text">
   1/2/4-bit modes in states of CMD, ADDR, DATA are supported, which are determined by value of CMD[7:4]. The DUMMY state is always in 1-bit mode and lasts for eight SPI_CLK cycles. The definition of CMD[7:4] is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. 0x0: CMD, ADDR, and DATA states all are in 1-bit mode.
    </li>
    <li block-type="ListItem">
     2. 0x1: CMD and ADDR are in 1-bit mode. DATA is in 2-bit mode.
    </li>
    <li block-type="ListItem">
     3. 0x2: CMD and ADDR are in 1-bit mode. DATA is in 4-bit mode.
    </li>
    <li block-type="ListItem">
     4. 0x5: CMD is in 1-bit mode. ADDR and DATA are in 2-bit mode.
    </li>
    <li block-type="ListItem">
     5. 0xA: CMD is in 1-bit mode, ADDR and DATA are in 4-bit mode. Or in QPI mode.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In addition, if the value of CMD[7:0] is 0x05, 0xA5, 0x06, or 0xDD, DUMMY and DATA states are omitted. The definition of CMD[7:0] is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. 0x05 (End_SEG_TRANS): master sends 0x05 command to end slave segmented transfer in SPI mode.
    </li>
    <li block-type="ListItem">
     2. 0xA5 (End_SEG_TRANS): master sends 0xA5 command to end slave segmented transfer in QPI mode.
    </li>
    <li block-type="ListItem">
     <span id="page-634-1">
     </span>
     3. 0x06 (En_QPI): GP-SPI2 enters QPI mode when receiving the 0x06 command and the bit SPI_QPI_MODE in register SPI_USER_REG is set.
    </li>
    <li block-type="ListItem">
     4. 0xDD (Ex_QPI): GP-SPI2 exits QPI mode when receiving the 0xDD command and the bit SPI_QPI_MODE is cleared.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   All th
   <a href="#page-649-0">
    e GP-SPI2 suppo
   </a>
   rted CMD
   <a href="#page-649-0">
    values are listed
   </a>
   in Table 27.5-11 and Table 27.5-12. Note that DUMMY state is always in 1-bit mode and lasts for eight SPI_CLK cycles.
  </p>
  <span id="page-634-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 27.5-11. Supported CMD Values in SPI Mode
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Transfer Type
     </td>
     <td>
      CMD[7:0]
      <br/>
      0x01
     </td>
     <td>
      CMD State
      <br/>
      1-bit mode
     </td>
     <td>
      ADDR State
      <br/>
      1-bit mode
     </td>
     <td>
      DATA State
      <br/>
      1-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x11
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x21
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
      Wr_BUF
     </td>
     <td>
      0x51
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
     <td>
      2-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0xA1
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x02
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x12
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x22
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
      Rd_BUF
     </td>
     <td>
      0x52
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
     <td>
      2-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0xA2
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x03
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x13
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
    </tr>
    <tr>
     <td>
      Wr_DMA
     </td>
     <td>
      0x23
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x53
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
     <td>
      2-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0xA3
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x04
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x14
      <br/>
      0x24
     </td>
     <td>
      1-bit mode
      <br/>
      1-bit mode
     </td>
     <td>
      1-bit mode
      <br/>
      1-bit mode
     </td>
     <td>
      2-bit mode
      <br/>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
      Rd_DMA
     </td>
     <td>
      0x54
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
     <td>
      2-bit mode
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0xA4
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 27.5-11. Supported C
   <a href="#page-634-0">
    MD Val
   </a>
   ues in SPI
   <a href="#page-635-0">
    Mode
   </a>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Table 27.5-11. Supported CMD Values in SPI Mode
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Transfer Type
     </td>
     <td>
      CMD[7:0]
     </td>
     <td>
      CMD State
     </td>
     <td>
      ADDR State
     </td>
     <td>
      DATA State
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x07
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x17
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      CMD7
     </td>
     <td>
      0x27
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x57
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0xA7
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x08
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x18
      <br/>
      0x28
     </td>
     <td>
      1-bit mode
      <br/>
      1-bit mode
     </td>
     <td>
      1-bit mode
      <br/>
      1-bit mode
     </td>
     <td>
      -
      <br/>
      -
     </td>
    </tr>
    <tr>
     <td>
      CMD8
     </td>
     <td>
      0x58
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0xA8
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x09
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x19
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x29
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      CMD9
     </td>
     <td>
      0x59
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0xA9
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x0A
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x1A
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      CMDA
     </td>
     <td>
      0x2A
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0x5A
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      2-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      0xAA
     </td>
     <td>
      1-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 27.5-11. Supported CMD Values in SPI Mode
  </p>
  <p>
   Table 27.5-12. Supported CMD Values in QPI Mode
  </p>
  <span id="page-635-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 27.5-12. Supported CMD Values in QPI Mode
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Transfer Type
     </td>
     <td>
      CMD[7:0]
     </td>
     <td>
      CMD State
     </td>
     <td>
      ADDR State
     </td>
     <td>
      DATA State
     </td>
    </tr>
    <tr>
     <td>
      Wr_BUF
     </td>
     <td>
      0xA1
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
      Rd_BUF
     </td>
     <td>
      0xA2
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
      Wr_DMA
     </td>
     <td>
      0xA3
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
      Rd_DMA
     </td>
     <td>
      0xA4
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
    </tr>
    <tr>
     <td>
      CMD7
     </td>
     <td>
      0xA7
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      CMD8
     </td>
     <td>
      0xA8
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      CMD9
     </td>
     <td>
      0xA9
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      CMDA
     </td>
     <td>
      0xAA
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      End_SEG_TRANS
     </td>
     <td>
      0xA5
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      4-bit mode
     </td>
     <td>
      -
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Master sends 0x06 CMD (En_QPI) to set GP-SPI2 slave to QPI mode and all the states of supported transfer will be in 4-bit mode afterwards. If 0xDD CMD (Ex_QPI) is received, GP-SPI2 slave will be back to SPI mode.
  </p>
  <p block-type="Text">
   Other transfer types than described in Table 27.5-11 and Table 27.5-12 are ignored. If the transferred data is not in unit of byte, GP-SPI2 can send or receive these extra bits (total bits % 8), however, the correctness of the
  </p>
  <p block-type="Text">
   Espressif Systems 636
  </p>
  <p block-type="Text">
   data is not guaranteed. But if the CS low time is longer than 2 APB clock (APB_CLK) cycles, SPI_TRANS_DONE_INT will be triggered. For more information on interrupts triggered at the end of transmissions, please refer to Section 27.9.
  </p>
  <h2>
   27.5.9.3
   <a href="#page-643-0">
    Slave Sing
   </a>
   le Transfer and Slave Segmented Transfer
  </h2>
  <p block-type="Text">
   <span id="page-636-0">
   </span>
   When GP-SPI2 works as a slave, it su
   <a href="#page-643-0">
    pport
   </a>
   s full-duplex and half-duplex communications controlled by DMA and by CPU. DMA-controlled transfer can be a single transfer, or a slave segmented transfer consisting of several transactions (segments). The CPU-controlled transfer can only be one single transfer, since each CPU-controlled transaction needs to be triggered by CPU.
  </p>
  <p block-type="Text">
   In a slave segmented transfer, all transfer types listed in Table 27.5-11 and Table 27.5-12 are supported in a single transaction (segment). It means that CPU-controlled transaction and DMA-controlled transaction can be mixed in one slave segmented transfer.
  </p>
  <p block-type="Text">
   It is recommended that in a slave segmented transfer:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CPU-controlled transaction is used for handshake communication and short data transfers.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DMA-controlled transaction is used for large data transfers.
    </li>
   </ul>
  </p>
  <h1>
   27.5.9.4 Configuration of Slave Single Transfer
  </h1>
  <p block-type="Text">
   <span id="page-636-1">
   </span>
   In slave mode, GP-SPI2 supports CPU/DMA-controlled full-duplex/half-duplex single transfers. The register configuration procedure is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure the IO path via IO MUX or GPIO matrix between GP-SPI2 and an external SPI device.
    </li>
    <li block-type="ListItem">
     2. Configure APB clock (APB_CLK).
    </li>
    <li block-type="ListItem">
     3. Set the bit SPI_SLAVE_MODE, to enable slave mode.
    </li>
    <li block-type="ListItem">
     4. Configure SPI_DOUTDIN:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: ena
       <a href="#page-656-0">
        ble full-duplex com
       </a>
       munication.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: e
       <a href="#page-649-0">
        nable half-duple
       </a>
       x communication.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     5. Prepare data:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       if CPU-controlled transfer mode is selected and GP-SPI2 is used to send data, then prepare data in registers SPI_W0_REG ~ SPI_W15_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       if DMA-controlled transfer mode is selected,
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         configure
         <a href="#page-670-0">
          SPI_DM
         </a>
         A
         <a href="#page-674-0">
          _TX_ENA/SPI_D
         </a>
         MA_RX_ENA and SPI_RX_EOF_EN.
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         configure GDMA TX/RX link.
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         start GDM
         <a href="#page-655-0">
          A TX/RX engine, as described in Sectio
         </a>
         n 27.5.6
         <a href="#page-655-0">
          and Section
         </a>
         27.5.7.
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     6. Set SPI_DMA_AFIFO_RST, SPI_BUF_AFIFO_RST, and SPI_RX_AFIFO_RST to reset these buffers.
    </li>
    <li block-type="ListItem">
     7. Clear SPI_DMA_SLV_SEG_TRANS_EN in register SPI_DMA_
     <a href="#page-615-1">
      CONF_R
     </a>
     EG to enabl
     <a href="#page-617-1">
      e slave
     </a>
     single transfer mode.
    </li>
    <li block-type="ListItem">
     8. Set
     <a href="#page-655-0">
      SPI_TRANS_DONE_INT
     </a>
     _ENA in
     <a href="#page-655-0">
      SPI_DMA_INT
     </a>
     _ENA_REG
     <a href="#page-655-0">
      and wait for th
     </a>
     e interrupt SPI_T
     <a href="#page-655-0">
      RANS_DONE_INT. In DMA-contr
     </a>
     olled mod
     <a href="#page-655-0">
      e, it is recommended t
     </a>
     o wait for the interrupt
    </li>
   </ul>
  </p>
  <p block-type="Text">
   GDMA_IN_SUC_EOF_CH
   <i>
    n
   </i>
   _INT when GDMA RX buffer is used, which means that data has been stored in the related memory. Other interrupts described in Section 27.9 are optional.
  </p>
  <h1>
   27.5.9.5 Configuration of Slave Segmented Transfer in Half-Duplex
  </h1>
  <p block-type="Text">
   <span id="page-637-0">
   </span>
   GDMA must be used in this mode. The register configuration pr
   <a href="#page-643-0">
    oced
   </a>
   ure is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure the IO path via IO MUX or GPIO matrix between GP-SPI2 and an external SPI device.
    </li>
    <li block-type="ListItem">
     2. Configure APB clock (APB_CLK).
    </li>
    <li block-type="ListItem">
     3. Set SPI_SLAVE_MODE to enable slave mode.
    </li>
    <li block-type="ListItem">
     4. Clear SPI_DOUTDIN to enable half-duplex communication.
    </li>
    <li block-type="ListItem">
     5. Pre
     <a href="#page-656-0">
      pare data in register
     </a>
     s SPI_W0_REG ~ SPI_W15_REG, if needed.
    </li>
    <li block-type="ListItem">
     6. Set S
     <a href="#page-649-0">
      PI_DMA_AFIFO
     </a>
     _RST, SPI_BUF_AFIFO_RST and SPI_RX_AFIFO_RST to reset these buffers.
    </li>
    <li block-type="ListItem">
     7. Set bits SPI_DMA_RX_ENA and
     <a href="#page-670-0">
      SPI_D
     </a>
     M
     <a href="#page-674-0">
      A_TX_ENA. Cle
     </a>
     ar the bit SPI_RX_EOF_EN. Configure GDMA TX/RX link and start GDMA TX/RX engine, as shown in Section 27.5.6 and Section 27.5.7.
    </li>
    <li block-type="ListItem">
     8. Set
     <a href="#page-655-0">
      SPI_DMA_SLV_SEG_TR
     </a>
     ANS_EN in
     <a href="#page-655-0">
      SPI_DMA_
     </a>
     CONF_REG
     <a href="#page-655-0">
      to enable sla
     </a>
     ve segmented transfer.
    </li>
    <li block-type="ListItem">
     9. Set SPI
     <a href="#page-655-0">
      _DMA_SEG_TRANS_
     </a>
     DO
     <a href="#page-655-0">
      NE_INT_ENA
     </a>
     in SPI_DMA_INT_
     <a href="#page-615-1">
      ENA_R
     </a>
     EG
     <a href="#page-655-0">
      and wait
     </a>
     <a href="#page-617-1">
      for the
     </a>
     interrupt SPI_ DMA_SEG_TRANS_DONE_INT, which means that the segmented transfer has finished and data has bee
     <a href="#page-655-0">
      n put into the related memory. O
     </a>
     t
     <a href="#page-655-0">
      her interrupts described
     </a>
     in Section 27.9 are optional.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When En
   <a href="#page-663-0">
    d_SEG_TRANS (0x05 in SPI mode, 0xA5
   </a>
   in
   <a href="#page-663-0">
    QPI mode) is received by
   </a>
   GP-SPI2, this slave segm
   <a href="#page-643-0">
    ented
   </a>
   transf
   <a href="#page-643-0">
    er is ended and the interrupt
   </a>
   SPI_DMA_SEG_TRANS_DONE_INT is triggered.
  </p>
  <h4>
   27.5.9.6 Configuration of Slave Segmented Transfer in Full-Duplex
  </h4>
  <p block-type="Text">
   GDMA must be used in this mode.
   <a href="#page-643-0">
    In such transfer, the data is transfe
   </a>
   rred from and to the GDMA buffer. The interrupt GDMA_IN_SUC_EOF_CH
   <i>
    n
   </i>
  </p>
  <p block-type="Text">
   _INT is triggered when the transfer ends. The configuration procedure is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure the IO path via IO MUX or GPIO matrix between GP-SPI2 and an external SPI device.
    </li>
    <li block-type="ListItem">
     2. Configure APB clock (APB_CLK).
    </li>
    <li block-type="ListItem">
     3. Set SPI_SLAVE_MODE and SPI_DOUTDIN, to enable full-duplex communication in slave mode.
    </li>
    <li block-type="ListItem">
     4. Set SPI_DMA_AFIFO_RST, SPI_BUF_AFIFO_RST, and SPI_RX_AFIFO_RST bit, to reset these buffers.
    </li>
    <li block-type="ListItem">
     5. Set
     <a href="#page-656-0">
      SPI_DMA_TX_ENA
     </a>
     /SPI
     <a href="#page-649-0">
      _DMA_RX_ENA
     </a>
     . Configure GDMA TX/RX link and start GDMA TX/RX engine, as shown in Section 27.5.6 and Section 27.5.7.
    </li>
    <li block-type="ListItem">
     6. Set the bit
     <a href="#page-655-0">
      SPI_RX_EOF_E
     </a>
     N
     <a href="#page-655-0">
      in register
     </a>
     SPI_DMA_CON
     <a href="#page-655-0">
      F_REG. Configure
     </a>
     SPI_MS_DATA_BITLEN[17:0] in register
     <a href="#page-655-0">
      SPI_MS_DLEN
     </a>
     _REG
     <a href="#page-655-0">
      to the byte len
     </a>
     gth of the received DMA data.
    </li>
    <li block-type="ListItem">
     7. Set SPI_DMA_SLV_S
     <a href="#page-615-1">
      EG_TR
     </a>
     ANS_EN in S
     <a href="#page-617-1">
      PI_DM
     </a>
     A_CONF_REG to enable slave segmented transfer mode.
    </li>
    <li block-type="ListItem">
     <span id="page-637-1">
     </span>
     8. Set GD
     <a href="#page-653-0">
      MA_IN_SUC_EOF_CH
     </a>
     <i>
      n
     </i>
     _INT_ENA
     <a href="#page-655-0">
      and wait for the inter
     </a>
     rupt GDMA
     <a href="#page-653-0">
      _IN_SUC_EOF_CH
     </a>
     <i>
      n
     </i>
     _INT.
    </li>
   </ul>
  </p>
  <h1>
   27.6 CS Setup Time and Hold Time Control
  </h1>
  <p block-type="Text">
   SPI bus CS (SPI_CS) setup time and hold time are very important to meet the timing requirements of various SPI devices (e.g. flash or PSRAM).
  </p>
  <p block-type="Text">
   CS setup time is the time between the CS falling edge and the first latch edge of SPI bus CLK (SPI_CLK). The first latch edge for mode 0 and mode 3 is rising edge, and falling edge for mode 2 and mode 4.
  </p>
  <p block-type="Text">
   CS hold time is the time between the last latch edge of SPI_CLK and the CS rising edge.
  </p>
  <p block-type="Text">
   In slave mode, the CS setup time and hold time should be longer than 0.5 x T_SPI_CLK, otherwise the SPI transfer may be incorrect. T_SPI_CLK: one cycle of SPI_CLK.
  </p>
  <p block-type="Text">
   In master mode, set the CS setup time by specifying SPI_CS_SETUP in SPI_USER_REG and SPI_CS_SETUP_TIME in SPI_USER1_REG:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If SPI_CS_SETUP is cleared, the SPI CS setup time is 0.5 x T_SPI_CLK.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If
     <a href="#page-651-0">
      SPI_CS_SETU
     </a>
     P i
     <a href="#page-651-0">
      s set, the SPI CS
     </a>
     setup time
     <a href="#page-649-0">
      is (SPI_CS_SETU
     </a>
     P_TIME
     <a href="#page-649-0">
      + 1.5) x T_
     </a>
     SPI_CLK.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Set the
   <a href="#page-649-0">
    CS hold time by
   </a>
   specifying SPI_CS_HOLD in SPI_USER_REG and SPI_CS_HOLD_TIME in SPI_USER1_REG:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If
     <a href="#page-649-0">
      SPI_CS_HOLD
     </a>
     is cleared, the SPI CS hold time
     <a href="#page-651-0">
     </a>
     i
     <a href="#page-651-0">
      s 0.5 x T_SPI_CLK;
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If
     <a href="#page-651-0">
      SPI_CS_
     </a>
     HOLD is set, the S
     <a href="#page-649-0">
      PI CS hold time
     </a>
     is
     <a href="#page-649-0">
      (SPI_CS_HOLD_
     </a>
     TIME
     <a href="#page-651-0">
      + 1.5) x T_SPI_CLK.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-638-0">
   </span>
   Figure 27.6-1
   <a href="#page-649-0">
    and Figur
   </a>
   e 27.6-2 show the recommended CS timing and register configuration to access external RAM and flash.
  </p>
  <p>
   <img src="_page_638_Figure_12.jpeg"/>
  </p>
  <p block-type="Text">
  </p>
  <p block-type="TextInlineMath">
  </p>
  <p>
   Figure 27.6-1. Recommended CS Timing and Settings When Accessing External RAM
  </p>
  <p>
   <span id="page-639-1">
   </span>
   <img src="_page_639_Figure_0.jpeg"/>
  </p>
  <p>
  </p>
  <p block-type="TextInlineMath">
  </p>
  <p block-type="Text">
   Figure 27.6-2. Recommended CS Timing and Settings When Accessing Flash
  </p>
  <h1>
   27.7 GP-SPI2 Clock Control
  </h1>
  <p block-type="Text">
   <span id="page-639-2">
   </span>
   GP-SPI2 has the following clocks:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clk_spi_mst: module clock of GP-SPI2, derived from PLL_CLK. Used in GP-SPI2 master mode, to generate SPI_CLK signal for data transfer and for slaves.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_CLK: output clock in master mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     APB_CLK: clock for register configuration.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clk_hclk: module timing compensation clock of GP-SPI2.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In master mode, the maximum output clock frequency of GP-SPI2 is
   <i>
    f
   </i>
   clk_spi_mst. To have slower frequencies, the output clock frequency can be divided as follows:
  </p>
  <blockquote>
   <p block-type="TextInlineMath">
    <i>
     f
    </i>
    SPI_CLK =
    <i>
     f
    </i>
    clk_spi_mst (SPI_CLKCNT_N + 1)(SPI_CLKDIV_PRE + 1)
   </p>
  </blockquote>
  <p block-type="Text">
   The divider is configured by SPI_CLKCNT_N and SPI_CLKDIV_PRE in register SPI_CLOCK_REG. When the bit SPI_CLK_EQU_SYSCLK in register SPI_
   <a href="#page-657-0">
    CLOCK_REG
   </a>
   is set to
   <a href="#page-657-0">
    1, the output cloc
   </a>
   k frequency of GP-SPI2 will be
   <i>
    f
   </i>
   clk_spi_mst. And for other integral clock divisions, SPI_CLK_EQU_SYSCLK should be set to 0.
  </p>
  <p block-type="Text">
   In slave mode, the supporte
   <a href="#page-657-0">
    d input clock fre
   </a>
   quency (
   <i>
    f
   </i>
   SPI_CLK
   <a href="#page-657-0">
    ) of G
   </a>
   P-SPI2 is:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If
     <i>
      f
     </i>
     APB_CLK
     <a href="#page-657-0">
      &gt;= 60 M
     </a>
     Hz,
     <i>
      f
     </i>
     SPI_CLK
     <a href="#page-657-0">
      &lt;= 60 MHz;
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If
     <i>
      f
     </i>
     APB_CLK &lt; 60 MHz,
     <i>
      f
     </i>
     SPI_CLK &lt;=
     <i>
      f
     </i>
     APB_CLK.
    </li>
   </ul>
  </p>
  <h1>
   27.7.1 Clock Phase and Polarity
  </h1>
  <p block-type="Text">
   <span id="page-639-0">
   </span>
   There are four clock modes in SPI protocol, modes 0 ~ 3, see Figure 27.7-1 and Figure 27.7-2 (excerpted from SPI protocol):
  </p>
  <p>
   <span id="page-640-0">
   </span>
   <img src="_page_640_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 27.7-1. SPI Clock Mode 0 or 2
  </p>
  <p>
   <span id="page-640-1">
   </span>
   <img src="_page_640_Figure_2.jpeg"/>
  </p>
  <p>
   Figure 27.7-2. SPI Clock Mode 1 or 3
  </p>
  <p block-type="Text">
   1. Mode 0: CPOL = 0, CPHA = 0; SCK is 0 when the SPI is in idle state; data is changed on the negative edge of SCK and sampled on the positive edge. The first data is shifted out before the first negative edge of SCK.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     2. Mode 1: CPOL = 0, CPHA = 1; SCK is 0 when the SPI is in idle state; data is changed on the positive edge of SCK and sampled on the negative edge.
    </li>
    <li block-type="ListItem">
     3. Mode 2: CPOL = 1, CPHA = 0; SCK is 1 when the SPI is in idle state; data is changed on the positive edge of SCK and sampled on the negative edge. The first data is shifted out before the first positive edge of SCK.
    </li>
    <li block-type="ListItem">
     4. Mode 3: CPOL = 1, CPHA = 1; SCK is 1 when the SPI is in idle state; data is changed on the negative edge of SCK and sampled on the positive edge.
    </li>
   </ul>
  </p>
  <h1>
   27.7.2 Clock Control in Master Mode
  </h1>
  <p block-type="Text">
   <span id="page-641-0">
   </span>
   The four clock modes 0 ~ 3 are supported in GP-SPI2 master mode. The polarity and phase of GP-SPI2 clock are controlled by the bit SPI_CK_IDLE_EDGE in register SPI_MISC_REG and the bit SPI_CK_OUT_EDGE in register SPI_USER_REG. The register configuration for SPI clock modes 0 ~ 3 is provided in Table 27.7-1, and can be changed according to the path delay in the application.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 27.7-1. Clock Phase and Polarity Configuration in Master Mode
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 27.7-1. Clock Phase and Polarity Configuration in Master Mode
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Control Bit
     </td>
     <td>
      Mode 0
     </td>
     <td>
      Mode 1
     </td>
     <td>
      Mode 2
     </td>
     <td>
      Mode 3
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <span id="page-641-3">
   </span>
   SPI_CLK_MODE is use
   <a href="#page-654-0">
    d to select the numb
   </a>
   er of rising edges of SPI_CLK, when SPI_CS raises high, to be 0, 1, 2 or SPI_CLK always on.
  </p>
  <p block-type="Text">
   <a href="#page-656-0">
    Note:
   </a>
  </p>
  <p block-type="Text">
   When SPI_CLK_MODE is configured to 1 or 2, the bit SPI_CS_HOLD must be set and the value of SPI_CS_HOLD_TIME should be larger than 1.
  </p>
  <h1>
   27.7.3
   <a href="#page-656-0">
    Clock Co
   </a>
   ntrol in Slave Mo
   <a href="#page-649-0">
    de
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-641-1">
   </span>
   GP-SPI2 slave mode also supports clock modes 0 ~ 3. The polarity and phase are configured by the bits SPI_TSCK_I_EDGE and SPI_RSCK_I_EDGE in register SPI_USER_REG. The output edge of data is controlled by SPI_CLK_MODE_13 in register SPI_SLAVE_REG. The detailed register configuration is shown in Table 27.7-2:
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Control Bit
     </td>
     <td>
      Mode 0
     </td>
     <td>
      Mode 1
     </td>
     <td>
      Mode 2
     </td>
     <td>
      Mode 3
     </td>
    </tr>
    <tr>
     <td>
      SPI_TSCK_I_EDGE
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
    </tr>
    <tr>
     <td>
      SPI_RSCK_I_EDGE
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 27.7-2. Clock Phase and Polarity Configuration in Slave Mode
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   <span id="page-641-4">
   </span>
   27.8 GP-SP
   <a href="#page-656-0">
    I2 Timing Co
   </a>
   mpensation
  </h1>
  <p block-type="Text">
   <span id="page-641-2">
   </span>
   Introduction
  </p>
  <p block-type="Text">
   Espressif Systems 642
  </p>
  <p block-type="Text">
   The I/O lines are mapped via GPIO Matrix or IO MUX. But there is no timing adjustment in IO MUX. The input data and output data can be delayed for 1 or 2 APB_CLK cycles at the rising or falling edge in GPIO matrix. For detailed register configuration, see Chapter 5
   <i>
    IO MUX and GPIO Matrix (GPIO, IO MUX)
   </i>
   .
  </p>
  <p block-type="Text">
   Figure 27.8-1 shows the timing compensation control for GP-SPI2 master mode, including the following paths:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     "CLK": the output path of GP-SPI2 bu
     <a href="#page-158-0">
      s clock. The clock is sent out by SPI_CLK
     </a>
     out control module,
     <a href="#page-642-0">
      passes
     </a>
     through GPIO Matrix or IO MUX and then goes to an external SPI device.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     "IN": data input path of GP-SPI2. The input data from an external SPI device passes through GPIO Matrix or IO MUX, then is adjusted by the Timing Module and finally is stored into spi_rx_afifo.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     "OUT": data output path of GP-SPI2. The output data is sent out to the Timing Module, passes through GPIO Matrix or IO MUX and is then captured by an external SPI device.
    </li>
   </ul>
  </p>
  <p>
   <span id="page-642-0">
   </span>
   <img src="_page_642_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 27.8-1. Timing Compensation Control Diagram in GP-SPI2 Master Mode
  </p>
  <p block-type="Text">
   Every input and output data is passing through the Timing Module and the module can be used to apply delay in units of
   <i>
    T
   </i>
   clk_spi_mst (one cycle of clk_spi_mst) on rising or falling edge.
  </p>
  <h4>
   Key Registers
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_DIN_MODE_REG: select the latch edge of input data
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_DIN_NUM_REG: select the delay cycles of input data
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-659-0">
      SPI_DOUT_MODE_RE
     </a>
     G: select the latch edge of output data
    </li>
   </ul>
  </p>
  <h4>
   Timin
   <a href="#page-661-0">
    g Compensation Exa
   </a>
   mple
  </h4>
  <p block-type="Text">
   Figure 27.8-2
   <a href="#page-662-0">
    shows a timing
   </a>
   compensation example in GP-SPI2 master mode. Note that DUMMY cycle length is configurable to compensate the delay in I/O lines, so as to enhance the performance of GP-SPI2.
  </p>
  <p>
   <span id="page-643-1">
   </span>
   <img src="_page_643_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 27.8-2. Timing Compensation Example in GP-SPI2 Master Mode
  </p>
  <p block-type="Text">
   In Figure 27.8-2, "p1" is the point of input data of Timing Module, "p2" is the point of output data of Timing Module. Since the input data FSPIQ is unaligned to FSPID, the read data of GP-SPI2 will be wrong without the timing compensation.
  </p>
  <p block-type="Text">
   To get c
   <a href="#page-643-1">
    orrect re
   </a>
   ad data, follow the the settings below, assuing
   <i>
    fclk
   </i>
   _
   <i>
    spi
   </i>
   _
   <i>
    mst
   </i>
   equals to
   <i>
    fSP I
   </i>
   _
   <i>
    CLK
   </i>
   :
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Delay FSPID for two cycles at the falling edge of clk_spi_mst.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Delay FSPIQ for one cycle at the falling edge of clk_spi_mst.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Add one extra dummy cycle.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In GP-SPI2 slave mode, if the bit SPI_RSCK_DATA_OUT in register SPI_SLAVE_REG is set to 1, the output data is sent at latch edge, which is half an SPI clock cycle earlier. This can be used for slave mode timing compensation.
  </p>
  <h1>
   27.9 Interrupts
  </h1>
  <h4>
   <span id="page-643-0">
   </span>
   Interrupt Summary
  </h4>
  <p block-type="Text">
   GP-SPI2 provides an SPI interface interrupt SPI_INT. When an SPI transfer ends, an interrupt is generated in GP-SPI2. The interrupt may be one or more of the following ones:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_DMA_INFIFO_FULL_ERR_INT: triggered when GDMA RX FIFO length is shorter than the real transferred data length.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_DMA_OUTFIFO_EMPTY_ERR_INT: triggered when GDMA TX FIFO length is shorter than the real transferred data length.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_EX_QPI_INT: triggered when Ex_QPI is received correctly in GP-SPI2 slave mode and the SPI transfer ends.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_EN_QPI_INT: triggered when En_QPI is received correctly in GP-SPI2 slave mode and the SPI transfer ends.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_CMD7_INT: triggered when CMD7 is received correctly in GP-SPI2 slave mode and the SPI transfer ends.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_CMD8_INT: triggered when CMD8 is received correctly in GP-SPI2 slave mode and the SPI transfer ends.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_CMD9_INT: triggered when CMD9 is received correctly in GP-SPI2 slave mode and the SPI transfer ends.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_CMDA_INT: triggered when CMDA is received correctly in GP-SPI2 slave mode and the SPI transfer ends.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_RD_DMA_DONE_INT: triggered at the end of Rd_DMA transfer in slave mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_WR_DMA_DONE_INT: triggered at the end of Wr_DMA transfer in slave mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_RD_BUF_DONE_INT: triggered at the end of Rd_BUF transfer in slave mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_WR_BUF_DONE_INT: triggered at the end of Wr_BUF transfer in slave mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_TRANS_DONE_INT: triggered at the end of SPI bus transfer in both master and slave modes.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_DMA_SEG_TRANS_DONE_INT: triggered at the end of End_SEG_TRANS transfer in GP-SPI2 slave segmented transfer mode or at the end of configurable segmented transfer in master mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SEG_MAGIC_ERR_INT: triggered when a Magic error occurs in CONF buffer during configurable segmented transfer in master mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_MST_RX_AFIFO_WFULL_ERR_INT: triggered by RX AFIFO write-full error in GP-SPI2 master mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_MST_TX_AFIFO_REMPTY_ERR_INT: triggered by TX AFIFO read-empty error in GP-SPI2 master mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_SLV_CMD_ERR_INT: triggered when a received command value is not supported in GP-SPI2 slave mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_APP2_INT: used and triggered by software. It is only used for user defined function.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SPI_APP1_INT: used and triggered by software. It is only used for user defined function.
    </li>
   </ul>
  </p>
  <h4>
   Interrupts Used in Master and Slave Modes
  </h4>
  <p block-type="Text">
   Table 27.9-1 and Table 27.9-2 show the interrupts used in GP-SPI2 master and slave modes. Set the interrupt enable bit SPI_*_INT_ENA in SPI_DMA_INT_ENA_REG and wait for the SPI_INT interrupt. When the transfer ends, the related interrupt is triggered and should be cleared by software before the next transfer.
  </p>
  <span id="page-644-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="2">
      Transfer Type
     </td>
     <td>
      Communication Mode
     </td>
     <td>
      Controlled by
     </td>
     <td>
      Interrupt
     </td>
    </tr>
    <tr>
     <td>
      Full-duplex
     </td>
     <td>
      DMA
     </td>
     <td>
      GDMA_IN_SUC_EOF_CHn_INT 1
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      CPU
      <br/>
      DMA
     </td>
     <td>
      SPI_TRANS_DONE_INT 2
      <br/>
      SPI_TRANS_DONE_INT
     </td>
    </tr>
    <tr>
     <td>
      Single Transfer
     </td>
     <td>
      Half-duplex MOSI Mode
     </td>
     <td>
      CPU
     </td>
     <td>
      SPI_TRANS_DONE_INT
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      DMA
     </td>
     <td>
      GDMA_IN_SUC_EOF_CHn_INT
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <a href="#page-663-0">
    Table 27.9-1. GP-SP
   </a>
   I2 Master Mode Interrupts
  </h4>
  <p block-type="Text">
   Half-duplex MISO Mode
  </p>
  <h4>
   Table 27.9-1. GP-SPI2 Master Mode Interrupts
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th colspan="6">
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 27.9-1. GP-SPI2 Master Mode Interrupts
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Transfer Type
     </td>
     <td>
      Communication Mode
     </td>
     <td>
      Controlled by
     </td>
     <td>
      Interrupt
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      CPU
     </td>
     <td>
      SPI_TRANS_DONE_INT
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Full-duplex
     </td>
     <td>
      DMA
     </td>
     <td>
      SPI_DMA_SEG_TRANS_DONE_INT 3
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      CPU
     </td>
     <td>
      Not supported
     </td>
    </tr>
    <tr>
     <td>
      Configurable Segmented Transfer
     </td>
     <td>
      Half-duplex MOSI Mode
     </td>
     <td>
      DMA
     </td>
     <td>
      SPI_DMA_SEG_TRANS_DONE_INT
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. If GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT is triggered, it means all the RX data of GP-S
     <a href="#page-643-0">
      PI2 has been stored in the RX
     </a>
     buffer, and the TX data has been transferred to the slave.
    </li>
    <li block-type="ListItem">
     2. SPI_TRANS_DONE_INT is triggered when CS is high, which indicates that master has completed the data exchange in
     <a href="#page-65-1">
      SPI_W0_REG
     </a>
     ~ SPI_W15_REG with slave in this mode.
    </li>
    <li block-type="ListItem">
     <span id="page-645-1">
     </span>
     3. If SPI_DMA_SEG_TRANS_DONE_INT is triggered, it means that the whole configurable segmented transfer (con
     <a href="#page-643-0">
      sisting of several segm
     </a>
     ents) has finished, i.e. the RX data has been stored in the RX buffer completely and all the TX dat
     <a href="#page-670-0">
      a has been se
     </a>
     nt
     <a href="#page-674-0">
      out.
     </a>
    </li>
   </ul>
  </p>
  <span id="page-645-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 27.9-2. GP-SPI2 Slave Mode Interrupts
     </th>
     <th>
     </th>
     <th colspan="6">
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Transfer Type
     </td>
     <td>
      Communication Mode
     </td>
     <td>
      Controlled by
     </td>
     <td>
      Interrupt
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Full-duplex
     </td>
     <td>
      DMA
     </td>
     <td>
      GDMA_IN_SUC_EOF_CHn_INT 1
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      CPU
     </td>
     <td>
      SPI_TRANS_DONE_INT 2
      <br/>
      GDMA_IN_SUC_EOF_CHn_INT3
     </td>
    </tr>
    <tr>
     <td>
      Single Transfer
     </td>
     <td>
      Half-duplex MOSI Mode
     </td>
     <td>
      DMA (Wr_DMA)
      <br/>
      CPU (Wr_BUF)
     </td>
     <td>
      SPI_TRANS_DONE_INT4
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      DMA (Rd_DMA)
     </td>
     <td>
      SPI_TRANS_DONE_INT5
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Half-duplex MISO Mode
     </td>
     <td>
      CPU (Rd_BUF)
     </td>
     <td>
      SPI_TRANS_DONE_INT6
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      DMA
     </td>
     <td>
      GDMA_IN_SUC_EOF_CHn_INT7
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Full-duplex
     </td>
     <td>
      CPU
     </td>
     <td>
      Not supported8
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      DMA (Wr_DMA)
     </td>
     <td>
      SPI_DMA_SEG_TRANS_DONE_INT9
     </td>
    </tr>
    <tr>
     <td>
      Slave Segmented Transfer
     </td>
     <td>
      Half-duplex MOSI Mode
     </td>
     <td>
      CPU (Wr_BUF)
     </td>
     <td>
      Not supported10
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      DMA (Rd_DMA)
     </td>
     <td>
      SPI_DMA_SEG_TRANS_DONE_INT11
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 27.9-2. GP-SPI2 Slave Mode Interrupts
  </h4>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. If GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT is triggered, it means all the RX data has been stored in the RX buffer, and the TX data has been sent to the slave.
    </li>
    <li block-type="ListItem">
     2. SPI_TRANS_DONE_INT is triggered when CS is high, which indicates that master has completed the data exchange in
     <a href="#page-65-1">
      SPI_W0_REG
     </a>
     ~ SPI_W15_REG with slave in this mode.
    </li>
    <li block-type="ListItem">
     <span id="page-645-2">
     </span>
     3. SPI_SLV_WR_DMA_DONE_INT just means that the transmission on the SPI bus is done, but can not ensure that
     <a href="#page-643-0">
      all the push data has b
     </a>
     een stored in the RX buffer. For this reason, GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT is recommended.
    </li>
    <li block-type="ListItem">
     <span id="page-645-3">
     </span>
     4. Or wait for
     <a href="#page-670-0">
      SPI_SLV_WR_
     </a>
     B
     <a href="#page-674-0">
      UF_DONE_INT.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     5. Or wait for SPI_SLV_RD_DMA_DONE_INT.
    </li>
    <li block-type="ListItem">
     6. Or wait for SPI_SLV_RD_BUF_DONE_INT.
    </li>
    <li block-type="ListItem">
     7. Slave should set the total read data byte length in SPI_MS_DATA_BITLEN before the transfer begins. And set SPI_RX_EOF_EN
     <a href="#page-643-0">
      0→1 before the end of th
     </a>
     e interrupt program.
    </li>
    <li block-type="ListItem">
     <span id="page-646-1">
     </span>
     8. Master an
     <a href="#page-643-0">
      d slave should define a method
     </a>
     to end the segmented transfer, such as via GPIO interrupt and so on.
    </li>
    <li block-type="ListItem">
     9. Master sends End_SEG_TRAN to end the segmen
     <a href="#page-653-0">
      ted transfer or slave se
     </a>
     ts the total read data byte length in
     <a href="#page-655-0">
      SPI_MS_DATA_B
     </a>
     ITLEN and waits for GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT.
    </li>
    <li block-type="ListItem">
     <span id="page-646-2">
     </span>
     10. Half-duplex Wr_BUF single transfer can be used in a DMA-controlled segmented transfer.
    </li>
    <li block-type="ListItem">
     11. Master sends End_SEG_TRAN to end the segmented transfer.
    </li>
    <li block-type="ListItem">
     12.
     <a href="#page-653-0">
      Half-duplex Rd_BUF sin
     </a>
     gle transfer can be used in a DMA-controlled segmented transfer.
    </li>
   </ul>
  </p>
  <h1>
   27.10 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-646-0">
   </span>
   The addresses in this section are relative to SPI base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      User-defined control registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SPI_CMD_REG
     </td>
     <td>
      Command control register
     </td>
     <td>
      0x0000
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SPI_ADDR_REG
     </td>
     <td>
      Address value register
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SPI_USER_REG
     </td>
     <td>
      SPI USER control register
     </td>
     <td>
      0x0010
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SPI_USER1_REG
      <br/>
      SPI_USER2_REG
     </td>
     <td>
      SPI USER control register 1
      <br/>
      SPI USER control register 2
     </td>
     <td>
      0x0014
      <br/>
      0x0018
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Control and configuration registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SPI_CTRL_REG
     </td>
     <td>
      SPI control register
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SPI_MS_DLEN_REG
     </td>
     <td>
      SPI data bit length control register
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SPI_MISC_REG
     </td>
     <td>
      SPI MISC register
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SPI_DMA_CONF_REG
     </td>
     <td>
      SPI DMA control register
     </td>
     <td>
      0x0030
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SPI_SLAVE_REG
     </td>
     <td>
      SPI slave control register
     </td>
     <td>
      0x00E0
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SPI_SLAVE1_REG
     </td>
     <td>
      SPI slave control register 1
     </td>
     <td>
      0x00E4
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      Clock control registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SPI_CLOCK_REG
     </td>
     <td>
      SPI clock control register
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SPI_CLK_GATE_REG
     </td>
     <td>
      SPI module clock and register clock control
     </td>
     <td>
      0x00E8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Timing registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SPI_DIN_MODE_REG
     </td>
     <td>
      SPI input delay mode configuration
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SPI_DIN_NUM_REG
     </td>
     <td>
      SPI input delay number configuration
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      SPI_DOUT_MODE_REG
     </td>
     <td>
      SPI output delay mode configuration
     </td>
     <td>
      0x002C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Interrupt registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SPI_DMA_INT_ENA_REG
      <br/>
      SPI_DMA_INT_CLR_REG
     </td>
     <td>
      SPI DMA interrupt enable register
      <br/>
      SPI DMA interrupt clear register
     </td>
     <td>
      0x0034
      <br/>
      0x0038
     </td>
     <td>
      R/W
      <br/>
      WT
     </td>
    </tr>
    <tr>
     <td>
      SPI_DMA_INT_RAW_REG
     </td>
     <td>
      SPI DMA interrupt raw register
     </td>
     <td>
      0x003C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      SPI_DMA_INT_ST_REG
     </td>
     <td>
      SPI DMA interrupt status register
     </td>
     <td>
      0x0040
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 27
      <br/>
      SPI Controller (SPI)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      CPU-controlled data buffer
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SPI_W0_REG
     </td>
     <td>
      SPI CPU-controlled buffer 0
     </td>
     <td>
      0x0098
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W1_REG
     </td>
     <td>
      SPI CPU-controlled buffer 1
     </td>
     <td>
      0x009C
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W2_REG
     </td>
     <td>
      SPI CPU-controlled buffer 2
     </td>
     <td>
      0x00A0
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W3_REG
     </td>
     <td>
      SPI CPU-controlled buffer 3
     </td>
     <td>
      0x00A4
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W4_REG
     </td>
     <td>
      SPI CPU-controlled buffer 4
     </td>
     <td>
      0x00A8
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W5_REG
      <br/>
      SPI_W6_REG
     </td>
     <td>
      SPI CPU-controlled buffer 5
      <br/>
      SPI CPU-controlled buffer 6
     </td>
     <td>
      0x00AC
      <br/>
      0x00B0
     </td>
     <td>
      R/W/SS
      <br/>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W7_REG
     </td>
     <td>
      SPI CPU-controlled buffer 7
     </td>
     <td>
      0x00B4
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W8_REG
     </td>
     <td>
      SPI CPU-controlled buffer 8
     </td>
     <td>
      0x00B8
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W9_REG
     </td>
     <td>
      SPI CPU-controlled buffer 9
     </td>
     <td>
      0x00BC
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W10_REG
     </td>
     <td>
      SPI CPU-controlled buffer 10
     </td>
     <td>
      0x00C0
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W11_REG
     </td>
     <td>
      SPI CPU-controlled buffer 11
     </td>
     <td>
      0x00C4
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W12_REG
     </td>
     <td>
      SPI CPU-controlled buffer 12
     </td>
     <td>
      0x00C8
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W13_REG
     </td>
     <td>
      SPI CPU-controlled buffer 13
     </td>
     <td>
      0x00CC
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W14_REG
     </td>
     <td>
      SPI CPU-controlled buffer 14
     </td>
     <td>
      0x00D0
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
    <tr>
     <td>
      SPI_W15_REG
     </td>
     <td>
      SPI CPU-controlled buffer 15
     </td>
     <td>
      0x00D4
     </td>
     <td>
      R/W/SS
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   <a href="#page-674-1">
    27.11
   </a>
   Registers
  </h1>
  <p block-type="Text">
   <span id="page-647-0">
   </span>
   The addresses in this section are relative to SPI base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <img src="_page_647_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-647-1">
   </span>
   <img src="_page_647_Figure_4.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_CONF_BITLEN Define the SPI CLK cycles of SPI CONF state. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_UPDATE Set this bit to synchronize SPI registers from APB clock domain into SPI module clock domain. This bit is only used in SPI master mode. (WT)
    </li>
    <li block-type="ListItem">
     SPI_USR User-defined command enable. An SPI operation will be triggered when the bit is set. The bit will be cleared once the operation is done. 1: enable; 0: disable. Can not be changed by CONF_buf. (R/W/SC)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-648-0">
   </span>
   <img src="_page_648_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_USR_ADDR_VALUE Address to slave. Can be configured in CONF state. (R/W)
  </p>
  <span id="page-649-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      SPI_USR_MOSI_HIGHPART
      <br/>
      SPI_USR_DUMMY_IDLE
     </th>
     <th>
      SPI_USR_MISO_HIGHPART
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Register 27.3. SPI_USER_REG (0x0010)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      SPI_USR_COMMAND
     </td>
     <td>
      SPI_USR_ADDR
     </td>
     <td>
      SPI_USR_DUMMY
      <br/>
      SPI_USR_MISO
     </td>
     <td>
      SPI_USR_MOSI
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      SPI_USR_CONF_NXT
      <br/>
      SPI_FWRITE_QUAD
      <br/>
      SPI_FWRITE_DUAL
     </td>
     <td>
     </td>
     <td>
      SPI_CK_OUT_EDGE
     </td>
     <td>
      SPI_RSCK_I_EDGE
     </td>
     <td>
      SPI_CS_SETUP
     </td>
     <td>
      SPI_TSCK_I_EDGE
     </td>
     <td>
      SPI_QPI_MODE
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   SPI_DOUTDIN Set the bit to enable full-duplex communication. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_QPI_MODE 1: Enable QPI mode. 0: Disable QPI mode. This configuration is applicable when the SPI controller works as master or slave. Can be configured in CONF state. (R/W/SS/SC)
    </li>
    <li block-type="ListItem">
     SPI_TSCK_I_EDGE In slave mode, this bit can be used to change the polarity of TSCK. 0: TSCK = SPI_CK_I. 1: TSCK = !SPI_CK_I. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS_HOLD Keep SPI CS low when SPI is in DONE state. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS_SETUP Enable SPI CS when SPI is in prepare (PREP) state. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_RSCK_I_EDGE In slave mode, this bit can be used to change the polarity of RSCK. 0: RSCK = !SPI_CK_I. 1: RSCK = SPI_CK_I. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CK_OUT_EDGE This bit together with SPI_CK_IDLE_EDGE is used to control SPI clock mode. Can be configured in CONF state. For more information, see Section 27.7.2. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_FWRITE_DUAL In write operations, r
     <a href="#page-654-0">
      ead-data phase is in
     </a>
     2-bit mode. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_FWRITE_QUAD In write operations, read-data phase is in 4-bit mode. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_CONF_NXT Enable the CONF state for the next transaction (segment) in a configurable segmented transfer. Can be configured in CONF state. (R/W)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If this bit is set, it means this configurable segmented transfer will continue its next transaction (segment).
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If this bit is cleared, it means this transfer will end after the current transaction (segment) is finished. Or this is not a configurable segmented transfer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     SPI_SIO Set the bit to enable 3-line half-duplex communication, where MOSI and MISO signals share the same pin. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_MISO_HIGHPART In read-data phase, only access to high-part of the buffers: SPI_W8_REG ~ SPI_W15_REG. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_USR_MOSI_HIGHPART In write-data phase, only access to high-part of the buffers: SPI_W8_REG ~ SPI_W15_REG. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_DUMMY_IDLE If this bit is set, SPI clock is disabled in DUMMY state. Can be configured
     <a href="#page-672-0">
      in CONF state
     </a>
     .
     <a href="#page-674-0">
     </a>
     (
     <a href="#page-674-0">
      R/W)
     </a>
    </li>
    <li block-type="ListItem">
     SPI_USR_MOSI Set this bit to enable the write-data (DOUT) state of an operation. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_MISO Set this bit to enable the read-data (DIN) state of an operation. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_DUMMY Set this bit to enable the DUMMY state of an operation. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_ADDR Set this bit to enable the address (ADDR) state of an operation. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_COMMAND Set this bit to enable the command (CMD) state of an operation. Can be configured in CONF state. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 27.4. SPI_USER1_REG (0x0014)
  </h4>
  <p>
   <span id="page-651-0">
   </span>
   <img src="_page_651_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_USR_DUMMY_CYCLELEN The length of DUMMY state, in unit of SPI_CLK cycles. This value is (the expected cycle number - 1). Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_MST_WFULL_ERR_END_EN 1: SPI transfer is ended when SPI RX AFIFO wfull error occurs in GP-SPI master full-/half-duplex modes. 0: SPI transfer is not ended when SPI RX AFIFO wfull error occurs in GP-SPI master full-/half-duplex modes. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS_SETUP_TIME The length of prepare (PREP) state, in unit of SPI_CLK cycles. This value is equal to the expected cycles - 1. This field is used together with SPI_CS_SETUP. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS_HOLD_TIME Delay cycles of CS pin, in units of SPI_CLK cycles. T
     <a href="#page-649-0">
      his field is used
     </a>
     together with SPI_CS_HOLD. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_ADDR_BITLEN The bit length in address state. This value is (expected bit number  1). Can
     <a href="#page-649-0">
      be configured
     </a>
     in CONF state. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-651-1">
   </span>
   <img src="_page_651_Figure_7.jpeg"/>
  </p>
  <h4>
   Register 27.5. SPI_USER2_REG (0x0018)
  </h4>
  <p block-type="Text">
   SPI_USR_COMMAND_VALUE The value of command. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_MST_REMPTY_ERR_END_EN 1: SPI transfer is ended when SPI TX AFIFO read empty error occurs in GP-SPI master full-/half-duplex modes. 0: SPI transfer is not ended when SPI TX AFIFO read empty error occurs in GP-SPI master full-/half-duplex modes. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_USR_COMMAND_BITLEN The bit length of command state. This value is (expected bit number - 1). Can be configured in CONF state. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 27.6. SPI_CTRL_REG (0x0008)
  </h4>
  <p>
   <span id="page-652-0">
   </span>
   <img src="_page_652_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_DUMMY_OUT Configure the output signal level in DUMMY state. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_FADDR_DUAL Apply 2-bit mode during address (ADDR) state. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_FADDR_QUAD Apply 4-bit mode during address (ADDR) state. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_FCMD_DUAL Apply 2-bit mode during command (CMD) state. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_FCMD_QUAD Apply 4-bit mode during command (CMD) state. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_FREAD_DUAL In read operations, read-data (DIN) state is in 2-bit mode. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_FREAD_QUAD In read operations, read-data (DIN) state is in 4-bit mode. 1: enable; 0: disable. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_Q_POL This bit is used to set MISO line polarity. 1: high; 0: low. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_D_POL This bit is used to set MOSI line polarity. 1: high; 0: low. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_HOLD_POL This bit is used to set SPI_HOLD output value when SPI is in idle. 1: output high; 0: output low. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_WP_POL This bit is to set the output value of write-protect signal when SPI is in idle. 1: output high; 0: output low. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_RD_BIT_ORDER In read-data (MISO) state, 1: LSB first; 0: MSB first. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_WR_BIT_ORDER In command (CMD), address (ADDR), and write-data (MOSI) states, 1: LSB first; 0: MSB first. Can be configured in CONF state. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 27.7. SPI_MS_DLEN_REG (0x001C)
  </h4>
  <p>
   <span id="page-653-0">
   </span>
   <img src="_page_653_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_MS_DATA_BITLEN The value of this field is the configured SPI transmission data bit length in master mode DMA-controlled transfer or CPU-controlled transfer. The value is also the configured bit length in slave mode DMA RX controlled transfer. The register value shall be (bit_num - 1). Can be configured in CONF state. (R/W)
  </p>
  <p>
   <span id="page-654-0">
   </span>
   <img src="_page_654_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_CS0_DIS SPI CS0 pin enable bit. 1: disable CS0, 0: SPI_CS0 signal is from/to CS0 pin. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS1_DIS SPI CS1 pin enable bit. 1: disable CS1, 0: SPI_CS1 signal is from/to CS1 pin. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS2_DIS SPI CS2 pin enable bit. 1: disable CS2, 0: SPI_CS2 signal is from/to CS2 pin. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS3_DIS SPI CS3 pin enable bit. 1: disable CS3, 0: SPI_CS3 signal is from/to CS3 pin. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS4_DIS SPI CS4 pin enable bit. 1: disable CS4, 0: SPI_CS4 signal is from/to CS4 pin. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS5_DIS SPI CS5 pin enable bit. 1: disable CS5, 0: SPI_CS5 signal is from/to CS5 pin. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CK_DIS 1: disable SPI_CLK output. 0: enable SPI_CLK output. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_MASTER_CS_POL In master mode, the bits are the polarity of SPI CS line, the value is equivalent to SPI_CS ^ SPI_MASTER_CS_POL. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLAVE_CS_POL Configure SPI slave input CS polarity. 1: invert. 0: not change. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CK_IDLE_EDGE 1: SPI_CLK line is high when GP-SPI2 is in idle. 0: SPI_CLK line is low when GP-SPI2 is in idle. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CS_KEEP_ACTIVE SPI CS line keeps low when the bit is set. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_QUAD_DIN_PIN_SWAP 1: SPI quad input swap enable. 0: SPI quad input swap disable. Can be configured in CONF state. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-655-0">
   </span>
   <img src="_page_655_Figure_0.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_DMA_SLV_SEG_TRANS_EN 1: enable DAM-controlled segmented transfer in slave half-duplex mode. 0: disable. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_RX_SEG_TRANS_CLR_EN In DMA-controlled half-duplex slave mode, if the size of DMA RX buffer is smaller than the size of the received data, 1: the data in following transfers will not be received. 0: the data in this transfer will not be received, but in the following transfers, if the size of DMA RX buffer is not 0, the data in following transfers will be received, otherwise not. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_TX_SEG_TRANS_CLR_EN In DMA-controlled half-duplex slave mode, if the size of DMA TX buffer is smaller than the size of the transmitted data, 1: the data in the following transfers will not be updated, i.e. the old data is transmitted repeatedly. 0: the data in this transfer will not be updated. But in the following transfers, if new data is filled in DMA TX FIFO, new data will be transmitted, otherwise not. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_RX_EOF_EN 1: In a DAM-controlled transfer, if the bit number of transferred data is equal to (SPI_MS_DATA_BITLEN + 1), then GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT_RAW will be set by hardware. 0: GDMA_IN_SUC_EOF_CH
     <i>
      n
     </i>
     _INT_RAW is set by SPI_TRANS_DONE_INT event in a nonsegmented transfer, or by in a SPI_DMA_SEG_TRANS_DONE_INT event in a segmented transfer. (R/
     <a href="#page-653-0">
      W)
     </a>
    </li>
    <li block-type="ListItem">
     SPI_DMA_RX_ENA Set this bit t
     <a href="#page-643-0">
      o enable SPI DMA controlled receive data mode. (
     </a>
     R/W)
    </li>
    <li block-type="ListItem">
     SPI_DMA_TX_ENA Set this bit to enable SPI DMA controlled send data mode. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_RX_AFIFO_RST Set this bit to reset spi_rx_afifo as shown in Figure 27.5-3 and in Figure 27.5-4. spi_rx_afifo is used to receive data in SPI master and slave transfer. (WT)
    </li>
    <li block-type="ListItem">
     SPI_BUF_AFIFO_RST Set this bit to reset buf_tx_afifo as shown in Figure 27.5-3 and in Figure
     <a href="#page-619-1">
      27.5-4.
     </a>
     buf_tx_afifo is used to send data out in CPU-controlled master and
     <a href="#page-618-1">
      slave tr
     </a>
     ansfer. (WT)
    </li>
    <li block-type="ListItem">
     SPI_DMA_AFIFO_RST Set this bit to reset dma_tx_afifo as shown in Figure 27.5-3 and in
     <a href="#page-619-1">
      Figure
     </a>
     27.5-4. dma_tx_afifo is used to send data out in DMA-controlled slav
     <a href="#page-618-1">
      e trans
     </a>
     fer. (WT)
    </li>
   </ul>
  </p>
  <h4>
   Register 27.10. SPI_SLAVE_REG (0x00E0)
  </h4>
  <p>
   <span id="page-656-0">
   </span>
   <img src="_page_656_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_CLK_MODE SPI clock mode control bits. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: SPI clock is off when CS becomes inactive.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: SPI clock is delayed one cycle after CS becomes inactive.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2: SPI clock is delayed two cycles after CS becomes inactive.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3: SPI clock is always on.
    </li>
    <li block-type="ListItem">
     SPI_CLK_MODE_13 Configure clock mode. (R/W)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: support SPI clock mode 1 and 3. Output data B[0]/B[7] at the first edge.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: support SPI clock mode 0 and 2. Output data B[1]/B[6] at the first edge.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     SPI_RSCK_DATA_OUT Save half a cycle when TSCK is the same as RSCK. 1: output data at RSCK posedge. 0: output data at TSCK posedge. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_RDDMA_BITLEN_EN If this bit is set, SPI_SLV_DATA_BITLEN is used to store the data bit length of Rd_DMA transfer. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_WRDMA_BITLEN_EN If this bit is set,
     <a href="#page-657-1">
      SPI_SLV_DATA_BITLEN
     </a>
     is used to store the data bit length of Wr_DMA transfer. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_RDBUF_BITLEN_EN If this bit is set, S
     <a href="#page-657-1">
      PI_SLV_DATA_BITLEN
     </a>
     is used to store data bit length of Rd_BUF transfer. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_WRBUF_BITLEN_EN If this bit is set,
     <a href="#page-657-1">
      SPI_SLV_DATA_BITLEN
     </a>
     is used to store data bit length of Wr_BUF transfer. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_DMA_SEG_MAGIC_VALUE Configure the
     <a href="#page-657-1">
      magic value of BM tab
     </a>
     le in DMA-controlled configurable segmented transfer. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLAVE_MODE Set SPI work mode. 1: slave mode. 0: master mode. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SOFT_RESET Software reset enable bit. If this bit is set, the SPI clock line, CS line, and data line are reset. Can be configured in CONF state. (WT)
    </li>
    <li block-type="ListItem">
     SPI_USR_CONF 1: enable the CONF state of current DMA-controlled configurable segmented transfer, which means the configurable segmented transfer is started. 0: This is not a configurable segmented transfer. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-657-1">
   </span>
   <img src="_page_657_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_SLV_DATA_BITLEN Configure the transferred data bit length in SPI slave full-/half-duplex modes. (R/W/SS)
  </p>
  <p block-type="Text">
   SPI_SLV_LAST_COMMAND In slave mode, it is the value of command. (R/W/SS)
  </p>
  <p block-type="Text">
   SPI_SLV_LAST_ADDR In slave mode, it is the value of address. (R/W/SS)
  </p>
  <p block-type="Text">
   <span id="page-657-0">
   </span>
   Register 27.12. SPI_CLOCK_REG (0x000C) SPI_CLK_EQU_SYSCLK 1 31 (reserved) 0 0 0 0 0 0 0 0 0 30 22 SPI_CLKDIV_PRE 0 21 18 SPI_CLKCNT_N 0x3 17 12 SPI_CLKCNT_H 0x1 11 6 SPI_CLKCNT_L 0x3 5 0 Reset
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_CLKCNT_L In master mode, this field must be equal to SPI_CLKCNT_N. In slave mode, it must be 0. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CLKCNT_H In master mode, this field must be floor((SPI_CLKCNT_N + 1)/2  1). floor() here is to down round a number, floor(2.2) = 2. In slave mode, it must be 0. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CLKCNT_N In master mode, this is the divider of SPI_CLK. So SPI_CLK frequency is
     <i>
      f
     </i>
     apb_clk/(SPI_CLKDIV_PRE + 1)/(SPI_CLKCNT_N + 1). Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CLKDIV_PRE In master mode, this is pre-divider of SPI_CLK. Can be configured in CONF state. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_CLK_EQU_SYSCLK In master mode, 1: SPI_CLK is eqaul to APB_CLK. 0: SPI_CLK is divided from APB_CLK. Can be configured in CONF state. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-658-0">
   </span>
   <img src="_page_658_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_CLK_EN Set this bit to enable clock gate. (R/W)
  </p>
  <p block-type="Text">
   SPI_MST_CLK_ACTIVE Set this bit to power on the SPI module clock. (R/W)
  </p>
  <p block-type="Text">
   SPI_MST_CLK_SEL This bit is used to select SPI module clock source in master mode. 1: PLL_F80M_CLK. 0: XTAL_CLK. (R/W)
  </p>
  <h4>
   Register 27.14. SPI_DIN_MODE_REG (0x0024)
  </h4>
  <p>
   <span id="page-659-0">
   </span>
   <img src="_page_659_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_DIN0_MODE Configure the input mode for FSPID signal. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: input without delay
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: Input at the (SPI_DIN0_NUM + 1)th falling edge of clk_spi_mst
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2: Input at the (SPI_DIN0_NUM + 1)th rising edge of clk_hclk plus one clk_spi_mst rising edge cycle
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3: Input at the
     <a href="#page-661-0">
     </a>
     (
     <a href="#page-661-0">
      SPI_DIN0_NUM
     </a>
     + 1)th rising edge of clk_hclk plus one clk_spi_mst falling edge cycle
    </li>
   </ul>
  </p>
  <p block-type="Text">
   SPI_DIN1_MODE Confi
   <a href="#page-661-0">
    gure the input m
   </a>
   ode for FSPIQ signal. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: input without delay
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: Input at the (SPI_DIN1_NUM + 1)th falling edge of clk_spi_mst
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2: Input at the (SPI_DIN1_NUM + 1)th rising edge of clk_hclk plus one clk_spi_mst rising edge cycle
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3: Input at the
     <a href="#page-661-0">
     </a>
     (
     <a href="#page-661-0">
      SPI_DIN1_NUM
     </a>
     + 1)th rising edge of clk_hclk plus one clk_spi_mst falling edge cycle
    </li>
   </ul>
  </p>
  <p block-type="Text">
   SPI_DIN2_MODE Confi
   <a href="#page-661-0">
    gure the input m
   </a>
   ode for FSPIWP signal. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: input without delay
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: Input at the (SPI_DIN2_NUM + 1)th falling edge of clk_spi_mst
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2: Input at the (SPI_DIN2_NUM + 1)th rising edge of clk_hclk plus one clk_spi_mst rising edge cycle
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3: Input at the
     <a href="#page-661-0">
     </a>
     (
     <a href="#page-661-0">
      SPI_DIN2_NUM
     </a>
     + 1)th rising edge of clk_hclk plus one clk_spi_mst falling edge cycle
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next p
   <a href="#page-661-0">
    age...
   </a>
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_DIN3_MODE Configure the input mode for FSPIHD signal. Can be configured in CONF state. (R/W)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: input without delay
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: Input at the (SPI_DIN3_NUM + 1)th falling edge of clk_spi_mst
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       2: Input at the (SPI_DIN3_NUM + 1)th rising edge of clk_hclk plus one clk_spi_mst rising edge cycle
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       3: Input at the
       <a href="#page-661-0">
       </a>
       (
       <a href="#page-661-0">
        SPI_DIN3_NUM
       </a>
       + 1)th rising edge of clk_hclk plus one clk_spi_mst falling edge cycle
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     SPI_TIMING_HCLK_ACTIVE 1: enable HCLK (high-frequency clock) in SPI input timing module. 0: disable HCLK. Can b
     <a href="#page-661-0">
      e configured in C
     </a>
     ONF state. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 27.15. SPI_DIN_NUM_REG (0x0028)
  </h4>
  <p>
   <span id="page-661-0">
   </span>
   <img src="_page_661_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_DIN0_NUM Configure the delays to input signal FSPID based on the setting of SPI_DIN0_MODE. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: delayed by 1 clock cycle
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-659-0">
      1: delayed by
     </a>
     2 clock cycles
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2: delayed by 3 clock cycles
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3: delayed by 4 clock cycles
    </li>
    <li block-type="ListItem">
     SPI_DIN1_NUM Configure the delays to input signal FSPIQ based on the setting of SPI_DIN1_MODE. Can be configured in CONF state. (R/W)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: delayed by 1 clock cycle
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: delayed by 2 clock cycles
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       2: delayed by 3 clock cycles
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       3: delayed by 4 clock cycles
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     SPI_DIN2_NUM Configure the delays to input signal FSPIWP based on the setting of SPI_DIN2_MODE. Can be configured in CONF state. (R/W)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: delayed by 1 clock cycle
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       <a href="#page-659-0">
        1: delayed by
       </a>
       2 clock cycles
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       2: delayed by 3 clock cycles
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       3: delayed by 4 clock cycles
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   SPI_DIN3_NUM Configure the delays to input signal FSPIHD based on the setting of SPI_DIN3_MODE. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: delayed by 1 clock cycle
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-659-0">
      1: delayed by
     </a>
     2 clock cycles
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2: delayed by 3 clock cycles
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3: delayed by 4 clock cycles
    </li>
   </ul>
  </p>
  <h4>
   Register 27.16. SPI_DOUT_MODE_REG (0x002C)
  </h4>
  <p>
   <span id="page-662-0">
   </span>
   <img src="_page_662_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_DOUT0_MODE Configure the output mode for FSPID signal. Can be configured in CONF state. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: output without delay
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: output with a delay of a SPI module clock cycle at its falling edge
    </li>
    <li block-type="ListItem">
     SPI_DOUT1_MODE Configure the output mode for FSPIQ signal. Can be configured in CONF state. (R/W)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: output without delay
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: output with a delay of a SPI module clock cycle at its falling edge
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     SPI_DOUT2_MODE Configure the output mode for FSPIWP signal. Can be configured in CONF state. (R/W)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: output without delay
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: output with a delay of a SPI module clock cycle at its falling edge
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     SPI_DOUT3_MODE Configure the output mode for FSPIHD signal. Can be configured in CONF state. (R/W)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: output without delay
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: output with a delay of a SPI module clock cycle at its falling edge
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Register 27.17. SPI_DMA_INT_ENA_REG (0x0034)
  </h4>
  <p>
   <span id="page-663-0">
   </span>
   <img src="_page_663_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_DMA_INFIFO_FULL_ERR_INT_ENA The enable bit for SPI_DMA_INFIFO_FULL_ERR_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_DMA_OUTFIFO_EMPTY_ERR_INT_ENA The enable bit for
     <a href="#page-643-0">
      SPI_DMA_OUTFIFO_EMPTY_ER
     </a>
     R_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_EX_QPI_INT_ENA The enable bit for SPI_SLV_EX_QPI_INT
     <a href="#page-643-0">
      interrupt. (R/W)
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   SPI_SLV_EN_QPI_INT_ENA The enable bit for SPI_SLV_EN_QPI_INT interrupt. (R/W)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD7_INT_ENA The enable bit for S
   <a href="#page-643-0">
    PI_SLV_CMD7_INT
   </a>
   interrupt. (R/W)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD8_INT_ENA The enable bit for S
   <a href="#page-643-0">
    PI_SLV_CMD8_INT
   </a>
   interrupt. (R/W)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD9_INT_ENA The enable bit for
   <a href="#page-643-0">
    SPI_SLV_CMD9_INT
   </a>
   interrupt. (R/W)
  </p>
  <p block-type="Text">
   SPI_SLV_CMDA_INT_ENA The enable bit for
   <a href="#page-643-0">
    SPI_SLV_CMDA_INT
   </a>
   interrupt. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_SLV_RD_DMA_DONE_INT_ENA The en
     <a href="#page-643-0">
      able bit for
     </a>
     SPI_SLV_RD_DMA_DONE_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_WR_DMA_DONE_INT_ENA The enable bit for
     <a href="#page-643-0">
      SPI_SLV_WR_DMA_DONE_INT
     </a>
     interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_RD_BUF_DONE_INT_ENA The enable bit for
     <a href="#page-643-0">
      SPI_SLV_RD_BUF_DONE_INT
     </a>
     interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SLV_WR_BUF_DONE_INT_ENA The enable bit for
     <a href="#page-643-0">
      SPI_SLV_WR_BUF_DONE_INT
     </a>
     interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_TRANS_DONE_INT_ENA The enable bit for SPI_TRANS_DONE_INT
     <a href="#page-643-0">
      interrupt. (R/W)
     </a>
    </li>
    <li block-type="ListItem">
     SPI_DMA_SEG_TRANS_DONE_INT_ENA The enable bit for SPI_DMA_SEG_TRANS_DONE_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_SEG_MAGIC_ERR_INT_ENA The enable bit for SPI_SEG
     <a href="#page-643-0">
      _MAGIC_ERR_INT
     </a>
     interrupt. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <p block-type="Text">
   Continued from the previous page...
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_SLV_CMD_ERR_INT_ENA The enable bit for SPI_SLV_CMD_ERR_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_MST_RX_AFIFO_WFULL_ERR_INT_ENA The enable bit for SPI_MST_RX_AFIFO_WFULL_ERR_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_MST_TX_AFIFO_REMPTY_ERR_INT_ENA The enable bit for
     <a href="#page-643-0">
      SPI_MST_TX_AFIFO_REMPTY_ERR_IN
     </a>
     T interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     SPI_APP2_INT_ENA The enable bit for SPI_APP2_INT interrupt
     <a href="#page-643-0">
      . (R/W)
     </a>
    </li>
    <li block-type="ListItem">
     SPI_APP1_INT_ENA The enable bit for SPI_APP1_INT interrupt. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 27.18. SPI_DMA_INT_CLR_REG (0x0038)
  </h4>
  <p>
   <span id="page-665-0">
   </span>
   <img src="_page_665_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_DMA_INFIFO_FULL_ERR_INT_CLR The clear bit for SPI_DMA_INFIFO_FULL_ERR_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_DMA_OUTFIFO_EMPTY_ERR_INT_CLR The clear bit for
   <a href="#page-643-0">
    SPI_DMA_OUTFIFO_EMPTY_ERR
   </a>
   _INT interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_EX_QPI_INT_CLR The clear bit for SPI_SLV_EX_QPI_INT
   <a href="#page-643-0">
    interrupt. (WT)
   </a>
  </p>
  <p block-type="Text">
   SPI_SLV_EN_QPI_INT_CLR The clear bit for SPI_SLV_EN_QPI_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD7_INT_CLR The clear bit for S
   <a href="#page-643-0">
    PI_SLV_CMD7_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD8_INT_CLR The clear bit for S
   <a href="#page-643-0">
    PI_SLV_CMD8_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD9_INT_CLR The clear bit for
   <a href="#page-643-0">
    SPI_SLV_CMD9_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_CMDA_INT_CLR The clear bit for
   <a href="#page-643-0">
    SPI_SLV_CMDA_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_RD_DMA_DONE_INT_CLR The clear bit for
   <a href="#page-643-0">
    SPI_SLV_R
   </a>
   D_DMA_DONE_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_WR_DMA_DONE_INT_CLR The clear bit for
   <a href="#page-643-0">
    SPI_SLV_WR_DMA_DONE_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_RD_BUF_DONE_INT_CLR The clear bit for
   <a href="#page-643-0">
    SPI_SLV_RD_BUF_DONE_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SLV_WR_BUF_DONE_INT_CLR The clear bit for SPI_SLV_WR_BUF_DONE_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_TRANS_DONE_INT_CLR The clear bit for SPI_T
   <a href="#page-643-0">
    RANS_DONE_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_DMA_SEG_TRANS_DONE_INT_CLR The clear bit for
   <a href="#page-643-0">
    SPI_DMA_SEG_TRANS_
   </a>
   DONE_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   SPI_SEG_MAGIC_ERR_INT_CLR The clear bit for SPI_SE
   <a href="#page-643-0">
    G_MAGIC_ERR_INT
   </a>
   interrupt. (WT) Continued on the next page...
  </p>
  <p block-type="Text">
   Continued from the previous page...
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_SLV_CMD_ERR_INT_CLR The clear bit for SPI_SLV_CMD_ERR_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     SPI_MST_RX_AFIFO_WFULL_ERR_INT_CLR The clear bit for SPI_MST_RX_AFIFO_WFULL_ERR_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     SPI_MST_TX_AFIFO_REMPTY_ERR_INT_CLR The clear bit for
     <a href="#page-643-0">
      SPI_MST_TX_AFIFO_REMPTY_ERR_IN
     </a>
     T interrupt. (WT)
    </li>
    <li block-type="ListItem">
     SPI_APP2_INT_CLR The clear bit for SPI_APP2_INT interrupt
     <a href="#page-643-0">
      . (WT)
     </a>
    </li>
    <li block-type="ListItem">
     SPI_APP1_INT_CLR The clear bit for SPI_APP1_INT interrupt. (WT)
    </li>
   </ul>
  </p>
  <h4>
   Register 27.19. SPI_DMA_INT_RAW_REG (0x003C)
  </h4>
  <p>
   <span id="page-667-0">
   </span>
   <img src="_page_667_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_DMA_INFIFO_FULL_ERR_INT_RAW The raw bit for SPI_DMA_INFIFO_FULL_ERR_INT interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_DMA_OUTFIFO_EMPTY_ERR_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_DMA_OUTFIFO_EMPTY_ER
     </a>
     R_INT interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_SLV_EX_QPI_INT_RAW The raw bit for SPI_SLV_EX_QPI_INT
     <a href="#page-643-0">
      interrupt. (R/W/WTC/SS)
     </a>
    </li>
    <li block-type="ListItem">
     SPI_SLV_EN_QPI_INT_RAW The raw bit for SPI_SLV_EN_QPI_INT interrupt. (R/W/WTC/SS)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   SPI_SLV_CMD7_INT_RAW The raw bit for S
   <a href="#page-643-0">
    PI_SLV_CMD7_INT
   </a>
   interrupt. (R/W/WTC/SS)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD8_INT_RAW The raw bit for S
   <a href="#page-643-0">
    PI_SLV_CMD8_INT
   </a>
   interrupt. (R/W/WTC/SS)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_SLV_CMD9_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_SLV_CMD9_INT
     </a>
     interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_SLV_CMDA_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_SLV_CMDA_INT
     </a>
     interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_SLV_RD_DMA_DONE_INT_RAW The
     <a href="#page-643-0">
      raw bit for
     </a>
     SPI_SLV_RD_DMA_DONE_INT interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_SLV_WR_DMA_DONE_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_SLV_WR_DMA_DONE_INT
     </a>
     interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_SLV_RD_BUF_DONE_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_SLV_RD_BUF_DONE_INT
     </a>
     interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_SLV_WR_BUF_DONE_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_SLV_WR_BUF_DONE_INT
     </a>
     interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_TRANS_DONE_INT_RAW The raw bit for SPI_TRANS_DONE_INT
     <a href="#page-643-0">
      interrupt. (R/W/WT
     </a>
     C/SS)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_DMA_SEG_TRANS_DONE_INT_RAW The raw bit for SPI_DMA_SEG_TRANS_DONE_INT interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_SEG_MAGIC_ERR_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_SEG_MAGIC_ERR_INT
     </a>
     interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_SLV_CMD_ERR_INT_RAW The raw bit for SPI_SLV_CMD_ERR_INT
     <a href="#page-643-0">
      interrupt. (R/W/
     </a>
     WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_MST_RX_AFIFO_WFULL_ERR_INT_RAW The raw bit for SPI_MST_RX_AFIFO_WFULL_ERR_INT interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_MST_TX_AFIFO_REMPTY_ERR_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_MST_TX_AFIFO_REMPTY_ERR_IN
     </a>
     T interrupt. (R/W/WTC/SS)
    </li>
    <li block-type="ListItem">
     SPI_APP2_INT_RAW The raw bit for SPI_APP2_INT interrupt
     <a href="#page-643-0">
      . The value is only controlled by appli
     </a>
     cation. (R/W/WTC)
    </li>
    <li block-type="ListItem">
     SPI_APP1_INT_RAW The raw bit for
     <a href="#page-643-0">
      SPI_APP1_INT
     </a>
     interrupt. The value is only controlled by application. (R/W/WTC)
    </li>
   </ul>
  </p>
  <h4>
   Register 27.20. SPI_DMA_INT_ST_REG (0x0040)
  </h4>
  <p>
   <img src="_page_669_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_DMA_INFIFO_FULL_ERR_INT_ST The status bit for SPI_DMA_INFIFO_FULL_ERR_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     SPI_DMA_OUTFIFO_EMPTY_ERR_INT_ST The status bit for
     <a href="#page-643-0">
      SPI_DMA_OUTFIFO_EMPTY_ERR
     </a>
     _INT interrupt. (RO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   SPI_SLV_EX_QPI_INT_ST The status bit for SPI_SLV_EX_QPI_INT
   <a href="#page-643-0">
    interrupt. (RO)
   </a>
  </p>
  <p block-type="Text">
   SPI_SLV_EN_QPI_INT_ST The status bit for SPI_SLV_EN_QPI_INT interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD7_INT_ST The status bit for S
   <a href="#page-643-0">
    PI_SLV_CMD7_INT
   </a>
   interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD8_INT_ST The status bit for S
   <a href="#page-643-0">
    PI_SLV_CMD8_INT
   </a>
   interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD9_INT_ST The status bit for
   <a href="#page-643-0">
    SPI_SLV_CMD9_INT
   </a>
   interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_CMDA_INT_ST The status bit for
   <a href="#page-643-0">
    SPI_SLV_CMDA_INT
   </a>
   interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_RD_DMA_DONE_INT_ST The status bit for
   <a href="#page-643-0">
    SPI_SLV_R
   </a>
   D_DMA_DONE_INT interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_WR_DMA_DONE_INT_ST The status bit for
   <a href="#page-643-0">
    SPI_SLV_W
   </a>
   R_DMA_DONE_INT interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_RD_BUF_DONE_INT_ST The status bit for
   <a href="#page-643-0">
    SPI_SLV_RD_BUF_DONE_INT
   </a>
   interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_WR_BUF_DONE_INT_ST The status bit for SPI_SLV_WR_BUF_DONE_INT interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_TRANS_DONE_INT_ST The status bit for SPI_T
   <a href="#page-643-0">
    RANS_DONE_INT
   </a>
   interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_DMA_SEG_TRANS_DONE_INT_ST The status bit for
   <a href="#page-643-0">
    SPI_DMA_SEG_TRANS_
   </a>
   DONE_INT interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SEG_MAGIC_ERR_INT_ST The status bit for SPI_SE
   <a href="#page-643-0">
    G_MAGIC_ERR_INT
   </a>
   interrupt. (RO)
  </p>
  <p block-type="Text">
   SPI_SLV_CMD_ERR_INT_ST The status bit for SPI_SLV_CMD_ERR_INT interrupt. (RO)
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SPI_MST_RX_AFIFO_WFULL_ERR_INT_ST The status bit for SPI_MST_RX_AFIFO_WFULL_ERR_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     SPI_MST_TX_AFIFO_REMPTY_ERR_INT_ST The status bit for
     <a href="#page-643-0">
      SPI_MST_TX_AFIFO_REMPTY_ERR_IN
     </a>
     T interrupt. (RO)
    </li>
    <li block-type="ListItem">
     SPI_APP2_INT_ST The status bit for SPI_APP2_INT interrupt
     <a href="#page-643-0">
      . (RO)
     </a>
    </li>
    <li block-type="ListItem">
     SPI_APP1_INT_ST The status bit for SPI_APP1_INT interrupt. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Regist
   <a href="#page-643-0">
    er 27.21. SPI_W
   </a>
   0_REG (0x0098)
  </h4>
  <p>
   <span id="page-670-0">
   </span>
   <img src="_page_670_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_BUF0 32-bit data buffer 0. (R/W/SS)
  </p>
  <p>
   <span id="page-670-1">
   </span>
   <img src="_page_670_Figure_9.jpeg"/>
  </p>
  <p>
   <span id="page-670-2">
   </span>
   <img src="_page_670_Figure_10.jpeg"/>
  </p>
  <p>
   <img src="_page_670_Figure_11.jpeg"/>
  </p>
  <p>
   <span id="page-671-1">
   </span>
   <span id="page-671-0">
   </span>
   <img src="_page_671_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-671-3">
   </span>
   <span id="page-671-2">
   </span>
   SPI_BUF6 32-bit data buffer 6. (R/W/SS)
  </p>
  <p>
   <span id="page-672-1">
   </span>
   <span id="page-672-0">
   </span>
   <img src="_page_672_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-672-3">
   </span>
   <span id="page-672-2">
   </span>
   SPI_BUF10 32-bit data buffer 10. (R/W/SS)
  </p>
  <p>
   <span id="page-673-0">
   </span>
   <img src="_page_673_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-673-1">
   </span>
   <img src="_page_673_Figure_1.jpeg"/>
  </p>
  <p>
   SPI_BUF12 32-bit data buffer 12. (R/W/SS)
  </p>
  <p>
   <img src="_page_673_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-673-2">
   </span>
   <img src="_page_673_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_BUF13 32-bit data buffer 13. (R/W/SS)
  </p>
  <p>
   <span id="page-673-3">
   </span>
   <img src="_page_673_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_BUF14 32-bit data buffer 14. (R/W/SS)
  </p>
  <p>
   <span id="page-674-0">
   </span>
   <img src="_page_674_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_BUF15 32-bit data buffer 15. (R/W/SS)
  </p>
  <p>
   <img src="_page_674_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-674-1">
   </span>
   <img src="_page_674_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   SPI_DATE Version control register. (R/W)
  </p>
  <h1>
   <span id="page-675-0">
   </span>
   Chapter 28
  </h1>
  <h1>
   <span id="page-675-4">
   </span>
   I2C Controller (I2C)
  </h1>
  <p block-type="Text">
   The I2C (Inter-Integrated Circuit) bus allows ESP32-C3 to communicate with multiple external devices. These external devices can share one bus.
  </p>
  <h1>
   28.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-675-1">
   </span>
   The I2C bus has two lines, namely a serial data line (SDA) and a serial clock line (SCL). Both SDA and SCL lines are open-drain. The I2C bus can be connected to a single or multiple master devices and a single or multiple slave devices. However, only one master device can access a slave at a time via the bus.
  </p>
  <p block-type="Text">
   The master initiates communication by generating a START condition: pulling the SDA line low while SCL is high, and sending nine clock pulses via SCL. The first eight pulses are used to transmit a 7-bit address followed by a read/write (
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   ) bit. If the address of an I2C slave matches the 7-bit address transmitted, this matching slave can respond by pulling SDA low on the ninth clock pulse. The master and the slave can send or receive data according to the
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit. Whether to terminate the data transfer or not is determined by the logic level of the acknowledge (ACK) bit. During data transfer, SDA changes only when SCL is low. Once finishing communication, the master sends a STOP condition: pulling SDA up while SCL is high. If a master both reads and writes data in one transfer, then it should send a RSTART condition, a slave address and a
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit before changing its operation. The RSTART condition is used to change the transfer direction and the mode of the devices (master mode or slave mode).
  </p>
  <h1>
   28.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-675-2">
   </span>
   The I2C controller has the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Master mode and slave mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Communication between multiple slaves
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Standard mode (100 Kbit/s)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Fast mode (400 Kbit/s)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     7-bit addressing and 10-bit addressing
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Continuous data transfer achieved by pulling SCL low
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Programmable digital noise filtering
    </li>
    <li block-type="ListItem">
     <span id="page-675-3">
     </span>
     <i>
      •
     </i>
     Double addressing mode, which uses slave address and slave memory or register address
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-676-0">
   </span>
   28.3 I2C Architecture
  </h1>
  <p>
   <img src="_page_676_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 28.3-1. I2C Master Architecture
  </p>
  <p>
   <span id="page-676-1">
   </span>
   <img src="_page_676_Figure_3.jpeg"/>
  </p>
  <p>
   Figure 28.3-2. I2C Slave Architecture
  </p>
  <p block-type="Text">
   The I2C controller runs either in master mode or slave mode, which is determined by I2C_MS_MODE. Figure 28.3-1 shows the architecture of a master, while Figure 28.3-2 shows that of a slave. The I2C controller has the following main parts:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     transmit and receive memory (TX/RX RAM)
    </li>
    <li block-type="ListItem">
     <i>
      <a href="#page-676-0">
       •
      </a>
     </i>
     command controller (CMD_Controller)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SCL clock controller (SCL_FSM)
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SDA data controller (SCL_MAIN_FSM)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     serial/parallel data converter (DATA_Shifter)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     filter for SCL (SCL_Filter)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     filter for SDA (SDA_Filter)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Besides, the I2C controller also has a clock module which generates I2C clocks, and a synchronization module which synchronizes the APB bus and the I2C controller.
  </p>
  <p block-type="Text">
   The clock module is used to select clock sources, turn on and off clocks, and divide clocks. SCL_Filter and SDA_Filter remove noises on SCL input signals and SDA input signals respectively. The synchronization module synchronizes signal transfer between different clock domains.
  </p>
  <p block-type="Text">
   Figure 28.3-3 and Figure 28.3-4 are the timing diagram and corresponding parameters of the I2C protocol. SCL_FSM generates the timing sequence conforming to the I2C protocol.
  </p>
  <p block-type="Text">
   SCL_MAIN_FSM controls the execution of I2C commands and the sequence of the SDA line. CMD_Controller is use
   <a href="#page-677-0">
    d for an
   </a>
   I2C master
   <a href="#page-678-3">
    to gen
   </a>
   erate (R)START, STOP, WRITE, READ and END commands. TX RAM and RX RAM store data to be transmitted and data received respectively. DATA_Shifter shifts data between serial and parallel form.
  </p>
  <p>
   <span id="page-677-0">
   </span>
   <img src="_page_677_Figure_8.jpeg"/>
  </p>
  <p>
   Figure 28.3-3. I2C Protocol Timing (Cited from Fig.31 in The I2C-bus specification Version 2.1)
  </p>
  <span id="page-678-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Chapter 28
      <br/>
      I2C Controller (I2C)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th colspan="2">
      GoBack
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Figure 28.3-4. I2C Timing Parameters (Cited from Table 5 in The I2C-bus specification Version 2.1)
  </p>
  <h1>
   28.4 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-678-0">
   </span>
   Note that operations may differ between the I2C controller in ESP32-C3 and other masters or slaves on the bus. Please refer to datasheets of individual I2C devices for specific information.
  </p>
  <h1>
   28.4.1 Clock Configuration
  </h1>
  <p block-type="Text">
   <span id="page-678-1">
   </span>
   Registers, TX RAM, and RX RAM are configured and accessed in the APB_CLK clock domain, whose frequency is 1
   <i>
    ∼
   </i>
   80 MHz. The main logic of the I2C controller, including SCL_FSM, SCL_MAIN_FSM, SCL_FILTER, SDA_FILTER, and DATA_SHIFTER, are in the I2C_SCLK clock domain.
  </p>
  <p block-type="Text">
   You can choose the clock source for I2C_SCLK from XTAL_CLK or RC_FAST_CLK via I2C_SCLK_SEL. When I2C_SCLK_SEL is cleared, the clock source is XTAL_CLK. When I2C_SCLK_SEL is set, the clock source is RC_FAST_CLK. The clock source is enabled by configuring I2C_SCLK_ACTIVE as high level, and then passes through a fractional divider to generate I2C_SCLK according to the following equatio
   <a href="#page-716-0">
    n:
   </a>
  </p>
  <p block-type="Equation">
   <math display="block">
    Divisor = I2C\_SCLR\_DIV\_NUM + 1 + \frac{I2C\_SCLR\_DIV\_A}{I2C\_SCLR\_DIV\_B}
   </math>
  </p>
  <p block-type="Text">
   The frequency of XTAL_CLK is 40 MHz, while the frequency of RC_FAST_CLK is 17.5 MHz. Limited by timing parameters, the derived clock I2C_SCLK should operate at a freq
   <a href="#page-716-0">
    uency 20 timers larger t
   </a>
   han SCL's frequency.
  </p>
  <h1>
   28.4.2 SCL and SDA Noise Filtering
  </h1>
  <p block-type="Text">
   <span id="page-678-2">
   </span>
   SCL_Filter and SDA_Filter modules are identical and are used to filter signal noises on SCL and SDA, respectively. These filters can be enabled or disabled by configuring I2C_SCL_FILTER_EN and I2C_SDA_FILTER_EN.
  </p>
  <p block-type="Text">
   Espressif Systems 679
  </p>
  <p block-type="Text">
   Take SCL_Filter as an example. When enabled, SCL_Filter samples input signals on the SCL line continuously. These input signals are valid only if they remain unchanged for consecutive I2C_SCL_FILTER_THRES I2C_SCLK clock cycles. Given that only valid input signals can pass through the filter, SCL_Filter can remove glitches whose pulse width is shorter than I2C_SCL_FILTER_THRES I2C_SCLK clock cycles, while SDA_Filter can remove glitches whose pulse width is shorter than I2C_SDA_FILTER_THRES
   <a href="#page-715-0">
    I2C_SCLK clock
   </a>
   cycles.
  </p>
  <h1>
   28.4.3 SCL Clock Stretching
  </h1>
  <p block-type="Text">
   <span id="page-679-0">
   </span>
   The I2C controller in slave mode (i.e. slave) can hold the SCL line low in exchange for more time to process data. This function called clock stretching is enabled by setting the I2C_SLAVE_SCL_STRETCH_EN bit. The time period to release the SCL line from stretching is configured by setting the I2C_STRETCH_PROTECT_NUM field, in order to avoid timing sequence errors. The slave will hold the SCL line low when one of the following four events occurs:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Address match: The address of the slave matches the address sent by t
     <a href="#page-717-0">
      he master via the SDA line, and
     </a>
     the
     <i>
      R
     </i>
     /
     <i>
      W
     </i>
     bit is 1.
    </li>
    <li block-type="ListItem">
     2. RAM being full: RX RAM of the slave is full. Note that when the slave receives less than 32 bytes, it is not necessary to enable clock stretching; when the slave receives 32 bytes or more, you may interrupt data transmission to wrapped around RAM via the FIFO threshold, or enable clock stretching for more time to process data. When clock stretching is enabled, I2C_RX_FULL_ACK_LEVEL must be cleared, otherwise there will be unpredictable consequences.
    </li>
    <li block-type="ListItem">
     3. RAM being empty: The slave is sending data, but its TX RAM is empty.
    </li>
    <li block-type="ListItem">
     4. Sending an ACK: If I2C_SLAVE_BYTE_ACK_CTL_EN
     <a href="#page-713-0">
      is set, the slave pulls SC
     </a>
     L low when sending an ACK bit. At this stage, software validates data and configures I2C_SLAVE_BYTE_ACK_LVL to control the level of the ACK bit. Note that when RX RAM of the slave is full, the level of the ACK bit to be sent is determined by I2C
     <a href="#page-717-0">
      _RX_FULL_ACK_LEVEL, instead o
     </a>
     f I2C_SLAVE_BYTE_ACK_LVL. In this case, I2C_RX_FULL_ACK_LEVEL should also be cleared to en
     <a href="#page-717-0">
      sure proper functioning of cl
     </a>
     ock stretching.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   After SCL has been stretched low, the cause of stretching can be read from the I2C_STRETCH_CAUSE bit. Clock stretching is di
   <a href="#page-713-0">
    sabled by setting the
   </a>
   I2C_SLAVE_SCL
   <a href="#page-717-0">
    _STRETCH_CLR
   </a>
   bit.
  </p>
  <h1>
   28.4.4 Generating SCL Pulses in Idle State
  </h1>
  <p block-type="Text">
   <span id="page-679-1">
   </span>
   Usually when the I2C bus is idle, the SCL
   <a href="#page-717-0">
   </a>
   li
   <a href="#page-717-0">
    ne is held high. The I2C controlle
   </a>
   r in ESP32-C3 can be programmed to generate SCL pulses in idle state. This function only works when the I2C controller is configured as master. If the I2C_SCL_RST_SLV_EN bit is set, hardware will send I2C_SCL_RST_SLV_NUM SCL pulses. When software reads 0 in I2C_SCL_RST_SLV_EN, set I2C_CONF_UPGATE to stop this function.
  </p>
  <h1>
   28.4.5
   <a href="#page-716-1">
    Synchroniz
   </a>
   ation
  </h1>
  <p block-type="Text">
   <span id="page-679-2">
   </span>
   I2C regist
   <a href="#page-716-1">
    ers are configured in AP
   </a>
   B_C
   <a href="#page-713-0">
    LK domain, whereas
   </a>
   the I2C controller is configured in asynchronous I2C_SCLK domain. Therefore, before being used by the I2C controller, register values should be synchronized by first writing configuration registers and then writing 1 to I2C_CONF_UPGATE. Registers that need synchronization are listed in Table 28.4-1.
  </p>
  <span id="page-680-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 28.4-1. I2C Synchronous Registers
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Register
     </td>
     <td>
      Parameter
     </td>
     <td>
      Address
     </td>
    </tr>
    <tr>
     <td>
      I2C_CTR_REG
     </td>
     <td>
      I2C_SLV_TX_AUTO_START_EN
     </td>
     <td>
      0x0004
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_ADDR_10BIT_RW_CHECK_EN
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_ADDR_BROADCASTING_EN
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SDA_FORCE_OUT
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SCL_FORCE_OUT
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SAMPLE_SCL_LEVEL
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_RX_FULL_ACK_LEVEL
      <br/>
      I2C_MS_MODE
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_TX_LSB_FIRST
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_RX_LSB_FIRST
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_ARBITRATION_EN
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_TO_REG
     </td>
     <td>
      I2C_TIME_OUT_EN
     </td>
     <td>
      0x000C
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_TIME_OUT_VALUE
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_SLAVE_ADDR_REG
     </td>
     <td>
      I2C_ADDR_10BIT_EN
     </td>
     <td>
      0x0010
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SLAVE_ADDR
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_FIFO_CONF_REG
     </td>
     <td>
      I2C_FIFO_ADDR_CFG_EN
     </td>
     <td>
      0x0018
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_SP_CONF_REG
     </td>
     <td>
      I2C_SDA_PD_EN
     </td>
     <td>
      0x0080
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SCL_PD_EN
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SCL_RST_SLV_NUM
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SCL_RST_SLV_EN
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_STRETCH_CONF_REG
     </td>
     <td>
      I2C_SLAVE_BYTE_ACK_CTL_EN
     </td>
     <td>
      0x0084
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SLAVE_BYTE_ACK_LVL
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SLAVE_SCL_STRETCH_EN
      <br/>
      I2C_STRETCH_PROTECT_NUM
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_LOW_PERIOD_REG
     </td>
     <td>
      I2C_SCL_LOW_PERIOD
     </td>
     <td>
      0x0000
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_HIGH_PERIOD_REG
     </td>
     <td>
      I2C_WAIT_HIGH_PERIOD
     </td>
     <td>
      0x0038
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_HIGH_PERIOD
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_SDA_HOLD_REG
     </td>
     <td>
      I2C_SDA_HOLD_TIME
     </td>
     <td>
      0x0030
     </td>
    </tr>
    <tr>
     <td>
      I2C_SDA_SAMPLE_REG
     </td>
     <td>
      I2C_SDA_SAMPLE_TIME
     </td>
     <td>
      0x0034
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_START_HOLD_REG
     </td>
     <td>
      I2C_SCL_START_HOLD_TIME
     </td>
     <td>
      0x0040
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_RSTART_SETUP_REG
     </td>
     <td>
      I2C_SCL_RSTART_SETUP_TIME
     </td>
     <td>
      0x0044
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_STOP_HOLD_REG
     </td>
     <td>
      I2C_SCL_STOP_HOLD_TIME
     </td>
     <td>
      0x0048
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_STOP_SETUP_REG
     </td>
     <td>
      I2C_SCL_STOP_SETUP_TIME
     </td>
     <td>
      0x004C
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_ST_TIME_OUT_REG
     </td>
     <td>
      I2C_SCL_ST_TO_I2C
     </td>
     <td>
      0x0078
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_MAIN_ST_TIME_OUT_REG
     </td>
     <td>
      I2C_SCL_MAIN_ST_TO_I2C
     </td>
     <td>
      0x007C
     </td>
    </tr>
    <tr>
     <td>
      I2C_FILTER_CFG_REG
     </td>
     <td>
      I2C_SCL_FILTER_EN
     </td>
     <td>
      0x0050
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SCL_FILTER_THRES
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      I2C_SDA_FILTER_EN
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   28.4.6 Open-Drain Output
  </h1>
  <p block-type="Text">
   <span id="page-680-0">
   </span>
   SCL and SDA output drivers must be configured as open drain. There are two ways to achieve this:
  </p>
  <p block-type="Text">
   Espressif Systems 681
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Set I2C_SCL_FORCE_OUT and I2C_SDA_FORCE_OUT, and configure GPIO_PIN
     <i>
      n
     </i>
     _PAD_DRIVER for corresponding SCL and SDA pads as open-drain.
    </li>
    <li block-type="ListItem">
     2. Clear I2C_SCL_FORCE_OUT and I2C_SDA_FORCE_OUT.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Because
   <a href="#page-713-0">
    these lines are configur
   </a>
   ed
   <a href="#page-713-0">
   </a>
   a
   <a href="#page-713-0">
    s open-drain, the low-t
   </a>
   o-high transitio
   <a href="#page-183-0">
    n time of each line is longe
   </a>
   r, determined together by the pull-up resistor and the line capacitance. The output duty cycle of I2C is limited by the SDA an
   <a href="#page-713-0">
    d SCL line's pull-up spe
   </a>
   ed,
   <a href="#page-713-0">
    mainly SCL's speed.
   </a>
  </p>
  <p block-type="Text">
   In addition, when I2C_SCL_FORCE_OUT and I2C_SCL_PD_EN are set to 1, SCL can be forced low; when I2C_SDA_FORCE_OUT and I2C_SDA_PD_EN are set to 1, SDA can be forced low.
  </p>
  <p>
   <img src="_page_681_Figure_4.jpeg"/>
  </p>
  <p>
   <span id="page-681-1">
   </span>
   <span id="page-681-0">
   </span>
   <img src="_page_681_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 28.4-1. I2C Timing Diagram
  </p>
  <p block-type="Text">
   Figure 28.4-1 shows the timing diagram of an I2C master. This figure also specifies registers used to configure the START bit, STOP bit, data hold time, data sample time, waiting time on the rising SCL edge, etc. Timing parameters are calculated as follows in I2C_SCLK clock cycles:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1.
     <i>
      t
      <a href="#page-681-1">
       LOW
      </a>
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCL
     </i>
     _
     <i>
      LOW
     </i>
     _
     <i>
      P ERIOD
     </i>
     + 1)
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
    <li block-type="ListItem">
     2.
     <i>
      tHIGH
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCL
     </i>
     _
     <i>
      HIGH
     </i>
     _
     <i>
      P ERIOD
     </i>
     + 1)
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
    <li block-type="ListItem">
     3.
     <i>
      tSU
     </i>
     :
     <i>
      ST A
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCL
     </i>
     _
     <i>
      <a href="#page-709-1">
       RST ART
      </a>
     </i>
     _
     <i>
      SET UP
     </i>
     _
     <i>
      T IME
     </i>
     + 1)
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
    <li block-type="ListItem">
     4.
     <i>
      tHD
     </i>
     :
     <i>
      ST A
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCL
     </i>
     _
     <i>
      <a href="#page-710-0">
       ST ART
      </a>
     </i>
     _
     <i>
      HOLD
     </i>
     _
     <i>
      T IME
     </i>
     + 1)
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
    <li block-type="ListItem">
     5.
     <i>
      t
      <sup>
       r
      </sup>
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCL
     </i>
     _
     <i>
      W AIT
     </i>
     _
     <i>
      HIGH
     </i>
     _
     <i>
      <a href="#page-710-2">
       P ERIOD
      </a>
     </i>
     + 1)
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
    <li block-type="ListItem">
     6.
     <i>
      tSU
     </i>
     :
     <i>
      ST O
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCL
     </i>
     _
     <i>
      ST OP
     </i>
     _
     <i>
      <a href="#page-710-1">
       SET UP
      </a>
     </i>
     _
     <i>
      T IME
     </i>
     + 1)
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
    <li block-type="ListItem">
     7.
     <i>
      tBUF
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCL
     </i>
     _
     <i>
      ST OP
     </i>
     _
     <i>
      <a href="#page-710-0">
       HOLD
      </a>
     </i>
     _
     <i>
      T IME
     </i>
     + 1)
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
    <li block-type="ListItem">
     8.
     <i>
      tHD
     </i>
     :
     <i>
      DAT
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SDA
     </i>
     _
     <i>
      <a href="#page-711-1">
       HOLD
      </a>
     </i>
     _
     <i>
      T IME
     </i>
     + 1)
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
    <li block-type="ListItem">
     9.
     <i>
      tSU
     </i>
     :
     <i>
      DAT
     </i>
     = (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCL
     </i>
     _
     <i>
      LOW
     </i>
     _
     <i>
      <a href="#page-711-0">
       P ERIOD
      </a>
      − I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SDA
     </i>
     _
     <i>
      HOLD
     </i>
     _
     <i>
      T IME
     </i>
     )
     <i>
      · TI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK
     </i>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Timing registers b
   <a href="#page-709-2">
    elow are divided into two gro
   </a>
   ups, depending on the mode in which these registers are active:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Master mod
   <a href="#page-709-1">
    e only:
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. I2C_SCL_START_HOLD_TIME: Specifies the interval between pulling SDA low and pulling SCL low when the master generates a START condition. This interval is (I2C_SCL_START_HOLD_TIME +1) in I2C_SCLK cycles. This register is active only when the I2C controller works in master mode.
    </li>
    <li block-type="ListItem">
     2.
     <a href="#page-710-1">
      I2C_SCL_LOW_PERIOD: Spec
     </a>
     ifies the low period of SCL. This period lasts (I2C_SCL_LOW_PERIOD + 1) in I2C_SCLK cycles. However, it could be extended when
     <a href="#page-710-1">
      SCL is pulled low by periphera
     </a>
     l devices or by an END command executed by the I2C controller, or when the clock is stretched.
     <a href="#page-709-1">
      This register is active on
     </a>
     ly when the I2C controller works in master mode.
    </li>
    <li block-type="ListItem">
     3. I2C_SCL_WAIT_HIGH_PERIOD: Specifies time for SCL to go high in I2C_SCLK cycles. Please make sure that SCL could be pulled high within this time period. Otherwise, the high period of SCL may be incorrect. This register is active only when the I2C controller works in master mode.
    </li>
    <li block-type="ListItem">
     4.
     <a href="#page-710-0">
      I2C_SCL_HIGH_PERIOD: Spec
     </a>
     ifies the high period of SCL in I2C_SCLK cycles. This register is active only when the I2C controller works in master mode. When SCL goes high within (I2C_SCL_WAIT_HIGH_PERIOD + 1) in I2C_SCLK cycles, its frequency is:
    </li>
   </ul>
  </p>
  <p block-type="TextInlineMath">
   <i>
    fscl
   </i>
   <a href="#page-710-0">
    =
   </a>
   <i>
    f
   </i>
   I2C_SCLK I2C_SCL_LOW_PERIOD + I2C_SCL_HIGH_PERIOD + I2C_SCL_WAIT_HIGH_PERIOD+3
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Mast
     <a href="#page-710-0">
      er mode and slave mode:
     </a>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1. I2C_SDA_
       <a href="#page-709-1">
        SAMPLE_TIME: Specifie
       </a>
       s
       <a href="#page-710-0">
        the interval between the
       </a>
       ri
       <a href="#page-710-0">
        sing edge of SCL and the level
       </a>
       sampling time of SDA. It is advised to set a value in the middle of SCL's high period, so as to correctly sample the level of SCL. This register is active both in master mode and slave mode.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2.
       <a href="#page-709-3">
        I2C_SDA_HOLD_TIME: Sp
       </a>
       ecifies the interval between changing the SDA output level and the falling edge of SCL. This register is active both in master mode and slave mode.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Timing parameters limits corresponding register configuration.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1.
     <i>
      <sup>
       f
      </sup>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      <a href="#page-709-2">
       SCLK
      </a>
      fSCL &gt;
     </i>
     20
    </li>
    <li block-type="ListItem">
     2. 3
     <i>
      × fI
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SCLK ≤
     </i>
     (
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      SDA
     </i>
     _
     <i>
      HOLD
     </i>
     _
     <i>
      T IME −
     </i>
     4)
     <i>
      × fAP B
     </i>
     _
     <i>
      CLK
     </i>
    </li>
    <li block-type="ListItem">
     3. I2C_SDA_HOLD_TIME + I2C_SCL_START_HOLD_TIME &gt; SDA_FILTER_THRES + 3
    </li>
    <li block-type="ListItem">
     4. I2C_SCL_WAIT_HIGH_PERIOD &lt;
     <a href="#page-709-2">
      I2C_SDA_SAM
     </a>
     PLE_TIME &lt; I2C_SCL_HIGH_PERIOD
    </li>
    <li block-type="ListItem">
     5.
     <a href="#page-709-2">
      I2C_SDA_SAMPLE_TIM
     </a>
     E &lt;
     <a href="#page-710-1">
      I2C_SCL_WAIT_HIGH_PERI
     </a>
     OD + I2C_SCL_START_HOLD_TIME + I2C_SCL_RSTART_SETUP_TIME
    </li>
    <li block-type="ListItem">
     6.
     <a href="#page-710-0">
      I2C_STRETCH_PROTECT_NUM
     </a>
     +
     <a href="#page-709-3">
      I2C_SDA_HOLD_TIME
     </a>
     &gt; I
     <a href="#page-710-0">
      2C_SCL_LOW_PERIOD
     </a>
    </li>
   </ul>
  </p>
  <h1>
   28.4.8
   <a href="#page-710-2">
    Timeout Control
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-682-0">
   </span>
   The
   <a href="#page-717-0">
   </a>
   I
   <a href="#page-717-0">
    2C controller has three types of
   </a>
   ti
   <a href="#page-709-2">
    meout control, namely
   </a>
   ti
   <a href="#page-709-1">
    meout control for SCL_F
   </a>
   SM, for SCL_MAIN_FSM, and for the SCL line. The first two are always enabled, while the third is configurable.
  </p>
  <p block-type="Text">
   When SCL_FSM remains unchanged for more than 2
   <i>
    <sup>
     I
    </sup>
   </i>
   2
   <i>
    C
   </i>
   _
   <i>
    SCL
   </i>
   _
   <i>
    ST
   </i>
   _
   <i>
    T O
   </i>
   _
   <i>
    I
   </i>
   2
   <i>
    <sup>
     C
    </sup>
   </i>
   clock cycles, an I2C_SCL_ST_TO_INT interrupt is triggered, and then SCL_FSM goes to idle state. The value of I2C_SCL_ST_TO_I2C should be less than or equal to 22, which means SCL_FSM could remain unchanged for 2
   <sup>
    22
   </sup>
   I2C_SCLK clock cycles at most before the interr
   <a href="#page-711-2">
    upt is generated.
   </a>
  </p>
  <p block-type="Text">
   When SCL_MAIN_FSM remains unchanged for more than 2
   <i>
    <sup>
     I
    </sup>
   </i>
   2
   <i>
    C
   </i>
   _
   <i>
    SCL
   </i>
   _
   <i>
    MAIN
   </i>
   _
   <i>
    ST
   </i>
   _
   <i>
    T O
   </i>
   _
   <i>
    I
   </i>
   2
   <i>
    <sup>
     C
    </sup>
   </i>
   clock cycles, an
  </p>
  <p block-type="Text">
   I2C_SCL_MAIN_ST_TO_INT interrupt is triggered, and then SCL_MAIN_FSM goes to idle state. The value of I2C_SCL_MAIN_ST_TO_I2C should be less than or equal to 22, which means SCL_MAIN_FSM could remain unchanged for 2
   <sup>
    22
   </sup>
   I2C_SCLK clock cycles at most before the interrupt is generated.
  </p>
  <p block-type="Text">
   Timeout control for SCL is enabled by setting I2C_TIME_OUT_EN. When the level of SCL remains unchanged
   <a href="#page-712-0">
    for more than 2
   </a>
   <i>
    <sup>
     I
    </sup>
   </i>
   2
   <i>
    C
   </i>
   _
   <i>
    T IME
   </i>
   _
   <i>
    OUT
   </i>
   _
   <i>
    V ALUE
   </i>
   clock cycles, an I2C_TIME_OUT_INT interrupt is triggered, and then the I2C bus goes to idle state.
  </p>
  <h1>
   28.4.9 C
   <a href="#page-714-0">
    ommand Configu
   </a>
   ration
  </h1>
  <p block-type="Text">
   <span id="page-683-0">
   </span>
   When the I2C controller works in master mode, CMD_Controller reads commands from 8 sequential command registers and controls SCL_FSM and SCL_MAIN_FSM accordingly.
  </p>
  <p>
   <span id="page-683-1">
   </span>
   <img src="_page_683_Figure_4.jpeg"/>
  </p>
  <p>
   Figure 28.4-2. Structure of I2C Command Registers
  </p>
  <p block-type="Text">
   Command registers, whose structure is illustrated in Figure 28.4-2, are active only when the I2C controller works in master mode. Fields of command registers are:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     1. CMD_DONE: Indicates that a command has been executed. After each command has been executed, the CMD_DONE bit in the corresponding command r
     <a href="#page-683-1">
      egister
     </a>
     is set to 1 by hardware. By reading this bit, software can tell if the command has been executed. When writing new commands, this bit must be cleared by software.
    </li>
    <li block-type="ListItem">
     2. op_code: Indicates the command. The I2C controller supports five commands:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       RSTART: op_code = 6. The I2C controller sends a START bit or a RSTART bit defined by the I2C protocol.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       WRITE: op_code = 1. The I2C controller sends a slave address, a register address (only in double addressing mode) and data to the slave.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       READ: op_code = 3. The I2C controller reads data from the slave.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       STOP: op_code = 2. The I2C controller sends a STOP bit defined by the I2C protocol. This code also indicates that the command sequence has been executed, and the CMD_Controller stops reading commands. After restarted by software, the CMD_Controller resumes reading commands from command register 0.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       END: op_code = 4. The I2C controller pulls the SCL line down and suspends I2C communication. This code also indicates that the command sequence has completed, and the CMD_Controller stops executing commands. Once software refreshes data in command registers and the RAM, the CMD_Controller can be restarted to execute commands from command register 0 again.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     3. ack_value: Used to configure the level of the ACK bit sent by the I2C controller during a read operation. This bit is ignored in RSTART, STOP, END and WRITE conditions.
    </li>
    <li block-type="ListItem">
     4. ack_exp: Used to configure the level of the ACK bit expected by the I2C controller during a write operation. This bit is ignored during RSTART, STOP, END and READ conditions.
    </li>
    <li block-type="ListItem">
     5. ack_check_en: Used to enable the I2C controller during a write operation to check whether the ACK level sent by the slave matches ack_exp in the command. If this bit is set and the level received does not match ack_exp in the WRITE command, the master will generate an I2C_NACK_INT interrupt and a STOP condition for data transfer. If this bit is cleared, the controller will not check the ACK level sent by the slave. This bit is ignored during RSTART, STOP, END and READ conditions.
    </li>
    <li block-type="ListItem">
     6. byte_num: Specifies the length of data (in bytes) to be read or written. Can range from 1 to 255 bytes. This bit is ignored during RSTART, STOP and END conditions.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Each command sequence is executed starting from command register 0 and terminated by a STOP or an END. Therefore, there must be a STOP or an END command in one command sequence.
  </p>
  <p block-type="Text">
   A complete data transfer on the I2C bus should be initiated by a START and terminated by a STOP. The transfer process may be completed using multiple sequences, separated by END commands. Each sequence may differ in the direction of data transfer, clock frequency, slave addresses, data length, etc. This allows efficient use of available peripheral RAM and also achieves more flexible I2C communication.
  </p>
  <h1>
   28.4.10 TX/RX RAM Data Storage
  </h1>
  <p block-type="Text">
   <span id="page-684-0">
   </span>
   Both TX RAM and RX RAM are 32 × 8 bits, and can be accessed in FIFO or non-FIFO mode. If I2C_NONFIFO_EN bit is cleared, both RAMs are accessed in FIFO mode; if I2C_NONFIFO_EN bit is set, both RAMs are accessed in non-FIFO mode.
  </p>
  <p block-type="Text">
   TX RAM stores data that the I2C controller needs to send. During communication, when the I2C controller
   <a href="#page-715-1">
    needs to send dat
   </a>
   a (except acknowledgement bits), it reads data from TX
   <a href="#page-715-1">
    RAM and sends the
   </a>
   m sequentially via SDA. When the I2C controller works in master mode, all data must be stored in TX RAM in the order they will be sent to slaves. The data stored in TX RAM include slave addresses, read/write bits, register addresses (only in double addressing mode) and data to be sent. When the I2C controller works in slave mode, TX RAM only stores data to be sent.
  </p>
  <p block-type="Text">
   TX RAM can be read and written by the CPU. The CPU writes to TX RAM either in FIFO mode or in non-FIFO mode (direct address). In FIFO mode, the CPU writes to TX RAM via the fixed address I2C_DATA_REG, with addresses for writing in TX RAM incremented automatically by hardware. In non-FIFO mode, the CPU accesses TX RAM directly via address fields (I2C Base Address + 0x100) ~(I2C Base Address + 0x17C). Each byte in TX RAM occupies an entire word in the address space. Therefore, the address of the first byte is
   <a href="#page-719-0">
    I2C Bas
   </a>
   e Address + 0x100, the second byte is I2C Base Address + 0x104, the third byte is I2C Base Address + 0x108, and so on. The CPU can only read
   <a href="#page-97-0">
    TX RAM via direct
   </a>
   addresses.
   <a href="#page-97-0">
    Addresses for read
   </a>
   ing TX RAM are the same with addresses for writing TX RAM.
  </p>
  <p block-type="Text">
   <a href="#page-97-0">
    RX RAM
   </a>
   stores data the I2C controlle
   <a href="#page-97-0">
    r receives during c
   </a>
   ommunication. When the
   <a href="#page-97-0">
    I2C controller wor
   </a>
   ks in slave mode, neither slave addresses sent by the master nor register addresses (only in double addressing mode) will be stored into RX RAM. Values of RX RAM can be read by software after I2C communication completes.
  </p>
  <p block-type="Text" class="has-continuation">
   RX RAM can only be read by the CPU. The CPU reads RX RAM either in FIFO mode or in non-FIFO mode (direct address). In FIFO mode, the CPU reads RX RAM via the fixed address I2C_DATA_REG, with addresses for reading RX RAM incremented automatically by hardware. In non-FIFO mode, the CPU accesses TX RAM directly
  </p>
  <p block-type="Text">
   via address fields (I2C Base Address + 0x180) ~(I2C Base Address + 0x1FC). Each byte in RX RAM occupies an entire word in the address space. Therefore, the address of the first byte is I2C Base Address + 0x180, the second byte is I2C Base Address + 0x184, the third byte is I2C Base Address + 0x188 and so on.
  </p>
  <p block-type="Text">
   In FIFO mode, TX
   <a href="#page-97-0">
    RAM of a master m
   </a>
   ay wrap aro
   <a href="#page-97-0">
    und to send data l
   </a>
   arger than 32 bytes. Set I2C_FIFO_PRT_EN. If the size of data to be sent is smaller than I2C_TXFIFO_WM_THRHD (mast
   <a href="#page-97-0">
    er), an I2C_TXFIFO_
   </a>
   WM_INT (master) interru
   <a href="#page-97-0">
    pt is generated. Af
   </a>
   ter receiving the interrup
   <a href="#page-97-0">
    t, software continu
   </a>
   es writing to I2C_DATA_REG (master). Please ensure that software writes to or refreshes TX RAM before the master sen
   <a href="#page-715-1">
    ds data, otherwise
   </a>
   it may result in unpredictable consequence
   <a href="#page-715-1">
    s.
   </a>
  </p>
  <p block-type="Text">
   In FIFO mode, RX RAM of a slave may also wrap around to receive data larger than 32 byt
   <a href="#page-719-0">
    es. Set
   </a>
   I2C_FIFO_PRT_EN and clear I2C_RX_FULL_ACK_LEVEL. If data already received (to be overwritten) is larger than I2C_RXFIFO_WM_THRHD (slave), an I2C_RXFIFO_WM_INT (slave) interrupt is generated. After receiving the interrupt, software continues reading from I2C_DATA_REG (slave).
  </p>
  <h1>
   28.4.11
   <a href="#page-715-1">
    Data Conver
   </a>
   sion
  </h1>
  <p block-type="Text">
   <span id="page-685-0">
   </span>
   DATA_Shifter is used for serial/parallel convers
   <a href="#page-719-0">
    ion, converting
   </a>
   byte data in TX RAM to an outgoing serial bitstream or an incoming serial bitstream to byte data in RX RAM. I2C_RX_LSB_FIRST and I2C_TX_LSB_FIRST can be used to select LSB- or MSB-first storage and transmission of data.
  </p>
  <h1>
   28.4.12 Addressing Mode
  </h1>
  <p block-type="Text">
   <span id="page-685-1">
   </span>
   Besides 7-bit addressing, the ESP32-C3 I2C controller also supports 10-bit addressing and double addressing. 10-bit addressing can be mixed with 7-bit addressing.
  </p>
  <p block-type="Text">
   Define the slave address as SLV_ADDR. In 7-bit addressing mode, the slave address is SLV_ADDR[6:0]; in 10-bit addressing mode, the slave address is SLV_ADDR[9:0].
  </p>
  <p block-type="Text">
   In 7-bit addressing mode, the master only needs to send one byte of address, which comprises SLV_ADDR[6:0] and a
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit. In 7-bit addressing mode, there is a special case called general call addressing (broadcast). It is enabled by setting I2C_ADDR_BROADCASTING_EN in a slave. When the slave receives the general call address (0x00) from the master and the
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit followed is 0, it responds to the master regardless of its own address.
  </p>
  <p block-type="Text">
   In 10-bit addressing mode, the mast
   <a href="#page-713-0">
    er needs to send two bytes of ad
   </a>
   dress. The first byte is slave_addr_first_7bits followed by a
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit, and slave_addr_first_7bits should be configured as (0x78 | SLV_ADDR[9:8]). The second byte is slave_addr_second_byte, which should be configured as SLV_ADDR[7:0]. The slave can enable 10-bit addressing by configuring I2C_ADDR_10BIT_EN. I2C_SLAVE_ADDR is used to configure I2C slave address. Specifically, I2C_SLAVE_ADDR[14:7] should be configured as SLV_ADDR[7:0], and I2C_SLAVE_ADDR[6:0] should be configured as (0x78 | SLV_ADDR[9:8]). Since a 10-bit slave address has one more byte than a 7-bit address, b
   <a href="#page-714-1">
    yte_num of the WRITE
   </a>
   command and
   <a href="#page-714-1">
    the number of byte
   </a>
   s in the RAM increase by one.
  </p>
  <p block-type="Text">
   <span id="page-685-2">
   </span>
   When working in slave mode, the
   <a href="#page-714-1">
   </a>
   I
   <a href="#page-714-1">
    2C controller suppo
   </a>
   rts double addressing, where the first address is the address of an I2C slave, and the second one is the slave's memory address. When using double addressing, RAM must be accessed in non-FIFO mode. Double addressing is enabled by setting I2C_FIFO_ADDR_CFG_EN.
  </p>
  <h1>
   28.4.13
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   Bit Check in 10-bit Addressing Mode
  </h1>
  <p block-type="Text">
   In 10-bit addressing mode, when I2C_ADDR_10BIT_RW_CHECK_EN is set to 1, the I2C controller performs a check on the first byte, which consists of slave_addr_first_7bits and a
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit. When the
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit does not indicate a WRITE operation, i.e. not in line with the I2C protocol, the data transfer ends. If the check feature is not enabled, when the
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit
   <a href="#page-713-0">
    does not indicate a WRITE, the dat
   </a>
   a transfer still continues, but transfer failure may occur.
  </p>
  <h1>
   28.4.14 To Start the I2C Controller
  </h1>
  <p block-type="Text">
   <span id="page-686-0">
   </span>
   To start the I2C controller in master mode, after configuring the controller to master mode and command registers, write 1 to I2C_TRANS_START in order that the master starts to parse and execute command sequences. The master always executes a command sequence starting from command register 0 to a STOP or an END at the end. To execute another command sequence starting from command register 0, refresh commands by writi
   <a href="#page-713-0">
    ng 1 again to
   </a>
   I2C_TRANS_START.
  </p>
  <p block-type="Text">
   To start the I2C controller in slave mode, there are two ways:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set I2C_SLV_TX_AUTO_ST
     <a href="#page-713-0">
      ART_EN, and the sla
     </a>
     ve starts automatic transfer upon an address match;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Clear I2C_SLV_TX_AUTO_START_EN, and always set I2C_TRANS_START before transfer.
    </li>
   </ul>
  </p>
  <h1>
   28.5
   <a href="#page-713-0">
    Programming Exa
   </a>
   mple
  </h1>
  <p block-type="Text">
   <span id="page-686-1">
   </span>
   This sections provides programming examples for typical communication scenarios. ESP32-C3 has one I2C controller. For the convenience of description, I2C masters and slaves in all subsequent figures are ESP32-C3 I2C controllers. I2C master is referred to as I2Cmaster, and I2C slave is referred to as I2Cslave.
  </p>
  <h1>
   <span id="page-686-3">
   </span>
   <span id="page-686-2">
   </span>
   28.5.1 I2Cmaster Writes to I2Cslave with a 7-bit Address in One Command Sequence
  </h1>
  <h4>
   28.5.1.1 Introduction
  </h4>
  <p>
   <span id="page-687-1">
   </span>
   <img src="_page_687_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 28.5-1. I2Cmaster Writing to I2Cslave with a 7-bit Address
  </p>
  <p block-type="Text">
   Figure 28.5-1 shows how I2Cmaster writes N bytes of data to I2Cslave's RAM using 7-bit addressing. As shown in figure 28.5-1 , the first byte in the RAM of I2Cmaster is a 7-bit I2Cslave address followed by a
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit. When the
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit is 0, it indicates a WRITE operation. The remaining bytes are used to store data ready for transfer. The cmd b
   <a href="#page-687-1">
    ox con
   </a>
   tains related command sequences.
  </p>
  <p block-type="Text">
   After
   <a href="#page-687-1">
   </a>
   t
   <a href="#page-687-1">
    he com
   </a>
   mand sequence is configured and data in RAM is ready, I2Cmaster enables the controller and initiates data transfer by setting the I2C_TRANS_START bit. The controller has four steps to take:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Wait for SCL to go high, to avoid SCL being used by other masters or slaves.
    </li>
    <li block-type="ListItem">
     2. Execute a RSTART command
     <a href="#page-713-0">
      and send a START b
     </a>
     it.
    </li>
    <li block-type="ListItem">
     3. Execute a WRITE command by taking N+1 bytes from the RAM in order and send them to I2Cslave in the same order. The first byte is the address of I2Cslave.
    </li>
    <li block-type="ListItem">
     4. Send a STOP. Once the I2Cmaster transfers a STOP bit, an I2C_TRANS_COMPLETE_INT interrupt is generated.
    </li>
   </ul>
  </p>
  <h2>
   28.5.1.2 Configuration Example
  </h2>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-687-0">
     </span>
     1. Set I2C_MS_MODE (master) to 1, and I2C_MS_MODE (slave) to 0.
    </li>
    <li block-type="ListItem">
     2. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     3. Co
     <a href="#page-713-0">
      nfigure command
     </a>
     registers of I2Cm
     <a href="#page-713-0">
      aster
     </a>
     .
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Command register
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
      <br/>
      I2C_COMMAND1 (master)
     </td>
     <td>
      WRITE
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
      1
     </td>
     <td>
      N+1
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND2
      <br/>
      (mas
     </td>
     <td>
      STOP
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     4. Write I2Cslave address and data to be sent to TX RAM of I2Cmaster in either FIFO mode or non-FIFO mode according to Section 28.4.10.
    </li>
    <li block-type="ListItem">
     5. Write address of I2Cslave to I2C_SLAVE_ADDR (slave) in I2C_SLAVE_ADDR_REG (slave) register.
    </li>
    <li block-type="ListItem">
     6. Write 1 to I2C_CONF_
     <a href="#page-684-0">
      UPGATE
     </a>
     (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     7. Write 1 to I2C_TRANS_START
     <a href="#page-714-1">
      (master) and
     </a>
     I2C_TRANS_START
     <a href="#page-714-1">
      (slave) to start tra
     </a>
     nsfer.
    </li>
    <li block-type="ListItem">
     8. I2Cslave c
     <a href="#page-713-0">
      ompares the slave ad
     </a>
     dress sent by I2Cmaster
     <a href="#page-713-0">
      with its ow
     </a>
     n address in I2C_SLAVE_ADDR (slave). When ack_check_en (master) in I2Cmaster's WRITE command is 1, I2Cmaster checks ACK value each time it sends a
     <a href="#page-713-0">
      byte. When ack_che
     </a>
     ck_en (mast
     <a href="#page-713-0">
      er) is 0, I2C
     </a>
     master does not check ACK value and take I2Cslave as a matching slave by default.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Match: If the received ACK value matches ack_exp (master) (the expected ACK value), I2Cmaster continues data transfer.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Not match: If the received ACK value does not match ack_exp, I2Cmaster generates an I2C_NACK_INT (master) interrupt and stops data transfer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     9. I2Cmaster sends data, and checks ACK value or not according to ack_check_en (master).
    </li>
    <li block-type="ListItem">
     10. If data to be sent (N) is larger than 32 bytes, TX RAM of I2Cmaster may wrap around in FIFO mode. For details, please refer to Section 28.4.10.
    </li>
    <li block-type="ListItem">
     11. If data to be received (N) is larger than 32 bytes, RX RAM of I2Cslave may wrap around in FIFO mode. For details, please refer to Section 28.4.10.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If data to be received (N) is lar
   <a href="#page-684-0">
    ger than
   </a>
   32 bytes, the other way is to enable clock stretching by setting the I2C_SLAVE_SCL_STRETCH_EN (slave), and clearing I2C_RX_FULL_ACK_LEVEL. When RX RAM is full, an I2C_SLAVE_STRETCH_INT
   <a href="#page-684-0">
    (slav
   </a>
   e) interrupt is generated. In this way, I2Cslave can hold SCL low, in exchange for more time to read data. After software has finished reading, you can set I2C
   <a href="#page-717-0">
    _SLAVE_STRETCH_INT_CLR
   </a>
   (slave) to 1 to clear interrupt, and set
   <a href="#page-713-0">
    I2C_SLAVE_SC
   </a>
   L_STRETCH_CLR (slave)
   <a href="#page-705-0">
    to release the SCL line.
   </a>
  </p>
  <p block-type="Text">
   12. After data transfer completes, I2Cmaster executes the STOP command, and generates an
   <a href="#page-722-0">
    I2C_TRANS_COMPLETE_INT (m
   </a>
   aster) interrupt.
  </p>
  <h1>
   <span id="page-688-1">
   </span>
   <span id="page-688-0">
   </span>
   28.5.2 I2Cmaster Writes to I2Cslave with a 10-bit Address in One Command Sequence
  </h1>
  <h4>
   28.5.2.1 Introduction
  </h4>
  <p>
   <span id="page-689-1">
   </span>
   <img src="_page_689_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 28.5-2. I2Cmaster Writing to a Slave with a 10-bit Address
  </p>
  <p block-type="Text">
   Figure 28.5-2 shows how I2Cmaster writes N bytes of data using 10-bit addressing to an I2C slave. The configuration and transfer process is similar to what is described in 28.5.1, except that a 10-bit I2Cslave address is formed from two bytes. Since a 10-bit I2Cslave address has one more byte than a 7-bit I2Cslave address, byte_
   <a href="#page-689-1">
    num and
   </a>
   length of data in TX RAM increase by 1 accordingly.
  </p>
  <h2>
   28.5.2.2 Configuration Example
  </h2>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-689-0">
     </span>
     1. Set I2C_MS_MODE (master) to 1, and I2C_MS_MODE (slave) to 0.
    </li>
    <li block-type="ListItem">
     2. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     3. Co
     <a href="#page-713-0">
      nfigure command
     </a>
     registers of I2Cm
     <a href="#page-713-0">
      aster
     </a>
     .
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      3. Configure command registers of I2Cmaster.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND1 (master)
     </td>
     <td>
      WRITE
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
      1
     </td>
     <td>
      N+2
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND2
      <br/>
      (mas
     </td>
     <td>
      STOP
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     4.
     <a href="#page-726-0">
      Configure
     </a>
     I2C_SLAVE_ADDR (slave) in I2C_SLAVE_ADDR_REG (slave) as I2Cslave's 10-bit address, and set I2C_ADDR_10BIT_EN (slave) to 1 to enable 10-bit addressing.
    </li>
    <li block-type="ListItem">
     5. Write I2Cslave address and data to be sent to TX RAM of I2Cmaster. The first byte of I2Cslave address comprises ((0x78 |
     <a href="#page-714-1">
      I2C_SLAV
     </a>
     E_ADDR[
     <a href="#page-714-1">
      9:8])«1) and a
     </a>
     <i>
      R
     </i>
     /
     <i>
      W
     </i>
     bit. The second byte of I2Cslave address is I2C
     <a href="#page-714-1">
      _SLAVE_ADDR[7:0]. T
     </a>
     hese two bytes are followed by data to be sent in FIFO or non-FIFO mode.
    </li>
    <li block-type="ListItem">
     6. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     7.
     <a href="#page-714-1">
      Write 1 to
     </a>
     I2C_TRA
     <a href="#page-714-1">
      NS_START
     </a>
     (master) and I2C_TRANS_START (slave) to start transfer.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     8. I2Cslave compares the slave address sent by I2Cmaster with its own address in I2C_SLAVE_ADDR (slave). When ack_check_en (master) in I2Cmaster's WRITE command is 1, I2Cmaster checks ACK value each time it sends a byte. When ack_check_en (master) is 0, I2Cmaster does not check ACK value and take I2Cslave as matching slave by default.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Match: If the received ACK value matches ack_exp (master) (the expected ACK value), I2Cmaster continues data transfer.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Not match: If the received ACK value does not match ack_exp, I2Cmaster generates an I2C_NACK_INT (master) interrupt and stops data transfer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     9. I2Cmaster sends data, and checks ACK value or not according to ack_check_en (master).
    </li>
    <li block-type="ListItem">
     10. If data to be sent is larger than 32 bytes, TX RAM of I2Cmaster may wrap around in FIFO mode. For details, please refer to Section 28.4.10.
    </li>
    <li block-type="ListItem">
     11. If data to be received is larger than 32 bytes, RX RAM of I2Cslave may wrap around in FIFO mode. For details, please refer to Section 28.4.10.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If data to be received i
   <a href="#page-684-0">
    s larger t
   </a>
   han 32 bytes, the other way is to enable clock stretching by setting I2C_SLAVE_SCL_STRETCH_EN (slave), and clearing I2C_RX_FULL_ACK_LEVEL to 0. When RX RAM is full, an I2C_SLAVE_STRETCH_INT
   <a href="#page-684-0">
    (slav
   </a>
   e) interrupt is generated. In this way, I2Cslave can hold SCL low, in exchange for more time to read data. After software has finished reading, you can set
   <a href="#page-717-0">
    I2C_SLAVE_STRETCH_INT_CLR
   </a>
   (slave) to 1 to clear
   <a href="#page-713-0">
   </a>
   i
   <a href="#page-713-0">
    nterrupt, and set
   </a>
   I2C_SLAVE_SCL_STRETCH_CLR (slave)
   <a href="#page-705-0">
    to release the SCL line.
   </a>
  </p>
  <p block-type="Text">
   12. After data transfer completes, I2Cmaster executes the STOP command, and generates an
   <a href="#page-722-0">
    I2C_TRANS_COMPLETE_INT (m
   </a>
   aster) interrupt.
  </p>
  <h1>
   28.5.3 I2Cmaster Writes to I2Cslave with Two 7-bit Addresses in One Command Sequence
  </h1>
  <h2>
   <span id="page-691-1">
   </span>
   <span id="page-691-0">
   </span>
   28.5.3.1 Introduction
  </h2>
  <p>
   <span id="page-691-3">
   </span>
   <img src="_page_691_Figure_2.jpeg"/>
  </p>
  <p>
   Figure 28.5-3. I2Cmaster Writing to I2Cslave with Two 7-bit Addresses
  </p>
  <p block-type="Text">
   Figure 28.5-3 shows how I2Cmaster writes N bytes of data to I2Cslave's RAM using 7-bit double addressing. The configuration and transfer process is similar to what is described in Section 28.5.1, except that in 7-bit double addressing mode I2Cmaster sends two 7-bit addresses. The first address is the address of an I2C slave, and the secon
   <a href="#page-691-3">
    d one is
   </a>
   I2Cslave's memory address (i.e. addrM in Figure 28.5-3). When using double addressing, RAM must be accessed in non-FIFO mode. The I2C slave put received byte0 ~
   <a href="#page-686-2">
    byte(N
   </a>
   -1) into its RAM in an order staring from addrM. The RAM is overwritten every 32 bytes.
  </p>
  <h2>
   28.5.3.2 Configuration Example
  </h2>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-691-2">
     </span>
     1. Set I2C_MS_MODE (master) to 1, and I2C_MS_MODE (slave) to 0.
    </li>
    <li block-type="ListItem">
     2. Set I2C_FIFO_ADDR_CFG_EN (slave) to 1 to enable double addressing mode.
    </li>
    <li block-type="ListItem">
     3. Write 1 to
     <a href="#page-713-0">
      I2C_CONF
     </a>
     _UPGATE (master) and
     <a href="#page-713-0">
      I2C_CONF_
     </a>
     UPGATE (slave) to synchronize registers.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND1 (master)
     </td>
     <td>
      WRITE
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
      1
     </td>
     <td>
      N+2
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND2
      <br/>
      (mas
     </td>
     <td>
      STOP
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   4. Co
   <a href="#page-715-1">
    nfigure command registers
   </a>
   of I2Cmaster.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     5.
     <a href="#page-726-0">
      Write I2C
     </a>
     slave address and data to be sent to TX RAM of I2Cmaster in FIFO or non-FIFO mode.
    </li>
    <li block-type="ListItem">
     6. Write address of I2Cslave to I2C_SLAVE_ADDR (slave) in I2C_SLAVE_ADDR_REG (slave) register.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 692
  </p>
  <p block-type="Text">
   ESP32-C3 TRM (Version 1.3)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     7. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     8. Write 1 to I2C_TRANS_START (master) and I2C_TRANS_START (slave) to start transfer.
    </li>
    <li block-type="ListItem">
     9. I2Cslave c
     <a href="#page-713-0">
      ompares the slave ad
     </a>
     dress sent by I2Cmaster
     <a href="#page-713-0">
      with its ow
     </a>
     n address in I2C_SLAVE_ADDR (slave). When ack_check_en (master) in I2Cmaster's WRITE command is 1, I2Cmaster checks ACK value each time it sends a
     <a href="#page-713-0">
      byte. When ack_che
     </a>
     ck_en (mast
     <a href="#page-713-0">
      er) is 0, I2C
     </a>
     master does not check ACK value and take I2Cslave as matching slave by default.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Match: If the received ACK value matches ack_exp (master) (the expected ACK value), I2Cmaster continues data transfer.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Not match: If the received ACK value does not match ack_exp, I2Cmaster generates an I2C_NACK_INT (master) interrupt and stops data transfer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     10. I2Cslave receives the RX RAM address sent by I2Cmaster and adds the offset.
    </li>
    <li block-type="ListItem">
     11. I2Cmaster sends data, and checks ACK value or not according to ack_check_en (master).
    </li>
    <li block-type="ListItem">
     12. If data to be sent is larger than 32 bytes, TX RAM of I2Cmaster may wrap around in FIFO mode. For details, please refer to Section 28.4.10.
    </li>
    <li block-type="ListItem">
     13. If data to be received is larger than 32 bytes, you may enable clock stretching by setting I2C_SLAVE_SCL_STRETCH_EN (slave), and clearing I2C_RX_FULL_ACK_LEVEL to 0. When RX RAM is full, an I2C_SLAVE_ST
     <a href="#page-684-0">
      RETCH_I
     </a>
     NT (slave) interrupt is generated. In this way, I2Cslave can hold SCL low, in exchange for more time to read data. After software has finished reading, you can set
     <a href="#page-717-0">
      I2C_SLAVE_STRETCH_INT_CLR
     </a>
     (slave) to 1 to clear
     <a href="#page-713-0">
     </a>
     i
     <a href="#page-713-0">
      nterrupt, and set
     </a>
     I2C_SLAVE_SCL_STRETCH_CLR (slave)
     <a href="#page-705-0">
      to release the SCL line.
     </a>
    </li>
    <li block-type="ListItem">
     14. After data transfer completes, I2Cmaster executes the STOP command, and generates an
     <a href="#page-722-0">
      I2C_TRANS_COMPLETE_INT (m
     </a>
     aster) interrupt.
    </li>
   </ul>
  </p>
  <h1>
   28.5.4 I2Cmaster Writes to I2Cslave with a 7-bit Address in Multiple Command Sequences
  </h1>
  <h1>
   <span id="page-693-1">
   </span>
   <span id="page-693-0">
   </span>
   28.5.4.1 Introduction
  </h1>
  <p>
   <span id="page-693-2">
   </span>
   <img src="_page_693_Figure_2.jpeg"/>
  </p>
  <p>
   Figure 28.5-4. I2Cmaster Writing to I2Cslave with a 7-bit Address in Multiple Sequences
  </p>
  <p block-type="Text">
   Given that the I2C Controller RAM holds only 32 bytes, when data are too large to be processed even by the wrapped RAM, it is advised to transmit them in multiple command sequences. At the end of every command sequence is an END command. When the controller executes this END command to pull SCL low, software refreshes command sequence registers and the RAM for next the transfer.
  </p>
  <p block-type="Text">
   Figure 28.5-4 shows how I2Cmaster writes to an I2C slave in two or three segments as an example. For the first segment, the CMD_Controller registers are configured as shown in Segment0. Once data in I2Cmaster's RAM is ready and I2C_TRANS_START is set, I2Cmaster initiates data transfer. After executing the END command, I2Cmaster
   <a href="#page-693-2">
    turns
   </a>
   off the SCL clock and pulls SCL low to reserve the bus. Meanwhile, the controller generates an I2C_END_DETECT_INT interrupt.
  </p>
  <p block-type="Text">
   For the se
   <a href="#page-713-0">
    cond segment, afte
   </a>
   r detecting the I2C_END_DETECT_INT interrupt, software refreshes the
  </p>
  <p block-type="Text">
   CMD_Controller registers, reloads the RAM and clears this interrupt, as shown in Segment1. If cmd1 in the second segment is a STOP, then data is transmitted to I2Cslave in two segments. I2Cmaster resumes data transfer after I2C_TRANS_START is set, and terminates the transfer by sending a STOP bit.
  </p>
  <p block-type="Text">
   For the third segment, after the second data transfer finishes and an I2C_END_DETECT_INT is detected, the CMD_Controller registers of I2Cmaster are configured as shown in Segment2. Once I2C_TRANS_START is set, I2Cmaster gen
   <a href="#page-713-0">
    erates a STOP bit an
   </a>
   d terminates the transfer.
  </p>
  <p block-type="Text">
   Note that other I2Cmasters will not transact on the bus between two segments. The bus is only released after a STOP signal is sent. The I2C controller can be reset by setting I2C_FSM_RST field
   <a href="#page-713-0">
    at any time. This fie
   </a>
   ld will later be cleared automatically by hardware.
  </p>
  <h1>
   28.5.4.2 Configuration Example
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-694-0">
     </span>
     1. Set I2C_MS_MODE (master) to 1, and I2C_MS_MODE (slave) to 0.
    </li>
    <li block-type="ListItem">
     2. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     3. Co
     <a href="#page-713-0">
      nfigure command
     </a>
     registers of I2Cm
     <a href="#page-713-0">
      aster
     </a>
     .
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      3. Configure command registers of I2Cmaster.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND1 (master)
     </td>
     <td>
      WRITE
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
      1
     </td>
     <td>
      N+1
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     4.
     <a href="#page-726-0">
      Write I2C
     </a>
     slave address and data to be sent to TX RAM of I2Cmaster in either FIFO mode or non-FIFO mode according to Section 28.4.10.
    </li>
    <li block-type="ListItem">
     5. Write address of I2Cslave to I2C_SLAVE_ADDR (slave) in I2C_SLAVE_ADDR_REG (slave) register
    </li>
    <li block-type="ListItem">
     6. Write 1 to I2C_CONF_
     <a href="#page-684-0">
      UPGATE
     </a>
     (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     7. Write 1 to I2C_TRANS_START
     <a href="#page-714-1">
      (master) and
     </a>
     I2C_TRANS_START
     <a href="#page-714-1">
      (slave) to start tra
     </a>
     nsfer.
    </li>
    <li block-type="ListItem">
     8. I2Cslave c
     <a href="#page-713-0">
      ompares the slave ad
     </a>
     dress sent by I2Cmaster with its own address in I2C_SLAVE_ADDR (slave). When ack_check_en (master) in I2Cmaster's
     <a href="#page-713-0">
      WRITE command is
     </a>
     1, I2Cmaster checks ACK value each time it sends a
     <a href="#page-713-0">
      byte. When ack_che
     </a>
     ck_en (mast
     <a href="#page-713-0">
      er) is 0, I2C
     </a>
     master does not check ACK value and take I2Cslave as matching slave by default.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Match: If the received ACK value matches ack_exp (master) (the expected ACK value), I2Cmaster continues data transfer.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Not match: If the received ACK value does not match ack_exp, I2Cmaster generates an I2C_NACK_INT (master) interrupt and stops data transfer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     9. I2Cmaster sends data, and checks ACK value or not according to ack_check_en (master).
    </li>
    <li block-type="ListItem">
     10. After the I2C_END_DETECT_INT (master) interrupt is generated, set I2C_END_DETECT_INT_CLR (master) to 1 to clear this interrupt.
    </li>
    <li block-type="ListItem">
     11. Update I2Cmaster's command registers.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 28
      <br/>
      I2C Controller (I2C)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     12. Write M bytes of data to be sent to TX RAM of I2Cmaster in FIFO or non-FIFO mode.
    </li>
    <li block-type="ListItem">
     13.
     <a href="#page-726-1">
      Write 1 to
     </a>
     I2C_TRANS_START (master) bit to start transfer and repeat step 9.
    </li>
    <li block-type="ListItem">
     14. If the command is a STOP, I2C stops transfer and generates an I2C_TRANS_COMPLETE_INT (master) interrupt.
    </li>
    <li block-type="ListItem">
     15. If the co
     <a href="#page-713-0">
      mmand is an END, re
     </a>
     peat step 10.
    </li>
    <li block-type="ListItem">
     16. Update I2Cmaster's command registers.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      16. Update I2Cmaster's command registers.
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     17. Write 1 to I2C_TRANS_START (master) bit to start transfer.
    </li>
    <li block-type="ListItem">
     18. I2Cmaster
     <a href="#page-726-1">
      exec
     </a>
     utes the STOP command and generates an I2C_TRANS_COMPLETE_INT (master) interrupt.
    </li>
   </ul>
  </p>
  <h1>
   28.5.5 I2Cmaster
   <a href="#page-713-0">
    Reads
   </a>
   I2Cslave with a 7-bit Address in One Command Sequence
  </h1>
  <h2>
   <span id="page-695-1">
   </span>
   <span id="page-695-0">
   </span>
   28.5.5.1 Introduction
  </h2>
  <p>
   <span id="page-695-2">
   </span>
   <img src="_page_695_Figure_11.jpeg"/>
  </p>
  <p>
   <img src="_page_695_Figure_12.jpeg"/>
  </p>
  <p block-type="TextInlineMath">
   Figure 28.5-5 shows how I2Cmaster reads N bytes of data from an I2C slave using 7-bit addressing. cmd1 is a WRITE command, and when this command is executed I2Cmaster sends I2Cslave address. The byte sent comprises a 7-bit I2Cslave address and a
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit. When the
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit is 1, it indicates a READ operation. If the addres
   <a href="#page-695-2">
    s of an
   </a>
   I2C slave matches the sent address, this matching slave starts sending data to I2Cmaster. I2Cmaster generates acknowledgements according to ack_value defined in the READ command upon receiving a byte.
  </p>
  <p block-type="Text">
   As illustrated in Figure 28.5-5, I2Cmaster executes two READ commands: it generates ACKs for (N-1) bytes of data in cmd2, and a NACK for the last byte of data in cmd 3. This configuration may be changed as required. I2Cmaster writes received data into the controller RAM from addr0, whose original content (a I2Cslave address and a
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit) is ove
   <a href="#page-695-2">
    rwritten
   </a>
   by byte0 marked red in Figure 28.5-5.
  </p>
  <h1>
   28.5.5.2 Configuration Example
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-696-0">
     </span>
     1. Set I2C_MS_MODE (master) to 1, and I2C_MS_MODE
     <a href="#page-695-2">
      (slave)
     </a>
     to 0.
    </li>
    <li block-type="ListItem">
     2. We recommend setting I2C_SLAVE_SCL_STRETCH_EN (slave) to 1, so that SCL can be held low for more processing time when I2Cslave needs to send data. If this bit is not set, software should write data to
     <a href="#page-713-0">
     </a>
     b
     <a href="#page-713-0">
      e sent to I2C
     </a>
     slave's TX RAM before I2Cmaster
     <a href="#page-713-0">
      initiates
     </a>
     transfer. Configuration below is applicable to scenario where I2C_SL
     <a href="#page-717-0">
      AVE_SCL_STRETCH_EN
     </a>
     (slave) is 1.
    </li>
    <li block-type="ListItem">
     3. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      4. Configure command registers of I2Cmaster.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND1 (master)
      <br/>
      I2C_COMMAND2
      <br/>
      (mas
     </td>
     <td>
      WRITE
      <br/>
      READ
     </td>
     <td>
      0
      <br/>
      0
     </td>
     <td>
      0
      <br/>
      0
     </td>
     <td>
      1
      <br/>
      1
     </td>
     <td>
      1
      <br/>
      N-1
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND3
      <br/>
      (mas
     </td>
     <td>
      READ
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   4. Configure com
   <a href="#page-717-0">
    mand registers of I2C
   </a>
   master.
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     5. Write I2Cslave address to TX RAM of I2Cmaster in either FIFO mode or non-FIFO mode according to Section
     <a href="#page-727-0">
      28.4.10.
     </a>
    </li>
    <li block-type="ListItem">
     6. Write address of I2Cslave to I2C_SLAVE_ADDR (slave) in I2C_SLAVE_ADDR_REG (slave) register.
    </li>
    <li block-type="ListItem">
     7.
     <a href="#page-684-0">
      Write 1 t
     </a>
     o I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     8. Write 1 to I2C_TRANS_START
     <a href="#page-714-1">
      (master) bit to st
     </a>
     art I2Cmaster
     <a href="#page-714-1">
      's transfer.
     </a>
    </li>
    <li block-type="ListItem">
     9. Start I2Cslave
     <a href="#page-713-0">
      's transfer accord
     </a>
     ing to Section
     <a href="#page-713-0">
      28.4.14.
     </a>
    </li>
    <li block-type="ListItem">
     10. I2Cslave c
     <a href="#page-713-0">
      ompares the slave a
     </a>
     ddress sent by I2Cmaster with its own address in I2C_SLAVE_ADDR (slave). When ack_check_en (master) in I2Cmaster's WRITE command is 1, I2Cmaster checks ACK value each time it sends a byte. When ack_check_en (master
     <a href="#page-686-0">
      ) is 0, I2
     </a>
     Cmaster does not check ACK value and take I2Cslave as matching slave by default.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Match: If the received ACK value matches ack_exp (master) (the expected ACK value), I2Cmaster continues data transfer.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Not match: If the received ACK value does not match ack_exp, I2Cmaster generates an I2C_NACK_INT (master) interrupt and stops data transfer.
    </li>
    <li block-type="ListItem">
     11. After I2C_SLAVE_STRETCH_INT (slave) is generated, the I2C_STRETCH_CAUSE bit is 0. The I2Cslave address matches the address sent over SDA, and I2Cslave needs to send data.
    </li>
    <li block-type="ListItem">
     12. Write data to be sent to TX RAM of I2Cslave according to Section 28.4.10.
    </li>
    <li block-type="ListItem">
     13. Set I
     <a href="#page-705-0">
      2C_SLAVE_SCL_STRETCH_
     </a>
     CLR (slave) to 1 to releas
     <a href="#page-718-0">
      e SCL.
     </a>
    </li>
    <li block-type="ListItem">
     14. I2Cslave sends data, and I2Cmaster checks ACK value or not accor
     <a href="#page-684-0">
      ding to
     </a>
     ack_check_en (master) in the READ command.
    </li>
    <li block-type="ListItem">
     15. If d
     <a href="#page-717-0">
      ata to be read by I2C
     </a>
     master is larger than 32 bytes, an I2C_SLAVE_STRETCH_INT (slave) interrupt will be generated when TX RAM of I2Cslave becomes empty. In this way, I2Cslave can hold SCL low, so that software has more time to pad data in TX RAM of I2Cslave and read data in RX RAM of I2Cmaster. After software has finished reading, you can set I2C_SLAVE_
     <a href="#page-705-0">
      STRETCH_INT_CLR
     </a>
     (slave) to 1 to clear interrupt, and set I2C_SLAVE_SCL_STRETCH_CLR (slave) to release the SCL line.
    </li>
    <li block-type="ListItem">
     16. After I2Cmaster has received the last byte of data, set ack_value (master) to 1. I2Cslave will stop transfer once receiving the I2C_NACK_INT interrup
     <a href="#page-722-0">
      t.
     </a>
    </li>
    <li block-type="ListItem">
     17. After da
     <a href="#page-717-0">
      ta transfer completes, I2C
     </a>
     master executes the STOP command, and generates an I2C_TRANS_COMPLETE_INT (master) interrupt.
    </li>
   </ul>
  </p>
  <h1>
   28.5.6 I2Cmaster Reads I2Cslave with a 10-bit Address in One Command Sequence
  </h1>
  <h4>
   <span id="page-697-1">
   </span>
   <span id="page-697-0">
   </span>
   28.5.6.1 Introduction
  </h4>
  <p>
   <span id="page-697-2">
   </span>
   <img src="_page_697_Figure_10.jpeg"/>
  </p>
  <p>
   Figure 28.5-6. I2Cmaster Reading I2Cslave with a 10-bit Address
  </p>
  <p block-type="Text">
   Figure 28.5-6 shows how I2Cmaster reads data from an I2C slave using 10-bit addressing. Unlike 7-bit addressing, in 10-bit addressing the WRITE command of the I2Cmaster is formed from two bytes, and correspondingly TX RAM of this master stores a 10-bit address of two bytes. The
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit in the first byte is 0, which
   <a href="#page-697-2">
    indicate
   </a>
   s a WRITE operation. After a RSTART condition, I2Cmaster sends the first byte of address again to read data from I2Cslave, but the
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit is 1, which indicates a READ operation. The two address bytes can be configured as described in Section 28.5.2.
  </p>
  <h1>
   28.5.6.2 Configuration Example
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-698-0">
     </span>
     1. Set I2C_MS_MODE (master)
     <a href="#page-688-0">
     </a>
     t
     <a href="#page-688-0">
      o 1, and
     </a>
     I2C_MS_MODE (slave) to 0.
    </li>
    <li block-type="ListItem">
     2. We recommend setting I2C_SLAVE_SCL_STRETCH_EN (slave) to 1, so that SCL can be held low for more processing time when I2Cslave needs to send data. If this bit is not set, software should write data to
     <a href="#page-713-0">
     </a>
     b
     <a href="#page-713-0">
      e sent to I2C
     </a>
     slave's TX RAM before I2Cmaster
     <a href="#page-713-0">
      initiates
     </a>
     transfer. Configuration below is applicable to scenario where I2C_SL
     <a href="#page-717-0">
      AVE_SCL_STRETCH_EN
     </a>
     (slave) is 1.
    </li>
    <li block-type="ListItem">
     3. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      4. Configure command registers of I2Cmaster.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND1 (master)
     </td>
     <td>
      WRITE
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      2
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND2
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND3
      <br/>
      (mas
     </td>
     <td>
      WRITE
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
    </tr>
    <tr>
     <td>
      ter)
      <br/>
      I2C_COMMAND4 (master)
     </td>
     <td>
      READ
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      N-1
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND5
      <br/>
      (mas
     </td>
     <td>
      READ
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND6
      <br/>
      (mas
     </td>
     <td>
      STOP
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   4. Configure com
   <a href="#page-717-0">
    mand registers of I2C
   </a>
   master.
  </p>
  <p block-type="Text">
   5.
   <a href="#page-727-2">
    Configure
   </a>
   I2C_SLAVE_ADDR (slave) in I2C_SLAVE_ADDR_REG (slave) as I2Cslave's 10-bit address, and set
  </p>
  <p block-type="Text">
   I2C_ADDR_10BIT_EN (slave) to 1 to enable 10-bit addressing.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     6. Write I2Cslave
     <a href="#page-714-1">
      address and da
     </a>
     ta to be s
     <a href="#page-714-1">
      ent to TX RAM of I2C
     </a>
     master in either FIFO or non-FIFO mode. The first byte of address comprises ((0x78 | I2C_SLAVE_ADDR[9:8])«1) and a
     <i>
      R
     </i>
     /
     <i>
      W
     </i>
     bit, which is 1 and
     <a href="#page-714-1">
      indicates a WRITE op
     </a>
     eration. The second byte of address is I2C_SLAVE_ADDR[7:0]. The third byte is ((0x78 | I2C_SLAVE_ADDR[9:8])«1) and a
     <i>
      R
     </i>
     /
     <i>
      W
     </i>
     bit, which is 1 and indicates a READ operation.
    </li>
    <li block-type="ListItem">
     7. Write 1 to I2C_CONF_UPGATE (master) and
     <a href="#page-714-1">
      I2C_CONF_UPG
     </a>
     ATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     8. Write 1 to
     <a href="#page-714-1">
      I2C_TRANS_STAR
     </a>
     T (master) to start I2Cmaster's tran
     <a href="#page-714-1">
      sfer.
     </a>
    </li>
    <li block-type="ListItem">
     9. Start I2Cslave
     <a href="#page-713-0">
      's transfer accord
     </a>
     ing to Section
     <a href="#page-713-0">
      28.4.14.
     </a>
    </li>
    <li block-type="ListItem">
     10. I2Cslave c
     <a href="#page-713-0">
      ompares the slave a
     </a>
     ddress sent by I2Cmaster with its own address in I2C_SLAVE_ADDR (slave). When ack_check_en (master) in I2Cmaster's WRITE command is 1, I2Cmaster checks ACK value each time it
    </li>
   </ul>
  </p>
  <p block-type="Text">
   sends a byte. When ack_check_en (master) is 0, I2Cmaster does not check ACK value and take I2Cslave as matching slave by default.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Match: If the received ACK value matches ack_exp (master) (the expected ACK value), I2Cmaster continues data transfer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Not match: If the received ACK value does not match ack_exp, I2Cmaster generates an I2C_NACK_INT (master) interrupt and stops data transfer.
    </li>
    <li block-type="ListItem">
     11. I2Cmaster sends a RSTART and the third byte in TX RAM, which is ((0x78 | I2C_SLAVE_ADDR[9:8])«1) and a
     <i>
      R
     </i>
     /
     <i>
      W
     </i>
     bit that indicates READ.
    </li>
    <li block-type="ListItem">
     12. I2Cslave repeats step 10. If its address matches the address sent by I2Cmaster, I2C
     <a href="#page-714-1">
      slave
     </a>
     proceed on to the next steps.
    </li>
    <li block-type="ListItem">
     13. After I2C_SLAVE_STRETCH_INT (slave) is generated, the I2C_STRETCH_CAUSE bit is 0. The I2Cslave address matches the address sent over SDA, and I2Cslave needs to send data.
    </li>
    <li block-type="ListItem">
     14. Write data to be sent to TX RAM of I2Cslave in either FIFO mode or non-FIFO mode according to Section 28.4.
     <a href="#page-705-0">
      10.
     </a>
    </li>
    <li block-type="ListItem">
     15. Set I2C_SLAVE_SCL_STRETCH_CLR (slave) to 1 to release SCL.
    </li>
    <li block-type="ListItem">
     16. I2C
     <a href="#page-684-0">
      slave
     </a>
     sends data, and I2Cmaster checks ACK value or not according to ack_check_en (master) in the READ command.
    </li>
    <li block-type="ListItem">
     17. If d
     <a href="#page-717-0">
      ata to be read by I2C
     </a>
     master is larger than 32 bytes, an I2C_SLAVE_STRETCH_INT (slave) interrupt will be generated when TX RAM of I2Cslave becomes empty. In this way, I2Cslave can hold SCL low, so that software has more time to pad data in TX RAM of I2Cslave and read data in RX RAM of I2Cmaster. After software has finished reading, you can set I2C_SLAVE_
     <a href="#page-705-0">
      STRETCH_INT_CLR
     </a>
     (slave) to 1 to clear interrupt, and set I2C_SLAVE_SCL_STRETCH_CLR (slave) to release the SCL line.
    </li>
    <li block-type="ListItem">
     18. After I2Cmaster has received the last byte of data, set ack_value (master) to 1. I2Cslave will stop transfer once receiving the I2C_NACK_INT interrup
     <a href="#page-722-0">
      t.
     </a>
    </li>
    <li block-type="ListItem">
     19. After da
     <a href="#page-717-0">
      ta transfer completes, I2C
     </a>
     master executes the STOP command, and generates an I2C_TRANS_COMPLETE_INT (master) interrupt.
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-699-1">
   </span>
   <span id="page-699-0">
   </span>
   28.5.7 I2Cmaster Reads I2Cslave with Two 7-bit Addresses in One Command Sequence
  </h1>
  <h4>
   28.5.7.1 Introduction
  </h4>
  <p>
   <span id="page-700-1">
   </span>
   <img src="_page_700_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 28.5-7. I2Cmaster Reading N Bytes of Data from addrM of I2Cslave with a 7-bit Address
  </p>
  <p block-type="Text">
   Figure 28.5-7 shows how I2Cmaster reads data from specified addresses in an I2C slave. I2Cmaster sends two bytes of addresses: the first byte is a 7-bit I2Cslave address followed by a
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit, which is 0 and indicates a WRITE; the second byte is I2Cslave's memory address. After a RSTART condition, I2Cmaster sends the first byte of add
   <a href="#page-700-1">
    ress ag
   </a>
   ain, but the
   <i>
    R
   </i>
   /
   <i>
    W
   </i>
   bit is 1 which indicates a READ. Then, I2Cmaster reads data starting from addrM.
  </p>
  <h1>
   28.5.7.2 Configuration Example
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-700-0">
     </span>
     1. Set I2C_MS_MODE (master) to 1, and I2C_MS_MODE (slave) to 0.
    </li>
    <li block-type="ListItem">
     2. We recommend setting I2C_SLAVE_SCL_STRETCH_EN (slave) to 1, so that SCL can be held low for more processing time when I2Cslave needs to send data. If this bit is not set, software should write data to
     <a href="#page-713-0">
     </a>
     b
     <a href="#page-713-0">
      e sent to I2C
     </a>
     slave's TX RAM before I2Cmaster
     <a href="#page-713-0">
      initiates
     </a>
     transfer. Configuration below is applicable to scenario where I2C_SL
     <a href="#page-717-0">
      AVE_SCL_STRETCH_EN
     </a>
     (slave) is 1.
    </li>
    <li block-type="ListItem">
     3. Set I2C_FIFO_ADDR_CFG_EN (slave) to 1 to enable double addressing mode.
    </li>
    <li block-type="ListItem">
     4. Write 1 to I2C_C
     <a href="#page-717-0">
      ONF_UPGATE
     </a>
     (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     5. Co
     <a href="#page-715-1">
      nfigure command registers
     </a>
     of I2Cmaster.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Command registers
      <br/>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      op_code
      <br/>
      RSTART
     </td>
     <td>
      ack_value
      <br/>
      —
     </td>
     <td>
      ack_exp
      <br/>
      —
     </td>
     <td>
      —
     </td>
     <td>
      ack_check_en byte_num
      <br/>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND1 (master)
     </td>
     <td>
      WRITE
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      2
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 28
      <br/>
      I2C Controller (I2C)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND2
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND3
      <br/>
      (mas
     </td>
     <td>
      WRITE
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND4 (master)
     </td>
     <td>
      READ
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      N-1
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND5
      <br/>
      (mas
     </td>
     <td>
      READ
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     6.
     <a href="#page-727-2">
      Configure
     </a>
     I2C_SLAVE_ADDR (slave) in I2C_SLAVE_ADDR_REG (slave) register as I2Cslave's 7-bit address, and set I2C_ADDR_10BIT_EN (slave) to 0 to enable 7-bit addressing.
    </li>
    <li block-type="ListItem">
     7. Write I2Cslave address and data to be sent to TX RAM of I2Cmaster in either FIFO or non-FIFO mode according
     <a href="#page-714-1">
      to Section
     </a>
     28.4.10. The first
     <a href="#page-714-1">
      byte of address compris
     </a>
     es ( I2C_SLAVE_ADDR[6:0])«1) and a
     <i>
      R
     </i>
     /
     <i>
      W
     </i>
     bi
     <a href="#page-714-1">
      t, which is 0 and indic
     </a>
     ates a WRITE. The second byte of address is memory address M of I2Cslave. The third byte is ( I2C_SLAVE_ADDR[6:0])«1) and a
     <i>
      R
     </i>
     /
     <i>
      W
     </i>
     bit, which is 1 and indicates a READ.
    </li>
    <li block-type="ListItem">
     8. Write 1 to I2C_CONF_
     <a href="#page-684-0">
      UPGATE
     </a>
     (master) and I2C_CONF_UPGATE (sla
     <a href="#page-714-1">
      ve) to synchronize r
     </a>
     egisters.
    </li>
    <li block-type="ListItem">
     9. Write 1 to I2C_TRANS_START
     <a href="#page-714-1">
      (master) and
     </a>
     I2C_TRANS_START (slave) to start I2Cmaster's transfer.
    </li>
    <li block-type="ListItem">
     10. Start I2Cslave
     <a href="#page-713-0">
      's transfer accord
     </a>
     ing to Section
     <a href="#page-713-0">
      28.4.14.
     </a>
    </li>
    <li block-type="ListItem">
     11. I2Cslave c
     <a href="#page-713-0">
      ompares the slave a
     </a>
     ddress sent by I2Cmaster with its own address in I2C_SLAVE_ADDR (slave). When ack_check_en (master) in I2Cmaster'
     <a href="#page-713-0">
      s WRITE command i
     </a>
     s 1, I2Cmaster checks ACK value each time it sends a byte. When ack_check_en (master
     <a href="#page-686-0">
      ) is 0, I2
     </a>
     Cmaster does not check ACK value and take I2Cslave as matching slave by default.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Match: If the received ACK value matches ack_exp (master) (the expected ACK value), I2Cmaster continues data transfer.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Not match: If the received ACK value does not match ack_exp, I2Cmaster generates an I2C_NACK_INT (master) interrupt and stops data transfer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     12. I2Cslave receives memory address sent by I2Cmaster and adds the offset.
    </li>
    <li block-type="ListItem">
     13. I2Cmaster sends a RSTART and the third byte in TX RAM, which is ((0x78 | I2C_SLAVE_ADDR[9:8])«1) and a R bit.
    </li>
    <li block-type="ListItem">
     14. I2Cslave repeats step 11. If its address matches the address sent by I2Cmaster, I2C
     <a href="#page-714-1">
      slave
     </a>
     proceed on to the next steps.
    </li>
    <li block-type="ListItem">
     15. After I2C_SLAVE_STRETCH_INT (slave) is generated, the I2C_STRETCH_CAUSE bit is 0. The I2Cslave address matches the address sent over SDA, and I2Cslave needs to send data.
    </li>
    <li block-type="ListItem">
     16. Write data to be sent to TX RAM of I2Cslave in either FIFO mode or non-FIFO mode according to Section 28.4.
     <a href="#page-705-0">
      10.
     </a>
    </li>
    <li block-type="ListItem">
     17. Set I2C_SLAVE_SCL_STRETCH_CLR (slave) to 1 to release SCL.
    </li>
    <li block-type="ListItem">
     18. I2C
     <a href="#page-684-0">
      slave
     </a>
     sends data, and I2Cmaster checks ACK value or not according to ack_check_en (master) in the READ command.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     19. If data to be read by I2Cmaster is larger than 32 bytes, an I2C_SLAVE_STRETCH_INT (slave) interrupt will be generated when TX RAM of I2Cslave becomes empty. In this way, I2Cslave can hold SCL low, so that software has more time to pad data in TX RAM of I2Cslave and read data in RX RAM of I2Cmaster. After software has finished reading, you can set I2C_SLAVE_
     <a href="#page-705-0">
      STRETCH_INT_CLR
     </a>
     (slave) to 1 to clear interrupt, and set I2C_SLAVE_SCL_STRETCH_CLR (slave) to release the SCL line.
    </li>
    <li block-type="ListItem">
     20. After I2Cmaster has received the last byte of data, set ack_value (master) to 1. I2Cslave will stop transfer once receiving the I2C_NACK_INT interrup
     <a href="#page-722-0">
      t.
     </a>
    </li>
    <li block-type="ListItem">
     21. After da
     <a href="#page-717-0">
      ta transfer completes, I2C
     </a>
     master executes the STOP command, and generates an I2C_TRANS_COMPLETE_INT (master) interrupt.
    </li>
   </ul>
  </p>
  <h1>
   28.5.8 I2Cmaster Reads I2Cslave with a 7-bit Address in Multiple Command Sequences
  </h1>
  <h1>
   <span id="page-703-1">
   </span>
   <span id="page-703-0">
   </span>
   28.5.8.1 Introduction
  </h1>
  <p>
   <span id="page-703-2">
   </span>
   <img src="_page_703_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_703_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   Figure 28.5-8 shows how I2Cmaster reads (N+M) bytes of data from an I2C slave in two/three segments separated by END commands. Configuration procedures are described as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. The procedures for Segment0 is similar to Figure 28.5-5, except that the last command is an END.
    </li>
    <li block-type="ListItem">
     2.
     <a href="#page-703-2">
      Prepare
     </a>
     data in the TX RAM of I2Cslave, and set I2C_TRANS_START to start data transfer. After executing the END command, I2Cmaster refreshes command registers and the RAM as shown in Segment1, and clears the corresponding I2C_END_DETECT_INT
     <a href="#page-695-2">
     </a>
     i
     <a href="#page-695-2">
      nterrup
     </a>
     t. If cmd2 in Segment1 is a STOP, then data is
    </li>
   </ul>
  </p>
  <p block-type="Text">
   read from I2Cslave in two segments. I2Cmaster resumes data transfer by setting I2C_TRANS_START and terminates the transfer by sending a STOP bit.
  </p>
  <p block-type="Text">
   3. If cmd2 in Segment1 is an END, then data is read from I2Cslave in three segments. After the second data transfer finishes and an I2C_END_DETECT_INT interrupt is detected, the cmd
   <a href="#page-713-0">
    box is configured as
   </a>
   shown in Segment2. Once I2C_TRANS_START is set, I2Cmaster terminates the transfer by sending a STOP bit.
  </p>
  <h4>
   28.5.8.2 Configuration Example
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-704-0">
     </span>
     1. Set I2C_MS_MODE
     <a href="#page-713-0">
      (master) to 1, and
     </a>
     I2C_MS_MODE (slave) to 0.
    </li>
    <li block-type="ListItem">
     2. We recommend setting I2C_SLAVE_SCL_STRETCH_EN (slave) to 1, so that SCL can be held low for more processing time when I2Cslave needs to send data. If this bit is not set, software should write data to
     <a href="#page-713-0">
     </a>
     b
     <a href="#page-713-0">
      e sent to I2C
     </a>
     slave's TX RAM before I2Cmaster
     <a href="#page-713-0">
      initiates
     </a>
     transfer. Configuration below is applicable to scenario where I2C_SL
     <a href="#page-717-0">
      AVE_SCL_STRETCH_EN
     </a>
     (slave) is 1.
    </li>
    <li block-type="ListItem">
     3. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     4. Configure com
     <a href="#page-717-0">
      mand registers of I2C
     </a>
     master.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      4. Configure command registers of I2Cmaster.
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      RSTART
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
     <td>
      —
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND1 (master)
     </td>
     <td>
      WRITE
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND2
      <br/>
      (mas
     </td>
     <td>
      READ
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      N
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     5.
     <a href="#page-726-2">
      Write I2C
     </a>
     slave address to TX RAM of I2Cmaster in FIFO or non-FIFO mode.
    </li>
    <li block-type="ListItem">
     6. Write address of I2Cslave to I2C_SLAVE_ADDR (slave) in I2C_SLAVE_ADDR_REG (slave) register.
    </li>
    <li block-type="ListItem">
     7. Write 1 to I2C_CONF_UPGATE (master) and I2C_CONF_UPGATE (slave) to synchronize registers.
    </li>
    <li block-type="ListItem">
     8. Write 1 to I2C_TRANS_START
     <a href="#page-714-1">
      (master) to start
     </a>
     I2Cmaster's
     <a href="#page-714-1">
      transfer.
     </a>
    </li>
    <li block-type="ListItem">
     9. Start I2Cslave
     <a href="#page-713-0">
      's transfer accord
     </a>
     ing to Section
     <a href="#page-713-0">
      28.4.14.
     </a>
    </li>
    <li block-type="ListItem">
     10. I2Cslave c
     <a href="#page-713-0">
      ompares the slave a
     </a>
     ddress sent by I2Cmaster with its own address in I2C_SLAVE_ADDR (slave). When ack_check_en (master) in I2Cmaster's WRITE command is 1, I2Cmaster checks ACK value each time it sends a byte. When ack_check_en (master
     <a href="#page-686-0">
      ) is 0, I2
     </a>
     Cmaster does not check ACK value and take I2Cslave as matching slave by default.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Match: If the received ACK value matches ack_exp (master) (the expected ACK value), I2Cmaster continues data transfer.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       Not match: If the received ACK value does not match ack_exp, I2Cmaster generates an I2C_NACK_INT (master) interrupt and stops data transfer.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     11. After I2C_SLAVE_STRETCH_INT (slave) is generated, the I2C_STRETCH_CAUSE bit is 0. The I2Cslave address matches the address sent over SDA, and I2Cslave needs to send data.
    </li>
    <li block-type="ListItem">
     12. Write data to be sent to TX RAM of I2Cslave in either FIFO mode or non-FIFO mode according to Section 28.4.
     <a href="#page-705-0">
      10.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     13. Set I2C_SLAVE_SCL_STRETCH_CLR (slave) to 1 to release SCL.
    </li>
    <li block-type="ListItem">
     14. I2Cslave sends data, and I2Cmaster checks ACK value or not according to ack_check_en (master) in the READ command.
    </li>
    <li block-type="ListItem">
     15. If d
     <a href="#page-717-0">
      ata to be read by I2C
     </a>
     master in one READ command (N or M) is larger than 32 bytes, an I2C_SLAVE_STRETCH_INT (slave) interrupt will be generated when TX RAM of I2Cslave becomes empty. In this way, I2Cslave can hold SCL low, so that software has more time to pad data in TX RAM of I2Cslave and read data in RX RAM of I2Cmaster. After software has finished reading, you can set
     <a href="#page-705-0">
      I2C_SLAVE_STRETCH_INT_
     </a>
     CLR (slave) to 1 to clear interrupt, and set I2C_SLAVE_SCL_STRETCH_CLR (slave) to release the SCL line.
    </li>
    <li block-type="ListItem">
     16. Once finishing reading data in the first READ command, I2Cmaster executes the END command and
     <a href="#page-722-0">
      triggers an I2C_END_DETECT_IN
     </a>
     T (master) interrupt, which is cleared
     <a href="#page-717-0">
      by setting
     </a>
     I2C_END_DETECT_INT_CLR (master) to 1.
    </li>
    <li block-type="ListItem">
     17. Update I2Cmaster's command registers using one of the following two methods:
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      17. Update I2Cmaster's command registers using one of the following two methods:
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td colspan="6">
     </td>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      READ
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
      1
     </td>
     <td>
      M
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Or
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Or
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td colspan="3">
     </td>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      READ
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td colspan="2">
      M-1
     </td>
    </tr>
    <tr>
     <td>
      ter)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMMAND0
      <br/>
      (mas
     </td>
     <td>
      READ
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     18. Write M bytes of data to be sent to TX RAM of I2Cslave. If M is larger than 32, then repeat step 14 in FIFO
     <a href="#page-726-1">
      or non-FIFO m
     </a>
     ode.
    </li>
    <li block-type="ListItem">
     19. Write 1 to I2C_TRANS_START (master) bit to start transfer and repeat step 14.
    </li>
    <li block-type="ListItem">
     20. If the last command is a STOP, then set ack_value (master) to 1 after I2Cmaster has received the last byte of data. I2Cslave stops transfer upon the I2C_NACK_INT interrupt. I2Cmaster executes the STOP command to stop tr
     <a href="#page-713-0">
      ansfer and generate
     </a>
     s an I2C_TRANS_COMPLETE_INT (master) interrupt.
    </li>
    <li block-type="ListItem">
     21. If the last command is an END, then repeat step 16 and proceed on to the next steps.
    </li>
    <li block-type="ListItem">
     22. Update I2Cmaster's command registers.
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
      op_code
     </td>
     <td>
      ack_value
     </td>
     <td>
      ack_exp
     </td>
     <td>
      ack_check_en byte_num
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     23. Write 1 to I2C_TRANS_START (master) bit to start transfer.
    </li>
    <li block-type="ListItem">
     <span id="page-705-0">
     </span>
     24. I2Cmaster
     <a href="#page-726-1">
      exec
     </a>
     utes the STOP command to stop transfer, and generates an I2C_TRANS_COMPLETE_INT (master) interrupt.
    </li>
   </ul>
  </p>
  <h1>
   28.6 Interrupts
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_SLAVE_STRETCH_INT: Generated when one of the four stretching events occurs in slave mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_DET_START_INT: Triggered when the master or the slave detects a START bit.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_SCL_MAIN_ST_TO_INT: Triggered when the main state machine SCL_MAIN_FSM remains unchanged for over I2C_SCL_MAIN_ST_TO_I2C[23:0] clock cycles.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_SCL_ST_TO_INT: Triggered when the state machine SCL_FSM remains unchanged for over I2C_SCL_ST_TO_I2C[23:0] clock cycles.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_RXFIFO_UDF_I
     <a href="#page-712-0">
      NT: Triggered when the I2C c
     </a>
     ontroller reads RX FIFO via the APB bus, but RX FIFO is empty.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-711-2">
      I2C_TXFIFO_OVF_INT
     </a>
     : Triggered when the I2C controller writes TX FIFO via the APB bus, but TX FIFO is full.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_NACK_INT: Triggered when the ACK value received by the master is not as expected, or when the ACK value received by the slave is 1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_TRANS_START_INT: Triggered when the I2C controller sends a START bit.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_TIME_OUT_INT: Triggered when SCL stays high or low for more than 2
     <i>
      I
     </i>
     2
     <i>
      C
     </i>
     _
     <i>
      T IME
     </i>
     _
     <i>
      OUT
     </i>
     _
     <i>
      V ALUE
     </i>
     clock cycles during data transfer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_TRANS_COMPLETE_INT: Triggered when the I2C controller detects a STOP bit.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_MST_TXFIFO_UDF_INT: Triggered when TX FIFO of the master underflows.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_ARBITRATION_LOST_INT: Triggered when the SDA's output value does not match its input value while the master's SCL is high.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_BYTE_TRANS_DONE_INT: Triggered when the I2C controller sends or receives a byte.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_END_DETECT_INT: Triggered when op_code of the master indicates an END command and an END condition is detected.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_RXFIFO_OVF_INT: Triggered when RX FIFO of the I2C controller overflows.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_TXFIFO_WM_INT: I2C TX FIFO watermark interrupt. Triggered when I2C_FIFO_PRT_EN is 1 and the pointers of TX FIFO are less than I2C_TXFIFO_WM_THRHD[4:0].
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2C_RXFIFO_WM_INT: I2C RX FIFO watermark interrupt. Triggered when I2C_FIFO_PRT_EN is 1 and the pointers of RX FIFO are greater than I2C_RXFIFO_WM_THRHD[4:0].
    </li>
   </ul>
  </p>
  <h1>
   28.7 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-707-0">
   </span>
   The addresses in this section are relative to I2C Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
      <br/>
      Timing registers
      <br/>
      I2C_SCL_LOW_PERIOD_REG
     </td>
     <td>
      Description
      <br/>
      Configures the low level width of SCL
     </td>
     <td>
      Address
      <br/>
      0x0000
     </td>
     <td>
      Access
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_SDA_HOLD_REG
     </td>
     <td>
      Configures the hold time after a negative SCL
      <br/>
      edge
     </td>
     <td>
      0x0030
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Configures the sample time after a positive
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_SDA_SAMPLE_REG
      <br/>
      I2C_SCL_HIGH_PERIOD_REG
     </td>
     <td>
      SCL edge
      <br/>
      Configures the high level width of SCL
     </td>
     <td>
      0x0034
      <br/>
      0x0038
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_START_HOLD_REG
     </td>
     <td>
      Configures the delay between the SDA and
      <br/>
      SCL negative edge for a START condition
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_RSTART_SETUP_REG
     </td>
     <td>
      Configures the delay between the positive
      <br/>
      edge of SCL and the negative edge of SDA
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_STOP_HOLD_REG
     </td>
     <td>
      Configures the delay after the SCL clock edge
      <br/>
      for a STOP condition
     </td>
     <td>
      0x0048
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_STOP_SETUP_REG
     </td>
     <td>
      Configures the delay between the SDA and
     </td>
     <td>
      0x004C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      SCL positive edge for a STOP condition
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_ST_TIME_OUT_REG
     </td>
     <td>
      SCL status timeout register
     </td>
     <td>
      0x0078
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_MAIN_ST_TIME_OUT_REG
      <br/>
      Configuration registers
     </td>
     <td>
      SCL main status timeout register
     </td>
     <td>
      0x007C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_CTR_REG
     </td>
     <td>
      Transmission configuration register
     </td>
     <td>
      0x0004
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2C_TO_REG
     </td>
     <td>
      Timeout control register
     </td>
     <td>
      0x000C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_SLAVE_ADDR_REG
     </td>
     <td>
      Slave address configuration register
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_FIFO_CONF_REG
     </td>
     <td>
      FIFO configuration register
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_FILTER_CFG_REG
     </td>
     <td>
      SCL and SDA filter configuration register
     </td>
     <td>
      0x0050
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_CLK_CONF_REG
     </td>
     <td>
      I2C clock configuration register
     </td>
     <td>
      0x0054
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_SP_CONF_REG
     </td>
     <td>
      Power configuration register
     </td>
     <td>
      0x0080
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2C_SCL_STRETCH_CONF_REG
     </td>
     <td>
      Configures SCL clock stretching
     </td>
     <td>
      0x0084
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      Status registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_SR_REG
     </td>
     <td>
      Describes I2C work status
     </td>
     <td>
      0x0008
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      I2C_FIFO_ST_REG
     </td>
     <td>
      FIFO status register
     </td>
     <td>
      0x0014
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      I2C_DATA_REG
     </td>
     <td>
      Read/write FIFO register
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Interrupt registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2C_INT_RAW_REG
     </td>
     <td>
      Raw interrupt status
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/SS/WTC
     </td>
    </tr>
    <tr>
     <td>
      I2C_INT_CLR_REG
     </td>
     <td>
      Interrupt clear bits
     </td>
     <td>
      0x0024
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      I2C_INT_ENA_REG
      <br/>
      I2C_INT_STATUS_REG
     </td>
     <td>
      Interrupt enable bits
      <br/>
      Status of captured I2C communication events
     </td>
     <td>
      0x0028
      <br/>
      0x002C
     </td>
     <td>
      R/W
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Command registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 28
      <br/>
      I2C Controller (I2C)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMD1_REG
     </td>
     <td>
      I2C command register 1
     </td>
     <td>
      0x005C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMD2_REG
     </td>
     <td>
      I2C command register 2
     </td>
     <td>
      0x0060
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMD3_REG
     </td>
     <td>
      I2C command register 3
     </td>
     <td>
      0x0064
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMD4_REG
     </td>
     <td>
      I2C command register 4
     </td>
     <td>
      0x0068
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMD5_REG
     </td>
     <td>
      I2C command register 5
     </td>
     <td>
      0x006C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2C_COMD6_REG
      <br/>
      I2C_COMD7_REG
     </td>
     <td>
      I2C command register 6
      <br/>
      I2C command register 7
     </td>
     <td>
      0x0070
      <br/>
      0x0074
     </td>
     <td>
      varies
      <br/>
      varies
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   28.8 Registers
  </h1>
  <p block-type="Text">
   <span id="page-709-0">
   </span>
   The addresses in this section are relative to I2C Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-709-1">
   </span>
   <img src="_page_709_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_SCL_LOW_PERIOD This field is used to configure how long SCL remains low in master mode, in I2C module clock cycles. (R/W)
  </p>
  <p>
   <span id="page-709-2">
   </span>
   <img src="_page_709_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_SDA_HOLD_TIME This field is used to configure the time to hold the data after the falling edge of SCL, in I2C module clock cycles. (R/W)
  </p>
  <p>
   <span id="page-709-3">
   </span>
   <img src="_page_709_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_SDA_SAMPLE_TIME This field is used to configure how long SDA is sampled, in I2C module clock cycles. (R/W)
  </p>
  <p>
   <img src="_page_710_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-710-0">
   </span>
   <img src="_page_710_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SCL_HIGH_PERIOD This field is used to configure how long SCL remains high in master mode, in I2C module clock cycles. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SCL_WAIT_HIGH_PERIOD This field is used to configure the SCL_FSM's waiting period for SCL high level in master mode, in I2C module clock cycles. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-710-1">
   </span>
   <img src="_page_710_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_SCL_START_HOLD_TIME This field is used to configure the time between the falling edge of SDA and the falling edge of SCL for a START condition, in I2C module clock cycles. (R/W)
  </p>
  <p>
   <span id="page-710-2">
   </span>
   <img src="_page_710_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_SCL_RSTART_SETUP_TIME This field is used to configure the time between the rising edge of SCL and the falling edge of SDA for a RSTART condition, in I2C module clock cycles. (R/W)
  </p>
  <p>
   <span id="page-711-0">
   </span>
   <img src="_page_711_Figure_0.jpeg"/>
  </p>
  <p>
   I2C_SCL_STOP_HOLD_TIME This field is used to configure the delay after the STOP condition, in I2C module clock cycles. (R/W)
  </p>
  <h4>
   Register 28.8. I2C_SCL_STOP_SETUP_REG (0x004C)
  </h4>
  <p>
   <span id="page-711-1">
   </span>
   <img src="_page_711_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_SCL_STOP_SETUP_TIME This field is used to configure the time between the rising edge of SCL and the rising edge of SDA, in I2C module clock cycles. (R/W)
  </p>
  <h4>
   Register 28.9. I2C_SCL_ST_TIME_OUT_REG (0x0078)
  </h4>
  <p>
   <span id="page-711-2">
   </span>
   <img src="_page_711_Figure_6.jpeg"/>
  </p>
  <h2>
   I2C_SCL_ST_TO_I2C The maximum time that SCL_FSM remains unchanged. It should be no more than 23. (R/W)
  </h2>
  <h4>
   Register 28.10. I2C_SCL_MAIN_ST_TIME_OUT_REG (0x007C)
  </h4>
  <p>
   <span id="page-712-0">
   </span>
   <img src="_page_712_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_SCL_MAIN_ST_TO_I2C The maximum time that SCL_MAIN_FSM remains unchanged. It should be no more than 23. (R/W)
  </p>
  <h4>
   Register 28.11. I2C_CTR_REG (0x0004)
  </h4>
  <p>
   <span id="page-713-0">
   </span>
   <img src="_page_713_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SDA_FORCE_OUT Configures the SDA output mode.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: Open drain output
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1: Direct output
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (R/W)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     I2C_SCL_FORCE_OUT Configures the SCL output mode.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: Open drain output 1: Direct output
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       (R/W)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     I2C_SAMPLE_SCL_LEVEL This bit is used to select the sampling mode. 0: samples SDA data on the SCL high level; 1: samples SDA data on the SCL low level. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_RX_FULL_ACK_LEVEL This bit is used to configure the ACK value that need to be sent by master when I2C_RXFIFO_CNT has reached the threshold. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_MS_MODE Set this bit to configure the I2C controller as an I2C Master. Clear this bit to configure the I2C controller as a slave. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_TRANS_START Set this bit to start sending the data in TX FIFO. (WT)
    </li>
    <li block-type="ListItem">
     I2C_TX_LSB_FIRST This bit is used to control the order to send data. 0: sends data from the most significant bit; 1: sends data from the least significant bit. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_RX_LSB_FIRST This bit is used to control the order to receive data. 0: receives data from the most significant bit; 1: receives data from the least significant bit. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_CLK_EN This field controls APB_CLK clock gating. 0: APB_CLK is gated to save power; 1: APB_CLK is always on. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_ARBITRATION_EN This is the enable bit for I2C bus arbitration function. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_FSM_RST This bit is used to reset the SCL_FSM. (WT)
    </li>
    <li block-type="ListItem">
     I2C_CONF_UPGATE Synchronization bit. (WT)
    </li>
    <li block-type="ListItem">
     I2C_SLV_TX_AUTO_START_EN This is the enable bit for slave to send data automatically. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_ADDR_10BIT_RW_CHECK_EN This is the enable bit to check if the R/W bit of 10-bit addressing is consistent with the I2C protocol. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_ADDR_BROADCASTING_EN This is the enable bit for 7-bit general call addressing. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 28.12. I2C_TO_REG (0x000C)
  </h4>
  <p>
   <span id="page-714-0">
   </span>
   <img src="_page_714_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_TIME_OUT_VALUE This field is used to configure the timeout value for receiving a data bit in I2C_SCLK clock cycles. The configured timeout value equals 2
   <i>
    <sup>
     I
    </sup>
   </i>
   2
   <i>
    C
   </i>
   _
   <i>
    T IME
   </i>
   _
   <i>
    OUT
   </i>
   _
   <i>
    V ALUE
   </i>
   clock cycles. (R/W)
  </p>
  <p block-type="Text">
   I2C_TIME_OUT_EN This is the enable bit for timeout control. (R/W)
  </p>
  <p>
   <span id="page-714-1">
   </span>
   <img src="_page_714_Figure_4.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SLAVE_ADDR When the I2C controller is in slave mode, this field is used to configure the slave address. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_ADDR_10BIT_EN This field is used to enable the 10-bit addressing mode in master mode. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 28.14. I2C_FIFO_CONF_REG (0x0018)
  </h4>
  <p>
   <span id="page-715-1">
   </span>
   <img src="_page_715_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_RXFIFO_WM_THRHD The watermark threshold of RX FIFO in non-FIFO mode. When I2C_FIFO_PRT_EN is 1 and RX FIFO counter is bigger than I2C_RXFIFO_WM_THRHD[4:0], I2C_RXFIFO_WM_INT_RAW bit is valid. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_TXFIFO_WM_THRHD The watermark threshold of TX FIFO in non-FIFO mode. When I2C_FIFO_PRT_EN is 1 and TX FIFO counter is smaller than I2C_TXFIFO_WM_THRHD[4:0], I2C_TXFIFO_WM_INT_RAW bit is valid. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_NONFIFO_EN Set this bit to enable APB non-FIFO mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_FIFO_ADDR_CFG_EN When this bit is set to 1, the byte received after the I2C address byte represents the offset address in the I2C Slave RAM. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_RX_FIFO_RST Set this bit to reset RX FIFO. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_TX_FIFO_RST Set this bit to reset TX FIFO. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_FIFO_PRT_EN The control enable bit of FIFO pointer in non-FIFO mode. This bit controls the valid bits and TX/RX FIFO overflow, underflow, full and empty interrupts. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-715-0">
   </span>
   <img src="_page_715_Figure_9.jpeg"/>
  </p>
  <h4>
   Register 28.15. I2C_FILTER_CFG_REG (0x0050)
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SCL_FILTER_THRES When a pulse on the SCL input has smaller width than the value of this field in I2C module clock cycles, the I2C controller ignores that pulse. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SDA_FILTER_THRES When a pulse on the SDA input has smaller width than the value of this field in I2C module clock cycles, the I2C controller ignores that pulse. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2C_SCL_FILTER_EN This is the filter enable bit for SCL. (R/W)
  </p>
  <p block-type="Text">
   I2C_SDA_FILTER_EN This is the filter enable bit for SDA. (R/W)
  </p>
  <h4>
   Register 28.16. I2C_CLK_CONF_REG (0x0054)
  </h4>
  <p>
   <span id="page-716-0">
   </span>
   <img src="_page_716_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_SCLK_DIV_NUM The integral part of the divisor. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SCLK_DIV_A The numerator of the divisor's fractional part. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SCLK_DIV_B The denominator of the divisor's fractional part. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SCLK_SEL The clock selection bit for the I2C controller. 0: XTAL_CLK; 1: RC_FAST_CLK. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2C_SCLK_ACTIVE The clock switch bit for the I2C controller. (R/W)
  </p>
  <p>
   <img src="_page_716_Figure_7.jpeg"/>
  </p>
  <p>
   <span id="page-716-1">
   </span>
   <img src="_page_716_Figure_8.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SCL_RST_SLV_EN When the master is idle, set this bit to send out SCL pulses. The number of pulses equals to I2C_SCL_RST_SLV_NUM[4:0]. (R/W/SC)
    </li>
    <li block-type="ListItem">
     I2C_SCL_RST_SLV_NUM Configures the pulses of SCL generated in master mode. Valid when I2C_SCL_RST_SLV_EN is 1. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SCL_PD_EN The power down enable bit for the I2C output SCL line. 0: Not power down; 1: Power down. Set I2C_SCL_FORCE_OUT and I2C_SCL_PD_EN to 1 to stretch SCL low. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SDA_PD_EN The power down enable bit for the I2C output SDA line. 0: Not power down; 1: Power down. Set I2C_SDA_FORCE_OUT and I2C_SDA_PD_EN to 1 to stretch SDA low. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-717-0">
   </span>
   <img src="_page_717_Figure_0.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_STRETCH_PROTECT_NUM Configures the time period to release the SCL line from stretching to avoid timing violation. Usually it should be larger than the SDA steup time. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SLAVE_SCL_STRETCH_EN The enable bit for SCL clock stretching. 0: Disable; 1: Enable. The SCL output line will be stretched low when I2C_SLAVE_SCL_STRETCH_EN is 1 and one of the four stretching events occurs. The cause of stretching can be seen in I2C_STRETCH_CAUSE. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SLAVE_SCL_STRETCH_CLR Set this bit to clear SCL clock stretching. (WT)
    </li>
    <li block-type="ListItem">
     I2C_SLAVE_BYTE_ACK_CTL_EN The enable bit for slave to control the level of the ACK bit. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SLAVE_BYTE_ACK_LVL Set the level of the ACK bit when I2C_SLAVE_BYTE_ACK_CTL_EN is set. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 28.19. I2C_SR_REG (0x0008)
  </h4>
  <p>
   <span id="page-718-0">
   </span>
   <img src="_page_718_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_RESP_REC The received ACK value in master mode or slave mode. 0: ACK; 1: NACK. (RO)
  </p>
  <p block-type="Text">
   I2C_SLAVE_RW When in slave mode, 0: master writes to slave; 1: master reads from slave. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_ARB_LOST When the I2C controller loses control of the SCL line, this bit changes to 1. (RO)
    </li>
    <li block-type="ListItem">
     I2C_BUS_BUSY 0: The I2C bus is in idle state; 1: The I2C bus is busy transferring data. (RO)
    </li>
    <li block-type="ListItem">
     I2C_SLAVE_ADDRESSED When the I2C controller is in slave mode, and the address sent by the master matches the address of the slave, this bit is at high level. (RO)
    </li>
    <li block-type="ListItem">
     I2C_RXFIFO_CNT This field represents the number of data bytes to be sent. (RO)
    </li>
    <li block-type="ListItem">
     I2C_STRETCH_CAUSE The cause of SCL clock stretching in slave mode. 0: stretching SCL low when the master starts to read data; 1: stretching SCL low when TX FIFO is empty in slave mode; 2: stretching SCL low when RX FIFO is full in slave mode. (RO)
    </li>
    <li block-type="ListItem">
     I2C_TXFIFO_CNT This field stores the number of data bytes received in RAM. (RO)
    </li>
    <li block-type="ListItem">
     I2C_SCL_MAIN_STATE_LAST This field indicates the status of the state machine. 0: idle; 1: address shift; 2: ACK address; 3: receive data; 4: transmit data; 5: send ACK; 6: wait for ACK. (RO)
    </li>
    <li block-type="ListItem">
     I2C_SCL_STATE_LAST This field indicates the status of the state machine used to produce SCL. 0: idle; 1: start; 2: falling edge; 3: low; 4: rising edge; 5: high; 6: stop. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 28.20. I2C_FIFO_ST_REG (0x0014)
  </h4>
  <p>
   <span id="page-719-1">
   </span>
   <img src="_page_719_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_RXFIFO_RADDR This is the offset address of the APB reading from RX FIFO. (RO)
  </p>
  <p block-type="Text">
   I2C_RXFIFO_WADDR This is the offset address of the I2C controller receiving data and writing to RX FIFO. (RO)
  </p>
  <p block-type="Text">
   I2C_TXFIFO_RADDR This is the offset address of the I2C controller reading from TX FIFO. (RO)
  </p>
  <p block-type="Text">
   I2C_TXFIFO_WADDR This is the offset address of APB bus writing to TX FIFO. (RO)
  </p>
  <p block-type="Text">
   I2C_SLAVE_RW_POINT The received data in I2C slave mode. (RO)
  </p>
  <p>
   <img src="_page_719_Figure_7.jpeg"/>
  </p>
  <p>
   <span id="page-719-0">
   </span>
   <img src="_page_719_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_FIFO_RDATA This field is used to read data from RX FIFO, or write data to TX FIFO. (R/W)
  </p>
  <p>
   <span id="page-720-0">
   </span>
   <img src="_page_720_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_RXFIFO_WM_INT_RAW The raw interrupt bit for the I2C_RXFIFO_WM_INT interrupt. (R/SS/WTC)
  </p>
  <p block-type="Text">
   I2C_TXFIFO_WM_INT_RAW The raw interrupt bit for the I2C_TXFIFO_WM_INT interrupt. (R/SS/WTC)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_RXFIFO_OVF_INT_RAW The raw interrupt bit for the I2C_RXFIFO_OVF_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_END_DETECT_INT_RAW The raw interrupt bit for the I2C_END_DETECT_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_BYTE_TRANS_DONE_INT_RAW The raw interrupt bit for the I2C_BYTE_TRANS_DONE_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_ARBITRATION_LOST_INT_RAW The raw interrupt bit for the I2C_ARBITRATION_LOST_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_MST_TXFIFO_UDF_INT_RAW The raw interrupt bit for the I2C_MST_TXFIFO_UDF_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_TRANS_COMPLETE_INT_RAW The raw interrupt bit for the I2C_TRANS_COMPLETE_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_TIME_OUT_INT_RAW The raw interrupt bit for the I2C_TIME_OUT_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_TRANS_START_INT_RAW The raw interrupt bit for the I2C_TRANS_START_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_NACK_INT_RAW The raw interrupt bit for the I2C_NACK_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_TXFIFO_OVF_INT_RAW The raw interrupt bit for the I2C_TXFIFO_OVF_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_RXFIFO_UDF_INT_RAW The raw interrupt bit for the I2C_RXFIFO_UDF_INT interrupt. (R/SS/WTC)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <p block-type="Text">
   Continued from the previous page...
  </p>
  <p block-type="Text">
   I2C_SCL_ST_TO_INT_RAW The raw interrupt bit for the I2C_SCL_ST_TO_INT interrupt. (R/SS/WTC)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SCL_MAIN_ST_TO_INT_RAW The raw interrupt bit for the I2C_SCL_MAIN_ST_TO_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_DET_START_INT_RAW The raw interrupt bit for the I2C_DET_START_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_SLAVE_STRETCH_INT_RAW The raw interrupt bit for the I2C_SLAVE_STRETCH_INT interrupt. (R/SS/WTC)
    </li>
    <li block-type="ListItem">
     I2C_GENERAL_CALL_INT_RAW The raw interrupt bit for the I2C_GENARAL_CALL_INT interrupt. (R/SS/WTC)
    </li>
   </ul>
  </p>
  <h4>
   Register 28.23. I2C_INT_CLR_REG (0x0024)
  </h4>
  <p>
   <span id="page-722-0">
   </span>
   <img src="_page_722_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_RXFIFO_WM_INT_CLR Set this bit to clear the I2C_RXFIFO_WM_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   I2C_TXFIFO_WM_INT_CLR Set this bit to clear the I2C_TXFIFO_WM_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   I2C_RXFIFO_OVF_INT_CLR Set this bit to clear the I2C_RXFIFO_OVF_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   I2C_END_DETECT_INT_CLR Set this bit to clear the I2C_END_DETECT_INT interrupt. (WT)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_BYTE_TRANS_DONE_INT_CLR Set this bit to clear the I2C_BYTE_TRANS_DONE_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     I2C_ARBITRATION_LOST_INT_CLR Set this bit to clear the I2C_ARBITRATION_LOST_INT interrupt. (WT)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2C_MST_TXFIFO_UDF_INT_CLR Set this bit to clear the I2C_MST_TXFIFO_UDF_INT interrupt. (WT)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_TRANS_COMPLETE_INT_CLR Set this bit to clear the I2C_TRANS_COMPLETE_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     I2C_TIME_OUT_INT_CLR Set this bit to clear the I2C_TIME_OUT_INT interrupt. (WT)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2C_TRANS_START_INT_CLR Set this bit to clear the I2C_TRANS_START_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   I2C_NACK_INT_CLR Set this bit to clear the I2C_NACK_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   I2C_TXFIFO_OVF_INT_CLR Set this bit to clear the I2C_TXFIFO_OVF_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   I2C_RXFIFO_UDF_INT_CLR Set this bit to clear the I2C_RXFIFO_UDF_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   I2C_SCL_ST_TO_INT_CLR Set this bit to clear the I2C_SCL_ST_TO_INT interrupt. (WT)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SCL_MAIN_ST_TO_INT_CLR Set this bit to clear the I2C_SCL_MAIN_ST_TO_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     I2C_DET_START_INT_CLR Set this bit to clear the I2C_DET_START_INT interrupt. (WT)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2C_SLAVE_STRETCH_INT_CLR Set this bit to clear the I2C_SLAVE_STRETCH_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   I2C_GENERAL_CALL_INT_CLR Set this bit for the I2C_GENARAL_CALL_INT interrupt. (WT)
  </p>
  <p>
   <span id="page-723-0">
   </span>
   <img src="_page_723_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_RXFIFO_WM_INT_ENA The interrupt enable bit for the I2C_RXFIFO_WM_INT interrupt. (R/W) I2C_TXFIFO_WM_INT_ENA The interrupt enable bit for the I2C_TXFIFO_WM_INT interrupt. (R/W)
  </p>
  <p block-type="Text">
   I2C_RXFIFO_OVF_INT_ENA The interrupt enable bit for the I2C_RXFIFO_OVF_INT interrupt. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_END_DETECT_INT_ENA The interrupt enable bit for the I2C_END_DETECT_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_BYTE_TRANS_DONE_INT_ENA The interrupt enable bit for the I2C_BYTE_TRANS_DONE_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_ARBITRATION_LOST_INT_ENA The interrupt enable bit for the I2C_ARBITRATION_LOST_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_MST_TXFIFO_UDF_INT_ENA The interrupt enable bit for the I2C_MST_TXFIFO_UDF_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_TRANS_COMPLETE_INT_ENA The interrupt enable bit for the I2C_TRANS_COMPLETE_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_TIME_OUT_INT_ENA The interrupt enable bit for the I2C_TIME_OUT_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_TRANS_START_INT_ENA The interrupt enable bit for the I2C_TRANS_START_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_NACK_INT_ENA The interrupt enable bit for the I2C_NACK_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_TXFIFO_OVF_INT_ENA The interrupt enable bit for the I2C_TXFIFO_OVF_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_RXFIFO_UDF_INT_ENA The interrupt enable bit for the I2C_RXFIFO_UDF_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SCL_ST_TO_INT_ENA The interrupt enable bit for the I2C_SCL_ST_TO_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SCL_MAIN_ST_TO_INT_ENA The interrupt enable bit for the I2C_SCL_MAIN_ST_TO_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_DET_START_INT_ENA The interrupt enable bit for the I2C_DET_START_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_SLAVE_STRETCH_INT_ENA The interrupt enable bit for the I2C_SLAVE_STRETCH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_GENERAL_CALL_INT_ENA The interrupt enable bit for the I2C_GENARAL_CALL_INT interrupt. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 28.25. I2C_INT_STATUS_REG (0x002C)
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Register 28.25. I2C_INT_STATUS_REG (0x002C)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      I2C_SLAVE_STRETCH_INT_ST
      <br/>
      I2C_GENERAL_CALL_INT_ST
     </th>
     <th>
     </th>
     <th>
      I2C_DET_START_INT_ST
     </th>
     <th>
     </th>
     <th>
      I2C_SCL_MAIN_ST_TO_INT_ST
      <br/>
      I2C_RXFIFO_UDF_INT_ST
      <br/>
      I2C_TXFIFO_OVF_INT_ST
      <br/>
      I2C_SCL_ST_TO_INT_ST
     </th>
     <th>
     </th>
     <th>
      I2C_TRANS_START_INT_ST
     </th>
     <th>
     </th>
     <th>
      I2C_TRANS_COMPLETE_INT_ST
      <br/>
      I2C_MST_TXFIFO_UDF_INT_ST
     </th>
     <th>
     </th>
     <th>
      I2C_BYTE_TRANS_DONE_INT_ST
      <br/>
      I2C_ARBITRATION_LOST_INT_ST
      <br/>
      I2C_END_DETECT_INT_ST
      <br/>
      I2C_RXFIFO_OVF_INT_ST
      <br/>
      I2C_TXFIFO_WM_INT_ST
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      I2C_NACK_INT_ST
     </td>
     <td>
     </td>
     <td>
      I2C_TIME_OUT_INT_ST
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_RXFIFO_WM_INT_ST The masked interrupt status bit for the I2C_RXFIFO_WM_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_TXFIFO_WM_INT_ST The masked interrupt status bit for the I2C_TXFIFO_WM_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_RXFIFO_OVF_INT_ST The masked interrupt status bit for the I2C_RXFIFO_OVF_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_END_DETECT_INT_ST The masked interrupt status bit for the I2C_END_DETECT_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_BYTE_TRANS_DONE_INT_ST The masked interrupt status bit for the I2C_BYTE_TRANS_DONE_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_ARBITRATION_LOST_INT_ST The masked interrupt status bit for the I2C_ARBITRATION_LOST_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_MST_TXFIFO_UDF_INT_ST The masked interrupt status bit for the I2C_MST_TXFIFO_UDF_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_TRANS_COMPLETE_INT_ST The masked interrupt status bit for the I2C_TRANS_COMPLETE_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_TIME_OUT_INT_ST The masked interrupt status bit for the I2C_TIME_OUT_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_TRANS_START_INT_ST The masked interrupt status bit for the I2C_TRANS_START_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_NACK_INT_ST The masked interrupt status bit for the I2C_NACK_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_TXFIFO_OVF_INT_ST The masked interrupt status bit for the I2C_TXFIFO_OVF_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_RXFIFO_UDF_INT_ST The masked interrupt status bit for the I2C_RXFIFO_UDF_INT interrupt. (RO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <p block-type="Text">
   Continued from the previous page...
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_SCL_ST_TO_INT_ST The masked interrupt status bit for the I2C_SCL_ST_TO_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_SCL_MAIN_ST_TO_INT_ST The masked interrupt status bit for the I2C_SCL_MAIN_ST_TO_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_DET_START_INT_ST The masked interrupt status bit for the I2C_DET_START_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_SLAVE_STRETCH_INT_ST The masked interrupt status bit for the I2C_SLAVE_STRETCH_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     I2C_GENERAL_CALL_INT_ST The masked interrupt status bit for the I2C_GENARAL_CALL_INT interrupt. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-725-0">
   </span>
   <img src="_page_725_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_COMMAND0 This is the content of command register 0. It consists of three parts:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     op_code is the command. 1: WRITE; 2: STOP; 3: READ; 4: END; 6: RSTART.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Byte_num represents the number of bytes that need to be sent or received.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ack_check_en, ack_exp and ack are used to control the ACK bit. For more information, see Section 28.4.9.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   (R/W)
  </p>
  <p block-type="Text">
   I2C_COMMAND0_DO
   <a href="#page-683-0">
    NE
   </a>
   When command 0 has been executed in master mode, this bit changes to high level. (R/W/SS)
  </p>
  <p>
   <span id="page-726-1">
   </span>
   <img src="_page_726_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_COMMAND1 This is the content of command register 1. It is the same as that of I2C_COMMAND0. (R/W)
  </p>
  <p block-type="Text">
   I2C_COMMAND1_DONE When command 1 has been executed in master mode, this bit changes to
   <a href="#page-725-0">
    high level. (R/W/S
   </a>
   S)
  </p>
  <p>
   <span id="page-726-0">
   </span>
   <img src="_page_726_Figure_4.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_COMMAND2 This is the content of command register 2. It is the same as that of I2C_COMMAND0. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_COMMAND2_DONE When command 2 has been executed in master mode, this bit changes
     <a href="#page-725-0">
      to high Level. (R/
     </a>
     W/SS)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-726-2">
   </span>
   <img src="_page_726_Figure_7.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_COMMAND3 This is the content of command register 3. It is the same as that of I2C_COMMAND0. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_COMMAND3_DONE When command 3 has been executed in master mode, this bit changes
     <a href="#page-725-0">
      to high level. (R/W
     </a>
     /SS)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-727-0">
   </span>
   <img src="_page_727_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_COMMAND4 This is the content of command register 4. It is the same as that of I2C_COMMAND0. (R/W)
  </p>
  <p block-type="Text">
   I2C_COMMAND4_DONE When command 4 has been executed in master mode, this bit changes
   <a href="#page-725-0">
    to high level. (R/W
   </a>
   /SS)
  </p>
  <p>
   <span id="page-727-1">
   </span>
   <img src="_page_727_Figure_4.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_COMMAND5 This is the content of command register 5. It is the same as that of I2C_COMMAND0. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_COMMAND5_DONE When command 5 has been executed in master mode, this bit changes
     <a href="#page-725-0">
      to high level. (R/W
     </a>
     /SS)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-727-2">
   </span>
   <img src="_page_727_Figure_7.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2C_COMMAND6 This is the content of command register 6. It is the same as that of I2C_COMMAND0. (R/W)
    </li>
    <li block-type="ListItem">
     I2C_COMMAND6_DONE When command 6 has been executed in master mode, this bit changes
     <a href="#page-725-0">
      to high level. (R/W
     </a>
     /SS)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_728_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_COMMAND7 This is the content of command register 7. It is the same as that of I2C_COMMAND0. (R/W)
  </p>
  <p block-type="Text">
   I2C_COMMAND7_DONE When command 7 has been executed in master mode, this bit changes to
   <a href="#page-725-0">
    high level. (R/W/S
   </a>
   S)
  </p>
  <p>
   <img src="_page_728_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   I2C_DATE This is the version control register. (R/W)
  </p>
  <h1>
   <span id="page-729-3">
   </span>
   <span id="page-729-0">
   </span>
   Chapter 29
  </h1>
  <h1>
   I2S Controller (I2S)
  </h1>
  <h1>
   29.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-729-1">
   </span>
   ESP32-C3 has a built-in I2S interface, which provides a flexible communication interface for streaming digital data in multimedia applications, especially digital audio applications.
  </p>
  <p block-type="Text">
   The I2S standard bus defines three signals: a bit clock signal (BCK), a channel/word select signal (WS), and a serial data signal (SD). A basic I2S data bus has one master and one slave. The roles remain unchanged throughout the communication. The I2S module on ESP32-C3 provides separate transmit (TX) and receive (RX) units for high performance.
  </p>
  <h1>
   29.2 Terminology
  </h1>
  <p block-type="Text">
   <span id="page-729-2">
   </span>
   To better illustrate the functionality of I2S, the following terms are used in this chapter.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      To better illustrate the functionality of I2S, the following terms are used in this chapter.
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Master mode
     </th>
     <th>
      As a master, I2S drives BCK/WS signals, and sends data to or
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      receives data from a slave.
     </th>
    </tr>
    <tr>
     <th>
      Slave mode
     </th>
     <th>
      As a slave, I2S is driven by BCK/WS signals, and receives data
      <br/>
      from or sends data to a master.
     </th>
    </tr>
    <tr>
     <th>
      Full-duplex
     </th>
     <th>
      There are two separate data lines. Transmitted and received data
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      are carried simultaneously.
     </th>
    </tr>
    <tr>
     <th>
      Half-duplex
     </th>
     <th>
      Only one side, the master or the slave, sends data first, and the
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      other side receives data. Sending data and receiving data can not
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      happen at the same time.
     </th>
    </tr>
    <tr>
     <th>
      A-law and µ-law
     </th>
     <th>
      A-law and µ-law are compression/decompression algorithms in
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      digital pulse code modulated (PCM) non-uniform quantization,
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      which can effectively improve the signal-to-quantization noise ra
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      tio.
     </th>
    </tr>
    <tr>
     <th>
      TDM RX mode
     </th>
     <th>
      In this mode, pulse code modulated (PCM) data is received and
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      stored into memory via direct memory access (DMA), utilizing time
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      division multiplexing (TDM). The signal lines include: BCK, WS,
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      and SD. Data from 16 channels at most can be received.
      <br/>
      TDM
      <br/>
      Philips standard, TDM MSB alignment standard, and TDM PCM
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      standard are supported in this mode, depending on user config
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      uration.
     </th>
    </tr>
    <tr>
     <th>
      Normal PDM RX mode
     </th>
     <th>
      In this mode, pulse density modulation (PDM) data is received
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      and stored into memory via DMA. Used signals: WS and DATA.
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Chapter 29
      <br/>
      I2S Controller (I2S)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      TDM TX mode
     </th>
     <th>
      In this mode, pulse code modulated (PCM) data is sent from
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      memory via DMA, in a way of time division multiplexing (TDM). The
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      signal lines include: BCK, WS, and DATA. Data up to 16 channels
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      can be sent. TDM Philips standard, TDM MSB alignment standard,
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      and TDM PCM standard are supported in this mode, depending
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      on user configuration.
     </th>
    </tr>
    <tr>
     <th>
      Normal PDM TX mode
     </th>
     <th>
      In this mode, pulse density modulation (PDM) data is sent from
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      memory via DMA. The signal lines include: WS and DATA. PDM
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      standard is supported in this mode by user configuration.
     </th>
    </tr>
    <tr>
     <th>
      PCM-to-PDM TX mode
     </th>
     <th>
      In this mode, I2S as a master, converts the pulse code modulated
      <br/>
      (PCM) data from memory via DMA into pulse density modulation
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <h1>
   29.3 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-730-0">
     </span>
     <i>
      •
     </i>
     Supports master mode and slave mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports full-duplex and half-duplex communications
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Provides separate TX unit and RX unit, independent of each other
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports TX unit and RX unit to work independently and simultaneously
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports a variety of audio standards:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       TDM Philips standard
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       TDM MSB alignment standard
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       TDM PCM standard
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       PDM standard
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable high-precision sample clock
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports the following frequencies: 8 kHz, 16 kHz, 32 kHz, 44.1 kHz, 48 kHz, 88.2 kHz, 96 kHz, 128 kHz, and 192 kHz (192 kHz is not supported in 32-bit slave mode).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports 8-/16-/24-/32-bit data communication
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports DMA access
    </li>
    <li block-type="ListItem">
     <span id="page-730-1">
     </span>
     <i>
      •
     </i>
     Supports standard I2S interface interrupts
    </li>
   </ul>
  </p>
  <h1>
   29.4 System Architecture
  </h1>
  <p>
   <span id="page-731-0">
   </span>
   <img src="_page_731_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 29.4-1. ESP32-C3 I2S System Diagram
  </p>
  <p block-type="Text">
   Figure 29.4-1 shows the structure of ESP32-C3 I2S module, consisting of:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     TX unit (TX control)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-731-0">
      RX unit
     </a>
     (RX control)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     input and output timing unit (I/O sync)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     clock divider (Clock Generator)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     64 x 32-bit TX FIFO
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     64 x 32-bit RX FIFO
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Compress/Decompress units
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2S module supports direct access (DMA) to internal memory, see Chapter 2
   <i>
    GDMA Controller (GDMA)
   </i>
   .
  </p>
  <p block-type="Text">
   Both the TX unit and the RX unit have a three-line interface that includes a bit clock line (BCK), a word select line (WS), and a serial data line (SD). The SD line of the TX unit is fixed as output, and the SD line of the RX unit as input. BCK and WS signal lines for TX unit and RX unit can be configured
   <a href="#page-59-0">
    as master output mode or
   </a>
   slave input mode.
  </p>
  <p block-type="Text">
   The signal bus of I2S module is shown at the right part of Figure 29.4-1. The naming of these signals in RX and TX units follows the pattern: I2SA_B_C, such as I2SI_BCK_in.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     "A": direction of data bus
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       "I": input, receiving
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       "O": output, transmitting
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 732
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     "B": signal function
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       BCK
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       WS
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       SD
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     "C": signal direction
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       "in": input signal into I2S module
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       "out": output signal from I2S module
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Table 29.4-1 provides a detailed description of I2S signals.
  </p>
  <span id="page-732-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      Table 29.4-1. I2S Signal Description
     </td>
    </tr>
    <tr>
     <td>
      Signal
     </td>
     <td>
      Direction
     </td>
     <td>
      Function
     </td>
    </tr>
    <tr>
     <td>
      I2SI_BCK_in
     </td>
     <td>
      Input
     </td>
     <td>
      In I2S slave mode, inputs BCK signal for RX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SI_BCK_out
     </td>
     <td>
      Output
     </td>
     <td>
      In I2S master mode, outputs BCK signal for RX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SI_WS_in
     </td>
     <td>
      Input
     </td>
     <td>
      In I2S slave mode, inputs WS signal for RX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SI_WS_out
     </td>
     <td>
      Output
     </td>
     <td>
      In I2S master mode, outputs WS signal for RX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SI_Data_in
     </td>
     <td>
      Input
     </td>
     <td>
      Works as the serial input data bus for I2S RX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SO_Data_out
     </td>
     <td>
      Output
     </td>
     <td>
      Works as the serial output data bus for I2S TX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SO_BCK_in
     </td>
     <td>
      Input
     </td>
     <td>
      In I2S slave mode, inputs BCK signal for TX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SO_BCK_out
     </td>
     <td>
      Output
     </td>
     <td>
      In I2S master mode, outputs BCK signal for TX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SO_WS_in
     </td>
     <td>
      Input
     </td>
     <td>
      In I2S slave mode, inputs WS signal for TX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2SO_WS_out
     </td>
     <td>
      Output
     </td>
     <td>
      In I2S master mode, outputs WS signal for TX unit.
     </td>
    </tr>
    <tr>
     <td>
      I2S_MCLK_in
     </td>
     <td>
      Input
     </td>
     <td>
      In I2S slave mode, works as a clock source from the external mas
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 29.4-1. I2S Signal Description
  </h4>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   Any required signals of I2S must be mapped to the chip's pins via GPIO matrix, see Chapter 5
   <i>
    IO MUX and GPIO Matrix (GPIO, IO MUX)
   </i>
   .
  </p>
  <h1>
   2
   <a href="#page-158-0">
    9.5
   </a>
   Supported Audio Standards
  </h1>
  <p block-type="Text">
   <span id="page-732-0">
   </span>
   ESP32-C3 I2S supports multiple audio standards, including TDM Philips standard, TDM MSB alignment standard, TDM PCM standard, and PDM standard.
  </p>
  <p block-type="Text">
   Select the needed standard by configuring the following bits:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX/RX_TDM_EN
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: disable TDM mode.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-753-0">
        1: enable TDM m
       </a>
       ode.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX/RX_PDM_EN
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     0: disable PDM mode.
    </li>
    <li block-type="ListItem">
     1: enable PDM mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX/RX_MSB_SHIFT
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: WS and SD signals change simultaneously, i.e. enable MSB alignment standard.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-753-0">
        1: WS signal change
       </a>
       s one BCK clock cycle earlier than SD signal, i.e. enable Philips standard or select PCM standard.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX/RX_PCM_BYPASS
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: enable PCM standard.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-752-0">
        1: disable PCM standa
       </a>
       rd.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   29.5.1 TDM Philips Standard
  </h1>
  <p block-type="Text">
   <span id="page-733-0">
   </span>
   Philips specifications require that WS signal changes one BCK clock cycle earlier than SD signal on BCK falling edge, which means that WS signal is valid from one clock cycle before transmitting the first bit of channel data and changes one clock before the end of channel data transfer. SD signal line transmits the most significant bit of audio data first.
  </p>
  <p block-type="Text">
   Compared with Philips standard, TDM Philips standard supports multiple channels, see Figure 29.5-1.
  </p>
  <p>
   <span id="page-733-2">
   </span>
   <img src="_page_733_Figure_11.jpeg"/>
  </p>
  <p>
   Figure 29.5-1. TDM Philips Standard Timing Diagram
  </p>
  <h1>
   29.5.2 TDM MSB Alignment Standard
  </h1>
  <p block-type="Text">
   <span id="page-733-1">
   </span>
   MSB alignment specifications require WS and SD signals change simultaneously on the falling edge of BCK. The WS signal is valid until the end of channel data transfer. The SD signal line transmits the most significant bit of audio data first.
  </p>
  <p block-type="Text">
   Compared with MSB alignment standard, TDM MSB alignment standard supports multiple channels, see Figure 29.5-2.
  </p>
  <p>
   <span id="page-734-2">
   </span>
   <img src="_page_734_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 29.5-2. TDM MSB Alignment Standard Timing Diagram
  </p>
  <h1>
   29.5.3 TDM PCM Standard
  </h1>
  <p block-type="Text">
   <span id="page-734-0">
   </span>
   Short frame synchronization under PCM standard requires WS signal changes one BCK clock cycle earlier than SD signal on the falling edge of BCK, which means that the WS signal becomes valid one clock cycle before transferring the first bit of channel data and remains unchanged in this BCK clock cycle. SD signal line transmits the most significant bit of audio data first.
  </p>
  <p block-type="Text">
   Compared with PCM standard, TDM PCM standard supports multiple channels, see Figure 29.5-3.
  </p>
  <p>
   <span id="page-734-3">
   </span>
   <img src="_page_734_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 29.5-3. TDM PCM Standard Timing Diagram
  </p>
  <h1>
   29.5.4 PDM Standard
  </h1>
  <p block-type="Text">
   <span id="page-734-1">
   </span>
   Under PDM standard, WS signal changes continuously during data transmission. The low-level and high-level of this signal indicates the left channel and right channel, respectively. WS and SD signals change simultaneously on the falling edge of BCK, see Figure 29.5-4.
  </p>
  <p>
   <span id="page-735-1">
   </span>
   <img src="_page_735_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 29.5-4. PDM Standard Timing Diagram
  </p>
  <h1>
   29.6 I2S TX/RX Clock
  </h1>
  <p block-type="Text">
   <span id="page-735-0">
   </span>
   I2S_TX/RX_CLK is the master clock of I2S TX/RX unit, divided from:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     40 MHz XTAL_CLK
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     160 MHz PLL_F160M_CLK
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     240 MHz PLL_D2_CLK
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     or external input clock: I2S_MCLK_in
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-735-2">
   </span>
   The serial clock (BCK) of the I2S TX/RX unit is divided from I2S_TX/RX_CLK, as shown in Figure 29.6-1. I2S_TX/RX_CLK_SEL is used to select clock source for TX/RX unit, and I2S_TX/RX_CLK_ACTIVE to enable or disable the clock source.
  </p>
  <p>
   <img src="_page_735_Figure_9.jpeg"/>
  </p>
  <p>
   Figure 29.6-1. I2S Clock
  </p>
  <p block-type="Text">
   The following formula shows the relation between I2S_TX/RX_CLK frequency
   <i>
    f
   </i>
   I2S_TX/RX_CLK and the divider clock source frequency
   <i>
    f
   </i>
   I2S_CLK_S:
  </p>
  <p block-type="Equation">
   <math display="block">
    f_{\text{ISS\_TX/RX\_CLK}} = \frac{f_{\text{ISS\_CLK\_S}}}{N+\frac{b}{a}}
   </math>
  </p>
  <p block-type="Text">
   N is an integer value between 2 and 256. The value of N corresponds to the value of I2S_TX/RX_CLKM_DIV_NUM in register I2S_TX/RX_CLKM_CONF_REG as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When I2S_TX/RX_CLKM_DIV_NUM = 0, N = 256.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When
     <a href="#page-758-0">
      I2S_TX/RX_CLKM
     </a>
     _DIV_NUM
     <a href="#page-758-0">
      = 1, N = 2.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When
     <a href="#page-758-0">
      I2S_TX/RX_CLKM_DIV_NUM
     </a>
     has any other value, N = I2S_TX/RX_CLKM_DIV_NUM.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The values
   <a href="#page-758-0">
    of "a" and "b" in fractional div
   </a>
   ider depend only on x, y, z, and yn1. The corresponding formulas are as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When b
     <i>
      &lt;
     </i>
     = a 2 , yn1 = 0, x =
     <i>
      <a href="#page-758-0">
       floor
      </a>
     </i>
     ([
     <sup>
      a
     </sup>
     b ])
     <i>
      −
     </i>
     1, y = a%b, z = b;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When b
     <i>
      &gt;
     </i>
     a 2 , yn1 = 1, x =
     <i>
      floor
     </i>
     ([
     <sup>
      a
     </sup>
     a - b ])
     <i>
      −
     </i>
     1, y = a%(a - b), z = a - b.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The values of x, y, z, and yn1 are configured in I2S_TX/RX_CLKM_DIV_X, I2S_TX/RX_CLKM_DIV_Y, I2S_TX/RX_CLKM_DIV_Z, and I2S_TX/RXCLKM_DIV_YN1. To configure the integer divider, clear I2S_TX/RX_CLKM_DIV_X and I2S_TX/RX_CLKM_DIV_Z, then set I2S_TX/RX_CLKM_DIV_Y to 1.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   <a href="#page-760-0">
    Using fractional divider m
   </a>
   ay in
   <a href="#page-760-0">
    troduce some clock jitter.
   </a>
  </p>
  <p block-type="Text">
   In master TX mode, the serial clock BCK for I2S TX unit is I2SO_BCK_out, divided from I2S_TX_CLK. That is:
  </p>
  <p block-type="Equation">
   <math display="block">
    f_{\rm l2SO\_BCK\_out} = \frac{f_{\rm l2S\_TX\_CLK}}{\rm MO}
   </math>
  </p>
  <p block-type="Text">
   "MO" is an integer value:
  </p>
  <p block-type="Text">
   MO = I2S_TX_BCK_DIV_NUM + 1
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   I2S_TX_BCK_DIV_NUM must not be configure
   <a href="#page-757-0">
    d as 1.
   </a>
  </p>
  <p block-type="Text">
   In
   <a href="#page-757-0">
    master RX mode, the
   </a>
   serial clock BCK for I2S RX unit is I2SI_BCK_out, divided from I2S_RX_CLK. That is:
  </p>
  <p block-type="Equation">
   <math display="block">
    f_{\rm l2S1\_BCK\_out} = \frac{f_{\rm l2S\_RX\_CLK}}{\rm Ml}
   </math>
  </p>
  <p block-type="Text">
   "MI" is an integer value:
  </p>
  <p block-type="Text">
   MI = I2S_RX_BCK_DIV_NUM + 1
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_RX_BCK_DIV_NUM must not be configured as 1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In I2S slave mode, make sure
     <i>
      f
     </i>
     I2S_TX/RX_CLK &gt;= 8 *
     <i>
      f
     </i>
     BCK. I2S module can output I2S_MCLK_out as the master clock for peripherals.
    </li>
   </ul>
  </p>
  <h1>
   29.7 I2S Reset
  </h1>
  <p block-type="Text">
   <span id="page-737-0">
   </span>
   The units and FIFOs in I2S module are reset by the following bits.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S TX/RX units: reset by the bits I2S_TX_RESET and I2S_RX_RESET.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S TX/RX FIFO: reset by the bits I2S_TX_FIFO_RESET and I2S_RX_FIFO_RESET.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   I2S module clock must be configured fir
   <a href="#page-756-0">
    st before the module an
   </a>
   d FIF
   <a href="#page-752-0">
    O are reset.
   </a>
  </p>
  <h1>
   29.8 I2S Master/Slave Mode
  </h1>
  <p block-type="Text">
   <span id="page-737-1">
   </span>
   The ESP32-C3 I2S module can operate as a master or a slave in half-duplex and full-duplex communication modes, depending on the configuration of I2S_RX_SLAVE_MOD and I2S_TX_SLAVE_MOD.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_SLAVE_MOD
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: master TX mode
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-756-0">
        1: slave TX mode
       </a>
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_RX_SLAVE_MOD
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: master RX mode
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-752-0">
        1: slave RX mode
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   29.8.1 Master/Slave TX Mode
  </h1>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <span id="page-737-2">
     </span>
     <i>
      •
     </i>
     I2S works as a master transmitter:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Set the bit I2S_TX_START to start transmitting data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       TX unit keeps driving the clock signal and serial data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If I2S_TX_
       <a href="#page-756-0">
        STOP_EN
       </a>
       is set and all the data in FIFO is transmitted, the master stops transmitting data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If I2S_TX_STOP_EN is cleared and all the data in FIFO is transmitted, meanwhile no new data is filled into FIFO, then the TX unit keeps sending the last data frame.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       M
       <a href="#page-756-0">
        aster stops sendin
       </a>
       g data when the bit I2S_TX_START is cleared.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S wo
     <a href="#page-756-0">
      rks as a slave tran
     </a>
     smitter:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Set the bit I2S_TX_START.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     Wait for the master BCK clock to enable a transmit operation.
    </li>
    <li block-type="ListItem">
     If I2S_TX_STOP_EN is set and all the data in FIFO is transmitted, then the slave keeps sending zeros, till the master stops providing BCK signal.
    </li>
    <li block-type="ListItem">
     If I2S_TX_STOP_EN is cleared and all the data in FIFO is transmitted, meanwhile no new data is filled in
     <a href="#page-756-0">
      to FIFO, then the T
     </a>
     X unit keeps sending the last data frame.
    </li>
    <li block-type="ListItem">
     If I2S_TX_START is cleared, slave keeps sending zeros till the master stops providing BCK clock si
     <a href="#page-756-0">
      gnal.
     </a>
    </li>
   </ul>
  </p>
  <h1>
   29.8.2
   <a href="#page-756-0">
    Master/Sla
   </a>
   ve RX Mode
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-738-0">
     </span>
     <i>
      •
     </i>
     I2S works as a master receiver:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Set the bit I2S_RX_START to start receiving data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RX unit keeps outputting clock signal and sampling input data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RX unit sto
       <a href="#page-752-0">
        ps receiving dat
       </a>
       a when the bit I2S_RX_START is cleared.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S works as a slave receiver:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Set the bit I2S_RX_START.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Wait for master BCK signal to start receiving data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RX unit sto
       <a href="#page-752-0">
        ps receiving dat
       </a>
       a when the bit I2S_RX_START is cleared.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   29.9 Transmitting Data
  </h1>
  <h4>
   <span id="page-738-1">
   </span>
   Note:
  </h4>
  <p block-type="Text">
   Updating the configuration described in this and subsequent sections requires to set I2S_TX_UPDATE accordingly, to synchronize registers from APB clock domain to TX clock domain. For more detailed configuration, see Section 29.11.1.
  </p>
  <p block-type="Text">
   In TX mode, I2S first reads data from DMA and sends these data out via output signals according to the configured data mode and channel mode.
  </p>
  <h1>
   29.9.1 Data Format Control
  </h1>
  <p block-type="Text">
   <span id="page-738-2">
   </span>
   Data format is controlled in the following phases:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Phase I: read data from memory and write it to TX FIFO.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Phase II: read the data to send (TX data) from TX FIFO and convert the data according to output data mode.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Phase III: clock out the TX data serially.
    </li>
   </ul>
  </p>
  <h4>
   29.9.1.1 Bit Width Control of Channel Valid Data
  </h4>
  <p block-type="Text">
   <span id="page-738-3">
   </span>
   The bit width of valid data in each channel is determined by I2S_TX_BITS_MOD and I2S_TX_24_FILL_EN, see the table below.
  </p>
  <h4>
   Table 29.9-1. Bit Width of Channel Valid Data
  </h4>
  <span id="page-739-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 29.9-1. Bit Width of Channel Valid Data
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Channel Valid Data Width
     </td>
     <td>
      I2S_TX_BITS_MOD
     </td>
     <td>
      I2S_TX_24_FILL_EN
     </td>
    </tr>
    <tr>
     <td>
      32
     </td>
     <td>
      31
     </td>
     <td>
      x
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      23
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   1 This value is ignored.
  </p>
  <h1>
   29.9.1.2 Endian Control of Channel Valid Data
  </h1>
  <p block-type="Text">
   <span id="page-739-0">
   </span>
   When I2S reads data from DMA, the data endian under various data width is controlled by I2S_TX_BIG_ENDIAN, see the table below.
  </p>
  <span id="page-739-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 29.9-2. Endian of Channel Valid Data
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td rowspan="2">
      Origin Data
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Channel Valid Data Width
     </td>
     <td>
      Endian of Processed Data
     </td>
     <td>
      I2S_TX_BIG_ENDIAN
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      32
     </td>
     <td rowspan="2">
      {B3, B2, B1, B0}
     </td>
     <td>
      {B3, B2, B1, B0}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      {B0, B1, B2, B3}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      24
     </td>
     <td rowspan="2">
      {B2, B1, B0}
     </td>
     <td>
      {B2, B1, B0}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      {B0, B1, B2}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      16
     </td>
     <td>
      {B1, B0}
     </td>
     <td>
      {B1, B0}
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 29.9-2. Endian of Channel Valid Data
  </h4>
  <h1>
   29.9.1.3 A-law/
   <i>
    µ
   </i>
   -law Compression and Decompression
  </h1>
  <p block-type="Text">
   <span id="page-739-1">
   </span>
   ESP32-C3 I2S compresses/decompresses the valid data into 32-bit by A-law or by
   <i>
    µ
   </i>
   -law. If the bit width of valid data is smaller than 32, zeros are filled to the extra high bits of the data to be compressed/decompressed by default.
  </p>
  <p block-type="Text">
   Note:
  </p>
  <p block-type="Text">
   Extra high bits here mean the bits[31: channel valid data width] of the data to be compressed/decompressed.
  </p>
  <h4>
   Configure I2S_TX_PCM_BYPASS to:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: compress or decompress the data.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: d
     <a href="#page-756-0">
      o not compress or deco
     </a>
     mpress the data.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Configure I2S_TX_PCM_CONF to:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: decompress the data using A-law.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: c
     <a href="#page-756-0">
      ompress the data usin
     </a>
     g A-law.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2: decompress the data using
     <i>
      µ
     </i>
     -law.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3: compress the data using
     <i>
      µ
     </i>
     -law.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   At this point, the first phase of data format control is complete.
  </p>
  <h1>
   29.9.1.4 Bit Width Control of Channel TX Data
  </h1>
  <p block-type="Text">
   <span id="page-740-0">
   </span>
   The TX data width in each channel is determined by I2S_TX_TDM_CHAN_BITS.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If TX data width in each channel is larger than the valid data width, zeros will be filled to these extra bits. Configure I2S_TX_LEFT_ALIGN to:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: the valid data is at the lower bits of TX
       <a href="#page-757-0">
        data. Zeros are filled into h
       </a>
       igher bits of TX data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1: th
       <a href="#page-756-0">
        e valid data is at the h
       </a>
       igher bits of TX data. Zeros are filled into lower bits of TX data.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the TX data width in each channel is smaller than the valid data width, only the lower bits of valid data are sent out, and the higher bits are discarded.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   At this point, the second phase of data format control is complete.
  </p>
  <h1>
   29.9.1.5 Bit Order Control of Channel Data
  </h1>
  <p block-type="Text">
   <span id="page-740-1">
   </span>
   The data bit order in each channel is controlled by I2S_TX_BIT_ORDER:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: Not reverse the valid data bit order;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: Reverse the valid data bit order.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   At this point, the data format control is complete. Figure 29.9-1 shows a complete process of TX data format control.
  </p>
  <p>
   <span id="page-740-3">
   </span>
   <img src="_page_740_Figure_13.jpeg"/>
  </p>
  <p>
   <span id="page-740-2">
   </span>
   Figure 29.9-1. TX Data Format Control
  </p>
  <h1>
   29.9.2 Channel Mode Control
  </h1>
  <p block-type="Text">
   ESP32-C3 I2S supports both TDM TX mode and PDM TX mode. Set I2S_TX_TDM_EN to enable TDM TX mode, or set I2S_TX_PDM_EN to enable PDM TX mode.
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_T
     <a href="#page-756-0">
      X_TDM_EN
     </a>
     and I2S_TX_PDM_EN must not be cleared or set simultaneously.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Most stereo I2S codecs can be controlled by setting the I2S module into 2-channel mode under TDM standard.
    </li>
   </ul>
  </p>
  <h1>
   29.9.2.1 I2S Channel Control in TDM TX Mode
  </h1>
  <p block-type="Text">
   <span id="page-741-0">
   </span>
   In TDM TX mode, I2S supports up to 16 channels to output data. The total number of TX channels in use is controlled by I2S_TX_TDM_TOT_CHAN_NUM. For example, if I2S_TX_TDM_TOT_CHAN_NUM is set to 5, six channels in total (channel 0 ~ 5) will be used to transmit data, see Figure 29.9-2.
  </p>
  <p block-type="Text">
   In these TX channels, if I2S_TX_TDM_CHANn_EN is set to:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: this c
     <a href="#page-758-1">
      hannel sends the channel data
     </a>
     out.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: the TX data to
     <a href="#page-758-1">
      be sent by this channel is
     </a>
     controlled by I2S_TX_CHAN_EQUAL:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1: the data of previous channel is sent out.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: the data stored in I2S_SINGLE_DATA is sent out.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In TDM TX master mode, WS signal is controlled by I2S_TX_WS_IDLE_POL and I2S_TX_TDM_WS_WIDTH:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_WS_IDLE_POL: th
     <a href="#page-762-0">
      e default level of W
     </a>
     S signal
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-757-0">
      I2S_TX_TDM_WS_W
     </a>
     IDTH: the cycles the WS
     <a href="#page-756-0">
      default level lasts for wh
     </a>
     en transmitting all channel data
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2S_T
   <a href="#page-756-0">
    X_HALF_SAMPLE_BITS
   </a>
   x 2 is equal to the BCK cycles in one WS period.
  </p>
  <h4>
   TDM
   <a href="#page-757-0">
    Channel Configuration Ex
   </a>
   ample
  </h4>
  <p block-type="Text">
   <a href="#page-757-0">
    In this example, register confi
   </a>
   guration is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_TDM_CHAN_NUM = 5, i.e. channel 0 ~ 5 are used to transmit data.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_CHAN_EQUAL = 1, i.e. that data of previous channel will be transmitted if the bit I2S_TX_TDM_CHAN
     <i>
      n
     </i>
     _EN is cleared.
     <i>
      n
     </i>
     = 0 ~ 5.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_TDM_CHAN0/2/5_EN = 1, i.e. these channels send their channel data out.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_TDM_CHAN1/3/4_EN = 0, i.e. these channels send the previous channel data out.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Once the configuration is done, data is transmitted as follows.
  </p>
  <p>
   <span id="page-742-2">
   </span>
   <img src="_page_742_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   Figure 29.9-2. TDM Channel Control
  </p>
  <h1>
   29.9.2.2 I2S Channel Control in PDM TX Mode
  </h1>
  <p block-type="Text">
   ESP32-C3 I2S supports two PDM TX modes, namely, normal PDM TX mode and PCM-to-PDM TX mode.
  </p>
  <p block-type="Text">
   <span id="page-742-0">
   </span>
   In PDM TX mode, fetching data from DMA is controlled by I2S_TX_MONO and I2S_TX_MONO_FST_VLD, see Table 29.9-3. Please configure the two bits according to the data stored in memory, be it the single-channel or dual-channel data.
  </p>
  <span id="page-742-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Table 29.9-3. Data-Fetching Control in PDM TX Mode
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Data-Fetching Control Option
     </td>
     <td>
      Mode
     </td>
     <td>
      I2S_TX_MONO
     </td>
     <td>
      I2S_TX_MONO_FST_VLD
     </td>
    </tr>
    <tr>
     <td>
      Post data-fetching request to DMA at any
     </td>
     <td>
      Stereo mode
     </td>
     <td>
     </td>
     <td>
      0
     </td>
    </tr>
    <tr>
     <td>
      edge of WS signal
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Post data-fetching request to DMA only at
     </td>
     <td>
      Mono mode
     </td>
     <td>
     </td>
     <td>
      1
     </td>
    </tr>
    <tr>
     <td>
      the second half period of WS signal
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 29.9-3. Data-Fetching
   <a href="#page-756-0">
    Control in PDM T
   </a>
   X
   <a href="#page-756-0">
    Mode
   </a>
  </p>
  <p block-type="Text">
   In normal PDM TX mode, I2S channel mode is controlled by I2S_TX_CHAN_MOD and I2S_TX_WS_IDLE_POL, see the table below.
  </p>
  <span id="page-743-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 29.9-4. I2S Channel Control in Normal PDM TX Mode
     </th>
     <th>
      Mode
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Channel
     </td>
     <td>
      Left Channel
     </td>
     <td>
      Right Channel
     </td>
     <td>
      Control
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td rowspan="8">
      Control
      <br/>
      Op
      <br/>
      tion
      <br/>
      Stereo mode
      <br/>
      Mono mode
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Field1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Transmit the left channel data
     </td>
     <td>
      Transmit the right channel data
     </td>
     <td>
     </td>
     <td>
      0
     </td>
    </tr>
    <tr>
     <td>
      Transmit the left channel data
     </td>
     <td>
      Transmit the left channel data
     </td>
     <td>
     </td>
     <td>
      1
     </td>
    </tr>
    <tr>
     <td>
      Transmit the right channel data
      <br/>
      Transmit the right channel data
     </td>
     <td>
      Transmit the right channel data
      <br/>
      Transmit the right channel data
     </td>
     <td>
     </td>
     <td>
      1
      <br/>
      2
     </td>
    </tr>
    <tr>
     <td>
      Transmit the left channel data
     </td>
     <td>
      Transmit the left channel data
     </td>
     <td>
     </td>
     <td>
      2
     </td>
    </tr>
    <tr>
     <td>
      Transmit the value of "single"3
     </td>
     <td>
      Transmit the right channel data
     </td>
     <td>
     </td>
     <td>
      3
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 29.9-4. I2S Channel Control in Normal PDM TX Mode
  </h4>
  <p block-type="Text">
   1 I2S_TX_CHAN_MOD
  </p>
  <p block-type="Text">
   2 I2S_TX_WS_IDLE_POL
  </p>
  <p block-type="Text">
   3 The "single" value is equal to the value of I2S_SINGLE_DATA.
  </p>
  <p block-type="Text">
   In P
   <a href="#page-756-0">
    DM TX aster mode, the W
   </a>
   S level of I2S module is controlled by I2S_TX_WS_IDLE_POL. The frequency of WS signal is half of BCK frequency. The config
   <a href="#page-762-0">
    uration of WS signa
   </a>
   l is similar to that of BCK signal, see Section 29.6 and Figure 29.9-3.
  </p>
  <p block-type="Text">
   In PCM-to-PDM TX mode, the PCM data from DMA is converted to
   <a href="#page-756-0">
    PDM data and then out
   </a>
   put in PDM signal format. Configure I2S_PCM2PDM_CONV_EN to enable this mode.
  </p>
  <p block-type="Text">
   <a href="#page-735-0">
    The
   </a>
   register co
   <a href="#page-744-2">
    nfigurati
   </a>
   on for PCM-to-PDM TX mode is as follows:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Configure 1-l
   <a href="#page-754-0">
    ine PDM output format or 1-
   </a>
   /2-line DAC output mode as the table below:
  </p>
  <h4>
   Table 29.9-5. PCM-to-PDM TX Mode
  </h4>
  <span id="page-743-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 29.9-5. PCM-to-PDM TX Mode
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Channel Output Format
     </td>
     <td>
      I2S_TX_PDM_DAC_MODE_EN
     </td>
     <td>
      I2S_TX_PDM_DAC_2OUT_EN
     </td>
    </tr>
    <tr>
     <td>
      1-line PDM output format1
     </td>
     <td>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      1-line DAC output format2
     </td>
     <td>
     </td>
     <td>
      1
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   1. In PDM output format, SD data of two channels is sent out in one WS period.
  </p>
  <p block-type="Text">
   2. In DAC output format, SD data of one channel is sent out in one WS period.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Configure sampling frequency and upsampling rate
  </p>
  <p block-type="Text">
   In PCM-to-PDM TX mode, PDM clock frequency is equal to BCK frequency. The relation of sampling frequency (
   <i>
    f
   </i>
   Sampling) and BCK frequency is as follows:
  </p>
  <p block-type="Equation">
   <math display="block">
    f_{\text{Sampling}} = \frac{f_{\text{BCK}}}{\text{OSR}}
   </math>
  </p>
  <p block-type="Text">
   Upsampling rate (OSR) is related to I2S_TX_PDM_SINC_OSR2 as follows:
  </p>
  <p block-type="TextInlineMath">
   OSR = I2S_TX_PDM_SINC_OSR2
   <i>
    ×
   </i>
   64
  </p>
  <p block-type="Text">
   Sampling frequency
   <i>
    f
   </i>
   Sampling is related to
   <a href="#page-754-0">
    I2S_TX_PDM_FS
   </a>
   as follows:
  </p>
  <p block-type="TextInlineMath">
   <i>
    f
   </i>
   Sampling =
   <a href="#page-754-0">
    I2S_TX_PDM_FS
   </a>
   <i>
    ×
   </i>
   100
  </p>
  <p block-type="Text">
   Configure the registers according to nee
   <a href="#page-754-1">
    ded sampling freq
   </a>
   uency, upsampling rate, and PDM clock frequency.
  </p>
  <h4>
   PDM Channel Configuration Example
  </h4>
  <p block-type="Text">
   In this example, the register configuration is as follows.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_CHAN_MOD = 2, i.e. mono mode is selected.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_WS_IDLE_POL = 1, i.e. both the left channel and right channel transmit the left channel data.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Once the configuration is done, the channel data is transmitted as follows.
  </p>
  <p>
   <span id="page-744-2">
   </span>
   <img src="_page_744_Figure_10.jpeg"/>
  </p>
  <p>
   <b>
    I2S_TX_CHAN_MOD = 2; I2S_TX_WS_IDLE_POL = 1;
   </b>
  </p>
  <p block-type="Text">
   Figure 29.9-3. PDM Channel Control Example
  </p>
  <h1>
   29.10 Receiving Data
  </h1>
  <h4>
   <span id="page-744-0">
   </span>
   Note:
  </h4>
  <p block-type="Text">
   Updating the configuration described in this and subsequent sections requires setting I2S_RX_UPDATE, to synchronize registers from APB clock domain to RX clock domain. For more detailed configuration, see Section 29.11.2.
  </p>
  <p block-type="Text">
   In RX mode, I2S first reads data from peripheral interface, and then stores the data into memory via DMA, according to the configured channel mode and data mode.
  </p>
  <h1>
   29.10.1 Channel Mode Control
  </h1>
  <p block-type="Text">
   <span id="page-744-1">
   </span>
   ESP32-C3 I2S supports both TDM RX mode and PDM RX mode. Set I2S_RX_TDM_EN to enable TDM RX mode, or set I2S_RX_PDM_EN to enable PDM RX mode.
  </p>
  <p block-type="Text">
   Espressif Systems 745
  </p>
  <p block-type="Text">
   I2S_RX_TDM_EN and I2S_RX_PDM_EN must not be cleared or set simultaneously.
  </p>
  <h4>
   2
   <a href="#page-752-0">
    9.10.1.1
   </a>
   I2S Cha
   <a href="#page-752-0">
    nnel Control in
   </a>
   TDM RX Mode
  </h4>
  <p block-type="Text">
   <span id="page-745-0">
   </span>
   In TDM RX mode, I2S supports up to 16 channels to input data. The total number of RX channels in use is controlled by I2S_RX_TDM_TOT_CHAN_NUM. For example, if I2S_RX_TDM_TOT_CHAN_NUM is set to 5, channel 0 ~ 5 will be used to receive data.
  </p>
  <p block-type="Text">
   In these RX channels, if I2S_RX_TDM_CHANn_EN is set to:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: this c
     <a href="#page-755-0">
      hannel data is valid and will be s
     </a>
     tored into RX FI
     <a href="#page-755-0">
      FO.
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: this channel da
     <a href="#page-758-1">
      ta is invalid and will not be
     </a>
     stored into RX FIFO.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In TDM RX master mode, WS signal is controlled by I2S_RX_WS_IDLE_POL and I2S_RX_TDM_WS_WIDTH.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_RX_WS_IDLE_POL: the default level of WS signal
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-753-0">
      I2S_RX_TDM_WS_W
     </a>
     IDTH: the cycles the WS
     <a href="#page-752-0">
      default level lasts for wh
     </a>
     en receiving all channel data
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2S_
   <a href="#page-752-0">
    RX_HALF_SAMPLE_BITS
   </a>
   x 2 is equal to the BCK cycles in one WS period.
  </p>
  <h4>
   29.10.1.2
   <a href="#page-753-0">
    I2S Channel Co
   </a>
   ntrol in PDM RX Mode
  </h4>
  <p block-type="Text">
   <span id="page-745-1">
   </span>
   <a href="#page-753-0">
    In PDM RX mode, I2S convert
   </a>
   s the serial data from channels to the data to be entered into memory.
  </p>
  <p block-type="Text">
   In PDM RX master mode, the default level of WS signal is controlled by I2S_RX_WS_IDLE_POL. WS frequency is half of BCK frequency. The configuration of BCK signal is similar to that of WS signal as described in Section 29.6. Note, in PDM RX mode, the value of I2S_RX_HALF_SAMPLE_BITS must be same as that of I2S_RX_BITS_MOD.
  </p>
  <h1>
   <a href="#page-735-0">
    29.1
   </a>
   0.2 Data Format Contro
   <a href="#page-753-0">
    l
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-745-2">
   </span>
   <a href="#page-753-0">
    Data format is contr
   </a>
   olled in the following phases:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Phase I: serial input data is converted into the data to be saved to RX FIFO.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Phase II: the data is read from RX FIFO and converted according to input data mode.
    </li>
   </ul>
  </p>
  <h4>
   29.10.2.1 Bit Order Control of Channel Data
  </h4>
  <p block-type="Text">
   <span id="page-745-3">
   </span>
   The channel data will be stored as the data to be input in order from high to low. The data bit order in each channel is controlled by I2S_RX_BIT_ORDER:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: The bit order of the data to be input is not reversed;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: The bit order of
     <a href="#page-752-0">
      the data to be input i
     </a>
     s reversed.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-745-4">
   </span>
   At this point, the first phase of data format control is complete.
  </p>
  <h1>
   29.10.2.2 Bit Width Control of Channel Storage (Valid) Data
  </h1>
  <p block-type="Text">
   The storage data width in each channel is controlled by I2S_RX_BITS_MOD and I2S_RX_24_FILL_EN, see the table below.
  </p>
  <span id="page-746-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 29.10-1. Channel Storage Data Width
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Channel
      <br/>
      Storage
     </td>
     <td>
      I2S_RX_BITS_MOD
     </td>
     <td>
      I2S_RX_24_FILL_EN
     </td>
    </tr>
    <tr>
     <td>
      Data Width
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      32
     </td>
     <td>
      31
      <br/>
      23
     </td>
     <td>
      x
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 29.10-1. Channe
   <a href="#page-753-0">
    l Storage Data Width
   </a>
  </h4>
  <h1>
   29.10.2.3 Bit Width Control of Channel RX Data
  </h1>
  <p block-type="Text">
   <span id="page-746-0">
   </span>
   The RX data width in each channel is determined by I2S_RX_TDM_CHAN_BITS.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the storage data width in each channel is smaller than the received (RX) data width, then only the bits within the storage data width is saved into memory. Configure I2S_RX_LEFT_ALIGN to:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       0: only the lower bits of the received dat
       <a href="#page-753-0">
        a within the storage data wi
       </a>
       dth is stored to memory.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       1: only the higher bits of the received data within the stor
       <a href="#page-752-0">
        age data width is stor
       </a>
       ed to memory.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If the received data width is smaller than the storage data width in each channel, the higher bits of the received data will be filled with zeros and then the data is saved to memory.
    </li>
   </ul>
  </p>
  <h1>
   29.10.2.4 Endian Control of Channel Storage Data
  </h1>
  <p block-type="Text">
   The received data is then converted into storage data (to be stored to memory) after some processing, such as discarding extra bits or filling zeros in missing bits. The endian of the storage data is controlled by I2S_RX_BIG_ENDIAN under various data width, see the table below.
  </p>
  <span id="page-746-3">
  </span>
  <span id="page-746-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Channel
      <br/>
      Storage
     </th>
     <th>
      Origin Data
     </th>
     <th>
      Endian of Processed
     </th>
     <th>
      I2S_RX_BIG_ENDIAN
     </th>
    </tr>
    <tr>
     <td>
      Data Width
     </td>
     <td rowspan="2">
      {B3, B2, B1, B0}
     </td>
     <td>
      Data
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      32
     </td>
     <td>
      {B3, B2, B1, B0}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td rowspan="2">
      {B2, B1, B0}
     </td>
     <td>
      {B0, B1, B2, B3}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      24
     </td>
     <td>
      {B2, B1, B0}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      {B0, B1, B2}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      16
     </td>
     <td>
      {B1, B0}
     </td>
     <td>
      {B1, B0}
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      {B0, B1}
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 29.10-2. Channel Storage Data Endian
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   29.10.2.5 A-law/
   <i>
    µ
   </i>
   -law Compression and Decompression
  </h1>
  <p block-type="Text">
   ESP32-C3 I2S compresses/decompresses the storage data in 32-bit by A-law or by
   <i>
    µ
   </i>
   -law. By default, zeros are filled into high bits.
  </p>
  <p block-type="Text">
   Configure I2S_RX_PCM_BYPASS to:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: compress or decompress the data.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: d
     <a href="#page-752-0">
      o not compress or deco
     </a>
     mpress the data.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Configure I2S_RX_PCM_CONF to:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: decompress the data using A-law.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: c
     <a href="#page-752-0">
      ompress the data usin
     </a>
     g A-law.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2: decompress the data using
     <i>
      µ
     </i>
     -law.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     3: compress the data using
     <i>
      µ
     </i>
     -law.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   At this point, the data format control is complete. Data then is stored into memory via DMA.
  </p>
  <h1>
   29.11 Software Configuration Process
  </h1>
  <h1>
   29.11.1 Configure I2S as TX Mode
  </h1>
  <p block-type="Text">
   <span id="page-747-0">
   </span>
   Follow the steps below to configure I2S as TX mode via software:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure the clock as described in Section 29.6.
    </li>
    <li block-type="ListItem">
     2. Configure signal pins according to Table 29.4-1.
    </li>
    <li block-type="ListItem">
     3. Select the mode needed by configuring the
     <a href="#page-735-0">
      bit
     </a>
     I2S_TX_SLAVE_MOD.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: master TX mode
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: slave TX mode
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     4. Set needed TX data mode and TX channel mode as described in Section 29.9, and then set the bit I2S_TX_UPDATE.
    </li>
    <li block-type="ListItem">
     5. Reset TX unit and TX FIFO as described in Section 29.7.
    </li>
    <li block-type="ListItem">
     6.
     <a href="#page-756-0">
      Enable correspo
     </a>
     nding interrupts, see Section 29.12.
    </li>
    <li block-type="ListItem">
     7. Configure DMA outlink.
    </li>
    <li block-type="ListItem">
     8. Set I2S_TX_STOP_EN if needed. For more inf
     <a href="#page-748-1">
      ormati
     </a>
     on, please refer to Section 29.8.1.
    </li>
    <li block-type="ListItem">
     9. Start transmitting data:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       <a href="#page-756-0">
        In master mode,
       </a>
       wait till I2S slave gets ready, then set I2S_TX_START to s
       <a href="#page-737-2">
        tart tra
       </a>
       nsmitting data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       In slave mode, set the bit I2S_TX_START. When the I2S master supplies BCK and WS signals, I2S slave starts transmitting data.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     10. Wait for the interrupt signals set in Step 6, or check wheth
     <a href="#page-756-0">
      er the transfer is
     </a>
     completed by querying I2S_TX_IDLE:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: transmitter is working.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espre
   <a href="#page-762-1">
    ssif Systems
   </a>
   748
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: transmitter is in idle.
    </li>
    <li block-type="ListItem">
     11. Clear I2S_TX_START to stop data transfer.
    </li>
   </ul>
  </p>
  <h1>
   29.11.2 Configure I2S as RX Mode
  </h1>
  <p block-type="Text">
   <span id="page-748-0">
   </span>
   Follow the
   <a href="#page-756-0">
    steps below to
   </a>
   configure I2S as RX mode via software:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure the clock as described in Section 29.6.
    </li>
    <li block-type="ListItem">
     2. Configure signal pins according to Table 29.4-1.
    </li>
    <li block-type="ListItem">
     3. Select the mode needed by configuring the
     <a href="#page-735-0">
      bit
     </a>
     I2S_RX_SLAVE_MOD.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       0: master RX mode
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       1: slave RX mode
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     4. Set needed RX data mode and RX channel mode as described in Section 29.10, and then set the bit I2S_RX_UPDATE.
    </li>
    <li block-type="ListItem">
     5. Reset RX unit and its FIFO according to Section 29.7.
    </li>
    <li block-type="ListItem">
     6.
     <a href="#page-752-0">
      Enable correspon
     </a>
     ding interrupts, see Section 29.12.
    </li>
    <li block-type="ListItem">
     7. Configure DMA inlink, and set the length of RX
     <a href="#page-737-0">
      data i
     </a>
     n I2S_RXEOF_NUM_REG.
    </li>
    <li block-type="ListItem">
     8. Start receiving data:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       In master mode, when the slave is ready, set I2S_RX_START
       <a href="#page-755-1">
        to start rece
       </a>
       iving data.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       In slave mode, set I2S_RX_START to start receiving data when get BCK and WS signals from the master.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     9. The received data is then stored to the specified
     <a href="#page-752-0">
      address of ESP3
     </a>
     2-C3 memory according the configuration of DMA. T
     <a href="#page-752-0">
      hen the corresp
     </a>
     onding interrupt set in Step 6 is generated.
    </li>
   </ul>
  </p>
  <h1>
   29.12 I2S Interrupts
  </h1>
  <p block-type="Text">
   <span id="page-748-1">
   </span>
   <i>
    •
   </i>
   I2S_TX_HUNG_INT: triggered when transmitting data is timed out. For example, if module is configured as TX slave mode, but the master does not provide BCK or WS signal for a long time (specified in I2S_LC_HUNG_CO
  </p>
  <p block-type="Text">
   NF_REG), then this interrupt will be triggered.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_RX_HUNG_INT: triggered when receiving data is timed out. For example, if I2S module is configured
     <a href="#page-761-0">
      as RX slave mode,
     </a>
     but the master does not send data for a long time (specified in
     <a href="#page-761-0">
      I2S_LC_
     </a>
     HUNG_CONF_REG), then this interrupt will be triggered.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     I2S_TX_DONE_INT: triggered when transmitting data is completed.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-761-0">
      I2S_RX_DONE_INT: trigger
     </a>
     ed when receiving data is completed.
    </li>
   </ul>
  </p>
  <h1>
   29.13 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-748-2">
   </span>
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <span id="page-749-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="5">
      Chapter 29
      <br/>
      I2S Controller (I2S)
      <br/>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Interrupt registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2S_INT_RAW_REG
     </td>
     <td>
      I2S interrupt raw register
     </td>
     <td>
      0x000C
     </td>
     <td>
      RO/WTC/SS
     </td>
    </tr>
    <tr>
     <td colspan="4">
      I2S_INT_ST_REG
      <br/>
      I2S interrupt status register
      <br/>
      0x0010
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      I2S_INT_ENA_REG
     </td>
     <td>
      I2S interrupt enable register
     </td>
     <td>
      0x0014
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2S_INT_CLR_REG
     </td>
     <td>
      I2S interrupt clear register
     </td>
     <td>
      0x0018
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      RX control and configuration registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2S_RX_CONF_REG
     </td>
     <td>
      I2S RX configuration register
     </td>
     <td>
      0x0020
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2S_RX_CONF1_REG
      <br/>
      I2S_RX_CLKM_CONF_REG
     </td>
     <td>
      I2S RX configuration register 1
      <br/>
      I2S RX clock configuration register
     </td>
     <td>
      0x0028
      <br/>
      0x0030
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2S_TX_PCM2PDM_CONF_REG
     </td>
     <td>
      I2S TX PCM-to-PDM configuration register
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2S_TX_PCM2PDM_CONF1_REG
     </td>
     <td>
      I2S TX PCM-to-PDM configuration register 1
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="5">
      I2S_RX_TDM_CTRL_REG
      <br/>
      I2S TX TDM mode control register
      <br/>
      0x0050
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2S_RXEOF_NUM_REG
     </td>
     <td>
      I2S RX data number control register
     </td>
     <td>
      0x0064
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TX control and configuration registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2S_TX_CONF_REG
     </td>
     <td>
      I2S TX configuration register
     </td>
     <td>
      0x0024
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      I2S_TX_CONF1_REG
     </td>
     <td>
      I2S TX configuration register 1
     </td>
     <td>
      0x002C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2S_TX_CLKM_CONF_REG
     </td>
     <td colspan="5">
      I2S TX clock configuration register
      <br/>
      0x0034
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="2">
      I2S_TX_TDM_CTRL_REG
      <br/>
      I2S TX TDM mode control register
     </td>
     <td>
      0x0054
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RX clock and timing registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="5">
      I2S_RX_CLKM_DIV_CONF_REG
      <br/>
      I2S RX unit clock divider configuration register
      <br/>
      0x0038
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      I2S_RX_TIMING_REG
     </td>
     <td>
      I2S RX timing control register
     </td>
     <td>
      0x0058
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TX clock and timing registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="5">
      I2S_TX_CLKM_DIV_CONF_REG
      <br/>
      I2S TX unit clock divider configuration register
      <br/>
      0x003C
      <br/>
      R/W
      <br/>
      I2S_TX_TIMING_REG
      <br/>
      I2S TX timing control register
      <br/>
      0x005C
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Control and configuration registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      I2S_LC_HUNG_CONF_REG
     </td>
     <td>
      I2S timeout configuration register
     </td>
     <td>
      0x0060
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="5">
      I2S_CONF_SIGLE_DATA_REG
      <br/>
      I2S single data register
      <br/>
      0x0068
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TX status register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td colspan="4">
      I2S_STATE_REG
      <br/>
      I2S TX status register
      <br/>
      0x006C
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Version register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   29.14 Registers
  </h1>
  <h4>
   Register 29.1. I2S_INT_RAW_REG (0x000C)
  </h4>
  <p>
   <span id="page-750-0">
   </span>
   <img src="_page_750_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   I2S_RX_DONE_INT_RAW The raw interrupt status bit for I2S_RX_DONE_INT interrupt. (RO/WTC/SS)
  </p>
  <p block-type="Text">
   I2S_TX_DONE_INT_RAW The raw interrupt status bit for
   <a href="#page-748-1">
    I2S_TX_DONE_INT
   </a>
   interrupt. (RO/WTC/SS)
  </p>
  <p block-type="Text">
   I2S_RX_HUNG_INT_RAW The raw interrupt status
   <a href="#page-748-1">
    bit for
   </a>
   I2S_RX_HUNG_INT interrupt. (RO/WTC/SS)
  </p>
  <p block-type="Text">
   I2S_TX_HUNG_INT_RAW The raw interrupt status bit for I2S_TX_HUNG_INT
   <a href="#page-748-1">
    interrupt. (R
   </a>
   O/WTC/SS)
  </p>
  <p>
   <span id="page-750-1">
   </span>
   <img src="_page_750_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   Register 29.2. I2S_INT_ST
   <a href="#page-748-1">
    _REG (0x0010)
   </a>
  </p>
  <p>
   <img src="_page_751_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-751-0">
   </span>
   <img src="_page_751_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-751-1">
   </span>
   I2S_TX_HUNG_INT_CLR Set this bit to clear
   <a href="#page-748-1">
    I2S_TX_HUNG_INT
   </a>
   interrupt. (WT)
  </p>
  <h4>
   Register 29.5. I2S_RX_CONF_REG (0x0020)
  </h4>
  <p>
   <span id="page-752-0">
   </span>
   <img src="_page_752_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_RX_RESET Set this bit to reset RX unit. (WT)
    </li>
    <li block-type="ListItem">
     I2S_RX_FIFO_RESET Set this bit to reset RX FIFO. (WT)
    </li>
    <li block-type="ListItem">
     I2S_RX_START Set this bit to start receiving data. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_SLAVE_MOD Set this bit to enable slave RX mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_MONO Set this bit to enable RX unit in mono mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_BIG_ENDIAN I2S RX byte endian. 1: low address data is saved to high address. 0: low address data is saved to low address. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_UPDATE Set 1 to update I2S RX registers from APB clock domain to I2S RX clock domain. This bit will be cleared by hardware after register update is done. (R/W/SC)
    </li>
    <li block-type="ListItem">
     I2S_RX_MONO_FST_VLD 1: The first channel data is valid in I2S RX mono mode. 0: The second channel data is valid in I2S RX mono mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_PCM_CONF I2S RX compress/decompress configuration bit. 0 (atol): A-law decompress, 1 (ltoa): A-law compress, 2 (utol):
     <i>
      µ
     </i>
     -law decompress, 3 (ltou):
     <i>
      µ
     </i>
     -law compress. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_PCM_BYPASS Set this bit to bypass Compress/Decompress module for received data. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_STOP_MODE 0: I2S RX stops only when I2S_RX_START is cleared. 1: I2S RX stops when I2S_RX_START is 0 or in_suc_eof is 1. 2: I2S RX stops when I2S_RX_START is 0 or RX FIFO is full. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_LEFT_ALIGN 1: I2S RX left alignment mode. 0: I2S RX right alignment mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_24_FILL_EN 1: store 24-bit channel data to 32 bits (Extra bits are filled with zeros). 0: store 24-bit channel data to 24 bits. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_WS_IDLE_POL 0: WS remains low when receiving left channel data, and remains high when receiving right channel data. 1: WS remains high when receiving left channel data, and remains low when receiving right channel data. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_BIT_ORDER Configures whether to reverse the bit order of the I2S RX data to be received. 0: Not reverse. 1: Reverse. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_TDM_EN 1: Enable I2S TDM RX mode. 0: Disable I2S TDM RX mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_PDM_EN 1: Enable I2S PDM RX mode. 0: Disable I2S PDM RX mode. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 29.6. I2S_RX_CONF1_REG (0x0028)
  </h4>
  <p>
   <span id="page-753-0">
   </span>
   <img src="_page_753_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_RX_TDM_WS_WIDTH The width of rx_ws_out (WS default level) in TDM mode is (I2S_RX_TDM_WS_WIDTH + 1) * T_BCK. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_BCK_DIV_NUM Configure the divider of BCK in RX mode. Note this divider must not be configured to 1. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_BITS_MOD Configure the valid data bit length of I2S RX channel. 7: all the valid channel data is in 8-bit mode. 15: all the valid channel data is in 16-bit mode. 23: all the valid channel data is in 24-bit mode. 31: all the valid channel data is in 32-bit mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_HALF_SAMPLE_BITS I2S RX half sample bits. This value x 2 is equal to the BCK cycles in one WS period. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_TDM_CHAN_BITS Configure RX bit number for each channel in TDM mode. Bit number expected = this value + 1. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_MSB_SHIFT Control the timing between WS signal and the MSB of data. 1: WS signal changes one BCK clock earlier. 0: Align at rising edge. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-753-1">
   </span>
   <img src="_page_753_Figure_8.jpeg"/>
  </p>
  <p>
   Register 29.7. I2S_RX_CLKM_CONF_REG (0x0030)
  </p>
  <p block-type="Text">
   I2S_RX_CLKM_DIV_NUM Integral I2S clock divider value. (R/W)
  </p>
  <p block-type="Text">
   I2S_RX_CLK_ACTIVE Clock enable signal of I2S RX unit. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_RX_CLK_SEL Select clock source for I2S RX unit. 0: XTAL_CLK. 1: PLL_D2_CLK. 2: PLL_F160M_CLK. 3: I2S_MCLK_in. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_MCLK_SEL 0: Use I2S TX unit clock as I2S_MCLK_OUT. 1: Use I2S RX unit clock as I2S_MCLK_OUT. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 29.8. I2S_TX_PCM2PDM_CONF_REG (0x0040)
  </h4>
  <p>
   <span id="page-754-0">
   </span>
   <img src="_page_754_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2S_TX_PDM_SINC_OSR2 I2S TX PDM OSR value. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_TX_PDM_DAC_2OUT_EN 0: 1-line DAC output mode. 1: 2-line DAC output mode. Only valid when I2S_TX_PDM_DAC_MODE_EN is set. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_PDM_DAC_MODE_EN 0: 1-line PDM output mode. 1: DAC output mode. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2S_PCM2PDM_CONV_EN Enable bit for I2S TX PCM-to-PDM conversion. (R/W)
  </p>
  <p>
   <span id="page-754-1">
   </span>
   <img src="_page_754_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   I2S_TX_PDM_FS I2S PDM TX upsampling parameter. (R/W)
  </p>
  <h4>
   Register 29.10. I2S_RX_TDM_CTRL_REG (0x0050)
  </h4>
  <p>
   <span id="page-755-0">
   </span>
   <img src="_page_755_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_RX_TDM_PDM_CHAN
     <i>
      n
     </i>
     _EN (
     <i>
      n
     </i>
     = 0  7) 1: Enable the valid data input of I2S RX TDM or PDM channel
     <i>
      n
     </i>
     . 0: Disable. Channel
     <i>
      n
     </i>
     only inputs 0. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_TDM_CHAN
     <i>
      n
     </i>
     _EN (
     <i>
      n
     </i>
     = 8  15) 1: Enable the valid data input of I2S RX TDM channel
     <i>
      n
     </i>
     . 0: Disable. Channel
     <i>
      n
     </i>
     only inputs 0. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_TDM_TOT_CHAN_NUM The total number of channels in use in I2S RX TDM mode. Total channel number in use = this value + 1. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-755-1">
   </span>
   <img src="_page_755_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   I2S_RX_EOF_NUM The bit length of RX data is (I2S_RX_BITS_MOD + 1) * (I2S_RX_EOF_NUM + 1). Once the length of received data reaches such bit length, an in_suc_eof interrupt is triggered in the configured DMA RX channel. (R/W)
  </p>
  <h4>
   Register 29.12. I2S_TX_CONF_REG (0x0024)
  </h4>
  <p>
   <span id="page-756-0">
   </span>
   <img src="_page_756_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_TX_RESET Set this bit to reset TX unit. (WT)
    </li>
    <li block-type="ListItem">
     I2S_TX_FIFO_RESET Set this bit to reset TX FIFO. (WT)
    </li>
    <li block-type="ListItem">
     I2S_TX_START Set this bit to start transmitting data. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_SLAVE_MOD Set this bit to enable slave TX mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_MONO Set this bit to enable TX unit in mono mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_CHAN_EQUAL 1: The left channel data is equal to right channel data in I2S TX mono mode or TDM mode. 0: The invalid channel data is I2S_SINGLE_DATA in I2S TX mono mode or TDM mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_BIG_ENDIAN I2S TX byte endian. 1: low address data is saved to high address. 0: low address data is saved to low address. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_UPDATE Set 1 to update I2S TX registers from APB clock domain to I2S TX clock domain. This bit will be cleared by hardware after register update is done. (R/W/SC)
    </li>
    <li block-type="ListItem">
     I2S_TX_MONO_FST_VLD 1: The first channel data is valid in I2S TX mono mode. 0: The second channel data is valid in I2S TX mono mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_PCM_CONF I2S TX compress/decompress configuration bits. 0 (atol): A-law decompress, 1 (ltoa): A-law compress, 2 (utol):
     <i>
      µ
     </i>
     -law decompress, 3 (ltou):
     <i>
      µ
     </i>
     -law compress. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_PCM_BYPASS Set this bit to bypass Compress/Decompress module for transmitted data. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_STOP_EN Set this bit to stop outputting BCK signal and WS signal when TX FIFO is empty. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_LEFT_ALIGN 1: I2S TX left alignment mode. 0: I2S TX right alignment mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_24_FILL_EN 1: Sent 32 bits in 24-bit channel data mode. (Extra bits are filled with zeros). 0: Sent 24 bits in 24-bit channel data mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_WS_IDLE_POL 0: WS remains low when sending left channel data, and remains high when sending right channel data. 1: WS remains high when sending left channel data, and remains low when sending right channel data. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_BIT_ORDER Configures whether to reverse the bit order of valid data to be sent by the I2S TX. 0: Not reverse. 1: Reverse. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_TDM_EN 1: Enable I2S TDM TX mode. 0: Disable I2S TDM TX mode. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_TX_PDM_EN 1: Enable I2S PDM TX mode. 0: Disable I2S PDM TX mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_CHAN_MOD I2S TX channel configuration bits. For more information, see Table 29.9-4. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_SIG_LOOPBACK Enable signal loop back mode with TX unit and RX unit sharing the s
     <a href="#page-743-0">
      ame WS
     </a>
     and BCK signals. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-757-0">
   </span>
   <img src="_page_757_Figure_5.jpeg"/>
  </p>
  <h4>
   Register 29.13. I2S_TX_CONF1_REG (0x002C)
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_TX_TDM_WS_WIDTH The width of tx_ws_out (WS default level) in TDM mode is (I2S_TX_TDM_WS_WIDTH + 1) * T_BCK. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_BCK_DIV_NUM Configure the divider of BCK in TX mode. Note this divider must not be configured to 1. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_BITS_MOD Set the bits to configure the valid data bit length of I2S TX channel. 7: all the valid channel data is in 8-bit mode. 15: all the valid channel data is in 16-bit mode. 23: all the valid channel data is in 24-bit mode. 31: all the valid channel data is in 32-bit mode. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_HALF_SAMPLE_BITS I2S TX half sample bits. This value x 2 is equal to the BCK cycles in one WS period. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_TDM_CHAN_BITS Configure TX bit number for each channel in TDM mode. Bit number expected = this value + 1. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_MSB_SHIFT Control the timing between WS signal and the MSB of data. 1: WS signal changes one BCK clock earlier. 0: Align at rising edge. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_BCK_NO_DLY 1: BCK is not delayed to generate rising/falling edge in master mode. 0: BCK is delayed to generate rising/falling edge in master mode. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-758-0">
   </span>
   <img src="_page_758_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   I2S_TX_CLKM_DIV_NUM Integral I2S TX clock divider value. (R/W)
  </p>
  <p block-type="Text">
   I2S_TX_CLK_ACTIVE I2S TX unit clock enable signal. (R/W)
  </p>
  <p block-type="Text">
   I2S_TX_CLK_SEL Select clock clock for I2S TX unit. 0: XTAL_CLK. 1: PLL_D2_CLK. 2: PLL_F160M_CLK. 3: I2S_MCLK_in. (R/W)
  </p>
  <p block-type="Text">
   I2S_CLK_EN Set this bit to enable clock gate. (R/W)
  </p>
  <p>
   <span id="page-758-1">
   </span>
   <img src="_page_758_Figure_6.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_TX_TDM_CHAN
     <i>
      n
     </i>
     _EN (
     <i>
      n
     </i>
     = 0  15) 1: Enable the valid data output of I2S TX TDM channel
     <i>
      n
     </i>
     . 0: Channel TX data is controlled by I2S_TX_CHAN_EQUAL and I2S_SINGLE_DATA. See Section 29.9.2.1. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_TDM_TOT_CHAN_NUM Set the total number of channels in
     <a href="#page-762-0">
     </a>
     u
     <a href="#page-762-0">
      se in I2S TX TDM m
     </a>
     ode. Total cha
     <a href="#page-741-0">
      nnel num
     </a>
     ber in use = this value +
     <a href="#page-756-0">
      1. (R/W)
     </a>
    </li>
    <li block-type="ListItem">
     I2S_TX_TDM_SKIP_MSK_EN When DMA TX buffer stores the data of (I2S_TX_TDM_TOT_CHAN_NUM + 1) channels, and only the data of the enabled channels is sent, then this bit should be set. Clear it when all the data stored in DMA TX buffer is for enabled channels. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 29.16. I2S_RX_CLKM_DIV_CONF_REG (0x0038)
  </h4>
  <p>
   <span id="page-759-0">
   </span>
   <img src="_page_759_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_RX_CLKM_DIV_Z For b &lt;= a/2, the value of I2S_RX_CLKM_DIV_Z is b. For b &gt; a/2, the value of I2S_RX_CLKM_DIV_Z is (a - b). (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_CLKM_DIV_Y For b &lt;= a/2, the value of I2S_RX_CLKM_DIV_Y is (a%b). For b &gt; a/2, the value of I2S_RX_CLKM_DIV_Y is (a%(a - b)). (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_CLKM_DIV_X For b &lt;= a/2, the value of I2S_RX_CLKM_DIV_X is floor(a/b)  1. For b &gt; a/2, the value of I2S_RX_CLKM_DIV_X is floor(a/(a - b)) - 1. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_CLKM_DIV_YN1 For b &lt;= a/2, the value of I2S_RX_CLKM_DIV_YN1 is 0. For b &gt; a/2, the value of I2S_RX_CLKM_DIV_YN1 is 1. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   "a" and "b" represent the denominator and the numerator of fractional divider, respectively. For more information, see Section 29.6.
  </p>
  <p>
   <span id="page-759-1">
   </span>
   <img src="_page_759_Figure_8.jpeg"/>
  </p>
  <h4>
   Register 29.17. I2S_RX_TIMING_REG (0x0058)
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_RX_SD_IN_DM The delay mode of I2S RX SD input signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_WS_OUT_DM The delay mode of I2S RX WS output signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_BCK_OUT_DM The delay mode of I2S RX BCK output signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_WS_IN_DM The delay mode of I2S RX WS input signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_RX_BCK_IN_DM The delay mode of I2S RX BCK input signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 29.18. I2S_TX_CLKM_DIV_CONF_REG (0x003C)
  </h4>
  <p>
   <span id="page-760-0">
   </span>
   <img src="_page_760_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_TX_CLKM_DIV_Z For b &lt;= a/2, the value of I2S_TX_CLKM_DIV_Z is b. For b &gt; a/2, the value of I2S_TX_CLKM_DIV_Z is (a - b). (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_CLKM_DIV_Y For b &lt;= a/2, the value of I2S_TX_CLKM_DIV_Y is (a%b). For b &gt; a/2, the value of I2S_TX_CLKM_DIV_Y is (a%(a - b)). (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_CLKM_DIV_X For b &lt;= a/2, the value of I2S_TX_CLKM_DIV_X is floor(a/b)  1. For b &gt; a/2, the value of I2S_TX_CLKM_DIV_X is floor(a/(a - b)) - 1. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_CLKM_DIV_YN1 For b &lt;= a/2, the value of I2S_TX_CLKM_DIV_YN1 is 0. For b &gt; a/2, the value of I2S_TX_CLKM_DIV_YN1 is 1. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   "a" and "b" represent the denominator and the numerator of fractional divider, respectively. For more information, see Section 29.6.
  </p>
  <h4>
   Register 29.19. I2S_TX_TIMING_REG (0x005C)
  </h4>
  <p>
   <span id="page-761-1">
   </span>
   <img src="_page_761_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_TX_SD_OUT_DM The delay mode of I2S TX SD output signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_SD1_OUT_DM The delay mode of I2S TX SD1 output signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_WS_OUT_DM The delay mode of I2S TX WS output signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_BCK_OUT_DM The delay mode of I2S TX BCK output signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_WS_IN_DM The delay mode of I2S TX WS input signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_TX_BCK_IN_DM The delay mode of I2S TX BCK input signal. 0: bypass. 1: delay by rising edge. 2: delay by falling edge. 3: not used. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-761-0">
   </span>
   <img src="_page_761_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   Register 29.20. I2S_LC_HUNG_CONF_REG (0x0060)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     I2S_LC_FIFO_TIMEOUT I2S_TX_HUNG_INT or I2S_RX_HUNG_INT interrupt will be triggered when FIFO hung counter is equal to this value. (R/W)
    </li>
    <li block-type="ListItem">
     I2S_LC_FIFO_TIMEOUT_SHIFT The bits are used to scale tick counter threshold. The tick counter is reset when counte
     <a href="#page-748-1">
      r value &gt;= 88000/2
     </a>
     <i>
      <sup>
       I
      </sup>
     </i>
     2
     <i>
      S
     </i>
     _
     <i>
      LC
     </i>
     _
     <i>
      F IF O
     </i>
     _
     <i>
      <a href="#page-748-1">
       T IMEOUT
      </a>
     </i>
     _
     <i>
      SHIF T
     </i>
     . (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   I2S_LC_FIFO_TIMEOUT_ENA The enable bit for FIFO timeout. (R/W)
  </p>
  <h4>
   Register 29.21. I2S_CONF_SIGLE_DATA_REG (0x0068)
  </h4>
  <p>
   <span id="page-762-0">
   </span>
   <img src="_page_762_Figure_1.jpeg"/>
  </p>
  <p>
   I2S_SINGLE_DATA The configured constant channel data to be sent out. (R/W)
  </p>
  <p>
   <img src="_page_762_Figure_3.jpeg"/>
  </p>
  <p>
   <span id="page-762-1">
   </span>
   <img src="_page_762_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   I2S_TX_IDLE 1: I2S TX unit is in idle state. 0: I2S TX unit is working. (RO)
  </p>
  <h4>
   Register 29.23. I2S_DATE_REG (0x0080)
  </h4>
  <p>
   <img src="_page_762_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   I2S_DATE Version control register. (R/W)
  </p>
  <h1>
   <span id="page-763-0">
   </span>
   Chapter 30
  </h1>
  <h1>
   <span id="page-763-3">
   </span>
   USB Serial/JTAG Controller (USB_SERIAL_JTAG)
  </h1>
  <p block-type="Text">
   The ESP32-C3 contains an USB Serial/JTAG Controller. This unit can be used to program the SoC's flash, read program output, as well as attach a debugger to the running program. All of these are possible for any computer with a USB host ('host' in the rest of this text) without any active external components.
  </p>
  <h1>
   30.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-763-1">
   </span>
   While programming and debugging an ESP32-C3 project using the UART and JTAG functionality is certainly possible, it has a few downsides. First of all, both UART and JTAG take up IO pins and as such, fewer pins are left usable for controlling external signals in software. Additionally, an external chip or adapter is needed for both UART and JTAG to interface with a host computer, which means it will be necessary to integrate these two functionalities in the form of external chips or debugging adapters.
  </p>
  <p block-type="Text">
   In order to alleviate these issues" as well as to negate the need for external devices, the ESP32-C3 contains an USB Serial/JTAG Controller, which integrates the functionality of both an USB-to-serial converter as well as those of an USB-to-JTAG adapter. As this device directly interfaces to an external USB host using only the two data lines required by USB2.0, debugging the ESP32-C3 only requires two pins to be dedicated to this functionality.
  </p>
  <h1>
   30.2 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-763-2">
     </span>
     <i>
      •
     </i>
     USB Full-speed device.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Fixed function device, hardwired for CDC-ACM (Communication Device Class  Abstract Control Model) and JTAG adapter functionality.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     2 OUT Endpoints, 3 IN Endpoints in addition to Control Endpoint 0; Up to 64-byte data payload size.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Internal PHY, so no or very few external components needed to connect to a host computer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CDC-ACM adherent serial port emulation is plug-and-play on most modern OSes.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     JTAG interface allows fast communication with CPU debug core using a compact representation of JTAG instructions.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CDC-ACM supports host controllable chip reset and entry into download mode.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   As shown in Figure 30.2-1, the USB Serial/JTAG Controller consists of an USB PHY, a USB device interface, a JTAG command processor and a response capture unit, as well as the CDC-ACM registers. The PHY and part of the device interface are clocked from a 48 MHz clock derived from the main PLL, the rest of the logic is clocked from APB_
   <a href="#page-764-2">
    CLK. T
   </a>
   he JTAG command processor is connected to the JTAG debug unit of the main processor; the CDC-ACM registers are connected to the APB bus and as such can be read from and written to by software running on the main CPU.
  </p>
  <p>
   <span id="page-764-2">
   </span>
   <img src="_page_764_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 30.2-1. USB Serial/JTAG High Level Diagram
  </p>
  <p block-type="Text">
   Note that while the USB Serial/JTAG device is a USB 2.0 device, it only supports Full-speed (12 Mbps) and not the High-speed (480 Mbps) mode the USB2.0 standard introduced.
  </p>
  <p block-type="Text">
   Figure 30.2-2 shows the internal details of the USB Serial/JTAG controller on the USB side. The USB Serial/JTAG Controller consists of an USB 2.0 Full Speed device. It contains a control endpoint, a dummy interrupt endpoint, two bulk input endpoints as well as two bulk output endpoints. Together, these form an USB C
   <a href="#page-765-3">
    omposi
   </a>
   te device, which consists of an CDC-ACM USB class device as well as a vendor-specific device implementing the JTAG interface. On the SoC side, the JTAG interface is directly connected to the RISC-V CPU's debugging interface, allowing debugging of programs running on that core. Meanwhile, the CDC-ACM device is exposed as a set of registers, allowing a program on the CPU to read and write from this. Additionally, the ROM startup code of the SoC contains code allowing the user to reprogram attached flash memory using this interface.
  </p>
  <h1>
   30.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-764-0">
   </span>
   The USB Serial/JTAG Controller interfaces with an USB host processor on one side, and the CPU debug hardware as well as the software running on the USB port on the other side.
  </p>
  <h1>
   30.3.1 CDC-ACM USB Interface Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-764-1">
   </span>
   The CDC-ACM interface adheres to the standard USB CDC-ACM class for serial port emulation. It contains a dummy interrupt endpoint (which will never send any events, as they are not implemented nor needed) and a Bulk IN as well as a Bulk OUT endpoint for the host's received and sent serial data respectively. These endpoints can handle 64-byte packets at a time, allowing for high throughput. As CDC-ACM is a standard USB device class, a host generally does not need any special installation procedures for it to function: when the USB debugging device is properly connected to a host, the operating system should show a new serial port moments later.
  </p>
  <p block-type="Text">
   The CDC-ACM interface accepts the following standard CDC-ACM control requests:
  </p>
  <p>
   <span id="page-765-3">
   </span>
   <img src="_page_765_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_765_Figure_1.jpeg"/>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Table 30.3-1. Standard CDC-ACM Control Requests
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <span id="page-765-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 30.3-1. Standard CDC-ACM Control Requests
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Command
     </td>
     <td>
      Action
     </td>
    </tr>
    <tr>
     <td>
      SEND_BREAK
     </td>
     <td>
      Accepted but ignored (dummy)
     </td>
    </tr>
    <tr>
     <td>
      SET_LINE_CODING
     </td>
     <td>
      Accepted but ignored (dummy)
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Aside from general-purpose communication, the CDC-ACM interface also can be used to reset the ESP32-C3 and optionally make it go into download mode in order to flash new firmware. This is do
   <a href="#page-765-2">
    ne by s
   </a>
   etting the RTS and DTR lines on the virtual serial port.
  </p>
  <p>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      RTS
     </td>
     <td>
      DTR
     </td>
     <td>
      Action
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      Clear download mode flag
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      Set download mode flag
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      Reset ESP32-C3
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <span id="page-765-2">
   </span>
   <span id="page-765-0">
   </span>
   Note that if the download mode flag is set when the ESP32-C3 is reset, the ESP32-C3 will reboot into download mode. When this flag is cleared and the chip is reset, the ESP32-C3 will boot from flash. For specific sequences, please refer to Section 30.4. All these functions can also be disabled by programming various eFuses, please refer to Chapter 4
   <i>
    eFuse Controller (EFUSE)
   </i>
   for more details.
  </p>
  <h1>
   30.3.2 CDC-ACM Firmware Interface Functional Description
  </h1>
  <p block-type="Text">
   As the USB Serial/JTAG Controller is connected to the internal APB bus of the ESP32-C3, the CPU can interact with it. This is mainly used to read and write data from and to the virtual serial port on the attached host.
  </p>
  <p block-type="Text">
   USB CDC-ACM serial data is sent to and received from the host in packets of 0 to 64 bytes in size. When enough CDC-ACM data has accumulated in the host, the host will send a packet to the CDC-ACM receive endpoint, and when the USB Serial/JTAG Controller has a free buffer, it will accept this packet. Conversely, the host will check periodically if the USB Serial/JTAG Controller has a packet ready to be sent to the host, and if so, receive this packet.
  </p>
  <p block-type="Text">
   Firmware can get notified of new data from the host in one of two ways. First of all, the USB_SERIAL_JTAG_SERIAL_OUT_EP_DATA_AVAIL bit will remain set to one as long as there still is unread host data in the buffer. Secondly, the availability of data will trigger the USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT interrupt as well.
  </p>
  <p block-type="Text">
   <a href="#page-776-0">
    When data is available, it can be read by firmware b
   </a>
   y repeatedly reading bytes from USB_SERIAL_JTAG_EP1_REG. The amount of bytes to read can be determined by checking the
   <a href="#page-782-0">
    USB_SERIAL_JTAG_SERIAL_OUT_EP_DATA_AVAIL
   </a>
   bit after reading each byte to see if there is more data to read. After all data is read, the USB debug device is automatically readied to receive a new data packet from
   <a href="#page-773-1">
    the host.
   </a>
  </p>
  <p block-type="Text">
   <a href="#page-776-0">
    When the firmware has data to send, it can do so
   </a>
   by putting it in the send buffer and triggering a flush, allowing the host to receive the data in a USB packet. In order to do so, there needs to be space available in the send buffer. Firmware can check this by reading USB_REG_SERIAL_IN_EP_DATA_FREE; a one in this register field indicates there is still free room in the buffer. While this is the case, firmware can fill the buffer by writing bytes to the USB_SERIAL_JTAG_EP1_REG register.
  </p>
  <p block-type="Text">
   Writing the buffer doesn't immediately trigger sendin
   <a href="#page-776-0">
    g data to the host. This does not happe
   </a>
   n until the buffer is flushed; a flush causes the entire buffer to be readied for reception by the USB host at once. A flush can be triggered in two wa
   <a href="#page-773-1">
    ys: after the 64th byte is writte
   </a>
   n to the buffer, the USB hardware will automatically flush the buffer to the host. Alternatively, firmware can trigger a flush by writing a one to USB_REG_SERIAL_WR_DONE.
  </p>
  <p block-type="Text">
   Regardless of how a flush is triggered, the send buffer will be unavailable for firmware to write into until it has been fully read by the host. As soon as this happens, the USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT
   <a href="#page-776-0">
    interrupt will be triggered, indic
   </a>
   ating the send buffer can receive another 64 bytes.
  </p>
  <h1>
   30.3.3 USB-to-JTAG Interface
  </h1>
  <p block-type="Text">
   <span id="page-766-0">
   </span>
   The USB-to-JTAG interface uses a vendor-specific class for its implementation. It consists of two endpoints, one to receive commands and one to send responses. Additionally, some less time-sensitive commands can be given as control requests.
  </p>
  <h1>
   30.3.4 JTAG Command Processor
  </h1>
  <p block-type="Text">
   <span id="page-766-1">
   </span>
   Commands from the host to the JTAG interface are interpreted by the JTAG command processor. Internally, the JTAG command processor implements a full four-wire JTAG bus, consisting of the TCK, TMS and TDI output lines to the RISC-V CPU, as well as the TDO line signalling back from the CPU to the JTAG response
  </p>
  <p block-type="Text">
   capture unit. These signals adhere to the IEEE 1149.1 JTAG standards. Additionally, there is a SRST line to reset the SoC.
  </p>
  <p block-type="Text">
   The JTAG command processor parses each received nibble (4-bit value) as a command. As USB data is received in 8-bit bytes, this means each byte contains two commands. The USB command processor will execute high-nibble first and low-nibble second. The commands are used to control the TCK, TMS, TDI, and SRST lines of the internal JTAG bus, as well as signal the JTAG response capture unit that the state of the TDO line (which is driven by the CPU debug logic) needs to be captured.
  </p>
  <p block-type="Text">
   Of this internal JTAG bus, TCK, TMS, TDI and TDO are connected directly to the JTAG debugging logic of the RISC-V CPU. SRST is connected to the reset logic of the digital circuitry in the SoC and a high level on this line will cause a digital system reset. Note that the USB Serial/JTAG Controller itself is not affected by SRST.
  </p>
  <p block-type="Text">
   A nibble can contain the following commands:
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Table 30.3-3. Commands of a Nibble
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      bit
     </td>
     <td>
      3
     </td>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
    </tr>
    <tr>
     <td>
      CMD_CLK
     </td>
     <td>
      0
     </td>
     <td>
      cap
     </td>
     <td>
      tms
     </td>
     <td>
      tdi
     </td>
    </tr>
    <tr>
     <td>
      CMD_RST
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      srst
     </td>
    </tr>
    <tr>
     <td>
      CMD_FLUSH
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 30.3-3. Commands of a Nibble
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CMD_CLK will set the TDI and TMS to the indicated values and emit one clock pulse on TCK. If the CAP bit is 1, it will also instruct the JTAG response capture unit to capture the state of the TDO line. This instruction forms the basis of JTAG communication.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CMD_RST will set the state of the SRST line to the indicated value. This can be used to reset the ESP32-C3.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CMD_FLUSH will instruct the JTAG response capture unit to flush the buffer of all bits it collected so the host is able to read them. Note that in some cases, a JTAG transaction will end in an odd number of commands and as such an odd number of nibbles. In this case, it is allowable to repeat the CMD_FLUSH to get an even number of nibbles fitting an integer number of bytes.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CMD_RSV is reserved in the current implementation. The ESP32-C3 will ignore this command when it receives it.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     CMD_REP repeats the last (non-CMD_REP) command a certain number of times. It's intended goal is to compress command streams which repeat the same CMD_CLK instruction multiple times. A command like CMD_CLK can be followed by multiple CMD_REP commands. The number of repetitions done by one CMD_REP can be expressed as
     <i>
      no
     </i>
     _
     <i>
      repetitions
     </i>
     = (
     <i>
      R
     </i>
     1
     <i>
      ×
     </i>
     2 +
     <i>
      R
     </i>
     0)
     <i>
      ×
     </i>
     (4
     <i>
      cmd
     </i>
     _
     <i>
      rep
     </i>
     _
     <i>
      count
     </i>
     ), where cmd_rep_count is how many CMD_REP instructions went directly before it. Note that the CMD_REP is only intended to repeat a CMD_CLK command. Specifically, using it on a CMD_FLUSH command may lead to an unresponsive USB device, needing an USB reset to recover.
    </li>
   </ul>
  </p>
  <h1>
   30.3.5 USB-to-JTAG Interface: CMD_REP usage example
  </h1>
  <p block-type="Text">
   <span id="page-767-0">
   </span>
   Here is a list of commands as an illustration of the use of CMD_REP. Note each command is a nibble; in this example the bytewise command stream would be 0x0D 0x5E 0xCF.
  </p>
  <p block-type="Text">
   Espressif Systems 768
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. 0x0 (CMD_CLK: cap=0, tdi=0, tms=0)
    </li>
    <li block-type="ListItem">
     2. 0xD (CMD_REP: R1=0, R0=1)
    </li>
    <li block-type="ListItem">
     3. 0x5 (CMD_CLK: cap=1, tdi=0, tms=1)
    </li>
    <li block-type="ListItem">
     4. 0xE (CMD_REP: R1=1, R0=0)
    </li>
    <li block-type="ListItem">
     5. 0xC (CMD_REP: R1=0, R0=0)
    </li>
    <li block-type="ListItem">
     6. 0xF (CMD_REP: R1=1, R0=1)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   This is what happens at every step:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. TCK is clocked with the TDI and TMS lines set to 0. No data is captured.
    </li>
    <li block-type="ListItem">
     2. TCK is clocked another (0
     <i>
      ×
     </i>
     2 + 1)
     <i>
      ×
     </i>
     (4
     <sup>
      0
     </sup>
     ) = 1 time with the same settings as step 1.
    </li>
    <li block-type="ListItem">
     3. TCK is clocked with the TDI line set to 0 and TMS set to 1. Data on the TDO line is captured.
    </li>
    <li block-type="ListItem">
     4. TCK is clocked another (1
     <i>
      ×
     </i>
     2 + 0)
     <i>
      ×
     </i>
     (4
     <sup>
      0
     </sup>
     ) = 2 times with the same settings as step 3.
    </li>
    <li block-type="ListItem">
     5. Nothing happens: (0
     <i>
      ×
     </i>
     2 + 0)
     <i>
      ×
     </i>
     (4
     <sup>
      1
     </sup>
     ) = 0. Note that this does increase cmd_rep_count for the next step.
    </li>
    <li block-type="ListItem">
     6. TCK is clocked another (1
     <i>
      ×
     </i>
     2 + 1)
     <i>
      ×
     </i>
     (4
     <sup>
      2
     </sup>
     ) = 48 times with the same settings as step 3.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   In other words: This example stream has the same net effect as command 1 twice, then repeating command 3 for 51 times.
  </p>
  <h1>
   30.3.6 USB-to-JTAG Interface: Response Capture Unit
  </h1>
  <p block-type="Text">
   <span id="page-768-0">
   </span>
   The response capture unit reads the TDO line of the internal JTAG bus and captures its value when the command parser executes a CMD_CLK with cap=1. It puts this bit into an internal shift register, and writes a byte into the USB buffer when 8 bits have been collected. Of these 8 bits, the least significant one is the one that is read from TDO the earliest.
  </p>
  <p block-type="Text">
   As soon as either 64 bytes (512 bits) have been collected or a CMD_FLUSH command is executed, the response capture unit will make the buffer available for the host to receive. Note that the interface to the USB logic is double-buffered. This way, as long as USB throughput is sufficient, the response capture unit can always receive more data: while one of the buffers is waiting to be sent to the host, the other one can receive more data. When the host has received data from its buffer and the response capture unit flushes its buffer, the two buffers change position.
  </p>
  <p block-type="Text">
   This also means that a command stream can cause at most 128 bytes of capture data to be generated (less if there are flush commands in the stream) without the host acting to receive the generated data. If more data is generated anyway, the command stream is paused and the device will not accept more commands before the generated capture data is read out.
  </p>
  <p block-type="Text">
   <span id="page-768-1">
   </span>
   Note that in general, the logic of the response capture unit tries not to send zero-byte responses: for instance, sending a series of CMD_FLUSH commands will not cause a series of zero-byte USB responses to be sent. However, in the current implementation, some zero-byte responses may be generated in extraordinary circumstances. It's recommended to ignore these responses.
  </p>
  <h1>
   30.3.7 USB-to-JTAG Interface: Control Transfer Requests
  </h1>
  <p block-type="Text">
   Aside from the command processor and the response capture unit, the USB-to-JTAG interface also understands some control requests, as documented in the table below:
  </p>
  <span id="page-769-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      understands some control requests, as documented in the table below:
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 30.3-4. USB-to-JTAG Control Requests
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      bmRequestType
     </td>
     <td>
      bRequest
     </td>
     <td>
      wValue
     </td>
     <td>
      wIndex
     </td>
     <td>
      wLength
     </td>
     <td>
      Data
     </td>
    </tr>
    <tr>
     <td>
      01000000b
     </td>
     <td>
      0 (VEND_JTAG_SETDIV)
     </td>
     <td>
      [divider]
     </td>
     <td>
      interface
     </td>
     <td>
      0
     </td>
     <td>
      None
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 30.3-4. USB-to-JTAG Control Requests
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     VEND_JTAG_SETDIV sets the divider used. This directly affects the duration of a TCK clock pulse. The TCK clock pulses are derived from APB_CLK, which is divided down using an internal divider. This control request allows the host to set this divider. Note that on startup, the divider is set to 2, meaning the TCK clock rate will generally be 40 MHz.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     VEND_JTAG_SETIO can bypass the JTAG command processor to set the internal TDI, TDO, TMS and SRST lines to given values. These values are encoded in the wValue field in the format of 11'b0, srst, trst, tck, tms, tdi.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     VEND_JTAG_GETTDO can bypass the JTAG response capture unit to read the internal TDO signal directly. This request returns one byte of data, of which the least significant bit represents the status of the TDO line.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     GET_DESCRIPTOR is a standard USB request, however it can also be used with a vendor-specific wValue of 0x2000 to get the JTAG capabilities descriptor. This returns a certain amount of bytes representing the following fixed structure, which describes the capabilities of the USB-to-JTAG adapter. This structure allows host software to automatically support future revisions of the hardware without needing an update.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The JTAG capabilities descriptor of the ESP32-C3 is as follows. Note that all 16-bit values are little-endian.
  </p>
  <span id="page-769-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Byte
     </td>
     <td>
      Value
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      JTAG protocol capabilities structure version
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      10
     </td>
     <td>
      Total length of JTAG protocol capabilities
     </td>
    </tr>
    <tr>
     <td>
      2
     </td>
     <td>
      1
     </td>
     <td>
      Type of this struct: 1 for speed capabilities struct
     </td>
    </tr>
    <tr>
     <td>
      3
     </td>
     <td>
      8
     </td>
     <td>
      Length of this speed capabilities struct
     </td>
    </tr>
    <tr>
     <td>
      4 ~ 5
     </td>
     <td>
      8000
     </td>
     <td>
      APB_CLK speed in 10 kHz increments. Note that the maximal TCK speed is half of this
     </td>
    </tr>
    <tr>
     <td>
      6 ~ 7
     </td>
     <td>
      1
     </td>
     <td>
      Minimum divisor settable by the VEND_JTAG_SETDIV request
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 30.3-5. JTAG Capabilities Descriptor
  </h4>
  <h1>
   <span id="page-769-0">
   </span>
   30.4 Recommended Operation
  </h1>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   When burning EFUSE_DIS_PAD_JTAG and EFUSE_DIS_USB_JTAG, e.g., when preparing for secure boot, the USB Serial/JTAG controller may lose connection until ESP32-C3 reboots.
  </p>
  <p block-type="Text">
   There is very litt
   <a href="#page-119-1">
    le setup needed in or
   </a>
   der
   <a href="#page-119-1">
    to use the USB Serial/
   </a>
   JTAG Device. The USB-to-JTAG hardware itself does not need any setup aside from the standard USB initialization the host operating system already does. The CDC-ACM emulation, on the host side, also is plug-and-play.
  </p>
  <p block-type="Text">
   On the firmware side, very little initialization should be needed either: the USB hardware is self-initializing and after boot-up, if a host is connected and listening on the CDC-ACM interface, data can be exchanged as described above without any specific setup aside from the firmware optionally setting up an interrupt service handler.
  </p>
  <p block-type="Text">
   One thing to note is that there may be situations where the host is either not attached or the CDC-ACM virtual port is not opened. In this case, the packets that are flushed to the host will never be picked up and the transmit buffer will never be empty. It is important to detect this and time out, as this is the only way to reliably detect that the port on the host side is closed.
  </p>
  <p block-type="Text">
   Another thing to note is that the USB device is dependent on both the PLL for the 48 MHz USB PHY clock, as well as APB_CLK. Specifically, an APB_CLK of 40 MHz or more is required for proper USB compliant operation, although the USB device will still function with most hosts with an APB_CLK as low as 10 MHz. Behaviour shown when this happens is dependent on the host USB hardware and drivers, and can include the device being unresponsive and it disappearing when first accessed.
  </p>
  <p block-type="Text">
   More specifically, the APB_CLK will be affected by clock gating the USB Serial/JTAG Controller, which may happen in Light Sleep. Additionally, the USB serial/JTAG Controller (as well as the attached RISC-V CPU) will be entirely powered down in Deep Sleep mode. If a device needs to be debugged in either of these two modes, it may be preferable to use an external JTAG debugger and serial interface instead.
  </p>
  <p block-type="Text">
   The CDC-ACM interface can also be used to reset the SoC and take it into or out of download mode. Generating the correct sequence of handshake signals can be a bit complicated: Most operating systems only allow setting or resetting DTR and RTS separately, and not in tandem. Additionally, some drivers (e.g. the standard CDC-ACM driver on Windows) do not set DTR until RTS is set and the user needs to explicitly set RTS in order to 'propagate' the DTR value. These are the recommended procedures:
  </p>
  <p block-type="Text">
   <span id="page-770-0">
   </span>
   To reset the SoC into download mode:
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Action
     </td>
     <td>
      Internal state
     </td>
     <td>
      Note
     </td>
    </tr>
    <tr>
     <td>
      Clear DTR
     </td>
     <td>
      RTS=?, DTR=0
     </td>
     <td>
      Initialize to known values
     </td>
    </tr>
    <tr>
     <td>
      Clear RTS
     </td>
     <td>
      RTS=0, DTR=0
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      Set DTR
     </td>
     <td>
      RTS=0, DTR=1
     </td>
     <td>
      Set download mode flag
     </td>
    </tr>
    <tr>
     <td>
      Clear RTS
     </td>
     <td>
      RTS=0, DTR=1
     </td>
     <td>
      Propagate DTR
     </td>
    </tr>
    <tr>
     <td>
      Set RTS
     </td>
     <td>
      RTS=1, DTR=1
     </td>
     <td>
      -
     </td>
    </tr>
    <tr>
     <td>
      Clear DTR
     </td>
     <td>
      RTS=1, DTR=0
     </td>
     <td>
      Reset SoC
     </td>
    </tr>
    <tr>
     <td>
      Set RTS
     </td>
     <td>
      RTS=1, DTR=0
     </td>
     <td>
      Propagate DTR
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 30.4-1. Reset SoC into Download Mode
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <span id="page-771-0">
   </span>
   To reset the SoC into booting from flash:
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 30.4-2. Reset SoC into Booting
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Action
     </td>
     <td>
      Internal state
     </td>
     <td>
      Note
     </td>
    </tr>
    <tr>
     <td>
      Clear DTR
     </td>
     <td>
      RTS=?, DTR=0
     </td>
     <td>
      -
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 30.4-2. Reset SoC into Booting
  </p>
  <h1>
   30.5 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-772-0">
   </span>
   The addresses in this section are relative to USB Serial/JTAG Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
      <br/>
      USB_SERIAL_JTAG_EP1_REG
     </td>
     <td>
      FIFO access for the CDC-ACM data IN and OUT
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      endpoints
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_CONF0_REG
     </td>
     <td>
      PHY hardware configuration
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_TEST_REG
     </td>
     <td>
      Registers used for debugging the PHY
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_MISC_CONF_REG
     </td>
     <td>
      Clock enable control
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_MEM_CONF_REG
     </td>
     <td>
      Memory power control
     </td>
     <td>
      0x0048
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Status Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_EP1_CONF_REG
     </td>
     <td>
      Configuration and control registers for the CDC
     </td>
     <td>
      0x0004
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      ACM FIFOs
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_JFIFO_ST_REG
     </td>
     <td>
      JTAG FIFO status and control registers
     </td>
     <td>
      0x0020
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_FRAM_NUM_REG
     </td>
     <td>
      Last received SOF frame index register
     </td>
     <td>
      0x0024
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_IN_EP0_ST_REG
     </td>
     <td>
      Control IN endpoint status information
     </td>
     <td>
      0x0028
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_IN_EP1_ST_REG
     </td>
     <td>
      CDC-ACM IN endpoint status information
     </td>
     <td>
      0x002C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_IN_EP2_ST_REG
     </td>
     <td>
      CDC-ACM interrupt IN endpoint status informa
     </td>
     <td>
      0x0030
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      tion
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_IN_EP3_ST_REG
     </td>
     <td>
      JTAG IN endpoint status information
     </td>
     <td>
      0x0034
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_OUT_EP0_ST_REG
      <br/>
      USB_SERIAL_JTAG_OUT_EP1_ST_REG
     </td>
     <td>
      Control OUT endpoint status information
      <br/>
      CDC-ACM OUT endpoint status information
     </td>
     <td>
      0x0038
      <br/>
      0x003C
     </td>
     <td>
      RO
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_OUT_EP2_ST_REG
     </td>
     <td>
      JTAG OUT endpoint status information
     </td>
     <td>
      0x0040
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_INT_RAW_REG
     </td>
     <td>
      Interrupt raw status register
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/WTC/SS
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_INT_ST_REG
     </td>
     <td>
      Interrupt status register
     </td>
     <td>
      0x000C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_INT_ENA_REG
     </td>
     <td>
      Interrupt enable status register
     </td>
     <td>
      0x0010
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      USB_SERIAL_JTAG_INT_CLR_REG
     </td>
     <td>
      Interrupt clear status register
     </td>
     <td>
      0x0014
     </td>
     <td>
      WT
     </td>
    </tr>
    <tr>
     <td>
      Version Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   30.6 Registers
  </h1>
  <p block-type="Text">
   <span id="page-773-0">
   </span>
   The addresses in this section are relative to USB Serial/JTAG Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-773-1">
   </span>
   <img src="_page_773_Figure_2.jpeg"/>
  </p>
  <p>
   <img src="_page_773_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_RDWR_BYTE Write and read byte data to/from UART Tx/Rx FIFO through this field. When USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT is set then user can write data (up to 64 bytes) into UART Tx FIFO. When USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT is set, user can check USB_SERIAL_JTAG_OUT_EP1_WR_ADDR and USB_SERIAL_JTAG_OUT_EP1_RD_ADDR to know how many data is received, then read that amount of data from UART Rx FIFO. (R/W)
  </p>
  <h4>
   Register 30.2. USB_SERIAL_JTAG_CONF0_REG (0x0018)
  </h4>
  <span id="page-774-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Register 30.2. USB_SERIAL_JTAG_CONF0_REG (0x0018)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      (reserved)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      USB_SERIAL_JTAG_USB_PAD_ENABLE
     </td>
     <td>
     </td>
     <td>
      USB_SERIAL_JTAG_DM_PULLDOWN
      <br/>
      USB_SERIAL_JTAG_PULLUP_VALUE
      <br/>
      USB_SERIAL_JTAG_DM_PULLUP
     </td>
     <td>
      USB_SERIAL_JTAG_PAD_PULL_OVERRIDE
      <br/>
      USB_SERIAL_JTAG_VREF_OVERRIDE
      <br/>
      USB_SERIAL_JTAG_DP_PULLDOWN
      <br/>
      USB_SERIAL_JTAG_DP_PULLUP
     </td>
     <td>
      USB_SERIAL_JTAG_VREFH
     </td>
     <td>
      USB_SERIAL_JTAG_VREFL
     </td>
     <th>
      USB_SERIAL_JTAG_EXCHG_PINS_OVERRIDE
      <br/>
      USB_SERIAL_JTAG_EXCHG_PINS
      <br/>
      USB_SERIAL_JTAG_PHY_SEL
     </th>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   USB_SERIAL_JTAG_PHY_SEL Select internal/external PHY. 1'b0: internal PHY, 1'b1: external PHY. (R/W)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_EXCHG_PINS_OVERRIDE Enable software control USB D+ D- exchange. (R/W)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_EXCHG_PINS USB D+ D- exchange (R/W)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_VREFL Control single-end input high threshold. 1.76 V to 2 V, step 80 mV. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_VREFH Control single-end input low threshold. 0.8 V to 1.04 V, step 80 mV. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_VREF_OVERRIDE Enable software control input threshold. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_PAD_PULL_OVERRIDE Enable software control USB D+ D- pull-up pull-down. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_DP_PULLUP Control USB D+ pull-up. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_DP_PULLDOWN Control USB D+ pull-down. (R/W)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_DM_PULLUP Control USB D- pull-up. (R/W)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_DM_PULLDOWN Control USB D- pull-down. (R/W)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_PULLUP_VALUE Control pull-up value. 0: 2.2 K; 1: 1.1 K. (R/W)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_USB_PAD_ENABLE Enable USB pad function. (R/W)
  </p>
  <p>
   <span id="page-775-0">
   </span>
   <img src="_page_775_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-775-1">
   </span>
   USB_SERIAL_JTAG_CLK_EN 1'h1: Force clock on for register. 1'h0: Support clock only when application writes registers. (R/W)
  </p>
  <p>
   <img src="_page_776_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_USB_MEM_PD Set to power down USB memory. (R/W)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_USB_MEM_CLK_EN Set to force clock-on for USB memory. (R/W)
  </p>
  <p>
   <span id="page-776-0">
   </span>
   <img src="_page_776_Figure_3.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_WR_DONE Set this bit to indicate writing byte data to UART Tx FIFO is done. This bit then stays 0 until data in UART Tx FIFO is read by the USB Host. (WT)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SERIAL_IN_EP_DATA_FREE 1'b1: Indicate UART Tx FIFO is not full and data can be written into in. After writing USB_SERIAL_JTAG_WR_DONE, this will be 1'b0 until the data is sent to the USB Host. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SERIAL_OUT_EP_DATA_AVAIL 1'b1: Indicate there is data in UART Rx FIFO. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-777-0">
   </span>
   <img src="_page_777_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_777_Figure_1.jpeg"/>
  </p>
  <p>
   <span id="page-777-1">
   </span>
   <img src="_page_777_Figure_2.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_SOF_FRAME_INDEX Frame index of received SOF frame. (RO)
  </p>
  <p>
   <img src="_page_778_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP0_STATE State of IN Endpoint 0. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP0_WR_ADDR Write data address of IN endpoint 0. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP0_RD_ADDR Read data address of IN endpoint 0. (RO)
  </p>
  <p block-type="Text">
   Register 30.10. USB_SERIAL_JTAG_IN_EP1_ST_REG (0x002C)
  </p>
  <p>
   <span id="page-778-0">
   </span>
   <img src="_page_778_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP1_STATE State of IN Endpoint 1. (RO) USB_SERIAL_JTAG_IN_EP1_WR_ADDR Write data address of IN endpoint 1. (RO) USB_SERIAL_JTAG_IN_EP1_RD_ADDR Read data address of IN endpoint 1. (RO)
  </p>
  <p>
   <span id="page-779-0">
   </span>
   <img src="_page_779_Figure_0.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP2_STATE State of IN Endpoint 2. (RO) USB_SERIAL_JTAG_IN_EP2_WR_ADDR Write data address of IN endpoint 2. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP2_RD_ADDR Read data address of IN endpoint 2. (RO)
  </p>
  <p block-type="Text">
   Register 30.12. USB_SERIAL_JTAG_IN_EP3_ST_REG (0x0034)
  </p>
  <p>
   <span id="page-779-1">
   </span>
   <img src="_page_779_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP3_STATE State of IN Endpoint 3. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP3_WR_ADDR Write data address of IN endpoint 3. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_IN_EP3_RD_ADDR Read data address of IN endpoint 3. (RO)
  </p>
  <h4>
   Register 30.13. USB_SERIAL_JTAG_OUT_EP0_ST_REG (0x0038)
  </h4>
  <p>
   <span id="page-780-0">
   </span>
   <img src="_page_780_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_OUT_EP0_STATE State of OUT Endpoint 0. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_OUT_EP0_WR_ADDR Write data address of OUT Endpoint 0. When USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT is detected, there are USB_SERIAL_JTAG_OUT_EP0_WR_ADDR - 2 bytes of data in OUT EP0. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_OUT_EP0_RD_ADDR Read data address of OUT endpoint 0. (RO)
  </p>
  <p>
   <span id="page-780-1">
   </span>
   <img src="_page_780_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   Register 30.14. USB_SERIAL_JTAG_OUT_EP1_ST_REG (0x003C)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_OUT_EP1_STATE State of OUT Endpoint 1. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP1_WR_ADDR Write data address of OUT Endpoint 1. When USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT is detected, there are USB_SERIAL_JTAG_OUT_EP1_WR_ADDR - 2 bytes of data in OUT EP1. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP1_RD_ADDR Read data address of OUT endpoint 1. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP1_REC_DATA_CNT Data count in OUT Endpoint 1 when one packet is received. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 30.15. USB_SERIAL_JTAG_OUT_EP2_ST_REG (0x0040)
  </h4>
  <p>
   <span id="page-781-0">
   </span>
   <img src="_page_781_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_OUT_EP2_STATE State of OUT Endpoint 2. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_OUT_EP2_WR_ADDR Write data address of OUT endpoint 2. When USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT is detected, there are USB_SERIAL_JTAG_OUT_EP2_WR_ADDR - 2 bytes of data in OUT EP2. (RO)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_OUT_EP2_RD_ADDR Read data address of OUT endpoint 2. (RO)
  </p>
  <h4>
   Register 30.16. USB_SERIAL_JTAG_INT_RAW_REG (0x0008)
  </h4>
  <p>
   <span id="page-782-0">
   </span>
   <img src="_page_782_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_JTAG_IN_FLUSH_INT_RAW The raw interrupt bit turns to high level when a flush command is received for IN endpoint 2 of JTAG. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SOF_INT_RAW The raw interrupt bit turns to high level when a SOF frame is received. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT_RAW The raw interrupt bit turns to high level when the Serial Port OUT Endpoint received one packet. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT_RAW The raw interrupt bit turns to high level when the Serial Port IN Endpoint is empty. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_PID_ERR_INT_RAW The raw interrupt bit turns to high level when a PID error is detected. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_CRC5_ERR_INT_RAW The raw interrupt bit turns to high level when a CRC5 error is detected. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_CRC16_ERR_INT_RAW The raw interrupt bit turns to high level when a CRC16 error is detected. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_STUFF_ERR_INT_RAW The raw interrupt bit turns to high level when a bit stuffing error is detected. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_IN_TOKEN_REC_IN_EP1_INT_RAW The raw interrupt bit turns to high level when an IN token for IN endpoint 1 is received. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_USB_BUS_RESET_INT_RAW The raw interrupt bit turns to high level when a USB bus reset is detected. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT_RAW The raw interrupt bit turns to high level when OUT endpoint 1 received packet with zero payload. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT_RAW The raw interrupt bit turns to high level when OUT endpoint 2 received packet with zero payload. (R/WTC/SS)
    </li>
   </ul>
  </p>
  <h4>
   Register 30.17. USB_SERIAL_JTAG_INT_ST_REG (0x000C)
  </h4>
  <span id="page-783-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Register 30.17. USB_SERIAL_JTAG_INT_ST_REG (0x000C)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      (reserved)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT_ST
      <br/>
      USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT_ST
     </td>
     <td>
     </td>
     <td>
      USB_SERIAL_JTAG_IN_TOKEN_REC_IN_EP1_INT_ST
      <br/>
      USB_SERIAL_JTAG_USB_BUS_RESET_INT_ST
      <br/>
      USB_SERIAL_JTAG_CRC16_ERR_INT_ST
      <br/>
      USB_SERIAL_JTAG_STUFF_ERR_INT_ST
     </td>
     <td>
     </td>
     <td>
      USB_SERIAL_JTAG_CRC5_ERR_INT_ST
     </td>
     <td>
      USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT_ST
      <br/>
      USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT_ST
      <br/>
      USB_SERIAL_JTAG_JTAG_IN_FLUSH_INT_ST
      <br/>
      USB_SERIAL_JTAG_PID_ERR_INT_ST
      <br/>
      USB_SERIAL_JTAG_SOF_INT_ST
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_JTAG_IN_FLUSH_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_JTAG_IN_FLUSH_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SOF_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_SOF_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_PID_ERR_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_PID_ERR_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_CRC5_ERR_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_CRC5_ERR_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_CRC16_ERR_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_CRC16_ERR_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_STUFF_ERR_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_STUFF_ERR_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_IN_TOKEN_REC_IN_EP1_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_IN_TOKEN_REC_IN_EP1_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_USB_BUS_RESET_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_USB_BUS_RESET_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT_ST The raw interrupt status bit for the USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT interrupt. (RO)
    </li>
   </ul>
  </p>
  <span id="page-784-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Register 30.18. USB_SERIAL_JTAG_INT_ENA_REG (0x0010)
      <br/>
      USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT_ENA
      <br/>
      USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT_ENA
      <br/>
      USB_SERIAL_JTAG_USB_BUS_RESET_INT_ENA
     </th>
     <th>
      USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT_ENA
      <br/>
      USB_SERIAL_JTAG_IN_TOKEN_REC_IN_EP1_INT_ENA
      <br/>
      USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT_ENA
      <br/>
      USB_SERIAL_JTAG_JTAG_IN_FLUSH_INT_ENA
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      USB_SERIAL_JTAG_CRC16_ERR_INT_ENA
      <br/>
      USB_SERIAL_JTAG_STUFF_ERR_INT_ENA
      <br/>
      USB_SERIAL_JTAG_CRC5_ERR_INT_ENA
      <br/>
      USB_SERIAL_JTAG_PID_ERR_INT_ENA
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      USB_SERIAL_JTAG_SOF_INT_ENA
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      (reserved)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_JTAG_IN_FLUSH_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_JTAG_IN_FLUSH_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SOF_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_SOF_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_SERIAL_OUT_RECV_PKT_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_SERIAL_IN_EMPTY_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_PID_ERR_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_PID_ERR_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_CRC5_ERR_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_CRC5_ERR_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_CRC16_ERR_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_CRC16_ERR_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_STUFF_ERR_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_STUFF_ERR_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_IN_TOKEN_REC_IN_EP1_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_IN_TOKEN_REC_IN_EP1_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_USB_BUS_RESET_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_USB_BUS_RESET_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT_ENA The interrupt enable bit for the USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT interrupt. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_785_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_CRC16_ERR_INT_CLR Set this bit to clear the USB_SERIAL_JTAG_CRC16_ERR_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_STUFF_ERR_INT_CLR Set this bit to clear the USB_SERIAL_JTAG_STUFF_ERR_INT interrupt. (WT)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_IN_TOKEN_REC_IN_EP1_INT_CLR Set this bit to clear the USB_SERIAL_JTAG_IN_TOKEN_IN_EP1_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_USB_BUS_RESET_INT_CLR Set this bit to clear the USB_SERIAL_JTAG_USB_BUS_RESET_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT_CLR Set this bit to clear the USB_SERIAL_JTAG_OUT_EP1_ZERO_PAYLOAD_INT interrupt. (WT)
    </li>
    <li block-type="ListItem">
     USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT_CLR Set this bit to clear the USB_SERIAL_JTAG_OUT_EP2_ZERO_PAYLOAD_INT interrupt. (WT)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_786_Figure_0.jpeg"/>
  </p>
  <p>
   <img src="_page_786_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   USB_SERIAL_JTAG_DATE Version control register. (R/W)
  </p>
  <h1>
   <span id="page-787-0">
   </span>
   Chapter 31
  </h1>
  <h1>
   <span id="page-787-3">
   </span>
   Two-wire Automotive Interface (TWAI)
  </h1>
  <p block-type="Text">
   The Two-wire Automotive Interface (TWAI®) is a multi-master, multi-cast communication protocol with functions such as error detection and signaling and inbuilt message priorities and arbitration. The TWAI protocol is suited for automotive and industrial applications (see Section 31.2 for more details).
  </p>
  <p block-type="Text">
   ESP32-C3 contains a TWAI controller that can be connected to the TWAI bus via an external transceiver. The TWAI controller contains numerous advanced features, and can be utilized in a wide range of use cases such as automotive products, industrial automation controls, building automati
   <a href="#page-787-2">
    on, e
   </a>
   tc.
  </p>
  <h1>
   31.1 Features
  </h1>
  <p block-type="Text">
   <span id="page-787-1">
   </span>
   The TWAI controller on ESP32-C3 supports the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Compatible with ISO 11898-1 protocol (CAN Specification 2.0)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports Standard Frame Format (11-bit ID) and Extended Frame Format (29-bit ID)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bit rates from 1 Kbit/s to 1 Mbit/s
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Multiple modes of operation
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Normal
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Listen-only (no influence on bus)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Self-test (no acknowledgment required during data transmission)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     64-byte Receive FIFO
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Special transmissions
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Single-shot transmissions (does not automatically re-transmit upon error)
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Self Reception (the TWAI controller transmits and receives messages simultaneously)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Acceptance Filter (supports single and dual filter modes)
    </li>
    <li block-type="ListItem">
     <span id="page-787-2">
     </span>
     <i>
      •
     </i>
     Error detection and handling
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Error Counters
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Configurable Error Warning Limit
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Error Code Capture
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Arbitration Lost Capture
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   31.2 Functional Protocol
  </h1>
  <h1>
   31.2.1 TWAI Properties
  </h1>
  <p block-type="Text">
   <span id="page-788-0">
   </span>
   The TWAI protocol connects two or more nodes in a bus network, and allows nodes to exchange messages in a latency bounded manner. A TWAI bus has the following properties.
  </p>
  <p block-type="Text">
   Single Channel and Non-Return-to-Zero: The bus consists of a single channel to carry bits, and thus communication is half-duplex. Synchronization is also implemented in this channel, so extra channels (e.g., clock or enable) are not required. The bit stream of a TWAI message is encoded using the Non-Return-to-Zero (NRZ) method.
  </p>
  <p block-type="Text">
   Bit Values: The single channel can either be in a dominant or recessive state, representing a logical 0 and a logical 1 respectively. A node transmitting data in a dominant state always overrides the other node transmitting data in a recessive state. The physical implementation on the bus is left to the application level to decide (e.g., differential pair or a single wire).
  </p>
  <p block-type="Text">
   Bit Stuffing: Certain fields of TWAI messages are bit-stuffed. A transmitter that transmits five consecutive bits of the same value (e.g., dominant value or recessive value) should automatically insert a complementary bit. Likewise, a receiver that receives five consecutive bits should treat the next bit as a stuffed bit. Bit stuffing is applied to the following fields: SOF, arbitration field, control field, data field, and CRC sequence (see Section 31.2.2 for more details).
  </p>
  <p block-type="Text">
   Multi-cast: All nodes receive the same bits as they are connected to the same bus. Data is consistent across all nodes unless there is a bus error (see Section 31.2.3 for more details).
  </p>
  <p block-type="Text">
   <a href="#page-788-1">
    Multi-m
   </a>
   aster: Any node can initiate a transmission. If a transmission is already ongoing, a node will wait until the current transmission is over before initiating a new transmission.
  </p>
  <p block-type="Text">
   Message Priority and Arbitration: If two or more
   <a href="#page-793-1">
    nodes
   </a>
   simultaneously initiate a transmission, the TWAI protocol ensures that one node will win arbitration of the bus. The arbitration field of the message transmitted by each node is used to determine which node will win arbitration.
  </p>
  <p block-type="Text">
   Error Detection and Signaling: Each node actively monitors the bus for errors, and signals the detected errors by transmitting an error frame.
  </p>
  <p block-type="Text">
   Fault Confinement: Each node maintains a set of error counters that are incremented/decremented according to a set of rules. When the error counters surpass a certain threshold, the node will automatically eliminate itself from the network by switching itself off.
  </p>
  <p block-type="Text">
   Configurable Bit Rate: The bit rate for a single TWAI bus is configurable. However, all nodes on the same bus must operate at the same bit rate.
  </p>
  <p block-type="Text">
   Transmitters and Receivers: At any point in time, a TWAI node can either be a transmitter or a receiver.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A node generating a message is a transmitter. The node remains a transmitter until the bus is idle or until the node loses arbitration. Please note that nodes that have not lost arbitration can all be transmitters.
    </li>
    <li block-type="ListItem">
     <span id="page-788-1">
     </span>
     <i>
      •
     </i>
     All nodes that are not transmitters are receivers.
    </li>
   </ul>
  </p>
  <h1>
   31.2.2 TWAI Messages
  </h1>
  <p block-type="Text">
   TWAI nodes use messages to transmit data, and signal errors to other nodes when detecting errors on the bus. Messages are split into various frame types, and some frame types will have different frame formats.
  </p>
  <p block-type="Text">
   The TWAI protocol has of the following frame types:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data frame
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Remote frame
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Error frame
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Overload frame
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Interframe space
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The TWAI protocol has the following frame formats:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Standard Frame Format (SFF) that uses a 11-bit identifier
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Extended Frame Format (EFF) that uses a 29-bit identifier
    </li>
   </ul>
  </p>
  <h1>
   31.2.2.1 Data Frames and Remote Frames
  </h1>
  <p block-type="Text">
   <span id="page-789-0">
   </span>
   Data frames are used by nodes to send data to other nodes, and can have a payload of 0 to 8 data bytes. Remote frames are used for nodes to request a data frame with the same identifier from other nodes, and thus they do not contain any data bytes. However, data frames and remote frames share many fields. Figure 31.2-1 illustrates the fields and sub-fields of different frames and formats.
  </p>
  <h4>
   Arbitration Field
  </h4>
  <p block-type="Text">
   When two or more nodes transmits a data or remote frame simultaneously, the arbitration field is used t
   <a href="#page-790-1">
    o
   </a>
   determine which node will win arbitration of the bus. In the arbitration field, if a node transmits a recessive bit while detects a dominant bit, this indicates that another node has overridden its recessive bit. Therefore, the node transmitting the recessive bit has lost arbitration of the bus and should immediately switch to be a receiver.
  </p>
  <p block-type="Text">
   The arbitration field primarily consists of a frame identifier that is transmitted from the most significant bit first. Given that a dominant bit represents a logical 0, and a recessive bit represents a logical 1:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A frame with the smallest ID value always wins arbitration.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Given the same ID and format, data frames always prevail over remote frames due to their RTR bits being dominant.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Given the same first 11 bits of ID, a Standard Format Data Frame always prevails over an Extended Format Data Frame due to its SRR bits being recessive.
    </li>
   </ul>
  </p>
  <h4>
   Control Field
  </h4>
  <p block-type="Text">
   The control field primarily consists of the DLC (Data Length Code) which indicates the number of payload data bytes for a data frame, or the number of requested data bytes for a remote frame. The DLC is transmitted from the most significant bit first.
  </p>
  <h4>
   Data Field
  </h4>
  <p block-type="Text">
   The data field contains the actual payload data bytes of a data frame. Remote frames do not contain any data field.
  </p>
  <p>
   <span id="page-790-1">
   </span>
   <img src="_page_790_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 31.2-1. Bit Fields in Data Frames and Remote Frames
  </p>
  <h4>
   CRC Field
  </h4>
  <p block-type="Text">
   The CRC field primarily consists of a CRC sequence. The CRC sequence is a 15-bit cyclic redundancy code calculated form the de-stuffed contents (everything from the SOF to the end of the data field) of a data or remote frame.
  </p>
  <h4>
   ACK Field
  </h4>
  <p block-type="Text">
   The ACK field primarily consists of an ACK Slot and an ACK Delim. The ACK field indicates that the receiver has received an effective message from the transmitter.
  </p>
  <span id="page-790-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Data/Remote Frames
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      SOF
     </td>
     <td>
      The SOF (Start of Frame) is a single dominant bit used to synchronize nodes
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      on the bus.
     </td>
    </tr>
    <tr>
     <td>
      Base ID
     </td>
     <td>
      The Base ID (ID.28 to ID.18) is the 11-bit identifier for SFF, or the first 11 bits of
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      the 29-bit identifier for EFF.
     </td>
    </tr>
    <tr>
     <td>
      RTR
     </td>
     <td>
      The RTR (Remote Transmission Request) bit indicates whether the message
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      is a data frame (dominant) or a remote frame (recessive). This means that a
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      remote frame will always lose arbitration to a data frame if they have the same
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 31.2-1. Data Frames and Remote Frames in SFF and EFF
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 31.2-1 - cont'd from previous page
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 31
     </th>
     <th>
      Two-wire Automotive Interface (TWAI)
      <br/>
      GoBack
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 31.2-1 – cont'd from previous page
     </td>
    </tr>
    <tr>
     <td>
      Data/Remote Frames
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      SRR
     </td>
     <td>
      The SRR (Substitute Remote Request) bit is transmitted in EFF to substitute for
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      the RTR bit at the same position in SFF.
     </td>
    </tr>
    <tr>
     <td>
      IDE
     </td>
     <td>
      The IDE (Identifier Extension) bit indicates whether the message is SFF (domi
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      nant) or EFF (recessive). This means that a SFF frame will always win arbitration
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      over an EFF frame if they have the same Base ID.
     </td>
    </tr>
    <tr>
     <td>
      Extd ID
     </td>
     <td>
      The Extended ID (ID.17 to ID.0) is the remaining 18 bits of the 29-bit identifier
      <br/>
      for EFF.
     </td>
    </tr>
    <tr>
     <td>
      r1
     </td>
     <td>
      The r1 bit (reserved bit 1) is always dominant.
     </td>
    </tr>
    <tr>
     <td>
      r0
     </td>
     <td>
      The r0 bit (reserved bit 0) is always dominant.
     </td>
    </tr>
    <tr>
     <td>
      DLC
     </td>
     <td>
      The DLC (Data Length Code) is 4-bit long and should contain any value from 0
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      to 8. Data frames use the DLC to indicate the number of data bytes in the data
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      frame. Remote frames used the DLC to indicate the number of data bytes to
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      request from another node.
     </td>
    </tr>
    <tr>
     <td>
      Data Bytes
     </td>
     <td>
      The data payload of data frames. The number of bytes should match the value
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      of DLC. Data byte 0 is transmitted first, and each data byte is transmitted from
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      the most significant bit first.
     </td>
    </tr>
    <tr>
     <td>
      CRC Sequence
     </td>
     <td>
      The CRC sequence is a 15-bit cyclic redundancy code.
     </td>
    </tr>
    <tr>
     <td>
      CRC Delim
     </td>
     <td>
      The CRC Delim (CRC Delimiter) is a single recessive bit that follows the CRC
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      sequence.
     </td>
    </tr>
    <tr>
     <td>
      ACK Slot
     </td>
     <td>
      The ACK Slot (Acknowledgment Slot) is intended for receiver nodes to indicate
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      that the data or remote frame was received without any issue. The transmitter
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      node will send a recessive bit in the ACK Slot and receiver nodes should over
      <br/>
      ride the ACK Slot with a dominant bit if the frame was received without errors.
     </td>
    </tr>
    <tr>
     <td>
      ACK Delim
     </td>
     <td>
      The ACK Delim (Acknowledgment Delimiter) is a single recessive bit.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   31.2.2.2 Error and Overload Frames
  </h1>
  <h4>
   Error Frames
  </h4>
  <p block-type="Text">
   <span id="page-791-0">
   </span>
   Error frames are transmitted when a node detects a bus error. Error frames notably consist of an Error Flag which is made up of six consecutive bits of the same value, thus violating the bit-stuffing rule. Therefore, when a particular node detects a bus error and transmits an error frame, all other nodes will then detect a stuff error and transmit their own error frames in response. This has the effect of propagating the detection of a bus error across all nodes on the bus.
  </p>
  <p block-type="Text">
   When a node detects a bus error, it will transmit an error frame starting from the next bit. However, if the type of bus error was a CRC error, then the error frame will start at the bit following the ACK Delim (see Section 31.2.3 for more details). The following Figure 31.2-2 shows different fields of an error frame:
  </p>
  <h4>
   Figure 31.2-2. Fields of an Error Frame
  </h4>
  <h4>
   Table 31.2-2. Error Frame
  </h4>
  <span id="page-792-2">
  </span>
  <span id="page-792-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 31.2-2. Error Frame
     </td>
    </tr>
    <tr>
     <td>
      Error Frame
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      Error Flag
     </td>
     <td>
      The Error Flag has two forms, the Active Error Flag consisting of 6 domi
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      nant bits and the Passive Error Flag consisting of 6 recessive bits (unless
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      overridden by dominant bits of other nodes). Active Error Flags are sent
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      by error active nodes, whilst Passive Error Flags are sent by error passive
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      nodes.
     </td>
    </tr>
    <tr>
     <td>
      Error Flag Superposition
     </td>
     <td>
      The Error Flag Superposition field meant to allow for other nodes on the
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      bus to transmit their respective Active Error Flags.
      <br/>
      The superposition
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      field can range from 0 to 6 bits, and ends when the first recessive bit is
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      detected (i.e., the first it of the Delimiter).
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Overload Frames
  </h4>
  <p block-type="Text">
   An overload frame has the same bit fields as an error frame containing an Active Error Flag. The key difference is in the cases that can trigger the transmission of an overload frame. Figure 31.2-3 below shows the bit fields of an overload frame.
  </p>
  <span id="page-792-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      Overload Frame
     </th>
     <th>
      Overload Flag
      <br/>
      <math>
       (6 \text{ bits})
      </math>
     </th>
     <th>
      Overload Flag Superposition
      <br/>
      (0 to 6 bits)
     </th>
     <th>
      Overload Delimeter
      <br/>
      <math>
       (8 \text{ bits})
      </math>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <h4>
   Figure 31.2-3. Fields of an Overload Frame
  </h4>
  <h4>
   Table 31.2-3. Overload Frame
  </h4>
  <span id="page-792-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Overload Flag
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      Overload Flag
     </td>
     <td>
      Consists of 6 dominant bits. Same as an Active Error Flag.
     </td>
    </tr>
    <tr>
     <td>
      Overload Flag Superposition
     </td>
     <td>
      Allows for the superposition of Overload Flags from other nodes, similar to an
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Error Flag Superposition.
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   Overload frames will be transmitted under the following cases:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. A receiver requires a delay of the next data or remote frame.
    </li>
    <li block-type="ListItem">
     2. A dominant bit is detected at the first and second bit of intermission.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   3. A dominant bit is detected at the eighth (last) bit of an Error Delimiter. Note that in this case, TEC and REC will not be incremented (see Section 31.2.3 for more details).
  </p>
  <p block-type="Text">
   Transmitting an overload frame due to one of the above cases must also satisfy the following rules:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The start of an overload frame due to cas
     <a href="#page-793-1">
      e 1 is o
     </a>
     nly allowed to be started at the first bit time of an expected intermission.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The start of an overload frame due to case 2 and 3 is only allowed to be started one bit after detecting the dominant bit.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A maximum of two overload frames may be generated in order to delay the transmission of the next data or remote frame.
    </li>
   </ul>
  </p>
  <h4>
   31.2.2.3 Interframe Space
  </h4>
  <p block-type="Text">
   <span id="page-793-0">
   </span>
   The Interframe Space acts as a separator between frames. Data frames and remote frames must be separated from preceding frames by an Interframe Space, regardless of the preceding frame's type (data frame, remote frame, error frame, or overload frame). However, error frames and overload frames do not need to be separated from preceding frames.
  </p>
  <p block-type="Text">
   <span id="page-793-4">
   </span>
   Figure 31.2-4 shows the fields within an Interframe Space:
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Intermission
      <br/>
      Interframe Space
      <br/>
      <math>
       (3 \text{ bits})
      </math>
     </th>
     <th>
      Suspend Transmission
      <br/>
      (8 bits, Error Passive Only)
     </th>
     <th>
      Bus Idle
      <br/>
      (N bits)
     </th>
    </tr>
   </tbody>
  </table>
  <p>
   Figure 31.2-4. The Fields within an Interframe Space
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 31.2-4. Interframe Space
     </th>
    </tr>
   </tbody>
  </table>
  <span id="page-793-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 31.2-4. Interframe Space
     </th>
    </tr>
    <tr>
     <td>
      Interframe Space
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      Intermission
     </td>
     <td>
      The Intermission consists of 3 recessive bits.
     </td>
    </tr>
    <tr>
     <td>
      Suspend Transmission
     </td>
     <td>
      An Error Passive node that has just transmitted a message must include a
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Suspend Transmission field. This field consists of 8 recessive bits. Error
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Active nodes should not include this field.
     </td>
    </tr>
    <tr>
     <td>
      Bus Idle
     </td>
     <td>
      The Bus Idle field is of arbitrary length. Bus Idle ends when an SOF is
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      transmitted. If a node has a pending transmission, the SOF should be
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   31.2.3 TWAI Errors
  </h1>
  <h4>
   <span id="page-793-1">
   </span>
   31.2.3.1 Error Types
  </h4>
  <p block-type="Text">
   Bus Errors in TWAI are categorized into the following types:
  </p>
  <h4>
   <span id="page-793-2">
   </span>
   Bit Error
  </h4>
  <p block-type="Text" class="has-continuation">
   A Bit Error occurs when a node transmits a bit value (i.e., dominant or recessive) but the opposite bit is detected (e.g., a dominant bit is transmitted but a recessive is detected). However, if the transmitted bit is
  </p>
  <p block-type="Text">
   recessive and is located in the Arbitration Field or ACK Slot or Passive Error Flag, then detecting a dominant bit will not be considered a Bit Error.
  </p>
  <h4>
   Stuff Error
  </h4>
  <p block-type="Text">
   A stuff error is detected when six consecutive bits of the same value are detected (which violats the bit-stuffing encoding rules).
  </p>
  <h4>
   CRC Error
  </h4>
  <p block-type="Text">
   A receiver of a data or remote frame will calculate CRC based on the bits it has received. A CRC error occurs when the CRC calculated by the receiver does not match the CRC sequence in the received data or remote Frame.
  </p>
  <h4>
   Format Error
  </h4>
  <p block-type="Text">
   A Format Error is detected when a format-fixed bit field of a message contains an illegal bit. For example, the r1 and r0 fields must be dominant.
  </p>
  <h4>
   ACK Error
  </h4>
  <p block-type="Text">
   An ACK Error occurs when a transmitter does not detect a dominant bit at the ACK Slot.
  </p>
  <h2>
   31.2.3.2 Error States
  </h2>
  <p block-type="Text">
   <span id="page-794-0">
   </span>
   TWAI nodes implement fault confinement by each maintaining two error counters, where the counter values determine the error state. The two error counters are known as the Transmit Error Counter (TEC) and Receive Error Counter (REC). TWAI has the following error states.
  </p>
  <h4>
   Error Active
  </h4>
  <p block-type="Text">
   An Error Active node is able to participate in bus communication and transmit an Active Error Flag when it detects an error.
  </p>
  <h4>
   Error Passive
  </h4>
  <p block-type="Text">
   An Error Passive node is able to participate in bus communication, but can only transmit an Passive Error Flag when it detects an error. Error Passive nodes that have transmitted a data or remote frame must also include the Suspend Transmission field in the subsequent Interframe Space.
  </p>
  <h4>
   Bus Off
  </h4>
  <p block-type="Text">
   A Bus Off node is not permitted to influence the bus in any way (i.e., is not allowed to transmit data).
  </p>
  <h1>
   31.2.3.3 Error Counters
  </h1>
  <p block-type="Text">
   <span id="page-794-1">
   </span>
   The TEC and REC are incremented/decremented according to the following rules. Note that more than one rule can apply to a given message transfer.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. When a receiver detects an error, the REC is increased by 1, except when the detected error was a Bit Error during the transmission of an Active Error Flag or an Overload Flag.
    </li>
    <li block-type="ListItem">
     2. When a receiver detects a dominant bit as the first bit after sending an Error Flag, the REC is increased by 8.
    </li>
    <li block-type="ListItem">
     3. When a transmitter sends an Error Flag, the TEC is increased by 8. However, the following scenarios are exempt from this rule:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       A transmitter is Error Passive since the transmitter generates an Acknowledgment Error because of not detecting a dominant bit in the ACK Slot, while detecting a dominant bit when sending a passive error flag. In this case, the TEC should not be increased.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 795
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A transmitter transmits an Error Flag due to a Stuff Error during Arbitration. If the stuffed bit should have been recessive but was monitored as dominant, then the TEC should not be increased.
    </li>
    <li block-type="ListItem">
     4. If a transmitter detects a Bit Error whilst sending an Active Error Flag or Overload Flag, the TEC is increased by 8.
    </li>
    <li block-type="ListItem">
     5. If a receiver detects a Bit Error while sending an Active Error Flag or Overload Flag, the REC is increased by 8.
    </li>
    <li block-type="ListItem">
     6. A node can tolerate up to 7 consecutive dominant bits after sending an Active/Passive Error Flag, or Overload Flag. After detecting the 14th consecutive dominant bit (when sending an Active Error Flag or Overload Flag), or the 8th consecutive dominant bit following a Passive Error Flag, a transmitter will increase its TEC by 8 and a receiver will increase its REC by 8. Every additional 8 consecutive dominant bits will also increase the TEC (for transmitters) or REC (for receivers) by 8 as well.
    </li>
    <li block-type="ListItem">
     7. When a transmitter has transmitted a message (getting ACK and no errors until the EOF is complete), the TEC is decremented by 1, unless the TEC is already at 0.
    </li>
    <li block-type="ListItem">
     8. When a receiver successfully receives a message (no errors before ACK Slot, and successful sending of ACK), the REC is decremented.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the REC is between 1 and 127, the REC will be decremented by 1.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the REC is greater than 127, the REC will be set to 127.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       If the REC is 0, the REC will remain 0.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     9. A node becomes Error Passive when its TEC and/or REC is greater than or equal to 128. Though the node becomes Error Passive, it still sends an Active Error Flag. Note that once the REC has reached to 128, any further increases to its value are invalid until the REC returns to a value less than 128.
    </li>
    <li block-type="ListItem">
     10. A node becomes Bus Off when its TEC is greater than or equal to 256.
    </li>
    <li block-type="ListItem">
     11. An Error Passive node becomes Error Active when both the TEC and REC are less than or equal to 127.
    </li>
    <li block-type="ListItem">
     12. A Bus Off node can become Error Active (with both its TEC and REC reset to 0) after it monitors 128 occurrences of 11 consecutive recessive bits on the bus.
    </li>
   </ul>
  </p>
  <h1>
   31.2.4 TWAI Bit Timing
  </h1>
  <h4>
   <span id="page-795-0">
   </span>
   31.2.4.1 Nominal Bit
  </h4>
  <p block-type="Text">
   <span id="page-795-1">
   </span>
   The TWAI protocol allows a TWAI bus to operate at a particular bit rate. However, all nodes within a TWAI bus must operate at the same bit rate.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The Nominal Bit Rate is defined as the number of bits transmitted per second.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The Nominal Bit Time is defined as 1/Nominal Bit Rate.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   A single Nominal Bit Time is divided into multiple segments, and each segment is made up of multiple Time Quanta. A Time Quantum is a minimum unit of time, and is implemented as some form of prescaled clock signal in each node. Figure 31.2-5 illustrates the segments within a single Nominal Bit Time.
  </p>
  <p block-type="Text">
   TWAI controllers will operate in time steps of one Time Quanta where the state of the TWAI bus is analyzed. If the bus states in two consecutive Time Quantas are different (i.e., recessive to dominant or vice versa), it
  </p>
  <p block-type="Text">
   <span id="page-796-2">
   </span>
   means an edge is generated. The intersection of PBS1 and PBS2 is considered the Sample Point and the sampled bus value is considered the value of that bit.
  </p>
  <p>
   <img src="_page_796_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 31.2-5. Layout of a Bit
  </p>
  <h4>
   Table 31.2-5. Segments of a Nominal Bit Time
  </h4>
  <span id="page-796-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="7">
      Table 31.2-5. Segments of a Nominal Bit Time
     </td>
    </tr>
    <tr>
     <td>
      Segment
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      SS
     </td>
     <td>
      The SS (Synchronization Segment) is 1 Time Quantum long. If all nodes are perfectly syn
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="7">
      chronized, the edge of a bit will lie in the SS.
     </td>
    </tr>
    <tr>
     <td>
      PBS1
     </td>
     <td>
      PBS1 (Phase Buffer Segment 1) can be 1 to 16 Time Quanta long. PBS1 is meant to com
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      pensate for the physical delay times within the network. PBS1 can also be lengthened for
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      synchronization purposes.
     </td>
    </tr>
    <tr>
     <td>
      PBS2
     </td>
     <td>
      PBS2 (Phase Buffer Segment 2) can be 1 to 8 Time Quanta long. PBS2 is meant to com
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   31.2.4.2 Hard Synchronization and Resynchronization
  </h1>
  <p block-type="Text">
   <span id="page-796-0">
   </span>
   Due to clock skew and jitter, the bit timing of nodes on the same bus may become out of phase. Therefore, a bit edge may come before or after the SS. To ensure that the internal bit timing clocks of each node are kept in phase, TWAI has various methods of synchronization. The Phase Error "e" is measured in the number of Time Quanta and relative to the SS.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A positive Phase Error (e &gt; 0) is when the edge lies after the SS and before the Sample Point (i.e., the edge is late).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A negative Phase Error (e &lt; 0) is when the edge lies after the Sample Point of the previous bit and before SS (i.e., the edge is early).
    </li>
   </ul>
  </p>
  <p block-type="Text">
   To correct for Phase Errors, there are two forms of synchronization, known as Hard Synchronization and Resynchronization. Hard Synchronization and Resynchronization obey the following rules:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Only one synchronization may occur in a single bit time.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Synchronizations only occurs on recessive to dominant edges.
    </li>
   </ul>
  </p>
  <h4>
   Hard Synchronization
  </h4>
  <p block-type="Text">
   Hard Synchronization occurs on the recessive to dominant (i.e., the first SOF bit after Bus Idle) edges when the bus is idle. All nodes will restart their internal bit timings so that the recessive to dominant edge lies within the SS of the restarted bit timing.
  </p>
  <h4>
   Resynchronization
  </h4>
  <p block-type="Text">
   Espressif Systems 797
  </p>
  <p block-type="Text">
   Resynchronization occurs on recessive to dominant edges when the bus is not idel. If the edge has a positive Phase Error (e &gt; 0), PBS1 is lengthened by a certain number of Time Quanta. If the edge has a negative Phase Error (e &lt; 0), PBS2 will be shortened by a certain number of Time Quanta.
  </p>
  <p block-type="Text">
   The number of Time Quanta to lengthen or shorten depends on the magnitude of the Phase Error, and is also limited by the Synchronization Jump Width (SJW) value which is programmable.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the magnitude of the Phase Error (e) is less than or equal to the SJW, PBS1/PBS2 are lengthened/shortened by the e number of Time Quanta. This has a same effect as Hard Synchronization.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the magnitude of the Phase Error is greater to the SJW, PBS1/PBS2 are lengthened/shortened by the SJW number of Time Quanta. This means it may take multiple bits of synchronization before the Phase Error is entirely corrected.
    </li>
   </ul>
  </p>
  <p>
   <span id="page-797-2">
   </span>
   <img src="_page_797_Figure_4.jpeg"/>
  </p>
  <h1>
   <span id="page-797-0">
   </span>
   31.3 Architectural Overview
  </h1>
  <p>
   Figure 31.3-1. TWAI Overview Diagram
  </p>
  <p block-type="Text">
   The major functional blocks of the TWAI controller are shown in Figure 31.3-1.
  </p>
  <h1>
   31.3.1 Registers Block
  </h1>
  <p block-type="Text">
   <span id="page-797-1">
   </span>
   The ESP32-C3 CPU accesses peripherals using 32-bit aligned words.
   <a href="#page-797-2">
    Howev
   </a>
   er, the majority of registers in the TWAI controller only contain useful data at the least significant byte (bits [7:0]). Therefore, in these registers, bits [31:8] are ignored on writes, and return 0 on reads.
  </p>
  <h4>
   Configuration Registers
  </h4>
  <p block-type="Text">
   The configuration registers store various configuration items for the TWAI controller such as bit rates, operation mode, Acceptance Filter, etc. Configuration registers can only be modified whilst the TWAI controller is in Reset Mode (See Section 31.4.1).
  </p>
  <h4>
   Command Registers
  </h4>
  <p block-type="Text">
   The command register is used by the CPU to drive the TWAI controller to initiate certain actions such as transmitting a message or
   <a href="#page-799-2">
    clearin
   </a>
   g the Receive Buffer. The command register can only be modified when the TWAI controller is in Operation Mode (see section 31.4.1).
  </p>
  <h4>
   Interrupt &amp; Status Registers
  </h4>
  <p block-type="Text">
   The interrupt register indicates what events have occurred in the TWAI controller (each event is represented by a separate bit). The status register indicates th
   <a href="#page-799-2">
    e curre
   </a>
   nt status of the TWAI controller.
  </p>
  <h4>
   Error Management Registers
  </h4>
  <p block-type="Text">
   The error management registers include error counters and capture registers. The error counter registers represent TEC and REC values. The capture registers will record information about instances where TWAI controller detects a bus error, or when it loses arbitration.
  </p>
  <h4>
   Transmit Buffer Registers
  </h4>
  <p block-type="Text">
   The transmit buffer is a 13-byte buffer used to store a TWAI message to be transmitted.
  </p>
  <h4>
   Receive Buffer Registers
  </h4>
  <p block-type="Text">
   The Receive Buffer is a 13-byte buffer which stores a single message. The Receive Buffer acts as a window of Receive FIFO, whose first message will be mapped into the Receive Buffer.
  </p>
  <p block-type="Text">
   Note that the Transmit Buffer registers, Receive Buffer registers, and the Acceptance Filter registers share the same address range (offset 0x0040 to 0x0070). Their access is governed by the following rules:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the TWAI controller is in Reset Mode, all reads and writes to the address range maps to the Acceptance Filter registers.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the TWAI controller is in Operation Mode:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       All reads to the address range maps to the Receive Buffer registers.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       All writes to the address range maps to the Transmit Buffer registers.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   31.3.2 Bit Stream Processor
  </h1>
  <p block-type="Text">
   <span id="page-798-0">
   </span>
   The Bit Stream Processing (BSP) module frames data from the Transmit Buffer (e.g. bit stuffing and additional CRC fields) and generates a bit stream for the Bit Timing Logic (BTL) module. At the same time, the BSP module is also responsible for processing the received bit stream (e.g., de-stuffing and verifying CRC) from the BTL module and placing the message into the Receive FIFO. The BSP will also detect errors on the TWAI bus and report them to the Error Management Logic (EML).
  </p>
  <h1>
   31.3.3 Error Management Logic
  </h1>
  <p block-type="Text">
   <span id="page-798-2">
   </span>
   <span id="page-798-1">
   </span>
   The Error Management Logic (EML) module updates the TEC and REC, records error information like error types and positions, and updates the error state of the TWAI controller such that the BSP module generates the correct Error Flags. Furthermore, this module also records the bit position when the TWAI controller loses arbitration.
  </p>
  <h1>
   31.3.4 Bit Timing Logic
  </h1>
  <p block-type="Text">
   The Bit Timing Logic (BTL) module transmits and receives messages at the configured bit rate. The BTL module also handles bit timing synchronization so that communication remains stable. A single bit time consists of multiple programmable segments that allows users to set the length of each segment to account for factors such as propagation delay and controller processing time, etc.
  </p>
  <h1>
   31.3.5 Acceptance Filter
  </h1>
  <p block-type="Text">
   <span id="page-799-0">
   </span>
   The Acceptance Filter is a programmable message filtering unit that allows the TWAI controller to accept or reject a received message based on the message's ID field. Only accepted messages will be stored in the Receive FIFO. The Acceptance Filter's registers can be programmed to specify a single filter, or two separate filters (dual filter mode).
  </p>
  <h1>
   31.3.6 Receive FIFO
  </h1>
  <p block-type="Text">
   <span id="page-799-1">
   </span>
   The Receive FIFO is a 64-byte buffer (inside the TWAI controller) that stores received messages accepted by the Acceptance Filter. Messages in the Receive FIFO can vary in size (between 3 to 13-bytes). When the Receive FIFO is full (or does not have enough space to store the next received message in its entirety), the Overrun Interrupt will be triggered, and any subsequent received messages will be lost until adequate space is cleared in the Receive FIFO. The first message in the Receive FIFO will be mapped to the 13-byte Receive Buffer until that message is cleared (using the Release Receive Buffer command bit). After being cleared, the Receive Buffer will map to the next message in the Receive FIFO, and the space occupied by the previous message in the Receive FIFO can be used to receive new messages.
  </p>
  <h1>
   31.4 Functional Description
  </h1>
  <h1>
   31.4.1 Modes
  </h1>
  <p block-type="Text">
   <span id="page-799-2">
   </span>
   The ESP32-C3 TWAI controller has two working modes: Reset Mode and Operation Mode. Reset Mode and Operation Mode are entered by setting or clearing the TWAI_RESET_MODE bit.
  </p>
  <h1>
   31.4.1.1 Reset Mode
  </h1>
  <p block-type="Text">
   Entering Reset Mode is required in order to modify the
   <a href="#page-813-1">
    various configuration
   </a>
   registers of the TWAI controller. When entering Reset Mode, the TWAI controller is essentially disconnected from the TWAI bus. When in Reset Mode, the TWAI controller will not be able to transmit any messages (including error signals). Any transmission in progress is immediately terminated. Likewise, the TWAI controller will not be able to receive any messages either.
  </p>
  <h2>
   31.4.1.2 Operation Mode
  </h2>
  <p block-type="Text">
   <span id="page-799-3">
   </span>
   In operation mode, the TWAI controller connects to the bus and write-protect all configuration registers to ensure consistency during operation. When in Operation Mode, the TWAI controller can transmit and receive messages (including error signaling) depending on which operation sub-mode the TWAI controller was configured with. The TWAI controller supports the following operation sub-modes:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Normal Mode: The TWAI controller can transmit and receive messages including error signals (such as error and overload Frames).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Self-test Mode: Self-test mode is similar to normal Mode, but the TWAI controller will consider the transmission of a data or RTR frame successful and do not generate an ACK error even if it was not acknowledged. This is commonly used when the TWAI controller does self-test.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Listen-only Mode: The TWAI controller will be able to receive messages, but will remain completely passive on the TWAI bus. Thus, the TWAI controller will not be able to transmit any messages, acknowledgments, or error signals. The error counters will remain frozen. This mode is useful for TWAI bus monitoring.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that when exiting Reset Mode (i.e., entering Operation Mode), the TWAI controller must wait for 11 consecutive recessive bits to occur before being able to fully connect the TWAI bus (i.e., be able to transmit or receive).
  </p>
  <h1>
   31.4.2 Bit Timing
  </h1>
  <p block-type="Text">
   <span id="page-800-0">
   </span>
   The operating bit rate of the TWAI controller must be configured whilst the TWAI controller is in Reset Mode. The bit rate is configured using TWAI_BUS_TIMING_0_REG and TWAI_BUS_TIMING_1_REG, and the two registers contain the following fields:
  </p>
  <p block-type="Text">
   The following Table 31.4-1 illustrates the bit fields of TWAI_BUS_TIMING_0_REG.
  </p>
  <h4>
   Table 31.
   <a href="#page-813-2">
    4-1. Bit Information of
   </a>
   TWAI_BU
   <a href="#page-814-0">
    S_TIMING_0_REG
   </a>
   (0x18)
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 31.4-1. Bit Information of TWAI_BUS_TIMING_0_REG (0x18)
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <span id="page-800-2">
   </span>
   Notes:
  </h4>
  <p block-type="Text">
   <i>
    •
   </i>
   BRP: The TWAI Time Quanta clock is derived from the APB clock that is usually 80 MHz. The Baud Rate Prescaler (BRP) field is used to define the prescaler according to the equation below, where t
   <i>
    T q
   </i>
   is the Time Quanta clock cycle and t
   <i>
    CLK
   </i>
   is APB clock cycle:
  </p>
  <p block-type="Text">
   t
   <i>
    T q
   </i>
   = 2 × t
   <i>
    CLK
   </i>
   × (2
   <sup>
    12
   </sup>
   × BRP.12 + 2
   <sup>
    11
   </sup>
   × BRP.11 + ... + 2
   <sup>
    1
   </sup>
   × BRP.1 + 2
   <sup>
    0
   </sup>
   × BRP.0 + 1)
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   SJW: Synchronization Jump Width (SJW) is configured in SJW.0 and SJW.1 where SJW = (2 x SJW.1 + SJW.0 + 1).
  </p>
  <p block-type="Text">
   The following Table 31.4-2 illustrates the bit fields of TWAI_BUS_TIMING_1_REG.
  </p>
  <h4>
   Table 31.4-2. Bit Information of TWAI_BUS_TIMING_1_REG (0x1c)
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Bit 31-8
     </td>
     <td>
      Bit 7
     </td>
     <td>
      Bit 6
     </td>
     <td>
      Bit 5
     </td>
     <td>
      Bit 4
     </td>
     <td>
      Bit 3
     </td>
     <td>
      Bit 2
     </td>
     <td>
      Bit 1
     </td>
     <td>
      Bit 0
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <span id="page-800-3">
   </span>
   Notes:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     PBS1: The number of Time Quanta in Phase Buffer Segment 1 is defined according to the following equation: (8 x PBS1.3 + 4 x PBS1.2 + 2 x PBS1.1 + PBS1.0 + 1).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     PBS2: The number of Time Quanta in Phase Buffer Segment 2 is defined according to the following equation: (4 x PBS2.2 + 2 x PBS2.1 + PBS2.0 + 1).
    </li>
    <li block-type="ListItem">
     <span id="page-800-1">
     </span>
     <i>
      •
     </i>
     SAM: Enables triple sampling if set to 1. This is useful for low/medium speed buses to filter spikes on the bus line.
    </li>
   </ul>
  </p>
  <h1>
   31.4.3 Interrupt Management
  </h1>
  <p block-type="Text">
   The ESP32-C3 TWAI controller provides eight interrupts, each represented by a single bit in the TWAI_INT_RAW_REG. For a particular interrupt to be triggered, the corresponding enable bit in TWAI_INT ENA_REG must be set.
  </p>
  <p block-type="Text">
   The TWAI controller provides the following interrupts:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-825-0">
      Rec
     </a>
     <a href="#page-824-0">
      eive Interru
     </a>
     pt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Transmit Interrupt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Error Warning Interrupt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Data Overrun Interrupt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Error Passive Interrupt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Arbitration Lost Interrupt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bus Error Interrupt
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bus Status Interrupt
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The TWAI controller's interrupt signal to the interrupt matrix will be asserted whenever one or more interrupt bits are set in the TWAI_INT_RAW_REG, and deasserted when all bits in TWAI_INT_RAW_REG are cleared. The majority of interrupt bits in TWAI_INT_RAW_REG are automatically cleared when the register is read, except for the Receive Interrupt which can only be cleared when all the messages are released by setting the TWAI_RELEASE_BUF
   <a href="#page-824-0">
    bit.
   </a>
  </p>
  <h1>
   31.4.3.1 Receive Interrupt (RXI)
  </h1>
  <p block-type="Text">
   <span id="page-801-0">
   </span>
   <a href="#page-821-0">
    The Receive Interrupt
   </a>
   (RXI) is asserted whenever the TWAI controller has received messages that are pending to be read from the Receive Buffer (i.e., when TWAI_RX_MESSAGE_CNT_REG &gt; 0). Pending received messages includes valid messages in the Receive FIFO and also overrun messages. The RXI will not be deasserted until all pending received messages are cleared using the TWAI_RELEASE_BUF command bit.
  </p>
  <h1>
   31.4.3.2 Transmit Interrupt (TXI)
  </h1>
  <p block-type="Text">
   <span id="page-801-1">
   </span>
   The Transmit Interrupt (TXI) is triggered whenever Transmit Buffer becomes free, indicating another message can be loaded into the Transmit Buffer to be transmitted. The Transmit Buffer becomes free under the following scenarios:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A message transmission has completed successfully, i.e., acknowledged without any errors. (Any failed messages will automatically be resent.)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A single shot transmission has completed (successfully or unsuccessfully, indicated by the TWAI_TX_COMPLETE bit).
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A message transmission was aborted using the TWAI_ABORT_TX command bit.
    </li>
   </ul>
  </p>
  <h1>
   31.4.3.3
   <a href="#page-821-1">
    Error Warnin
   </a>
   g Interrupt (EWI)
  </h1>
  <p block-type="Text">
   <span id="page-801-2">
   </span>
   The Error Warning Interrupt (EWI) is triggered whenev
   <a href="#page-821-0">
    er there is a chan
   </a>
   ge to the TWAI_ERR_ST and TWAI_BUS_OFF_ST bits of the TWAI_STATUS_REG (i.e., transition from 0 to 1 or vice versa). Thus, an EWI
  </p>
  <p block-type="Text">
   Espressif Systems 802
  </p>
  <p block-type="Text">
   could indicate one of the following events, depending on the values TWAI_ERR_ST and TWAI_BUS_OFF_ST at the moment when the EWI is triggered.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If TWAI_ERR_ST = 0 and TWAI_BUS_OFF_ST = 0:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       If the TWAI controller was in the Error Active state, it indica
       <a href="#page-821-1">
        tes both the TE
       </a>
       C a
       <a href="#page-821-1">
        nd REC have returne
       </a>
       d below the threshold value set by TWAI_ERR_WARNING_LIMIT_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <a href="#page-821-1">
        If the TWAI
       </a>
       controll
       <a href="#page-821-1">
        er was previously in t
       </a>
       he Bus Off Recovery state, it indicates that Bus Recovery has completed successfully.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If TWAI_ERR_ST = 1 and TWAI_BUS_OFF_ST
     <a href="#page-814-1">
      = 0: The TEC or REC error c
     </a>
     ounters have exceeded the threshold value set by TWAI_ERR_WARNING_LIMIT_REG.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If TWAI_ERR_ST = 1 and TWAI_BUS_OFF_ST = 1: The TWAI controller has entered the BUS_OFF state (
     <a href="#page-821-1">
      due to the TEC
     </a>
     &gt;= 256)
     <a href="#page-821-1">
      .
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If TWAI_ERR_ST = 0 and
     <a href="#page-814-1">
      TWAI_BUS_OFF_ST
     </a>
     = 1: The TWAI controller's TEC has dropped below the t
     <a href="#page-821-1">
      hreshold value s
     </a>
     et by T
     <a href="#page-821-1">
      WAI_ERR_WARNING_
     </a>
     LIMIT_REG during BUS_OFF recovery.
    </li>
   </ul>
  </p>
  <h2>
   31.4.3.4
   <a href="#page-821-1">
    Data Ove
   </a>
   rrun I
   <a href="#page-821-1">
    nterrupt (DOI)
   </a>
  </h2>
  <p block-type="Text">
   <span id="page-802-0">
   </span>
   The Data Overrun Interrupt
   <a href="#page-814-1">
   </a>
   (
   <a href="#page-814-1">
    DOI) is triggered whenever the Re
   </a>
   ceive FIFO has overrun. The DOI indicates that the Receive FIFO is full and should be cleared immediately to prevent any further overrun messages.
  </p>
  <p block-type="Text">
   The DOI is only triggered by the first message that causes the Receive FIFO to overrun (i.e., the transition from the Receive FIFO not being full to the Receive FIFO overrunning). Any subsequent overrun messages will not trigger the DOI again. The DOI could be triggered again when all received messages (valid or overrun) have been cleared.
  </p>
  <h1>
   31.4.3.5 Error Passive Interrupt (TXI)
  </h1>
  <p block-type="Text">
   <span id="page-802-1">
   </span>
   The Error Passive Interrupt (EPI) is triggered whenever the TWAI controller switches from Error Active to Error Passive, or vice versa.
  </p>
  <h1>
   31.4.3.6 Arbitration Lost Interrupt (ALI)
  </h1>
  <p block-type="Text">
   <span id="page-802-2">
   </span>
   The Arbitration Lost Interrupt (ALI) is triggered whenever the TWAI controller is attempting to transmit a message and loses arbitration. The bit position where the TWAI controller lost arbitration is automatically recorded in Arbitration Lost Capture register (TWAI_ARB LOST CAP_REG). When the ALI occurs again, the Arbitration Lost Capture register will no longer record new bit location until it is cleared (via CPU reading this register).
  </p>
  <h2>
   31.4.3.7 Bus Error Interrupt (BEI)
  </h2>
  <p block-type="Text">
   <span id="page-802-4">
   </span>
   <span id="page-802-3">
   </span>
   The Bus Error Interrupt (BEI) is triggered whenever TWAI controller detects an error on the TWAI bus. When a bus error occurs, the Bus Error type and its bit position are automatically recorded in the Error Code Capture register (TWAI_ERR_CODE_CAP_REG). When the BEI occurs again, the Error Code Capture register will no longer record new error information until it is cleared (via a read from the CPU).
  </p>
  <h4>
   31.4.3.8 Bus Status Interrupt (BSI)
  </h4>
  <p block-type="Text">
   The Bus Status Interrupt (BSI) is triggered whenever TWAI controller is switching between receive/transmit status and idle status. When a BSI occurs, the current status of TWAI controller can be measured by reading TWAI_RX_ST and TWAI_TX_ST in TWAI_STATUS_REG register.
  </p>
  <h1>
   31.4.4 Transmit and Receive Buffers
  </h1>
  <h4>
   <span id="page-803-0">
   </span>
   31.4.4.1 Overview of Buffers
  </h4>
  <span id="page-803-3">
  </span>
  <span id="page-803-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th colspan="4">
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      Table 31.4-3. Buffer Layout for Standard Frame Format and Extended Frame Format
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Standard Frame Format (SFF)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Extended Frame Format (EFF)
     </td>
    </tr>
    <tr>
     <td>
      TWAI Address
     </td>
     <td>
      Content
     </td>
     <td>
      TWAI Address
     </td>
     <td>
      Content
     </td>
    </tr>
    <tr>
     <td>
      0x40
     </td>
     <td>
      TX/RX frame information
     </td>
     <td>
      0x40
     </td>
     <td>
      TX/RX frame information
     </td>
    </tr>
    <tr>
     <td>
      0x44
     </td>
     <td>
      TX/RX identifier 1
     </td>
     <td>
      0x44
     </td>
     <td>
      TX/RX identifier 1
     </td>
    </tr>
    <tr>
     <td>
      0x48
     </td>
     <td>
      TX/RX identifier 2
     </td>
     <td>
      0x48
     </td>
     <td>
      TX/RX identifier 2
     </td>
    </tr>
    <tr>
     <td>
      0x4c
     </td>
     <td>
      TX/RX data byte 1
     </td>
     <td>
      0x4c
     </td>
     <td>
      TX/RX identifier 3
     </td>
    </tr>
    <tr>
     <td>
      0x50
     </td>
     <td>
      TX/RX data byte 2
     </td>
     <td>
      0x50
     </td>
     <td>
      TX/RX identifier 4
     </td>
    </tr>
    <tr>
     <td>
      0x54
     </td>
     <td>
      TX/RX data byte 3
     </td>
     <td>
      0x54
     </td>
     <td>
      TX/RX data byte 1
     </td>
    </tr>
    <tr>
     <td>
      0x58
     </td>
     <td>
      TX/RX data byte 4
     </td>
     <td>
      0x58
     </td>
     <td>
      TX/RX data byte 2
     </td>
    </tr>
    <tr>
     <td>
      0x5c
     </td>
     <td>
      TX/RX data byte 5
     </td>
     <td>
      0x5c
     </td>
     <td>
      TX/RX data byte 3
     </td>
    </tr>
    <tr>
     <td>
      0x60
     </td>
     <td>
      TX/RX data byte 6
     </td>
     <td>
      0x60
     </td>
     <td>
      TX/RX data byte 4
     </td>
    </tr>
    <tr>
     <td>
      0x64
     </td>
     <td>
      TX/RX data byte 7
     </td>
     <td>
      0x64
     </td>
     <td>
      TX/RX data byte 5
     </td>
    </tr>
    <tr>
     <td>
      0x68
     </td>
     <td>
      TX/RX data byte 8
     </td>
     <td>
      0x68
     </td>
     <td>
      TX/RX data byte 6
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 31.4-3. Buffer Layout for Standard Frame Format and Extended Frame Format
  </p>
  <p block-type="Text">
   Table 31.4-3 illustrates the layout of the Transmit Buffer and Receive Buffer registers. Both the Transmit and Receive Buffer registers share the same address space and are only accessible when the TWAI controller is in Operation Mode. The CPU accesses Transmit Buffer registers for write operations, and Receive Buffer regist
   <a href="#page-803-3">
    ers for
   </a>
   read operations . Both buffers share the exact same register layout and fields to represent a message (received or to be transmitted). The Transmit Buffer registers are used to configure a TWAI message to be transmitted. The CPU would write to the Transmit Buffer registers specifying the message's frame type, frame format, frame ID, and frame data (payload). Once the Transmit Buffer is configured, the CPU would then initiate the transmission by setting the TWAI_TX_REQ bit in TWAI_CMD_REG.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For a self-reception request, set the TWAI_SELF_RX_REQ bit instead.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     For a single-shot transmission, s
     <a href="#page-821-0">
      et both the
     </a>
     TWAI_TX_REQ
     <a href="#page-821-0">
      and the
     </a>
     TWAI_ABORT_TX simultaneously.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-803-2">
   </span>
   The Receive Buffer registers map the first
   <a href="#page-821-0">
    message in the Rece
   </a>
   ive FIFO. The CPU would read the Receive Buffer registers to obtain the first message's frame type, frame format, frame ID, and frame data (payload). Once the message has been read from the Recei
   <a href="#page-821-0">
    ve Buffer regist
   </a>
   ers, the
   <a href="#page-821-0">
    CPU can set the
   </a>
   TWAI_RELEASE_BUF bit in TWAI_CMD_REG to clear the Receive Buffer registers. If there are still messages in the Receive FIFO, the Receive Buffer registers will map the first message again.
  </p>
  <h4>
   31.4.4.2 Frame Information
  </h4>
  <p block-type="Text">
   The frame information is one byte long and specifies a message's frame type, frame format, and length of data. The frame information fields are shown in Table 31.4-4.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      data. The frame information fields are shown in Table 31.4-4.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 31.4-4. TX/RX Frame Information (SFF/EFF); TWAI Address 0x40
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 31.4-4. TX/RX Frame Information (SFF/EFF); TWAI Address 0x40
  </h4>
  <h4>
   <span id="page-804-1">
   </span>
   Notes:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. FF: The Frame Format (FF) bit specifies whether the message is Extended Frame Format (EFF) or Standard Frame Format (SFF). The message is EFF when FF bit is 1, and SFF when FF bit is 0.
    </li>
    <li block-type="ListItem">
     2. RTR: The Remote Transmission Request (RTR) bit specifies whether the message is a data frame or a remote frame. The message is a remote frame when the RTR bit is 1, and a data frame when the RTR bit is 0.
    </li>
    <li block-type="ListItem">
     3. X: Don't care, can be any value.
    </li>
    <li block-type="ListItem">
     4. DLC: The Data Length Code (DLC) field specifies the number of data bytes for a data frame, or the number of data bytes to request in a remote frame. TWAI data frames are limited to a maximum payload of 8 data bytes, and thus the DLC should range anywhere from 0 to 8.
    </li>
   </ul>
  </p>
  <h4>
   31.4.4.3 Frame Identifier
  </h4>
  <p block-type="Text">
   <span id="page-804-0">
   </span>
   The Frame Identifier fields is two-byte (11-bit) long if the message is SFF, and four-byte (29-bit) long if the message is EFF.
  </p>
  <p block-type="Text">
   The Frame Identifier fields for an SFF (11-bit) message is shown in Table 31.4-5 ~ 31.4-6.
  </p>
  <h4>
   Table 31.4-5. TX/RX Identifier 1 (SFF); TWAI Address 0x44
  </h4>
  <span id="page-804-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 31.4-5. TX/RX Identifier 1 (SFF); TWAI Address 0x44
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 31.4-6. TX/RX Identifier 2 (SFF); TWAI Address 0x48
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Bit 31-8
     </td>
     <td>
      Bit 7
     </td>
     <td>
      Bit 6
     </td>
     <td>
      Bit 5
     </td>
     <td>
      Bit 4
     </td>
     <td>
      Bit 3
     </td>
     <td>
      Bit 2
     </td>
     <td>
      Bit 1
     </td>
     <td>
      Bit 0
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <span id="page-804-3">
   </span>
   Notes:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Don't care. Recommended to be compatible with receive buffer (i.e., set to RTR ) in case of using the self reception functionality (or together with self-test functionality).
    </li>
    <li block-type="ListItem">
     2. Don't care. Recommended to be compatible with receive buffer (i.e., set to 0 ) in case of using the self reception functionality (or together with self-test functionality).
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The Frame Identifier fields for an EFF (29-bits) message is shown in Table 31.4-7 ~ 31.4-10.
  </p>
  <h4>
   Table 31.4-7. TX/RX Identifier 1 (EFF); TWAI Address 0x44
  </h4>
  <span id="page-805-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
      <b>
       Bit 31-8
      </b>
     </th>
     <th>
      Bit 7
     </th>
     <th>
      Bit 6
     </th>
     <th>
      Bit 5
     </th>
     <th>
      <b>
       Bit
      </b>
     </th>
     <th>
      Bit 3
     </th>
     <th>
      Bit 2
     </th>
     <th>
      Bit 1
     </th>
     <th>
      <b>
       Bit O
      </b>
     </th>
    </tr>
    <tr>
     <td>
      Reserved
     </td>
     <td>
      D.28
     </td>
     <td>
      <math>
       \sim
      </math>
      <br/>
      ` ה
      <br/>
      ، ے. ب ا
     </td>
     <td>
      26
      <br/>
      ID.26
     </td>
     <td>
      、つに
      <br/>
      <math>
       \cdot
      </math>
      <br/>
      ں ے.ں
     </td>
     <td>
      .D.24
     </td>
     <td>
      ຸດຕ
      <br/>
      ID.23
     </td>
     <td>
      <math>
       \cap
      </math>
      <br/>
      ----
     </td>
     <td>
      חו
      <br/>
      ∩1
      <br/>
      ا ے . ب
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 31.4-8. TX/RX Identifier 2 (EFF); TWAI Address 0x48
  </h4>
  <span id="page-805-3">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 31.4-8. TX/RX Identifier 2 (EFF); TWAI Address 0x48
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 31.4-9. TX/RX Identifier 3 (EFF); TWAI Address 0x4c
  </h4>
  <span id="page-805-4">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 31.4-9. TX/RX Identifier 3 (EFF); TWAI Address 0x4c
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 31.4-10. TX/RX Identifier 4 (EFF); TWAI Address 0x50
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 31.4-10. TX/RX Identifier 4 (EFF); TWAI Address 0x50
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <span id="page-805-5">
   </span>
   Notes:
  </h4>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Don't care. Recommended to be compatible with receive buffer (i.e., set to RTR ) in case of using the self reception functionality (or together with self-test functionality).
    </li>
    <li block-type="ListItem">
     2. Don't care. Recommended to be compatible with receive buffer (i.e., set to 0 ) in case of using the self reception functionality (or together with self-test functionality).
    </li>
   </ul>
  </p>
  <h4>
   31.4.4.4 Frame Data
  </h4>
  <p block-type="Text">
   <span id="page-805-0">
   </span>
   The Frame Data field contains the payloads of transmitted or received data frame, and can range from 0 to eight bytes. The number of valid bytes should be equal to the DLC. However, if the DLC is larger than eight bytes, the number of valid bytes would still be limited to eight. Remote frames do not have data payloads, so their Frame Data fields will be unused.
  </p>
  <p block-type="Text">
   For example, when transmitting a data frame with five bytes, the CPU should write five to the DLC field, and then write data to the corresponding register of the first to the fifth data field. Likewise, when the CPU receives a data frame with a DLC of five data bytes, only the first to the fifth data byte will contain valid payload data for the CPU to read.
  </p>
  <h1>
   31.4.5 Receive FIFO and Data Overruns
  </h1>
  <p block-type="Text">
   <span id="page-805-1">
   </span>
   The Receive FIFO is a 64-byte internal buffer used to store received messages in First In First Out order. A single received message can occupy between 3 to 13 bytes of space in the Receive FIFO, and their endianness is identical to the register layout of the Receive Buffer registers. The Receive Buffer registers are mapped to the bytes of the first message in the Receive FIFO.
  </p>
  <p block-type="Text">
   When the TWAI controller receives a message, it will increment the value of TWAI_RX_MESSAGE_COUNTER up to a maximum of 64. If there is adequate space in the Receive FIFO, the message contents will be written into
  </p>
  <p block-type="Text">
   the Receive FIFO. Once a message has been read from the Receive Buffer, the TWAI_RELEASE_BUF bit should be set. This will decrement TWAI_RX_MESSAGE_COUNTER and free the space occupied by the first message in the Receive FIFO. The Receive Buffer will then map to the next message in the Receive FIFO.
  </p>
  <p block-type="Text">
   A data overrun occurs when the TWAI controller receives a message, but the R
   <a href="#page-821-0">
    eceive FIFO lacks the
   </a>
   adequate free space to store the rec
   <a href="#page-823-0">
    eived message in its entirety (eith
   </a>
   er due to the message contents being larger than the free space in the Receive FIFO, or the Receive FIFO being completely full).
  </p>
  <p block-type="Text">
   When a data overrun occurs:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The free space left in the Receive FIFO is filled with the partial contents of the overrun message. If the Receive FIFO is already full, then none of the overrun message's contents will be stored.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When data in the Receive FIFO overruns for the first time, a Data Overrun Interrupt will be triggered.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Each overrun message will still increment the TWAI_RX_MESSAGE_COUNTER up to a maximum of 64.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The Receive FIFO will internally mark overrun messages as invalid. The TWAI_MISS_ST bit can be used to determine whether the message currently mapped to by the Receive Buffer is valid or overrun.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   To clear an overrun Receive FIFO, the TWAI_RELEASE_BUF
   <a href="#page-823-0">
    must be called repeated
   </a>
   ly until TWAI_RX_MESSAGE_COUNTER is 0. This has the effect of reading all valid
   <a href="#page-821-1">
    messages in the
   </a>
   Receive FIFO and clearing all overrun messages.
  </p>
  <h1>
   31.4.6
   <a href="#page-823-0">
    Acceptance F
   </a>
   ilter
  </h1>
  <p block-type="Text">
   <span id="page-806-0">
   </span>
   The Acceptance Filter allows the TWAI controller to filter out received messages based on their ID (and optionally their first data byte and frame type). Only accepted messages are passed on to the Receive FIFO. The use of Acceptance Filters allows a more lightweight operation of the TWAI controller (e.g., less use of Receive FIFO, fewer Receive Interrupts) since the TWAI Controller only need to handle a subset of messages.
  </p>
  <p block-type="Text">
   The Acceptance Filter configuration registers can only be accessed whilst the TWAI controller is in Reset Mode, since they share the same address spaces with the Transmit Buffer and Receive Buffer registers.
  </p>
  <p block-type="Text">
   The configuration registers consist of a 32-bit Acceptance Code Value and a 32-bit Acceptance Mask Value. The Acceptance Code value specifies a bit pattern which each filtered bit of the message must match in order for the message to be accepted. The Acceptance Mask Value is able to mask out certain bits of the Code value (i.e., set as "Don't Care" bits). Each filtered bit of the message must either match the acceptance code or be masked in order for the message to be accepted, as demonstrated in Figure 31.4-1.
  </p>
  <p>
   <span id="page-806-2">
   </span>
   <img src="_page_806_Figure_12.jpeg"/>
  </p>
  <p>
   Figure 31.4-1. Acceptance Filter
  </p>
  <p block-type="Text">
   <span id="page-806-1">
   </span>
   The TWAI controller Acceptance Filter allows the 32-bit Acceptance Code and Mask Values to either define a single filter (i.e., Single Filter Mode), or two filters (i.e., Dual Filter Mode). How the Acceptance Filter interprets the 32-bit code and mask values is dependent on filter mode and the format of received messages (i.e., SFF or EFF).
  </p>
  <h4>
   31.4.6.1 Single Filter Mode
  </h4>
  <p block-type="Text">
   Single Filter Mode is enabled by setting the TWAI_RX_FILTER_MODE bit to 1. This will cause the 32-bit code and mask values to define a single filter. The single filter can filter the following bits of a data or remote frame:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SFF
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The entire 11-bit ID
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RTR bit
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Data byte 1 and Data byte 2
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     EFF
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The entire 29-bit ID
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RTR bit
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p>
   <span id="page-807-1">
   </span>
   <img src="_page_807_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   The following Figure 31.4-2 illustrates how the 32-bit code and mask values will be interpreted under Single Filter Mode.
  </p>
  <p>
   Figure 31.4-2. Single Filter Mode
  </p>
  <h2>
   31.4.6.2 Dual Filter Mode
  </h2>
  <p block-type="Text">
   <span id="page-807-0">
   </span>
   Dual Filter Mode is enabled by clearing the TWAI_RX_FILTER_MODE bit to 0. This will cause the 32-bit code and mask values to define a two separate filters referred to as filter 1 or filter 2. Under Dual Filter Mode, a message will be accepted if it is accepted by one of the two filters.
  </p>
  <p block-type="Text">
   The two filters can filter the following bits o
   <a href="#page-813-1">
    f a data or remote frame:
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SFF
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       The entire 11-bit ID
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       RTR bit
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Data byte 1 (for filter 1 only)
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     EFF
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 808
  </p>
  <p block-type="Text">
   – The first 16 bits of the 29-bit ID
  </p>
  <p block-type="Text">
   <span id="page-808-2">
   </span>
   The following Figure 31.4-3 illustrates how the 32-bit code and mask values will be interpreted in Dual Filter Mode.
  </p>
  <p>
   <img src="_page_808_Figure_2.jpeg"/>
  </p>
  <p>
   Figure 31.4-3. Dual Filter Mode
  </p>
  <h1>
   31.4.7 Error Management
  </h1>
  <p block-type="Text">
   <span id="page-808-0">
   </span>
   The TWAI protocol requires that each TWAI node maintains the Transmit Error Counter (TEC) and Receive Error Counter (REC). The value of both error counters determines the current error state of the TWAI controller (i.e., Error Active, Error Passive, Bus-Off). The TWAI controller stores the TEC and REC values in TWAI_TX_ERR_CNT_REG and TWAI_RX_ERR_CNT_REG respectively, and they can be read by the CPU anytime. In addition to the error states, the TWAI controller also offers an Error Warning Limit (EWL) feature that can warn users of the occurrence of severe bus errors before the TWAI controller enters the Error Passive state.
  </p>
  <p block-type="Text">
   <span id="page-808-1">
   </span>
   <a href="#page-823-1">
    The current error state of
   </a>
   the
   <a href="#page-822-0">
    TWAI controller is indicate
   </a>
   d via a combination of the following values and status bits: TEC, REC, TWAI_ERR_ST, and TWAI_BUS_OFF_ST. Certain changes to these values and bits will also trigger interrupts, thus allowing the users to be notified of error state transitions (see section 31.4.3). The following figure 31.4-4 shows the relation between the error states, values and bits, and error state related interrupts.
  </p>
  <p>
   <span id="page-809-2">
   </span>
   <img src="_page_809_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 31.4-4. Error State Transition
  </p>
  <h1>
   31.4.7.1 Error Warning Limit
  </h1>
  <p block-type="Text">
   The Error Warning Limit (EWL) is a configurable threshold value for the TEC and REC, which will trigger an interrupt when exceeded. The EWL is intended to serve as a warning about severe TWAI bus errors, and is triggered before the TWAI controller enters the Error Passive state. The EWL is configured in TWAI_ERR_WARNING_LIMIT_REG and can only be configured whilst the TWAI controller is in Reset Mode. The TWAI_ERR_WARNING_LIMIT_REG has a default value of 96. When the values of TEC and/or REC are larger than or equal to the EWL value, the TWAI_ERR_ST bit is immediately set to 1. Likewise, when the values of both the
   <a href="#page-814-1">
    TEC and REC are smaller than the
   </a>
   EWL value, the TWAI_ERR_ST bit is immediately reset to 0. The Error Warning
   <a href="#page-814-1">
    Interrupt is triggered whenever th
   </a>
   e value of the TWAI_ERR_ST bit (or the TWAI_BUS_OFF_ST) changes.
  </p>
  <h1>
   31.4.7.2 Error Passive
  </h1>
  <p block-type="Text">
   <span id="page-809-0">
   </span>
   The TWAI controller is in the Error Passive state
   <a href="#page-821-1">
    when the TEC
   </a>
   or REC val
   <a href="#page-821-1">
    ue exceeds 127. Like
   </a>
   wise, when both the TEC and REC are less than or equal to 127, the TWAI controller enters the Error Active state. The Error Passive Interrupt is triggered whenever the TWAI controller transitions from the Error Active state to the Error Passive state or vice versa.
  </p>
  <h1>
   31.4.7.3 Bus-Off and Bus-Off Recovery
  </h1>
  <p block-type="Text">
   <span id="page-809-1">
   </span>
   The TWAI controller enters the Bus-Off state when the TEC value exceeds 255. On entering the Bus-Off state, the TWAI controller will automatically do the following:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set REC to 0
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set TEC to 127
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set the TWAI_BUS_OFF_ST bit to 1
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Enter Reset Mode
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The Error War
   <a href="#page-821-1">
    ning Interrupt is trigg
   </a>
   ered whenever the value of the TWAI_BUS_OFF_ST bit (or the TWAI_ERR_ST bit) changes.
  </p>
  <p block-type="Text">
   To return to the Error Active state, the TWAI controller must undergo Bus-Off Recovery. Bus-Off Recovery requires the TWAI controller to observe 128 occurrences of 11 con
   <a href="#page-821-1">
    secutive recessive b
   </a>
   its on the bus. To
   <a href="#page-821-1">
    initiate Bus-Off
   </a>
   Recovery (after entering the Bus-Off state), the TWAI controller should enter Operation Mode
  </p>
  <p block-type="Text">
   Espressif Systems 810
  </p>
  <p block-type="Text">
   by setting the TWAI_RESET_MODE bit to 0. The TEC tracks the progress of Bus-Off Recovery by decrementing the TEC each time when the TWAI controller observes 11 consecutive recessive bits. When Bus-Off Recovery has completed (i.e., TEC has decremented from 127 to 0), the TWAI_BUS_OFF_ST bit will automatically be reset to 0, thu
   <a href="#page-813-1">
    s triggering the Error
   </a>
   Warning Interrupt.
  </p>
  <h1>
   31.4.8 Error Code Capture
  </h1>
  <p block-type="Text">
   <span id="page-810-0">
   </span>
   The Error Code Capture (ECC) feature allows the TWAI controller to record the error type and bit position of a TWAI bus error in the form of an error code. Upon detecting a TWAI bus error, the Bus Error Interrupt is triggered and the error code is recorded in TWAI_ERR_CODE_CAP_REG. Subsequent bus errors will trigger the Bus Error Interrupt, but their error codes will not be recorded until the current error code is read from the TWAI_ERR_CODE_CAP_REG.
  </p>
  <p block-type="Text">
   The following Table 31.4-11 shows the fields of the
   <a href="#page-822-1">
    TWAI_ERR_CODE_CA
   </a>
   P_REG:
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 31.4-11. Bit Information of TWAI_ERR_CODE_CAP_REG (0x30)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Table 31.4-11. Bit Information of TWAI_ERR_CODE_CAP_REG (0x30)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   <span id="page-810-1">
   </span>
   Notes:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ERRC: The Error Code (ERRC) indicates the type of bus error: 00 for bit error, 01 for format error, 10 for stuff error, and 11 for other types of error.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DIR: The Direction (DIR) indicates whether the TWAI controller was transmitting or receiving when the bus error occurred: 0 for transmitter, 1 for receiver.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SEG: The Error Segment (SEG) indicates which segment of the TWAI message (i.e., bit position) the bus error occurred at.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The following Table 31.4-12 shows how to interpret the SEG.0 to SEG.4 bits.
  </p>
  <span id="page-810-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 31.4-12. Bit Information of Bits SEG.4 - SEG.0
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Bit SEG.4
     </td>
     <td>
      Bit SEG.3
     </td>
     <td>
      Bit SEG.2
     </td>
     <td>
      Bit SEG.1
     </td>
     <td>
      Bit SEG.0
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      start of frame
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      ID.28 ~ ID.21
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      ID.20 ~ ID.18
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      bit SRTR
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      bit IDE
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      ID.17 ~ ID.13
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      ID.12 ~ ID.5
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      ID.4 ~ ID.0
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      bit RTR
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      reserved bit 1
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      reserved bit 0
     </td>
    </tr>
    <tr>
     <td>
      0
      <br/>
      0
     </td>
     <td>
      1
      <br/>
      1
     </td>
     <td>
      0
      <br/>
      0
     </td>
     <td>
      1
      <br/>
      1
     </td>
     <td>
      1
      <br/>
      0
     </td>
     <td>
      data length code
      <br/>
      data field
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 31.4-12. Bit Information of Bits SEG.4 - SEG.0
  </p>
  <table>
   <tbody>
    <tr>
     <th colspan="5">
     </th>
    </tr>
    <tr>
     <th>
      Chapter 31
     </th>
     <th>
      Two-wire Automotive Interface (TWAI)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      Table 31.4-12 – cont'd from previous page
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Bit SEG.4
     </td>
     <td>
      Bit SEG.3
     </td>
     <td>
      Bit SEG.2
     </td>
     <td>
      Bit SEG.1
     </td>
     <td>
      Bit SEG.0
     </td>
     <td>
      Description
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      CRC delimiter
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      ACK slot
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      ACK delimiter
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      end of frame
     </td>
    </tr>
    <tr>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      0
     </td>
     <td>
      1
     </td>
     <td>
      0
     </td>
     <td>
      intermission
     </td>
    </tr>
    <tr>
     <td>
      1
      <br/>
      1
     </td>
     <td>
      0
      <br/>
      0
     </td>
     <td>
      0
      <br/>
      1
     </td>
     <td>
      0
      <br/>
      1
     </td>
     <td>
      1
      <br/>
      0
     </td>
     <td>
      active error flag
      <br/>
      passive error flag
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 31.4-12 – cont'd from previous page
  </h4>
  <p block-type="Text">
   Notes:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bit SRTR: under Standard Frame Format.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Bit IDE: Identifier Extension Bit, 0 for Standard Frame Format.
    </li>
   </ul>
  </p>
  <h1>
   31.4.9 Arbitration Lost Capture
  </h1>
  <p block-type="Text">
   <span id="page-811-0">
   </span>
   The Arbitration Lost Capture (ALC) feature allows the TWAI controller to record the bit position where it loses arbitration. When the TWAI controller loses arbitration, the bit position is recorded in TWAI_ARB LOST CAP_REG and the Arbitration Lost Interrupt is triggered.
  </p>
  <p block-type="Text">
   Subsequent losses in arbitration will trigger the Arbitration Lost Interrupt, but will not be recorded in TWAI_ARB LOST CAP_REG until the current Arbitration Lost Capture is read from the TWAI_ERR_
   <a href="#page-822-2">
    CODE_CAP_REG.
   </a>
  </p>
  <p block-type="Text">
   <a href="#page-822-2">
    Table
   </a>
   31.4-13 illustrates bits and fields of TWAI_ERR_CODE_CAP_REG whilst Figure 31.4-5 illustrates the bit positions of a TWAI message.
  </p>
  <p>
   <span id="page-811-2">
   </span>
   <img src="_page_811_Figure_9.jpeg"/>
  </p>
  <p>
   Figure 31.4-5. Positions of Arbitration Lost Bits
  </p>
  <h4>
   Table 31.4-13. Bit Information of TWAI_ARB LOST CAP_REG (0x2c)
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Bit 31-5
     </td>
     <td>
      Bit 4
     </td>
     <td>
      Bit 3
     </td>
     <td>
      Bit 2
     </td>
     <td>
      Bit 1
     </td>
     <td>
      Bit 0
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   <span id="page-811-1">
   </span>
   Notes:
  </h4>
  <p block-type="Text">
   <i>
    •
   </i>
   BITNO: Bit Number (BITNO) indicates the nth bit of a TWAI message where arbitration was lost.
  </p>
  <h1>
   31.5 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-812-0">
   </span>
   '|' here means separate line to distinguish between TWAI working modes discussed in Section 31.4.1
   <i>
    Modes
   </i>
   . The left describes the access in Operation Mode. The right belongs to Reset Mode and is marked in red. The addresses in this section are relative to Two-wire Automotive Interface base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TWAI_MODE_REG
     </td>
     <td>
      Mode Register
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_BUS_TIMING_0_REG
     </td>
     <td>
      Bus Timing Register 0
     </td>
     <td>
      0x0018
     </td>
     <td>
      RO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_BUS_TIMING_1_REG
     </td>
     <td>
      Bus Timing Register 1
     </td>
     <td>
      0x001C
     </td>
     <td>
      RO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_ERR_WARNING_LIMIT_REG
     </td>
     <td>
      Error Warning Limit Register
     </td>
     <td>
      0x0034
     </td>
     <td>
      RO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_0_REG
     </td>
     <td>
      Data Register 0
     </td>
     <td>
      0x0040
     </td>
     <td>
      WO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_1_REG
     </td>
     <td>
      Data Register 1
     </td>
     <td>
      0x0044
     </td>
     <td>
      WO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_2_REG
     </td>
     <td>
      Data Register 2
     </td>
     <td>
      0x0048
     </td>
     <td>
      WO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_3_REG
     </td>
     <td>
      Data Register 3
     </td>
     <td>
      0x004C
     </td>
     <td>
      WO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_4_REG
     </td>
     <td>
      Data Register 4
     </td>
     <td>
      0x0050
     </td>
     <td>
      WO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_5_REG
     </td>
     <td>
      Data Register 5
     </td>
     <td>
      0x0054
     </td>
     <td>
      WO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_6_REG
     </td>
     <td>
      Data Register 6
     </td>
     <td>
      0x0058
     </td>
     <td>
      WO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_7_REG
     </td>
     <td colspan="2">
      Data Register 7
      <br/>
      0x005C
     </td>
     <td>
      WO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_8_REG
     </td>
     <td>
      Data Register 8
     </td>
     <td>
      0x0060
     </td>
     <td>
      WO | RO
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_9_REG
     </td>
     <td>
      Data Register 9
     </td>
     <td>
      0x0064
     </td>
     <td>
      WO | RO
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_10_REG
      <br/>
      TWAI_DATA_11_REG
     </td>
     <td>
      Data Register 10
      <br/>
      Data Register 11
     </td>
     <td>
      0x0068
      <br/>
      0x006C
     </td>
     <td>
      WO | RO
      <br/>
      WO | RO
     </td>
    </tr>
    <tr>
     <td>
      TWAI_DATA_12_REG
     </td>
     <td>
      Data Register 12
     </td>
     <td>
      0x0070
     </td>
     <td>
      WO | RO
     </td>
    </tr>
    <tr>
     <td>
      TWAI_CLOCK_DIVIDER_REG
     </td>
     <td>
      Clock Divider Register
     </td>
     <td>
      0x007C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      Contro Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TWAI_CMD_REG
     </td>
     <td>
      Command Register
     </td>
     <td>
      0x0004
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
      Status Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TWAI_STATUS_REG
     </td>
     <td>
      Status Register
     </td>
     <td>
      0x0008
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      TWAI_ARB LOST CAP_REG
     </td>
     <td>
      Arbitration Lost Capture Register
     </td>
     <td>
      0x002C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      TWAI_ERR_CODE_CAP_REG
     </td>
     <td>
      Error Code Capture Register
     </td>
     <td>
      0x0030
     </td>
     <td colspan="2">
      RO
     </td>
    </tr>
    <tr>
     <td>
      TWAI_RX_ERR_CNT_REG
     </td>
     <td>
      Receive Error Counter Register
     </td>
     <td>
      0x0038
     </td>
     <td colspan="2">
      RO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_TX_ERR_CNT_REG
     </td>
     <td colspan="2">
      Transmit Error Counter Register
      <br/>
      0x003C
     </td>
     <td>
      RO | R/W
     </td>
    </tr>
    <tr>
     <td>
      TWAI_RX_MESSAGE_CNT_REG
     </td>
     <td>
      Receive Message Counter Register
     </td>
     <td>
      0x0074
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TWAI_INT_RAW_REG
     </td>
     <td colspan="2">
      Interrupt Register
      <br/>
      0x000C
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   31.6 Registers
  </h1>
  <p block-type="Text">
   <span id="page-813-0">
   </span>
   '|' here means separate line. The left describes the access in Operation Mode. The right belongs to Reset Mode with red color. The addresses in this section are relative to Two-wire Automotive Interface base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <img src="_page_813_Figure_2.jpeg"/>
  </p>
  <p>
   <span id="page-813-1">
   </span>
   <img src="_page_813_Figure_3.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     TWAI_RESET_MODE This bit is used to configure the operation mode of the TWAI Controller. 1: Reset mode; 0: Operation mode (R/W)
    </li>
    <li block-type="ListItem">
     TWAI_LISTEN_ONLY_MODE 1: Listen only mode. In this mode the nodes will only receive messages from the bus, without generating the acknowledge signal nor updating the RX error counter. (R/W)
    </li>
    <li block-type="ListItem">
     TWAI_SELF_TEST_MODE 1: Self test mode. In this mode the TX nodes can perform a successful transmission without receiving the acknowledge signal. This mode is often used to test a single node with the self reception request command. (R/W)
    </li>
    <li block-type="ListItem">
     TWAI_RX_FILTER_MODE This bit is used to configure the filter mode. 0: Dual filter mode; 1: Single filter mode (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-813-2">
   </span>
   <img src="_page_813_Figure_8.jpeg"/>
  </p>
  <p>
   <img src="_page_813_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_SYNC_JUMP_WIDTH Synchronization Jump Width (SJW), 1 ~ 14 Tq wide. (RO | R/W)
  </p>
  <p>
   <span id="page-814-0">
   </span>
   <img src="_page_814_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     TWAI_TIME_SEG1 The width of PBS1. (RO | R/W)
    </li>
    <li block-type="ListItem">
     TWAI_TIME_SEG2 The width of PBS2. (RO | R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   TWAI_TIME_SAMP The number of sample points. 0: the bus is sampled once; 1: the bus is sampled three times (RO | R/W)
  </p>
  <p>
   <img src="_page_814_Figure_5.jpeg"/>
  </p>
  <p>
   <span id="page-814-1">
   </span>
   <img src="_page_814_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_ERR_WARNING_LIMIT Error warning threshold. In the case when any of an error counter value exceeds the threshold, or all the error counter values are below the threshold, an error warning interrupt will be triggered (given the enable signal is valid). (RO | R/W)
  </p>
  <p>
   <span id="page-815-0">
   </span>
   <img src="_page_815_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_0 Stored the 0th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p block-type="Text">
   TWAI_ACCEPTANCE_CODE_0 Stored the 0th byte of the filter code in reset mode. (R/W)
  </p>
  <p>
   <span id="page-815-1">
   </span>
   <img src="_page_815_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_1 Stored the 1st byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p block-type="Text">
   TWAI_ACCEPTANCE_CODE_1 Stored the 1st byte of the filter code in reset mode. (R/W)
  </p>
  <p>
   <span id="page-816-0">
   </span>
   <img src="_page_816_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_2 Stored the 2nd byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p block-type="Text">
   TWAI_ACCEPTANCE_CODE_2 Stored the 2nd byte of the filter code in reset mode. (R/W)
  </p>
  <p>
   <span id="page-816-1">
   </span>
   <img src="_page_816_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_3 Stored the 3rd byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p block-type="Text">
   TWAI_ACCEPTANCE_CODE_3 Stored the 3rd byte of the filter code in reset mode. (R/W)
  </p>
  <p>
   <span id="page-817-0">
   </span>
   <img src="_page_817_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_4 Stored the 4th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p block-type="Text">
   TWAI_ACCEPTANCE_MASK_0 Stored the 0th byte of the filter code in reset mode. (R/W)
  </p>
  <p>
   <span id="page-817-1">
   </span>
   <img src="_page_817_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_5 Stored the 5th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p block-type="Text">
   TWAI_ACCEPTANCE_MASK_1 Stored the 1st byte of the filter code in reset mode. (R/W)
  </p>
  <p>
   <span id="page-818-0">
   </span>
   <img src="_page_818_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_6 Stored the 6th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p block-type="Text">
   TWAI_ACCEPTANCE_MASK_2 Stored the 2nd byte of the filter code in reset mode. (R/W)
  </p>
  <p>
   <span id="page-818-1">
   </span>
   <img src="_page_818_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_7 Stored the 7th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p block-type="Text">
   TWAI_ACCEPTANCE_MASK_3 Stored the 3rd byte of the filter code in reset mode. (R/W)
  </p>
  <p>
   <span id="page-819-0">
   </span>
   <img src="_page_819_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_8 Stored the 8th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <h4>
   Register 31.14. TWAI_DATA_9_REG (0x0064)
  </h4>
  <p>
   <span id="page-819-1">
   </span>
   <img src="_page_819_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_9 Stored the 9th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p>
   <img src="_page_819_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-819-2">
   </span>
   <img src="_page_819_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_10 Stored the 10th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p>
   <span id="page-820-0">
   </span>
   <img src="_page_820_Figure_1.jpeg"/>
  </p>
  <p>
   TWAI_TX_BYTE_11 Stored the 11th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <h4>
   Register 31.17. TWAI_DATA_12_REG (0x0070)
  </h4>
  <p>
   <span id="page-820-1">
   </span>
   <img src="_page_820_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_BYTE_12 Stored the 12th byte information of the data to be transmitted in operation mode. (WO)
  </p>
  <p>
   <span id="page-820-2">
   </span>
   <img src="_page_820_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_CD These bits are used to configure the divisor of the external CLKOUT pin. (R/W)
  </p>
  <p block-type="Text">
   TWAI_CLOCK_OFF This bit can be configured in reset mode. 1: Disable the external CLKOUT pin; 0: Enable the external CLKOUT pin (RO | R/W)
  </p>
  <h4>
   Register 31.19. TWAI_CMD_REG (0x0004)
  </h4>
  <p>
   <span id="page-821-0">
   </span>
   <img src="_page_821_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_REQ Set the bit to 1 to drive nodes to start transmission. (WO)
  </p>
  <p block-type="Text">
   TWAI_ABORT_TX Set the bit to 1 to cancel a pending transmission request. (WO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     TWAI_RELEASE_BUF Set the bit to 1 to release the RX buffer. (WO)
    </li>
    <li block-type="ListItem">
     TWAI_CLR_OVERRUN Set the bit to 1 to clear the data overrun status bit. (WO)
    </li>
    <li block-type="ListItem">
     TWAI_SELF_RX_REQ Self reception request command. Set the bit to 1 to allow a message be transmitted and received simultaneously. (WO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Register 31.20. TWAI_STATUS_REG (0x0008)
  </p>
  <p>
   <span id="page-821-1">
   </span>
   <img src="_page_821_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_RX_BUF_ST 1: The data in the RX buffer is not empty, with at least one received data packet. (RO)
  </p>
  <p block-type="Text">
   TWAI_OVERRUN_ST 1: The RX FIFO is full and data overrun has occurred. (RO)
  </p>
  <p block-type="Text">
   TWAI_TX_BUF_ST 1: The TX buffer is empty, the CPU may write a message into it. (RO)
  </p>
  <p block-type="Text">
   TWAI_TX_COMPLETE 1: The TWAI controller has successfully received a packet from the bus. (RO)
  </p>
  <p block-type="Text">
   TWAI_RX_ST 1: The TWAI Controller is receiving a message from the bus. (RO)
  </p>
  <p block-type="Text">
   TWAI_TX_ST 1: The TWAI Controller is transmitting a message to the bus. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     TWAI_ERR_ST 1: At least one of the RX/TX error counter has reached or exceeded the value set in register TWAI_ERR_WARNING_LIMIT_REG. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_BUS_OFF_ST 1: In bus-off status, the TWAI Controller is no longer involved in bus activities. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_MISS_ST This bit reflects whether the data packet in the RX FIFO is complete. 1: The current packet is missing; 0: The current packet is complete (RO)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_822_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-822-2">
   </span>
   <img src="_page_822_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_ARB_LOST_CAP This register contains information about the bit position of lost arbitration. (RO)
  </p>
  <h4>
   Register 31.22. TWAI_ERR_CODE_CAP_REG (0x0030)
  </h4>
  <p>
   <span id="page-822-1">
   </span>
   <img src="_page_822_Figure_4.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     TWAI_ECC_SEGMENT This register contains information about the location of errors, see Table 31.4- 11 for details. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_ECC_DIRECTION This register contains information about transmission direction of the node when error occurs. 1: Error occurs when receiving a message; 0: Error occurs when transm
     <a href="#page-810-1">
      itting
     </a>
     <a href="#page-810-1">
      a
     </a>
     message (RO)
    </li>
    <li block-type="ListItem">
     TWAI_ECC_TYPE This register contains information about error types: 00: bit error; 01: form error; 10: stuff error; 11: other type of error (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-822-0">
   </span>
   <img src="_page_822_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_RX_ERR_CNT The RX error counter register, reflects value changes in reception status. (RO | R/W)
  </p>
  <p>
   <span id="page-823-1">
   </span>
   <img src="_page_823_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_TX_ERR_CNT The TX error counter register, reflects value changes in transmission status. (RO | R/W)
  </p>
  <h4>
   Register 31.25. TWAI_RX_MESSAGE_CNT_REG (0x0074)
  </h4>
  <p>
   <span id="page-823-0">
   </span>
   <img src="_page_823_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_RX_MESSAGE_COUNTER This register reflects the number of messages available within the RX FIFO. (RO)
  </p>
  <p>
   <span id="page-824-0">
   </span>
   <img src="_page_824_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     TWAI_RX_INT_ST Receive interrupt. If this bit is set to 1, it indicates there are messages to be handled in the RX FIFO. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_TX_INT_ST Transmit interrupt. If this bit is set to 1, it indicates the message transmission is finished and a new transmission is able to start. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_ERR_WARN_INT_ST Error warning interrupt. If this bit is set to 1, it indicates the error status signal and the bus-off status signal of Status register have changed (e.g., switched from 0 to 1 or from 1 to 0). (RO)
    </li>
    <li block-type="ListItem">
     TWAI_OVERRUN_INT_ST Data overrun interrupt. If this bit is set to 1, it indicates a data overrun interrupt is generated in the RX FIFO. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_ERR_PASSIVE_INT_ST Error passive interrupt. If this bit is set to 1, it indicates the TWAI Controller is switched between error active status and error passive status due to the change of error counters. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_ARB_LOST_INT_ST Arbitration lost interrupt. If this bit is set to 1, it indicates an arbitration lost interrupt is generated. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_BUS_ERR_INT_ST Error interrupt. If this bit is set to 1, it indicates an error is detected on the bus. (RO)
    </li>
    <li block-type="ListItem">
     TWAI_BUS_STATE_INT_ST Bus state interrupt. If this bit is set to 1, it indicates the status of TWAI controller has changed. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 31.27. TWAI_INT ENA_REG (0x0010)
  </h4>
  <p>
   <span id="page-825-0">
   </span>
   <img src="_page_825_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   TWAI_RX_INT_ENA Set this bit to 1 to enable receive interrupt. (R/W) TWAI_TX_INT_ENA Set this bit to 1 to enable transmit interrupt. (R/W) TWAI_ERR_WARN_INT_ENA Set this bit to 1 to enable error warning interrupt. (R/W) TWAI_OVERRUN_INT_ENA Set this bit to 1 to enable data overrun interrupt. (R/W) TWAI_ERR_PASSIVE_INT_ENA Set this bit to 1 to enable error passive interrupt. (R/W) TWAI_ARB_LOST_INT_ENA Set this bit to 1 to enable arbitration lost interrupt. (R/W) TWAI_BUS_ERR_INT_ENA Set this bit to 1 to enable bus error interrupt. (R/W) TWAI_BUS_STATE_INT_ENA Set this bit to 1 to enable bus state interrupt. (R/W)
  </p>
  <h1>
   <span id="page-826-5">
   </span>
   <span id="page-826-0">
   </span>
   LED PWM Controller (LEDC)
  </h1>
  <h1>
   32.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-826-1">
   </span>
   The LED PWM Controller is a peripheral designed to generate PWM signals for LED control. It has specialized features such as automatic duty cycle fading. However, the LED PWM Controller can also be used to generate PWM signals for other purposes.
  </p>
  <h1>
   32.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-826-2">
   </span>
   The LED PWM Controller has the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Six independent PWM generators (i.e. six channels)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Four independent timers that support division by fractions
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Automatic duty cycle fading (i.e. gradual increase/decrease of a PWM's duty cycle without interference from the processor) with interrupt generation on fade completion
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Adjustable phase of PWM signal output
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     PWM signal output in low-power mode (Light-sleep mode)
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Maximum PWM resolution: 14 bits
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <span id="page-826-4">
   </span>
   Note that the four timers are identical regarding their features and operation. The following sections refer to the timers collectively as Timer
   <i>
    x
   </i>
   (where
   <i>
    x
   </i>
   ranges from 0 to 3). Likewise, the six PWM generators are also identical in features and operation, and thus are collectively referred to as PWM
   <i>
    n
   </i>
   (where
   <i>
    n
   </i>
   ranges from 0 to 5).
  </p>
  <p>
   <img src="_page_826_Figure_13.jpeg"/>
  </p>
  <p>
   <span id="page-826-3">
   </span>
   Figure 32.2-1. LED PWM Architecture
  </p>
  <h1>
   32.3 Functional Description
  </h1>
  <h1>
   32.3.1 Architecture
  </h1>
  <p block-type="Text">
   Figure 32.2-1 shows the architecture of the LED PWM Controller.
  </p>
  <p block-type="Text">
   <span id="page-827-0">
   </span>
   The four timers can be independently configured (i.e. configurable clock divider, and counter overflow value) and each internally maintains a timebase counter (i.e. a counter that counts on cycles of a reference clock). Each
   <a href="#page-826-4">
    PWM ge
   </a>
   nerator selects one of the timers and uses the timer's counter value as a reference to generate its PWM signal.
  </p>
  <p block-type="Text">
   Figure 32.3-1 illustrates the main functional blocks of the timer and the PWM generator.
  </p>
  <p>
   <span id="page-827-3">
   </span>
   <img src="_page_827_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 32.3-1. LED PWM Generator Diagram
  </p>
  <h1>
   32.3.2 Timers
  </h1>
  <p block-type="Text">
   <span id="page-827-1">
   </span>
   Each timer in LED PWM Controller internally maintains a timebase counter. Referring to Figure 32.3-1, this clock signal used by the timebase counter is named ref_pulse
   <i>
    x
   </i>
   . All timers use the same clock source LEDC_CLK
   <i>
    x
   </i>
   , which is then passed through a clock divider to generate ref_pulse
   <i>
    x
   </i>
   for the counter.
  </p>
  <h1>
   32.3.2.1 Clock Source
  </h1>
  <p block-type="Text">
   <span id="page-827-2">
   </span>
   LED PWM registers configured by software are clocked by APB_CLK. For more information about APB_CLK, see Chapter 6
   <i>
    Reset and Clock
   </i>
   . To use the LED PWM peripheral, the APB_CLK signal to the LED PWM has to be enabled. The APB_CLK signal to LED PWM can be enabled by setting the SYSTEM_LEDC_CLK_EN field in the register SYSTEM_PERIP_CLK_EN0_REG and be reset via software by setting the SYSTEM_LEDC_RST field in the regist
   <a href="#page-190-0">
    er
   </a>
   <a href="#page-190-0">
    SYSTEM_PERIP_R
   </a>
   ST_EN0_REG. For more information, please refer to Table 16.3-1 in Chapter 16
   <i>
    System Registers (SYSREG)
   </i>
   .
  </p>
  <p block-type="Text">
   Timers in th
   <a href="#page-434-0">
    e LED PWM Controller choose th
   </a>
   eir common clock source from one of
   <a href="#page-436-0">
   </a>
   t
   <a href="#page-436-0">
    he following clock sig
   </a>
   nals: APB_CLK, RC
   <a href="#page-436-0">
    _FAST_CLK and XTAL_CLK (see
   </a>
   Chapter 6
   <i>
    Reset and Clock
   </i>
   for more details
   <a href="#page-427-2">
    about
   </a>
   each clock
   <a href="#page-426-0">
    signal). The procedure for s
   </a>
   electing a clock source signal for LEDC_CLK
   <i>
    x
   </i>
   is described below:
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      <b>
       Espressif Systems
      </b>
     </th>
     <th>
      828
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     APB_CLK: Set LEDC_APB_CLK_SEL[1:0] to 1
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RC_FAST_CLK: Set LEDC_APB_CLK_SEL[1:0] to 2
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     XTAL_CLK: Set
     <a href="#page-836-0">
      LEDC_APB_CLK_SEL
     </a>
     [1:0] to 3
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The LEDC_CLK
   <i>
    x
   </i>
   signal w
   <a href="#page-836-0">
    ill then be passed thro
   </a>
   ugh the clock divider.
  </p>
  <h1>
   32.3.2.2 Clock
   <a href="#page-836-0">
    Divider Configurat
   </a>
   ion
  </h1>
  <p block-type="Text">
   <span id="page-828-0">
   </span>
   The LEDC_CLK
   <i>
    x
   </i>
   signal is passed through a clock divider to generate the ref_pulse
   <i>
    x
   </i>
   signal for the counter. The frequency of ref_pulse
   <i>
    x
   </i>
   is equal to the frequency of LEDC_CLK
   <i>
    x
   </i>
   divided by the divisor LEDC_CLK_DIV (see Figure 32.3-1).
  </p>
  <p block-type="Text">
   The divisor LEDC_CLK_DIV is a fractional value. Thus, it can be a non-integer. LEDC_CLK_DIV is configured according to the following equation.
  </p>
  <p block-type="Equation">
   <math display="block">
    LEDC\_CLK\_DIV = A + \frac{B}{256}
   </math>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      • A
     </i>
     corresponds to the most significant 10 bits of LEDC_CLK_DIV_TIMER
     <i>
      x
     </i>
     (i.e. LEDC_TIMER
     <i>
      x
     </i>
     _CONF_REG[21:12])
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The fractional part
     <i>
      B
     </i>
     corresponds to the least significant 8 bits of LEDC_CLK_DIV_TIMER
     <i>
      x
     </i>
     (i.e. LEDC_TIMER
     <i>
      x
     </i>
     _CONF_REG[11:4])
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When
   <a href="#page-838-0">
    the fractional part
   </a>
   <i>
    B
   </i>
   is zero, LEDC_CLK_DIV is equivalent to an integer divisor (i.e. an integer prescaler). In other words, a ref_pulse
   <i>
    x
   </i>
   clock pulse is generated after every
   <i>
    A
   </i>
   num
   <a href="#page-838-0">
    ber of LEDC_CLK
   </a>
   <i>
    x
   </i>
   clock pulses.
  </p>
  <p block-type="Text">
   However, when
   <i>
    B
   </i>
   <a href="#page-838-0">
    is nonzero, LEDC_C
   </a>
   LK_DIV becomes a non-integer divisor. The clock divider implements non-integer frequency division by alternating between
   <i>
    A
   </i>
   and (
   <i>
    A
   </i>
   +1) LEDC_CLK
   <i>
    x
   </i>
   clock pulses per ref_pulse
   <i>
    x
   </i>
   clock pulse. This will result in the average frequency of ref_pulse
   <i>
    x
   </i>
   clock pulse being the desired frequency (i.e. the non-integer divided frequency). For every 256 ref_pulse
   <i>
    x
   </i>
   clock pulses:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A number of
     <i>
      B
     </i>
     ref_pulse
     <i>
      x
     </i>
     clock pulses will consist of (
     <i>
      A
     </i>
     +1) LEDC_CLK
     <i>
      x
     </i>
     clock pulses
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     A number of (256-
     <i>
      B
     </i>
     ) ref_pulse
     <i>
      x
     </i>
     clock pulses will consist of
     <i>
      A
     </i>
     LEDC_CLK
     <i>
      x
     </i>
     clock pulses
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The ref_pulse
     <i>
      x
     </i>
     clock pulses consisting of (
     <i>
      A
     </i>
     +1) pulses are evenly distributed amongst those consisting of
     <i>
      A
     </i>
     pulses
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Figure 32.3-2 illustrates the relation between LEDC_CLK
   <i>
    x
   </i>
   clock pulses and ref_pulse
   <i>
    x
   </i>
   clock pulses when dividing by a non-integer LEDC_CLK_DIV .
  </p>
  <p>
   <span id="page-828-1">
   </span>
   <img src="_page_828_Figure_16.jpeg"/>
  </p>
  <p>
   Figure 32.3-2. Frequency Division When LEDC_CLK_DIV is a Non-Integer Value
  </p>
  <p block-type="Text">
   To change the timer's clock divisor at runtime, first configure the LEDC_CLK_DIV_TIMER
   <i>
    x
   </i>
   field, and then set the LEDC_TIMER
   <i>
    x
   </i>
   _PARA_UP field to apply the new configuration. This will cause the newly configured values to take effect upon the next overflow of the counter. The LEDC_TIMER
   <i>
    x
   </i>
   _PARA_UP field will be automatically cleared by hardware.
  </p>
  <h1>
   32.3.2.3 14-bit Counter
  </h1>
  <p block-type="Text">
   <span id="page-829-0">
   </span>
   Each timer contains a 14-bit timebase counter that uses ref_pulse
   <i>
    x
   </i>
   as its reference clock (see Figure 32.3-1). The LEDC_TIMER
   <i>
    x
   </i>
   _DUTY_RES field configures the overflow value of this 14-bit counter. Hence, the maximum resolution of the PWM signal is 14 bits. The counter counts up to 2
   <i>
    LEDC
   </i>
   _
   <i>
    T IMERx
   </i>
   _
   <i>
    DUT Y
   </i>
   _
   <i>
    RES −
   </i>
   1, overflows and begins counting from 0 again. The counter's value can be read, reset, and suspended by softwa
   <a href="#page-827-3">
    re.
   </a>
  </p>
  <p block-type="Text">
   The
   <a href="#page-838-0">
    counter can trigger
   </a>
   LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT interrupt (generated automatically by hardware without configuration) every time the counter overflows. It can also be co
   <a href="#page-838-0">
    nfigured to trigger
   </a>
   LEDC_OVF_CNT_CH
   <i>
    n
   </i>
   _INT interrupt after the counter overflows
   <i>
    LEDC
   </i>
   _
   <i>
    OV F
   </i>
   _
   <i>
    NUM
   </i>
   _
   <i>
    CHn
   </i>
   + 1 times. To configure LEDC_OVF_CNT_CH
   <i>
    n
   </i>
   _INT
   <a href="#page-832-0">
    interrupt, please:
   </a>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure LEDC_TIMER_SEL_CH
     <i>
      n
     </i>
     as the counter for the PWM generator
    </li>
    <li block-type="ListItem">
     2.
     <a href="#page-832-0">
      Enable the counter b
     </a>
     y setting
     <a href="#page-835-1">
      LEDC_OVF_CNT_EN_CH
     </a>
     <i>
      n
     </i>
    </li>
    <li block-type="ListItem">
     3. Set LEDC
     <a href="#page-835-1">
      _OVF_NUM_CH
     </a>
     <i>
      n
     </i>
     to the number of counter overflows to generate an interrupt, minus 1
    </li>
    <li block-type="ListItem">
     4. Enable the overflow interrupt by setting
     <a href="#page-835-1">
      LEDC_OVF_CNT_
     </a>
     CH
     <i>
      n
     </i>
     _INT_ENA
    </li>
    <li block-type="ListItem">
     5. Set
     <a href="#page-835-1">
      LEDC_TIMER
     </a>
     <i>
      x
     </i>
     _DUTY_RES to enable the timer and wait for a LEDC_OVF_CNT_CH
     <i>
      n
     </i>
     _INT interrupt
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Referring to Figure 32.3-1, the frequency of a
   <a href="#page-840-0">
    PWM generator output signal (s
   </a>
   ig_out
   <i>
    n
   </i>
   ) is dependent on the frequency of the timer's clock source LEDC_CLK
   <i>
    x
   </i>
   , the clock divisor LEDC_CLK_DIV, and the duty resolution (counter width)
   <a href="#page-838-0">
    LEDC_TIMER
   </a>
   <i>
    x
   </i>
   _DUTY_RES:
  </p>
  <p block-type="Equation">
   <math display="block">
    f_{\textrm{PWM}} = \frac{f_{\textrm{LEDC\_CLKx}}}{\textrm{LEDC\_CLK\_DIV} \cdot 2^{\textrm{LEDC\_TIMERx\_DUTY\_RES}}}
   </math>
  </p>
  <p block-type="Text">
   Based on the formula above, the desired duty resolution can be calculated as follows:
  </p>
  <p block-type="Equation">
   <math display="block">
    \text{LEDC\_TIMERx\_DUTY\_RES} = \text{log}_2\left(\frac{f_{\text{LEDC\_CLKx}}}{f_{\text{PWM}} \cdot \text{LEDC\_CLK\_DIV}}\right)
   </math>
  </p>
  <p block-type="Text">
   Table 32.3-1 lists the commonly-used frequencies and their corresponding resolutions.
  </p>
  <span id="page-829-1">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 32.3-1. Commonly-used Frequencies and Resolutions
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      LEDC_CLKx
     </td>
     <td>
      PWM Frequency
     </td>
     <td>
      Highest Resolution (bit) 1
     </td>
     <td>
      Lowest Resolution (bit) 2
     </td>
    </tr>
    <tr>
     <td>
      APB_CLK (80 MHz)
     </td>
     <td>
      1 kHz
     </td>
     <td>
      14
     </td>
     <td>
      7
     </td>
    </tr>
    <tr>
     <td>
      APB_CLK (80 MHz)
     </td>
     <td>
      5 kHz
     </td>
     <td>
      13
     </td>
     <td>
      4
     </td>
    </tr>
    <tr>
     <td>
      APB_CLK (80 MHz)
     </td>
     <td>
      10 kHz
     </td>
     <td>
      12
     </td>
     <td>
      3
     </td>
    </tr>
    <tr>
     <td>
      XTAL_CLK (40 MHz)
     </td>
     <td>
      1 kHz
     </td>
     <td>
      14
     </td>
     <td>
      6
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   <a href="#page-838-0">
    Table 32.3-1. Commonly-us
   </a>
   ed Frequencies and Resolutions
  </p>
  <p block-type="Text">
   1 The highest resolution is calculated when the clock divisor LEDC_CLK_DIV is 1 and rounded down. If the highest resolution calculated by the formula is higher than the counter's width 14 bits, then the highest resolution should be 14 bits.
  </p>
  <p block-type="Text">
   2 The lowest resolution is calculated when the clock divisor LEDC_CLK_DIV is 1023 +
   <sup>
    255
   </sup>
   <sup>
    256
   </sup>
   and rounded
  </p>
  <p block-type="Text">
   up. If the lowest resolution calculated by the formula is lower than 0, then the lowest resolution should be 1. Espressif Systems
   <sup>
    830
   </sup>
   Submit Documentation Feedback ESP32-C3 TRM (Version 1.3)
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 32.3-1. Commonly-used Frequencies and Resolutions
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 32.3-1. Commonly-used Frequencies and Resolutions
  </p>
  <p block-type="Text">
   1 The highest resolution is calculated when the clock divisor LEDC_CLK_DIV is 1 and rounded down. If the highest resolution calculated by the formula is higher than the counter's width 14 bits, then the highest resolution should be 14 bits.
  </p>
  <p block-type="Text">
   2 The lowest resolution is calculated when the clock divisor LEDC_CLK_DIV is 1023 +
   <sup>
    255
   </sup>
   <sup>
    256
   </sup>
   and rounded up. If the lowest resolution calculated by the formula is lower than 0, then the lowest resolution should be 1.
  </p>
  <p block-type="Text">
   To change the overflow value at runtime, first set the LEDC_TIMER
   <i>
    x
   </i>
   _DUTY_RES field, and then set the LEDC_TIMER
   <i>
    x
   </i>
   _PARA_UP field. This will cause the newly configured values to take effect upon the next overflow of the counter. If LEDC_OVF_CNT_EN_CH
   <i>
    n
   </i>
   field is reconfigured, LEDC_PARA_UP_CH
   <i>
    n
   </i>
   should be set to apply the new configuration. In summary, these c
   <a href="#page-838-0">
    onfiguration values need to
   </a>
   be updated by setting
   <a href="#page-838-0">
    LEDC_TIMER
   </a>
   <i>
    x
   </i>
   _PARA_UP or LEDC_PARA_UP_CH
   <i>
    n
   </i>
   . LEDC_TIMER
   <i>
    x
   </i>
   _PARA_UP and LEDC_PARA_UP_CH
   <i>
    n
   </i>
   will be automatically cleared by h
   <a href="#page-835-1">
    ardware.
   </a>
  </p>
  <h1>
   32.3.3
   <a href="#page-838-0">
    PWM Ge
   </a>
   n
   <a href="#page-835-1">
    erators
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-830-0">
   </span>
   To generate a PWM signal, a PWM generator (PWM
   <i>
    n
   </i>
   ) selects a timer (Timer
   <i>
    x
   </i>
   ). Each PWM generator can be configured separately by setting LEDC_TIMER_SEL_CH
   <i>
    n
   </i>
   to use one of four timers to generate the PWM output.
  </p>
  <p block-type="Text">
   As shown in Figure 32.3-1, each PWM generator has a comparator and two multiplexers. A PWM generator compares the timer's 14-bit cou
   <a href="#page-835-1">
    nter value (Timer
   </a>
   <i>
    x
   </i>
   _cnt) to two trigger values Hpoint
   <i>
    n
   </i>
   and Lpoint
   <i>
    n
   </i>
   . When the timer's counter value is equal to Hpoint
   <i>
    n
   </i>
   or Lpoint
   <i>
    n
   </i>
   , the PWM signal is high or low, respectively, as described below:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If Timer
     <i>
      x
     </i>
     _cnt == Hpoint
     <i>
      n
     </i>
     , sig_out
     <i>
      n
     </i>
     is 1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If Timer
     <i>
      x
     </i>
     _cnt == Lpoint
     <i>
      n
     </i>
     , sig_out
     <i>
      n
     </i>
     is 0.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Figure 32.3-3 illustrates how Hpoint
   <i>
    n
   </i>
   or Lpoint
   <i>
    n
   </i>
   are used to generate a fixed duty cycle PWM output signal.
  </p>
  <p block-type="Text">
   For a particular PWM generator (PWM
   <i>
    n
   </i>
   ), its Hpoint
   <i>
    n
   </i>
   is sampled from the LEDC_HPOINT_CH
   <i>
    n
   </i>
   field each time the sel
   <a href="#page-831-1">
    ected t
   </a>
   imer's counter overflows. Likewise, Lpoint
   <i>
    n
   </i>
   is also sampled on every counter overflow and is calculated from the sum of the LEDC_DUTY_CH
   <i>
    n
   </i>
   [18:4] and LEDC_HPOINT_CH
   <i>
    n
   </i>
   fields. By setting Hpoint
   <i>
    n
   </i>
   and Lpoint
   <i>
    n
   </i>
   via the LEDC_HPOINT_CH
   <i>
    n
   </i>
   and LEDC_DUTY_CH
   <i>
    n
   </i>
   [18:4] fields, th
   <a href="#page-837-0">
    e relative phase and
   </a>
   duty cycle of the PWM output can be set.
  </p>
  <p block-type="Text">
   The PWM output signal (sig_out
   <i>
    n
   </i>
   <a href="#page-837-1">
    ) is enabled by
   </a>
   setting LE
   <a href="#page-837-0">
    DC_SIG_OUT_EN_CH
   </a>
   <i>
    n
   </i>
   . When LEDC_SIG_OUT_EN_CH
   <i>
    n
   </i>
   <a href="#page-837-0">
    is cleared
   </a>
   , PW
   <a href="#page-837-1">
    M signal output is
   </a>
   disabled, and the output signal (sig_out
   <i>
    n
   </i>
   ) will output a constant level as specified by LEDC_IDLE_LV_CH
   <i>
    n
   </i>
   .
  </p>
  <p>
   <span id="page-831-1">
   </span>
   <img src="_page_831_Figure_0.jpeg"/>
  </p>
  <p>
   Figure 32.3-3. LED_PWM Output Signal Diagram
  </p>
  <p block-type="Text">
   The bits LEDC_DUTY_CH
   <i>
    n
   </i>
   [3:0] are used to dither the duty cycles of the PWM output signal (sig_out
   <i>
    n
   </i>
   ) by periodically altering the duty cycle of sig_out
   <i>
    n
   </i>
   . When LEDC_DUTY_CH
   <i>
    n
   </i>
   [3:0] is set to a non-zero value, then for every 16 cycles of sig_out
   <i>
    n
   </i>
   , LEDC_DUTY_CH
   <i>
    n
   </i>
   [3:0] of those cycles will have PWM pulses that are one timer tick long
   <a href="#page-837-1">
    er than the other (
   </a>
   16- LEDC_DUTY_CH
   <i>
    n
   </i>
   [3:0]) cycles. For instance, if LEDC_DUTY_CH
   <i>
    n
   </i>
   [18:4] is set to 10 and LEDC_DUTY_CH
   <i>
    n
   </i>
   [3:0] is set to 5, then 5 of 16
   <a href="#page-837-1">
    cycles will have a
   </a>
   PWM pulse with a duty value of 11 and the rest of the 16 cycles will hav
   <a href="#page-837-1">
    e a PWM pulse wi
   </a>
   th a duty value of 10. The average duty cycle after 16 cycles is 10.3125.
  </p>
  <p block-type="Text">
   If fields
   <a href="#page-837-1">
    LEDC_TIMER_SE
   </a>
   L_CH
   <i>
    n
   </i>
   , LEDC_HPOINT_CH
   <i>
    n
   </i>
   , LEDC_DUTY_CH
   <i>
    n
   </i>
   [18:4] and LEDC_SIG_OUT_EN_CH
   <i>
    n
   </i>
   are reconfigured, LEDC_PARA_UP_CH
   <i>
    n
   </i>
   must be set to apply the new configuration. This will cause the newly configured values to take effect upon the next overflow of the counter. LEDC_PARA_UP_CH
   <i>
    n
   </i>
   field will be automa
   <a href="#page-835-1">
    tically cleared by hardwa
   </a>
   r
   <a href="#page-837-0">
    e.
   </a>
  </p>
  <h1>
   32.3.4 Duty Cycle Fading
  </h1>
  <p block-type="Text">
   <span id="page-831-0">
   </span>
   The PWM generators can fade the duty cycle of a PWM output signal (i.e. gradually change the duty cycle from one value to another). If Duty Cycle Fading is enabled, the value of Lpoint
   <i>
    n
   </i>
   will be incremented/decremented after a fixed number of counter overflows has occurred. Figure 32.3-4 illustrates Duty Cycle Fading.
  </p>
  <p>
   <span id="page-831-2">
   </span>
   <img src="_page_831_Figure_6.jpeg"/>
  </p>
  <h4>
   Figure 32.3-4. Output Signal Diagram of Fading Duty Cycle
  </h4>
  <p block-type="Text">
   Duty Cycle Fading is configured using the following register fields:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   LEDC_DUTY_CH
   <i>
    n
   </i>
   is used to set the initial value of Lpoint
   <i>
    n
   </i>
   .
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     LEDC_DUTY_START_CH
     <i>
      n
     </i>
     will enable/disable duty cycle fading when set/cleared.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     LEDC_DUTY_CYCLE_CH
     <i>
      n
     </i>
     sets the number of counter overflow cycles for every Lpoint
     <i>
      n
     </i>
     increment/decrement. In other words, Lpoint
     <i>
      n
     </i>
     will be incremented/decremented after
     <a href="#page-836-1">
      LEDC_DUTY_CYCLE_CH
     </a>
     <i>
      n
     </i>
     counter overflows.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-836-1">
      LEDC_DUTY_INC_CH
     </a>
     <i>
      n
     </i>
     configures whether Lpoint
     <i>
      n
     </i>
     is incremented/decremented if set/cleared.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-836-1">
      LEDC_DUTY_SCALE_CH
     </a>
     <i>
      n
     </i>
     sets the amount that Lpoint
     <i>
      n
     </i>
     is incremented/decremented.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-836-1">
      LEDC_DUTY_NUM_CH
     </a>
     <i>
      n
     </i>
     sets the maximum number of increments/decrements before duty cycle fading stops.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If the fields
   <a href="#page-836-1">
    LEDC_DUTY_CH
   </a>
   <i>
    n
   </i>
   , LEDC_DUTY_START_CH
   <i>
    n
   </i>
   , LEDC_DUTY_CYCLE_CH
   <i>
    n
   </i>
   , LEDC_DUTY_INC_CH
   <i>
    n
   </i>
   , LEDC
   <a href="#page-836-1">
    _DUTY_SCALE_CH
   </a>
   <i>
    n
   </i>
   , and LEDC_DUTY_NUM_CH
   <i>
    n
   </i>
   are reconfigured, LEDC_PARA_UP_CH
   <i>
    n
   </i>
   must be set to apply the new configuration. After this field is set, the values for duty cycle fading will take effect at once. LEDC_PAR
   <a href="#page-837-1">
    A_UP_CH
   </a>
   <i>
    n
   </i>
   field will
   <a href="#page-836-1">
    be automatically cleared by hardware.
   </a>
  </p>
  <h1>
   32.3.5 Interrupts
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-832-0">
     </span>
     <i>
      •
     </i>
     <a href="#page-835-1">
      LEDC_OVF_CNT
     </a>
     _CH
     <i>
      n
     </i>
     _INT: Triggered when the timer counter overflows for (LEDC_OVF_NUM_CH
     <i>
      n
     </i>
     + 1) times and the register LEDC_OVF_CNT_EN_CH
     <i>
      n
     </i>
     is set to 1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     LEDC_DUTY_CHNG_END_CH
     <i>
      n
     </i>
     _INT: Triggered when a fade on an LED PWM generator has finished.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     LEDC_TIMER
     <i>
      x
     </i>
     _OVF_IN
     <a href="#page-835-1">
      T: Triggered when an LED
     </a>
     PWM timer has reached its
     <a href="#page-835-1">
      maximum counter valu
     </a>
     e.
    </li>
   </ul>
  </p>
  <h1>
   32.4 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-833-0">
   </span>
   The addresses in this section are relative to the LED PWM Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 3 System and Memory.
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      Configuration Register
      <br/>
      LEDC_CH0_CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 0
     </td>
     <td>
      0x0000
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH0_CONF1_REG
     </td>
     <td>
      Configuration register 1 for channel 0
     </td>
     <td>
      0x000C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH1_CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 1
     </td>
     <td>
      0x0014
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH1_CONF1_REG
     </td>
     <td>
      Configuration register 1 for channel 1
     </td>
     <td>
      0x0020
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH2_CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 2
     </td>
     <td>
      0x0028
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH2_CONF1_REG
     </td>
     <td>
      Configuration register 1 for channel 2
     </td>
     <td>
      0x0034
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH3_CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 3
     </td>
     <td>
      0x003C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH3_CONF1_REG
     </td>
     <td>
      Configuration register 1 for channel 3
     </td>
     <td>
      0x0048
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH4_CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 4
     </td>
     <td>
      0x0050
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH4_CONF1_REG
     </td>
     <td>
      Configuration register 1 for channel 4
     </td>
     <td>
      0x005C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH5_CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 5
     </td>
     <td>
      0x0064
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH5_CONF1_REG
     </td>
     <td>
      Configuration register 1 for channel 5
     </td>
     <td>
      0x0070
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CONF_REG
     </td>
     <td>
      Global LEDC configuration register
     </td>
     <td>
      0x00D0
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Hpoint Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH0_HPOINT_REG
     </td>
     <td>
      High point register for channel 0
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH1_HPOINT_REG
     </td>
     <td>
      High point register for channel 1
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH2_HPOINT_REG
      <br/>
      LEDC_CH3_HPOINT_REG
     </td>
     <td>
      High point register for channel 2
      <br/>
      High point register for channel 3
     </td>
     <td>
      0x002C
      <br/>
      0x0040
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH4_HPOINT_REG
     </td>
     <td>
      High point register for channel 4
     </td>
     <td>
      0x0054
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH5_HPOINT_REG
     </td>
     <td>
      High point register for channel 5
     </td>
     <td>
      0x0068
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      Duty Cycle Register
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH0_DUTY_REG
     </td>
     <td>
      Initial duty cycle for channel 0
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH0_DUTY_R_REG
     </td>
     <td>
      Current duty cycle for channel 0
     </td>
     <td>
      0x0010
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH1_DUTY_REG
     </td>
     <td>
      Initial duty cycle for channel 1
     </td>
     <td>
      0x001C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH1_DUTY_R_REG
     </td>
     <td>
      Current duty cycle for channel 1
     </td>
     <td>
      0x0024
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH2_DUTY_REG
     </td>
     <td>
      Initial duty cycle for channel 2
     </td>
     <td>
      0x0030
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH2_DUTY_R_REG
     </td>
     <td>
      Current duty cycle for channel 2
     </td>
     <td>
      0x0038
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH3_DUTY_REG
     </td>
     <td>
      Initial duty cycle for channel 3
     </td>
     <td>
      0x0044
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH3_DUTY_R_REG
     </td>
     <td>
      Current duty cycle for channel 3
     </td>
     <td>
      0x004C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH4_DUTY_REG
     </td>
     <td>
      Initial duty cycle for channel 4
     </td>
     <td>
      0x0058
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH4_DUTY_R_REG
     </td>
     <td>
      Current duty cycle for channel 4
     </td>
     <td>
      0x0060
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH5_DUTY_REG
     </td>
     <td>
      Initial duty cycle for channel 5
     </td>
     <td>
      0x006C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_CH5_DUTY_R_REG
      <br/>
      Timer Register
     </td>
     <td>
      Current duty cycle for channel 5
     </td>
     <td>
      0x0074
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_TIMER0_CONF_REG
     </td>
     <td>
      Timer 0 configuration
     </td>
     <td>
      0x00A0
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_TIMER0_VALUE_REG
     </td>
     <td>
      Timer 0 current counter value
     </td>
     <td>
      0x00A4
     </td>
     <td>
      RO
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 32
      <br/>
      LED PWM Controller (LEDC)
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      LEDC_TIMER1_CONF_REG
     </td>
     <td>
      Timer 1 configuration
     </td>
     <td>
      0x00A8
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_TIMER1_VALUE_REG
     </td>
     <td>
      Timer 1 current counter value
     </td>
     <td>
      0x00AC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_TIMER2_CONF_REG
     </td>
     <td>
      Timer 2 configuration
     </td>
     <td>
      0x00B0
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_TIMER2_VALUE_REG
     </td>
     <td>
      Timer 2 current counter value
     </td>
     <td>
      0x00B4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_TIMER3_CONF_REG
     </td>
     <td>
      Timer 3 configuration
     </td>
     <td>
      0x00B8
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      LEDC_TIMER3_VALUE_REG
      <br/>
      Interrupt Register
     </td>
     <td>
      Timer 3 current counter value
     </td>
     <td>
      0x00BC
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_INT_RAW_REG
     </td>
     <td>
      Raw interrupt status
     </td>
     <td>
      0x00C0
     </td>
     <td>
      R/WTC/SS
     </td>
    </tr>
    <tr>
     <td>
      LEDC_INT_ST_REG
     </td>
     <td>
      Masked interrupt status
     </td>
     <td>
      0x00C4
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      LEDC_INT_ENA_REG
     </td>
     <td>
      Interrupt enable bits
     </td>
     <td>
      0x00C8
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      LEDC_INT_CLR_REG
     </td>
     <td>
      Interrupt clear bits
     </td>
     <td>
      0x00CC
     </td>
     <td>
      WT
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   32.5 Registers
  </h1>
  <p block-type="Text">
   <span id="page-835-0">
   </span>
   The addresses in this section are relative to LED PWM Controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-835-1">
   </span>
   <img src="_page_835_Figure_2.jpeg"/>
  </p>
  <h4>
   Register 32.1. LEDC_CH
   <i>
    n
   </i>
   _CONF0_REG (
   <i>
    n
   </i>
   : 0-5) (0x0000+20*
   <i>
    n
   </i>
   )
  </h4>
  <p block-type="Text">
   LEDC_TIMER_SEL_CH
   <i>
    n
   </i>
   This field is used to select one of the timers for channel
   <i>
    n
   </i>
   .
  </p>
  <p block-type="Text">
   0: select Timer0; 1: select Timer1; 2: select Timer2; 3: select Timer3 (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     LEDC_SIG_OUT_EN_CH
     <i>
      n
     </i>
     Set this bit to enable signal output on channel
     <i>
      n
     </i>
     . (R/W)
    </li>
    <li block-type="ListItem">
     LEDC_IDLE_LV_CH
     <i>
      n
     </i>
     This bit is used to control the output value when channel
     <i>
      n
     </i>
     is inactive (when LEDC_SIG_OUT_EN_CH
     <i>
      n
     </i>
     is 0). (R/W)
    </li>
    <li block-type="ListItem">
     LEDC_PARA_UP_CH
     <i>
      n
     </i>
     This bit is used to update the listed fields below for channel
     <i>
      n
     </i>
     , and will be automatically cleared by hardware. (WT)
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_HPOINT_CH
       <i>
        n
       </i>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_DUTY_START_CH
       <i>
        n
       </i>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_SIG_OUT_EN_CH
       <i>
        n
       </i>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_TIMER_SEL_CH
       <i>
        n
       </i>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_DUTY_NUM_CH
       <i>
        n
       </i>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_DUTY_CYCLE_CH
       <i>
        n
       </i>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_DUTY_SCALE_CH
       <i>
        n
       </i>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_DUTY_INC_CH
       <i>
        n
       </i>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       <i>
        •
       </i>
       LEDC_OVF_CNT_EN_CH
       <i>
        n
       </i>
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   LEDC_OVF_NUM_CH
   <i>
    n
   </i>
   This field is used to configure the maximum times of overflow minus 1.
  </p>
  <p block-type="Text">
   The LEDC_OVF_CNT_CH
   <i>
    n
   </i>
   _INT interrupt will be triggered when channel
   <i>
    n
   </i>
   overflows for (LEDC_OVF_NUM_CH
   <i>
    n
   </i>
   + 1) times. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     LEDC_OVF_CNT_EN_CH
     <i>
      n
     </i>
     This bit is used to count the number of times when the timer selected by channel
     <i>
      n
     </i>
     overflows. (R/W)
    </li>
    <li block-type="ListItem">
     LEDC_OVF_CNT_RESET_CH
     <i>
      n
     </i>
     Set this bit to reset the timer-overflow counter of channel
     <i>
      n
     </i>
     . (WT)
    </li>
   </ul>
  </p>
  <p>
   Register 32.2. LEDC_CH
   <i>
    n
   </i>
   _CONF1_REG (
   <i>
    n
   </i>
   : 0-5) (0x000C+20*
   <i>
    n
   </i>
   )
  </p>
  <p>
   <span id="page-836-1">
   </span>
   <img src="_page_836_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_DUTY_SCALE_CH
   <i>
    n
   </i>
   This field configures the step size of the duty cycle change during fading. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     LEDC_DUTY_CYCLE_CH
     <i>
      n
     </i>
     The duty will change every LEDC_DUTY_CYCLE_CH
     <i>
      n
     </i>
     cycle on channel
     <i>
      n
     </i>
     . (R/W)
    </li>
    <li block-type="ListItem">
     LEDC_DUTY_NUM_CH
     <i>
      n
     </i>
     This field controls the number of times the duty cycle will be changed. (R/W)
    </li>
    <li block-type="ListItem">
     LEDC_DUTY_INC_CH
     <i>
      n
     </i>
     This bit determines whether the duty cycle of the output signal on channel
     <i>
      n
     </i>
     increases or decreases. 1: Increase; 0: Decrease. (R/W)
    </li>
    <li block-type="ListItem">
     LEDC_DUTY_START_CH
     <i>
      n
     </i>
     If this bit is set to 1, other configured fields in LEDC_CH
     <i>
      n
     </i>
     _CONF1_REG will take effect upon the next timer overflow. (R/W/SC)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-836-0">
   </span>
   <img src="_page_836_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   Register 32.3. LEDC_CONF_REG (0x00D0)
  </p>
  <p block-type="Text">
   LEDC_APB_CLK_SEL This field is used to select the common clock source for all the 4 timers.
  </p>
  <p block-type="Text">
   1: APB_CLK; 2: RC_FAST_CLK; 3: XTAL_CLK. (R/W)
  </p>
  <p block-type="Text">
   LEDC_CLK_EN This bit is used to control the clock.
  </p>
  <p block-type="Text">
   1: Force clock on for register. 0: Support clock only when application writes registers. (R/W)
  </p>
  <h4>
   Register 32.4. LEDC_CH
   <i>
    n
   </i>
   _HPOINT_REG (
   <i>
    n
   </i>
   : 0-5) (0x0004+20*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-837-0">
   </span>
   <img src="_page_837_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_HPOINT_CH
   <i>
    n
   </i>
   The output value changes to high when the selected timer for this channel has reached the value specified by this field. (R/W)
  </p>
  <h4>
   Register 32.5. LEDC_CH
   <i>
    n
   </i>
   _DUTY_REG (
   <i>
    n
   </i>
   : 0-5) (0x0008+20*
   <i>
    n
   </i>
   )
  </h4>
  <p>
   <span id="page-837-1">
   </span>
   <img src="_page_837_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_DUTY_CH
   <i>
    n
   </i>
   This field is used to change the output duty by controlling the Lpoint. The output value turns to low when the selected timer for this channel has reached the Lpoint. (R/W)
  </p>
  <p>
   <span id="page-837-2">
   </span>
   <img src="_page_837_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_DUTY_R_CH
   <i>
    n
   </i>
   This field stores the current duty cycle of the output signal on channel
   <i>
    n
   </i>
   . (RO)
  </p>
  <h4>
   Register 32.7. LEDC_TIMER
   <i>
    x
   </i>
   _CONF_REG (
   <i>
    x
   </i>
   : 0-3) (0x00A0+8*
   <i>
    x
   </i>
   )
  </h4>
  <p>
   <span id="page-838-0">
   </span>
   <img src="_page_838_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _DUTY_RES This field is used to control the range of the counter in timer
   <i>
    x
   </i>
   . (R/W)
  </p>
  <p block-type="Text">
   LEDC_CLK_DIV_TIMER
   <i>
    x
   </i>
   This field is used to configure the divisor for the divider in timer
   <i>
    x
   </i>
   . The least significant eight bits represent the fractional part. (R/W)
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _PAUSE This bit is used to suspend the counter in timer
   <i>
    x
   </i>
   . (R/W)
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _RST This bit is used to reset timer
   <i>
    x
   </i>
   . The counter will show 0 after reset. (R/W)
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _PARA_UP Set this bit to update LEDC_CLK_DIV_TIMER
   <i>
    x
   </i>
   and LEDC_TIMER
   <i>
    x
   </i>
   _DUTY_RES. (WT)
  </p>
  <h4>
   Register 32.8. LEDC_TIMER
   <i>
    x
   </i>
   _VALUE_REG (
   <i>
    x
   </i>
   : 0-3) (0x00A4+8*
   <i>
    x
   </i>
   )
  </h4>
  <p>
   <span id="page-838-1">
   </span>
   <img src="_page_838_Figure_8.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _CNT This field stores the current counter value of timer
   <i>
    x
   </i>
   . (RO)
  </p>
  <h4>
   Register 32.9. LEDC_INT_RAW_REG (0x00C0)
  </h4>
  <p>
   <span id="page-839-0">
   </span>
   <img src="_page_839_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT_RAW Triggered when the timer
   <i>
    x
   </i>
   has reached its maximum counter value. (R/WTC/SS)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     LEDC_DUTY_CHNG_END_CH
     <i>
      n
     </i>
     _INT_RAW Interrupt raw bit for channel
     <i>
      n
     </i>
     . Triggered when the gradual change of duty has finished. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     LEDC_OVF_CNT_CH
     <i>
      n
     </i>
     _INT_RAW Interrupt raw bit for channel
     <i>
      n
     </i>
     . Triggered when the ovf_cnt has reached the value specified by LEDC_OVF_NUM_CH
     <i>
      n
     </i>
     . (R/WTC/SS)
    </li>
   </ul>
  </p>
  <h4>
   Register 32.10. LEDC_INT_ST_REG (0x00C4)
  </h4>
  <p>
   <span id="page-839-1">
   </span>
   <img src="_page_839_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT_ST This is the masked interrupt status bit for the LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT interrupt when LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT_ENA is set to 1. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     LEDC_DUTY_CHNG_END_CH
     <i>
      n
     </i>
     _INT_ST This is the masked interrupt status bit for the LEDC_DUTY_CHNG_END_CH
     <i>
      n
     </i>
     _INT interrupt when LEDC_DUTY_CHNG_END_CH
     <i>
      n
     </i>
     _INT_ENA is set to 1. (RO)
    </li>
    <li block-type="ListItem">
     LEDC_OVF_CNT_CH
     <i>
      n
     </i>
     _INT_ST This is the masked interrupt status bit for the LEDC_OVF_CNT_CH
     <i>
      n
     </i>
     _INT interrupt when LEDC_OVF_CNT_CH
     <i>
      n
     </i>
     _INT_ENA is set to 1. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-840-0">
   </span>
   <img src="_page_840_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT_ENA The interrupt enable bit for the LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT interrupt. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     LEDC_DUTY_CHNG_END_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the LEDC_DUTY_CHNG_END_CH
     <i>
      n
     </i>
     _INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     LEDC_OVF_CNT_CH
     <i>
      n
     </i>
     _INT_ENA The interrupt enable bit for the LEDC_OVF_CNT_CH
     <i>
      n
     </i>
     _INT interrupt. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 32.12. LEDC_INT_CLR_REG (0x00CC)
  </h4>
  <p>
   <img src="_page_840_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT_CLR Set this bit to clear the LEDC_TIMER
   <i>
    x
   </i>
   _OVF_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   LEDC_DUTY_CHNG_END_CH
   <i>
    n
   </i>
   _INT_CLR Set this bit to clear the LEDC_DUTY_CHNG_END_CH
   <i>
    n
   </i>
   _INT interrupt. (WT)
  </p>
  <h4>
   LEDC_OVF_CNT_CH
   <i>
    n
   </i>
   _INT_CLR Set this bit to clear the LEDC_OVF_CNT_CH
   <i>
    n
   </i>
   _INT interrupt. (WT)
  </h4>
  <p>
   <img src="_page_841_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   LEDC_LEDC_DATE This is the version control register. (R/W)
  </p>
  <h1>
   <span id="page-842-4">
   </span>
   <span id="page-842-0">
   </span>
   Remote Control Peripheral (RMT)
  </h1>
  <h1>
   33.1 Overview
  </h1>
  <p block-type="Text">
   The RMT (Remote Control) module is designed to send and receive infrared remote control signals. A variety of remote control protocols are supported. The RMT module converts pulse codes stored in the module's built-in RAM into output signals, or converts input signals into pulse codes and stores them back in RAM. Optionally, the RMT module modulates its output signals with a carrier wave, or demodulates and filters its input signals.
  </p>
  <p block-type="Text">
   The RMT module has four channels, numbered from zero to three. Channels 0 ~ 1 (TX channels) are dedicated to transmit signals, and channels 2 ~ 3 (RX channels) to receive signals. Each TX/RX channel has the same functionality controlled by a dedicated set of registers and is able to independently either transmit or receive data. TX channels are indicated by
   <i>
    n
   </i>
   which is used as a placeholder for the channel number, and by
   <i>
    m
   </i>
   for RX channels.
  </p>
  <h1>
   33.2 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-842-1">
     </span>
     <i>
      •
     </i>
     Two TX channels
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Two RX channels
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support multiple channels (programmable) transmitting data simultaneously
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Four channels share a 192 x 32-bit RAM
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support modulation on TX pulses
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support filtering and demodulation on RX pulses
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Wrap TX mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Wrap RX mode
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Continuous TX mode
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-842-3">
   </span>
   <span id="page-842-2">
   </span>
   33.3 Functional Description
  </h1>
  <h1>
   33.3.1 RMT Architecture
  </h1>
  <p>
   <span id="page-843-1">
   </span>
   <img src="_page_843_Figure_1.jpeg"/>
  </p>
  <p>
   Figure 33.3-1. RMT Architecture
  </p>
  <p block-type="Text">
   The RMT module has four independent channels, two of which are TX channels and the other two are RX channels. Each TX channel has its own clock-divider counter, state machine, and transmitter. Each RX channel also has its own clock-divider counter, state machine, and receiver. The four channels share a 192 x 32-bit RAM.
  </p>
  <h1>
   <span id="page-843-2">
   </span>
   <span id="page-843-0">
   </span>
   33.3.2 RMT RAM
  </h1>
  <p>
   <img src="_page_843_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 33.3-2. Format of Pulse Code in RAM
  </p>
  <p block-type="Text">
   Figure 33.3-2 shows the format of pulse code in RAM. Each pulse code contains a 16-bit entry with two fields, level and period.
  </p>
  <p block-type="Text">
   Espres
   <a href="#page-843-2">
    sif Syst
   </a>
   ems 844
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Level (0 or 1): indicates a low-/high-level value was received or is going to be sent.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Period: points out how many clk_div clock cycles the level lasts for, see Figure 33.3-1.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   A zero (0) period is interpreted as a transmission end-marker. If the period is not an end-marker, its value is limited by APB clock and RMT clock:
  </p>
  <p block-type="TextInlineMath">
   3
   <i>
    × Tapb
   </i>
   _
   <i>
    clk
   </i>
   + 5
   <i>
    × T
   </i>
   rmt_sclk
   <i>
    &lt; period × T
   </i>
   clk_div(1)
  </p>
  <p block-type="Text">
   The RAM is divided into four 48 x 32-bit blocks. By default, each channel uses one block, block zero for channel zero, block one for channel one, and so on.
  </p>
  <p block-type="Text">
   If the data size of one single transfer is larger than this block size of TX channel
   <i>
    n
   </i>
   or RX channel
   <i>
    m
   </i>
   , users can configure the channel
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     to enable wrap mode by setting RMT_MEM_TX_WRAP_EN_CH
     <i>
      n
     </i>
     /
     <i>
      m
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     or to use more blocks by configuring RMT_MEM_SIZE_CH
     <i>
      n
     </i>
     /
     <i>
      m
     </i>
     .
    </li>
   </ul>
  </p>
  <p block-type="TextInlineMath">
   Setting RMT_MEM_SIZE_CH
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   &gt; 1 allows channel
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   to use the memory of subsequent channels, block (
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   ) ~ block (
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   + RMT_MEM_SIZE_CH
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   -1). If so, the subsequent channels
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   + 1 ~
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   + RMT_MEM_SIZE_CH
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   - 1 can not be used once their RAM blocks are occupied.
  </p>
  <p block-type="Text">
   Note that the RAM used by each channel is mapped from low address to high address. In such mode, channel 0 is able to use the RAM blocks for channels 1, 2 and 3 by setting RMT_MEM_SIZE_CH0, but channel 3 can not use the blocks for channels 0, 1, or 2. Therefore, the maximum value of RMT_MEM_SIZE_CH
   <i>
    n
   </i>
   should not exceed (4 -
   <i>
    n
   </i>
   ) and the maximum value of RMT_MEM_SIZE_CH
   <i>
    m
   </i>
   should not exceed (2 -
   <i>
    m
   </i>
   ).
  </p>
  <p block-type="Text">
   The RMT RAM can be accessed via APB bus, or read by the transmitter and written by the receiver. To avoid any possible access conflict between the receiver and the APB bus, RMT can be configured to designate the RAM block's owner, be it the receiver or the APB bus, by configuring RMT_MEM_OWNER_CH
   <i>
    m
   </i>
   . If this ownership is violated, a flag signal RMT_CH
   <i>
    m
   </i>
   _OWNER_ERR will be generated.
  </p>
  <p block-type="Text">
   APB bus is able to access RAM in FIFO mode and in Direct Address (NONFIFO) mode, depending on the configuration of RMT_FIFO_MASK:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: use NONFIFO mode;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: use FIFO mode.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When the RMT module is inactive, the RAM can be put into low-power mode by setting RMT_MEM_FORCE_PD.
  </p>
  <h1>
   33.3.3 Clock
  </h1>
  <p block-type="Text">
   <span id="page-844-0">
   </span>
   <a href="#page-856-0">
    The clock source of RM
   </a>
   T can be APB_CLK, RC_FAST_CLK or XTAL_CLK, depending on the configuration of RMT_SCLK_SEL. RMT clock can be enabled by setting RMT_SCLK_ACTIVE. RMT working clock (rmt_sclk) is obtained by dividing the selected clock source with a fractional divider, see Figure 33.3-1. The divider is:
  </p>
  <h4>
   <i>
    RMT
   </i>
   _
   <i>
    SCLK
   </i>
   _
   <i>
    DIV
   </i>
   _
   <i>
    NUM
   </i>
   + 1 +
   <i>
    RMT
   </i>
   _
   <i>
    SCLK
   </i>
   _
   <i>
    DIV
   </i>
   _
   <i>
    A
   </i>
   /
   <i>
    RMT
   </i>
   _
   <i>
    S
    <a href="#page-843-1">
     CLK
    </a>
   </i>
   _
   <i>
    DIV
   </i>
   _
   <i>
    B
   </i>
  </h4>
  <p block-type="Text">
   For more information, please check Chapter 6
   <i>
    Reset and Clock
   </i>
   .
  </p>
  <p block-type="Text">
   Espressif Systems 845
  </p>
  <p block-type="Text">
   RMT_DIV_CNT_CH
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   is used to configure the divider coefficient of internal clock divider for RMT channels. The coefficient is normally equal to the value of RMT_DIV_CNT_CH
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   , except value 0 that represents coefficient 256. The clock divider can be reset by clearing RMT_REF_CNT_RST_CH
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   . The clock generated from the divider can be used by the counter (see Figure 33.3-1).
  </p>
  <h1>
   33.3.4 Transmitter
  </h1>
  <h1>
   <span id="page-845-0">
   </span>
   33.3.4.1 Normal TX Mode
  </h1>
  <p block-type="Text">
   <span id="page-845-1">
   </span>
   When RMT_TX_START_CH
   <i>
    n
   </i>
   is set, the transmitter of channel
   <i>
    n
   </i>
   starts reading and sending pulse codes from the starting address of its RAM block. The codes are sent starting from low-address entry.
  </p>
  <p block-type="Text">
   When an end-marker (a zero period) is encountered, the transmitter stops the transmission, returns to idle state
   <a href="#page-852-0">
    and generates an
   </a>
   RMT_CH
   <i>
    n
   </i>
   _TX_END_INT interrupt. Setting RMT_TX_STOP_CH
   <i>
    n
   </i>
   to 1 also stops the transmission and immediately sets the transmitter back to idle.
  </p>
  <p block-type="Text">
   The output level of a transmitter in idle state is determined by the "level" field of the end-marker or by the content of RMT_IDLE_OUT_LV_CH
   <i>
    n
   </i>
   <a href="#page-849-0">
    , depending
   </a>
   on the configuration of
   <a href="#page-852-0">
    RMT_IDLE_OU
   </a>
   T_EN_CH
   <i>
    n
   </i>
   .
  </p>
  <p block-type="Text">
   To implement the above-mentioned configurations, please set RMT_CONF_UPDATE_CH
   <i>
    n
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h1>
   33.3.4.2 Wrap TX Mode
  </h1>
  <p block-type="Text">
   <span id="page-845-2">
   </span>
   To transmit more pulse c
   <a href="#page-848-1">
    odes th
   </a>
   an can be fitted in the channel's RAM, users can enable wrap TX mode by setting RMT_MEM_TX_WRAP_EN_CH
   <i>
    n
   </i>
   . In this mode, the transmitter sends the data from RAM in loops till an end-marker is encountered.
  </p>
  <p block-type="Text">
   For example, if RMT_MEM_SIZE_CH
   <i>
    n
   </i>
   = 1, the transmitter starts sending data from the address 48 *
   <i>
    n
   </i>
   , and then the dat
   <a href="#page-852-0">
    a from higher RAM address. On
   </a>
   ce the transmitter finishes sending the data from (48 * (
   <i>
    n
   </i>
   + 1) - 1), it continues sending data from 48 *
   <i>
    n
   </i>
   again till an end-marker is encountered. Wrap mode is also applicable for RMT_MEM_SI
   <a href="#page-852-0">
    ZE_CH
   </a>
   <i>
    n
   </i>
   &gt; 1.
  </p>
  <p block-type="Text">
   When the size of transmitted pulse codes is larger than or equal to the value set by RMT_TX_LIM_CH
   <i>
    n
   </i>
   , an RMT_CH
   <i>
    n
   </i>
   _TX_THR_EVENT_INT interrupt is triggered. In wrap mode, RMT_TX_LIM_CH
   <i>
    n
   </i>
   can be set to a half or
   <a href="#page-852-0">
    a fraction of the size o
   </a>
   f the channel's RAM block. When an RMT_CH
   <i>
    n
   </i>
   _TX_THR_EVENT_INT interrupt is detected by software, the already used RAM region can be updated with new pulse
   <a href="#page-864-0">
    codes. In this way
   </a>
   the
   <a href="#page-849-0">
    transmitter can seamlessly send
   </a>
   unlimited pulse codes in wrap mod
   <a href="#page-864-0">
    e.
   </a>
  </p>
  <p block-type="Text">
   To update the configuration of RMT_MEM_TX_WRAP_EN_CH
   <i>
    n
   </i>
   <a href="#page-849-0">
    , RMT_MEM_SIZE_CH
   </a>
   <i>
    n
   </i>
   , and RMT_TX_LIM_CH
   <i>
    n
   </i>
   , please set RMT_CONF_UPDATE_CH
   <i>
    n
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h2>
   33.3.4.3 TX Modulation
  </h2>
  <p block-type="Text">
   <span id="page-845-3">
   </span>
   Transmitter output can be modulated with a carrier wave by setting RMT_CAR
   <a href="#page-848-1">
    RIER_E
   </a>
   N_CH
   <i>
    n
   </i>
   . The carrier waveform is configurable.
  </p>
  <p block-type="Text">
   In a carrier cycle, high level lasts for (RMT_CARRIER_HIGH_CH
   <i>
    n
   </i>
   + 1) rmt_sclk cycles, while low level lasts for (RMT_CARRIER_LOW_CH
   <i>
    n
   </i>
   + 1) rmt_sclk cycles. When RMT_CARRI
   <a href="#page-852-0">
    ER_OUT_LV_CH
   </a>
   <i>
    n
   </i>
   is set, carrier wave is added on the high-level of output signals; while RMT_CARRIER_OUT_LV_CH
   <i>
    n
   </i>
   is cleared, carrier wave is added on the low-level of output signals.
  </p>
  <p block-type="Text">
   Carrier wave can be added on all output signals during modulation, or just added on valid pulse codes (the data stored in RAM), depending on the configuration of RMT_CARRIER_EFF_EN_CH
   <i>
    n
   </i>
   :
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: add carrier wave on all output signals;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: add carrier wave only on valid signals.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   To implement the modulation configuration, please set RMT_CONF_UPDATE_CH
   <i>
    n
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h1>
   33.3.4.4 Continuous TX Mode
  </h1>
  <p block-type="Text">
   <span id="page-846-0">
   </span>
   This continu
   <a href="#page-848-1">
    ous TX
   </a>
   mode can be enabled by setting RMT_TX_CONTI_MODE_CH
   <i>
    n
   </i>
   . In this mode, the transmitter sends the pulse codes from RAM in loops.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If an end-marker is encountered, the transmitter starts transmitting the first data again.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     If no end-marker is encountered, the transmitter starts transmitting the first data again after the last data is transmitted.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If RMT_TX_LOOP_CNT_EN_CH
   <i>
    n
   </i>
   is set, the loop counting is incremented by 1 each time an end-marker is encountered. If the counting reaches the value set in RMT_TX _LOOP_NUM_CH
   <i>
    n
   </i>
   , an RMT_CH
   <i>
    n
   </i>
   _TX_LOOP_INT is generated.
  </p>
  <p block-type="Text">
   In an end-marker, if its period[14:0] is 0, then the period of the previous data must satisfy the following requirement:
  </p>
  <p block-type="Text">
   6
   <i>
    × Tapb
   </i>
   _
   <i>
    clk
   </i>
   + 12
   <i>
    × Trmt
   </i>
   _
   <i>
    sclk &lt; period × Tclk
   </i>
   _
   <i>
    div
   </i>
   (2)
  </p>
  <p block-type="Text">
   The period of the other data only need to satisfy relation (1).
  </p>
  <p block-type="Text">
   To implement the above-mentioned configuration, please set RMT_CONF_UPDATE_CH
   <i>
    n
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h1>
   33.3.4.5 Simultaneous TX Mode
  </h1>
  <p block-type="Text">
   <span id="page-846-1">
   </span>
   RMT module supports m
   <a href="#page-848-1">
    ultiple c
   </a>
   hannels transmitting data simultaneously. To use this function, follow the steps below.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. Configure RMT_TX_SIM_CH
     <i>
      n
     </i>
     to choose which multiple channels are used to transmit data simultaneously.
    </li>
    <li block-type="ListItem">
     2. Set RMT_TX_SIM_EN to enable this transmission mode.
    </li>
    <li block-type="ListItem">
     3. Set RMT_TX_START_CH
     <i>
      n
     </i>
     for each selected channel, to start data transmitting.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Once the last channel is configured, these channels start transmitting data simultaneously. Due to hardware limitations, there is no guarantee that two channels can start sending data exactly at the same time. The interval between two channels starting transmitting data is within 3 x T
   <i>
    clk
   </i>
   _
   <i>
    div
   </i>
   .
  </p>
  <p block-type="Text">
   To configure RMT_TX_SIM_EN, please set RMT_CONF_UPDATE_CH
   <i>
    n
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h1>
   <span id="page-846-3">
   </span>
   <span id="page-846-2">
   </span>
   <a href="#page-848-1">
    33.3
   </a>
   .5 Receiver
  </h1>
  <h4>
   33.3.5.1 Normal RX Mode
  </h4>
  <p block-type="Text">
   The receiver of channel
   <i>
    m
   </i>
   is controlled by RMT_RX_EN_CH
   <i>
    m
   </i>
   :
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RMT_RX_EN_CH
     <i>
      m
     </i>
     = 1, the receiver starts working.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RMT_RX_EN_CH
     <i>
      m
     </i>
     = 0, the receiver stops receiving data.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   When the receiver becomes active, it starts counting from the first edge of the signal, detecting signal levels and counting clock cycles the level lasts for. Each cycle count is then written back to RAM.
  </p>
  <p block-type="Text">
   When the receiver detects no change in a signal level for a number of clock cycles more than the value set by RMT_IDLE_THRES_CH
   <i>
    m
   </i>
   , the receiver will stop receiving data, return to idle state, and generate an RMT_CH
   <i>
    m
   </i>
   _RX_END_INT interrupt.
  </p>
  <p block-type="Text">
   Please note that RMT_IDLE_THRES_CH
   <i>
    m
   </i>
   should be configured to a maximum value according to your application, otherwise a valid received level may be mistaken as a level in idle state.
  </p>
  <p block-type="Text">
   If RAM block of this RX channel is used up by the received data, the receiver will stop receiving data, and generate an RMT_CH
   <i>
    m
   </i>
   _ERR_INT interrupt triggered by RAM FULL event.
  </p>
  <p block-type="Text">
   To implement configuration above, please set RMT_CONF_UPDATE_CH
   <i>
    m
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h1>
   33.3.5.2 Wrap RX Mode
  </h1>
  <p block-type="Text">
   <span id="page-847-0">
   </span>
   To recei
   <a href="#page-848-1">
    ve mor
   </a>
   e pulse codes than can be fitted in the channel's RAM, users can enable wrap RX mode for channel
   <i>
    m
   </i>
   by configuring RMT_MEM_RX_WRAP_EN_CH
   <i>
    m
   </i>
   . In wrap mode, the receiver stores the received data to RAM block of this channel in loops.
  </p>
  <p block-type="Text">
   Receiving ends, when the receiver detects no change in a signal level for a number of clock cycles more than the value set by RMT_IDLE_THRES_CH
   <i>
    m
   </i>
   . The receiver then returns to idle state and generates an RMT_CH
   <i>
    m
   </i>
   _RX_END_INT interrupt.
  </p>
  <p block-type="Text">
   For example, if RMT_MEM_SIZE_CH
   <i>
    m
   </i>
   is set to 1, the receiver starts receiving data and stores the data to address 48 *
   <i>
    m
   </i>
   , and then to higher RAM address. When the receiver finishes storing the received data to address (48 * (
   <i>
    m
   </i>
   + 1) - 1), the receiver continues receiving data and storing data to the address 48 *
   <i>
    m
   </i>
   again, till no change is detected on a signal level for more than RMT_IDLE_THRES_CH
   <i>
    m
   </i>
   clock cycles. Wrap mode is also applicable for RMT_MEM_SIZE_CH
   <i>
    m
   </i>
   &gt; 1.
  </p>
  <p block-type="Text">
   An RMT_CH
   <i>
    m
   </i>
   _RX_THR_EVENT_INT is generated when the size of received pulse codes is larger than or equal to the value set by RMT_RX_LIM_CH
   <i>
    m
   </i>
   . In wrap mode, RMT_RX_LIM_CH
   <i>
    M
   </i>
   can be set to a half or a fraction of the size of the channel's RAM block. When an RMT_CH
   <i>
    m
   </i>
   _RX_THR_EVENT_INT interrupt is detected by software, the system will be notified to copy out data stored in already used RMT RAM region, and then the region can be updated by subsequent data. In this way an arbitrary amount of data can be seamlessly received.
  </p>
  <p block-type="Text">
   To implement the configuration above, please set RMT_CONF_UPDATE_CH
   <i>
    m
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h2>
   33.3.5.3 RX Filtering
  </h2>
  <p block-type="Text">
   <span id="page-847-1">
   </span>
   Users c
   <a href="#page-848-1">
    an enab
   </a>
   le the receiver to filter input signals by setting RMT_RX_FILTER_EN_CH
   <i>
    m
   </i>
   for each channel. The filter samples input signals continuously, and detects the signals which remain unchanged for a
  </p>
  <p block-type="Text">
   Espressif Systems 848
  </p>
  <p block-type="Text">
   continuous RMT_RX_FILTER_THRES_CH
   <i>
    m
   </i>
   rmt_sclk cycles as valid, otherwise, the signals are rejected. Only the valid signals can pass through this filter. The filter removes pulses with a length of less than RMT_RX_FILTER_THRES_CH
   <i>
    n
   </i>
   rmt_sclk cycles.
  </p>
  <p block-type="Text">
   To implement the configuration above, please set RMT_CONF_UPDATE_CH
   <i>
    m
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h1>
   33.3.5.4 RX Demodulation
  </h1>
  <p block-type="Text">
   <span id="page-848-0">
   </span>
   Users c
   <a href="#page-848-1">
    an enab
   </a>
   le demodulation function on input signals or on filtered output signals by setting RMT_CARRIER_EN_CH
   <i>
    m
   </i>
   . RX demodulation can be applied to high-level carrier wave or low-level carrier wave, depending on the configuration of RMT_CARRIER_OUT_LV_CH
   <i>
    m
   </i>
   :
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: demodulate high-level carrier wave
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     0: demodulate low-level carrier wave
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Users can configure RMT_CARRIER_HIGH_THRES_CH
   <i>
    m
   </i>
   and RMT_CARRIER_LOW_THRES_CH
   <i>
    m
   </i>
   to set the thresholds to demodulate high-level carrier wave or low-level carrier wave.
  </p>
  <p block-type="Text">
   If the high-level of a signal lasts for less than RMT_CARRIER_HIGH_THRES_CH
   <i>
    m
   </i>
   clk_div cycles, or the low-level lasts for less than RMT_CARRIER_LOW_THRES_CH
   <i>
    m
   </i>
   clk_div cycles, such level is detected as a carrier wave and then is filtered out.
  </p>
  <p block-type="Text">
   To implement the configuration above, please set RMT_CONF_UPDATE_CH
   <i>
    m
   </i>
   first. For more information, see Section 33.3.6.
  </p>
  <h1>
   33.3.6 Configuration Update
  </h1>
  <p block-type="Text">
   <span id="page-848-1">
   </span>
   To upda
   <a href="#page-848-1">
    te RMT
   </a>
   registers configuration, please set RMT_CONF_UPDATE_CH
   <i>
    n
   </i>
   /
   <i>
    m
   </i>
   for each channel first.
  </p>
  <p block-type="Text">
   All the bits/fields listed in the second column of Table 33.3-1 should follow this rule.
  </p>
  <span id="page-848-2">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Register
     </td>
     <td>
      Bit/Field Configuration Update
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      TX Channels
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      RMT_CARRIER_OUT_LV_CHn
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      RMT_CARRIER_EN_CHn
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      RMT_CARRIER_EFF_EN_CHn
     </td>
    </tr>
    <tr>
     <td>
      RMT_CHnCONF0_REG
     </td>
     <td>
      RMT_DIV_CNT_CHn
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      RMT_TX_STOP_CHn
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      RMT_IDLE_OUT_EN_CHn
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      RMT_IDLE_OUT_LV_CHn
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      RMT_CHnCARRIER_DUTY_REG
     </td>
     <td>
      RMT_TX_CONTI_MODE_CHn
     </td>
    </tr>
    <tr>
     <td>
      RMT_CARRIER_HIGH_CHn
     </td>
    </tr>
    <tr>
     <td rowspan="3">
      RMT_CHn_TX_LIM_REG
     </td>
     <td>
      RMT_CARRIER_LOW_CHn
     </td>
    </tr>
    <tr>
     <td>
      RMT_TX_LOOP_CNT_EN_CHn
     </td>
    </tr>
    <tr>
     <td>
      RMT_TX_LOOP_NUM_CHn
      <br/>
      RMT_TX_LIM_CHn
     </td>
    </tr>
    <tr>
     <td>
      RMT_CHn_TX_SIM_REG
     </td>
     <td>
      RMT_TX_SIM_EN
     </td>
    </tr>
   </tbody>
  </table>
  <h4>
   Table 33.3-1. Configuration Update
  </h4>
  <table>
   <tbody>
    <tr>
     <th>
      Chapter 33
      <br/>
      Remote Control Peripheral (RMT)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td rowspan="4">
      Register
     </td>
     <td>
      Table 33.3-1 – cont'd from previous page
     </td>
    </tr>
    <tr>
     <td>
      Bit/Field Configuration Update
     </td>
    </tr>
    <tr>
     <td>
      RX Channels
     </td>
    </tr>
    <tr>
     <td>
      RMT_CARRIER_OUT_LV_CHm
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      RMT_CHmCONF0_REG
     </td>
     <td>
      RMT_CARRIER_EN_CHm
     </td>
    </tr>
    <tr>
     <td>
      RMT_IDLE_THRES_CHm
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      RMT_CHmCONF1_REG
     </td>
     <td>
      RMT_DIV_CNT_CHm
     </td>
    </tr>
    <tr>
     <td>
      RMT_RX_FILTER_THRES_CHm
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      RMT_RX_EN_CHm
      <br/>
      RMT_CARRIER_HIGH_THRES_CHm
     </td>
    </tr>
    <tr>
     <td>
      RMT_CHm_RX_CARRIER_RM_REG
     </td>
     <td>
      RMT_CARRIER_LOW_THRES_CHm
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 33.3-1 – cont'd from previous page
  </p>
  <h1>
   33.3.7 Interrupts
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-849-0">
     </span>
     <i>
      •
     </i>
     RMT_CH
     <i>
      n
     </i>
     /
     <i>
      m
     </i>
     _ERR_INT: triggered when channel
     <i>
      n
     </i>
     /
     <i>
      m
     </i>
     does not read or write data correctly. For example, if the transmitter still tries to read data from RAM when the RAM is empty, or the receiver still tries to write data into RAM when the RAM is full, this interrupt will be triggered.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RMT_CH
     <i>
      n
     </i>
     _TX_THR_EVENT_INT: triggered when the amount of data the transmitter has sent matches the value of RMT_CH
     <i>
      n
     </i>
     _TX_LIM_REG.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RMT_CH
     <i>
      m
     </i>
     _RX_THR_EVENT_INT: triggered each time when the amount of data received by the receiver reaches the value set in RMT_CH
     <i>
      m
     </i>
     _RX_LIM_REG.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RMT_CH
     <i>
      n
     </i>
     <a href="#page-864-0">
      _TX_END_INT: Triggere
     </a>
     d when the transmitter has finished transmitting signals.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RMT_CH
     <i>
      m
     </i>
     _RX_END_INT: Triggered when the receiver has finished receiving signals.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RMT_CH
     <i>
      n
     </i>
     _TX_LOOP_INT: Triggered when the loop counting reaches the value set by RMT_TX_LOOP_NUM_CH
     <i>
      n
     </i>
     .
    </li>
   </ul>
  </p>
  <h1>
   33.4 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-850-0">
   </span>
   The addresses in this section are relative to RMT base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      and Memory .
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="4">
      The abbreviations given in Column Access are explained in Section Access Types for Registers.
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
      <br/>
      FIFO R/W Registers
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH0DATA_REG
     </td>
     <td>
      The read and write data register for channel 0
     </td>
     <td>
      0x0000
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      by APB FIFO access.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH1DATA_REG
     </td>
     <td>
      The read and write data register for channel 1
     </td>
     <td>
      0x0004
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      by APB FIFO access.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH2DATA_REG
     </td>
     <td>
      The read and write data register for channel 2
     </td>
     <td>
      0x0008
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      by APB FIFO access.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH3DATA_REG
     </td>
     <td>
      The read and write data register for channel 3
     </td>
     <td>
      0x000C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      by APB FIFO access.
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH0CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 0
     </td>
     <td>
      0x0010
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH1CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 1
     </td>
     <td>
      0x0014
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH2CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 2
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH2CONF1_REG
     </td>
     <td>
      Configuration register 1 for channel 2
     </td>
     <td>
      0x001C
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH3CONF0_REG
     </td>
     <td>
      Configuration register 0 for channel 3
     </td>
     <td>
      0x0020
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH3CONF1_REG
     </td>
     <td>
      Configuration register 1 for channel 3
     </td>
     <td>
      0x0024
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td colspan="4">
      RMT_SYS_CONF_REG
      <br/>
      Configuration register for RMT APB
      <br/>
      0x0068
      <br/>
      R/W
      <br/>
      RMT_REF_CNT_RST_REG
      <br/>
      Reset register for RMT clock divider
      <br/>
      0x0070
      <br/>
      WT
     </td>
    </tr>
    <tr>
     <td>
      Status Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH0STATUS_REG
     </td>
     <td>
      Channel 0 status register
     </td>
     <td>
      0x0028
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH1STATUS_REG
     </td>
     <td>
      Channel 1 status register
     </td>
     <td>
      0x002C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH2STATUS_REG
     </td>
     <td>
      Channel 2 status register
     </td>
     <td>
      0x0030
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH3STATUS_REG
     </td>
     <td colspan="3">
      Channel 3 status register
      <br/>
      0x0034
      <br/>
      RO
     </td>
    </tr>
    <tr>
     <td>
      Interrupt Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RMT_INT_RAW_REG
     </td>
     <td>
      Raw interrupt status
     </td>
     <td>
      0x0038
     </td>
     <td>
      R/WTC/SS
     </td>
    </tr>
    <tr>
     <td>
      RMT_INT_ST_REG
     </td>
     <td>
      Masked interrupt status
     </td>
     <td>
      0x003C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      RMT_INT_ENA_REG
     </td>
     <td>
      Interrupt enable bits
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td colspan="2">
      RMT_INT_CLR_REG
      <br/>
      Interrupt clear bits
      <br/>
      0x0044
      <br/>
      WT
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Carrier Wave Duty Cycle Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH0CARRIER_DUTY_REG
     </td>
     <td>
      Duty cycle configuration register for channel 0
     </td>
     <td>
      0x0048
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH1CARRIER_DUTY_REG
     </td>
     <td>
      Duty cycle configuration register for channel 1
     </td>
     <td>
      0x004C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH2_RX_CARRIER_RM_REG
     </td>
     <td>
      Carrier remove register for channel 2
     </td>
     <td>
      0x0050
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td colspan="2">
      RMT_CH3_RX_CARRIER_RM_REG
      <br/>
      Carrier remove register for channel 3
      <br/>
      0x0054
      <br/>
      R/W
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      TX Event Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH0_TX_LIM_REG
      <br/>
      RMT_CH1_TX_LIM_REG
     </td>
     <td>
      Configuration register for channel 0 TX event
      <br/>
      Configuration register for channel 1 TX event
     </td>
     <td>
      0x0058
      <br/>
      0x005C
     </td>
     <td>
      varies
      <br/>
      varies
     </td>
    </tr>
    <tr>
     <td>
      RMT_TX_SIM_REG
     </td>
     <td>
      RMT TX synchronous register
     </td>
     <td>
      0x006C
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td colspan="5">
      Chapter 33
      <br/>
      Remote Control Peripheral (RMT)
      <br/>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td colspan="5">
      RX Event Configuration Registers
     </td>
    </tr>
    <tr>
     <td>
      RMT_CH2_RX_LIM_REG
     </td>
     <td>
      Configuration register for channel 2 RX event
     </td>
     <td>
      0x0060
     </td>
     <td>
      R/W
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   <a href="#page-865-1">
    33.5
   </a>
   Registers
  </h1>
  <p block-type="Text">
   <span id="page-851-0">
   </span>
   The addresses in this section are relative to RMT base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p>
   <span id="page-851-1">
   </span>
   <img src="_page_851_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_CH
   <i>
    n
   </i>
   DATA Read and write data for channel
   <i>
    n
   </i>
   via APB FIFO. (RO)
  </p>
  <p block-type="Text">
   Register 33.2. RMT_CH
   <i>
    m
   </i>
   DATA_REG (
   <i>
    m
   </i>
   = 2, 3) (0x0008, 0x000C)
  </p>
  <p>
   <img src="_page_851_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_CH
   <i>
    m
   </i>
   DATA Read and write data for channel
   <i>
    m
   </i>
   via APB FIFO. (RO)
  </p>
  <h4>
   Register 33.3. RMT_CH
   <i>
    n
   </i>
   CONF0_REG (
   <i>
    n
   </i>
   = 0, 1) (0x0010, 0x0014)
  </h4>
  <p>
   <span id="page-852-0">
   </span>
   <img src="_page_852_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_TX_START_CH
   <i>
    n
   </i>
   Set this bit to start sending data in channel
   <i>
    n
   </i>
   . (WT)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_MEM_RD_RST_CH
     <i>
      n
     </i>
     Set this bit to reset RAM read address accessed by the transmitter for channel
     <i>
      n
     </i>
     . (WT)
    </li>
    <li block-type="ListItem">
     RMT_APB_MEM_RST_CH
     <i>
      n
     </i>
     Set this bit to reset RAM W/R address accessed by APB FIFO for channel
     <i>
      n
     </i>
     . (WT)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RMT_TX_CONTI_MODE_CH
   <i>
    n
   </i>
   Set this bit to enable continuous TX mode for channel
   <i>
    n
   </i>
   . (R/W)
  </p>
  <p block-type="Text">
   In this mode, the transmitter starts its transmission from the first data, and in the following transmission:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     if an end-marker is encountered, the transmitter starts transmitting data from the first data again;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     if no end-marker is encountered, the transmitter starts transmitting the first data again when the last data is transmitted.
    </li>
    <li block-type="ListItem">
     RMT_MEM_TX_WRAP_EN_CH
     <i>
      n
     </i>
     Set this bit to enable wrap TX mode for channel
     <i>
      n
     </i>
     . In this mode, if the TX data size is larger than the channel's RAM block size, the transmitter continues transmitting the first data to the last data in loops. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_IDLE_OUT_LV_CH
     <i>
      n
     </i>
     This bit configures the level of output signal for channel
     <i>
      n
     </i>
     when the transmitter is in idle state. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_IDLE_OUT_EN_CH
     <i>
      n
     </i>
     This is the output enable-bit for channel
     <i>
      n
     </i>
     in idle state. (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RMT_TX_STOP_CH
   <i>
    n
   </i>
   Set this bit to stop the transmitter of channel
   <i>
    n
   </i>
   sending data out. (R/W/SC)
  </p>
  <p block-type="Text">
   Continued on the next page...
  </p>
  <h4>
   Continued from the previous page...
  </h4>
  <p block-type="Text">
   RMT_DIV_CNT_CH
   <i>
    n
   </i>
   This field is used to configure the divider for clock of channel
   <i>
    n
   </i>
   . (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_MEM_SIZE_CH
     <i>
      n
     </i>
     This register is used to configure the maximum number of memory blocks allocated to channel
     <i>
      n
     </i>
     . (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CARRIER_EFF_EN_CH
     <i>
      n
     </i>
     1: Add carrier modulation on the output signal only at data-sending state for channel
     <i>
      n
     </i>
     . 0: Add carrier modulation on the output signal at data-sending state and idle state for channel
     <i>
      n
     </i>
     . Only valid when RMT_CARRIER_EN_CH
     <i>
      n
     </i>
     is 1. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CARRIER_EN_CH
     <i>
      n
     </i>
     This is the carrier modulation enable-bit for channel
     <i>
      n
     </i>
     . 1: Add carrier modulation on the output signal. 0: No carrier modulation is added on output signal. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CARRIER_OUT_LV_CH
     <i>
      n
     </i>
     This bit is used to configure the position of carrier wave for channel
     <i>
      n
     </i>
     . (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   1'h0: add carrier wave on low level.
  </p>
  <p block-type="Text">
   1'h1: add carrier wave on high level.
  </p>
  <p block-type="Text">
   RMT_CONF_UPDATE_CH
   <i>
    n
   </i>
   Synchronization bit for channel
   <i>
    n
   </i>
   (WT)
  </p>
  <h4>
   Register 33.4. RMT_CH
   <i>
    m
   </i>
   CONF0_REG (
   <i>
    m
   </i>
   = 2, 3) (0x0018, 0x0020)
  </h4>
  <p>
   <span id="page-854-0">
   </span>
   <img src="_page_854_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_DIV_CNT_CH
   <i>
    m
   </i>
   This field is used to configure the clock divider of channel
   <i>
    m
   </i>
   . (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_IDLE_THRES_CH
     <i>
      m
     </i>
     This field is used to configure RX threshold. When no edge is detected on the input signal for continuous clock cycles longer than this field value, the receiver stops receiving data. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_MEM_SIZE_CH
     <i>
      m
     </i>
     This field is used to configure the maximum number of memory blocks allocated to channel
     <i>
      m
     </i>
     . (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CARRIER_EN_CH
     <i>
      m
     </i>
     This is the carrier modulation enable-bit for channel
     <i>
      m
     </i>
     . 1: Add carrier modulation on output signal. 0: No carrier modulation is added on output signal. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CARRIER_OUT_LV_CH
     <i>
      m
     </i>
     This bit is used to configure the position of carrier wave for channel
     <i>
      m
     </i>
     . (R/W)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   1'h0: add carrier wave on low level.
  </p>
  <p block-type="Text">
   1'h1: add carrier wave on high level.
  </p>
  <p>
   <span id="page-855-0">
   </span>
   <img src="_page_855_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_RX_EN_CH
   <i>
    m
   </i>
   Set this bit to enable the receiver to start receiving data in channel
   <i>
    m
   </i>
   . (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_MEM_WR_RST_CH
     <i>
      m
     </i>
     Set this bit to reset RAM write address accessed by the receiver for channel
     <i>
      m
     </i>
     . (WT)
    </li>
    <li block-type="ListItem">
     RMT_APB_MEM_RST_CH
     <i>
      m
     </i>
     Set this bit to reset RAM W/R address accessed by APB FIFO for channel
     <i>
      m
     </i>
     . (WT)
    </li>
    <li block-type="ListItem">
     RMT_MEM_OWNER_CH
     <i>
      m
     </i>
     This bit marks the ownership of channel
     <i>
      m
     </i>
     's RAM block. (R/W/SC)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   1'h1: Receiver is using the RAM.
  </p>
  <p block-type="Text">
   1'h0: APB bus is using the RAM.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_RX_FILTER_EN_CH
     <i>
      m
     </i>
     Set this bit to enable the receiver's filter for channel
     <i>
      m
     </i>
     . (R/W)
    </li>
    <li block-type="ListItem">
     RMT_RX_FILTER_THRES_CH
     <i>
      m
     </i>
     When receiving data, the receiver ignores the input pulse when its width is shorter than this register value in units of rmt_sclk cycles. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_MEM_RX_WRAP_EN_CH
     <i>
      m
     </i>
     Set this bit to enable wrap RX mode for channel
     <i>
      m
     </i>
     . In this mode, if the RX data size is larger than channel
     <i>
      m
     </i>
     's RAM block size, the receiver stores the RX data from the first address to the last address in loops. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CONF_UPDATE_CH
     <i>
      m
     </i>
     Synchronization bit for channel
     <i>
      m
     </i>
     . (WT)
    </li>
   </ul>
  </p>
  <h4>
   Register 33.6. RMT_SYS_CONF_REG (0x0068)
  </h4>
  <p>
   <span id="page-856-0">
   </span>
   <img src="_page_856_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_APB_FIFO_MASK 1'h1: Access memory directly. 1'h0: Access memory by FIFO. (R/W)
  </p>
  <p block-type="Text">
   RMT_MEM_CLK_FORCE_ON Set this bit to enable the clock for RMT memory. (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_MEM_FORCE_PD Set this bit to power down RMT memory. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_MEM_FORCE_PU 1: Disable the power-down function of RMT memory in Light-sleep. 0: Power down RMT memory when RMT is in Light-sleep mode. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_SCLK_DIV_NUM The integral part of the fractional divider. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_SCLK_DIV_A The numerator of the fractional part of the fractional divider. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_SCLK_DIV_B The denominator of the fractional part of the fractional divider. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_SCLK_SEL Choose the clock source of rmt_sclk. 1: APB_CLK; 2: RC_FAST_CLK; 3: XTAL_CLK. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_SCLK_ACTIVE rmt_sclk switch. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CLK_EN The enable signal of RMT register clock gate. 1: Power up the drive clock of registers. 0: Power down the drive clock of registers. (R/W)
    </li>
   </ul>
  </p>
  <p>
   <img src="_page_856_Figure_12.jpeg"/>
  </p>
  <p>
   <span id="page-856-1">
   </span>
   <img src="_page_856_Figure_13.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_REF_CNT_RST_CH0 This bit is used to reset the clock divider of channel 0. (WT)
  </p>
  <p block-type="Text">
   RMT_REF_CNT_RST_CH1 This bit is used to reset the clock divider of channel 1. (WT)
  </p>
  <p block-type="Text">
   RMT_REF_CNT_RST_CH2 This bit is used to reset the clock divider of channel 2. (WT)
  </p>
  <p block-type="Text">
   RMT_REF_CNT_RST_CH3 This bit is used to reset the clock divider of channel 3. (WT)
  </p>
  <h4>
   Register 33.8. RMT_CH
   <i>
    n
   </i>
   STATUS_REG (
   <i>
    n
   </i>
   = 0, 1) (0x0028, 0x002C)
  </h4>
  <p>
   <span id="page-857-0">
   </span>
   <img src="_page_857_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_MEM_RADDR_EX_CH
     <i>
      n
     </i>
     This field records the memory address offset when transmitter of channel
     <i>
      n
     </i>
     is using the RAM. (RO)
    </li>
    <li block-type="ListItem">
     RMT_STATE_CH
     <i>
      n
     </i>
     This field records the FSM status of channel
     <i>
      n
     </i>
     . (RO)
    </li>
    <li block-type="ListItem">
     RMT_APB_MEM_WADDR_CH
     <i>
      n
     </i>
     This field records the memory address offset when writes RAM over APB bus. (RO)
    </li>
    <li block-type="ListItem">
     RMT_APB_MEM_RD_ERR_CH
     <i>
      n
     </i>
     This status bit will be set if the offset address is out of memory size (overflows) when reads RAM via APB bus. (RO)
    </li>
    <li block-type="ListItem">
     RMT_MEM_EMPTY_CH
     <i>
      n
     </i>
     This status bit will be set when the TX data size is larger than the memory size and the wrap TX mode is disabled. (RO)
    </li>
    <li block-type="ListItem">
     RMT_APB_MEM_WR_ERR_CH
     <i>
      n
     </i>
     This status bit will be set if the offset address is out of memory size (overflows) when writes via APB bus. (RO)
    </li>
    <li block-type="ListItem">
     RMT_APB_MEM_RADDR_CH
     <i>
      n
     </i>
     This field records the memory address offset when reads RAM over APB bus. (RO)
    </li>
   </ul>
  </p>
  <h4>
   Register 33.9. RMT_CH
   <i>
    m
   </i>
   STATUS_REG (
   <i>
    m
   </i>
   = 2, 3) (0x0030, 0x0034)
  </h4>
  <p>
   <span id="page-858-0">
   </span>
   <img src="_page_858_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_MEM_WADDR_EX_CH
     <i>
      m
     </i>
     This field records the memory address offset when the receiver of channel
     <i>
      m
     </i>
     is using the RAM. (RO)
    </li>
    <li block-type="ListItem">
     RMT_APB_MEM_RADDR_CH
     <i>
      m
     </i>
     This field records the memory address offset when reads RAM over APB bus. (RO)
    </li>
    <li block-type="ListItem">
     RMT_STATE_CH
     <i>
      m
     </i>
     This field records the FSM status of channel
     <i>
      m
     </i>
     . (RO)
    </li>
    <li block-type="ListItem">
     RMT_MEM_OWNER_ERR_CH
     <i>
      m
     </i>
     This status bit will be set when the ownership of memory block is wrong. (RO)
    </li>
    <li block-type="ListItem">
     RMT_MEM_FULL_CH
     <i>
      m
     </i>
     This status bit will be set if the receiver receives more data than the memory can fit. (RO)
    </li>
    <li block-type="ListItem">
     RMT_APB_MEM_RD_ERR_CH
     <i>
      m
     </i>
     This status bit will be set if the offset address is out of memory size (overflows) when reads RAM via APB bus. (RO)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-859-0">
   </span>
   <img src="_page_859_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_CH0_TX_END_INT_RAW The interrupt raw bit of RMT_CH0_TX_END_INT. (R/WTC/SS)
  </p>
  <p block-type="Text">
   RMT_CH1_TX_END_INT_RAW The interrupt raw bit of RMT_CH1_TX_END_INT. (R/WTC/SS)
  </p>
  <p block-type="Text">
   RMT_CH2_RX_END_INT_RAW The interrupt raw bit of
   <a href="#page-849-0">
    RMT_CH2_RX_END_INT
   </a>
   . (R/WTC/SS)
  </p>
  <p block-type="Text">
   RMT_CH3_RX_END_INT_RAW The interrupt raw bit of
   <a href="#page-849-0">
    RMT_CH3_RX_END_IN
   </a>
   T. (R/WTC/SS)
  </p>
  <p block-type="Text">
   RMT_CH0_ERR_INT_RAW The interrupt raw bit of RM
   <a href="#page-849-0">
    T_CH0_ERR_INT. (R/WTC
   </a>
   /SS)
  </p>
  <p block-type="Text">
   RMT_CH1_ERR_INT_RAW The interrupt raw bit of RMT
   <a href="#page-849-0">
    _CH1_ERR_INT. (R/WTC/
   </a>
   SS)
  </p>
  <p block-type="Text">
   RMT_CH2_ERR_INT_RAW The interrupt raw bit of
   <a href="#page-849-0">
    RMT_CH2_ERR_INT.
   </a>
   (R/WTC/SS)
  </p>
  <p block-type="TextInlineMath">
   RMT_CH3_ERR_INT_RAW The interrupt raw bit of
   <a href="#page-849-0">
    RMT_CH3_ERR_INT
   </a>
   . (R/WTC/SS)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_CH0_TX_THR_EVENT_INT_RAW The interr
     <a href="#page-849-0">
      upt raw bit of
     </a>
     RMT_CH0_TX_THR_EVENT_INT. (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     RMT_CH1_TX_THR_EVENT_INT_RAW The interrupt raw bit of
     <a href="#page-849-0">
      RMT_CH0_TX_THR_EVENT_INT.
     </a>
     (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     RMT_CH2_RX_THR_EVENT_INT_RAW The interrupt raw bit of
     <a href="#page-849-0">
      RMT_CH2_RX_THR_EVENT_INT.
     </a>
     (R/WTC/SS)
    </li>
    <li block-type="ListItem">
     RMT_CH3_RX_THR_EVENT_INT_RAW The interrupt raw bit of
     <a href="#page-849-0">
      RMT_CH3_RX_THR_EVENT_INT.
     </a>
     (R/WTC/SS)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RMT_CH0_TX_LOOP_INT_RAW The interrupt raw bit of RMT_CH0
   <a href="#page-849-0">
    _TX_LOOP_INT. (R/WTC/SS)
   </a>
  </p>
  <p>
   RMT_CH1_TX_LOOP_INT_RAW The interrupt raw bit of RMT_CH1_TX_LOOP_INT. (R/WTC/SS)
  </p>
  <span id="page-860-0">
  </span>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Register 33.11. RMT_INT_ST_REG (0x003C)
      <br/>
      RMT_CH2_RX_THR_EVENT_INT_ST
      <br/>
      RMT_CH3_RX_THR_EVENT_INT_ST
      <br/>
      RMT_CH0_TX_THR_EVENT_INT_ST
      <br/>
      RMT_CH1_TX_THR_EVENT_INT_ST
      <br/>
      RMT_CH0_TX_LOOP_INT_ST
      <br/>
      RMT_CH1_TX_LOOP_INT_ST
      <br/>
      RMT_CH3_RX_END_INT_ST
      <br/>
      RMT_CH2_RX_END_INT_ST
      <br/>
      RMT_CH1_TX_END_INT_ST
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      RMT_CH3_ERR_INT_ST
      <br/>
      RMT_CH2_ERR_INT_ST
      <br/>
      RMT_CH0_ERR_INT_ST
      <br/>
      RMT_CH1_ERR_INT_ST
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      (reserved)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      31
      <br/>
      0
     </th>
     <th>
      14
      <br/>
      13
      <br/>
      12
      <br/>
      11
      <br/>
      10
      <br/>
      9
      <br/>
      8
      <br/>
      7
      <br/>
      6
      <br/>
      5
      <br/>
      4
      <br/>
      3
      <br/>
      2
      <br/>
      1
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      0
      <br/>
      Reset
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      RMT_CH0_TX_END_INT_ST
      <br/>
      The masked interrupt status bit for RMT_CH0_TX_END_INT. (RO)
      <br/>
      RMT_CH1_TX_END_INT_ST
      <br/>
      The masked interrupt status bit for RMT_CH1_TX_END_INT. (RO)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      RMT_CH2_RX_END_INT_ST
      <br/>
      The masked interrupt status bit for RMT_CH2_RX_END_INT. (RO)
      <br/>
      RMT_CH3_RX_END_INT_ST
      <br/>
      The masked interrupt status bit for RMT_CH3_RX_END_INT. (RO)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      RMT_CH0_ERR_INT_ST
      <br/>
      The masked interrupt status bit for RMT_CH0_ERR_INT. (RO)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      RMT_CH1_ERR_INT_ST
      <br/>
      The masked interrupt status bit for RMT_CH1_ERR_INT. (RO)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      RMT_CH2_ERR_INT_ST
      <br/>
      The masked interrupt status bit for RMT_CH2_ERR_INT. (RO)
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      RMT_CH3_ERR_INT_ST
      <br/>
      The masked interrupt status bit for RMT_CH3_ERR_INT. (RO)
      <br/>
      RMT_CH0_TX_THR_EVENT_INT_ST
      <br/>
      The
      <br/>
      masked
      <br/>
      interrupt
      <br/>
      status
      <br/>
      bit
      <br/>
      for
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
     </th>
     <th>
      RMT_CH0_TX_THR_EVENT_INT. (RO)
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      RMT_CH1_TX_THR_EVENT_INT_ST
      <br/>
      The
     </th>
     <th>
      masked
     </th>
     <th>
      interrupt
     </th>
     <th>
      status
     </th>
     <th>
      bit
     </th>
     <th>
      for
     </th>
    </tr>
    <tr>
     <th>
      RMT_CH1_TX_THR_EVENT_INT. (RO)
      <br/>
      RMT_CH2_RX_THR_EVENT_INT_ST
      <br/>
      The
     </th>
     <th>
      masked
     </th>
     <th>
      interrupt
     </th>
     <th>
      status
     </th>
     <th>
      bit
     </th>
     <th>
      for
     </th>
    </tr>
    <tr>
     <th>
      RMT_CH2_RX_THR_EVENT_INT. (RO)
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="Text">
   RMT_CH0_TX_LOOP_INT_ST The masked interrupt status bit for RMT_CH0_TX_LOOP_INT. (RO)
  </p>
  <p block-type="Text">
   RM
   <a href="#page-849-0">
    T_CH1_TX_LOOP_INT_ST
   </a>
   The masked interrupt status bit for RMT_CH1_TX_LOOP_INT. (RO)
  </p>
  <p>
   <span id="page-861-0">
   </span>
   <img src="_page_861_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_CH0_TX_END_INT_ENA The interrupt enable bit for RMT_CH0_TX_END_INT. (R/W)
  </p>
  <p block-type="Text">
   RMT_CH1_TX_END_INT_ENA The interrupt enable bit for RMT_CH1_TX_END_INT. (R/W)
  </p>
  <p block-type="Text">
   RMT_CH2_RX_END_INT_ENA The interrupt enable bit for
   <a href="#page-849-0">
    RMT_CH2_RX_END_INT
   </a>
   . (R/W)
  </p>
  <p block-type="Text">
   RMT_CH3_RX_END_INT_ENA The interrupt enable bit for
   <a href="#page-849-0">
    RMT_CH3_RX_END_IN
   </a>
   T. (R/W)
  </p>
  <p block-type="Text">
   RMT_CH0_ERR_INT_ENA The interrupt enable bit for RM
   <a href="#page-849-0">
    T_CH0_ERR_INT. (R/W)
   </a>
  </p>
  <p block-type="Text">
   RMT_CH1_ERR_INT_ENA The interrupt enable bit for RMT
   <a href="#page-849-0">
    _CH1_ERR_INT. (R/W)
   </a>
  </p>
  <p block-type="Text">
   RMT_CH2_ERR_INT_ENA The interrupt enable bit for
   <a href="#page-849-0">
    RMT_CH2_ERR_INT.
   </a>
   (R/W)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_CH3_ERR_INT_ENA The interrupt enable bit for
     <a href="#page-849-0">
      RMT_CH3_ERR_INT
     </a>
     . (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CH0_TX_THR_EVENT_INT_ENA The interrupt e
     <a href="#page-849-0">
      nable bit for
     </a>
     RMT_CH0_TX_THR_EVENT_INT. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CH1_TX_THR_EVENT_INT_ENA The interrupt enable bit for
     <a href="#page-849-0">
      RMT_CH1_TX_THR_EVENT_INT.
     </a>
     (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CH2_RX_THR_EVENT_INT_ENA The interrupt enable bit for
     <a href="#page-849-0">
      RMT_CH2_RX_THR_EVENT_INT.
     </a>
     (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CH3_RX_THR_EVENT_INT_ENA The interrupt enable bit for
     <a href="#page-849-0">
      RMT_CH3_RX_THR_EVENT_INT.
     </a>
     (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CH0_TX_LOOP_INT_ENA The interrupt enable bit for RMT_C
     <a href="#page-849-0">
      H0_TX_LOOP_INT. (R/W)
     </a>
    </li>
   </ul>
  </p>
  <p>
   RMT_CH1_TX_LOOP_INT_ENA The interrupt enable bit for RMT_CH1_TX_LOOP_INT. (R/W)
  </p>
  <h4>
   Register 33.13. RMT_INT_CLR_REG (0x0044)
  </h4>
  <p>
   <span id="page-862-0">
   </span>
   <img src="_page_862_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_CH0_TX_END_INT_CLR Set this bit to clear the RMT_CH0_TX_END_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH1_TX_END_INT_CLR Set this bit to clear the RMT_CH1_TX_END_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH2_RX_END_INT_CLR Set this bit to clear the
   <a href="#page-849-0">
    RMT_CH2_RX_END_IN
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH3_RX_END_INT_CLR Set this bit to clear the
   <a href="#page-849-0">
    RMT_CH3_RX_END_IN
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH0_ERR_INT_CLR Set this bit to clear the RM
   <a href="#page-849-0">
    T_CH0_ERR_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH1_ERR_INT_CLR Set this bit to clear the RMT
   <a href="#page-849-0">
    _CH1_ERR_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH2_ERR_INT_CLR Set this bit to clear the
   <a href="#page-849-0">
    RMT_CH2_ERR_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH3_ERR_INT_CLR Set this bit to clear the
   <a href="#page-849-0">
    RMT_CH3_ERR_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH0_TX_THR_EVENT_INT_CLR Set this bit
   <a href="#page-849-0">
    to clear the
   </a>
   RMT_CH0_TX_THR_EVENT_INT interrupt. (WT)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_CH1_TX_THR_EVENT_INT_CLR Set this bit to clear the
     <a href="#page-849-0">
      RMT_CH1_TX_THR_EVENT_INT
     </a>
     interrupt. (WT)
    </li>
    <li block-type="ListItem">
     RMT_CH2_RX_THR_EVENT_INT_CLR Set this bit to clear the
     <a href="#page-849-0">
      RMT_CH2_RX_THR_EVENT_INT
     </a>
     interrupt. (WT)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   RMT_CH3_RX_THR_EVENT_INT_CLR Set this bit to clear the
   <a href="#page-849-0">
    RMT_CH3_RX_THR_EVENT_INT
   </a>
   interrupt. (WT)
  </p>
  <p block-type="Text">
   RMT_CH0_TX_LOOP_INT_CLR Set this bit to clear the RMT_
   <a href="#page-849-0">
    CH0_TX_LOOP_INT
   </a>
   interrupt. (WT)
  </p>
  <p>
   RMT_CH1_TX_LOOP_INT_CLR Set this bit to clear the RMT_CH1_TX_LOOP_INT interrupt. (WT)
  </p>
  <p block-type="Text">
   Register 33.14. RMT_CH
   <i>
    n
   </i>
   CARRIER_DUTY_REG (
   <i>
    n
   </i>
   = 0, 1) (0x0048, 0x004C)
  </p>
  <p>
   <span id="page-863-0">
   </span>
   <img src="_page_863_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_CARRIER_LOW_CH
   <i>
    n
   </i>
   This field is used to configure carrier wave's low level clock period for channel
   <i>
    n
   </i>
   . (R/W)
  </p>
  <p block-type="Text">
   RMT_CARRIER_HIGH_CH
   <i>
    n
   </i>
   This field is used to configure carrier wave's high level clock period for channel
   <i>
    n
   </i>
   . (R/W)
  </p>
  <p block-type="Text">
   Register 33.15. RMT_CH
   <i>
    m
   </i>
   _RX_CARRIER_RM_REG (
   <i>
    m
   </i>
   = 2, 3) (0x0050, 0x0054)
  </p>
  <p block-type="Text">
   <span id="page-863-1">
   </span>
   RMT_CARRIER_HIGH_THRES_CH
   <i>
    <sup>
     m
    </sup>
   </i>
   0x00 31 16 RMT_CARRIER_LOW_THRES_CH
   <i>
    <sup>
     m
    </sup>
   </i>
   0x00 15 0 Reset
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_CARRIER_LOW_THRES_CH
     <i>
      m
     </i>
     The low level period in a carrier modulation mode is (RMT_CARRIER_LOW_THRES_CH
     <i>
      m
     </i>
     + 1) for channel
     <i>
      m
     </i>
     . (R/W)
    </li>
    <li block-type="ListItem">
     RMT_CARRIER_HIGH_THRES_CH
     <i>
      m
     </i>
     The high level period in a carrier modulation mode is (RMT_CARRIER_HIGH_THRES_CH
     <i>
      m
     </i>
     + 1) for channel
     <i>
      m
     </i>
     . (R/W)
    </li>
   </ul>
  </p>
  <p>
   <span id="page-864-0">
   </span>
   <img src="_page_864_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_TX_LIM_CH
     <i>
      n
     </i>
     This field is used to configure the maximum entries that channel
     <i>
      n
     </i>
     can send out. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_TX_LOOP_NUM_CH
     <i>
      n
     </i>
     This field is used to configure the maximum loop count when continuous TX mode is enabled. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_TX_LOOP_CNT_EN_CH
     <i>
      n
     </i>
     This bit is the enable bit for loop counting. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_LOOP_COUNT_RESET_CH
     <i>
      n
     </i>
     This bit is used to reset the loop count when continuous TX mode is enabled. (WT)
    </li>
   </ul>
  </p>
  <h4>
   Register 33.17. RMT_TX_SIM_REG (0x006C)
  </h4>
  <p>
   <span id="page-864-1">
   </span>
   <img src="_page_864_Figure_7.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     RMT_TX_SIM_CH0 Set this bit to enable channel 0 to start sending data synchronously with other enabled channels. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_TX_SIM_CH1 Set this bit to enable channel 1 to start sending data synchronously with other enabled channels. (R/W)
    </li>
    <li block-type="ListItem">
     RMT_TX_SIM_EN This bit is used to enable multiple of channels to start sending data synchronously. (R/W)
    </li>
   </ul>
  </p>
  <p>
   Register 33.18. RMT_CH
   <i>
    m
   </i>
   _RX_LIM_REG (
   <i>
    m
   </i>
   = 2, 3) (0x0060, 0x0064)
  </p>
  <p>
   <span id="page-865-0">
   </span>
   <img src="_page_865_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   RMT_RX_LIM_CH
   <i>
    m
   </i>
   This field is used to configure the maximum entries that channel
   <i>
    m
   </i>
   can receive. (R/W)
  </p>
  <h4>
   Register 33.19. RMT_DATE_REG (0x00CC)
  </h4>
  <p>
   <span id="page-865-1">
   </span>
   <img src="_page_865_Figure_4.jpeg"/>
  </p>
  <p>
   RMT_DATE Version control register. (R/W)
  </p>
  <h1>
   Part VI
  </h1>
  <h1>
   Analog Signal Processing
  </h1>
  <p block-type="Text">
   <span id="page-866-0">
   </span>
   This part describes components related to analog-to-digital conversion, on-chip sensors, and features such as temperature sensing, demonstrating the system's capabilities in handling analog signals.
  </p>
  <h1>
   <span id="page-867-0">
   </span>
   Chapter 34
  </h1>
  <h1>
   On-Chip Sensor and Analog Signal Processing
  </h1>
  <h1>
   34.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-867-1">
   </span>
   ESP32-C3 provides the following on-chip sensor and analog signal processing peripherals:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-867-5">
     </span>
     <i>
      •
     </i>
     Two 12-bit Successive Approximation ADCs (SAR ADCs): SAR ADC1 and SAR ADC2, for measuring analog signals from six channels.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     One temperature sensor for measuring the internal temperature of the ESP32-C3 chip.
    </li>
   </ul>
  </p>
  <h1>
   34.2 SAR ADCs
  </h1>
  <h1>
   <span id="page-867-2">
   </span>
   34.2.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-867-3">
   </span>
   ESP32-C3 integrates two 12-bit SAR ADCs, which are able to measure analog signals from up to six pins. The SAR ADCs are managed by two dedicated controllers:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DIG ADC controller: drives Digital_Reader0 and Digital_Reader1 to sample channel voltages of SAR ADC1 and SAR ADC2, respectively. This DIG ADC controller supports high-performance multi-channel scanning and DMA continuous conversion.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     PWDET controller: monitor
     <a href="#page-868-1">
      s RF power. Note
     </a>
     thi
     <a href="#page-868-1">
      s controller is on
     </a>
     ly for RF internal use.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   The DIG ADC controller of SAR ADC2 for ESP32-C3 does not work properly and it is suggested to use SAR ADC1. For more information, please refer to ESP32-C3 Series SoC Errata.
  </p>
  <h1>
   34.2.2 Features
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-867-4">
     </span>
     <i>
      •
     </i>
     Each SAR ADC has its own ADC Reader module (Digital_Reader0 or Digital_Reader1), which can be configured and operated separately.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support 12-bit sampling resolution
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Support sampling the analog voltages from up t
     <a href="#page-868-1">
      o six pins
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DIG ADC controller:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Provides separate control modules for one-time sampling and multi-channel scanning.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       One-time sampling and multi-channel scanning can be run independently on each ADC.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Channel scanning sequence in multi-channel scanning mode is user-defined.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      <b>
       Espressif Systems
      </b>
     </th>
     <th>
      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     </th>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     Provides two filters with configurable filter coefficient.
    </li>
    <li block-type="ListItem">
     Supports threshold monitoring. An interrupt will be triggered when the sampled value is greater than the pre-set high threshold or less than the pre-set low threshold.
    </li>
    <li block-type="ListItem">
     Supports DMA
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     PWDET controller: monitors RF power (for internal use only)
    </li>
   </ul>
  </p>
  <h1>
   34.2.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-868-0">
   </span>
   The major components of SAR ADCs and their interconnections are shown in Figure 34.2-1.
  </p>
  <p>
   <span id="page-868-1">
   </span>
   <img src="_page_868_Figure_6.jpeg"/>
  </p>
  <p>
   —: data flow; —: clock signal; —: ADC control signal
  </p>
  <p>
   Figure 34.2-1. SAR ADCs Function Overview
  </p>
  <p block-type="Text">
   As shown in Figure 34.2-1, the SAR ADC module consists of the following components:
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SAR ADC1: measures voltages from up to five channels.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     SAR ADC2: m
     <a href="#page-868-1">
      easure
     </a>
     s the voltage from one channel.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Clock management: selects clock sources and their dividers:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Clock sources: can be APB_CLK or PLL_240.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Divided Clocks:
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * SAR_CLK: operating clock for SAR ADC1, SAR ADC2, Digital_Reader0, and Digital_Reader1. Note that the divider (sar_div) of SAR_ADC must be no less than 2.
        </li>
       </ul>
       <ul>
        <li block-type="ListItem" class="list-indent-2">
         * ADC_CTRL_CLK: operating clock for DIG ADC FSM.
        </li>
       </ul>
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Arbiter: this arbiter determines which controller is selected as the ADC2's working controller, DIG ADC controller or PWDET controller.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Digital_Reader0 (driven by DIG ADC FSM): reads data from SAR ADC1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Digital_Reader1 (driven by DIG ADC FSM): reads data from SAR ADC2.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     DIG ADC FSM: generates the signals required throughout the ADC sampling process.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Threshold monitor
     <i>
      x
     </i>
     : threshold monitor 1 and threshold monitor 2. The monitor
     <i>
      x
     </i>
     will trigger a interrupt when the sampled value is greater than the pre-set high threshold or less than the pre-set low threshold.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The following sections describe the individual components in details.
  </p>
  <h4>
   34.2.3.1 Input Signals
  </h4>
  <p block-type="Text">
   <span id="page-869-3">
   </span>
   <span id="page-869-0">
   </span>
   In order to sample an analog signal, an SAR ADC must first select the analog pin to measure via an internal multiplexer. A summary of all the analog signals that may be sent to the SAR ADC module for processing by either ADC1 or ADC2 are presented in Table 34.2-1.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
      Table 34.2-1. SAR ADC Input Signals
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Signal
     </td>
     <td>
      Channel
     </td>
     <td>
      ADC Selection
     </td>
    </tr>
    <tr>
     <td>
      GPIO0
     </td>
     <td>
      0
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GPIO1
     </td>
     <td>
      1
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      GPIO2
     </td>
     <td>
      2
     </td>
     <td>
      SAR ADC1
     </td>
    </tr>
    <tr>
     <td>
      GPIO3
     </td>
     <td>
      3
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 34.2-1. SAR ADC Input Signals
  </p>
  <h4>
   34.2.3.2 ADC Conversion and Attenuation
  </h4>
  <p block-type="Text">
   <span id="page-869-1">
   </span>
   When the SAR ADCs convert an analog voltage, the resolution (12-bit) of the conversion spans voltage range from 0 mV to
   <i>
    Vref
   </i>
   .
   <i>
    Vref
   </i>
   is the SAR ADC's internal reference voltage (1100 mV by design). The output value of the conversion (data) is mapped to analog voltage
   <i>
    Vdata
   </i>
   using the following formula:
  </p>
  <p block-type="Equation">
   <math display="block">
    V_{data} = \frac{V_{ref}}{4095} \times data
   </math>
  </p>
  <p block-type="Text">
   In order to convert voltages larger than
   <i>
    Vref
   </i>
   , input signals can be attenuated before being input into the SAR ADCs. The attenuation can be configured to 0 dB, 2.5 dB, 6 dB, and 12 dB.
  </p>
  <h4>
   34.2.3.3 DIG ADC Controller
  </h4>
  <p block-type="Text">
   <span id="page-869-2">
   </span>
   The clock of the DIG ADC controller is quite fast, thus the sample rate is high. For more information, see Section ADC Characteristics in ESP32-C3 Series Datasheet.
  </p>
  <p block-type="Text">
   This controller supports:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     up to 12-bit sampling res
     <a href="https://www.espressif.com/sites/default/files/documentation/esp32-c3_datasheet_en.pdf">
      olution
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     software-triggered one-time sampling
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     timer-triggered multi-channel scanning
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Espressif Systems 870
  </p>
  <p block-type="Text">
   The configuration of a one-time sampling triggered by the software is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Select SAR ADC1 or SAR ADC2 to perform a one-time sampling:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       if APB_SARADC1_ONETIME_SAMPLE is set, SAR ADC1 is selected.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       if APB_SARADC2_ONETIME_SAMPLE is set, SAR ADC2 is selected.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure
     <a href="#page-880-0">
      APB_SARADC_ONETIME_CHAN
     </a>
     NEL to select one channel to sample.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure
     <a href="#page-880-0">
      APB_SARADC_ONETIME_ATTEN
     </a>
     to set attenuation.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure
     <a href="#page-880-0">
      APB_SARADC_ONETIME_START
     </a>
     to start this one-time sampling.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     On compl
     <a href="#page-880-0">
      etion of sampling,
     </a>
     APB_SARADC_ADC
     <i>
      x
     </i>
     _DONE_INT_RAW interrupt is generated. Software can use this interrupt to initiate reading of the sample values from APB_SARADC_ADC
     <i>
      x
     </i>
     _DATA.
     <i>
      x
     </i>
     can be 1 or 2. 1: SAR
     <a href="#page-880-0">
      ADC1; 2: SAR ADC2.
     </a>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If the timer-triggered multi-chann
   <a href="#page-885-0">
    el scanning is selected, follow the confi
   </a>
   guration below. Note that in this mode, the scan sequence is performed according to the configura
   <a href="#page-882-0">
    tion entered into pattern tab
   </a>
   le.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure APB_SARADC_TIMER_TARGET to set the trigger target for DIG ADC timer. When the timer counting reaches two times of the pre-configured cycle number, a sampling operation is triggered. For the working clock of the timer, see Section 34.2.3.4.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure
     <a href="#page-879-0">
      APB_SARADC_TIMER_EN
     </a>
     to enable the timer.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the timer times out, it drives DIG ADC
     <a href="#page-870-0">
      FSM to s
     </a>
     tart sampling according to the pattern table;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Sampled
     <a href="#page-879-0">
      data is automatically stored
     </a>
     in memory via DMA. An interrupt is triggered once the scan is completed.
    </li>
   </ul>
  </p>
  <h4>
   Note:
  </h4>
  <p block-type="Text">
   Any SAR ADC can not be configured to perform both one-time sampling and multi-channel scanning at the same time. Therefore, if a pattern table is configured to use any SAR ADC for multi-channel scanning, then this SAR ADC can not be configured to perform one-time sampling.
  </p>
  <h4>
   34.2.3.4 DIG ADC Clock
  </h4>
  <p block-type="Text">
   <span id="page-870-0">
   </span>
   Two clocks can be used as the working clock of DIG ADC controller, depending on the configuration of APB_SARADC_CLK_SEL:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     1: Select the clock (ADC_CTRL_CLK) divided from PLL_240.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="#page-887-0">
      0: Select APB_CLK
     </a>
     .
    </li>
   </ul>
  </p>
  <p block-type="Text">
   If ADC_CTRL_CLK is selected, users can configure the divider by APB_SARADC_CLKM_DIV_NUM. Note that due to speed limits of SAR ADCs, the operating clock of Digital_Reader0, SAR ADC1, Digital_Reader1, and SAR ADC2 is SAR_CLK, the frequency of which affects the sampling precision. The lower the frequency, the higher the precision. SAR_CLK is divided from ADC_CTRL_CLK. The divi
   <a href="#page-887-0">
    der coefficient is configured by
   </a>
   APB_SARADC_SAR_CLK_DIV.
  </p>
  <p block-type="Text">
   <span id="page-870-1">
   </span>
   The ADC needs 25 SAR_CLK clock cycles per sample, so the maximum sampling rate is limited by the SAR_CLK frequency.
  </p>
  <h4>
   34.2.3.5 DMA Support
  </h4>
  <p block-type="Text">
   DIG ADC controller supports direct memory access via peripheral DMA, which is triggered by DIG ADC timer. Users can switch the DMA data path to DIG ADC by configuring APB_SARADC_APB_ADC_TRANS via software. For specific DMA configuration, please refer to Chapter 2
   <i>
    GDMA Controller (GDMA)
   </i>
   .
  </p>
  <h2>
   34.2.3.6 DIG ADC FSM
  </h2>
  <h4>
   <span id="page-871-0">
   </span>
   Overview
  </h4>
  <p block-type="Text">
   <span id="page-871-1">
   </span>
   Figure 34.2-2 shows the diagram of DIG ADC FSM.
  </p>
  <p>
   <img src="_page_871_Figure_5.jpeg"/>
  </p>
  <p>
   Figure 34.2-2. Diagram of DIG ADC FSM
  </p>
  <p block-type="Text">
   Wherein:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Timer: a dedicated timer for DIG ADC controller, to generate a sample_start signal.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     pr: the pointer to pattern table entries. FSM sends out corresponding signals based on the configuration of the pattern table entry that the pointer points to.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The execution process is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure APB_SARADC_TIMER_EN to enable the DIG ADC timer. The timeout event of this timer triggers an sample_start signal. This signal drives the FSM module to start sampling.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the FSM module receives the sample_start signal, it starts the following operations:
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Pow
       <a href="#page-879-0">
        er up SAR ADC.
       </a>
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Select SAR ADC1 or SAR ADC2 as the working ADC, configure the ADC channel and attenuation, based on the pattern table entry that the current pr points to.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       According to the configuration information, output the corresponding en_pad and atten signals to the analog side.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Initiate the sar_start signal and start sampling.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      <b>
       Espressif Systems
      </b>
     </th>
     <th>
      872
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     When the FSM receives the reader_done signal from ADC Reader (Digital_Reader0 or Digital_Reader1), it will
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       stop sampling,
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       transfer the data to the filter, and then threshold monitor transfers the data to memory via DMA,
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       update the pattern table pointer pr and wait for the next sampling. Note that if the pointer pr is smaller than APB_SARADC_SAR_PATT_LEN (table_length), then pr = pr + 1, otherwise, pr is cleared.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h4>
   Pattern Table
  </h4>
  <p block-type="Text">
   There is one pattern ta
   <a href="#page-878-0">
    ble in the controller, consisting
   </a>
   of the APB_SARADC_SAR_PATT_TAB1_REG and APB_SARADC_SAR_PATT_TAB2_REG registers, see Figure 34.2-3 and Figure 34.2-4:
  </p>
  <p>
   <img src="_page_872_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   cmd
   <i>
    x
   </i>
   represents pattern table entries.
   <i>
    x
   </i>
   here is the index, 0 ~ 3.
  </p>
  <h4>
   Figure 34.2-3. APB_SARADC_SAR_PATT_TAB1_REG and Pattern Table Entry 0 - Entry 3
  </h4>
  <p>
   <span id="page-872-0">
   </span>
   <img src="_page_872_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   cmd
   <i>
    x
   </i>
   represents pattern table entries.
   <i>
    x
   </i>
   here is the index, 4 ~ 7.
  </p>
  <p>
   <img src="_page_872_Figure_11.jpeg"/>
  </p>
  <p block-type="Text">
   <span id="page-872-1">
   </span>
   Each register consists of four 6-bit pattern table entries. Each entry is composed of three fields that contain working ADC, ADC channel and attenuation information, as shown in Table 34.2-5.
  </p>
  <p>
   <img src="_page_872_Figure_13.jpeg"/>
  </p>
  <p>
   Figure 34.2-5. Pattern Table Entry
  </p>
  <p block-type="Text">
   atten Attenuation. 0: 0 dB; 1: 2.5 dB; 2: 6 dB; 3: 12 dB.
  </p>
  <p block-type="Text">
   <span id="page-872-2">
   </span>
   ch_sel ADC channel, see Table 34.2-1.
  </p>
  <p block-type="Text">
   sar_sel Working ADC. 0: SAR ARC1; 1: SAR ADC2.
  </p>
  <h4>
   Configuration of multi-channel scanni
   <a href="#page-869-3">
    ng
   </a>
  </h4>
  <p block-type="Text">
   In this example, two channels are selected for multi-channel scanning:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Channel 2 of SAR ADC1, with the attenuation of 12 dB
  </p>
  <p block-type="Text">
   Espressif Systems 873
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Channel 0 of SAR ADC2, with the attenuation of 2.5 dB
  </p>
  <p block-type="Text">
   The detailed configuration is as follows:
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Configure the first pattern table entry (cmd0):
  </p>
  <p>
   <img src="_page_873_Figure_3.jpeg"/>
  </p>
  <p>
   Figure 34.2-6. cmd0 Configuration
  </p>
  <p block-type="Text">
   atten write the value of 3 to this field, to set the attenuation to 12 dB.
  </p>
  <p block-type="Text">
   ch_sel write the value of 2 to this field, to select channel 2 (see Table 34.2-1).
  </p>
  <p block-type="Text">
   sar_sel write the value of 0 to this bit, to select SAR ADC1 as the working ADC.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Configure the second pattern table entry (cmd1):
  </p>
  <p>
   <img src="_page_873_Figure_9.jpeg"/>
  </p>
  <p>
   Figure 34.2-7. cmd1 configuration
  </p>
  <p block-type="Text">
   atten write the value of 1 to this field, to set the attenuation to 2.5 dB.
  </p>
  <p block-type="Text">
   ch_sel write the value of 0 to this field, to select channel 0 (see Table 34.2-1).
  </p>
  <p block-type="Text">
   sar_sel write the value of 1 to this bit, to select SAR ADC2 as the working ADC.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure APB_SARADC_SAR_PATT_LEN to 1, i.e., set pattern table length to
     <a href="#page-869-3">
      (this va
     </a>
     lue + 1 = 2). Then pattern table entries cmd0 and cmd1 will be used.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Enable the timer, then DIG ADC controller starts scanning the two channels in cycles, as configured in the patter
     <a href="#page-878-0">
      n table entries.
     </a>
    </li>
   </ul>
  </p>
  <h4>
   DMA Data Format
  </h4>
  <p block-type="Text">
   The ADC eventually passes 32-bit data to the DMA, see the figure below.
  </p>
  <p>
   <img src="_page_873_Figure_18.jpeg"/>
  </p>
  <p>
   Figure 34.2-8. DMA Data Format
  </p>
  <p block-type="Text">
   data SAR ADC read value, 12-bit
  </p>
  <p block-type="Text">
   ch_sel Channel, 3-bit
  </p>
  <p block-type="Text">
   <span id="page-873-0">
   </span>
   sar_sel SAR ADC selection, 1-bit
  </p>
  <h4>
   34.2.3.7 ADC Filters
  </h4>
  <p block-type="Text">
   The DIG ADC controller provides two filters for automatic filtering of sampled ADC data. Both filters can be configured to any channel of either SAR ADC and then filter the sampled data for the target channel. The filter's formula is shown below:
  </p>
  <p block-type="Equation">
   <math display="block">
    data_{cur} = \frac{(k-1)data_{prev}}{k} + \frac{data_{in}}{k} + 0.5
   </math>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      • datacur
     </i>
     : the filtered data value.
    </li>
    <li block-type="ListItem">
     <i>
      • datain
     </i>
     : the sampled data value from the ADC.
    </li>
    <li block-type="ListItem">
     <i>
      • dataprev
     </i>
     : the last filtered data value.
    </li>
    <li block-type="ListItem">
     <i>
      • k
     </i>
     : the filter coefficient.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The filters are configured as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure APB_SARADC_FILTER_CHANNEL
     <i>
      x
     </i>
     to select the ADC channel for filter
     <i>
      x
     </i>
     ;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure APB_SARADC_FILTER_FACTOR
     <i>
      x
     </i>
     to set the coefficient for filter
     <i>
      x
     </i>
     ;
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that
   <i>
    x
   </i>
   is u
   <a href="#page-881-0">
    sed here as the placeholder of filte
   </a>
   r index. 0: filter 0; 1: filter 1.
  </p>
  <h1>
   34.2.3.8 Th
   <a href="#page-881-0">
    reshold Monitoring
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-874-0">
   </span>
   DIG ADC controller contains two threshold monitors that can be configured to monitor on any channel of SAR ADC1 and SAR ADC2. A high threshold interrupt is triggered when the ADC sample value is larger than the pre-configured high threshold, and a low threshold interrupt is triggered if the sample value is lower than the pre-configured low threshold.
  </p>
  <p block-type="Text">
   The configuration of threshold monitoring is as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set APB_SARADC_THRES
     <i>
      x
     </i>
     _EN to enable threshold monitor
     <i>
      x
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure APB_SARADC_THRES
     <i>
      x
     </i>
     _LOW to set a low threshold;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure
     <a href="#page-883-0">
      APB_SARADC_THRES
     </a>
     <i>
      x
     </i>
     _HIGH to set a high threshold;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configure
     <a href="#page-883-1">
      APB_SARADC_THRES
     </a>
     <i>
      x
     </i>
     _CHANNEL to select the SAR ADC and the channel to monitor.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Note that
   <i>
    x
   </i>
   is u
   <a href="#page-883-1">
    sed here as the placeholder o
   </a>
   f monitor index. 0: monitor 0; 1: monitor 1.
  </p>
  <h4>
   34.2.3.9 S
   <a href="#page-883-1">
    AR ADC2 Arbiter
   </a>
  </h4>
  <p block-type="Text">
   <span id="page-874-1">
   </span>
   SAR ADC2 can be controlled by two controllers, namely, DIG ADC controller and PWDET controller. To avoid any possible conflicts and to improve the efficiency of SAR ADC2, ESP32-C3 provides an arbiter for SAR ADC2. The arbiter supports fair arbitration and fixed priority arbitration.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Fair arbitration mode (cyclic priority arbitration) can be enabled by clearing APB_SARADC_ADC_ARB_FIX_ PRIORITY.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     In fixed priority arbitration, users can set APB_SARADC_ADC_ARB_APB_PRIORITY (for DIG ADC controller) and
     <a href="#page-881-1">
      APB_SARADC_A
     </a>
     DC_ARB_WIFI_PRIORITY (for PWDET controller), to configure the
     <a href="#page-881-1">
      priorities f
     </a>
     or these controllers. A larger value indicates a higher priority.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   The arbiter ensures that a higher priority controller can always start a conversion (sample) when required, regardless of whether a lower priority controller already has a conversion in progress. If a higher priority controller starts a conversion whilst the ADC already has a conversion in progress from a lower priority controller, the conversion in progress will be interrupted (stopped). The higher priority controller will then start its conversion. A lower priority controller will not be able to start a conversion whilst the ADC has a conversion in progress from a higher priority controller.
  </p>
  <p block-type="Text">
   Therefore, certain data flags are embedded into the output data value to indicate whether the conversion is valid or not.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The data flag for DIG ADC controller is the {sar_sel, ch_sel} bits in DMA data, see Figure 34.2-8.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       4'b1111: Conversion is interrupted.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       4'b1110: Conversion is not started.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       Corresponding channel No.: The data is valid.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     The data flag for PWDET controller is the two higher bits of the sampling result.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2'b10: Conversion is interrupted.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2'b01: Conversion is not started.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       2'b00: The data is valid.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Users can configure APB_SARADC_ADC_ARB_GRANT_FORCE to mask the arbiter, and set APB_SARADC_ADC_ARB_WIFI_FORCE or APB_SARADC_ADC_ARB_APB_FORCE to authorize corresponding controllers.
  </p>
  <h1>
   34.3
   <a href="#page-881-1">
    Temperature Se
   </a>
   n
   <a href="#page-881-1">
    sor
   </a>
  </h1>
  <h1>
   <span id="page-875-0">
   </span>
   34.3.1 Overview
  </h1>
  <p block-type="Text">
   <span id="page-875-1">
   </span>
   ESP32-C3 provides a temperature sensor to monitor temperature changes inside the chip in real time.
  </p>
  <h1>
   34.3.2 Features
  </h1>
  <p block-type="Text">
   <span id="page-875-2">
   </span>
   The temperature sensor has the following features:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Supports software triggering and, once triggered, the data can be read continuously
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Configurable temperature offset based on the environment, to improve the accuracy
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Adjustable measurement range
    </li>
   </ul>
  </p>
  <h1>
   34.3.3 Functional Description
  </h1>
  <p block-type="Text">
   <span id="page-875-3">
   </span>
   The temperature sensor can be started by software as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set APB_SARADC_TSENS_PU to start XPD_SAR, and then to enable temperature sensor;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Set SYSTEM_TSENS_CLK_EN to enable temperature sensor clock;
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Wait for
     <a href="#page-887-1">
      APB_SARADC_TSENS_
     </a>
     XPD_WAIT clock cycles till the reset of temperature sensor is released, the sensor starts measuring the temperature;
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   Wait for a while and then read the data from APB_SARADC_TSENS_OUT. The output value gradually approaches the actual temperature linearly as the measurement time increases.
  </p>
  <p block-type="Text">
   The actual temperature (°C) can be obtained by converting the output of temperature sensor via the following formula:
  </p>
  <p block-type="Equation">
   <math display="block">
    T(^{\circ}C) = 0.4386 * VALUE - 27.88 * offset - 20.52
   </math>
  </p>
  <p block-type="Text">
   VALUE in the formula is the output of the temperature sensor, and the offset is determined by the temperature offset. The temperature offset varies in different actual environment (the temperature range). For details, refer to Table 34.3-1.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Table 34.3-1. Temperature Offset
     </td>
    </tr>
    <tr>
     <td>
      Measurement Range (°C)
     </td>
     <td>
      Temperature Offset (°C)
     </td>
    </tr>
    <tr>
     <td>
      50 ~ 125
     </td>
     <td>
      -2
     </td>
    </tr>
    <tr>
     <td>
      20 ~ 100
     </td>
     <td>
      -1
     </td>
    </tr>
    <tr>
     <td>
      -10 ~ 80
     </td>
     <td>
      0
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 34.3-1. Temperature Offset
  </p>
  <h1>
   34.4 Interrupts
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-876-1">
     </span>
     <i>
      •
     </i>
     APB_SARADC_ADC1_DONE_INT: Triggered when SAR ADC1 completes one data conversion.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     APB_SARADC_ADC2_DONE_INT: Triggered when SAR ADC2 completes one data conversion.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     APB_SARADC_THRES
     <i>
      x
     </i>
     _HIGH_INT: Triggered when the sampling value is higher than the high threshold of monitor
     <i>
      x
     </i>
     .
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     APB_SARADC_THRES
     <i>
      x
     </i>
     _LOW_INT: Triggered when the sampling value is lower than the low threshold of monitor
     <i>
      x
     </i>
     .
    </li>
   </ul>
  </p>
  <h1>
   34.5 Register Summary
  </h1>
  <p block-type="Text">
   <span id="page-876-0">
   </span>
   The addresses in this section are relative to the ADC controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <p block-type="Text">
   The abbreviations given in Column Access are explained in Section
   <i>
    Access Types for Registers
   </i>
   .
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <th>
      Name
     </th>
     <th>
      Description
     </th>
     <th>
      Address
     </th>
     <th>
      Access
     </th>
    </tr>
    <tr>
     <td>
      Configuration Registers
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_CTRL_REG
     </td>
     <td>
      SAR ADC control register 1
     </td>
     <td>
      0x0000
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_CTRL2_REG
     </td>
     <td>
      SAR ADC control register 2
     </td>
     <td>
      0x0004
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_FILTER_CTRL1_REG
     </td>
     <td>
      Filtering control register 1
     </td>
     <td>
      0x0008
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_SAR_PATT_TAB1_REG
     </td>
     <td>
      Pattern table register 1
     </td>
     <td>
      0x0018
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_SAR_PATT_TAB2_REG
      <br/>
      APB_SARADC_ONETIME_SAMPLE_REG
     </td>
     <td>
      Pattern table register 2
      <br/>
      Configuration
      <br/>
      register
      <br/>
      for
      <br/>
      one
     </td>
     <td>
      0x001C
      <br/>
      0x0020
     </td>
     <td>
      R/W
      <br/>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Chapter 34
      <br/>
      On-Chip Sensor and Analog Signal Processing
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
      GoBack
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Name
     </td>
     <td>
      Description
     </td>
     <td>
      Address
     </td>
     <td>
      Access
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_APB_ADC_ARB_CTRL_REG
     </td>
     <td>
      SAR
      <br/>
      ADC2
      <br/>
      arbiter
      <br/>
      configuration
     </td>
     <td>
      0x0024
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      register
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_FILTER_CTRL0_REG
     </td>
     <td>
      Filtering control register 0
     </td>
     <td>
      0x0028
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_1_DATA_STATUS_REG
     </td>
     <td>
      SAR ADC1 sampling data register
     </td>
     <td>
      0x002C
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_2_DATA_STATUS_REG
     </td>
     <td>
      SAR ADC2 sampling data register
     </td>
     <td>
      0x0030
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_THRES0_CTRL_REG
     </td>
     <td>
      Sampling threshold control regis
     </td>
     <td>
      0x0034
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_THRES1_CTRL_REG
     </td>
     <td>
      ter 0
      <br/>
      Sampling threshold control regis
     </td>
     <td>
      0x0038
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      ter 1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_THRES_CTRL_REG
     </td>
     <td>
      Sampling threshold control regis
     </td>
     <td>
      0x003C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      ter
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_INT_ENA_REG
     </td>
     <td>
      Enable register of SAR ADC inter
     </td>
     <td>
      0x0040
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      rupts
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_INT_RAW_REG
     </td>
     <td>
      Raw register of SAR ADC interrupts
     </td>
     <td>
      0x0044
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_INT_ST_REG
     </td>
     <td>
      State register of SAR ADC inter
     </td>
     <td>
      0x0048
     </td>
     <td>
      RO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      rupts
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_INT_CLR_REG
     </td>
     <td>
      Clear register of SAR ADC inter
     </td>
     <td>
      0x004C
     </td>
     <td>
      WO
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      rupts
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_DMA_CONF_REG
     </td>
     <td>
      DMA configuration register for SAR
     </td>
     <td>
      0x0050
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      ADC
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_APB_ADC_CLKM_CONF_REG
     </td>
     <td>
      SAR ADC clock control register
     </td>
     <td>
      0x0054
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_APB_TSENS_CTRL_REG
     </td>
     <td>
      Temperature sensor control regis
     </td>
     <td>
      0x0058
     </td>
     <td>
      varies
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      ter 1
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      APB_SARADC_APB_TSENS_CTRL2_REG
     </td>
     <td>
      Temperature sensor control regis
      <br/>
      ter 2
     </td>
     <td>
      0x005C
     </td>
     <td>
      R/W
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <h1>
   34.6
   <a href="#page-888-1">
    Register
   </a>
  </h1>
  <p block-type="Text">
   <span id="page-877-0">
   </span>
   The addresses in this section are relative to the ADC controller base address provided in Table 3.3-3 in Chapter 3
   <i>
    System and Memory
   </i>
   .
  </p>
  <h4>
   Register 34.1. APB_SARADC_CTRL_REG (0x0000)
  </h4>
  <p>
   <span id="page-878-0">
   </span>
   <img src="_page_878_Figure_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     APB_SARADC_START_FORCE 0: select FSM to start SAR ADC. 1: select software to start SAR ADC. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_START Write 1 here to start the SAR ADC by software. Valid only when APB_SARADC_START_FORCE = 1. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_SAR_CLK_GATED SAR ADC clock gate enable bit. (R/W)
    </li>
    <li block-type="ListItem">
     AP
     <a href="#page-878-0">
      B_SARADC_SAR_CLK_DIV
     </a>
     SAR ADC clock divider. This value should be no less than 2. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_SAR_PATT_LEN Configure how many pattern table entries will be used. If this field is set to 1, then pattern table entries (cmd0) and (cmd1) will be used. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_SAR_PATT_P_CLEAR Clear the pointer of pattern table entry for DIG ADC controller. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_XPD_SAR_FORCE Force select XPD SAR. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_WAIT_ARB_CYCLE The clock cycles of waiting arbitration signal stable after SAR_DONE. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 34.2. APB_SARADC_CTRL2_REG (0x0004)
  </h4>
  <p>
   <span id="page-879-0">
   </span>
   <img src="_page_879_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_MEAS_NUM_LIMIT Enable the limitation of SAR ADCs maximum conversion times. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_MAX_MEAS_NUM The SAR ADCs maximum conversion times. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_SAR1_INV Write 1 here to invert the data of SAR ADC1. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_SAR2_INV Write 1 here to invert the data of SAR ADC2. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_TIMER_TARGET Set SAR ADC timer target. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_TIMER_EN Enable SAR ADC timer trigger. (R/W)
  </p>
  <p>
   <img src="_page_879_Figure_8.jpeg"/>
  </p>
  <p>
   <span id="page-879-1">
   </span>
   <img src="_page_879_Figure_9.jpeg"/>
  </p>
  <p>
   APB_SARADC_FILTER_FACTOR1 The filter coefficient for SAR ADC filter 1. (R/W) APB_SARADC_FILTER_FACTOR0 The filter coefficient for SAR ADC filter 0. (R/W)
  </p>
  <p>
   <img src="_page_880_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-880-1">
   </span>
   <img src="_page_880_Figure_1.jpeg"/>
  </p>
  <p>
   APB_SARADC_SAR_PATT_TAB1 Pattern table entries 0 ~ 3 (each entry is six bits). (R/W)
  </p>
  <h4>
   Register 34.5. APB_SARADC_SAR_PATT_TAB2_REG (0x001C)
  </h4>
  <p>
   <img src="_page_880_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_SAR_PATT_TAB2 Pattern table entries 4 ~ 7 (each entry is six bits). (R/W)
  </p>
  <p>
   <span id="page-880-0">
   </span>
   <img src="_page_880_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_ONETIME_ATTEN Configure the attenuation for a one-time sampling. (R/W) APB_SARADC_ONETIME_CHANNEL Configure the channel for a one-time sampling. (R/W) APB_SARADC_ONETIME_START Start SAR ADC one-time sampling. (R/W) APB_SARADC2_ONETIME_SAMPLE Enable SAR ADC2 one-time sampling. (R/W) APB_SARADC1_ONETIME_SAMPLE Enable SAR ADC1 one-time sampling. (R/W)
  </p>
  <h4>
   Register 34.7. APB_SARADC_APB_ADC_ARB_CTRL_REG (0x0024)
  </h4>
  <p>
   <span id="page-881-1">
   </span>
   <img src="_page_881_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_ADC_ARB_APB_FORCE SAR ADC2 arbiter forces to enable DIG ADC controller. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_ADC_ARB_WIFI_FORCE SAR ADC2 arbiter forces to enable PWDET controller. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_ADC_ARB_GRANT_FORCE ADC2 arbiter force grant. (R/W) APB_SARADC_ADC_ARB_APB_PRIORITY Set DIG ADC controller priority. (R/W) APB_SARADC_ADC_ARB_WIFI_PRIORITY Set PWDET controller priority. (R/W) APB_SARADC_ADC_ARB_FIX_PRIORITY ADC2 arbiter uses fixed priority. (R/W)
  </p>
  <p block-type="Text">
   Register 34.8. APB_SARADC_FILTER_CTRL0_REG (0x0028)
  </p>
  <p>
   <span id="page-881-0">
   </span>
   <img src="_page_881_Figure_6.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_FILTER_CHANNEL1 The filter channel for SAR ADC filter 1. (R/W) APB_SARADC_FILTER_CHANNEL0 The filter channel for SAR ADC filter 0. (R/W) APB_SARADC_FILTER_RESET Reset SAR ADC1 filter. (R/W)
  </p>
  <p>
   <span id="page-882-0">
   </span>
   <img src="_page_882_Figure_0.jpeg"/>
  </p>
  <p>
   APB_SARADC_ADC1_DATA SAR ADC1 conversion data. (RO)
  </p>
  <p>
   <span id="page-882-1">
   </span>
   <img src="_page_882_Figure_2.jpeg"/>
  </p>
  <p>
   APB_SARADC_ADC2_DATA SAR ADC2 conversion data. (RO)
  </p>
  <p>
   <img src="_page_882_Figure_4.jpeg"/>
  </p>
  <p>
   <img src="_page_882_Figure_5.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_THRES0_CHANNEL The channel for SAR ADC monitor 0. (R/W) APB_SARADC_THRES0_HIGH The high threshold for SAR ADC monitor 0. (R/W) APB_SARADC_THRES0_LOW The low threshold for SAR ADC monitor 0. (R/W)
  </p>
  <h4>
   Register 34.12. APB_SARADC_THRES1_CTRL_REG (0x0038)
  </h4>
  <p>
   <span id="page-883-1">
   </span>
   <img src="_page_883_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_THRES1_CHANNEL The channel for SAR ADC monitor 1. (R/W) APB_SARADC_THRES1_HIGH The high threshold for SAR ADC monitor 1. (R/W) APB_SARADC_THRES1_LOW The low threshold for SAR ADC monitor 1. (R/W)
  </p>
  <p>
   <span id="page-883-0">
   </span>
   <img src="_page_883_Figure_3.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_THRES_ALL_EN Enable the threshold monitoring for all configured channels. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_THRES1_EN Enable threshold monitor 1. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_THRES0_EN Enable threshold monitor 0. (R/W)
  </p>
  <h4>
   Register 34.14. APB_SARADC_INT_ENA_REG (0x0040)
  </h4>
  <p>
   <span id="page-884-0">
   </span>
   <img src="_page_884_Picture_1.jpeg"/>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     APB_SARADC_THRES1_LOW_INT_ENA Enable bit of APB_SARADC_THRES1_LOW_INT interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_THRES0_LOW_INT_ENA Enable bit of
     <a href="#page-876-1">
      APB_SARADC_THRES0_LOW_INT
     </a>
     interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_THRES1_HIGH_INT_ENA Enable bit of
     <a href="#page-876-1">
      APB_SARADC_THRES1_HIGH_INT
     </a>
     interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_THRES0_HIGH_INT_ENA Enable bit of
     <a href="#page-876-1">
      APB_SARADC_THRES0_HIGH_INT
     </a>
     interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_ADC2_DONE_INT_ENA Enable bit of
     <a href="#page-876-1">
      APB_SARADC_ADC2_DONE_INT
     </a>
     interrupt. (R/W)
    </li>
    <li block-type="ListItem">
     APB_SARADC_ADC1_DONE_INT_ENA Enable bit of
     <a href="#page-876-1">
      APB_SARADC_ADC1_DONE_INT
     </a>
     interrupt. (R/W)
    </li>
   </ul>
  </p>
  <h4>
   Register 34.15. APB_SARADC_INT_RAW_REG (0x0044)
  </h4>
  <p>
   <span id="page-885-0">
   </span>
   <img src="_page_885_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_THRES1_LOW_INT_RAW Raw bit of APB_SARADC_THRES1_LOW_INT interrupt. (RO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     APB_SARADC_THRES0_LOW_INT_RAW Raw bit of APB_SARADC_THRES0_LOW_INT interrupt. (RO)
    </li>
    <li block-type="ListItem">
     APB_SARADC_THRES1_HIGH_INT_RAW Raw bit of
     <a href="#page-876-1">
      APB_SARADC_THRES1_HIGH_INT
     </a>
     interrupt. (RO)
    </li>
    <li block-type="ListItem">
     APB_SARADC_THRES0_HIGH_INT_RAW Raw bit of
     <a href="#page-876-1">
      APB_SARADC_THRES0_HIGH_INT
     </a>
     interrupt. (RO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   APB_SARADC_ADC2_DONE_INT_RAW Raw bit of AP
   <a href="#page-876-1">
    B_SARADC_ADC2_DONE_INT
   </a>
   interrupt. (RO)
  </p>
  <p block-type="Text">
   APB_SARADC_ADC1_DONE_INT_RAW Raw bit of APB_SARADC_ADC1_DONE_INT interrupt. (RO)
  </p>
  <p>
   <img src="_page_885_Picture_8.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_THRES1_LOW_INT_ST Status of APB_SARADC_THRES1_LOW_INT interrupt. (RO) APB_SARADC_THRES0_LOW_INT_ST Status of APB_SARADC_THRES0_LOW_INT interrupt. (RO) APB_SARADC_THRES1_HIGH_INT_ST Status of
   <a href="#page-876-1">
    APB_SARADC_THRES1_HIGH_INT
   </a>
   interrupt. (RO) APB_SARADC_THRES0_HIGH_INT_ST Status of
   <a href="#page-876-1">
    APB_SARADC_THRES0_HIGH_IN
   </a>
   T interrupt. (RO) APB_SARADC_ADC2_DONE_INT_ST Status of
   <a href="#page-876-1">
    APB_SARADC_ADC2_DONE_INT
   </a>
   interrupt. (RO) APB_SARADC_ADC1_DONE_INT_ST Status of A
   <a href="#page-876-1">
    PB_SARADC_ADC1_DONE_INT
   </a>
   interrupt. (RO)
  </p>
  <h4>
   Register 34.17. APB_SARADC_INT_CLR_REG (0x004C)
  </h4>
  <p>
   <img src="_page_886_Picture_1.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_THRES1_LOW_INT_CLR Clear bit of APB_SARADC_THRES1_LOW_INT interrupt. (WO)
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     APB_SARADC_THRES0_LOW_INT_CLR Clear bit of
     <a href="#page-876-1">
      APB_SARADC_THRES0_LOW
     </a>
     _INT interrupt. (WO)
    </li>
    <li block-type="ListItem">
     APB_SARADC_THRES1_HIGH_INT_CLR Clear bit of
     <a href="#page-876-1">
      APB_SARADC_THRES1_HIGH_INT
     </a>
     interrupt. (WO)
    </li>
    <li block-type="ListItem">
     APB_SARADC_THRES0_HIGH_INT_CLR Clear bit of
     <a href="#page-876-1">
      APB_SARADC_THRES0_HIGH_INT
     </a>
     interrupt. (WO)
    </li>
   </ul>
  </p>
  <p block-type="Text">
   APB_SARADC_ADC2_DONE_INT_CLR Clear bit of AP
   <a href="#page-876-1">
    B_SARADC_ADC2_DONE_INT
   </a>
   interrupt. (WO)
  </p>
  <p block-type="Text">
   APB_SARADC_ADC1_DONE_INT_CLR Clear bit of
   <a href="#page-876-1">
    APB_SARADC_ADC1_DONE_INT
   </a>
   interrupt. (WO)
  </p>
  <p>
   <span id="page-886-0">
   </span>
   <img src="_page_886_Figure_8.jpeg"/>
  </p>
  <h4>
   Register 34.18. APB_SARADC
   <a href="#page-876-1">
    _DMA_CONF_REG (0x0050)
   </a>
  </h4>
  <p block-type="Text">
   APB_SARADC_APB_ADC_EOF_NUM Generate dma_in_suc_eof when sample cnt = eof_num. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_APB_ADC_RESET_FSM Reset DIG ADC controller status. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_APB_ADC_TRANS When this bit is set, DIG ADC controller uses DMA. (R/W)
  </p>
  <h4>
   Register 34.19. APB_SARADC_APB_ADC_CLKM_CONF_REG (0x0054)
  </h4>
  <p>
   <span id="page-887-0">
   </span>
   <img src="_page_887_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_CLKM_DIV_NUM The integer part of ADC clock divider. Divider value = APB_SARADC_CLKM_DIV_NUM + APB_SARADC_CLKM_DIV_B/APB_SARADC_CLKM_DIV_A. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_CLKM_DIV_B The numerator value of fractional clock divider. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_CLKM_DIV_A The denominator value of fractional clock divider. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_CLK_EN Enable the SAR ADC register clock. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_CLK_SEL 0: Use APB_CLK as clock source, 1: use divided-down PLL_240 as clock source. (R/W)
  </p>
  <p>
   <span id="page-887-1">
   </span>
   <img src="_page_887_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   Register 34.20. APB_SARADC_APB_TSENS_CTRL_REG (0x0058)
  </p>
  <p block-type="Text">
   APB_SARADC_TSENS_OUT Temperature sensor data out. (RO)
  </p>
  <p block-type="Text">
   APB_SARADC_TSENS_IN_INV Invert temperature sensor input value. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_TSENS_CLK_DIV Temperature sensor clock divider. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_TSENS_PU Temperature sensor power up. (R/W)
  </p>
  <p>
   <img src="_page_888_Figure_0.jpeg"/>
  </p>
  <p>
   <span id="page-888-0">
   </span>
   <img src="_page_888_Figure_1.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_TSENS_XPD_WAIT The wait time before temperature sensor is powered up. (R/W)
  </p>
  <p block-type="Text">
   APB_SARADC_TSENS_CLK_SEL Choose working clock for temperature sensor. 0: RC_FAST_CLK. 1: XTAL_CLK. (R/W)
  </p>
  <p>
   <img src="_page_888_Figure_4.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_CALI_CFG Configure the SAR ADC calibration factor. (R/W)
  </p>
  <p>
   <img src="_page_888_Figure_6.jpeg"/>
  </p>
  <p>
   <span id="page-888-1">
   </span>
   <img src="_page_888_Figure_7.jpeg"/>
  </p>
  <p block-type="Text">
   APB_SARADC_DATE Version register. (R/W)
  </p>
  <h1>
   Part VII
  </h1>
  <h1>
   Appendix
  </h1>
  <p block-type="Text">
   <span id="page-889-0">
   </span>
   This part contains the following information starting from the next page:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      • Related Documentation and Resources
     </i>
    </li>
    <li block-type="ListItem">
     <i>
      • Glossary
     </i>
    </li>
    <li block-type="ListItem">
     <i>
      •
      <a href="#page-890-0">
       Programming Reserved Register Field
      </a>
     </i>
    </li>
    <li block-type="ListItem">
     <i>
      •
      <a href="#page-891-0">
       Interrupt
      </a>
      Configuration Registers
     </i>
    </li>
    <li block-type="ListItem">
     <i>
      •
      <a href="#page-894-0">
       Revision History
      </a>
     </i>
    </li>
   </ul>
  </p>
  <h1>
   Related Documentation and Resources
  </h1>
  <h1>
   <span id="page-890-0">
   </span>
   Related Documentation
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ESP32-C3 Series Datasheet  Specifications of the ESP32-C3 hardware.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ESP32-C3 Hardware Design Guidelines  Guidelines on how to integrate the ESP32-C3 into your hardware product.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="https://espressif.com/documentation/esp32-c3_datasheet_en.pdf">
      ESP32-C3
     </a>
     Series SoC Errata  Descriptions of known errors in ESP32-C3 series of SoCs.
    </li>
    <li block-type="ListItem">
     <i>
      •
      <a href="https://espressif.com/documentation/esp32-c3_hardware_design_guidelines_en.pdf">
       Certificates
      </a>
     </i>
     https://espressif.com/en/support/documents/certificates
    </li>
    <li block-type="ListItem">
     <i>
      •
      <a href="https://espressif.com/sites/default/files/documentation/esp32-c3_errata_en.pdf">
       ESP32-C3 Product/Process
      </a>
      Change Notifications (PCN)
     </i>
     https://espressif.com/en/support/documents/pcns?keys=ESP32-C3
    </li>
    <li block-type="ListItem">
     <i>
      • ESP32-C3 Advisories
     </i>
     <a href="https://espressif.com/en/support/documents/certificates">
      Information on security, bugs, compa
     </a>
     tibility, component reliability. https://espressif.com/en/support/documents/advisories?keys=ESP32-C3
    </li>
    <li block-type="ListItem">
     <i>
      •
      <a href="https://espressif.com/en/support/documents/pcns?keys=ESP32-C3">
       Documentation Updates and Update Notification Subscription
      </a>
     </i>
     https://espressif.com/en/support/download/documents
    </li>
   </ul>
  </p>
  <h1>
   Dev
   <a href="https://espressif.com/en/support/documents/advisories?keys=ESP32-C3">
    eloper Zone
   </a>
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ESP-IDF
     <a href="https://espressif.com/en/support/download/documents">
      Programming
     </a>
     Guide for ESP32-C3  Extensive documentation for the ESP-IDF development framework.
    </li>
    <li block-type="ListItem">
     <i>
      • ESP-IDF
     </i>
     and other development frameworks on GitHub. https://github.com/espressif
    </li>
    <li block-type="ListItem">
     <i>
      • ESP32 BBS Forum
     </i>
     <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32c3/get-started/index.html">
      Engineer-to-Engineer (E2
     </a>
     E) Community for Espressif products where you can post questions, share knowledge, explore ideas, and help solve problems with fellow engineers.
     <a href="https://github.com/espressif">
      https://esp32.com/
     </a>
    </li>
    <li block-type="ListItem">
     <i>
      • The ESP Journal
     </i>
     Best Practices, Articles, and Notes from Espressif folks. https://blog.espressif.com/
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     <a href="https://esp32.com/">
      See the tabs
     </a>
     <i>
      SDKs and Demos
     </i>
     ,
     <i>
      Apps
     </i>
     ,
     <i>
      Tools
     </i>
     ,
     <i>
      AT Firmware
     </i>
     . https://espressif.com/en/support/download/sdks-demos
    </li>
   </ul>
  </p>
  <h1>
   Pro
   <a href="https://blog.espressif.com/">
    ducts
   </a>
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      • ESP32-C3 Series SoCs
     </i>
     <a href="https://espressif.com/en/support/download/sdks-demos">
      Browse through all ESP32-C3 SoCs
     </a>
     . https://espressif.com/en/products/socs?id=ESP32-C3
    </li>
    <li block-type="ListItem">
     <i>
      • ESP32-C3 Series Modules
     </i>
     Browse through all ESP32-C3-based modules. https://espressif.com/en/products/modules?id=ESP32-C3
    </li>
    <li block-type="ListItem">
     <i>
      • ESP32-C3 Series DevKits
     </i>
     <a href="https://espressif.com/en/products/socs?id=ESP32-C3">
      Browse through all ESP32-C3-
     </a>
     based devkits. https://espressif.com/en/products/devkits?id=ESP32-C3
    </li>
    <li block-type="ListItem">
     <i>
      • ESP Product Selector
     </i>
     <a href="https://espressif.com/en/products/modules?id=ESP32-C3">
      Find an Espressif hardware product suita
     </a>
     ble for your needs by comparing or applying filters. https://products.espressif.com/#/product-selector?language=en
    </li>
   </ul>
  </p>
  <h1>
   Co
   <a href="https://espressif.com/en/products/devkits?id=ESP32-C3">
    ntact Us
   </a>
  </h1>
  <p block-type="Text">
   <i>
    •
   </i>
   See the tabs
   <i>
    Sales Questions
   </i>
   ,
   <i>
    <a href="https://products.espressif.com/#/product-selector?language=en">
     Technical Enquiries
    </a>
   </i>
   ,
   <i>
    Circuit Schematic &amp; PCB Design Review
   </i>
   ,
   <i>
    Get Samples
   </i>
   (Online stores),
   <i>
    Become Our Supplier
   </i>
   ,
   <i>
    Comments &amp; Suggestions
   </i>
   . https://espressif.com/en/contact-us/sales-questions
  </p>
  <h1>
   Glossary
  </h1>
  <h1>
   <span id="page-891-1">
   </span>
   <span id="page-891-0">
   </span>
   Abbreviations for Peripherals
  </h1>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <span id="page-891-4">
     </span>
     AES AES (Advanced Encryption Standard) Accelerator
    </li>
    <li block-type="ListItem">
     DS Digital Signature
    </li>
    <li block-type="ListItem">
     DMA DMA (Direct Memory Access) Controller
    </li>
    <li block-type="ListItem">
     eFuse eFuse Controller
    </li>
    <li block-type="ListItem">
     HMAC HMAC (Hash-based Message Authentication Code) Accelerator
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       I2C I2C (Inter-Integrated Circuit) Controller
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       I2S I2S (Inter-IC Sound) Controller
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     LEDC LED Control PWM (Pulse Width Modulation)
    </li>
    <li block-type="ListItem">
     RMT Remote Control Peripheral
    </li>
    <li block-type="ListItem">
     RNG Random Number Generator
    </li>
    <li block-type="ListItem">
     RSA RSA (Rivest Shamir Adleman) Accelerator
    </li>
    <li block-type="ListItem">
     SHA SHA (Secure Hash Algorithm) Accelerator
    </li>
    <li block-type="ListItem">
     SPI SPI (Serial Peripheral Interface) Controller
    </li>
    <li block-type="ListItem">
     SYSTIMER System Timer
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       TIMG Timer Group
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       TWAI Two-wire Automotive Interface
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       UART UART (Universal Asynchronous Receiver-Transmitter) Controller
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       WDT Watchdog Timers
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   <span id="page-891-2">
   </span>
   Abbreviations Related to Registers
  </h1>
  <h2>
   REG Register.
  </h2>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     SYSREG System registers are a group of registers that control system reset, memory, clocks, software interrupts, power management, clock gating, etc.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       ISO Isolation. If a peripheral or other chip component is powered down, the pins, if any, to which its output signals are routed will go into a floating state. ISO registers isolate such pins and keep them at a certain determined value, so that the other non-powered-down peripherals/devices attached to these pins are not affected.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       NMI Non-maskable interrupt is a hardware interrupt that cannot be disabled or ignored by the CPU instructions. Such interrupts exist to signal the occurrence of a critical error.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       W1TS Abbreviation added to names of registers/fields to indicate that such register/field should be used to set a field in a corresponding register with a similar name. For example, the register GPIO_ENABLE_W1TS_REG should be used to set the corresponding fields in the register GPIO_ENABLE_REG.
      </li>
     </ul>
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       W1TC Same as
       <i>
        W1TS
       </i>
       , but used to clear a field in a corresponding register.
      </li>
     </ul>
    </li>
   </ul>
  </p>
  <h1>
   Access Types for Registers
  </h1>
  <p block-type="Text">
   <span id="page-891-3">
   </span>
   Sections
   <i>
    Register Summary
   </i>
   and
   <i>
    Register Description
   </i>
   in TRM chapters specify access types for registers and their fields.
  </p>
  <p block-type="Text">
   Espressif Systems 892
  </p>
  <p block-type="Text">
   Most frequently used access types and their combinations are as follows:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RO
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WO
     <i>
      •
     </i>
     R/W/SS/SC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WT
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/W
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/W1
    </li>
    <li block-type="ListItem">
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     WL
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/WC/SS
    </li>
   </ul>
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   R/W/SS
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/WC/SC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/WC/SS/SC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/WS/SC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/W/SC
     <i>
      •
     </i>
     R/WS/SS
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/WS/SS/SC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/SS/WTC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/SC/WTC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/SS/SC/WTC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RF/WF
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     R/SS/RC
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     varies
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Descriptions of all access types are provided below.
  </p>
  <p block-type="ListGroup" class="has-continuation">
   <ul>
    <li block-type="ListItem">
     R Read. User application can read from this register/field; usually combined with other access types.
    </li>
    <li block-type="ListItem">
     RO Read only. User application can only read from this register/field.
    </li>
    <li block-type="ListItem">
     HRO Hardware Read Only. Only hardware can read from this register/field; used for storing default settings for variable parameters.
     <ul>
      <li block-type="ListItem" class="list-indent-1">
       W Write. User application can write to this register/field; usually combined with other access types.
      </li>
     </ul>
    </li>
    <li block-type="ListItem">
     WO Write only. User application can only write to this register/field.
    </li>
    <li block-type="ListItem">
     W1 Write Once. User application can write to this register/field only once; only allowed to write 1; writing 0 is invalid.
    </li>
    <li block-type="ListItem">
     SS Self set. On a specified event, hardware automatically writes 1 to this register/field; used with 1-bit fields.
    </li>
    <li block-type="ListItem">
     SC Self clear. On a specified event, hardware automatically writes 0 to this register/field; used with 1-bit and multi-bit fields.
    </li>
    <li block-type="ListItem">
     SM Self modify. On a specified event, hardware automatically writes a specified value to this register/field; used with multi-bit fields.
    </li>
    <li block-type="ListItem">
     SU Self update. On a specified event, hardware automatically updates this register/field; used with multi-bit fields.
    </li>
    <li block-type="ListItem">
     RS Read to set. If user application reads from this register/field, hardware automatically writes 1 to it.
    </li>
    <li block-type="ListItem">
     RC Read to clear. If user application reads from this register/field, hardware automatically writes 0 to it.
    </li>
    <li block-type="ListItem">
     RF Read from FIFO. If user application writes new data to FIFO, the register/field automatically reads it.
    </li>
    <li block-type="ListItem">
     WF Write to FIFO. If user application writes new data to this register/field, it automatically passes the data to FIFO via APB bus.
    </li>
    <li block-type="ListItem">
     WS Write any value to set. If user application writes to this register/field, hardware automatically sets this register/field.
    </li>
    <li block-type="ListItem">
     W1S Write 1 to set. If user application writes 1 to this register/field, hardware automatically sets this register/field.
    </li>
    <li block-type="ListItem">
     W0S Write 0 to set. If user application writes 0 to this register/field, hardware automatically sets this register/field.
    </li>
   </ul>
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     WC Write any value to clear. If user application writes to this register/field, hardware automatically clears this register/field.
    </li>
    <li block-type="ListItem">
     W1C Write 1 to clear. If user application writes 1 to this register/field, hardware automatically clears this register/field.
    </li>
    <li block-type="ListItem">
     W0C Write 0 to clear. If user application writes 0 to this register/field, hardware automatically clears this register/field.
    </li>
    <li block-type="ListItem">
     WT Write 1 to trigger an event. If user application writes 1 to this field, this action triggers an event (pulse in the APB bus) or clears a corresponding WTC field (see WTC).
    </li>
    <li block-type="ListItem">
     WTC Write to clear. Hardware automatically clears this field if user application writes 1 to the corresponding WT field (see WT).
    </li>
    <li block-type="ListItem">
     W1T Write 1 to toggle. If user application writes 1 to this field, hardware automatically inverts the corresponding field; otherwise - no effect.
    </li>
    <li block-type="ListItem">
     W0T Write 0 to toggle. If user application writes 0 to this field, hardware automatically inverts the corresponding field; otherwise - no effect.
    </li>
    <li block-type="ListItem">
     WL Write if a lock is deactivated. If the lock is deactivated, user application can write to this register/field.
    </li>
    <li block-type="ListItem">
     varies The access type varies. Different fields of this register might have different access types.
    </li>
   </ul>
  </p>
  <h1>
   Programming Reserved Register Field
  </h1>
  <h1>
   <span id="page-894-0">
   </span>
   Introduction
  </h1>
  <p block-type="Text">
   <span id="page-894-1">
   </span>
   A field in a register is reserved if the field is not open to users, or produces unpredictable results if configured to values other than defaults.
  </p>
  <h1>
   Programming Reserved Register Field
  </h1>
  <p block-type="Text">
   <span id="page-894-2">
   </span>
   The reserved fields should not be modified. It is not possible to write only part of a register since registers must always be written as a whole. As a result, to write an entire register that contains reserved fields, you can choose one of the following two options:
  </p>
  <p block-type="Text">
   1. Read the value of the register, modify only the fields you want to configure and then write back the value so that reserved fields are untouched.
  </p>
  <p block-type="Text">
   OR
  </p>
  <p block-type="Text">
   2. Modify only the fields you want to configure and write back the default value of the reserved fields. The default value of a field is provided in the "Reset" line of a register diagram. For example, the default value of Field_A in Register X is 1.
  </p>
  <p>
   <img src="_page_894_Figure_8.jpeg"/>
  </p>
  <p>
   <span id="page-894-3">
   </span>
   <img src="_page_894_Figure_9.jpeg"/>
  </p>
  <p block-type="Text">
   Suppose you want to set Field_A, Field_B, and Field_C of Register X to 0x0, 0x1, and 0x2, you can:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Use option 1 and fill in the reserved fields with the value you have just read. Suppose the register reads as 0x0000_0003. Then, you can modify the fields you want to configure, thus writing 0x0002_0002 to the register.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     Use option 2 and fill in the reserved fields with their defaults, thus writing 0x0002_0002 to the register.
    </li>
   </ul>
  </p>
  <h1>
   Interrupt Configuration Registers
  </h1>
  <p block-type="Text">
   <span id="page-895-0">
   </span>
   Generally, the peripherals' internal interrupt sources can be configured by the following common set of registers:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     <i>
      •
     </i>
     RAW (Raw Interrupt Status) register: This register indicates the raw interrupt status. Each bit in the register represents a specific internal interrupt source. When an interrupt source triggers, its RAW bit is set to 1.
    </li>
    <li block-type="ListItem">
     <i>
      •
     </i>
     ENA (Enable) register: This register is used to enable or disable the internal interrupt sources. Each bit in the ENA register corresponds to an internal interrupt source.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   By manipulating the ENA register, you can mask or unmask individual internal interrupt source as needed. When an internal interrupt source is masked (disabled), it will not generate an interrupt signal, but its value can still be read from the RAW register.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   ST (Status) register: This register reflects the status of enabled interrupt sources. Each bit in the ST register corresponds to a specific internal interrupt source. The ST bit being 1 means that both the corresponding RAW bit and ENA bit are 1, indicating that the interrupt source is triggered and not masked. The other combinations of the RAW bit and ENA bit will result in the ST bit being 0.
  </p>
  <p block-type="Text">
   The configuration of ENA/RAW/ST registers is shown in Table 34.6-4.
  </p>
  <p block-type="Text">
   <i>
    •
   </i>
   CLR (Clear) register: The CLR register is responsible for clearing the internal interrupt sources. Writing 1 to the corresponding bit in the CLR register clears the interrupt source.
  </p>
  <table>
   <tbody>
    <tr>
     <th>
     </th>
     <th>
      Table 34.6-4. Configuration of ENA/RAW/ST Registers
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      ENA Bit Value
     </td>
     <td>
      RAW Bit Value
     </td>
     <td>
      ST Bit Value
     </td>
    </tr>
    <tr>
     <td>
      0
     </td>
     <td>
      Ignored
     </td>
     <td>
      0
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   Table 34.6-4. Configuration of ENA/RAW/ST Registers
  </p>
  <h1>
   Revision History
  </h1>
  <table>
   <tbody>
    <tr>
     <th>
      Revision History
     </th>
     <th>
     </th>
     <th>
     </th>
    </tr>
    <tr>
     <td>
      Date
      <br/>
      2025-05-08
     </td>
     <td>
      Version
      <br/>
      v1.3
     </td>
     <td>
      Release notes
      <br/>
      Updated the following chapters:
      <br/>
      • Chapter
      <br/>
      2
      <br/>
      GDMA
      <br/>
      Controller
      <br/>
      (GDMA):
      <br/>
      Added
      <br/>
      descriptions
      <br/>
      for
      <br/>
      the
      <br/>
      GDMA_OUTFIFO_OVF_CHn_INT,
      <br/>
      GDMA_OUTFIFO_UDF_CHn_INT,
      <br/>
      GDMA_INFIFO_OVF_CHn_INT,
      <br/>
      and
      <br/>
      GDMA_INFIFO_UDF_CHn_INT
      <br/>
      in
      <br/>
      terrupts
      <br/>
      • Chapter 34 On-Chip Sensor and Analog Signal Processing: Corrected "-
     </td>
    </tr>
    <tr>
     <td>
      2025-01-14
     </td>
     <td>
      v1.2
     </td>
     <td>
      0.5" to "+0.5" in the ADC filter formula
      <br/>
      Adjusted the order of chapters
      <br/>
      Updated the following chapters:
      <br/>
      • Chapter 1 ESP-RISC-V CPU: Fixed the bit position of mte and added clari
      <br/>
      fication that the tcontrol register complies with the RISC-V External Debug
      <br/>
      Support Version 0.13.2
      <br/>
      • Chapter 2 GDMA Controller (GDMA): Updated the descriptions of suc_eof
      <br/>
      and the EOF flag
      <br/>
      • Chapter 8 Interrupt Matrix (INTERRUPT): Updated I2S1_INT to I2S_INT
      <br/>
      • Chapter 9 Low-power Management: Updated the description of prede
      <br/>
      fined low-power modes
      <br/>
      • Chapter 16 System Registers (SYSREG):
      <br/>
      – Updated the DMA sources in the notes under Table 16.3-2 according
      <br/>
      to the GDMA chapter
      <br/>
      – Removed description about I2S1
      <br/>
      • Chapter 17 Debug Assistant (ASSIST_DEBUG): Updated the DMA sources
      <br/>
      in Table 17.4-3 according to the GDMA chapter
      <br/>
      • Chapter 26 UART Controller (UART): Updated descriptions about clearing
      <br/>
      the wake_up signal
      <br/>
      • Chapter 27 SPI Controller (SPI): Updated the description of register
      <br/>
      SPI_DIN_MODE_REG and added the description to clk_hclk.
      <br/>
      • Chapter 30 USB Serial/JTAG Controller (USB_SERIAL_JTAG): Added a
      <br/>
      note in Section 30.4 stating that burning certain eFuse can affect the
      <br/>
      normal operation of USB Serial/JTAG controller.
      <br/>
      • Chapter 32 LED PWM Controller (LEDC): Updated the lowest resolution
      <br/>
      in Table 32.3-1
      <br/>
      • Chapter 34 On-Chip Sensor and Analog Signal Processing: Removed de
      <br/>
      scriptions about the internal voltage/signal in SAR ADC2 measurement
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Revision History
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td>
      Date
      <br/>
      2024-01-19
     </td>
     <td>
      Version
      <br/>
      v1.1
     </td>
     <td>
      Cont'd from previous page
      <br/>
      Release notes
      <br/>
      Added Section Programming Reserved Register Field and Section Interrupt
      <br/>
      Configuration Registers
      <br/>
      Updated register prefix APB_CTRL to SYSCON
      <br/>
      Updated the following chapters:
      <br/>
      • Chapter 5 IO MUX and GPIO Matrix (GPIO, IO MUX): Updated the descrip
      <br/>
      tion in Section 5.9, and deleted the GPIO_PCPU_NMI_INT_REG register
      <br/>
      and related information
      <br/>
      • Chapter 7 Chip Boot Control:
      <br/>
      Added SPI Download Boot mode, re
      <br/>
      named Download Boot mode to Joint Download mode in Section 7.2,
      <br/>
      and provided more details about how FUSE_DIS_FORCE_DOWNLOAD
      <br/>
      and EFUSE_DIS_DOWNLOAD_MODE control chip boot mode
      <br/>
      • Chapter
      <br/>
      8
      <br/>
      Interrupt
      <br/>
      Matrix
      <br/>
      (INTERRUPT):
      <br/>
      Deleted
      <br/>
      the
      <br/>
      INTER
      <br/>
      RUPT_CORE0_GPIO_INTERRUPT_PRO_NMI_MAP_REG
      <br/>
      register
      <br/>
      and
      <br/>
      related information
      <br/>
      • Chapter 9 Low-power Management: Updated the description of register
      <br/>
      RTC_CNTL_WDT_WKEY
      <br/>
      • Chapter
      <br/>
      11
      <br/>
      Timer
      <br/>
      Group
      <br/>
      (TIMG):
      <br/>
      Updated
      <br/>
      the
      <br/>
      description
      <br/>
      TIMG_WDT_CLK_PRESCALE
      <br/>
      • Chapter 14 Permission Control (PMS): Removed ROM_Table related de
      <br/>
      scription
      <br/>
      • Chapter 26 UART Controller (UART): Updated Figure 26.3-1 UART Archi
      <br/>
      tecture Overview and the number of rising edges required to generate
      <br/>
      the wake_up signal
      <br/>
      • Chapter
      <br/>
      28
      <br/>
      I2C
      <br/>
      Controller
      <br/>
      (I2C):
      <br/>
      Updated
      <br/>
      I2C
      <br/>
      timeout
      <br/>
      configura
      <br/>
      tion
      <br/>
      and
      <br/>
      the
      <br/>
      corresponding
      <br/>
      descriptions
      <br/>
      of
      <br/>
      I2C_TIME_OUT_VALUE,
     </td>
    </tr>
   </tbody>
  </table>
  <p>
  </p>
  <table>
   <tbody>
    <tr>
     <th>
      Revision History
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td rowspan="14">
      Date
      <br/>
      2022-12-16
     </td>
     <td rowspan="21">
      Version
      <br/>
      v0.7
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Cont'd from previous page
     </td>
    </tr>
    <tr>
     <td>
      Release notes
     </td>
    </tr>
    <tr>
     <td>
      Added the following chapter:
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 15 World Controller (WCL)
     </td>
    </tr>
    <tr>
     <td>
      Updated the following chapters:
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 1 ESP-RISC-V CPU
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 3 System and Memory
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 4 eFuse Controller (EFUSE)
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 9 Low-power Management
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 17 Debug Assistant (ASSIST_DEBUG)
      <br/>
      • Chapter 23 External Memory Encryption and Decryption (XTS_AES)
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 24 Random Number Generator (RNG)
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 29 I2S Controller (I2S)
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 34 On-Chip Sensor and Analog Signal Processing
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Updated clock names:
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      • FOSC_CLK: renamed as RC_FAST_CLK
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      • FOSC_DIV_CLK: renamed as RC_FAST_DIV_CLK
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      • RTC_CLK: renamed as RC_SLOW_CLK
     </td>
    </tr>
    <tr>
     <td rowspan="3">
     </td>
     <td>
      • SLOW_CLK: renamed as RTC_SLOW_CLK
     </td>
    </tr>
    <tr>
     <td>
      • FAST_CLK: renamed as RTC_FAST_CLK
     </td>
    </tr>
    <tr>
     <td>
      • PLL_160M_CLK: renamed as PLL_F160M_CLK
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td rowspan="4">
      v0.6
     </td>
     <td>
      • PLL_240M_CLK: renamed as PLL_D2_CLK
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      Updated the Glossary section
     </td>
    </tr>
    <tr>
     <td rowspan="2">
      2022-02-16
     </td>
     <td>
      Added the following chapters:
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 27 SPI Controller (SPI)
     </td>
    </tr>
    <tr>
     <td rowspan="13">
      2022-01-12
     </td>
     <td rowspan="12">
      v0.5
     </td>
     <td>
      • Chapter 29 I2S Controller (I2S)
     </td>
    </tr>
    <tr>
     <td>
      Added the following chapters:
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 9 Low-power Management
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 23 External Memory Encryption and Decryption (XTS_AES)
     </td>
    </tr>
    <tr>
     <td>
      Updated the following Chapters:
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 1 ESP-RISC-V CPU, Section 1.4.1 by adding three GPIO Access
     </td>
    </tr>
    <tr>
     <td>
      CSRs; Section 1.5 by removing the list of CPU interrupt registers and pro
     </td>
    </tr>
    <tr>
     <td>
      viding redirection to Chapter 8 Interrupt Matrix (INTERRUPT)
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 3 System and Memory
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 4 eFuse Controller (EFUSE)
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 19 HMAC Accelerator (HMAC)
     </td>
    </tr>
    <tr>
     <td>
      • Chapter 20 RSA Accelerator (RSA)
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
      • Chapter 22 Digital Signature (DS)
     </td>
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <th>
      Revision History
     </th>
     <th>
     </th>
     <th>
      GoBack
     </th>
    </tr>
    <tr>
     <td>
      Date
      <br/>
      2021-10-28
     </td>
     <td>
      Version
      <br/>
      v0.4
     </td>
     <td>
      Cont'd from previous page
      <br/>
      Release notes
      <br/>
      Added the following chapters:
      <br/>
      • Chapter 8 Interrupt Matrix (INTERRUPT)
      <br/>
      • Chapter 17 Debug Assistant (ASSIST_DEBUG)
      <br/>
      • Chapter 28 I2C Controller (I2C)
      <br/>
      • Chapter 34 On-Chip Sensor and Analog Signal Processing
      <br/>
      • Chapter VII
      <br/>
      Updated the following Chapters:
      <br/>
      • Chapter 4 eFuse Controller (EFUSE)
     </td>
    </tr>
    <tr>
     <td>
      2021-08-05
     </td>
     <td>
      v0.3
     </td>
     <td>
      • Chapter 33 Remote Control Peripheral (RMT)
      <br/>
      Added the following chapters:
      <br/>
      • Chapter 10 System Timer (SYSTIMER)
      <br/>
      • Chapter 12 Watchdog Timers (WDT)
      <br/>
      • Chapter 13 XTAL32K Watchdog Timers (XTWDT)
      <br/>
      • Chapter 16 System Registers (SYSREG)
      <br/>
      • Chapter 19 HMAC Accelerator (HMAC)
      <br/>
      • Chapter 22 Digital Signature (DS)
      <br/>
      • Chapter 30 USB Serial/JTAG Controller (USB_SERIAL_JTAG)
      <br/>
      • Chapter 33 Remote Control Peripheral (RMT)
      <br/>
      Updated the following Chapters:
      <br/>
      • Chapter 4 eFuse Controller (EFUSE)
      <br/>
      • Chapter 5 IO MUX and GPIO Matrix (GPIO, IO MUX)
      <br/>
      • Chapter 7 Chip Boot Control
     </td>
    </tr>
    <tr>
     <td>
      2021-05-27
     </td>
     <td>
      v0.2
     </td>
     <td>
      • Chapter 31 Two-wire Automotive Interface (TWAI)
      <br/>
      Added the following chapters:
      <br/>
      • Chapter 2 GDMA Controller (GDMA)
      <br/>
      • Chapter 4 eFuse Controller (EFUSE)
      <br/>
      • Chapter 11 Timer Group (TIMG)
      <br/>
      • Chapter 26 UART Controller (UART)
      <br/>
      • Chapter 32 LED PWM Controller (LEDC)
      <br/>
      Updated the Chapter 5 IO MUX and GPIO Matrix (GPIO, IO MUX) Adjusted the
     </td>
    </tr>
    <tr>
     <td>
     </td>
     <td>
     </td>
     <td>
      order of chapters
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   <img src="_page_901_Picture_0.jpeg"/>
  </p>
  <h4>
   Disclaimer and Copyright Notice
  </h4>
  <p block-type="Text">
   Information in this document, including URL references, is subject to change without notice.
  </p>
  <p block-type="Text">
   ALL THIRD PARTY'S INFORMATION IN THIS DOCUMENT IS PROVIDED AS IS WITH NO WARRANTIES TO ITS AUTHENTICITY AND ACCURACY.
  </p>
  <p block-type="Text">
   NO WARRANTY IS PROVIDED TO THIS DOCUMENT FOR ITS MERCHANTABILITY, NON-INFRINGEMENT, FITNESS FOR ANY PARTICULAR PURPOSE, NOR DOES ANY WARRANTY OTHERWISE ARISING OUT OF ANY PROPOSAL, SPECIFICATION OR SAMPLE.
  </p>
  <p block-type="Text">
   All liability, including liability for infringement of any proprietary rights, relating to use of information in this document is disclaimed. No licenses express or implied, by estoppel or otherwise, to any intellectual property rights are granted herein.
  </p>
  <p block-type="Text">
   The Wi-Fi Alliance Member logo is a trademark of the Wi-Fi Alliance. The Bluetooth logo is a registered trademark of Bluetooth SIG.
  </p>
  <p block-type="Text">
   All trade names, trademarks and registered trademarks mentioned in this document are property of their respective owners, and are hereby acknowledged.
  </p>
  <p block-type="Text">
   Copyright © 2025 Espressif Systems (Shanghai) Co., Ltd. All rights reserved.
  </p>
  <p block-type="Text">
   www.espressif.com
  </p>
 </body>
</html>
